// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"jimu/shareUtils":function(){define("dojo/_base/lang esri/request dojo/promise/all jimu/shared/basePortalUrlUtils dojo/Deferred esri/core/lang jimu/portalUtils jimu/utils esri/core/urlUtils".split(" "),function(f,h,p,k,d,l,e,m,b){var n={getBaseHrefUrl:function(a){var c="";window.isXT?c=window.location.protocol+"//"+window.location.host+window.appInfo.appPath:(c=m.urlToObject(window.location.href).query||{},c=c.appid?a+"apps/webappviewer3d/index.html?appid\x3d"+c.appid:c.id?a+"apps/webappviewer3d/index.html?id\x3d"+
c.id:m.getAppHref());return c},addQueryParamToUrl:function(a,c,g,q){a=b.urlToObject(a);a.query||(a.query={});a.query[c]=g;c=a.path;for(var d in a.query)g=a.query[d],!0===q&&(g=encodeURIComponent(g)),c=c===a.path?c+"?"+d+"\x3d"+g:c+"\x26"+d+"\x3d"+g;return c},removeQueryParamFromUrl:function(a,c,g){a=b.urlToObject(a);a.query&&delete a.query[c];c=a.path;for(var q in a.query){var d=a.query[q];!0===g&&(d=encodeURIComponent(d));c=c===a.path?c+"?"+q+"\x3d"+d:c+"\x26"+q+"\x3d"+d}return c},getShareUrlContent:function(a){return"\x3cdiv class\x3d'marker-feature-action-popup'\x3e\x3cdiv class\x3d'item'\x3e\x3cspan class\x3d'sub-title jimu-float-leading'\x3e"+
window.jimuNls.common.url+"\x3c/span\x3e\x3cinput type\x3d'text' class\x3d'jimu-float-leading' readonly\x3d'readonly' value\x3d"+a+"\x3e\x3c/input\x3e\x3c/div\x3e\x3c/div\x3e"},getShareUrl:function(a,c,g){var b=n.getBaseHrefUrl(window.portalUrl),d="",e,m,f,l,h;c&&(c.longitude&&c.latitude?(e=c.longitude,m=c.latitude,d=c.longitude+","+c.latitude+","):c.x&&c.y&&c.spatialReference&&c.spatialReference.wkid&&(f=c.x,l=c.y,h=c.spatialReference.wkid,d=c.x+","+c.y+","+c.spatialReference.wkid));b=n.addQueryParamToUrl(b,
"marker",d,!0);b=n.addQueryParamToUrl(b+",,,","markertemplate",encodeURIComponent(JSON.stringify({title:c.title,x:f,y:l,wkid:h,longitude:e,latitude:m,isIncludeShareUrl:g})));c=a.getLevel();return b="number"===typeof c&&-1!==c?n.addQueryParamToUrl(b,"level",a.getLevel(),!0):n.addQueryParamToUrl(b,"scale",a.getScale(),!0)},getXyContent:function(a){var c="\x3cdiv class\x3d'marker-feature-action-popup'\x3e";a.longitude&&a.latitude?c+="\x3cdiv class\x3d'item clearFix'\x3e\x3cspan class\x3d'sub-title'\x3e"+
window.jimuNls.common.longitude+"\x3c/span\x3e\x3cspan class\x3d'val'\x3e"+m.localizeNumber(parseFloat(a.longitude).toFixed(4))+"\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d'item clearFix'\x3e\x3cspan class\x3d'sub-title'\x3e"+window.jimuNls.common.latitude+"\x3c/span\x3e\x3cspan class\x3d'val'\x3e"+m.localizeNumber(parseFloat(a.latitude).toFixed(4))+"\x3c/span\x3e\x3c/div\x3e":a.x&&a.y&&(c+="\x3cdiv class\x3d'item clearFix'\x3e\x3cspan class\x3d'sub-title'\x3ex\x3c/span\x3e\x3cspan class\x3d'val'\x3e"+
m.localizeNumber(parseFloat(a.x).toFixed(4))+"\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d'item'\x3e\x3cspan class\x3d'sub-title'\x3ey\x3c/span\x3e\x3cspan class\x3d'val'\x3e"+m.localizeNumber(parseFloat(a.y).toFixed(4))+"\x3c/span\x3e\x3c/div\x3e");return c+"\x3c/div\x3e"},_isUserOwnTheApp:function(a){return a&&a.username&&a.username===window.appInfo.appOwner?!0:!1},getItemByUserAndItemId:function(a,c,g,b){var e=new d;b=k.getStandardPortalUrl(b);b=b+"/sharing/rest/content/users/"+(c?c.username?c.username:
c.email:g.email);if(l.isDefined(a.folderId)&&"/"!==a.folderId||l.isDefined(a.ownerFolder)&&"/"!==a.ownerFolder)b+="/"+(a.folderId||a.ownerFolder);b+="/items/"+a.id;h({url:b,handleAs:"json",content:{f:"json"},callbackParamName:"callback"}).then(f.hitch(this,function(a){e.resolve(a)}),f.hitch(this,function(a){console.error(a);e.reject(a)}));return e},_getProfile:function(a,c){var b=new d;a=k.getUserUrl(c,a.owner);h({url:a,handleAs:"json",content:{f:"json"},callbackParamName:"callback"}).then(f.hitch(this,
function(a){b.resolve(a)}),f.hitch(this,function(a){console.error(a);b.reject(a)}));return b},_unshareItemById:function(a,c,b){var g=new d;b=k.getStandardPortalUrl(b);b+="/sharing/rest/content/items/"+c+"/unshare";c={f:"json"};c=f.mixin(c,a);h({url:b,handleAs:"json",content:c,callbackParamName:"callback"},{usePost:!0}).then(f.hitch(this,function(a){g.resolve(a)}),f.hitch(this,function(a){console.error(a);g.reject(a)}));return g},canSharePublic:function(a){return!a.selfUrl||!0!==a.canSharePublic&&
!1!==a.canSharePublic?!0:a.canSharePublic},unshareItemsByUser:function(a,c,b){var g=new d;b=k.getStandardPortalUrl(b);b+="/sharing/rest/content/users/"+a+"/unshareItems";a={f:"json"};a=f.mixin(a,c);h({url:b,handleAs:"json",content:a,callbackParamName:"callback"},{usePost:!0}).then(f.hitch(this,function(a){g.resolve(a)}),f.hitch(this,function(a){console.error(a);g.reject(a)}));return g},unshareItems:function(a,c,b){var g=new d;b=k.getStandardPortalUrl(b);b+="/sharing/rest/content/users/"+(c.owner||
a.email)+"/unshareItems";a={f:"json"};a=f.mixin(a,c);h({url:b,handleAs:"json",content:a,callbackParamName:"callback"},{usePost:!0}).then(f.hitch(this,function(a){g.resolve(a)}),f.hitch(this,function(a){console.error(a);g.reject(a)}));return g},shareItemsByUser:function(a,c,b){var g=new d;b=k.getStandardPortalUrl(b);b+="/sharing/rest/content/users/"+a+"/shareItems";a={f:"json"};a=f.mixin(a,c);h({url:b,handleAs:"json",content:a,callbackParamName:"callback"},{usePost:!0}).then(f.hitch(this,function(a){g.resolve(a)}),
f.hitch(this,function(a){console.error(a);g.reject(a)}));return g},shareItems:function(a,c,b){var g=new d;b=k.getStandardPortalUrl(b);b+="/sharing/rest/content/users/"+(c.owner||a.email)+"/shareItems";a={f:"json"};a=f.mixin(a,c);h({url:b,handleAs:"json",content:a,callbackParamName:"callback"},{usePost:!0}).then(f.hitch(this,function(a){g.resolve(a)}),f.hitch(this,function(a){console.error(a);g.reject(a)}));return g},getItemsGroups:function(a,c){var b=new d;c=k.getStandardPortalUrl(c);c+="/sharing/rest/content/items/"+
a.id+"/groups";h({url:c,handleAs:"json",content:{f:"json"},callbackParamName:"callback"},{usePost:!0}).then(f.hitch(this,function(a){b.resolve(a)}),f.hitch(this,function(a){console.error(a);b.reject(a)}));return b},isSharedToPublic:function(a){return window.isXT?!1:null===a?!0:"undefined"!==typeof a&&"undefined"!==typeof a.item&&"undefined"!==typeof a.item.access&&"public"===a.item.access?!0:!1},isShowSocialMediaLinks:function(a){return window.isXT?!0:null===a?!0:"undefined"!==typeof a&&"undefined"!==
typeof a.item&&"undefined"!==typeof a.item.access&&"private"===a.item.access?!1:!0},getItemShareInfo:function(a){var c=new d,b="";if(window.isXT)return c.resolve(null);b=m.urlToObject(m.getAppHref()).query||{};b=b.id||b.appid;if("undefined"===typeof b||""===b)return c.resolve(null);e.getPortal(a).getItemById(b).then(f.hitch(this,function(a){var b={};b.item=a;b.item&&"undefined"===typeof b.item.sharing&&b.item.access&&(b.item.sharing={access:b.item.access});c.resolve(b)}),f.hitch(this,function(a){console.log(a);
c.resolve(null)}));return c},getShareInfo:function(a){var c=e.getPortal(a),b=new d,l="";if(window.isXT)return b.resolve(null);l=m.urlToObject(m.getAppHref()).query||{};l=l.id||l.appid;if("undefined"===typeof l||""===l)return b.resolve(null);p({getUser:c.getUser(),loadSelfInfo:c.loadSelfInfo(),getItem:c.getItemById(l)}).then(f.hitch(this,function(c){var d={};d.item=c.getItem;d.item&&d.item.ownerFolder&&d.item.ownerFolder.length&&"/"!==d.item.ownerFolder&&(d.item.folderId=d.item.ownerFolder);"undefined"===
typeof d.item.sharing&&d.item.access&&(d.item.sharing={access:d.item.access});d.user=c.getUser;n._setUserRole(c.loadSelfInfo,d);d.currentUser=d.user;d.isAdmin=!1;d.userRole&&(d.userRole.isAdmin()||d.userRole.isCustom()&&d.userRole.canUpdateOrgItems())?(d.isAdmin=!0,d.item.owner!==d.currentUser.name?n._getProfile(d.item,a).then(f.hitch(this,function(a){d.itemUser=a;d.itemUser.orgId!==d.currentUser.orgId&&(d.isAdmin=!1);b.resolve(d)})):(d.itemUser=d.currentUser,b.resolve(d))):(d.currentUser&&(d.itemUser=
d.currentUser),b.resolve(d))}),f.hitch(this,function(a){console.log(a);b.resolve(null)}));return b},_setUserRole:function(a,c){c.userPortalUrl=a.urlKey?a.urlKey+"."+a.customBaseUrl:this.portalUrl;!a||a.code||a.message||(c.organization=a);if(a&&a.user)c.userRole=new Role({id:a.user.roleId?a.user.roleId:a.user.role,role:a.user.role}),c._isCustomRole=c.userRole.isCustom(),c._roleCanShareToGroup=c._isCustomRole&&c.userRole.canShareItemToGroup(),c._roleCanShareToOrg=c._isCustomRole&&c.userRole.canShareItemToOrg(),
c._roleCanSharePublic=c._isCustomRole&&c.userRole.canShareItemToPublic(),c._roleCanShare=c._roleCanShareToGroup||c._roleCanShareToOrg||c._roleCanShareToPublic,c._roleCanUpdateItems=c._isCustomRole&&c.userRole.canUpdateOrgItems(),c._roleCanShareOthersItemsToGroup=c._isCustomRole&&c.userRole.canShareOthersItemsToGroup(),c._roleCanShareOthersItemsToOrg=c._isCustomRole&&c.userRole.canShareOthersItemsToOrg(),c._roleCanShareOthersItemsToPublic=c._isCustomRole&&c.userRole.canShareOthersItemsToPublic(),c._roleCanShareOthersItems=
c._isCustomRole&&(c.userRole.canShareOthersItemsToGroup()||c.userRole.canShareOthersItemsToOrg()||c._roleCanShareOthersItemsToPublic),c._orgUserCanSharePublicOrOverride=c.organization&&(!0===c.organization.canSharePublic&&(!c._isCustomRole||c._roleCanSharePublic||c._roleCanShareOthersItemsToPublic)||c.userRole.isAdmin());else return!1},getItemById:function(a,c){var b=new d;c=k.getStandardPortalUrl(c);c+="/sharing/rest/content/items/"+a.id;h({url:c,handleAs:"json",content:{f:"json"},callbackParamName:"callback"}).then(f.hitch(this,
function(a){b.resolve(a)}),f.hitch(this,function(a){console.error(a);b.reject(a)}));return b},disableWebMapPopup:function(a){a&&a.setInfoWindowOnClick&&a.setInfoWindowOnClick(!1)},enableWebMapPopup:function(a){a&&a.setInfoWindowOnClick&&a.setInfoWindowOnClick(!0)}};return n})},"jimu/dijit/ShareLink":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/_base/array dojo/dom-class dojo/_base/html dojo/on dojo/topic dojo/query jimu/utils jimu/shareUtils dojo/text!./templates/ShareLink.html dojo/string dijit/form/Select dijit/form/NumberTextBox dojo/dom-attr dojo/Deferred esri/request esri/layers/GraphicsLayer dijit/form/TextBox dijit/form/Textarea dijit/form/RadioButton dijit/form/Select dijit/form/CheckBox dijit/form/NumberTextBox dijit/form/SimpleTextarea dijit/form/ValidationTextBox".split(" "),
function(f,h,p,k,d,l,e,m,b,n,a,c,g,q,v,x,w,r,y,z,A){return f([h,p,k],{templateString:q,declaredClass:"jimu.dijit.ShareLink",bitlyUrl:"https://arcg.is/prod/shorten",share:{shareEmailSubject:"",shareTwitterTxt:"",languages:"ar cs da de en el es et fi fr he hr it ja ko lt lv nb nl pl pt-br pt-pt ro ru sr sv th tr zh-cn vi zh-hk zh-tw".split(" "),DEFAULT_MOBILE_LAYOUT:600},_hasZoomLevelMarkerAdded:!1,_hasMapScaleMarkerAdded:!1,_hasAddMarkerMarkerAdded:!1,HAS_INIT_URL:!1,postMixInProperties:function(){this.inherited(arguments);
this.nls=window.jimuNls.shareLink;this.nls.symbol=window.jimuNls.common.symbol;this.nls.label=window.jimuNls.common.label;this.nls.WKID=window.jimuNls.common.wkid||"wkid";this.nls.popupTitle=window.jimuNls.shareLink.popupTitle||"Pop-up title";this.nls.zoomLevel=window.jimuNls.shareLink.zoomLevel||"Zoom level";this.share.shareEmailSubject=this.nls.shareEmailSubject+" ${appTitle} ";this.share.shareTwitterTxt=this.nls.shareEmailSubject+"${appTitle}\n"},postCreate:function(){this.inherited(arguments);
this._initUI();this._initMap();this._showSocialMediaLinksByConfig()},constructor:function(a){a&&(this._portalUrl=a.portalUrl,this._isOnline=a.isOnline,this._appTitle=a.appTitle,this._isShowBackBtn=a.isShowBackBtn,this._isShowSocialMediaLinks=a.isShowSocialMediaLinks,this._isSharedToPublic=a.isSharedToPublic,this._isShowFindLocation=a.isShowFindLocation,this._config=a.config)},startup:function(){this.baseHrefUrl=g.getBaseHrefUrl(this._portalUrl);"undefined"===typeof this.optionSrc&&(this.optionSrc=
"currentMapExtent");this.updateUrl(null);this._initOptionsEvent()},destroy:function(){this._cleanMarkerStatus();this._mapClickHandler&&(this._mapClickHandler=null);this.inherited(arguments)},onShareToPublicChanged:function(a){this._isSharedToPublic=a;this.updateUrl(null);this._isSharedToPublic?e.add(this.shareTips,"displaynone"):e.remove(this.shareTips,"displaynone")},onCloseContainer:function(){this._cleanMarkerStatus()},updateShareLinkOptionsUI:function(a){a&&"undefined"!==typeof a.isShowFindLocation&&
this.findLocationRow&&(!1===a.isShowFindLocation?e.add(this.findLocationRow,"displaynone"):!0===a.isShowFindLocation&&e.remove(this.findLocationRow,"displaynone"))},_initMap:function(){window.isBuilder?(this.own(n.subscribe("app/mapLoaded",d.hitch(this,this._onMapLoaded))),this.own(n.subscribe("app/mapChanged",d.hitch(this,this._onMapLoaded)))):(this.own(n.subscribe("mapLoaded",d.hitch(this,this._onMapLoaded))),this.own(n.subscribe("mapChanged",d.hitch(this,this._onMapLoaded))));window._widgetManager.sceneView&&
(this.map=window._widgetManager.sceneView)},_onMapLoaded:function(a){this.map=a;this._mapEventUpdateUrls();this._addGraphicsLayer()},_mapEventUpdateUrls:function(){this.map&&this.own(this.map.watch("extent",d.hitch(this,this._mapEventHandler)))},_mapEventHandler:function(){this._isShareLinkOptionsShow()&&this.updateUrl()},_showSocialMediaLinksByConfig:function(){this._config&&this._config.socialMedias&&("undefined"!==typeof this._config.socialMedias.email&&!1===this._config.socialMedias.email&&e.add(this.emailShare,
"displaynone"),"undefined"!==typeof this._config.socialMedias.facebook&&!1===this._config.socialMedias.facebook&&e.add(this.FacebookShare,"displaynone"),"undefined"!==typeof this._config.socialMedias.twitter&&!1===this._config.socialMedias.twitter&&e.add(this.TwitterShare,"displaynone"),"undefined"!==typeof this._config.socialMedias.googlePlus&&!1===this._config.socialMedias.googlePlus&&e.add(this.googlePlusShare,"displaynone"))},_initUI:function(){this._isShowBackBtn?(r.set(this.backBtn,"title",
window.jimuNls.common.back),this.own(b(this.backBtn,"click",d.hitch(this,this._toggleLinkOptions))),this.own(b(this.linkOptions,"click",d.hitch(this,this._toggleLinkOptions)))):(e.add(this.backBtn,"displaynone"),e.add(this.linkOptions,"displaynone"));!1===this._isShowSocialMediaLinks&&e.toggle(this.socialNetworkLinks,"displaynone");!0===this._isSharedToPublic&&e.toggle(this.shareTips,"displaynone");this._setInputsClicktoSelect(this._linkUrlTextBox);this.own(b(this.googlePlusShare,"click",d.hitch(this,
this._toGooglePlus)));this._setInputsClicktoSelect(this._embedCodeTextArea);this._sizeOptions=new x({options:[{label:this.nls.smallSize,value:"small",selected:!0},{label:this.nls.mediumSize,value:"medium",selected:!1},{label:this.nls.largeSize,value:"large",selected:!1},{label:this.nls.customSize,value:"custom",selected:!1}],"class":"sizeOptionsSelect"});this._sizeOptions.placeAt(this.SizeSelect);this.own(b(this._sizeOptions,"change",function(a){switch(a){case "small":this._widthTextBox.set("value",
300);this._heightTextBox.set("value",200);e.add(this.CustomSizeContainer,"disable");this._updateEmbedCodeFrameSize();break;case "medium":this._widthTextBox.set("value",800);this._heightTextBox.set("value",600);e.add(this.CustomSizeContainer,"disable");this._updateEmbedCodeFrameSize();break;case "large":this._widthTextBox.set("value",1080);this._heightTextBox.set("value",720);e.add(this.CustomSizeContainer,"disable");this._updateEmbedCodeFrameSize();break;case "custom":e.remove(this.CustomSizeContainer,
"disable")}}.bind(this)));this._widthTextBox=new w({"class":"sizeTextBox inputsText",value:300,constraints:{pattern:"#",places:0}});this._widthTextBox.placeAt(this.CustomSizeContainer,1);this.own(b(this._widthTextBox,"change",function(a){200>a?this._widthTextBox.set("value",200>a?200:a):this._updateEmbedCodeFrameSize()}.bind(this)));this._heightTextBox=new w({"class":"sizeTextBox inputsText",value:200,constraints:{pattern:"#",places:0}});this._heightTextBox.placeAt(this.CustomSizeContainer,3);this.own(b(this._heightTextBox,
"change",function(a){200>a?this._heightTextBox.set("value",200>a?200:a):this._updateEmbedCodeFrameSize()}.bind(this)));this.mobileLayout.set("value",this.share.DEFAULT_MOBILE_LAYOUT);this.updateShareLinkOptionsUI({isShowFindLocation:this._isShowFindLocation});this._setInputsClicktoSelect(this.preview)},_setLinkUrl:function(a){this._linkUrlTextBox.set("value",a);r.set(this._linkUrlTextBox.domNode,"data-old",a)},_setEmbedCode:function(a){this._embedCodeTextArea.set("value",'\x3ciframe width\x3d"'+this._widthTextBox.value+
'" height\x3d"'+this._heightTextBox.value+'" frameborder\x3d"0" scrolling\x3d"no" allowfullscreen src\x3d"'+a+'"\x3e\x3c/iframe\x3e');r.set(this._embedCodeTextArea.domNode,"data-old-shortened",a)},_updateEmbedCodeFrameSize:function(a){a=this._embedCodeTextArea.get("value");a=a.replace(/width=\"[0-9]*\"/i,'width\x3d"'+this._widthTextBox.value+'"');a=a.replace(/height=\"[0-9]*\"/i,'height\x3d"'+this._heightTextBox.value+'"');this._embedCodeTextArea.set("value",a)},_initOptionsEvent:function(){var t=
c.has("ie")||c.has("edge")?"change":"KeyUp",u=a(".shareRadios",this.domNode);this.own(b(u,"click",d.hitch(this,function(a){this.optionSrc=r.get(a.srcElement||a.target,"data-id");this.updateUrl()})));u=a(".shareCheckBoxes",this.domNode);this.own(b(u,"click",d.hitch(this,function(){this.updateUrl()})));this.own(b(this.chooseCenterWithLevel_levels,"change",d.hitch(this,function(){this.updateUrl()})));this.own(b(this.chooseCenterWithScale_scales,"change",d.hitch(this,function(){this.updateUrl()})));this.own(b(this.setlanguage_languages,
"change",d.hitch(this,function(){this.updateUrl()})));this.own(b(this.findLocation_input,t,d.hitch(this,this.updateUrl)));this.own(b(this.queryFeature_field,"change",d.hitch(this,this._updateQueryFeature_Value)));this.own(b(this.queryFeature_value,"change",d.hitch(this,this.updateUrl)));this.own(b(this.mobileLayout,t,d.hitch(this,this.updateUrl)));this.own(b(this.authtoken,t,d.hitch(this,this.updateUrl)));this.own(b(this.addMarker_marker,"click",d.hitch(this,function(a){this._onMarkersClick(a)})));
this.own(b(this.addMarker_spatialReference,"change",d.hitch(this,this.updateUrl)));this.own(b(this.addMarker_title,t,d.hitch(this,this.updateUrl)));this.own(b(this.addMarker_symbolURL,t,d.hitch(this,this.updateUrl)));this.own(b(this.addMarker_label,t,d.hitch(this,this.updateUrl)));this.own(b(this.addMarker_level,"change",d.hitch(this,this.updateUrl)));this.own(b(this.chooseCenterWithLevel_marker,"click",d.hitch(this,function(a){this._onMarkersClick(a)})));this.own(b(this.chooseCenterWithScale_marker,
"click",d.hitch(this,function(a){this._onMarkersClick(a)})))},_onMarkersClick:function(a){g.disableWebMapPopup(this.map);this._unselectMarkerBtn();this._selectMarkerBtn(a);this._hidePopup();this._removeGraphicsLayer();this._mapClickHandler=b.once(this.map,"click",d.hitch(this,this._onMapClick))},_onMapClick:function(a){var b=a.mapPoint;this._addGraphicsLayerMarker(a);"chooseCenterWithLevel"===this.optionSrc?this._hasZoomLevelMarkerAdded=!1:"chooseCenterWithScale"===this.optionSrc?this._hasMapScaleMarkerAdded=
!1:"addMarker"===this.optionSrc&&(this._hasAddMarkerMarkerAdded=!1);this._unselectMarkerBtn();this.updateUrl(b);this._showPopup();g.enableWebMapPopup(this.map)},_hidePopup:function(){n.publish("ShareLink/onHideContainer")},_showPopup:function(){n.publish("ShareLink/onShowContainer")},_updateResUrls:function(a){"currentMapExtent"===this.optionSrc?this.resultUrl=this.baseHrefUrl:"chooseCenterWithLevel"===this.optionSrc?(!1===this._hasZoomLevelMarkerAdded&&(this.resultUrl=g.addQueryParamToUrl(this.baseHrefUrl,
"center",this.getMapCenter(this.map,a),!0),a&&a.x&&a.y&&(this._hasZoomLevelMarkerAdded=!0)),this.resultUrl=g.addQueryParamToUrl(this.resultUrl,"level",this._getMapLevel(),!0)):"chooseCenterWithScale"===this.optionSrc?(!1===this._hasMapScaleMarkerAdded&&(this.resultUrl=g.addQueryParamToUrl(this.baseHrefUrl,"center",this.getMapCenter(this.map,a),!0),a&&a.x&&a.y&&(this._hasMapScaleMarkerAdded=!0)),this.resultUrl=g.addQueryParamToUrl(this.resultUrl,"scale",this._getMapScale(),!0)):"findLocation"===this.optionSrc?
(a=this.findLocation_input.get("value"),this.resultUrl=g.addQueryParamToUrl(this.baseHrefUrl,"find",a,!0)):"queryFeature"===this.optionSrc?this._updateUrlByQueryFeatures():"addMarker"===this.optionSrc&&(!1===this._hasAddMarkerMarkerAdded?(this.resultUrl=g.addQueryParamToUrl(this.baseHrefUrl,"marker",this.getMapCenter(this.map,a,null,this._getWkid()),!0),this.resultUrl+=",",a&&a.x&&a.y&&(this._hasAddMarkerMarkerAdded=!0,this._lastAddMarkerParamObj=a)):(this.resultUrl=g.addQueryParamToUrl(this.baseHrefUrl,
"marker",this.getMapCenter(this.map,this._lastAddMarkerParamObj,null,this._getWkid()),!0),this.resultUrl+=","),this.resultUrl+=encodeURIComponent(this.addMarker_title.get("value")||""),this.resultUrl+=",",this.resultUrl+=encodeURIComponent(this.addMarker_symbolURL.get("value")||""),this.resultUrl+=",",this.resultUrl+=encodeURIComponent(this.addMarker_label.get("value")||""),a=this._getMapLevel(),this.resultUrl="number"===typeof a&&-1!==a?g.addQueryParamToUrl(this.resultUrl,"level",this._getMapLevel(),
!0):g.addQueryParamToUrl(this.resultUrl,"scale",this._getMapScale(),!0));this.resultUrl=g.removeQueryParamFromUrl(this.resultUrl,"mobileBreakPoint",!0);this.resultUrl=g.removeQueryParamFromUrl(this.resultUrl,"locale",!0);this.resultUrl=g.removeQueryParamFromUrl(this.resultUrl,"token",!0);this.overwirteMobileLayout.checked&&(this.resultUrl=g.addQueryParamToUrl(this.resultUrl,"mobileBreakPoint",this.mobileLayout.getValue(),!0));this.setlanguage.checked&&(this.resultUrl=g.addQueryParamToUrl(this.resultUrl,
"locale",this.setlanguage_languages.getValue(),!0));this.auth.checked&&(this.resultUrl=g.addQueryParamToUrl(this.resultUrl,"token",this.authtoken.getValue(),!0))},_updateUrlByQueryFeatures:function(){var a=this._getIdFromLayerChoose()||"",b=this.queryFeature_field.get("value"),c=this.queryFeature_value.get("value");this.resultUrl=g.addQueryParamToUrl(this.baseHrefUrl,"query",a,!0);b&&(this.resultUrl+=",",this.resultUrl+=b,c&&(this.resultUrl+=",",this.resultUrl+=c))},_updateQueryFeature_Layer:function(){this._updateUrlByQueryFeatures();
this._updateQueryFeature_Field();this._updateQueryFeature_Value();this.updateUrl()},_updateQueryFeature_Field:function(){var a=this._getFieldsFromLayerChoose(),b=[];this.queryFeature_field.removeOption(this.queryFeature_field.getOptions());l.forEach(a,d.hitch(this,function(a){-1<"esriFieldTypeString esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble".split(" ").indexOf(a.type)&&b.push({label:a.name,value:a.name})}));this.queryFeature_field.addOption(b);
this._updateUrlByQueryFeatures();this._updateQueryFeature_Value();this.updateUrl()},_updateQueryFeature_Value:function(){var a=[],b=this.queryFeature_field.get("value");a.push(b);this._query(a,this._getUrlFromLayerChoose(),this.map).then(d.hitch(this,function(a){var c=[],c=this._getQueryedValues(b,a);this.queryFeature_value.removeOption(this.queryFeature_value.getOptions());this.queryFeature_value.addOption(c);this._updateUrlByQueryFeatures();this.updateUrl()}))},_getIdFromLayerChoose:function(){var a=
null,b=this.layerChooserFromMapWithDropbox.getSelectedItem();b&&b.layerInfo&&b.layerInfo.id&&(a=b.layerInfo.id);return a},_getFieldsFromLayerChoose:function(){var a=[],b=this.layerChooserFromMapWithDropbox.getSelectedItem();b&&b.layerInfo&&b.layerInfo.layerObject&&b.layerInfo.layerObject.fields&&(a=b.layerInfo.layerObject.fields);return a},_getUrlFromLayerChoose:function(){var a="",b=this.layerChooserFromMapWithDropbox.getSelectedItem();b&&b.url&&(a=b.url);return a},_updateLinkOptionsUI:function(){a(".optionsMore",
this.domNode).style("display","none");a("."+this.optionSrc+"_optionsMore",this.domNode).style("display","block");this.overwirteMobileLayout.checked&&a(".share-options-overwirteMobileLayout_optionsMore",this.domNode).style("display","block");this.setlanguage.checked&&a(".share-options-language_optionsMore",this.domNode).style("display","block");this.auth.checked&&a(".share-options-auth_optionsMore",this.domNode).style("display","block")},_fixUrlIfIsOnline:function(a){if(this._isOnline&&this._isSharedToPublic){var b=
"",b=window.isBuilder?window.top.location.protocol:window.location.protocol,c=this._getUrlQueryString(a);a=this._getOnlinePublicUrl(a);a=b+"//"+a+"/apps/webappviewer3d/index.html"+c}return a},updateUrl:function(a){this._updateResUrls(a);this._updateLinkOptionsUI();!0!==this.config.useOrgUrl&&(this.resultUrl=this._fixUrlIfIsOnline(this.resultUrl));this.preview.set("value",this.resultUrl);null===a&&this._generateShortenUrl();this._updateEmailHref()},_generateShortenUrl:function(){var a=this.preview.get("value");
try{this.isUseShortenUrl()?this.shortenUrl(a,this.bitlyUrl).then(d.hitch(this,function(a){this._useShortenUrl(a);this.HAS_INIT_URL=!0}),d.hitch(this,function(b){this._useLengthenUrl(a,b);this.HAS_INIT_URL=!0})):(this._useLengthenUrl(a),this.HAS_INIT_URL=!0)}catch(u){console.error(u),this.HAS_INIT_URL=!0}},_useShortenUrl:function(a){this.shortenedUrl=a;this._setLinkUrl(a);this._setEmbedCode(a)},_useLengthenUrl:function(a){a=a||"";this._setLinkUrl(a);this._setEmbedCode(a)},_toFacebook:function(){var a=
"http://www.facebook.com/sharer/sharer.php?u\x3d"+encodeURIComponent(this._linkUrlTextBox.get("value"))+"\x26t\x3d"+encodeURIComponent(c.stripHTML(this.socialNetworkTitle(this._appTitle)));window.open(a,"","toolbar\x3d0,status\x3d0,width\x3d626,height\x3d436")},_toTwitter:function(){var a=v.substitute(this.share.shareTwitterTxt,{appTitle:c.stripHTML(this._appTitle)}),b=this._linkUrlTextBox.get("value");window.open("http://twitter.com/home?status\x3d"+encodeURIComponent(a+b+"\n@ArcGISOnline"),"","toolbar\x3d0,status\x3d0,width\x3d626,height\x3d436")},
_updateEmailHref:function(){var a="mailto:?subject\x3d"+v.substitute(this.share.shareEmailSubject,{appTitle:c.stripHTML(this._appTitle)}),b=this.preview.get("value"),a=a+("\x26body\x3d"+encodeURIComponent(this.nls.shareEmailTxt1)+"%0D%0A%0D%0A"+c.stripHTML(this._appTitle)),a=a+("%0D%0A"+encodeURIComponent(b)),a=a+("%0D%0A%0D%0A"+encodeURIComponent(this.nls.shareEmailTxt2)),a=a+("%0D%0A%0D%0A"+encodeURIComponent(this.nls.shareEmailTxt3));m.setAttr(this.emailShare,"href",a)},_toGooglePlus:function(){var a=
this._linkUrlTextBox.get("value"),a="http://plus.google.com/share?url\x3d"+encodeURIComponent(a);window.open(a,"","toolbar\x3d0,status\x3d0,width\x3d626,height\x3d436")},_toggleLinkOptions:function(){g.enableWebMapPopup(this.map);var b=a(".shareOptionsWrapper",this.domNode.parentNode||this.domNode.parentElement),c=a(".shareUrlsWrapper",this.domNode),d=a(".shareLinkOptionsWrapper",this.domNode);this._isShareLinkOptionsShow()?(n.publish("ShareLink/onHideLinkOptions"),this._cleanMarkerStatus(),this._generateShortenUrl()):
n.publish("ShareLink/onShowLinkOptions");b&&b[0]&&e.toggle(b[0],"displaynone");e.toggle(c[0],"displaynone");e.toggle(d[0],"displaynone")},_moreOptionsExpandCollapse:function(){e.toggle(this.MoreOptionsContainer,"displaynone");e.toggle(this.MoreOptionsIcon,"rotate")},_setInputsClicktoSelect:function(a){r.set(a,"onclick","this.select()");r.set(a,"onmouseup","return false;")},isUseShortenUrl:function(){return location.hostname.endWith("esri.com")||location.hostname.endWith("arcgis.com")?!0:!1},shortenUrl:function(a,
b){var c=new y;a=g.addQueryParamToUrl(b,"longUrl",a,!0);a=g.addQueryParamToUrl(a,"format","json",!0);z(a,{responseType:"json",callbackParamName:"callback",query:{f:"json"}}).then(d.hitch(this,function(a){a&&a.data&&200===a.data.status_code&&a.data.data&&a.data.data.url&&0<a.data.data.url.length?c.resolve(a.data.data.url):c.reject(a)}),d.hitch(this,function(a){console.log("can't fetch shortenUrl "+a);c.reject(a)}));return c},socialNetworkTitle:function(a){100<a.length&&(a=a.substring(0,97)+"...");
return a},getMapExtent:function(a){a=a.extent;var b="";a.spatialReference.wkid?b=a.spatialReference.wkid:!a.spatialReference.wkid&&a.spatialReference.wkt&&(b="wkt\x3d"+a.spatialReference.wkt);return null!==a?this._roundValue(a.xmin,1E4)+","+this._roundValue(a.ymin,1E4)+","+this._roundValue(a.xmax,1E4)+","+this._roundValue(a.ymax,1E4)+","+b:""},_roundValue:function(a,b){return Math.round(a*b)/b},getMapCenter:function(a,b,c,d){c=c?c:",";var e=null;b&&b.x&&b.y?e=b:a.extent.getCenter()&&(e=a.extent.getCenter());
a=d||e.spatialReference.wkid;return null!==e?this._roundValue(e.x,1E4)+c+this._roundValue(e.y,1E4)+c+a:""},_getMapLevel:function(){return this.map.getLevel()},_getMapScale:function(){return this.map.getScale()},_getWkid:function(){return this.addMarker_spatialReference.get("value")||""},_query:function(){},_getQueryedValues:function(a,b){var c=[];l.forEach(b.features,d.hitch(this,function(b){b=b.attributes[a]+"";c.push({label:b,value:b})}));return c},_addGraphicsLayer:function(){window.isBuilder||
"undefined"!==typeof this._graphicsLayer||(this._graphicsLayer=new A,this.map.addLayer(this._graphicsLayer))},_removeGraphicsLayer:function(){window.isBuilder||"undefined"===typeof this._graphicsLayer||(this._graphicsLayer.remove(this._markerGraphic),this._markerGraphic=null)},_addGraphicsLayerMarker:function(a){window.isBuilder||"undefined"===typeof this._graphicsLayer||(this._markerGraphic=this._getMarkerGraphic(a.mapPoint),this._graphicsLayer.add(this._markerGraphic))},_getMarkerGraphic:function(){},
_unselectMarkerBtn:function(){for(var b=a(".markers",this.domNode),c=0,d=b.length;c<d;c++)e.remove(b[c],"selected")},_selectMarkerBtn:function(a){e.add(a.srcElement||a.target,"selected")},_cleanMarkerStatus:function(){this._mapClickHandler&&this._mapClickHandler.remove&&this._mapClickHandler.remove();this._unselectMarkerBtn();this._removeGraphicsLayer()},_isShareLinkOptionsShow:function(){var b=a(".shareLinkOptionsWrapper",this.domNode);return!e.contains(b[0],"displaynone")},_getUrlQueryString:function(a){var b=
"";-1!==a.indexOf("?")&&(b=a.substring(a.indexOf("?")));return b},_getOnlinePublicUrl:function(){var a="www.arcgis.com",b=this._portalUrl;b&&"string"===typeof b&&(-1<b.indexOf("devext.arcgis.com")?a="devext.arcgis.com":-1<b.indexOf("qaext.arcgis.com")&&(a="qaext.arcgis.com"));return a}})})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(f,h,p,k,d){return p("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,
contextRequire:null,_beforeFillContent:function(){if(/dojoType|data-dojo-type/i.test(this.domNode.innerHTML)){var f=this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0);d.parse(f,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(k.hitch(this,function(d){this._startupWidgets=d;for(var e=0;e<d.length;e++)this._processTemplateNode(d[e],
function(b,d){return b[d]},function(b,d,a){return d in b?b.connect(b,d,a):b.on(d,a,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");}},_processTemplateNode:function(d,e,f){return e(d,"dojoType")||e(d,"data-dojo-type")?
!0:this.inherited(arguments)},startup:function(){f.forEach(this._startupWidgets,function(d){d&&!d._started&&d.startup&&d.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"dijit/form/Textarea":function(){define(["dojo/_base/declare","dojo/dom-style","./_ExpandingTextAreaMixin","./SimpleTextarea"],function(f,h,p,k){return f("dijit.form.Textarea",[k,p],{baseClass:"dijitTextBox dijitTextArea dijitExpandingTextArea",cols:"",buildRendering:function(){this.inherited(arguments);h.set(this.textbox,
{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"})}})})},"dijit/form/_ExpandingTextAreaMixin":function(){define("dojo/_base/declare dojo/dom-construct dojo/has dojo/_base/lang dojo/on dojo/_base/window ../Viewport".split(" "),function(f,h,p,k,d,l,e){p.add("textarea-needs-help-shrinking",function(){var d=l.body(),b=h.create("textarea",{rows:"5",cols:"20",value:" ",style:{zoom:1,fontSize:"12px",height:"96px",
overflow:"hidden",visibility:"hidden",position:"absolute",border:"5px solid white",margin:"0",padding:"0",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"}},d,"last"),e=b.scrollHeight>=b.clientHeight;d.removeChild(b);return e});return f("dijit.form._ExpandingTextAreaMixin",null,{_setValueAttr:function(){this.inherited(arguments);this.resize()},postCreate:function(){this.inherited(arguments);var e=this.textbox;e.style.overflowY="hidden";this.own(d(e,
"focus, resize",k.hitch(this,"_resizeLater")))},startup:function(){this.inherited(arguments);this.own(e.on("resize",k.hitch(this,"_resizeLater")));this._resizeLater()},_onInput:function(d){this.inherited(arguments);this.resize()},_estimateHeight:function(){var d=this.textbox;d.rows=(d.value.match(/\n/g)||[]).length+1},_resizeLater:function(){this.defer("resize")},resize:function(){function d(){var a=!1;""===b.value&&(b.value=" ",a=!0);var c=b.scrollHeight;a&&(b.value="");return c}var b=this.textbox;
"hidden"==b.style.overflowY&&(b.scrollTop=0);if(!this.busyResizing){this.busyResizing=!0;if(d()||b.offsetHeight){var e=d()+Math.max(b.offsetHeight-b.clientHeight,0),a=e+"px";a!=b.style.height&&(b.style.height=a,b.rows=1);if(p("textarea-needs-help-shrinking")){var c=d(),g=b.style.minHeight,f=4,h=b.scrollTop;b.style.minHeight=a;for(b.style.height="auto";0<e;){b.style.minHeight=Math.max(e-f,4)+"px";a=d();c-=a;e-=c;if(c<f)break;c=a;f<<=1}b.style.height=e+"px";b.style.minHeight=g;b.scrollTop=h}b.style.overflowY=
d()>b.clientHeight?"auto":"hidden";"hidden"==b.style.overflowY&&(b.scrollTop=0)}else this._estimateHeight();this.busyResizing=!1}}})})},"dijit/form/SimpleTextarea":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/sniff","./TextBox"],function(f,h,p,k){return f("dijit.form.SimpleTextarea",k,{baseClass:"dijitTextBox dijitTextArea",rows:"3",cols:"20",templateString:"\x3ctextarea ${!nameAttrSetting} data-dojo-attach-point\x3d'focusNode,containerNode,textbox' autocomplete\x3d'off'\x3e\x3c/textarea\x3e",
postMixInProperties:function(){!this.value&&this.srcNodeRef&&(this.value=this.srcNodeRef.value);this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);p("ie")&&this.cols&&h.add(this.textbox,"dijitTextAreaCols")},filter:function(d){d&&(d=d.replace(/\r/g,""));return this.inherited(arguments)},_onInput:function(d){if(this.maxLength){var f=parseInt(this.maxLength),e=this.textbox.value.replace(/\r/g,""),f=e.length-f;if(0<f){var m=this.textbox;if(m.selectionStart){var b=m.selectionStart,
n=0;p("opera")&&(n=(this.textbox.value.substring(0,b).match(/\r/g)||[]).length);this.textbox.value=e.substring(0,b-f-n)+e.substring(b-n);m.setSelectionRange(b-f,b-f)}else this.ownerDocument.selection&&(m.focus(),e=this.ownerDocument.selection.createRange(),e.moveStart("character",-f),e.text="",e.select())}}this.inherited(arguments)}})})},"dijit/form/RadioButton":function(){define(["dojo/_base/declare","./CheckBox","./_RadioButtonMixin"],function(f,h,p){return f("dijit.form.RadioButton",[h,p],{baseClass:"dijitRadio"})})},
"dijit/form/_RadioButtonMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/lang dojo/query!css2 ../registry".split(" "),function(f,h,p,k,d,l){return h("dijit.form._RadioButtonMixin",null,{type:"radio",_getRelatedWidgets:function(){var e=[];d("input[type\x3dradio]",this.focusNode.form||this.ownerDocument).forEach(k.hitch(this,function(d){d.name==this.name&&d.form==this.focusNode.form&&(d=l.getEnclosingWidget(d))&&e.push(d)}));return e},_setCheckedAttr:function(d){this.inherited(arguments);
this._created&&d&&f.forEach(this._getRelatedWidgets(),k.hitch(this,function(d){d!=this&&d.checked&&d.set("checked",!1)}))},_getSubmitValue:function(d){return null==d?"on":d},_onClick:function(d){if(this.checked||this.disabled)return d.stopPropagation(),d.preventDefault(),!1;if(this.readOnly)return d.stopPropagation(),d.preventDefault(),f.forEach(this._getRelatedWidgets(),k.hitch(this,function(b){p.set(this.focusNode||this.domNode,"checked",b.checked)})),!1;var e=!1,b;f.some(this._getRelatedWidgets(),
function(d){return d.checked?(b=d,!0):!1});this.checked=!0;b&&(b.checked=!1);if(!1===this.onClick(d)||d.defaultPrevented)e=!0;this.checked=!1;b&&(b.checked=!0);e?d.preventDefault():this.set("checked",!0);return!e}})})},"widgets/Share/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/i18n!./nls/strings"],function(){})},"url:jimu/dijit/templates/ShareLink.html":'\x3cdiv class\x3d"shareLink"\x3e\r\n  \x3cdiv class\x3d"shareLinkOptionsWrapper displaynone"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"backBtn" class\x3d"backBtn"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"linkOptionsTitle"\x3e${nls.linkOptions}\x3c/div\x3e\r\n    \x3cdiv class\x3d"subTitle"\x3e${nls.linkOptionsUrlParameters}\x3c/div\x3e\r\n    \x3cform data-id\x3d"shareOptionsRadios" data-dojo-attach-point\x3d"shareOptionsRadios"\x3e\r\n      \x3cfieldset\x3e\r\n        \x3cdiv class\x3d"optionsRow"\x3e\r\n          \x3cinput data-dojo-attach-point\x3d"currentMapExtent" class\x3d"shareRadios jimu-float-leading jimu-radio-btn" type\x3d"radio" name\x3d"radios" data-id\x3d"currentMapExtent" data-dojo-type\x3d"dijit.form.RadioButton" data-dojo-props\x3d\'checked:true\' checked\x3e\r\n          \x3cdiv class\x3d"labels" data-forid\x3d"currentMapExtent"\x3e${nls.currentMapExtent}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"optionsRow" data-dojo-attach-point\x3d"chooseCenterWithLevelRow"\x3e\r\n          \x3cinput data-dojo-attach-point\x3d"chooseCenterWithLevel" class\x3d"shareRadios jimu-float-leading jimu-radio-btn" type\x3d"radio" name\x3d"radios" data-id\x3d"chooseCenterWithLevel" data-dojo-type\x3d"dijit.form.RadioButton"\x3e\r\n          \x3cdiv class\x3d"labels" data-forid\x3d"chooseCenterWithLevel"\x3e${nls.chooseCenterWithLevel}\x3c/div\x3e\r\n          \x3cdiv class\x3d"optionsMore chooseCenterWithLevel_optionsMore"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"chooseCenterWithLevel_marker" class\x3d"markers"\x3e\x3c/div\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"chooseCenterWithLevel_levels" class\x3d"shareSelects" style\x3d"display: none !important;" data-dojo-type\x3d"dijit/form/Select"\x3e\x3c/select\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"optionsRow"\x3e\r\n          \x3cinput data-dojo-attach-point\x3d"chooseCenterWithScale" class\x3d"shareRadios jimu-float-leading jimu-radio-btn" type\x3d"radio" name\x3d"radios" data-id\x3d"chooseCenterWithScale" data-dojo-type\x3d"dijit.form.RadioButton"\x3e\r\n          \x3cdiv class\x3d"labels"\x3e${nls.chooseCenterWithScale}\x3c/div\x3e\r\n          \x3cdiv class\x3d"optionsMore chooseCenterWithScale_optionsMore"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"chooseCenterWithScale_marker" class\x3d"markers"\x3e\x3c/div\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"chooseCenterWithScale_scales" class\x3d"shareSelects" style\x3d"display: none !important;" data-dojo-type\x3d"dijit/form/Select"\x3e\x3c/select\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"optionsRow" data-dojo-attach-point\x3d"findLocationRow"\x3e\r\n          \x3cinput data-dojo-attach-point\x3d"findLocation" class\x3d"shareRadios jimu-float-leading jimu-radio-btn" type\x3d"radio" name\x3d"radios" data-id\x3d"findLocation" data-dojo-type\x3d"dijit.form.RadioButton"\x3e\r\n          \x3cdiv class\x3d"labels"\x3e${nls.findLocation}\x3c/div\x3e\r\n          \x3cdiv class\x3d"optionsMore findLocation_optionsMore"\x3e\r\n            \x3cdiv class\x3d"moreOptions"\x3e\r\n              \x3cinput data-dojo-attach-point\x3d"findLocation_input" data-dojo-type\x3d"dijit.form.TextBox" placeholder\x3d"${nls.findLocation_inputPlaceholder}"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"optionsRow"\x3e\r\n          \x3cinput data-dojo-attach-point\x3d"queryFeature" class\x3d"shareRadios jimu-float-leading jimu-radio-btn" type\x3d"radio" name\x3d"radios" data-id\x3d"queryFeature" data-dojo-type\x3d"dijit.form.RadioButton"\x3e\r\n          \x3cdiv class\x3d"labels"\x3e${nls.queryFeature}\x3c/div\x3e\r\n          \x3cdiv class\x3d"optionsMore queryFeature_optionsMore"\x3e\r\n            \x3cdiv class\x3d"moreOptions"\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"queryFeature_layer" name\x3d"queryFeature_layer" class\x3d"queryFeature_layer"\x3e\x3c/div\x3e\r\n              \x3cselect data-dojo-attach-point\x3d"queryFeature_field" name\x3d"queryFeature_field" data-dojo-type\x3d"dijit/form/Select"\x3e\x3c/select\x3e\r\n              \x3cselect data-dojo-attach-point\x3d"queryFeature_value" name\x3d"queryFeature_value" data-dojo-type\x3d"dijit/form/Select"\x3e\x3c/select\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"optionsRow"\x3e\r\n          \x3cinput data-dojo-attach-point\x3d"addMarker" class\x3d"shareRadios jimu-float-leading jimu-radio-btn" type\x3d"radio" name\x3d"radios" data-id\x3d"addMarker" data-dojo-type\x3d"dijit.form.RadioButton"\x3e\r\n          \x3cdiv class\x3d"labels"\x3e${nls.addMarker}\x3c/div\x3e\r\n          \x3cdiv class\x3d"optionsMore addMarker_optionsMore"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"addMarker_marker" class\x3d"markers"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"moreOptions addMarker_moreOptions"\x3e\r\n              \x3cdiv class\x3d"moreOptionsRow"\x3e\r\n                \x3clabel\x3e${nls.WKID}\x3c/label\x3e\r\n                \x3cinput data-dojo-attach-point\x3d"addMarker_spatialReference" name\x3d"spatialReference" data-dojo-type\x3d"dijit.form.TextBox"\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"moreOptionsRow"\x3e\r\n                \x3clabel\x3e${nls.popupTitle}\x3c/label\x3e\r\n                \x3cinput data-dojo-attach-point\x3d"addMarker_title" data-dojo-type\x3d"dijit.form.TextBox" placeholder\x3d"${nls.addMarker_titlePlaceholder}"\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"moreOptionsRow"\x3e\r\n                \x3clabel\x3e${nls.symbol}\x3c/label\x3e\r\n                \x3cinput data-dojo-attach-point\x3d"addMarker_symbolURL" data-dojo-type\x3d"dijit.form.TextBox" placeholder\x3d"${nls.addMarker_symbolURL}"\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"moreOptionsRow"\x3e\r\n                \x3clabel\x3e${nls.label}\x3c/label\x3e\r\n                \x3cinput data-dojo-attach-point\x3d"addMarker_label" data-dojo-type\x3d"dijit.form.TextBox" placeholder\x3d"${nls.addMarker_label}"\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"moreOptionsRow displaynone"\x3e\r\n                \x3clabel\x3e${nls.zoomLevel}\x3c/label\x3e\r\n                \x3cdiv class\x3d"table-for-select"\x3e\r\n                  \x3cselect data-dojo-attach-point\x3d"addMarker_level" name\x3d"addMarker_level" data-dojo-type\x3d"dijit/form/Select"\x3e\x3c/select\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/fieldset\x3e\r\n    \x3c/form\x3e\r\n\r\n    \x3cfieldset\x3e\r\n      \x3cdiv class\x3d"optionsRow shareClearFix"\x3e\r\n        \x3cinput data-id\x3d"share-options-overwirteMobileLayout" data-dojo-attach-point\x3d"overwirteMobileLayout" class\x3d"shareCheckBoxes jimu-float-leading" data-dojo-type\x3d"dijit.form.CheckBox" type\x3d"checkbox"\x3e\r\n        \x3cdiv class\x3d"labels"\x3e${nls.overwirteMobileLayout}\x3c/div\x3e\r\n        \x3cdiv class\x3d"optionsMore share-options-overwirteMobileLayout_optionsMore"\x3e\r\n          \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/NumberTextBox" required\x3d"true"\r\n                 data-dojo-attach-point\x3d"mobileLayout" data-dojo-props\x3d\'style:{width:"100px"}, constraints:{min:300}\'/\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"optionsRow shareClearFix"\x3e\r\n        \x3cinput data-id\x3d"share-options-language" data-dojo-attach-point\x3d"setlanguage" class\x3d"shareCheckBoxes jimu-float-leading" data-dojo-type\x3d"dijit.form.CheckBox" type\x3d"checkbox"\x3e\r\n        \x3cdiv class\x3d"labels"\x3e${nls.language}\x3c/div\x3e\r\n        \x3cdiv class\x3d"optionsMore share-options-language_optionsMore"\x3e\r\n          \x3cselect data-dojo-attach-point\x3d"setlanguage_languages" class\x3d"shareSelects" style\x3d"display:inline-block;" data-dojo-type\x3d"dijit/form/Select"\x3e\x3c/select\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"optionsRow shareClearFix" style\x3d"display: none;"\x3e\r\n        \x3cinput data-id\x3d"share-options-auth" data-dojo-attach-point\x3d"auth" class\x3d"shareCheckBoxes jimu-float-leading" data-dojo-type\x3d"dijit.form.CheckBox" type\x3d"checkbox"\x3e\r\n        \x3cdiv class\x3d"labels"\x3e${nls.auth}\x3c/div\x3e\r\n        \x3cdiv  class\x3d"optionsMore share-options-auth_optionsMore"\x3e\r\n          \x3cinput data-dojo-attach-point\x3d"authtoken" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d\'required:true\'/\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n  \r\n      \x3cdiv class\x3d"optionsRow shareClearFix"\x3e\r\n        \x3cdiv class\x3d"subTitle"\x3e${nls.linkPreview}\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"preview" class\x3d"preview inputsText" data-dojo-type\x3d"dijit/form/SimpleTextarea" data-dojo-props\x3d\'required:true,readOnly:true\'\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"shareUrlsWrapper"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"Text"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"linkShare" data-dojo-attach-point\x3d"LinkShareContainer"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"LinkText" class\x3d"subTitle linkToApp"\x3e${nls.shareLinkText}\x3c/div\x3e\r\n      \x3cinput data-dojo-attach-point\x3d"_linkUrlTextBox" class\x3d"shareLinkUrl inputsText" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-props\x3d\'required:true,readOnly:true\'/\x3e\r\n      \x3cdiv class\x3d"shareClearFix"\x3e\r\n        \x3cspan class\x3d"optionsText jimu-float-leading" data-dojo-attach-point\x3d"linkOptions"\x3e${nls.linkOptions}\x3c/span\x3e\r\n        \x3cdiv class\x3d"shareLinkIcons jimu-float-trailing" data-dojo-attach-point\x3d"socialNetworkLinks"\x3e\r\n            \x3ca class\x3d"socialNetworkIcons email" data-dojo-attach-point\x3d"emailShare" title\x3d"${nls.shareEmail}"\x3e\x3c/a\x3e\r\n          \x3cdiv class\x3d"socialNetworkIcons facebook" data-dojo-attach-event\x3d"click:_toFacebook" data-dojo-attach-point\x3d"FacebookShare" title\x3d"${nls.shareFacebook}"\x3e\x3c/div\x3e\r\n          \x3cdiv class\x3d"socialNetworkIcons twitter" data-dojo-attach-event\x3d"click:_toTwitter" data-dojo-attach-point\x3d"TwitterShare" title\x3d"${nls.shareTwitter}"\x3e\x3c/div\x3e\r\n          \x3cdiv class\x3d"socialNetworkIcons googlePlus" data-dojo-attach-point\x3d"googlePlusShare" title\x3d"${nls.shareGooglePlus}"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"embedShare" data-dojo-attach-point\x3d"EmbedShareContainer"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"embedText" class\x3d"subTitle"\x3e${nls.embed}\x3c/div\x3e\r\n      \x3cinput data-dojo-attach-point\x3d"_embedCodeTextArea" class\x3d"shareEmbedCode inputsText" data-dojo-type\x3d"dijit/form/SimpleTextarea" data-dojo-props\x3d\'required:true,readOnly:true\'/\x3e\r\n      \x3cdiv class\x3d"moreOptions" data-dojo-attach-event\x3d"click:_moreOptionsExpandCollapse"\x3e\r\n        \x3cdiv class\x3d"moreOptionsIcon" data-dojo-attach-point\x3d"MoreOptionsIcon"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"optionsText"\x3e${nls.more}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"MoreOptionsContainer" class\x3d"moreOptionsContainer inputsText displaynone"\x3e\r\n        \x3cdiv class\x3d"sizeSelect" data-dojo-attach-point\x3d"SizeSelect"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"customSize disable" data-dojo-attach-point\x3d"CustomSizeContainer"\x3e\r\n          \x3cdiv class\x3d"timesConnector"\x3eX\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"shareTips" data-dojo-attach-point\x3d"shareTips"\x3e\r\n      \x3c!--\x3cdiv class\x3d"infoIcon"\x3e\x3c/div\x3e--\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"shareTipsText" class\x3d"shareTipsText"\x3e${nls.shareToWebTips}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/Share/Widget.html":'\x3cdiv style\x3d"width:100%;min-width:230px;min-height:245px;"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"container"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',"*now":function(f){f(['dojo/i18n!*preload*widgets/Share/nls/Widget*["ar","bs","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","vi","zh-hk","zh-tw","ROOT"]'])}}});
define("dojo/_base/declare dojo/_base/lang jimu/BaseWidget jimu/portalUrlUtils jimu/shareUtils jimu/dijit/ShareLink jimu/utils jimu/dijit/LoadingShelter jimu/dijit/Message".split(" "),function(f,h,p,k,d,l,e,m,b){return f([p],{name:"Share",baseClass:"jimu-widget-share share-container",_isShowFindLocation:!0,onOpen:function(){this.widgetManager.activateWidget(this);d.getItemShareInfo(this.appConfig.portalUrl).then(h.hitch(this,function(b){b=d.isSharedToPublic(b);if(this.shareLink&&this.shareLink.onShareToPublicChanged&&
!0===this.shareLink.HAS_INIT_URL)this.shareLink.onShareToPublicChanged(b)}))},onClose:function(){if(this.shareLink)this.shareLink.onCloseContainer()},onDeActive:function(){},_disableWebMapPopup:function(){},_enableWebMapPopup:function(){},postCreate:function(){this.inherited(arguments);this.shelter=new m({hidden:!0});this.shelter.placeAt(this.domNode);this.shelter.startup()},startup:function(){this.inherited(arguments);this.shelter.show();this._isShowFindLocation=this._findSearchWidget(this.appConfig);
d.getItemShareInfo(this.appConfig.portalUrl).then(h.hitch(this,function(b){this.shareLink=new l({portalUrl:this.appConfig.portalUrl,appTitle:this.appConfig.title,isOnline:k.isOnline(e.getAppHref()),isShowSocialMediaLinks:!0,isSharedToPublic:d.isSharedToPublic(b),isShowBackBtn:!1,config:this.config,isShowFindLocation:this._isShowFindLocation});this.shareLink.placeAt(this.container)}),h.hitch(this,function(d){new b({message:d.message})})).always(h.hitch(this,function(){this.shelter.hide()}))},onAppConfigChanged:function(b){this._isShowFindLocation=
this._findSearchWidget(b);this.shareLink&&this.shareLink.updateShareLinkOptionsUI&&this.shareLink.updateShareLinkOptionsUI({isShowFindLocation:this._isShowFindLocation})},_findSearchWidget:function(b){b=b.getConfigElementsByName("Search");return 0<b.length&&b[0].visible}})});