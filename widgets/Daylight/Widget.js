// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(h,l,g,b,e){return g("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,contextRequire:null,_beforeFillContent:function(){if(/dojoType|data-dojo-type/i.test(this.domNode.innerHTML)){var f=this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0);e.parse(f,{noStart:!this._earlyTemplatedStartup,
template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(b.hitch(this,function(b){this._startupWidgets=b;for(var f=0;f<b.length;f++)this._processTemplateNode(b[f],function(a,k){return a[k]},function(a,k,c){return k in a?a.connect(a,k,c):a.on(k,c,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");
}},_processTemplateNode:function(b,e,g){return e(b,"dojoType")||e(b,"data-dojo-type")?!0:this.inherited(arguments)},startup:function(){h.forEach(this._startupWidgets,function(b){b&&!b._started&&b.startup&&b.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"jimu/dijit/CheckBox":function(){define("dojo/_base/declare dijit/_WidgetBase dojo/_base/lang dojo/_base/html dojo/dom-class dojo/on dojo/Evented dojo/keys".split(" "),function(h,l,g,b,e,f,m,n){return h([l,m],{baseClass:"jimu-checkbox",
declaredClass:"jimu.dijit.CheckBox",checked:!1,status:!0,label:"",postCreate:function(){this.checkNode=b.create("div",{"class":"checkbox jimu-float-leading"},this.domNode);this.labelNode=b.create("div",{"class":"label jimu-float-leading",innerHTML:this.label||""},this.domNode);this.checked&&b.addClass(this.checkNode,"checked");this.status||b.addClass(this.domNode,"jimu-state-disabled");this.own(f(this.checkNode,"click",g.hitch(this,function(){this.status&&(this.checked?this.uncheck():this.check())})));
this.own(f(this.labelNode,"click",g.hitch(this,function(){this.checked&&this.status?this.uncheck():this.status&&this.check()})));this._udpateLabelClass();this._initSection508()},setLabel:function(a){this.label=a||"";this.labelNode.innerHTML=this.label;this._udpateLabelClass()},getLabel:function(){return this.label||""},_udpateLabelClass:function(){this.labelNode&&(this.labelNode.innerHTML?b.removeClass(this.labelNode,"not-visible"):b.addClass(this.labelNode,"not-visible"))},_initSection508:function(){"undefined"!==
typeof this.tabindex&&(b.setAttr(this.checkNode,"tabindex",this.tabindex),this.own(f(this.checkNode,"focus",g.hitch(this,function(){b.addClass(this.checkNode,"dijitCheckBoxFocused")}))),this.own(f(this.checkNode,"blur",g.hitch(this,function(){b.removeClass(this.checkNode,"dijitCheckBoxFocused")}))),this.own(f(this.checkNode,"keypress",g.hitch(this,function(a){a=a.charCode||a.keyCode;b.hasClass(this.checkNode,"dijitCheckBoxFocused")&&n.SPACE===a&&this.status&&(this.checked?this.uncheck():this.check())}))))},
setValue:function(a){this.status&&(!0===a?this.check():this.uncheck())},getValue:function(){return this.checked},setStatus:function(a){a=!!a;var b=this.status!==a;(this.status=a)?e.remove(this.domNode,"jimu-state-disabled"):e.add(this.domNode,"jimu-state-disabled");b&&this.emit("status-change",a)},getStatus:function(){return this.status},check:function(){this.status&&(this.checked=!0,b.addClass(this.checkNode,"checked"),this.onStateChange())},uncheck:function(a){if(this.status&&(this.checked=!1,b.removeClass(this.checkNode,
"checked"),!a))this.onStateChange()},onStateChange:function(){if(this.onChange&&g.isFunction(this.onChange))this.onChange(this.checked);this.emit("change",this.checked)},focus:function(){this.checkNode&&this.checkNode.focus&&this.checkNode.focus()}})})},"widgets/Daylight/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/Daylight/Widget.html":'\x3cdiv\x3e\r\n\t\x3cdiv\x3e${nls.dragSunSliderText}\x3c/div\x3e\r\n\t\x3cdiv data-dojo-type\x3d"dijit/form/HorizontalSlider" data-dojo-attach-point\x3d"slider" data-dojo-props\x3d\'intermediateChanges:true,showButtons:false,minimum:0,maximum:23.99\' style\x3d"margin-top:10px;"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"time-zone"\x3e\r\n\t\t\x3cdiv class\x3d"sun-time jimu-float-leading" data-dojo-attach-point\x3d"sunTime"\x3e\x3c/div\x3e\r\n\t\t\x3cselect data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"zoneSelect" class\x3d"jimu-float-trailing" style\x3d"width:40%;"\x3e\x3c/select\x3e\r\n\t\x3c/div\x3e\r\n\r\n\t\x3cselect data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"monthSelect" style\x3d"width:100%;margin-top:15px;"\x3e\x3c/select\x3e\r\n\r\n\t\x3cdiv class\x3d"shadow-container" data-dojo-attach-point\x3d"shadowContainer"\x3e\r\n\t\t\x3cdiv class\x3d"shadowing-title"\x3e${nls.shadowing}\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"direct-shadow" data-dojo-attach-point\x3d"directShadowSection"\x3e\r\n\t\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"cbxDirect"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3c!-- \x3cdiv class\x3d"diffuse-shadow" data-dojo-attach-point\x3d"diffuseShadowSection"\x3e\r\n\t\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"cbxDiffuse"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e --\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Daylight/css/style.css":".jimu-widget-daylight .time-zone{overflow: hidden; margin-top: 15px;}.jimu-widget-daylight .sun-time{width: 40%; height: 30px; line-height: 30px; padding-left: 10px; border:1px solid #ccc;}.jimu-rtl .jimu-widget-daylight .sun-time{padding-left: 0; padding-right: 10px;}.jimu-widget-daylight .shadowing-title{}.jimu-widget-daylight .shadow-container{margin-top: 40px;}.jimu-widget-daylight .direct-shadow{margin-top: 5px;}.jimu-widget-daylight .diffuse-shadow{margin-top: 5px;}",
"*now":function(h){h(['dojo/i18n!*preload*widgets/Daylight/nls/Widget*["ar","bs","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","vi","zh-hk","zh-tw","ROOT"]'])}}});
define("dojo/_base/declare jimu/BaseWidget dijit/_WidgetsInTemplateMixin dojo/on dojo/_base/lang dojo/_base/html dojo/_base/config esri/core/watchUtils dijit/form/HorizontalSlider dijit/form/Select jimu/dijit/CheckBox".split(" "),function(h,l,g,b,e,f,m,n){return h([l,g],{baseClass:"jimu-widget-daylight",postCreate:function(){this.inherited(arguments);this.sceneView.when(e.hitch(this,this._init))},_init:function(){var a=this._getDateOfLighting();this._initMonthSelect(a);this._initZoneSelect();this._updateSliderUIByDate(a);
this.own(b(this.sceneView.environment.lighting,"date-will-change",e.hitch(this,this._onDateWillChange)));this.own(b(this.zoneSelect,"change",e.hitch(this,this._onZoneSelectChanged)));this.own(b(this.monthSelect,"change",e.hitch(this,this._onMonthSelectChanged)));this.own(b(this.slider,"change",e.hitch(this,this._onSliderValueChanged)));a=!1;void 0!==this.sceneView._stage.getRenderParams().shadowMap?(a=!0,this.cbxDirect.setLabel(this.nls.directShadow+"\x26lrm;"),this.own(n.init(this.sceneView,"environment.lighting.directShadowsEnabled",
e.hitch(this,this._onWatchDirectShadows))),this.cbxDirect.onChange=e.hitch(this,this._onDirectShadowChange)):f.setStyle(this.directShadowSection,"display","none");void 0!==this.sceneView._stage.getRenderParams().ssao&&(a=!0);a||f.setStyle(this.shadowContainer,"display","none")},_setDateOfLighting:function(a){this._getDateOfLighting().getTime()!==a.getTime()&&(this.sceneView.environment.lighting.date=a)},_initZoneSelect:function(){for(var a=this.sceneView.environment.lighting.positionTimezoneInfo,
a=this.config.defaultTimeZone||a.hours,b=[],c="",c=null,d=-12;12>=d;d++)c="GMT",0>d?c+=" ":0===d?c+=" ":0<d&&(c+="+"),c+=d,c={value:d+"",label:c},b.push(c);this.zoneSelect.addOption(b);this.zoneSelect.set("value",a+"")},_initMonthSelect:function(a){for(var b=a.getUTCFullYear(),c,d=0;11>=d;d++)c=new Date(b,d,15),this.monthSelect.addOption({value:d,label:c.toLocaleString(m.locale,{month:"long"})});this._updateMonthSelectUIByDate(a)},_updateSliderUIByDate:function(a){var b=this._getTimeZoneByUI(),c=
((a.getUTCHours()+b)%24+24)%24,d=a.getUTCMinutes(),e=a.getUTCSeconds(),b=this.slider.get("value"),c=c+d/60+e/3600;this._updateSunTimeUIByDate(a);b!==c&&this.slider.set("value",c)},_updateSunTimeUIByDate:function(a){var b=new Date(a),c=this._getTimeZoneByUI();a=((a.getUTCHours()+c)%24+24)%24;b.setHours(a);this.sunTime.innerHTML=b.toLocaleString("en-us",{hour:"numeric",minute:"numeric"})},_updateMonthSelectUIByDate:function(a){a=a.getUTCMonth();this.monthSelect.set("value",a)},_getDateOfLighting:function(){return this.sceneView.environment.lighting.get("date")},
_getDateByUI:function(){var a=this._getDateOfLighting(),a=new Date(a),b=this._getTimeZoneByUI(),c=this.slider.get("value"),b=((Math.floor(c)-b)%24+24)%24,c=60*(c-Math.floor(c)),d=c%1,c=c-d,d=Math.round(60*d);a.setUTCMonth(this.monthSelect.get("value"));a.setUTCHours(b);a.setUTCMinutes(c);a.setUTCSeconds(d);return a},_getTimeZoneByUI:function(){return parseInt(this.zoneSelect.get("value"),10)},_getPositionTimeZone:function(){return this.sceneView.environment.lighting.positionTimezoneInfo.hours},_onDateWillChange:function(a){this._updateSliderUIByDate(a.date)},
_onZoneSelectChanged:function(){this.slider.ignoreChangeEvent=!0;var a=this._getDateOfLighting();this._updateSliderUIByDate(a)},_onMonthSelectChanged:function(){var a=this._getDateOfLighting(),a=new Date(a);a.setUTCMonth(this.monthSelect.get("value"));this._setDateOfLighting(a)},_onSliderValueChanged:function(){var a=this._getDateByUI();this._updateSunTimeUIByDate(a);var b=this.slider.ignoreChangeEvent;delete this.slider.ignoreChangeEvent;b||this._setDateOfLighting(a)},_onWatchDirectShadows:function(a){this.cbxDirect.setValue(a)},
_onWatchAmbientOcclusion:function(a){},_onDirectShadowChange:function(){var a=this.cbxDirect.getValue();this.sceneView.environment.lighting.directShadowsEnabled=a},_onDiffuseShadowChange:function(){}})});