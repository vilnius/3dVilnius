// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(t,l,p,f,g){return p("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,contextRequire:null,_beforeFillContent:function(){if(/dojoType|data-dojo-type/i.test(this.domNode.innerHTML)){var m=this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0);g.parse(m,{noStart:!this._earlyTemplatedStartup,
template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(f.hitch(this,function(b){this._startupWidgets=b;for(var f=0;f<b.length;f++)this._processTemplateNode(b[f],function(b,e){return b[e]},function(b,e,f){return e in b?b.connect(b,e,f):b.on(e,f,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");
}},_processTemplateNode:function(f,b,g){return b(f,"dojoType")||b(f,"data-dojo-type")?!0:this.inherited(arguments)},startup:function(){t.forEach(this._startupWidgets,function(f){f&&!f._started&&f.startup&&f.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"esri/layers/GraphicsLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/promiseUtils ../core/accessorSupport/decorators ./Layer ./mixins/ScaleRangeLayer ../support/GraphicsCollection ../symbols/support/ElevationInfo".split(" "),
function(t,l,p,f,g,m,b,q,r,e,d){return function(g){function h(b){b=g.call(this)||this;b.elevationInfo=null;b.graphics=new e.default;b.screenSizePerspectiveEnabled=!0;b.type="graphics";return b}p(h,g);h.prototype.destroy=function(){this.removeAll()};h.prototype.add=function(b){this.graphics.add(b);return this};h.prototype.addMany=function(b){this.graphics.addMany(b);return this};h.prototype.removeAll=function(){this.graphics.removeAll();return this};h.prototype.remove=function(b){this.graphics.remove(b)};
h.prototype.removeMany=function(b){this.graphics.removeMany(b)};h.prototype.importLayerViewModule=function(b){switch(b.type){case "2d":return m.create(function(b){return t(["../views/2d/layers/GraphicsLayerView2D"],b)});case "3d":return m.create(function(b){return t(["../views/3d/layers/GraphicsLayerView3D"],b)})}};h.prototype.graphicChanged=function(b){this.emit("graphic-update",b)};f([b.property({type:d})],h.prototype,"elevationInfo",void 0);f([b.property(e.graphicsCollectionProperty)],h.prototype,
"graphics",void 0);f([b.property({type:["show","hide"]})],h.prototype,"listMode",void 0);f([b.property()],h.prototype,"screenSizePerspectiveEnabled",void 0);f([b.property({readOnly:!0})],h.prototype,"type",void 0);return h=f([b.subclass("esri.layers.GraphicsLayer")],h)}(b.declared(q,r))})},"widgets/3DFx/VizCards/VizCards":function(){define("dojo/Evented dojo/_base/declare dojo/_base/array dojo/_base/Color dojo/_base/lang dojo/_base/html dojo/dom-class dojo/dom-construct dojo/dom-style dojo/number dojo/on dojo/query dojox/gfx dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/VizCards.html".split(" "),
function(t,l,p,f,g,m,b,q,r,e,d,n,h,u,w,a){return l("VizCards",[u,w,t],{declaredClass:"esri.widgets.VizCards",templateString:a,css:{root:"esri-viz-cards",content:"content"},constructor:function(a,c){this.rtl=!1;this.options={view:null,features:[],vizField:null,displayField:null,color:"#ff0000",showPercent:!1};g.mixin(this.options,a);this.domNode=c;this._currentSelectedCardNode=null},postCreate:function(){this.inherited(arguments);0<n(".dj_rtl").length&&(this.rtl=!0);this.own(d(this.contentNode,"click",
g.hitch(this,this._clickCard)))},startup:function(){this.inherited(arguments);this._updateCards()},destroy:function(){this.view=null;this.inherited(arguments)},clear:function(){this.containerNode.innerHTML=""},update:function(a){g.mixin(this.options,a);this._updateCards()},selectCard:function(a){var c=this.domNode.id+"_card_"+a;this.unselectCards();if(c=n("#"+c,this.domNode)[0])b.add(c,"selected"),this._currentSelectedCardNode=c;var c=m.getContentBox(this.containerNode).w,k=180*a-c/2+90;this.rtl&&
(k=180*(this.options.features.length-a)-c/2-90);0>k&&(k=0);this.containerNode.scrollLeft=k},unselectCards:function(){this._currentSelectedCardNode&&(b.remove(this._currentSelectedCardNode,"selected"),this._currentSelectedCardNode=null)},_getTotal:function(){var a=this.options.vizField,c=0;p.forEach(this.options.features,function(k){c+=k.attributes[a]});return c},_updateCards:function(){var a=this.contentNode;r.set(a,"color",this.options.color);var c=this.options.features,f=this._getTotal();a.innerHTML=
"";var v=0;this.rtl&&(v=180*c.length);this.containerNode.scrollLeft=v;r.set(a,"width",180*c.length+"px");for(var v=c.length,g=null,d,h,l=null,p=this.options.showPercent&&400>=v,n=0;n<v;n++){g=c[n];d=g.attributes;g=d[this.options.vizField];h=e.format(g);l||(l=Math.floor(150/h.length+3),10>l&&(l=10),60<l&&(l=60));var m=d[this.options.displayField];null!==g&&(d=q.create("div",{id:this.domNode.id+"_card_"+n},a),b.add(d,"card"),m=q.create("div",{innerHTML:n+1+". "+m},d),b.add(m,"header"),h=q.create("div",
{innerHTML:h},d),p?(b.add(h,"value"),h=parseInt(g/f*100,10),m=h+"%",0<g&&1>h&&(m="\x3c1%"),d=q.create("div",{},d),b.add(d,"area"),g=q.create("div",{},d),b.add(g,"chart"),d=q.create("div",{innerHTML:m},d),b.add(d,"pct"),this._createChart(g,h)):(b.add(h,"valueBig"),r.set(h,"fontSize",l+"px")))}},_createChart:function(a,c){var k=m.getContentBox(a),b=Math.min(k.w,k.h),k=b/2,d=b/2,e=k-3;a=h.createSurface(a,b,b);a.clear();a.createCircle({cx:k,cy:d,r:e}).setStroke({width:6,color:f.fromArray([255,255,255,
.15]),cap:"round"});0<c&&(100<=c&&(c=99),b=360*c/100,c=!1,180<=b&&(c=!0),b=this._getEndPoint(e,b,k,d),d-=e,a.createPath().moveTo(k,d).arcTo(e,e,0,c,!0,b.x,b.y).setStroke({width:6,color:this.options.color,cap:"round"}))},_getEndPoint:function(a,c,b,d){var k=c;0<c&&90>c?k+=270:90<c&&(k=c-90);c=k*Math.PI/180;return{x:b+Math.cos(c)*a,y:d+Math.sin(c)*a}},_clickCard:function(a){a=a.target||a.srcElement;if(!b.contains(a,"card"))for(;a&&a.parentNode&&(a=a.parentNode,!b.contains(a,"card")););if(a){var c=a.id.replace(this.domNode.id+
"_card_",""),c=parseInt(c,10);isNaN(c)||null==c||(b.contains(a,"selected")?(this.unselectCards(),this.emit("selection",{})):(this.unselectCards(),b.add(a,"selected"),this._currentSelectedCardNode=a,this.emit("selection",{data:this.options.features[c]})))}}})})},"dojox/gfx":function(){define(["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],function(t,l,p){l.switchTo(p);return l})},"dojox/gfx/_base":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "),
function(t,l,p,f,g,m,b,q,r){var e=l.getObject("dojox.gfx",!0),d=e._base={};e._hasClass=function(a,b){return(a=a.getAttribute("className"))&&0<=(" "+a+" ").indexOf(" "+b+" ")};e._addClass=function(a,b){var c=a.getAttribute("className")||"";(!c||0>(" "+c+" ").indexOf(" "+b+" "))&&a.setAttribute("className",c+(c?" ":"")+b)};e._removeClass=function(a,b){var c=a.getAttribute("className");c&&a.setAttribute("className",c.replace(new RegExp("(^|\\s+)"+b+"(\\s+|$)"),"$1$2"))};d._getFontMeasurements=function(){var a=
{"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},b,c;f("ie")&&(c=g.doc.documentElement.style.fontSize||"",c||(g.doc.documentElement.style.fontSize="100%"));var d=q.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},g.body());for(b in a)d.style.fontSize=b,a[b]=16*Math.round(12*d.offsetHeight/16)/12/1E3;
f("ie")&&(g.doc.documentElement.style.fontSize=c);g.body().removeChild(d);return a};var n=null;d._getCachedFontMeasurements=function(a){if(a||!n)n=d._getFontMeasurements();return n};var h=null,u={};d._getTextBox=function(a,b,c){var k,d,f=arguments.length,e;h||(h=q.create("div",{style:{position:"absolute",top:"-10000px",left:"0",visibility:"hidden"}},g.body()));k=h;k.className="";d=k.style;d.borderWidth="0";d.margin="0";d.padding="0";d.outline="0";if(1<f&&b)for(e in b)e in u||(d[e]=b[e]);2<f&&c&&(k.className=
c);k.innerHTML=a;k.getBoundingClientRect?(d=k.getBoundingClientRect(),d={l:d.left,t:d.top,w:d.width||d.right-d.left,h:d.height||d.bottom-d.top}):d=r.getMarginBox(k);k.innerHTML="";return d};d._computeTextLocation=function(a,b,c,d){var k={};switch(a.align){case "end":k.x=a.x-b;break;case "middle":k.x=a.x-b/2;break;default:k.x=a.x}k.y=a.y-c*(d?.75:1);return k};d._computeTextBoundingBox=function(a){if(!e._base._isRendered(a))return{x:0,y:0,width:0,height:0};var b;b=a.getShape();var c=a.getFont()||e.defaultFont;
a=a.getTextWidth();c=e.normalizedLength(c.size);b=d._computeTextLocation(b,a,c,!0);return{x:b.x,y:b.y,width:a,height:c}};d._isRendered=function(a){for(a=a.parent;a&&a.getParent;)a=a.parent;return null!==a};var w=0;d._getUniqueId=function(){var a;do a=t._scopeName+"xUnique"+ ++w;while(b.byId(a));return a};d._fixMsTouchAction=function(a){a.rawNode.style.touchAction="none"};l.mixin(e,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,
height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},
defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var a={};return function(b){var c=a[b];if(c)return new c;c=a[b]=new Function;c.prototype=
e["default"+b];return new c}}(),normalizeColor:function(a){return a instanceof p?a:new p(a)},normalizeParameters:function(a,b){var c;if(b){var d={};for(c in a)c in b&&!(c in d)&&(a[c]=b[c])}return a},makeParameters:function(a,b){var c=null;if(!b)return l.delegate(a);var d={};for(c in a)c in d||(d[c]=l.clone(c in b?b[c]:a[c]));return d},formatNumber:function(a,b){var c=a.toString();if(0<=c.indexOf("e"))c=a.toFixed(4);else{var d=c.indexOf(".");0<=d&&5<c.length-d&&(c=a.toFixed(4))}return 0>a?c:b?" "+
c:c},makeFontString:function(a){return a.style+" "+a.variant+" "+a.weight+" "+a.size+" "+a.family},splitFontString:function(a){var b=e.getDefault("Font");a=a.split(/\s+/);if(!(5>a.length)){b.style=a[0];b.variant=a[1];b.weight=a[2];var c=a[3].indexOf("/");b.size=0>c?a[3]:a[3].substring(0,c);var d=4;0>c&&("/"==a[4]?d=6:"/"==a[4].charAt(0)&&(d=5));d<a.length&&(b.family=a.slice(d).join(" "))}return b},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return e._base._getCachedFontMeasurements()["12pt"]/
12},pt2px:function(a){return a*e.px_in_pt()},px2pt:function(a){return a/e.px_in_pt()},normalizedLength:function(a){if(0===a.length)return 0;if(2<a.length){var b=e.px_in_pt(),c=parseFloat(a);switch(a.slice(-2)){case "px":return c;case "pt":return c*b;case "in":return 72*c*b;case "pc":return 12*c*b;case "mm":return c*e.mm_in_pt*b;case "cm":return c*e.cm_in_pt*b}}return parseFloat(a)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,
equalSources:function(a,b){return a&&b&&a===b},switchTo:function(a){var b="string"==typeof a?e[a]:a;b&&(m.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath Surface createSurface fixTarget".split(" "),function(a){e[a]=b[a]}),"string"==typeof a?e.renderer=a:m.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(a){return e.renderer=e[a]&&e[a].Surface===e.Surface?a:null}))}});return e})},"dojox/gfx/renderer":function(){define(["./_base","dojo/_base/lang","dojo/_base/sniff",
"dojo/_base/window","dojo/_base/config"],function(t,l,p,f,g){var m=null;p.add("vml",function(b,f,g){g.innerHTML='\x3cv:shape adj\x3d"1"/\x3e';b="adj"in g.firstChild;g.innerHTML="";return b});return{load:function(b,q,r){function e(){q(["dojox/gfx/"+d],function(b){t.renderer=d;m=b;r(b)})}if(m&&"force"!=b)r(m);else{var d=g.forceGfxRenderer;b=!d&&(l.isString(g.gfxRenderer)?g.gfxRenderer:"svg,vml,canvas,silverlight").split(",");for(var n,h;!d&&b.length;)switch(b.shift()){case "svg":"SVGAngle"in f.global&&
(d="svg");break;case "vml":p("vml")&&(d="vml");break;case "silverlight":try{p("ie")?(n=new ActiveXObject("AgControl.AgControl"),n.IsVersionSupported("1.0"))&&(h=!0):navigator.plugins["Silverlight Plug-In"]&&(h=!0)}catch(u){h=!1}finally{n=null}h&&(d="silverlight");break;case "canvas":f.global.CanvasRenderingContext2D&&(d="canvas")}"canvas"===d&&!1!==g.canvasEvents&&(d="canvasWithEvents");g.isDebug&&console.log("gfx renderer \x3d "+d);"svg"==d&&"undefined"!=typeof window.svgweb?window.svgweb.addOnLoad(e):
e()}}}})},"widgets/3DFx/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/3DFx/VizCards/templates/VizCards.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"${css.root}" role\x3d"presentation"\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"contentNode" class\x3d"${css.content}"\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:widgets/3DFx/Widget.html":'\x3cdiv\x3e\r\n  \x3ccanvas class\x3d"labelCanvas" data-dojo-attach-point\x3d"labelCanvas"\x3e\x3c/canvas\x3e\r\n  \x3cdiv class\x3d"panelBottom"\x3e\r\n    \x3c!--Panel Container --\x3e\r\n    \x3cdiv class\x3d"panelContainer"\x3e\r\n      \x3c!-- Panel Inner --\x3e\r\n      \x3cdiv class\x3d"panelInner"\x3e\r\n        \x3c!-- Panel Content --\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"panelMsgBlock"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"panelContent" class\x3d"panelContent"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!-- Panel Footer --\x3e\r\n    \x3cdiv class\x3d"panelFooter" data-dojo-attach-point\x3d"footerNode" class\x3d"jimu-main-background"\x3e\r\n      \x3cdiv class\x3d"panelFooterContent"\x3e\r\n        \x3cdiv class\x3d"btnPlay" data-dojo-attach-point\x3d"btnPlay" data-dojo-attach-event\x3d"onclick:_toggleVizTimer"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"panelTitle" data-dojo-attach-point\x3d"titleNode"\x3eTitle\x3c/div\x3e\r\n        \x3cdiv class\x3d"panelPages"\x3e\r\n          \x3cul class\x3d"pages" data-dojo-attach-point\x3d"pages"\x3e\r\n          \x3c/ul\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"btnClose" data-dojo-attach-point\x3d"btnClose" data-dojo-attach-event\x3d"onclick:_close"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/3DFx/css/style.css":".esri-viz-cards {position: absolute; width: 100%; height: 100%; overflow-x: auto; overflow-y: hidden;}.esri-viz-cards .content {margin: 0; padding: 0; width: auto; height: 100%; white-space: nowrap; overflow: visible;}.esri-viz-cards .card {position: relative; float: left; width: 150px; height: 100%; margin-left: 10px; margin-right: 20px; overflow: hidden; text-overflow: ellipsis; cursor: pointer; display: block;}.dj_rtl .esri-viz-cards .card {float: right;}.esri-viz-cards .card.selected {color: #ffffff;}.esri-viz-cards .header {position: absolute; width: 100%; height: 20px; line-height: 20px; font-size: 12px; border-bottom: 1px solid rgba(255, 255, 255, 0.25); overflow: hidden; text-overflow: ellipsis;}.esri-viz-cards .card.selected .header {border-bottom: 1px solid #ffffff;}.esri-viz-cards .value {position: absolute; top: 20px; width: 100%; height: 17px; line-height: 17px; font-size: 12px; overflow: hidden; text-overflow: ellipsis;}.esri-viz-cards .valueBig {position: absolute; top: 20px; width: 100%; height: 60px; line-height: 60px; font-size: 20px; overflow: hidden; text-overflow: ellipsis;}.esri-viz-cards .area {position: absolute; left: 30px; top: 37px; width: 80px; height: 70px; display: block;}.esri-viz-cards .chart {position: absolute; width: 100%; height: 100%; display: block;}.esri-viz-cards .pct {position: absolute; top: 50%; margin-top: -15px; width: 100%; height: 30px; line-height: 30px; font-size: 20px; text-align: center; overflow: hidden; text-overflow: ellipsis;}.esri-viz-cards::-webkit-scrollbar {width: 6px; height: 6px; background-color: rgba(255, 255, 255, 0.25);}.esri-viz-cards::-webkit-scrollbar-thumb {background-color: rgba(255, 255, 255, 0.5);}.esri-viz-cards {scrollbar-base-color: #000000; scrollbar-3dlight-color: #000000; scrollbar-highlight-color: #000000; scrollbar-track-color: #707070; scrollbar-arrow-color: #606060; scrollbar-shadow-color: #000000; scrollbar-dark-shadow-color: #000000; scrollbar-face-color: #606060;}.jimu-widget-viz {color: #ffffff; background-color: rgba(0,0,0,0.8); left: 0px !important; right: 0px !important; bottom: 0px; height: 160px !important; display: block; z-index: 100 !important; overflow: hidden;}.jimu-widget-viz .labelCanvas {position: absolute; top: -50px; height: 50px;}.jimu-widget-viz .panelBottom {position: absolute; width: 100%; height: 160px; left: 0px; top: 0px; color: #ffffff; padding: 0px;}.jimu-widget-viz .panelFooter {position: absolute; bottom: 0px; left: 0px; right: 0px; height: 40px; line-height: 40px; overflow: hidden; background-color: #393939; background-color: rgba(0, 0, 0, 0.25); border-bottom: 1px solid #353535; border-bottom: 1px solid rgba(0, 0, 0, 0.3);}.jimu-widget-viz .panelFooterContent {position: absolute; left: 10px; right: 24px; top: 8px; height: 24px; line-height: 24px; overflow-x: hidden; overflow-y: hidden; display: inline-block; white-space: nowrap; width: auto;}.jimu-rtl .jimu-widget-viz .panelFooterContent {position: absolute; left: 24px; right: 10px;}.jimu-widget-viz .panelTitle {float: left; margin-left: 10px; font-size: 14px;}.jimu-rtl .jimu-widget-viz .panelTitle {float: right; margin-right: 10px;}.jimu-widget-viz .panelPages {float: right;}.jimu-rtl .jimu-widget-viz .panelPages {float: left;}.jimu-widget-viz .pages {list-style-type: none; height: 24px; margin: auto; padding: 2px; display: block; cursor: pointer;}.jimu-widget-viz .pages li {width: 20px; height: 20px; display: inline-block; background: url(images/dot.png); margin: 0;}.jimu-widget-viz .pages li:hover {background: url(images/doton.png);}.jimu-widget-viz .pages li.active {background: url(images/doton.png);}.jimu-widget-viz .btnPlay {float: left; width: 24px; height: 24px; display: block; cursor: pointer; background-image: url('images/play.png'); background-repeat: no-repeat; background-position: center center; background-size: 24px;}.jimu-rtl .jimu-widget-viz .btnPlay {float: right;}.jimu-widget-viz .playing {background-image: url('images/pause.png'); background-repeat: no-repeat; background-position: center center; background-size: 24px;}.jimu-widget-viz .btnClose {position: absolute; left: auto; right: 0px; width: 24px; height: 40px; line-height: 40px; text-align: center; display: block; cursor: pointer; background-image: url('images/x.png'); background-repeat: no-repeat; background-position: center center; background-size: 18px;}.jimu-rtl .jimu-widget-viz .btnClose {position: absolute; left: 0px; right: auto;}.jimu-widget-viz .panelContainer {position: absolute; width: 100%; height: 120px; overflow: hidden; display: block;}.jimu-widget-viz .panelInner {position: absolute; top: 3px; left: 0px; right: 0px; height: 117px; display: block; overflow: hidden;}.jimu-widget-viz .loading {background-image: url('images/loading.gif'); background-repeat: no-repeat; background-position: center 10px;}",
"*now":function(t){t(['dojo/i18n!*preload*widgets/3DFx/nls/Widget*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","vi","uk","zh-hk","zh-tw","ROOT"]'])}}});
define("dojo/_base/declare dojo/_base/Color dojo/_base/html dojo/_base/lang dojo/_base/array dojo/_base/xhr dojo/Deferred dojo/dom dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/number dojo/on dojo/query dojo/json dijit/_WidgetsInTemplateMixin esri/request esri/Graphic esri/layers/GraphicsLayer esri/geometry/Point esri/geometry/support/webMercatorUtils esri/symbols/PictureMarkerSymbol esri/symbols/PointSymbol3D esri/symbols/ObjectSymbol3DLayer esri/tasks/QueryTask esri/tasks/support/Query jimu/BaseWidget jimu/dijit/Message jimu/utils jimu/dijit/LoadingShelter fx3d/layers/FxLayer ./VizCards/VizCards dojo/domReady!".split(" "),function(t,
l,p,f,g,m,b,q,r,e,d,n,h,u,w,a,k,c,D,v,E,F,G,H,I,J,K,y,L,z,A,B,C){return t([y,k],{baseClass:"jimu-widget-viz",name:"3DFx",postCreate:function(){this.inherited(arguments);this.vizFeatures=[];this.vizMax=0;this.vizCards=null;this.vizPage=0;this._featuresLoadedDfd=new b;this._sortedFeatures={}},startup:function(){this.inherited(arguments);this.loadingCover=new A({hidden:!0});this.loadingCover.placeAt(this.sceneView.map.id);this.loadingCover.startup();this._getStyleColor();var a=this._getStyleColor();
this.panelMsgBlock.innerHTML="";a.then(f.hitch(this,function(){this.config.vizLayer&&0!==this.config.vizFields.length?(this.loadingCover.show(),c(this.config.vizLayer.url+"/query",{query:{f:"json",returnGeometry:!1,returnCountOnly:!0,where:"1\x3d1"},callbackParamName:"callback"}).then(f.hitch(this,function(a){a.data.count?400<a.data.count?this.config.showPercent=!1:this.panelMsgBlock.innerHTML="":this.panelMsgBlock.innerHTML="";this._initUI();this._initLayers();this._initViz()}))):this.panelMsgBlock.innerHTML=
"\x3cp align\x3d'center'\x3e"+this.nls.viz_error+"\x3c/p\x3e"}))},onOpen:function(){this.inherited(arguments);this.loadingCover.hidden&&this.loadingCover.show();this._styleSync();this._showLayers()},onClose:function(){this._hideLayers();this._stopVizTimer();this.loadingCover.hide();this.vizCards&&this.vizCards.unselectCards();this.inherited(arguments)},onDeActive:function(){},destroy:function(){this._stopVizTimer();this._removeFxLayer();this._sortedFeatures={};this._featuresLoadedDfd=null;this.loadingCover.destroy();
this.inherited(arguments)},_close:function(){this.widgetManager.closeWidget(this.id)},_styleSync:function(){if(this.appConfig.theme.customStyles){var a=this.appConfig.theme.customStyles.mainBackgroundColor;n.set(this.footerNode,"backgroundColor",a);this.vizCards&&n.set(this.vizCards.contentNode,"color",a);this.config.color=a;this._updatePath();this.fxLayer&&this.fxLayer.set("renderingInfo",this._getRenderingInfo())}else this._updateUI(this.appConfig.theme.styles[0])},onAppConfigChanged:function(a,
b,c){this.appConfig=a;if("closed"!=this.state)switch(b){case "styleChange":this._styleSync()}},setPosition:function(a,b){if("BoxTheme"===this.appConfig.theme.name||"DartTheme"===this.appConfig.theme.name||"LaunchpadTheme"===this.appConfig.theme.name)this.inherited(arguments);else{this.position={left:"0px",right:"0px",bottom:"0px",height:"140px"};var c=z.getPositionStyle(this.position);c.position="absolute";b=this.sceneView.map.id;p.place(this.domNode,b);p.setStyle(this.domNode,c);this.started&&this.resize();
"TabTheme"===this.appConfig.theme.name&&(c=this.widgetManager.getControllerWidgets()[0],this.widgetManager.minimizeWidget(c.id))}},_updatePath:function(){this.vizCards&&this.vizCards.update({color:this._getColor()})},_updateUI:function(a){this._getStyleColor(a).then(f.hitch(this,function(){this.fxLayer&&(this._updatePath(),this.fxLayer.set("renderingInfo",this._getRenderingInfo()))}))},_getStyleColor:function(a){var c=new b;if(this.appConfig.theme.customStyles&&this.appConfig.theme.customStyles.mainBackgroundColor)return this.config.color=
this.appConfig.theme.customStyles.mainBackgroundColor,c.resolve(this.appConfig.theme.customStyles.mainBackgroundColor),c.promise;var d=this.appConfig.theme.name,x=this.appConfig.theme.styles[0];a&&(x=a);m.get({url:"./themes/"+d+"/manifest.json",handleAs:"json",load:f.hitch(this,function(a){a=a.styles;for(var b=0;b<a.length;b++){var d=a[b];d.name===x&&(n.set(this.footerNode,"backgroundColor",d.styleColor),this.vizCards&&n.set(this.vizCards.contentNode,"color",d.styleColor),this.config.color=d.styleColor,
c.resolve(d.styleColor))}})});return c.promise},_initUI:function(){this.vizCards=new C({view:this.sceneView,showPercent:this.config.showPercent},this.panelContent);this.vizCards.on("selection",f.hitch(this,this._featureSelection));this.vizCards.startup();"global"===this.sceneView.viewingMode?n.set(this.btnPlay,"display","block"):n.set(this.btnPlay,"display","none")},_initLayers:function(){this.sceneView.map.findLayerById(this.config.vizLayer.id).when().then(f.hitch(this,function(a){this.vizLayer=
a;this.vizLayerVisibility=a.visible;this.vizLayer.visible=!1;this._addFxLayer()}))},_getColor:function(){if(this.config.cycleColors){var a=this.vizPage,b=this.config.colors.length;return this.config.colors[a-Math.floor(a/b)*b]}return this.config.color},_getColors:function(){var a=this._getColor(),b=l.fromString("#ffffff"),a=l.fromString(a),c=l.blendColors(a,b,.3),b=l.blendColors(a,b,.8);return[a.toRgb(),c.toRgb(),b.toRgb()]},_getRenderingInfo:function(){var a=this._getColors(),b;switch(this.config.vizType){case "PointExtrude":b=
{visible:!0,repeat:1,animationInterval:this.config.interval/1E3,shapeType:"Cylinder",radius:this.config.maxWidth,height:this.config.maxHeight,transparency:100,bottomColor:a[0],topColors:[a[0],a[1]]};break;case "Pulse":b={visible:!0,repeat:1E3,animationInterval:this.config.interval/1E3,shapeType:"Circle",radius:this.config.maxWidth,transparency:80,solidColor:a[0],haloColor:a[1]};break;case "Bounce":b={visible:!0,repeat:1E3,animationInterval:this.config.interval/1E3,dashHeight:this.config.maxHeight,
radius:100,transparency:100,haloColors:a};break;case "GridSurface":b={visible:!0,repeat:1,animationInterval:this.config.interval/1E3,width:this.config.maxWidth,height:this.config.maxHeight,transparency:60,colors:[a[0],a[1],a[2]]};break;case "Fireball":case "JetTrail":b={visible:!0,repeat:1E3,animationInterval:this.config.interval/1E3,radius:30,transparency:90,colors:[a[0],a[0]]};break;case "AreaExtrude":b={visible:!0,repeat:1,animationInterval:this.config.interval/1E3,height:this.config.maxHeight,
transparency:100,bottomColor:a[0],topColors:[a[0],a[1]]}}"JetTrail"==this.config.vizType&&(b.showEndPoints=this.config.showJetTrailEndPoints);return b},_removeFxLayer:function(){this.fxLayer&&(this.fxLayer.remove(),this.fxLayer=null)},_addFxLayer:function(){this._removeFxLayer();var a=this._getRenderingInfo(),b=[];g.forEach(this.config.vizFields,function(a){b.push(a.field)});this.fxLayer=new B(this.config.vizLayer.url,{vizType:this.config.vizType,vizFields:b,displayField:this.config.displayField,
renderingInfo:a});this.fxLayer.on("all-features-loaded",f.hitch(this,this._allFeaturesLoaded));this.fxLayer.on("selected-feature-from-globe",f.hitch(this,this._selectedFeatureFromGlobe));this.fxLayer.on("abandon-selected-feature",f.hitch(this,this._abandonSelectedFeature));this.fxLayer.on("fx3d-ready",function(){this.loadingCover.hide()}.bind(this));this.fxLayer.watch("visible",f.hitch(this,function(a,b,c,d){!1===a&&this._stopVizTimer()}));this.sceneView.map.add(this.fxLayer)},_selectedFeatureFromGlobe:function(a){this.fxLayer&&
this.fxLayer.hideLabel();this._featuresLoadedDfd.then(function(){if(a.selectedFeature){var b=this._getFeatureIndex(a.selectedFeature);this.vizCards&&this.vizCards.selectCard(b)}}.bind(this))},_abandonSelectedFeature:function(a){this.vizCards&&this.vizCards.unselectCards()},_allFeaturesLoaded:function(a){this._featuresLoadedDfd.resolve();this.vizFeatures=a.graphics;this._setVizPage(0,!0)},_showLayers:function(){this.vizLayer&&(this.vizLayer.visible=!1);this.fxLayer&&(this.fxLayer.visible=!0);this.loadingCover.hide()},
_hideLayers:function(){this.vizLayer&&(this.vizLayer.visible=this.vizLayerVisibility);this.fxLayer&&(this.fxLayer.visible=!1)},_initViz:function(){this._initVizPages()},_initVizPages:function(){var a=this.pages;a.innerHTML="";if(1<this.config.vizFields.length){for(var b=0;b<this.config.vizFields.length;b++){var c=this.config.vizFields[b],c=e.create("li",{id:this.id+"-page"+b,title:c.label||c.alias},a);u(c,"click",f.hitch(this,this._setVizPage,b))}r.add("page0","active")}this.vizPage=0},_setVizPage:function(a,
b){this.loadingCover.hidden&&this.loadingCover.show();this._featuresLoadedDfd.then(function(){var c=this.id+"-page"+this.vizPage,d=this.id+"-page"+a;q.byId(c)&&r.remove(c,"active");this.vizPage=a;q.byId(d)&&r.add(d,"active");setTimeout(function(){this._processViz(b)}.bind(this),300)}.bind(this))},_toggleVizTimer:function(){this.playing?this._stopVizTimer():this._startVizTimer()},_startVizTimer:function(){this._stopVizTimer();this.vizTimer=setInterval(f.hitch(this,this._doViz),10*this.config.interval);
this.fxLayer&&(this.fxLayer.visible=!0,this.fxLayer.startSpinning());this.playing=!0;r.add(this.btnPlay,"playing")},_stopVizTimer:function(){this.vizTimer&&(clearInterval(this.vizTimer),this.vizTimer=null);this.fxLayer&&this.fxLayer.pauseSpinning();this.playing=!1;this.btnPlay&&r.remove(this.btnPlay,"playing")},_doViz:function(){var a=this.vizPage+1;a>=this.config.vizFields.length&&(a=0);this._setVizPage(a)},_processViz:function(a){var b=this.config.vizFields[this.vizPage],c=b.field,d=this.config.displayField;
this.titleNode.innerHTML=b.label||b.alias;if(this.fxLayer&&!0!==a){var e=this._getRenderingInfo();this.fxLayer.when().then(function(){this.fxLayer.switchVizField(c,e)}.bind(this))}a=this._sortedFeatures[c];a||(a=g.filter(this.vizFeatures,function(a){return null!=a.attributes[c]?!0:!1}),0<a.length&&(a.sort(function(a,b){return a.attributes[c]<b.attributes[c]?1:a.attributes[c]>b.attributes[c]?-1:0}),g.forEach(a,function(a,b){a.attributes.index=b}),this.vizMax=a[0].attributes[c]),this._sortedFeatures[c]=
a);this.filteredFeatures=a;d={features:a,vizField:c,displayField:d,color:this._getColor()};this.vizCards.update(d);this.loadingCover.hide()},_featureSelection:function(a){a.data?(a=a.data,this.playing&&this._stopVizTimer(),this.fxLayer&&this.fxLayer.showLabel(a)):this.fxLayer&&this.fxLayer.hideLabel()},_getFeatureIndex:function(a){var b=this.config.displayField,c=a.attributes[b],d=0;g.some(this.filteredFeatures,function(a){if(a.attributes[b]===c)return!0;d+=1});return d}})});