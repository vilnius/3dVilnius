// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(e,b,m,k,n){return m("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,contextRequire:null,_beforeFillContent:function(){if(/dojoType|data-dojo-type/i.test(this.domNode.innerHTML)){var b=this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0);n.parse(b,{noStart:!this._earlyTemplatedStartup,
template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(k.hitch(this,function(b){this._startupWidgets=b;for(var h=0;h<b.length;h++)this._processTemplateNode(b[h],function(b,h){return b[h]},function(b,h,e){return h in b?b.connect(b,h,e):b.on(h,e,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");
}},_processTemplateNode:function(b,e,k){return e(b,"dojoType")||e(b,"data-dojo-type")?!0:this.inherited(arguments)},startup:function(){e.forEach(this._startupWidgets,function(b){b&&!b._started&&b.startup&&b.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"esri/layers/GraphicsLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../core/promiseUtils ../core/accessorSupport/decorators ./Layer ./mixins/ScaleRangeLayer ../support/GraphicsCollection ../symbols/support/ElevationInfo".split(" "),
function(e,b,m,k,n,h,t,u,d,p,x,v,y){return function(b){function g(d){d=b.call(this)||this;d.elevationInfo=null;d.graphics=new v.default;d.screenSizePerspectiveEnabled=!0;d.type="graphics";return d}m(g,b);g.prototype.destroy=function(){this.removeAll()};g.prototype.add=function(b){this.graphics.add(b);return this};g.prototype.addMany=function(b){this.graphics.addMany(b);return this};g.prototype.removeAll=function(){this.graphics.removeAll();return this};g.prototype.remove=function(b){this.graphics.remove(b)};
g.prototype.removeMany=function(b){this.graphics.removeMany(b)};g.prototype.importLayerViewModule=function(b){return t(this,void 0,void 0,function(){return h(this,function(d){switch(b.type){case "2d":return[2,u.create(function(b){return e(["../views/2d/layers/GraphicsLayerView2D"],b)})];case "3d":return[2,u.create(function(b){return e(["../views/3d/layers/GraphicsLayerView3D"],b)})]}return[2]})})};g.prototype.graphicChanged=function(b){this.emit("graphic-update",b)};k([d.property({type:y})],g.prototype,
"elevationInfo",void 0);k([d.property(v.graphicsCollectionProperty)],g.prototype,"graphics",void 0);k([d.property({type:["show","hide"]})],g.prototype,"listMode",void 0);k([d.property()],g.prototype,"screenSizePerspectiveEnabled",void 0);k([d.property({readOnly:!0})],g.prototype,"type",void 0);return g=k([d.subclass("esri.layers.GraphicsLayer")],g)}(d.declared(p,x))})},"dojo/throttle":function(){define([],function(){return function(e,b){var m=!0;return function(){m&&(m=!1,e.apply(this,arguments),
setTimeout(function(){m=!0},b))}}})},"widgets/Coordinate/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/Coordinate/Widget.html":'\x3cdiv\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"coordinateBackground"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"coordinateMenuContainer" style\x3d"display:none"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"coordinateMenu"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"coordinateInfoMenu" class\x3d"coordinate-background coordinate-info-menu jimu-float-leading jimu-align-leading"\x3e\r\n      \x3cdiv class\x3d"jimu-float-leading coordinate-locate-container" data-dojo-attach-point\x3d"locateContainer"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"locateButton" class\x3d"coordinate-locate jimu-float-leading"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"coordinateInfo" class\x3d"coordinate-info jimu-float-leading jimu-align-leading"\x3e\r\n        ${nls.loading}\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"elevInfo" class\x3d"coordinate-info jimu-float-leading jimu-align-leading"\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"eyeInfo" class\x3d"coordinate-info jimu-float-leading jimu-align-leading"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"jimu-float-trailing coordinate-foldable-container" data-dojo-attach-point\x3d"foldContainer"\x3e\r\n      \x3cdiv class\x3d"coordinate-foldable jimu-float-trailing" data-dojo-attach-point\x3d"foldableNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Coordinate/css/style.css":".jimu-widget-coordinate .coordinate-background{line-height: 17px; overflow: hidden; font-size: 10px; color: #fff; background-color: rgb(0,0,0); background-color: rgba(0,0,0,0.5);}.jimu-widget-coordinate .display-coordinate-menu{display: block !important; border-bottom: 1px solid rgba(255,255,255,0.4);}.jimu-widget-coordinate .coordinate-locate{width: 17px; height: 17px; background: url(images/locate.png) center no-repeat;}.jimu-widget-coordinate .coordinate-locate-container{width: 18px; height: 17px; border-right: 1px solid rgba(255,255,255,0.4);}.jimu-widget-coordinate .coordinate-locate-container:hover .coordinate-locate{background: url(images/locate-hover.png) center no-repeat !important; cursor: pointer;}.jimu-widget-coordinate .coordinate-locate-container-active .coordinate-locate{background: url(images/locate-active.png) center no-repeat !important; cursor: pointer;}.jimu-widget-coordinate .coordinate-info{margin: 0 4px; font-size: 11px !important; color: #fff !important; max-height: 17px;}.jimu-widget-coordinate .coordinate-info-menu-empty .coordinate-info{margin: 0;}.jimu-widget-coordinate .coordinate-info-menu-empty .coordinate-locate-container {border-style: none !important;}.jimu-widget-coordinate .coordinate-foldable-container {border-left: 1px solid rgba(255,255,255,0.4); height: 17px;}.jimu-widget-coordinate .coordinate-foldable{background: url(images/more.png) center no-repeat; cursor: pointer; width: 17px; height: 15px; margin: 1px 0;}.jimu-widget-coordinate:hover .coordinate-foldable{background-image: url(images/more-hover.png);}.jimu-rtl .jimu-widget-coordinate .coordinate-locate-container{border-right-style: none; border-left: 1px solid rgba(255,255,255,0.4);}.jimu-rtl .jimu-widget-coordinate .coordinate-locate-container:hover .coordinate-locate,.jimu-rtl .jimu-widget-coordinate .coordinate-locate-container-active .coordinate-locate{background-position: right center;}.jimu-rtl .jimu-widget-coordinate .coordinate-foldable-container{border-left-style: none; border-right: 1px solid rgba(255,255,255,0.4);}.claro .jimu-widget-coordinate .dijitMenuTable {background: transparent; border-style: none; width: 100%;}.claro .jimu-widget-coordinate .dijitMenuItem {color: #fff;}.claro .jimu-widget-coordinate .dijitMenu .dijitMenuItem td{border-style: none; text-align: left; padding: 4px 2px;}.claro .jimu-widget-coordinate .dijitMenu .dijitMenuItem.selected-item{font-weight: bold; background: #000;}.jimu-rtl .claro .jimu-widget-coordinate .dijitMenu .dijitMenuItem td{text-align: right;}.claro .jimu-widget-coordinate .dijitMenu .dijitMenuItemHover td,.claro .jimu-widget-coordinate .dijitMenu .dijitMenuItemHover {color: #fff; background: #000; border-style: none;}.claro .jimu-widget-coordinate .dijitMenu .dijitMenuItemActive,.claro .jimu-widget-coordinate .dijitMenu .dijitMenuItemActive td,.claro .jimu-widget-coordinate .dijitMenu .dijitMenuItemSelected,.claro .jimu-widget-coordinate .dijitMenu .dijitMenuItemSelected td{background: #000; color: #fff;}",
"*now":function(e){e(['dojo/i18n!*preload*widgets/Coordinate/nls/Widget*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","vi","uk","zh-hk","zh-tw","ROOT"]'])}}});
define("dojo/_base/declare dojo/_base/html dijit/_WidgetsInTemplateMixin esri/geometry/Point esri/geometry/SpatialReference jimu/BaseWidget jimu/utils jimu/dijit/Message dojo/_base/lang dojo/on dojo/dom-class dijit/DropDownMenu dijit/MenuItem dojo/aspect dojo/Deferred esri/request esri/Graphic esri/layers/GraphicsLayer esri/tasks/support/ProjectParameters esri/geometry/support/webMercatorUtils esri/symbols/PictureMarkerSymbol jimu/portalUtils esri/config libs/usng/usng jimu/SpatialReference/unitUtils dojo/throttle".split(" "),function(e,
b,m,k,n,h,t,u,d,p,x,v,y,B,g,C,D,E,F,G,H,I,J,z,w,A){var K={INCHES:"Inches",FOOT:"Foot",FEET:"Foot",YARDS:"Yards",MILES:"Miles",NAUTICAL_MILES:"Nautical_Miles",MILLIMETERS:"Millimeters",CENTIMETERS:"Centimeters",METER:"Meter",METERS:"Meter",KILOMETERS:"Kilometers",DECIMETERS:"Decimeters",DEGREE:"Decimal_Degrees",DECIMAL_DEGREES:"Decimal_Degrees",DEGREE_MINUTE_SECONDS:"Degree_Minutes_Seconds",MGRS:"MGRS",USNG:"USNG"},q={esriCentimeters:"CENTIMETERS",esriDecimalDegrees:"DECIMAL_DEGREES",esriDegreeMinuteSeconds:"DEGREE_MINUTE_SECONDS",
esriDecimeters:"DECIMETERS",esriFeet:"FOOT",esriInches:"INCHES",esriKilometers:"KILOMETERS",esriMeters:"METER",esriMiles:"MILES",esriMillimeters:"MILLIMETERS",esriNauticalMiles:"NAUTICAL_MILES",esriPoints:"POINTS",esriUnknownUnits:"UNKNOWN",esriYards:"YARDS"};return e([h,m],{baseClass:"jimu-widget-coordinate",name:"Coordinate",_cache:{_container:null,_mouseX:null,_mouseY:null},postMixInProperties:function(){this.nls.enableClick=this.nls.enableClick||"Click to enable clicking map to get coordinates";
this.nls.disableClick=this.nls.disableClick||"Click to disable clicking map to get coordinates"},postCreate:function(){this.inherited(arguments);this._cache._container=this.sceneView.container;x.add(this.coordinateBackground,"coordinate-background");this.own(p(this.sceneView,"click",d.hitch(this,this.onMapClick)));this.own(p(this.locateButton,"click",d.hitch(this,this.onLocateButtonClick)));this.own(p(this.foldContainer,"click",d.hitch(this,this.onFoldContainerClick)));this.graphicsLayer=new E;this.sceneView.map.add(this.graphicsLayer);
this.own(this.sceneView.watch("viewpoint",A(d.hitch(this,this.onWatchViewpoint),50)));this.own(p(this._cache._container,"mousemove",A(d.hitch(this,this.onMouseMove),100)))},startup:function(){this.inherited(arguments);this.config.spatialReferences&&1<this.config.spatialReferences.length?b.setStyle(this.foldableNode,"display","inline-block"):b.setStyle(this.foldableNode,"display","none")},onOpen:function(){this.sceneView.when(d.hitch(this,function(){try{this.sceneView.spatialReference&&(this.sceneView.spatialReference.isWebMercator?
this._mapWkid=3857:this.sceneView.spatialReference.wkid&&(this._mapWkid=this.sceneView.spatialReference.wkid)),this.selectedWkid=this._mapWkid}catch(a){console.error(a)}this._processData().then(d.hitch(this,function(a){this.domNode&&(this.initPopMenu(a),1>=this.popMenu.getChildren().length&&b.setStyle(this.foldContainer,"display","none"))}),d.hitch(this,function(a){console.error(a)}))}),d.hitch(this,function(a){console.error(a)}))},_processData:function(){var a=new g,c=this.sceneView.map.itemInfo.itemData.baseMap.baseMapLayers[0];
this.config.spatialReferences&&this.config.spatialReferences.length?(this._configured=!0,a.resolve(this.config.spatialReferences)):I.getUnits(this.appConfig.portalUrl).then(d.hitch(this,function(l){c||(c=this.sceneView.map.layers.items[0]);var b=c&&("BingMapsRoad"===c.layerType||"BingMapsHybrid"===c.layerType||"BingMapsAerial"===c.layerType),r=c&&"WebTiledLayer"===c.layerType,g=c&&"VectorTileLayer"===c.layerType;c&&c.url?C(c.url,{responseType:"json",callbackParamName:"callback",query:{f:"json"}}).then(d.hitch(this,
function(c){this._processMapUnits(c).then(d.hitch(this,function(c){var b=this._getUnconfiguredUnitOptions(c.data.units,l),f=c.data.spatialReference,d=c.data.fullExtent,f={wkid:f&&(f.latestWkid||f.wkid)||d&&d.spatialReference&&d.spatialReference.wkid,label:"",outputUnit:b.outputUnit};f.options={sameSRWithMap:!0,defaultUnit:q[c.data.units]||c.data.units,isGeographicUnit:b.isGeographicUnit,isGeographicCS:b.isGeographicCS,isProjectUnit:b.isProjectUnit,isProjectedCS:b.isProjectedCS,unitRate:b.unitRate};
this._configured=!1;a.resolve(f)}))}),d.hitch(this,function(c){console.error(c);a.reject(c)})):c&&("OpenStreetMap"===c.layerType||b||r||g)?(b=this._getUnconfiguredUnitOptions("esriMeters",l),r={wkid:3857,label:"",outputUnit:b.outputUnit},r.options={sameSRWithMap:!0,defaultUnit:q.esriMeters,isGeographicUnit:b.isGeographicUnit,isGeographicCS:b.isGeographicCS,isProjectUnit:b.isProjectUnit,isProjectedCS:b.isProjectedCS,unitRate:b.unitRate},this._configured=!1,a.resolve(r)):a.reject(Error("no baseMap"))}));
return a},_processMapUnits:function(a){var c=new g;if(a.data.units)c.resolve(a);else{var b=a.spatialReference||d.exists("tileInfo.spatialReference",a)&&a.tileInfo.spatialReference,f=a.extent||a.initialExtent||a.fullExtent,r=b&&(b.latestWkid||b.wkid)||f&&f.spatialReference&&f.spatialReference.wkid,e=this;require(["jimu/SpatialReference/srUtils"],function(b){b.loadResource().then(d.hitch(e,function(){var l=b.getCSUnit(r);a.data={};a.data.units=l;c.resolve(a)}))})}return c},_getUnconfiguredUnitOptions:function(a,
c){a=q[a]||a;var b="",f=1,d="",g="",e="",h="";w.isProjectUnit(a)?(e=h=!0,d=g=!1,b="english"===c?q.esriFeet.toUpperCase():q.esriMeters.toUpperCase(),f=w.getUnitRate(a.toUpperCase(),b)):w.isGeographicUnit(a)&&(e=h=!1,d=g=!0,b=a.toUpperCase());this.sceneView.spatialReference.isWebMercator&&(b=q.esriDecimalDegrees,g=!0,h=!1,f=1);return{outputUnit:b,unitRate:f,isGeographicUnit:g,isGeographicCS:d,isProjectUnit:h,isProjectedCS:e}},initPopMenu:function(a){this.popMenu=new v({},this.coordinateMenu);B.after(this.popMenu,
"onItemClick",d.hitch(this,this.onClickMenu),!0);"[object Array]"!==Object.prototype.toString.call(a)?(this.selectedWkid=parseInt(a.wkid,10),this.addMenuItem("",this.selectedWkid,a.outputUnit,a.elevationUnit,a.eyeAltUnit,null,null,a.options),this.selectedItem=this.popMenu.getChildren()[0]):(this.selectedWkid=parseInt(a[0].wkid,10),this.selectedTfWkid=a[0].transformationWkid&&parseInt(a[0].transformationWkid,10),this._addAllMenuItems(),this.selectedItem=this.popMenu.getChildren()[0],this.selectedItem.set({label:this.getStatusString(!0,
this.selectedItem.params.name,this.selectedItem.params.wkid)}),b.addClass(this.selectedItem.domNode,"selected-item"));this._adjustCoordinateInfoUI(this.selectedWkid);this.popMenu.startup()},_addAllMenuItems:function(){for(var a=this.config.spatialReferences.length,c=0;c<a;c++)this.addMenuItem(this.config.spatialReferences[c].label,this.config.spatialReferences[c].wkid,this.config.spatialReferences[c].outputUnit,this.config.spatialReferences[c].elevationUnit,this.config.spatialReferences[c].eyeAltUnit,
this.config.spatialReferences[c].transformationWkid,this.config.spatialReferences[c].transformForward,this.config.spatialReferences[c].options)},_isWebMercator:function(a){return n.prototype._isWebMercator?n.prototype._isWebMercator.apply({wkid:parseInt(a,10)},[]):(new n(parseInt(a,10))).isWebMercator},canShowInClient:function(a){a=4326===this._mapWkid&&this._isWebMercator(a)||this._isWebMercator(this._mapWkid)&&4326===parseInt(a,10);var c=this.selectedItem.get("options");return c&&c.sameSRWithMap||
a?!0:!1},onClickMenu:function(a){this._setElevInfo();b.removeClass(this.selectedItem.domNode,"selected-item");this.selectedItem.set({label:this.getStatusString(!1,this.selectedItem.params.name,this.selectedItem.params.wkid)});this.selectedWkid=parseInt(a.params.wkid,10);this.selectedTfWkid=a.params.tfWkid;this.forward=a.params.forward;a.set({label:this.getStatusString(!0,a.params.name,a.params.wkid)});b.addClass(a.domNode,"selected-item");this.selectedItem=a;this._adjustCoordinateInfoUI(this.selectedWkid);
b.removeClass(this.coordinateMenuContainer,"display-coordinate-menu")},_adjustCoordinateInfoUI:function(a){b.removeClass(this.coordinateInfoMenu,"coordinate-info-menu-empty");this._markerGraphic&&this.graphicsLayer.remove(this._markerGraphic);this._markerGraphic=null;this.canShowInClient(a)?(this.enableRealtime=!0,this._getDefaultPlaceHolder()):(this.enableRealtime=!1,this._clearCoordinateInfo(),b.addClass(this.coordinateInfoMenu,"coordinate-info-menu-empty"));b.setAttr(this.locateButton,"title",
this.nls.enableClick);b.removeClass(this.locateContainer,"coordinate-locate-container-active");this.enableWebMapPopup();this.onExtentChange({extent:this.sceneView.map.extent})},disableWebMapPopup:function(){},enableWebMapPopup:function(){},onLocateButtonClick:function(){if(b.hasClass(this.coordinateMenuContainer,"display-coordinate-menu"))this.onFoldContainerClick();b.removeClass(this.coordinateInfoMenu,"coordinate-info-menu-empty");b.toggleClass(this.locateContainer,"coordinate-locate-container-active");
this._markerGraphic&&this.graphicsLayer.remove(this._markerGraphic);this._markerGraphic=null;this.canShowInClient(this.selectedWkid)?this.enableRealtime?(this.enableRealtime=!1,this.coordinateInfo.innerHTML=this.nls.hintMessage,b.setAttr(this.locateButton,"title",this.nls.disableClick),this.disableWebMapPopup()):(this.enableRealtime=!0,this._getDefaultPlaceHolder(),b.setAttr(this.locateButton,"title",this.nls.enableClick),this.enableWebMapPopup()):b.hasClass(this.locateContainer,"coordinate-locate-container-active")?
(this.coordinateInfo.innerHTML=this.nls.hintMessage,this.disableWebMapPopup(),b.setAttr(this.locateButton,"title",this.nls.disableClick)):(this._clearCoordinateInfo(),b.addClass(this.coordinateInfoMenu,"coordinate-info-menu-empty"),this.enableWebMapPopup(),b.setAttr(this.locateButton,"title",this.nls.enableClick))},onDeActive:function(){if(b.hasClass(this.locateContainer,"coordinate-locate-container-active"))this.onLocateButtonClick();if(b.hasClass(this.coordinateMenuContainer,"display-coordinate-menu"))this.onFoldContainerClick()},
getStatusString:function(a,c,b){var l="",d=this._mapWkid;b=parseInt(b,10);l=a?"\x3cb\x3e"+l+c+"\x3c/b\x3e\x26nbsp;"+this._rtlTheBrackets(b)+"\x26nbsp;":l+c+"\x26nbsp;\x26nbsp;"+this._rtlTheBrackets(b)+"\x26nbsp;";b===d&&(l+=this.nls.defaultLabel);return l},_rtlTheBrackets:function(a){return window.isRTL?"\x26rlm;("+a+")":"("+a+")"},_getEyeInfoUnitRate:function(a){return w.getUnitRate("METER","english"===a?"FOOT":"METER")},addMenuItem:function(a,c,b,f,d,g,e,h){a={label:this.getStatusString(!1,a,c)||
"",name:a||"",wkid:c||"",outputUnit:b||"",tfWkid:g||"",options:h,elevationUnitRate:this._getEyeInfoUnitRate(f),eyeAltUnitRate:this._getEyeInfoUnitRate(d)};a.tfWkid&&(a.forward=e);this.popMenu.addChild(new y(a))},_toFormat:function(a){return t.localizeNumberByFieldInfo(a,{format:{places:this.config.latLonDecimalPlaces,digitSeparator:this.config.addSeparator}})},onProjectComplete:function(a,c){if(this.selectedWkid&&a===this.selectedWkid&&this.domNode){c=c[0];a=c.x;c=c.y;var b=this.selectedItem.get("outputUnit"),
f=this.selectedItem.get("options");!0===isNaN(a)&&!0===isNaN(c)?this._clearCoordinateInfo():"MGRS"===b||"USNG"===b?this._displayUsngOrMgrs(b,c,a):f.isGeographicUnit?this._displayDegOrDms(b,c,a):this._displayProject(b,c,a)}},_unitToNls:function(a){var c=K[a.toUpperCase()];return this.nls[c]||this.nls[a]||a},onProjectError:function(a){new u({message:a.message||a.toString()});this.coordinateInfo.innerHTML=this.nls.hintMessage;this._setElevInfo()},onExtentChange:function(){this.selectedItem&&(b.setStyle(this.locateContainer,
"display","block"),1<this.popMenu.getChildren().length?b.setStyle(this.foldContainer,"display","block"):b.setStyle(this.foldContainer,"display","none"))},_getMarkerGraphic:function(a){var c=new H(this.folderUrl+"css/images/esriGreenPin16x26.png",16,26);c.setXoffset=0;c.setYoffset=12;return new D(a,c)},onMapClick:function(a){if(!this.enableRealtime&&this.selectedItem){if(this.canShowInClient(this.selectedWkid)||b.hasClass(this.locateContainer,"coordinate-locate-container-active"))this._markerGraphic&&
this.graphicsLayer.remove(this._markerGraphic),this._markerGraphic=this._getMarkerGraphic(a.mapPoint),this.graphicsLayer.add(this._markerGraphic);this.canShowInClient(this.selectedWkid)?this._setCoordinateInfo():b.hasClass(this.locateContainer,"coordinate-locate-container-active")&&a.mapPoint&&a.mapPoint.x&&a.mapPoint.y&&(this._setCoordinateInfo(!0),a=new k(a.mapPoint.x,a.mapPoint.y,this.sceneView.spatialReference),this._projectMapPoint(a))}},_projectMapPoint:function(a){var c=new F,b=null,f=this.selectedItem.get("options");
c.geometries=[a];f.isProjectedCS?b=f.isProjectUnit?this.selectedWkid:f.spheroidCS:f.isGeographicCS&&(b=this.selectedWkid);this.selectedTfWkid&&(c.transformation=new n(parseInt(this.selectedTfWkid,10)),c.transformForward=JSON.parse(this.forward));c.outSpatialReference=new n(parseInt(b,10));this.coordinateInfo.innerHTML=this.nls.computing;J.geometryService.project(c).then(d.hitch(this,this.onProjectComplete,this.selectedWkid),d.hitch(this,this.onProjectError))},_displayOnClient:function(a){var c=this.selectedItem.get("outputUnit"),
b=a.x,f=a.y,d=null,g=4326===this._mapWkid&&this._isWebMercator(this.selectedWkid)||this._isWebMercator(this._mapWkid)&&4326===this.selectedWkid,e=this.selectedItem.get("options"),d=a.normalize();e.isGeographicUnit&&(b=d.longitude||b);e.isGeographicUnit&&(f=d.latitude||f);g?4326===a.spatialReference.wkid&&this._isWebMercator(this.selectedWkid)?"MGRS"===c||"USNG"===c?this._displayUsngOrMgrs(c,d.latitude,d.longitude):e.isGeographicUnit?this._displayDegOrDms(c,f,b):e.isProjectUnit&&(a=G.lngLatToXY(b,
f),this._displayProject(c,a[1],a[0])):a.spatialReference.isWebMercator&&4326===this.selectedWkid&&("MGRS"===c||"USNG"===c?this._displayUsngOrMgrs(c,d.latitude,d.longitude):e.isGeographicUnit&&this._displayDegOrDms(c,f,b)):e.defaultUnit===c?(this._displayCoordinatesByOrder(this._toFormat(b),this._toFormat(f)),this.coordinateInfo.innerHTML+=" "+this._unitToNls(c)):4326===a.spatialReference.wkid||a.spatialReference.isWebMercator?"MGRS"===c||"USNG"===c?this._displayUsngOrMgrs(c,d.latitude,d.longitude):
e.isGeographicUnit?this._displayDegOrDms(c,f,b):e.isProjectedCS&&this._displayProject(c,f,b):e.isProjectedCS?this._displayProject(c,f,b):e.isGeographicCS&&("MGRS"===c||"USNG"===c?this._displayUsngOrMgrs(c,f,b):e.isGeographicUnit&&this._displayDegOrDms(c,f,b))},destroy:function(){this._markerGraphic&&this.graphicsLayer.remove(this._markerGraphic);this.graphicsLayer&&this.sceneView.map.remove(this.graphicsLayer);this.inherited(arguments)},_displayUsngOrMgrs:function(a,b,d){"MGRS"===a?this.coordinateInfo.innerHTML=
z.LLtoMGRS(b,d,5):"USNG"===a&&(this.coordinateInfo.innerHTML=z.LLtoUSNG(b,d,5));this.coordinateInfo.innerHTML+=" "+this._unitToNls(a)},_displayDegOrDms:function(a,b,d){var c="",e="",c=this.selectedItem.get("options");d*=c.unitRate;b*=c.unitRate;"DEGREE_MINUTE_SECONDS"===a?(c=this.degToDMS(b,"LAT"),e=this.degToDMS(d,"LON"),this._displayCoordinatesByOrder(c,e)):(this._displayCoordinatesByOrder(this._toFormat(d),this._toFormat(b)),this.coordinateInfo.innerHTML+=" "+this._unitToNls(a))},_displayProject:function(a,
b,d){var c=this.selectedItem.get("options");d*=c.unitRate;b*=c.unitRate;this._displayCoordinatesByOrder(this._toFormat(d),this._toFormat(b));this.coordinateInfo.innerHTML+=" "+this._unitToNls(a)},_clearCoordinateInfo:function(){this.coordinateInfo.innerHTML=""},_displayCoordinatesByOrder:function(a,b){this.coordinateInfo.innerHTML=this.config.displayOrderLonLat?a+"  "+b:b+"  "+a},onFoldContainerClick:function(){this._configured&&b.toggleClass(this.coordinateMenuContainer,"display-coordinate-menu")},
onWatchViewpoint:function(){this.onMouseMove({x:this._cache._mouseX,y:this._cache._mouseY})},onMouseMove:function(a){a.pageX&&a.pageY&&(this._cache._mouseX=a.pageX,this._cache._mouseY=a.pageY);this._setEyeInfo();this.enableRealtime&&this.selectedItem&&this._setCoordinateInfo()},_setCoordinateInfo:function(a){this._cache._mouseX&&this._cache._mouseY&&this.sceneView.hitTest({x:this._cache._mouseX,y:this._cache._mouseY}).then(d.hitch(this,function(b){a||this._setLonLat(b);this._setElev(b)}))},_setLonLat:function(a){"undefined"!==
typeof a&&a.ground&&null!==a.ground.mapPoint&&(null!==a.ground.mapPoint.latitude&&null!==a.ground.mapPoint.longitude||null!==a.ground.mapPoint.x&&null!==a.ground.mapPoint.y)?this._displayOnClient(a.ground.mapPoint):this._clearCoordinateInfo()},_setElev:function(a){a.results&&a.results[0]&&a.results[0].mapPoint&&a.results[0].mapPoint.z?this._setElevInfo(a.results[0].mapPoint):"undefined"!==typeof a&&a.ground&&null!==a.ground.mapPoint&&"undefined"!==typeof a.ground.mapPoint.z?this._setElevInfo(a.ground.mapPoint):
this._setElevInfo()},_getElev:function(a){var b="";a&&a.z&&(b=" "+this.nls.ELEV+" "+this._trunNumToKmOrM(a.z,!0));return b},_setElevInfo:function(a){var b="";a&&(b=this._getElev(a),b+=" ");this.elevInfo.innerHTML=b},_setEyeInfo:function(){if(this.sceneView.camera&&this.sceneView.camera.position){var a=this.sceneView.camera.position.z,a=this._trunNumToKmOrM(a);this.eyeInfo.innerHTML=this.nls.EYE_ALT+" "+a}},_trunNumToKmOrM:function(a,b){var c="",c=1,d=1E3;a=parseFloat(a);b&&(d=1E4);this.selectedItem&&
this.selectedItem.get&&(c=b?this.selectedItem.get("elevationUnitRate"):this.selectedItem.get("eyeAltUnitRate"));1===parseInt(c,10)?a>=d||a<=-d?(a/=1E3,c=this._unitToNls("KILOMETERS")):c=this._unitToNls("METERS"):(a*=c,c=this._unitToNls("FOOT"));return(a=t.localizeNumberByFieldInfo(a,{format:{places:this.config.eyeDecimalPlaces,digitSeparator:this.config.addSeparator}}))?a+" "+c:""},degToDMS:function(a,b){var c=Math.abs(a),d=Math.floor(c),c=c-d,e=Math.floor(60*c),c=Math.floor(3600*(c-e/60));60===c&&
(e++,c=0);60===e&&(d++,e=0);return d+"\x26deg;"+(10>e?"0"+e:e)+"\x26prime;"+(10>c?"0"+c:c)+"\x26Prime;"+("LAT"===b?0>a?"S":"N":0>a?"W":"E")},_getDefaultPlaceHolder:function(){t.isMobileUa()?this.coordinateInfo.innerHTML="":this.coordinateInfo.innerHTML=this.nls.realtimeLabel}})});