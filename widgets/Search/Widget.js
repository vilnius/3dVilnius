// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"esri/widgets/Search":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper @dojo/framework/shim/array dojo/i18n!../nls/common dojo/i18n!./Search/nls/Search dojo/regexp ../intl ../core/events ../core/Handles ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./Search/SearchResultRenderer ./Search/SearchViewModel ./support/widget".split(" "),function(p,l,q,b,n,e,k,m,g,d,f,a,c,h,x,w,v){var r=/<[a-z/][\s\S]*>/i;return function(h){function t(c){var b=
h.call(this)||this;b._handles=new f;b._inputNode=null;b._sourceMenuButtonNode=null;b._sourceListNode=null;b._suggestionListNode=null;b._searchResultRenderer=new x;b._suggestPromise=null;b._relatedTarget=null;b.activeMenu="none";b.activeSource=null;b.activeSourceIndex=null;b.allPlaceholder=null;b.allSources=null;b.autoNavigate=null;b.autoSelect=null;b.defaultSources=null;b.goToOverride=null;b.iconClass="esri-icon-search";b.includeDefaultSources=null;b.label=k.widgetLabel;b.locationEnabled=null;b.maxResults=
null;b.maxSuggestions=null;b.minSuggestCharacters=null;b.popupEnabled=null;b.popupTemplate=null;b.portal=null;b.resultGraphic=null;b.resultGraphicEnabled=null;b.results=null;b.searchAllEnabled=null;b.searchTerm=null;b.selectedResult=null;b.sources=null;b.suggestions=null;b.suggestionsEnabled=null;b.view=null;b.viewModel=new w;b.own(a.watch(b,"searchTerm",function(a){if(a&&"warning"===b.activeMenu||!a&&!b.get("viewModel.selectedSuggestion.location"))b.activeMenu="none"}),a.on(b,"viewModel.allSources",
"change",function(){return b._watchSourceChanges()}),a.init(b,["viewModel.popupTemplate","viewModel.popupTemplate.content"],function(){"{Match_addr}"===b.get("viewModel.popupTemplate.content")&&(b.viewModel.popupTemplate.content=b._renderSearchResultsContent.bind(b))}));return b}q(t,h);t.prototype.destroy=function(){this._handles.destroy();this._handles=null;this._cancelSuggest();this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=
null)};t.prototype.clear=function(){};t.prototype.focus=function(){this._inputNode&&(this.activeMenu="suggestion",this._inputNode.focus(),this.emit("search-focus"))};t.prototype.blur=function(a){this._inputNode&&(this._inputNode.blur(),this._inputBlur(a),this.emit("search-blur"))};t.prototype.search=function(a){var c=this;this.activeMenu="none";this._cancelSuggest();return this.viewModel.search(a).catch(function(a){c.activeMenu="none";return a}).then(function(a){c.activeMenu=a.numResults?"none":"warning";
return a})};t.prototype.suggest=function(a){var c=this;this._cancelSuggest();var b=this.viewModel.suggest(a).then(function(a){if(c._suggestPromise===b)return c._suggestPromise=null,a.numResults&&(c.activeMenu="suggestion"),c._scrollToTopSuggestion(),a}).catch(function(){if(c._suggestPromise===b)return c._suggestPromise=null});return this._suggestPromise=b};t.prototype.render=function(){var a=this,c,b,h=this.viewModel,f=h.activeSourceIndex,d=h.suggestions,m=h.maxInputLength,x=h.placeholder,r=h.searchTerm,
n=h.searchAllEnabled,t=h.allSources,q=this._getSourceName(f),l=(""+r).trim(),p=this.activeMenu,B=this.id,M=this.viewModel.state,G=this.id+"-suggest-menu",m=v.tsx("input",{bind:this,placeholder:x,"aria-label":k.searchButtonTitle,maxlength:m,autocomplete:"off",type:"text",tabindex:"0",class:this.classes("esri-input","esri-search__input"),"aria-autocomplete":"list",value:r,"aria-haspopup":"true","aria-owns":G,role:"textbox",onkeydown:this._handleInputKeydown,onkeyup:this._handleInputKeyup,onclick:this._handleInputClick,
oninput:this._handleInputPaste,onpaste:this._handleInputPaste,afterCreate:v.storeNode,"data-node-ref":"_inputNode",onfocusout:this._storeRelatedTarget,onfocus:this.focus,onblur:this.blur,title:r?"":x}),m=v.tsx("form",{key:"esri-search__form",bind:this,class:"esri-search__form",onsubmit:this._formSubmit,role:"search"},m),x=r?v.tsx("div",{key:"esri-search__clear-button",bind:this,role:"button",class:this.classes("esri-search__clear-button","esri-widget--button"),tabindex:"0",title:k.clearButtonTitle,
onfocus:this._clearButtonFocus,onclick:this._handleClearButtonClick,onkeydown:this._handleClearButtonClick},v.tsx("span",{"aria-hidden":"true",class:"esri-icon-close"})):null,R=this.locationEnabled&&!l?v.tsx("ul",{key:"esri-search__suggestion-list-current-location",class:this.classes("esri-menu__list","esri-search__suggestions-list","esri-search__suggestions-list--current-location")},v.tsx("li",{bind:this,onclick:this._handleUseCurrentLocationClick,onkeydown:this._handleUseCurrentLocationClick,onkeyup:this._handleSuggestionKeyup,
role:"menuitem",class:"esri-menu__list-item",tabindex:"-1"},v.tsx("span",{"aria-hidden":"true",role:"presentation",class:"esri-icon-locate-circled"})," ",k.useCurrentLocation)):null,S=1<t.length&&f===w.ALL_INDEX,f=d?d.map(function(c,b){var h=c.sourceIndex,f=c.results.length;b=f&&S?a._getSuggestionHeaderNode(h):null;c=c.results.map(function(c,b){return a._getSuggestionNode(c,b,h)});c=f?v.tsx("ul",{key:"esri-search__suggestion-list-"+h,class:a.classes("esri-menu__list","esri-search__suggestions-list")},
c):null;return[b,c]}):null,G=v.tsx("div",{id:G,"aria-expanded":"suggestion"===p,key:"esri-search__suggestions-menu",class:this.classes("esri-menu","esri-search__suggestions-menu"),role:"menu",bind:this,afterCreate:v.storeNode,"data-node-ref":"_suggestionListNode"},R,f),G=v.tsx("div",{key:"esri-search__input-container",class:"esri-search__input-container"},m,G,x),f=v.tsx("div",{key:"esri-search__submit-button",bind:this,role:"button",title:k.searchButtonTitle,class:this.classes("esri-search__submit-button",
"esri-widget--button"),tabindex:"0",onclick:this._handleSearchButtonClick,onkeydown:this._handleSearchButtonClick},v.tsx("span",{"aria-hidden":"true",role:"presentation",class:"esri-icon-search"}),v.tsx("span",{class:"esri-icon-font-fallback-text"},k.searchButtonTitle)),r=l?g.substitute(k.noResultsFoundForValue,{value:'"'+r+'"'}):k.noResultsFound,r=h.get("selectedSuggestion.location")||l?v.tsx("div",{key:"esri-search__no_results"},v.tsx("div",{class:"esri-search__warning-header"},k.noResults),v.tsx("div",
{class:"esri-search__warning-text"},r)):null,h=h.get("selectedSuggestion.location")||l?null:v.tsx("div",{key:"esri-search__empty-search"},v.tsx("span",{"aria-hidden":"true",class:"esri-icon-notice-triangle"}),v.tsx("span",{class:"esri-search__no-value-text"},k.emptyValue)),h=v.tsx("div",{key:"esri-search__error-menu",class:this.classes("esri-menu","esri-search__warning-menu")},v.tsx("div",{class:"esri-search__warning-body"},r,h)),l=1<t.length,t=t&&t.toArray(),n=n?this._getSourceNode(w.ALL_INDEX):
null,B=B+"-source-menu",q=l?v.tsx("div",{key:"esri-search__source-menu-button",bind:this,role:"button",title:k.searchIn,"aria-haspopup":"true","aria-expanded":"source"===p,"aria-controls":B,class:this.classes("esri-search__sources-button","esri-widget--button"),tabindex:"0",onkeydown:this._handleSourceMenuButtonKeydown,onclick:this._handleSourcesMenuToggleClick,onkeyup:this._handleSourceMenuButtonKeyup,onblur:this._sourcesButtonBlur,afterCreate:v.storeNode,"data-node-ref":"_sourceMenuButtonNode"},
v.tsx("span",{"aria-hidden":"true",role:"presentation",class:"esri-icon-down-arrow esri-search__sources-button--down"}),v.tsx("span",{"aria-hidden":"true",role:"presentation",class:"esri-icon-up-arrow esri-search__sources-button--up"}),v.tsx("span",{class:"esri-search__source-name"},q)):null,n=l?v.tsx("ul",{bind:this,afterCreate:v.storeNode,"data-node-ref":"_sourceListNode",class:"esri-menu__list"},n,t.map(function(c,b){return a._getSourceNode(b)})):null,B=v.tsx("div",{id:B,key:"esri-search__source-menu",
class:this.classes("esri-menu","esri-search__sources-menu"),role:"menu"},n),p=(c={},c["esri-search--multiple-sources"]=l,c["esri-search--loading"]="loading"===M,c["esri-search--searching"]="searching"===M,c["esri-search--warning"]="warning"===p,c["esri-search--sources"]="source"===p,c["esri-search--show-suggestions"]="suggestion"===p,c);c=(b={},b["esri-disabled"]="disabled"===M,b);b="loading"===M?v.tsx("div",{role:"presentation",class:"esri-widget__loader",key:"base-loader"},v.tsx("span",{"aria-hidden":"true",
role:"presentation",class:"esri-widget__loader-animation"}),v.tsx("span",{class:"esri-icon-font-fallback-text"},k.searchButtonTitle),v.tsx("span",{class:"esri-widget__loader-text"},e.loading)):v.tsx("div",{role:"presentation",class:this.classes(p,"esri-search__container"),key:"base-container"},q,B,G,f,h);return v.tsx("div",{class:this.classes("esri-search esri-widget",c)},b)};t.prototype._watchSourceChanges=function(){var c=this,b=this._handles,h=this.viewModel.allSources;b.remove("sources");h.forEach(function(h){return b.add(a.watch(h,
"name",function(){return c.scheduleRender()}),"sources")})};t.prototype._handleSourceMenuButtonKeydown=function(a){var c=d.eventKey(a);"ArrowUp"===c||"ArrowDown"===c||"End"===c||"Home"===c?(a.preventDefault(),a.stopPropagation(),this.activeMenu="source"):this._handleSourcesMenuToggleClick(a)};t.prototype._handleSourcesMenuToggleClick=function(a){var c="source"===this.activeMenu;this.activeMenu=c?"none":"source";this.renderNow();c?this._sourceMenuButtonNode&&this._sourceMenuButtonNode.focus():(c=this._sourceListNode?
this._sourceListNode.getElementsByTagName("li"):null)&&(a="End"===d.eventKey(a)?c[c.length-1]:c[0])&&a.focus()};t.prototype._handleClearButtonClick=function(){this.viewModel.clear();this._focus()};t.prototype._handleSearchButtonClick=function(){this.search()};t.prototype._handleSuggestionClick=function(a){if(a=a.currentTarget["data-suggestion"])this._focus(),this.search(a)};t.prototype._handleUseCurrentLocationClick=function(){this._focus("none");this.viewModel.searchNearby()};t.prototype._handleSourceClick=
function(a){this.viewModel.activeSourceIndex=a.currentTarget["data-source-index"];this._focus("none")};t.prototype._sourcesButtonBlur=function(a){this._removeActiveMenu(a&&a.relatedTarget,this._sourceListNode)};t.prototype._inputBlur=function(a){a=a&&a.relatedTarget;this._removeActiveMenu(a?a:this._relatedTarget,this._suggestionListNode)};t.prototype._storeRelatedTarget=function(a){this._relatedTarget=a.relatedTarget};t.prototype._clearButtonFocus=function(){this.activeMenu="none"};t.prototype._removeActiveMenu=
function(a,c){a&&c&&c.contains(a)||(this.activeMenu="none")};t.prototype._cancelSuggest=function(){this._suggestPromise=null};t.prototype._handleInputKeydown=function(a){var c=d.eventKey(a);("Tab"===c||"Escape"===c||a.shiftKey&&"Tab"===c)&&this._cancelSuggest()};t.prototype._handleInputKeyup=function(a){var c=d.eventKey(a),b=a.ctrlKey||a.metaKey||"Copy"===c||"ArrowLeft"===c||"ArrowRight"===c||"Enter"===c||"Shift"===c,h=this._suggestionListNode?this._suggestionListNode.getElementsByTagName("li"):null;
b||("Tab"===c||"Escape"===c||a.shiftKey&&"Tab"===c?(this._cancelSuggest(),"Escape"===c&&(this.activeMenu="none")):"ArrowUp"!==c&&"ArrowDown"!==c||!h?this.viewModel.searchTerm&&this.suggest():(this.activeMenu="suggestion",a.stopPropagation(),a.preventDefault(),this._cancelSuggest(),(a=h["ArrowUp"===c?h.length-1:0])&&a.focus()))};t.prototype._scrollToTopSuggestion=function(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)};t.prototype._handleInputClick=function(a){this.activeMenu="suggestion"};
t.prototype._handleInputPaste=function(a){var c=this.get("viewModel.searchTerm");a=a.target;c!==a.value&&(this.viewModel.searchTerm=a.value);c&&this.suggest()};t.prototype._handleSourceMenuButtonKeyup=function(a){var c=d.eventKey(a);if("ArrowUp"===c||"ArrowDown"===c||"Home"===c||"End"===c)a.stopPropagation(),a.preventDefault(),(a=this._sourceListNode?this._sourceListNode.getElementsByTagName("li"):null)&&(c=a["ArrowUp"===c||"End"===c?a.length-1:0])&&c.focus()};t.prototype._handleSourceKeyup=function(a){var c=
a.target,b=this._sourceListNode?n.from(this._sourceListNode.getElementsByTagName("li")):null,h=d.eventKey(a);if("Escape"===h)this._focus("none"),this._sourceMenuButtonNode&&this._sourceMenuButtonNode.focus();else if(b){c=b.indexOf(c);if("Home"===h||"End"===h||"ArrowUp"===h||"ArrowDown"===h)a.stopPropagation(),a.preventDefault();"Home"===h?(b=b[0])&&b.focus():"End"===h?(b=b[b.length-1])&&b.focus():"ArrowUp"===h?(a=c-1,(b=0>a?this._sourceMenuButtonNode:b[a])&&b.focus()):"ArrowDown"===h&&(a=c+1,(b=a>=
b.length?this._sourceMenuButtonNode:b[a])&&b.focus())}};t.prototype._handleSuggestionKeyup=function(a){var c=a.target,b=this._suggestionListNode?n.from(this._suggestionListNode.getElementsByTagName("li")):null,c=b.indexOf(c),h=d.eventKey(a);this._cancelSuggest();if("Backspace"===h||"Delete"===h)this._focus();else if("Escape"===h)this._focus("none");else if(b){if("Home"===h||"End"===h||"ArrowUp"===h||"ArrowDown"===h)a.stopPropagation(),a.preventDefault();"Home"===h&&(a=b[0])&&a.focus();"End"===h&&
(a=b[b.length-1])&&a.focus();"ArrowUp"===h?(--c,(b=0>c?b[b.length-1]:b[c])&&b.focus()):"ArrowDown"===h&&(c+=1,(b=c>=b.length?b[0]:b[c])&&b.focus())}};t.prototype._focus=function(a){this.focus();a&&(this.activeMenu=a)};t.prototype._formSubmit=function(a){a.preventDefault();this.search()};t.prototype._getSourceName=function(a){var c=this.viewModel.allSources.getItemAt(a);return a===w.ALL_INDEX?k.all:c?c.name||k.untitledSource:k.untitledSource};t.prototype._getSuggestionHeaderNode=function(a){var c=
this._getSourceName(a);return v.tsx("div",{key:"esri-search__suggestion-header-"+a,class:"esri-menu__header"},c)};t.prototype._splitResult=function(a,c){c=m.escapeString(c);return a.replace(new RegExp("(^|)("+c+")(|$)","ig"),"$1|$2|$3").split("|")};t.prototype._getSuggestionNode=function(a,c,b){if(b=this.viewModel.searchTerm){var h=a.text||k.untitledResult,f=[];if(r.test(h))f.push(v.tsx("div",{innerHTML:h}));else{var h=this._splitResult(h,b),d=b.toLowerCase();h.forEach(function(a,c){a&&a.length&&
(a.toLowerCase()===d?f.push(v.tsx("strong",{key:c},a)):f.push(a))})}return v.tsx("li",{bind:this,onclick:this._handleSuggestionClick,onkeydown:this._handleSuggestionClick,onkeyup:this._handleSuggestionKeyup,key:"esri-search__suggestion$-{sourceIndex}_"+c,"data-suggestion":a,role:"menuitem",class:"esri-menu__list-item",tabindex:"-1"},f)}};t.prototype._getSourceNode=function(a){var c,b=(c={},c["esri-menu__list-item--active"]=a===this.viewModel.activeSourceIndex,c);return v.tsx("li",{bind:this,key:"esri-search__source-"+
a,onclick:this._handleSourceClick,onkeydown:this._handleSourceClick,onkeyup:this._handleSourceKeyup,"data-source-index":a,role:"menuitem",class:this.classes("esri-search__source","esri-menu__list-item",b),tabindex:"-1"},this._getSourceName(a))};t.prototype._renderSearchResultsContent=function(){this._searchResultRenderer.showMoreResultsOpen=!1;this._searchResultRenderer.viewModel=this.viewModel;return this._searchResultRenderer};b([c.property(),v.renderable()],t.prototype,"activeMenu",void 0);b([c.aliasOf("viewModel.activeSource"),
v.renderable()],t.prototype,"activeSource",void 0);b([c.aliasOf("viewModel.activeSourceIndex"),v.renderable()],t.prototype,"activeSourceIndex",void 0);b([c.aliasOf("viewModel.allPlaceholder"),v.renderable()],t.prototype,"allPlaceholder",void 0);b([c.aliasOf("viewModel.allSources")],t.prototype,"allSources",void 0);b([c.aliasOf("viewModel.autoNavigate")],t.prototype,"autoNavigate",void 0);b([c.aliasOf("viewModel.autoSelect")],t.prototype,"autoSelect",void 0);b([c.aliasOf("viewModel.defaultSources")],
t.prototype,"defaultSources",void 0);b([c.aliasOf("viewModel.goToOverride")],t.prototype,"goToOverride",void 0);b([c.property()],t.prototype,"iconClass",void 0);b([c.aliasOf("viewModel.includeDefaultSources")],t.prototype,"includeDefaultSources",void 0);b([c.property()],t.prototype,"label",void 0);b([v.renderable(),c.aliasOf("viewModel.locationEnabled")],t.prototype,"locationEnabled",void 0);b([c.aliasOf("viewModel.maxResults")],t.prototype,"maxResults",void 0);b([c.aliasOf("viewModel.maxSuggestions")],
t.prototype,"maxSuggestions",void 0);b([c.aliasOf("viewModel.minSuggestCharacters")],t.prototype,"minSuggestCharacters",void 0);b([c.aliasOf("viewModel.popupEnabled")],t.prototype,"popupEnabled",void 0);b([c.aliasOf("viewModel.popupTemplate")],t.prototype,"popupTemplate",void 0);b([c.aliasOf("viewModel.portal")],t.prototype,"portal",void 0);b([c.aliasOf("viewModel.resultGraphic")],t.prototype,"resultGraphic",void 0);b([c.aliasOf("viewModel.resultGraphicEnabled")],t.prototype,"resultGraphicEnabled",
void 0);b([c.aliasOf("viewModel.results"),v.renderable()],t.prototype,"results",void 0);b([c.aliasOf("viewModel.searchAllEnabled"),v.renderable()],t.prototype,"searchAllEnabled",void 0);b([c.aliasOf("viewModel.searchTerm"),v.renderable()],t.prototype,"searchTerm",void 0);b([c.aliasOf("viewModel.selectedResult")],t.prototype,"selectedResult",void 0);b([c.aliasOf("viewModel.sources")],t.prototype,"sources",void 0);b([c.aliasOf("viewModel.suggestions"),v.renderable()],t.prototype,"suggestions",void 0);
b([c.aliasOf("viewModel.suggestionsEnabled")],t.prototype,"suggestionsEnabled",void 0);b([c.aliasOf("viewModel.view"),v.renderable()],t.prototype,"view",void 0);b([v.vmEvent("search-complete search-clear search-start select-result suggest-start suggest-complete".split(" ")),c.property({type:w}),v.renderable(["viewModel.allSources","viewModel.activeSource.placeholder","viewModel.activeSource.name","viewModel.state"])],t.prototype,"viewModel",void 0);b([c.aliasOf("viewModel.clear")],t.prototype,"clear",
null);b([v.accessibleHandler()],t.prototype,"_handleSourcesMenuToggleClick",null);b([v.accessibleHandler()],t.prototype,"_handleClearButtonClick",null);b([v.accessibleHandler()],t.prototype,"_handleSearchButtonClick",null);b([v.accessibleHandler()],t.prototype,"_handleSuggestionClick",null);b([v.accessibleHandler()],t.prototype,"_handleUseCurrentLocationClick",null);b([v.accessibleHandler()],t.prototype,"_handleSourceClick",null);return t=b([c.subclass("esri.widgets.Search")],t)}(c.declared(h))})},
"esri/widgets/Search/SearchResultRenderer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/i18n!./nls/Search ../../core/accessorSupport/decorators ../Widget ./SearchViewModel ../support/widget".split(" "),function(p,l,q,b,n,e,k,m,g){return function(d){function f(a){a=d.call(this)||this;a.showMoreResultsOpen=!1;a.viewModel=null;return a}q(f,d);f.prototype.render=function(){var a=this,c,b=this.get("viewModel.selectedResult"),f=this.get("viewModel.results"),
b=b&&b.name||"",d=1<this._countResults(f),k=d&&f.map(function(c){return a._moreResultsList(c)}),f=d?g.tsx("div",{key:"esri-search-renderer__more-results-button",class:"esri-search-result-renderer__more-results-item"},g.tsx("a",{class:"esri-widget__anchor",href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?n.hideMoreResults:n.showMoreResults)):null,d=d?g.tsx("div",{key:"esri-search-renderer__more-results-container",class:"esri-search-result-renderer__more-results-list"},
k):null,k=(c={},c["esri-search-result-renderer__more-results--show-more-results"]=this.showMoreResultsOpen,c);return g.tsx("div",{class:"esri-search-result-renderer esri-widget"},g.tsx("div",{key:"esri-search-renderer__container",class:this.classes("esri-search-result-renderer__more-results",k)},g.tsx("div",{key:"esri-search-renderer__result-name",class:"esri-search-result-renderer__more-results-item"},b),g.tsx("div",{key:"esri-search-renderer__more-results"},f,d)))};f.prototype._showMoreResultsClick=
function(a){a.preventDefault();this.showMoreResultsOpen=!this.showMoreResultsOpen;(a=this.get("viewModel.view.popup"))&&a.reposition()};f.prototype._selectResultClick=function(a){a.preventDefault();a=a.currentTarget["data-result"];this.viewModel&&this.viewModel.select(a)};f.prototype._moreResultsList=function(a){var c=this,b=a.results,f=b.length,d=!!f,k=this.get("viewModel.selectedResult"),f=1===f&&b[0]===k,k=this._getSourceName(a.source,a.sourceIndex),k=1<this.get("viewModel.results").length&&!f?
g.tsx("div",{key:"esri-search-result-renderer__header-"+a.sourceIndex,class:"esri-search-result-renderer__more-results-list-header"},k):null,b=d&&b.map(function(a,b){return c._moreResultsListItem(a,b)}),b=d&&!f?g.tsx("ul",{key:"esri-search-result-renderer__list-"+a.sourceIndex},b):null;return d?g.tsx("div",{key:"esri-search-result-renderer__results-"+a.sourceIndex},k,b):null};f.prototype._moreResultsListItem=function(a,c){var b=this.get("viewModel.selectedResult");return a!==b?g.tsx("li",{key:"esri-search-result-renderer__list-item-"+
c},g.tsx("a",{class:"esri-widget__anchor",href:"#",tabindex:"0",bind:this,"data-result":a,onclick:this._selectResultClick,onkeydown:this._selectResultClick},a.name)):null};f.prototype._getSourceName=function(a,c){return c===m.ALL_INDEX?n.all:a.name};f.prototype._countResults=function(a){return a?a.reduce(function(a,b){return a+b.results.length},0):0};b([g.renderable(),e.property()],f.prototype,"showMoreResultsOpen",void 0);b([e.property(),g.renderable(["viewModel.results","viewModel.selectedResult"])],
f.prototype,"viewModel",void 0);b([g.accessibleHandler()],f.prototype,"_showMoreResultsClick",null);b([g.accessibleHandler()],f.prototype,"_selectResultClick",null);return f=b([e.subclass("esri.widgets.Search.SearchResultRenderer")],f)}(e.declared(k))})},"esri/widgets/Search/SearchViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper dojo/i18n!./nls/Search ../../Graphic ../../PopupTemplate ../../core/Accessor ../../core/asyncUtils ../../core/Collection ../../core/compilerUtils ../../core/Error ../../core/Evented ../../core/geolocationUtils ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/Point ../../geometry/SpatialReference ../../portal/Portal ../../styles/basic ../../symbols/PictureMarkerSymbol ../../symbols/SimpleFillSymbol ../../symbols/SimpleLineSymbol ../../symbols/SimpleMarkerSymbol ../../symbols/TextSymbol ../../views/support/layerViewUtils ./LayerSearchSource ./LocatorSearchSource ./SearchSource ./support/geometryUtils ./support/locatorUtils ../support/GoTo".split(" "),
function(p,l,q,b,n,e,k,m,g,d,f,a,c,h,x,w,v,r,B,t,y,E,u,C,z,D,N,H,A,I,O,P,V,L,T,M,G,R,S){function F(a,c){return a.hasOwnProperty(c)&&null!=a[c]&&""!==a[c]}var J=B.getLogger("esri.widgets.Search.SearchViewModel"),Q=a.ofType({key:function(a){return a.layer?"layer":"locator"},base:M,typeMap:{layer:L,locator:T}}),K=z.WGS84,U=/<(?:.|\s)*?>/g;return function(a){function d(c){c=a.call(this)||this;c._handles=new v;c._gotoController=null;c._searching=null;c._loadingDefaultSources=null;c.allPlaceholder=k.allPlaceholder;
c.autoNavigate=!0;c.autoSelect=!0;c.defaultSources=new Q;c.defaultSymbol=new H({url:p.toUrl("../../images/search/search-symbol-32.svg"),size:24,width:24,height:24});c.includeDefaultSources=!0;c.maxInputLength=128;c.maxResults=6;c.maxSuggestions=6;c.minSuggestCharacters=1;c.popupEnabled=!0;c.popupTemplate=new g({title:k.searchResult,content:"{Match_addr}"});c.portal=D.getDefault();c.resultGraphicEnabled=!0;c.resultGraphic=null;c.results=null;c.selectedSuggestion=null;c.searchAllEnabled=!0;c.selectedResult=
null;c.sources=new Q;c.suggestionDelay=150;c.suggestions=null;c.suggestionsEnabled=!0;c.view=null;return c}q(d,a);d.prototype.initialize=function(){var a=this;this._handles.add([E.init(this,"portal",function(a){a&&!a.loaded&&a.load()}),E.init(this,["view","portal","includeDefaultSources"],function(){return a._loadDefaultSources()}),E.on(this,["defaultSources","sources"],"change",function(){return a.notifyChange("allSources")})])};d.prototype.destroy=function(){this._abortGoTo();this.clearGraphics();
this._loadingDefaultSources=null;this._clearLoadingDefaultSources();this._handles.destroy();this._handles=null};Object.defineProperty(d.prototype,"activeSource",{get:function(){return this.allSources.getItemAt(this.activeSourceIndex)||null},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"activeSourceIndex",{get:function(){return 1!==this.allSources.length&&this.searchAllEnabled?-1:0},set:function(a){void 0===a?this._clearOverride("activeSourceIndex"):this._override("activeSourceIndex",
a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"allSources",{get:function(){var a=this.sources,c=this.defaultSources,b=this.includeDefaultSources,a="function"===typeof b?b.call(null,{sources:a,defaultSources:c}):b?c.concat(a):a,c=this._get("allSources")||new Q;c.removeAll();c.addMany(a.filter(Boolean));return c},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"locationEnabled",{get:function(){return this._get("locationEnabled")||w.supported()},set:function(a){if(void 0===
a)this._clearOverride("locationEnabled");else{var c=w.supported();if(a&&!c){var b=new h("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});J.error(b)}this._override("locationEnabled",a&&c)}},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"placeholder",{get:function(){var a=this.activeSourceIndex,c=this.allPlaceholder,c=void 0===c?k.allPlaceholder:c;return-1===a?c:(a=this.allSources.getItemAt(a))?a.placeholder:""},enumerable:!0,
configurable:!0});Object.defineProperty(d.prototype,"searchTerm",{get:function(){return this._get("searchTerm")||""},set:function(a){this._set("searchTerm",a||"");this.clearGraphics();this.selectedSuggestion&&this.selectedSuggestion.text!==a&&this._set("selectedSuggestion",null);""===a&&this._clear()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"state",{get:function(){return this._searching?"searching":this._loadingDefaultSources?"loading":0===this.allSources.length?"disabled":
"ready"},enumerable:!0,configurable:!0});d.prototype.clear=function(){this.searchTerm=""};d.prototype.clearGraphics=function(){this._removeHighlight();this._closePopup();this.view&&this.view.graphics.remove(this.resultGraphic);this._set("resultGraphic",null)};d.prototype.search=function(a){var c=this;this.emit("search-start");this.clearGraphics();var b=this._createSuggestionForSearch(a);this._searching=a=this._whenViewAndPortalLoaded().then(function(){return c._getResultsFromSources(b).then(function(a){var h=
{activeSourceIndex:c.activeSourceIndex,searchTerm:b.text,numResults:0,numErrors:0,errors:[],results:[]};c._formatResponse(h,a,b);a=c._getFirstResult(h.results);var d=(b.location&&a?a.name:b.text).replace(U,"");c._set("searchTerm",d);(b.key&&"number"===typeof b.sourceIndex||b.location)&&c._set("selectedSuggestion",b);c._set("results",h.results);c.emit("search-complete",h);return c._selectFirstResult(a).then(function(){return h})})});this.notifyChange("state");a.catch(function(){}).then(function(){return c._clearSearching()});
return a};d.prototype.searchNearby=function(){var a=this;if(!this.locationEnabled){var c=new h("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});J.error(c);return y.reject(c)}this._searching=c=w.getCurrentPosition().then(function(c){return w.positionToPoint({position:c,view:a.view})}).then(function(c){return a.search(c)});this.notifyChange("state");c.catch(function(){}).then(function(){return a._clearSearching()});return c};d.prototype.select=
function(a){var c=this;this.clearGraphics();if(!a){var b=new h("select:missing-parameter","Cannot select without a searchResult.",{searchResult:a});J.error(b);return y.reject(b)}var d=this.view,k=F(a,"sourceIndex")?a.sourceIndex:this._getSourceIndexOfResult(a),g=this.allSources.getItemAt(k);if(!g)return b=new h("select:missing-source","Cannot select without a source.",{source:g}),J.error(b),y.reject(b);var b=g instanceof L?this._getLayerSourcePopupTemplate(g):g.popupTemplate,e=g.resultSymbol||this._getDefaultSymbol(a),
x=F(g,"resultGraphicEnabled")?g.resultGraphicEnabled:this.resultGraphicEnabled,r=F(g,"autoNavigate")?g.autoNavigate:this.autoNavigate,n=F(g,"popupEnabled")?g.popupEnabled:this.popupEnabled,v=n?b||this.popupTemplate:null,A=a.feature;if(!A)return b=new h("select:missing-feature","Cannot select without a feature.",{feature:A}),J.error(b),y.reject(b);var w=A.attributes,z=A.geometry,I=A.layer,u=A.sourceLayer,H=G.getPointFromGeometry(z),b={layerViewQuery:this._getLayerView(A),elevationQuery:d&&t.isSome(H)?
G.getPointWithElevation(H,d).catch(function(){return H}):y.resolve(H)};return y.eachAlways(b).then(function(b){var h=b.layerViewQuery.value,Y=b.elevationQuery.value;e instanceof P&&(e.text=a.name);b=d&&r?c._getGoToTarget(a,g):null;return(t.isSome(b)?f.safeCast(c._goToSearchResult(b)):y.resolve()).then(function(){var b=h?A:new m({geometry:z,symbol:e,attributes:w,layer:I,sourceLayer:u,popupTemplate:v}),f=n&&c.get("view.popup");(f=f&&b.getEffectivePopupTemplate(f.defaultPopupTemplateEnabled))&&d.popup.open({features:[b],
location:Y});h&&V.hasHighlight(h)&&!f&&c._highlightFeature({graphic:b,layerView:h});!h&&x&&d&&d.graphics.push(b);c._set("selectedResult",a);c._set("resultGraphic",b);c.emit("select-result",{result:a,source:g,sourceIndex:k});return a})})};d.prototype.suggest=function(a,c){var b=this,h=a||this.searchTerm;this.emit("suggest-start",{searchTerm:h});return this._suggestTimer(c).then(function(){return b._suggestImmediate(h).then(function(a){b._set("suggestions",a.results);b.emit("suggest-complete",a);return a})})};
d.prototype._clearLoadingDefaultSources=function(){this._loadingDefaultSources=null;this.notifyChange("state")};d.prototype._clearSearching=function(){this._searching=null;this.notifyChange("state")};d.prototype._convertHelperServices=function(){var a=this.get("portal.helperServices.geocode");return a?a.map(function(a){if(!1!==a.placefinding&&(a=T.fromJSON(a),R.isArcGISWorldGeocoder(a.get("locator.url"))&&a.set({singleLineFieldName:"SingleLine",outFields:["Addr_type","Match_addr","StAddr","City"],
placeholder:k.placeholder}),a.singleLineFieldName))return a}).filter(Boolean):[]};d.prototype._convertApplicationProperties=function(){var a=this,c=this.get("view.map.applicationProperties.viewing.search"),b=this.get("view.map");if(!b||!c)return[];var h=c.hintText;return c.enabled?c.layers.map(function(c){var d=b.findLayerById(c.id);if(d){c=a._getLayerJSON(c);var f=L.fromJSON(c);f.placeholder=h;a._getLayer(d,c).then(function(a){f.layer=a});return f}}).filter(Boolean):[]};d.prototype._getSubLayer=
function(a,c){return a&&a.allSublayers?(a=a.allSublayers.find(function(a){return a.id===c.subLayer}))?f.safeCast(a.createFeatureLayer()):y.reject():y.reject()};d.prototype._getLayer=function(a,c){var b=this;if("feature"===a.type||"scene"===a.type)return y.resolve(a);if("map-image"===a.type)return a.load().then(function(){return b._getSubLayer(a,c).catch(function(){var c=new h("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:a});J.error(c);return null})})};
d.prototype._getLayerJSON=function(a){return"function"===typeof a.toJSON?a.toJSON():a};d.prototype._updateDefaultSources=function(){var a=this.defaultSources,c=this.includeDefaultSources;a.removeAll();c&&a.addMany(this._convertApplicationProperties().concat(this._convertHelperServices()));this.notifyChange("allSources")};d.prototype._abortGoTo=function(){this._gotoController&&this._gotoController.abort();this._gotoController=null};d.prototype._clear=function(){this._abortGoTo();this._set("results",
null);this._set("suggestions",null);this._set("selectedResult",null);this._set("selectedSuggestion",null);this.emit("search-clear")};d.prototype._closePopup=function(){var a=this.get("view.popup"),c=this.resultGraphic;if(a&&c){var b=a.selectedFeature;b&&b===c&&a.close()}};d.prototype._suggestTimer=function(a){return y.after(null!=a?a:this.suggestionDelay)};d.prototype._createLocationForSearch=function(a){return a instanceof m?G.getPointFromGeometry(a.geometry):a instanceof C?a:Array.isArray(a)&&2===
a.length?new C({longitude:a[0],latitude:a[1]}):null};d.prototype._createSuggestionForSearch=function(a){if(a&&F(a,"key")&&F(a,"text")&&F(a,"sourceIndex"))return a;var c=this._createLocationForSearch(a),b="string"===typeof a?a:this.searchTerm,h=this.selectedSuggestion,d=this.selectedResult,f=(a=!a&&h&&d)&&h.location;return a&&h.key===d.key&&h.sourceIndex===d.sourceIndex||f?h:{location:t.unwrap(c),text:c?"":b,sourceIndex:null,key:null}};d.prototype._getFirstResult=function(a){var c=null;a&&a.some(function(a){a=
a.results[0];var b=!!a;b&&(c=a);return b});return c};d.prototype._selectFirstResult=function(a){return this.autoSelect&&a?this.select(a):y.resolve()};d.prototype._suggestImmediate=function(a){var c=this;return this._whenViewAndPortalLoaded().then(function(){return c._getSuggestionsFromSources(a)}).then(function(b){var h={activeSourceIndex:c.activeSourceIndex,searchTerm:a,numResults:0,numErrors:0,errors:[],results:[]};c._formatResponse(h,b);return h})};d.prototype._formatSourceResponse=function(a,
c,b){var h=c&&c.value||[];c=c&&c.error;var d=this.allSources.getItemAt(b);c?(a.errors.push({sourceIndex:b,source:d,error:c}),a.numErrors++):(a.results.push({sourceIndex:b,source:d,results:h}),a.numResults+=h.length)};d.prototype._formatResponse=function(a,c,b){var h=this;if(c)if(-1===a.activeSourceIndex){var d=b&&F(b,"sourceIndex")&&-1!==b.sourceIndex?b.sourceIndex:void 0;c.forEach(function(c,b){h._formatSourceResponse(a,c,void 0!==d?d:b)})}else this._formatSourceResponse(a,c[0],a.activeSourceIndex)};
d.prototype._getResultsFromSources=function(a){var c=this,b=this.allSources,d=!a.location&&F(a,"sourceIndex")?a.sourceIndex:this.activeSourceIndex,f=[];if(!b.length)return b=new h("search:no-sources-defined","At least one source is required.",{allSources:b}),J.error(b),y.reject(b);-1===d?b.forEach(function(b,h){f.push(c._getResultsFromSource(a,h))}):f.push(this._getResultsFromSource(a,d));return y.eachAlways(f)};d.prototype._getSuggestionsFromSources=function(a){var c=this,b=this.allSources,d=this.activeSourceIndex,
f=[];if(!b.length)return b=new h("suggest:no-sources-defined","At least one source is required.",{allSources:b}),J.error(b),y.reject(b);-1===d?b.forEach(function(b,h){f.push(c._getSuggestionsFromSource(a,h))}):f.push(this._getSuggestionsFromSource(a,d));return y.eachAlways(f)};d.prototype._getResultsFromSource=function(a,c){var b=this.allSources.getItemAt(c),h=a.location,h=void 0===h?null:h,d=this.get("view.spatialReference")||K,f=F(b,"maxResults")?b.maxResults:this.maxResults,k=b instanceof L&&F(b,
"exactMatch")?b.exactMatch:!1;return b.getResults({view:this.view,sourceIndex:c,location:h,suggestResult:a,spatialReference:d,exactMatch:k,maxResults:f})};d.prototype._getSuggestionsFromSource=function(a,c){var b=this.allSources.getItemAt(c),h=F(b,"suggestionsEnabled")?b.suggestionsEnabled:this.suggestionsEnabled,d=a.trim().length,f=F(b,"minSuggestCharacters")?b.minSuggestCharacters:this.minSuggestCharacters;return h&&d>=f?(h=this.get("view.spatialReference")||K,d=F(b,"maxSuggestions")?b.maxSuggestions:
this.maxSuggestions,b.getSuggestions({view:this.view,sourceIndex:c,suggestTerm:a,spatialReference:h,maxSuggestions:d})):y.resolve()};d.prototype.createDefaultSymbol=function(a,c){if("point"===c)return new O({color:a.color,size:a.size,outline:{color:a.outline.color,width:a.outline.width}});if("polyline"===c)return new I({color:a.color,width:a.width});if("polygon"===c)return new A({color:a.color,outline:{color:a.outline.color,width:a.outline.width}})};d.prototype._getLayerSourcePopupTemplate=function(a){var c=
a.layer;if(c)return F(a,"popupTemplate")?a.popupTemplate:c.popupTemplate};d.prototype._getSourceIndexOfResult=function(a){var c=null;this.results.some(function(b){return b.results.some(function(h){if(h===a)return c=b.sourceIndex,!0})});return c};d.prototype._getGoToTarget=function(a,c){var b=a.extent;a=a.feature;return c instanceof L?a||b:b||a};d.prototype._goToSearchResult=function(a){return e(this,void 0,void 0,function(){var c,b,h;return n(this,function(d){switch(d.label){case 0:c=!!a,this._abortGoTo(),
this._gotoController=b=y.createAbortController(),h={target:{target:a},options:{animate:c,signal:b.signal}},d.label=1;case 1:return d.trys.push([1,3,,4]),[4,this.callGoTo(h)];case 2:return d.sent(),[3,4];case 3:return d.sent(),[3,4];case 4:return this._gotoController=null,[2]}})})};d.prototype._whenViewAndPortalLoaded=function(){var a=this.portal,c=this.view,c=c?c.when():y.resolve(),a=a?a.when():y.resolve();return y.eachAlways([c,a]).then(function(){})};d.prototype._loadDefaultSources=function(){return e(this,
void 0,void 0,function(){var a,c,b=this;return n(this,function(h){switch(h.label){case 0:return this._loadingDefaultSources=c=(a=this.includeDefaultSources)?this._whenViewAndPortalLoaded():y.resolve(),this.notifyChange("state"),[4,c.catch(function(){}).then(function(){b._loadingDefaultSources===c&&(b._clearLoadingDefaultSources(),b._updateDefaultSources())})];case 1:return h.sent(),[2]}})})};d.prototype._getDefaultSymbol=function(a){var c=this.get("view.map.basemap.id");a=t.get(a,"feature","geometry",
"type");return t.isSome(a)&&(c=(c=N.getSchemes({theme:"default",basemap:c,geometryType:a})||N.getSchemes({theme:"default",basemap:"topo",geometryType:a}))&&c.primaryScheme)?(c.color&&F(c,"opacity")&&(c.color.a=c.opacity),this.createDefaultSymbol(c,a)):this.defaultSymbol};d.prototype._removeHighlight=function(){this._handles.remove("highlight")};d.prototype._getLayerView=function(a){var b=this.view;if(!a||!b)return y.resolve(null);var h=a.layer;return b.when().then(function(){return c.typeCast(b)().whenLayerView(h)})};
d.prototype._highlightFeature=function(a){var c=a.graphic,b=c.attributes,h=c.layer.objectIdField;a=a.layerView.highlight(b&&b[h]||c);this._handles.add(a,"highlight")};d.ALL_INDEX=-1;b([u.property({readOnly:!0,dependsOn:["activeSourceIndex","allSources.length"],value:null})],d.prototype,"activeSource",null);b([u.property({dependsOn:["allSources.length","searchAllEnabled"]})],d.prototype,"activeSourceIndex",null);b([u.property()],d.prototype,"allPlaceholder",void 0);b([u.property({dependsOn:["defaultSources.length",
"sources.length","includeDefaultSources"],readOnly:!0})],d.prototype,"allSources",null);b([u.property()],d.prototype,"autoNavigate",void 0);b([u.property()],d.prototype,"autoSelect",void 0);b([u.property({readOnly:!0})],d.prototype,"defaultSources",void 0);b([u.property()],d.prototype,"defaultSymbol",void 0);b([u.property()],d.prototype,"includeDefaultSources",void 0);b([u.property()],d.prototype,"locationEnabled",null);b([u.property()],d.prototype,"maxInputLength",void 0);b([u.property()],d.prototype,
"maxResults",void 0);b([u.property()],d.prototype,"maxSuggestions",void 0);b([u.property()],d.prototype,"minSuggestCharacters",void 0);b([u.property({readOnly:!0,dependsOn:["activeSourceIndex","activeSource.placeholder","allPlaceholder","allSources"]})],d.prototype,"placeholder",null);b([u.property()],d.prototype,"popupEnabled",void 0);b([u.property({type:g})],d.prototype,"popupTemplate",void 0);b([u.property({type:D})],d.prototype,"portal",void 0);b([u.property()],d.prototype,"resultGraphicEnabled",
void 0);b([u.property({readOnly:!0})],d.prototype,"resultGraphic",void 0);b([u.property({readOnly:!0})],d.prototype,"results",void 0);b([u.property({readOnly:!0})],d.prototype,"selectedSuggestion",void 0);b([u.property()],d.prototype,"searchAllEnabled",void 0);b([u.property({readOnly:!0})],d.prototype,"selectedResult",void 0);b([u.property()],d.prototype,"searchTerm",null);b([u.property({type:Q})],d.prototype,"sources",void 0);b([u.property({readOnly:!0,dependsOn:["allSources.length"]})],d.prototype,
"state",null);b([u.property()],d.prototype,"suggestionDelay",void 0);b([u.property({readOnly:!0})],d.prototype,"suggestions",void 0);b([u.property()],d.prototype,"suggestionsEnabled",void 0);b([u.property()],d.prototype,"view",void 0);b([u.property()],d.prototype,"clear",null);return d=b([u.subclass("esri.widgets.Search.SearchViewModel")],d)}(u.declared(d,x,S))})},"esri/core/geolocationUtils":function(){define("require exports ./tsSupport/assignHelper ../config ./Error ./has ./Logger ./promiseUtils ../geometry/Point ../geometry/support/webMercatorUtils ../portal/Portal ../tasks/GeometryService ../tasks/support/ProjectParameters".split(" "),
function(p,l,q,b,n,e,k,m,g,d,f,a,c){function h(b,h,f){if(!h)return m.resolve(b);var k=h.spatialReference;return k.isWGS84?m.resolve(b):k.isWebMercator?m.resolve(d.geographicToWebMercator(b)):x(f).then(function(h){if(!h)return m.reject(new n("geometry-service:missing-url","Geometry service URL is missing"));h=new a({url:h});var d=new c({geometries:[b],outSR:k});return h.project(d,f).then(function(a){return a[0]})})}function x(a){if(b.geometryServiceUrl)return m.resolve(b.geometryServiceUrl);var c=
f.getDefault();return c.load(a).catch(function(){}).then(function(){return c.get("helperServices.geometry.url")})}Object.defineProperty(l,"__esModule",{value:!0});var w=k.getLogger("esri.core.geolocationUtils"),v={maximumAge:0,timeout:15E3,enableHighAccuracy:!0};l.supported=function(){var a=e("esri-geolocation");a||w.warn("geolocation-unsupported","Geolocation unsupported.");a&&((a=e("esri-secure-context"))||w.warn("insecure-context","Geolocation requires a secure origin."));return a};l.getCurrentPosition=
function(a){a||(a=v);return m.create(function(c,b){setTimeout(b,15E3);navigator.geolocation.getCurrentPosition(c,b,a)})};l.positionToPoint=function(a,c){var b=a.position;a=a.view;var d=b&&b.coords||{},d={accuracy:d.accuracy,altitude:d.altitude,altitudeAccuracy:d.altitudeAccuracy,heading:d.heading,latitude:d.latitude,longitude:d.longitude,speed:d.speed},b=b?{coords:d,timestamp:b.timestamp}:b;b=(b=b&&b.coords)?new g({longitude:b.longitude,latitude:b.latitude,z:b.altitude||null,spatialReference:{wkid:4326}}):
null;return h(b,a,c)}})},"esri/styles/basic":function(){define(["../core/lang","../Color"],function(p,l){function q(b,k){var e;if(b)switch(e={},e.color=new l(b.color),k){case "point":e.outline={color:new l(b.outline.color),width:b.outline.width};e.size=b.size;break;case "polyline":e.width=b.width;break;case "polygon":e.outline={color:new l(b.outline.color),width:b.outline.width}}return e}var b={"default":{name:"default",label:"Default",description:"Default theme for basic visualization of features.",
basemapGroups:{light:"streets gray topo terrain national-geographic oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector".split(" "),dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"]},pointSchemes:{light:{primary:{color:[77,77,77,1],outline:{color:[255,255,255,1],width:1},size:8},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,1],width:1},size:8},{color:[255,255,255,1],outline:{color:[51,51,51,1],width:1},size:8}]},
dark:{primary:{color:[255,255,255,1],outline:{color:[26,26,26,1],width:1},size:8},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,1],width:1},size:8},{color:[26,26,26,1],outline:{color:[178,178,178,1],width:1},size:8}]}},lineSchemes:{light:{primary:{color:[77,77,77,1],width:2},secondary:[{color:[226,119,40,1],width:2},{color:[255,255,255,1],width:2}]},dark:{primary:{color:[255,255,255,1],width:2},secondary:[{color:[226,119,40,1],width:2},{color:[26,26,26,1],width:2}]}},polygonSchemes:{light:{primary:{color:[227,
139,79,.8],outline:{color:[255,255,255,1],width:1}},secondary:[{color:[128,128,128,.8],outline:{color:[255,255,255,1],width:1}},{color:[255,255,255,.8],outline:{color:[128,128,128,1],width:1}}]},dark:{primary:{color:[227,139,79,.8],outline:{color:[51,51,51,1],width:1}},secondary:[{color:[178,178,178,.8],outline:{color:[51,51,51,1],width:1}},{color:[26,26,26,.8],outline:{color:[128,128,128,1],width:1}}]}}}},n={};(function(){var e,k,m,g,d,f,a,c;for(e in b)for(g in k=b[e],m=k.basemapGroups,d=n[e]={basemaps:[].concat(m.light).concat(m.dark),
point:{},polyline:{},polygon:{}},m)for(f=m[g],a=0;a<f.length;a++)c=f[a],k.pointSchemes&&(d.point[c]=k.pointSchemes[g]),k.lineSchemes&&(d.polyline[c]=k.lineSchemes[g]),k.polygonSchemes&&(d.polygon[c]=k.polygonSchemes[g])})();return{getAvailableThemes:function(e){var k=[],m,g,d;for(m in b)g=b[m],d=n[m],e&&d.basemaps&&-1===d.basemaps.indexOf(e)||k.push({name:g.name,label:g.label,description:g.description,basemaps:d.basemaps.slice(0)});return k},getSchemes:function(b){var k=b.basemap,e=b.geometryType;
b=n[b.theme];var g;(b=(b=b&&b[e])&&b[k])&&(g={primaryScheme:q(b.primary,e),secondarySchemes:b.secondary.map(function(b){return q(b,e)})});return g},cloneScheme:function(b){var k;b&&(k=p.mixin({},b),k.color&&(k.color=new l(k.color)),k.outline&&(k.outline={color:k.outline.color&&new l(k.outline.color),width:k.outline.width}));return k}}})},"esri/widgets/Search/LayerSearchSource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../core/lang ../../core/accessorSupport/decorators ./SearchSource ./support/layerSearchUtils".split(" "),
function(p,l,q,b,n,e,k,m,g){return function(d){function f(){var a=null!==d&&d.apply(this,arguments)||this;a.displayField=null;a.exactMatch=null;a.searchFields=null;a.searchQueryParams=null;a.searchTemplate=null;a.suggestionTemplate=null;a.suggestQueryParams=null;a.getResults=function(c){return g.getResults(n({source:a},c))};a.getSuggestions=function(c){return g.getSuggestions(n({source:a},c))};return a}q(f,d);a=f;Object.defineProperty(f.prototype,"layer",{set:function(a){this._set("layer",a);a&&a.load()},
enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"name",{get:function(){return this._getLayerTitle()||""},set:function(a){void 0===a?this._clearOverride("name"):this._override("name",a)},enumerable:!0,configurable:!0});f.prototype.clone=function(){return new a({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?e.clone(this.outFields):null,placeholder:this.placeholder,
popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,searchExtent:this.searchExtent?this.searchExtent.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?e.clone(this.searchFields):null,searchQueryParams:this.searchQueryParams?
e.clone(this.searchQueryParams):null,suggestionTemplate:this.suggestionTemplate,suggestQueryParams:this.suggestQueryParams?e.clone(this.suggestQueryParams):null,zoomScale:this.zoomScale})};f.prototype._getFirstStringField=function(){var a=this.layer,b="";a&&a.fields&&a.fields.some(function(a){if("string"===a.type)return b=a.name,!0});return b};f.prototype._getDisplayField=function(){return this.displayField||this.layer.displayField||this._getFirstStringField()};f.prototype._getSearchFieldsString=
function(){var a=this.layer;return a.loaded?": "+(this.searchFields||[this._getDisplayField()]).map(function(c){var b=a.getField(c);return b&&b.alias||c}).join(", "):""};f.prototype._getLayerTitle=function(){var a=this.layer;if(a&&(a=a.title))return""+a+this._getSearchFieldsString()};var a;b([k.property({json:{read:{source:"field.name"},write:{target:"field.name"}}})],f.prototype,"displayField",void 0);b([k.property({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],f.prototype,
"exactMatch",void 0);b([k.property({value:null})],f.prototype,"layer",null);b([k.property({dependsOn:["layer.title","layer.loaded"]})],f.prototype,"name",null);b([k.property()],f.prototype,"searchFields",void 0);b([k.property()],f.prototype,"searchQueryParams",void 0);b([k.property()],f.prototype,"searchTemplate",void 0);b([k.property()],f.prototype,"suggestionTemplate",void 0);b([k.property()],f.prototype,"suggestQueryParams",void 0);return f=a=b([k.subclass("esri.widgets.Search.LayerSearchSource")],
f)}(k.declared(m))})},"esri/widgets/Search/SearchSource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Identifiable ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(p,l,q,b,n,e,k){return function(e){function g(b){b=e.call(this)||this;b.autoNavigate=null;b.filter=null;b.getResults=null;b.getSuggestions=null;b.maxResults=null;b.maxSuggestions=null;b.minSuggestCharacters=null;b.outFields=null;
b.placeholder="";b.popupEnabled=null;b.popupTemplate=null;b.prefix="";b.resultGraphicEnabled=null;b.resultSymbol=null;b.searchExtent=null;b.suggestionsEnabled=null;b.suffix="";b.withinViewEnabled=!1;b.zoomScale=null;return b}q(g,e);b([k.property()],g.prototype,"autoNavigate",void 0);b([k.property()],g.prototype,"filter",void 0);b([k.property()],g.prototype,"getResults",void 0);b([k.property()],g.prototype,"getSuggestions",void 0);b([k.property()],g.prototype,"maxResults",void 0);b([k.property()],
g.prototype,"maxSuggestions",void 0);b([k.property()],g.prototype,"minSuggestCharacters",void 0);b([k.property()],g.prototype,"outFields",void 0);b([k.property()],g.prototype,"placeholder",void 0);b([k.property()],g.prototype,"popupEnabled",void 0);b([k.property()],g.prototype,"popupTemplate",void 0);b([k.property()],g.prototype,"prefix",void 0);b([k.property()],g.prototype,"resultGraphicEnabled",void 0);b([k.property()],g.prototype,"resultSymbol",void 0);b([k.property()],g.prototype,"searchExtent",
void 0);b([k.property()],g.prototype,"suggestionsEnabled",void 0);b([k.property()],g.prototype,"suffix",void 0);b([k.property()],g.prototype,"withinViewEnabled",void 0);b([k.property()],g.prototype,"zoomScale",void 0);return g=b([k.subclass("esri.widgets.Search.SearchSource")],g)}(k.declared(e,n.Identifiable))})},"esri/widgets/Search/support/layerSearchUtils":function(){define("require exports dojo/date/locale ../../../intl ../../../core/Error ../../../core/lang ../../../core/Logger ../../../core/promiseUtils ../../../core/unitUtils ./geometryUtils".split(" "),
function(p,l,q,b,n,e,k,m,g,d){function f(a,c){var b=a.filter,h=a.searchExtent;c=c&&c.extent;a=a.withinViewEnabled&&c?c:void 0;return b&&b.geometry||h||a}function a(a){return a?a.load().then(m.resolve).catch(m.reject):m.resolve()}function c(a){return a&&!!a.get("capabilities.query.supportsPagination")}function h(a){var c="";a&&(a=a.fields)&&a.some(function(a){if("string"===a.type)return c=a.name,!0});return c}function x(a,c){return a&&c?c.every(function(c){return!!a.getField(c)}):!1}function w(a){for(var c=
0;c<a.length;c++)if(255<a.charCodeAt(c))return!0;return!1}function v(a,c,b){var h=null;(a=a.codedValues)&&a.some(function(a){var d=a.name,d=b?d:d.toLowerCase();if((b?c:c.toLowerCase())===d)return h=a.code.toString(),!0});return h}function r(a,c){return(c=c&&c.where)?"("+a+") AND ("+c+")":a}function B(a,c,b,h,d){var f=c.definitionExpression,k="";if(a){var g=C.test(c.url)&&w(a)?"N":"";b&&b.forEach(function(b){var f=c.getField(b);b=((b="function"===typeof c.getFieldDomain&&c.getFieldDomain(b))&&"coded-value"===
b.type?v(b,a,d):null)||a||null;if(null!==b){var e=f.type,f=f.name;"string"===e||"date"===e?d?f=r(f+" \x3d "+g+"'"+b+"'",h):(b=b.toUpperCase(),f=r("UPPER("+f+") LIKE "+g+"'%"+b+"%'",h)):"oid"===e||"small-integer"===e||"integer"===e||"single"===e||"double"===e?(b=Number(b),f=isNaN(b)?null:r(f+" \x3d "+b,h)):f=r(f+" \x3d "+b,h);f&&(k+=k?" OR ("+f+")":"("+f+")")}})}return f?"("+f+") AND ("+k+")":k}function t(a,c){var b=null;(a=a.codedValues)&&a.length&&a.some(function(a){if(a.code===c)return b=a.name,
!0});return b}function y(a,c,h){var d=a.layer,f=a.attributes,k="function"===typeof d.getFieldDomain&&d.getFieldDomain(h);return c?b.substitute(c,f):h&&a.hasOwnProperty("attributes")&&f.hasOwnProperty(h)?(a=f[h],h=d.getField(h),k&&"coded-value"===k.type?t(k,a):h&&"date"===h.type?q.format(new Date(a)):"number"===typeof a?a.toString():"string"!==typeof a?"":a.trim()):""}function E(a,c,b,h){return a.features.map(function(a){var d=a.attributes[a.layer.objectIdField];return{text:y(a,c.suggestionTemplate,
h),key:d,sourceIndex:b}})}function u(a,c,b,h,f,k,g){return a.features.map(function(a){var m=a.clone(),x=a.layer,x=(x=x&&x.objectIdField)&&a.attributes[x];a=y(a,b.searchTemplate,f);var n=d.createExtentFromGeometry(m.geometry,c,k);return{extent:g?d.scaleExtent(e.clone(n),c,g):n,feature:m,key:x,name:a,sourceIndex:h}})}Object.defineProperty(l,"__esModule",{value:!0});var C=/https?:\/\/services.*\.arcgis\.com/i,z=/(?:\{([^}]+)\})/g,D=k.getLogger("esri.widgets.Search.support.layerSearchUtils");l.getResults=
function(b){var d=b.exactMatch,k=void 0===d?!1:d,e=b.location,v=b.maxResults,r=b.spatialReference,w=b.source,t=b.sourceIndex,z=b.suggestResult,q=b.view,l=w.layer,E=w.filter,p=w.zoomScale,C=q&&q.scale,y=f(w,q);return a(l).then(function(){return m.create(function(a,c){var b=l.popupTemplate;if(b)return b.getRequiredFields(l.fields).then(function(c){return a(c)},c);a(null)})}).then(function(a){var b=l.objectIdField,d=l.returnZ,f=w.displayField||w.layer.displayField||h(w.layer);if(!l.getField(f))return D.error("invalid-field: displayField is invalid."),
m.reject(new n("getResults():invalid-field","displayField is invalid."));a=a&&a.length?a:[f];var A=(a=w.outFields||a)&&-1!==a.indexOf("*");-1!==a.indexOf(b)||A||a.push(b);if(!A&&!x(l,a))return D.error("invalid-field: outField is invalid."),m.reject(new n("getResults():invalid-field","outField is invalid."));b=l.createQuery();(A=w.searchQueryParams)&&b.set(A);r&&(b.outSpatialReference=r,A=1/g.getMetersPerUnitForSR(r))&&(b.maxAllowableOffset=A);A=!!l.get("capabilities.data.supportsZ");b.returnZ=A&&
!1!==d;b.returnGeometry=!0;a&&(b.outFields=a);if(e)b.geometry=e;else if(z.key)b.objectIds=[parseInt(z.key,10)];else{d=w.searchFields||[f];if(!x(l,d))return D.error("invalid-field: search field is invalid."),m.reject(new n("getResults():invalid-field","search field is invalid."));c(l)&&(b.num=v);y&&(b.geometry=y);a=z.text.trim();if(!a)return m.resolve();var A=w.prefix,I=w.suffix;a=(""+(void 0===A?"":A)+a+(void 0===I?"":I)).replace(/\'/g,"''");d=B(a,l,d,E,k);if(!d)return m.resolve();b.where=d}return l.queryFeatures(b).then(function(a){return u(a,
q,w,t,f,C,p)})})};l.getSuggestions=function(b){var d=b.source,k=b.spatialReference,g=b.suggestTerm,e=b.maxSuggestions,v=b.sourceIndex,r=d.layer,w=d.filter,t=f(d,b.view);return a(r).then(function(){if(!c(r))return m.resolve();var a=d.displayField||d.layer.displayField||h(d.layer),b=d.searchFields||[a],f=[];d.suggestionTemplate?d.suggestionTemplate.replace(z,function(a,c){f.push(c);return a}):f.push(a);var A=f&&-1!==f.indexOf("*");-1!==f.indexOf(r.objectIdField)||A||f.push(r.objectIdField);var u=!!r.getField(a),
A=A||x(r,f),l=x(r,b);if(!u)return D.error("invalid-field: displayField is invalid."),m.reject(new n("getSuggestions():invalid-field","displayField is invalid."));if(!A)return D.error("invalid-field: outField is invalid."),m.reject(new n("getSuggestions():invalid-field","outField is invalid."));if(!l)return D.error("invalid-field: search field is invalid."),m.reject(new n("getSuggestions():invalid-field","search field is invalid."));u=r.createQuery();(A=d.suggestQueryParams)&&u.set(A);u.outSpatialReference=
k;u.returnGeometry=!1;u.num=e;u.outFields=f;t&&(u.geometry=t);A=g.trim();if(!A)return m.resolve();var l=d.prefix,q=d.suffix,A=(""+(void 0===l?"":l)+A+(void 0===q?"":q)).replace(/\'/g,"''"),b=B(A,r,b,w,!1);if(!b)return m.resolve();u.where=b;return r.queryFeatures(u).then(function(c){return E(c,d,v,a)})})}})},"esri/widgets/Search/support/geometryUtils":function(){define("require exports ../../../geometry ../../../core/Error ../../../core/Logger ../../../core/maybe ../../../core/promiseUtils ../../../geometry/support/scaleUtils ../../../views/MapView".split(" "),
function(p,l,q,b,n,e,k,m,g){function d(a,c,b){var h=a.hasZ?a.z:void 0;return c&&c.map?(b?m.getExtentForScale(c,b):c.extent).clone().centerAt(a).set({zmax:h,zmin:h}):new q.Extent({xmin:a.x-.25,ymin:a.y-.25,xmax:a.x+.25,ymax:a.y+.25,spatialReference:a.spatialReference,zmin:h,zmax:h})}Object.defineProperty(l,"__esModule",{value:!0});var f=n.getLogger("esri.widgets.Search.support.geometryUtils");l.getPointWithElevation=function(a,c){return c?a?a.hasZ||c instanceof g?k.resolve(a):(c=c.get("map.ground"))&&
c.layers.length?c.queryElevation(a).then(function(a){return a.geometry}):k.resolve(a):(f.error("missing-parameter: point is missing."),k.reject(new b("searchgeometryutils:missing-parameter","point is missing."))):(f.error("missing-parameter: view is missing."),k.reject(new b("searchgeometryutils:missing-parameter","view is missing.")))};l.getPointFromGeometry=function(a){return a instanceof q.Point?a:a instanceof q.Extent?a.center:a instanceof q.Polygon?a.centroid:a instanceof q.Multipoint?a.getPoint(0):
a instanceof q.Polyline?a.getPoint(0,0):null};l.createExtentFromGeometry=function(a,c,b){if(e.isNone(a))return null;if(a instanceof q.Extent)return a;if(a instanceof q.Multipoint||a instanceof q.Polygon||a instanceof q.Polyline)return a.extent;if(a instanceof q.Point)return d(a,c,b)};l.scaleExtent=function(a,c,b){return e.isNone(a)||e.isNone(c)?null:d(a.center,c,b)}})},"esri/views/MapView":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../core/asyncUtils ../core/Error ../core/Handles ../core/has ../core/Logger ../core/promiseUtils ../core/screenUtils ../core/watchUtils ../core/workers ../core/accessorSupport/decorators ./BreakpointsOwner ./Magnifier ./MapViewBase ./2d/input/MapViewInputManager ./2d/support/HighlightOptions ./support/screenshotUtils ./support/WebGLRequirements ./ui/2d/DefaultUI2D @dojo/framework/shim/Promise".split(" "),
function(p,l,q,b,n,e,k,m,g,d,f,a,c,h,x,w,v,r,B,t,y,E,u,C){function z(){return e(this,void 0,void 0,function(){var a,c,b,h,d,f,k;return n(this,function(g){switch(g.label){case 0:return[4,Promise.all([new Promise(function(a,c){p(["./webgl"],a,c)}),new Promise(function(a,c){p(["./2d/mapViewDeps"],a,c)}),new Promise(function(a,c){p(["./2d/engine"],a,c)})])];case 1:return a=g.sent(),c=a[1],b=c.GraphicsView2D,h=c.LabelManager,d=c.MapViewNavigation,f=c.MagnifierView2D,k=a[2].Stage,H=b,A=h,I=d,O=f,N=k,[2]}})})}
var D=f.getLogger("esri.views.MapView"),N,H,A,I,O;return function(f){function e(a){a=f.call(this,a)||this;a._magnifierView=null;a._mapViewHandles=new g;a._stage=null;a._resolveWhenReady=[];a.highlightOptions=new y;a.magnifier=new r;a.inputManager=new t({view:a});a.mapViewNavigation=null;a.supersampleScreenhotsEnabled=!0;a.ui=new C;a.rendering=!1;x.initialize();return a}q(e,f);Object.defineProperty(e.prototype,"background",{get:function(){return this.get("map.initialViewProperties.background")||null},
enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"interacting",{get:function(){return this.mapViewNavigation&&this.mapViewNavigation.interacting||!1},enumerable:!0,configurable:!0});e.prototype.toMap=function(a){if(c.isSupportedScreenPointEvent(a)){var b=c.createScreenPointFromSupportedEvent(this,a);return this.inherited(arguments,[b])}return this.inherited(arguments)};e.prototype.hitTest=function(b){var h=c.isSupportedScreenPointEvent(b)?c.createScreenPointFromSupportedEvent(this,
b):b;if(!this.internallyReady||isNaN(h.x)||isNaN(h.y))return a.resolve({screenPoint:h,results:[]});var d=this.toMap(h);b=[this.graphicsView];b.push.apply(b,this.allLayerViews.toArray().reverse());return a.all(b.map(function(a){return a&&a.hitTest?a.hitTest(h.x,h.y):null})).then(function(a){return{screenPoint:h,results:a.filter(function(a){return null!=a}).map(function(a){return{mapPoint:d,graphic:a}})}})};e.prototype.takeScreenshot=function(c){return this.internallyReady?this._stage.takeScreenshot(E.toRenderSettings(c,
this),this.allLayerViews):a.reject("Map view cannot be used before it is ready")};e.prototype.on=function(a,c,b){var h=this.inputManager&&this.inputManager.viewEvents.register(a,c,b);return h?h:this.inherited(arguments)};e.prototype.hasEventListener=function(a){return this.inherited(arguments)||this.inputManager&&this.inputManager.viewEvents.hasHandler(a)};e.prototype.graphicChanged=function(a){this.graphicsView&&this.graphicsView.graphicUpdateHandler(a)};e.prototype.whenReady=function(){var c=this;
return a.create(function(a){c.internallyReady?a(c):c._resolveWhenReady.push(a)})};e.prototype.forceDOMReadyCycle=function(){this.forceReadyCycle()};e.prototype.validate=function(){var c=u.check({supportsMajorWebPerformanceCaveat:!0});d("safari")&&9>d("safari")&&(c=new m("mapview:browser-not-supported","This browser is not supported by MapView (Safari \x3c 9)",{type:"safari",requiredVersion:9,detectedVersion:d("safari")}));return c?(D.warn("#validate()",c.message),a.reject(c)):k.safeCast(z())};e.prototype._startup=
function(){var a=this;if(!this.internallyReady){this.inherited(arguments);this.graphics.owner=this;var c=new N(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenhotsEnabled,contextOptions:{deactivatedWebGLExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions}}),b=new H({view:this,graphics:this.graphics}),d=new I({view:this,animationManager:this.animationManager}),f=new A({view:this});this._magnifierView=new O;this._magnifierView.magnifier=
this.magnifier;this._stage=c;this._frameTask.graphicsView=b;this._set("graphicsView",b);this._set("mapViewNavigation",d);this._set("labelManager",f);this._mapViewHandles.add([this.allLayerViews.on("change",function(){return a._updateStageChildren()}),c.on("post-render",function(){return a._set("rendering",a.allLayerViews.some(function(a){return!0===a.rendering}))}),c.on("webgl-error",function(c){return a.fatalError=c.error}),this.watch("stationary",function(a){return c.stationary=a},!0),this.watch("state.viewpoint",
function(b){return c.state=a.state},!0),this.watch("background",function(a){return c.background=a},!0),this.watch("magnifier",function(c){return a._magnifierView.magnifier=c},!0),h.init(this,"highlightOptions.color,highlightOptions.haloOpacity,highlightOptions.fillOpacity",function(){a._stage.setHighlightOptions(a.highlightOptions);a._stage.requestRender()})]);c.state=this.state;c.background=this.background;this._updateStageChildren();b=this._resolveWhenReady;this._resolveWhenReady=[];b.forEach(function(c){return c(a)})}};
e.prototype._tearDown=function(){this.internallyReady&&(this._mapViewHandles.removeAll(),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this.graphicsView.destroy(),this.mapViewNavigation.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.inherited(arguments))};e.prototype._updateStageChildren=function(){var a=
this;this._stage.removeAllChildren();this.allLayerViews.filter(function(a){return null!=a.container}).forEach(function(c,b){a._stage.addChildAt(c.container,b)});this._stage.addChild(this.graphicsView.container);this._stage.addChild(this._magnifierView)};b([w.property({readOnly:!0,dependsOn:["map.initialViewProperties?.background"]})],e.prototype,"background",null);b([w.property({type:y})],e.prototype,"highlightOptions",void 0);b([w.property({type:r})],e.prototype,"magnifier",void 0);b([w.property({readOnly:!0})],
e.prototype,"inputManager",void 0);b([w.property({readOnly:!0})],e.prototype,"mapViewNavigation",void 0);b([w.property({dependsOn:["mapViewNavigation.interacting"],type:Boolean})],e.prototype,"interacting",null);b([w.property({type:Boolean,constructOnly:!0})],e.prototype,"supersampleScreenhotsEnabled",void 0);b([w.property({type:C})],e.prototype,"ui",void 0);b([w.property({readOnly:!0})],e.prototype,"rendering",void 0);b([w.property({constructOnly:!0})],e.prototype,"renderCanvas",void 0);b([w.property({constructOnly:!0})],
e.prototype,"deactivatedWebGLExtensions",void 0);b([w.property({constructOnly:!0})],e.prototype,"debugWebGLExtensions",void 0);return e=b([w.subclass("esri.views.MapView")],e)}(w.declared(B,v))})},"esri/views/Magnifier":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),function(p,l,q,b,n,e){return function(k){function m(b){b=k.call(this)||this;b.factor=1.5;b.offsetX=0;b.offsetY=
0;b.position=null;b.visible=!1;return b}q(m,k);Object.defineProperty(m.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0});b([e.property({type:Number})],m.prototype,"factor",void 0);b([e.property({type:Number})],m.prototype,"offsetX",void 0);b([e.property({type:Number})],m.prototype,"offsetY",void 0);b([e.property()],m.prototype,"position",void 0);b([e.property({readOnly:!0,dependsOn:["factor","offsetX","offsetY","position","visible"]})],m.prototype,
"version",null);b([e.property({type:Boolean})],m.prototype,"visible",void 0);return m=b([e.subclass("esri.views.Magnifier")],m)}(e.declared(n))})},"esri/views/MapViewBase":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../geometry ../Viewpoint ../core/Error ../core/Handles ../core/Logger ../core/promiseUtils ../core/screenUtils ../core/watchUtils ../core/accessorSupport/decorators ../geometry/support/webMercatorUtils ../layers/support/TileInfo ./PopupView ./View ./ViewAnimation ./2d/AnimationManager ./2d/FrameTask ./2d/MapViewConstraints ./2d/PaddedViewState ./2d/tiling ./2d/viewpointUtils".split(" "),
function(p,l,q,b,n,e,k,m,g,d,f,a,c,h,x,w,v,r,B,t,y,E,u,C,z){var D=d.getLogger("esri.views.MapView");return function(d){function r(a){var c=d.call(this,a)||this;c._frameTask=new y.default(c);c._mapViewBaseHandles=new g;c.featuresTilingScheme=null;c.fullOpacity=1;c.interacting=!1;c.initialExtent=null;c.labelManager=null;c.resizeAlign="center";c.type="2d";c.constraints=new E;c.padding={top:0,right:0,bottom:0,left:0};var b=function(){c._set("updating",!0===c.get("layerViewManager.updating")||!0===c.get("labelManager.updating")||
!0===c.get("graphicsView.updating")||c.allLayerViews.some(function(a){return!0===a.updating}))},h=c._mapViewBaseHandles;h.add([c.watch("viewpoint",function(a){return c._flipStationary()},!0),c.on("resize",function(a){return c._resizeHandler(a)}),c.watch("animationManager.animation",function(a){c.animation=a}),c.watch(["layerViewManager.updating","labelManager.updating","graphicsView.updating"],b),c.allLayerViews.on("change",function(){b();h.remove("layerViewsUpdating");h.add(c.allLayerViews.map(function(a){return a.watch("updating",
b)}).toArray(),"layerViewsUpdating")})]);b();c.watch("ready",function(a){a?(c._startup(),c._frameTask&&c._frameTask.start()):(c._frameTask&&c._frameTask.stop(),c._tearDown())},!0);return c}b(r,d);r.prototype.destroy=function(){this.destroyed||(this._set("ready",!1),this._mapViewBaseHandles.removeAll(),this._frameTask.destroy(),this._tearDown(),this._gotoTask=this._mapViewBaseHandles=this._frameTask=null)};Object.defineProperty(r.prototype,"animation",{set:function(a){var c=this,b=this._get("animation");
a!==b&&(b&&b.stop(),!a||a.isFulfilled()?this._set("animation",null):(this._set("animation",a),b=function(){a===c._get("animation")&&(c._set("animation",null),c._frameTask.requestFrame())},a.when(b,b)))},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"center",{get:function(){if(!this.internallyReady)return this._get("center");var a=this.content.center;return new e.Point({x:a[0],y:a[1],spatialReference:this.content.spatialReference})},set:function(a){if(null!=a)if(this._normalizeInput(a))if(this.internallyReady){var c=
this.viewpoint;z.centerAt(c,c,a);this.viewpoint=c}else this._set("center",a),this.notifyChange("initialExtentRequired");else D.error("#center","incompatible spatialReference "+JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"constraints",{set:function(a){var c=this,b=this._get("constraints");b&&(this._mapViewBaseHandles.remove("constraints"),b.destroy());this._set("constraints",
a);a&&(a.view=this,this.internallyReady&&(this.state.viewpoint=a.fit(this.content.viewpoint)),this._mapViewBaseHandles.add(a.on("update",function(){c.internallyReady&&c.state&&(c.state.viewpoint=a.fit(c.content.viewpoint))}),"constraints"))},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"extent",{get:function(){return this.internallyReady?this.content.extent.clone():this._get("extent")},set:function(a){if(null!=a){var c=this._normalizeInput(a);c?c.width&&c.height?this.internallyReady?
(a=this.viewpoint,z.setExtent(a,a,c,this.size,{constraints:this.constraints}),this.viewpoint=a):(this._set("extent",c),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),this.notifyChange("initialExtentRequired")):D.error("#extent","invalid extent size"):D.error("#center","incompatible spatialReference "+JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))}},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,
"initialExtentRequired",{get:function(){var a=this.extent,c=this.center,b=this.scale,h=this.viewpoint,d=this.zoom;return this.get("map.initialViewProperties.viewpoint")||a||c&&(0!==b||-1!==d)||h?!1:!0},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"padding",{get:function(){return this.internallyReady?this.state.padding:this._get("padding")},set:function(a){this.internallyReady?(this.state.padding=a,this._set("padding",this.state.padding)):this._set("padding",a)},enumerable:!0,
configurable:!0});Object.defineProperty(r.prototype,"resolution",{get:function(){return this.state?this.state.resolution:0},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"rotation",{get:function(){return this.internallyReady?this.content.rotation:this._get("rotation")},set:function(a){if(!isNaN(a))if(this.internallyReady){var c=this.viewpoint;z.rotateTo(c,c,a);this.viewpoint=c}else this._set("rotation",a)},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"scale",
{get:function(){return this.internallyReady?this.content.scale:this._get("scale")},set:function(a){if(a&&!isNaN(a))if(this.internallyReady){var c=this.viewpoint;z.scaleTo(c,c,a);this.viewpoint=c}else{this._set("scale",a);this._set("zoom",-1);if(a=this._get("extent"))this._set("extent",null),this._set("center",a.center);this.notifyChange("initialExtentRequired")}},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"stationary",{get:function(){return!this.animation&&!this.interacting&&
!this._get("resizing")&&!this._stationaryTimer},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"viewpoint",{get:function(){if(!this.internallyReady)return this._get("viewpoint");var a=this.content;return a&&a.viewpoint.clone()},set:function(a){if(null!=a){var c=this._normalizeInput(a);c?this.internallyReady?(a=new k({targetGeometry:new e.Point,scale:0,rotation:0}),z.copy(a,c),this.constraints.constrain(a,this.content.viewpoint),this.state.viewpoint=a,this._frameTask.requestFrame(),
this._set("viewpoint",a)):(this._set("viewpoint",c),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),this.notifyChange("initialExtentRequired")):!a.scale||isNaN(a.scale)?D.error("#viewpoint","invalid scale value of "+a.scale):a.targetGeometry?D.error("#viewpoint","incompatible spatialReference "+JSON.stringify(a.targetGeometry.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference)):D.error("#viewpoint","geometry not defined")}},
enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"zoom",{get:function(){return this.internallyReady?this.constraints.scaleToZoom(this.scale):this._get("zoom")},set:function(a){if(null!=a){if(!this.internallyReady){this.notifyChange("initialExtentRequired");this._set("zoom",a);this._set("scale",0);var c=this._get("extent");c&&(this._set("extent",null),this._set("center",c.center))}this.constraints.effectiveLODs&&(c=this.viewpoint,z.scaleTo(c,c,this.constraints.zoomToScale(a)),this.viewpoint=
c,this._set("zoom",this.constraints.scaleToZoom(this.scale)))}},enumerable:!0,configurable:!0});r.prototype.goTo=function(a,b){var h=this;if(a)return c.whenTrueOnce(this,"ready",b&&b.signal).then(function(){h.animation&&(h.animation=null);var c=q({animate:!0},b),d=z.createAsync(a,h);h._gotoTask={};return c.animate?h._gotoAnimated(d,c):h._gotoImmediate(d,c)});D.error("#goTo()","target cannot be null or undefined")};r.prototype.hitTest=function(a){return f.reject("Should be implemented by subclasses")};
r.prototype.popupHitTest=function(a){var c=this;return this.hitTest(a).then(function(b){return q({},b,{mapPoint:c.toMap(a)})})};r.prototype.toMap=function(a){if(!this.internallyReady)return null;a=this.state.toMap([0,0],[a.x,a.y]);return new e.Point({x:a[0],y:a[1],spatialReference:this.spatialReference})};r.prototype.isTileInfoRequired=function(){return!0};r.prototype.toScreen=function(c){if(!this.internallyReady)return null;c=this._normalizeInput(c);c=[c.x,c.y];c=this.state.toScreen(c,c);return a.createScreenPoint(c[0],
c[1])};r.prototype.pixelSizeAt=function(a,c){if(!this.internallyReady)return NaN;a&&null!=a.x&&(c=a.y,a=a.x);return this.content.pixelSizeAt([a,c])};r.prototype.requestLayerViewUpdate=function(a){this.internallyReady&&this._frameTask.requestLayerViewUpdate(a)};r.prototype.requestUpdate=function(a){this.internallyReady&&this._frameTask.requestUpdate(a)};r.prototype.getDefaultSpatialReference=function(){return this.get("map.initialViewProperties.spatialReference")||this.get("defaultsFromMap.spatialReference")||
null};r.prototype.isSpatialReferenceSupported=function(a,c){return c||this._get("ready")?!0:null!==this._getDefaultViewpoint()};r.prototype._createOrReplaceAnimation=function(a){if(!this.animation||this.animation.done)this.animation=new B;this.animation.update(a);return this.animation};r.prototype._cancellableGoTo=function(a,c,b,h){var d=this,k=b.then(function(){a===d._gotoTask&&(d.animation=null)}).catch(function(b){a===d._gotoTask&&(d.animation=null,c.done||c.stop());throw b;}),e=f.create(function(a){return a(k)},
function(){a!==d._gotoTask||c.done||c.stop()});c.when().catch(function(){a===d._gotoTask&&e.cancel&&e.cancel()});return e};r.prototype._gotoImmediate=function(a,c){var b=this,h=this._gotoTask,d=this._createOrReplaceAnimation(a);a=a.then(function(a){f.throwIfAborted(c);if(h!==b._gotoTask)throw new m("view:goto-interrupted","Goto was interrupted");b.viewpoint=d.target=a;d.finish()});return this._cancellableGoTo(h,d,a,c)};r.prototype._gotoAnimated=function(a,c){var b=this,h=this._gotoTask,d=this._createOrReplaceAnimation(a);
a=a.then(function(a){if(h!==b._gotoTask)throw new m("view:goto-interrupted","Goto was interrupted");d.update(a);b.animationManager.animate(d,b.viewpoint,c);return d.when().then(function(){},function(){})});return this._cancellableGoTo(h,d,a,c)};r.prototype._resizeHandler=function(a){var c=this.state;if(c){var b=this.content.viewpoint,h=this.content.size.concat();c.size=[a.width,a.height];z.resize(b,b,h,this.content.size,this.resizeAlign);b=this.constraints.constrain(b,null);this.state.viewpoint=b}};
r.prototype._startup=function(){if(!this.internallyReady){var a=this._getDefaultViewpoint();this.constraints.view=this;this.constraints.fit(a);this._set("animationManager",new t({view:this}));this._set("state",new u({padding:this._get("padding"),size:this.size,viewpoint:a}));this._set("content",this.state.content);this._set("featuresTilingScheme",new C.TileInfoView(w.create({spatialReference:this.spatialReference,size:512})));this.internallyReady=!0}};r.prototype._tearDown=function(){if(this.internallyReady){this.internallyReady=
!1;this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null,this.notifyChange("stationary"));var a=this._get("content"),c=a.center,b=a.spatialReference,c=new e.Point({x:c[0],y:c[1],spatialReference:b});this._set("viewpoint",null);this._set("extent",null);this._set("center",c);this._set("zoom",-1);this._set("rotation",a.rotation);this._set("scale",a.scale);this._set("spatialReference",b);this.constraints.view=null;this.animationManager.destroy();this._set("animationManager",
null);this._set("state",null);this._set("content",null);this.animation=null}};r.prototype._flipStationary=function(){var a=this;this._stationaryTimer&&clearTimeout(this._stationaryTimer);this._stationaryTimer=setTimeout(function(){a._stationaryTimer=null;a.notifyChange("stationary")},160);this.notifyChange("stationary")};r.prototype._normalizeInput=function(a,c){void 0===c&&(c=this.spatialReference);var b=a&&a.targetGeometry||a;return c?b?c.equals(b.spatialReference)?a:x.canProject(b,c)?a&&"esri.Viewpoint"===
a.declaredClass?(a.targetGeometry=x.project(b,c),a):x.project(b,c):null:null:a};r.prototype._getDefaultViewpoint=function(){var a=this.constraints,c=this._get("zoom"),b=this._get("scale"),h=this._normalizeInput(this._get("center")),d=this._normalizeInput(this._get("extent")),f=this._get("rotation"),e=this._normalizeInput(this._get("viewpoint"));a.effectiveLODs?-1!==c&&(b=a.zoomToScale(c)):c=-1;var g=null,r=null,c=0,a=e&&e.rotation,m=e&&e.targetGeometry;m&&("extent"===m.type?g=m:"point"===m.type&&
(r=m,c=e.scale));e=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent"));m=this._normalizeInput(this.initialExtent);d=d||g||e||m;h=h||r||d&&d.center;b=b||c||d&&z.extentToScale(d,this.size);return h&&b?new k({targetGeometry:h,scale:b,rotation:f||a||0}):null};n([h.property()],r.prototype,"animation",null);n([h.property({readOnly:!0})],r.prototype,"animationManager",void 0);n([h.property({value:null,type:e.Point,dependsOn:["content.viewpoint"]})],r.prototype,"center",
null);n([h.property({type:E})],r.prototype,"constraints",null);n([h.property({readOnly:!0})],r.prototype,"content",void 0);n([h.property({value:null,type:e.Extent,dependsOn:["content.viewpoint"]})],r.prototype,"extent",null);n([h.property({readOnly:!0})],r.prototype,"featuresTilingScheme",void 0);n([h.property()],r.prototype,"fullOpacity",void 0);n([h.property({readOnly:!0})],r.prototype,"interacting",void 0);n([h.property({type:e.Extent})],r.prototype,"initialExtent",void 0);n([h.property({dependsOn:["map.initialViewProperties?.viewpoint"]})],
r.prototype,"initialExtentRequired",null);n([h.property()],r.prototype,"labelManager",void 0);n([h.property({value:{top:0,right:0,bottom:0,left:0},cast:function(a){return q({top:0,right:0,bottom:0,left:0},a)}})],r.prototype,"padding",null);n([h.property()],r.prototype,"resizeAlign",void 0);n([h.property({readOnly:!0,dependsOn:["content.viewpoint"]})],r.prototype,"resolution",null);n([h.property({value:0,type:Number,dependsOn:["content.viewpoint"]})],r.prototype,"rotation",null);n([h.property({value:0,
type:Number,dependsOn:["content.viewpoint"]})],r.prototype,"scale",null);n([h.property({type:e.SpatialReference,dependsOn:["map.initialViewProperties?.spatialReference","defaultsFromMap.isSpatialReferenceDone"]})],r.prototype,"spatialReference",void 0);n([h.property({readOnly:!0})],r.prototype,"state",void 0);n([h.property()],r.prototype,"stationary",null);n([h.property({readOnly:!0})],r.prototype,"type",void 0);n([h.property({value:null,type:k,dependsOn:["content.viewpoint"]})],r.prototype,"viewpoint",
null);n([h.property({value:-1,dependsOn:["scale"]})],r.prototype,"zoom",null);return r=n([h.subclass("esri.views.MapViewBase")],r)}(h.declared(r,v))})},"esri/views/2d/AnimationManager":function(){define("../../Viewpoint ../../core/Accessor ../../core/scheduling ../../core/now ../../geometry/Point ../ViewAnimation ./unitBezier ./viewpointUtils".split(" "),function(p,l,q,b,n,e,k,m){var g=function(b,f,a,c){var h=b.targetGeometry,d=f.targetGeometry;c?"string"===typeof c&&(c=k.parse(c)||k.ease):c=k.ease;
this.easing=c;this.duration=a;this.sCenterX=h.x;this.sCenterY=h.y;this.sScale=b.scale;this.sRotation=b.rotation;this.tCenterX=d.x;this.tCenterY=d.y;this.tScale=f.scale;this.tRotation=f.rotation;this.dCenterX=this.tCenterX-this.sCenterX;this.dCenterY=this.tCenterY-this.sCenterY;this.dScale=this.tScale-this.sScale;this.dRotation=this.tRotation-this.sRotation;180<this.dRotation?this.dRotation-=360:-180>this.dRotation&&(this.dRotation+=360)};g.prototype.applyRatio=function(b,f){var a=this.easing(f),c,
h;1<=f?(f=this.tCenterX,c=this.tCenterY,h=this.tRotation,a=this.tScale):(f=this.sCenterX+a*this.dCenterX,c=this.sCenterY+a*this.dCenterY,h=this.sRotation+a*this.dRotation,a=this.sScale+a*this.dScale);b.targetGeometry.x=f;b.targetGeometry.y=c;b.scale=a;b.rotation=h};return l.createSubclass({constructor:function(){this.viewpoint=new p({targetGeometry:new n,scale:0,rotation:0});this._updateTask=q.addFrameTask({postRender:this._postRender.bind(this)});this._updateTask.pause()},properties:{animation:null,
duration:{value:200},transition:{value:null},easing:{value:k.ease},view:null,viewpoint:null},animate:function(d,f,a){this.stop();m.copy(this.viewpoint,f);this.transition=new g(this.viewpoint,d.target,a&&a.duration||this.duration,a&&a.easing||this.easing);f=function(){this.animation===d&&this._updateTask&&("finished"===d.state&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this._updateTask.pause(),this.updateFunction=this.animation=
null)}.bind(this);d.when(f,f);this._startTime=b();this._updateTask.resume();return this.animation=d},animateContinous:function(d,f){this.stop();this.updateFunction=f;this.viewpoint=d;var a=new e({target:d.clone()});d=function(){this.animation===a&&this._updateTask&&(this._updateTask.pause(),this.updateFunction=this.animation=null)}.bind(this);a.when(d,d);this._startTime=b();this._updateTask.resume();return this.animation=a},stop:function(){this.animation&&(this.animation.stop(),this.updateFunction=
this.animation=null)},_postRender:function(d){var f=this.animation;f&&f.state!==e.STOPPED?(this.updateFunction?this.updateFunction(this.viewpoint,d.deltaTime):(d=(b()-this._startTime)/this.transition.duration,f=1<=d,this.transition.applyRatio(this.viewpoint,d),f&&this.animation.finish()),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())):this._updateTask.pause()}})})},"esri/views/2d/unitBezier":function(){define([],function(){var p=function(l,b,n,e){function k(a,c){var b,h,f,k;c=
null==c?1E-6:c;f=a;for(h=0;8>h;h++){k=((d*f+g)*f+m)*f-a;if(Math.abs(k)<c)return f;b=(3*d*f+2*g)*f+m;if(1E-6>Math.abs(b))break;f-=k/b}b=0;h=1;f=a;if(f<b)return b;if(f>h)return h;for(;b<h;){k=((d*f+g)*f+m)*f;if(Math.abs(k-a)<c)break;a>k?b=f:h=f;f=.5*(h-b)+b}return f}var m=3*l,g=3*(n-l)-m,d=1-m-g,f=3*b,a=3*(e-b)-f,c=1-f-a;return function(b,d){b=k(b,d);return((c*b+a)*b+f)*b}},l=/^cubic-bezier\((.*)\)/;p.parse=function(q){var b=p[q]||null;!b&&(q=l.exec(q))&&(q=q[1].split(",").map(function(b){return parseFloat(b.trim())}),
4!==q.length||q.some(function(b){return isNaN(b)})||(b=p.apply(p,q)));return b};p.ease=p(.25,.1,.25,1);p.linear=p(0,0,1,1);p.easeIn=p["ease-in"]=p(.42,0,1,1);p.easeOut=p["ease-out"]=p(0,0,.58,1);p.easeInOut=p["ease-in-out"]=p(.42,0,.58,1);return p})},"esri/views/2d/FrameTask":function(){define(["require","exports","../../core/scheduling"],function(p,l,q){Object.defineProperty(l,"__esModule",{value:!0});p=function(){function b(b){var e=this;this.view=b;this._frameTaskHandle=null;this.updateEnabled=
this.stationary=!0;this.prepare=function(){e._updateParameters.state=e.view.state;e._updateParameters.stationary=e.view.stationary;e._updateParameters.pixelRatio=window.devicePixelRatio};this.update=function(){if(e.updateEnabled){for(var b=e.view,m=b.labelManager,g=e.graphicsView,d=b.allLayerViews.toArray().filter(function(a){return a.isFulfilled()&&null==a.layerViews}),f=d.length,a=b.state,c=0;c<d.length;c++)if(b=d[c],b.attached){var h=b.lastUpdateId;if(null==h||!e.stationary&&!b.moving)b.moving=
!0,b.moveStart();h!==a.id&&b.viewChange();e.stationary&&b.moving&&(b.moving=!1,b.moveEnd());b.lastUpdateId=a.id}m&&m.lastUpdateId!==a.id&&(m.viewChange(),m.lastUpdateId=a.id);g&&g.lastUpdateId!==a.id&&(g.viewChange(),g.lastUpdateId=a.id);m=e._layerViewsTrash;for(g=0;g<m.length;g++)b=m[g],e._detachLayerView(b);for(g=m.length=0;g<f;g++)b=d[g],b.isFulfilled()&&!b.attached&&e._attachLayerView(b);d=e._updateParameters;f=e._layerViewsToUpdate;b=f.slice();g=f.length=0;for(a=b;g<a.length;g++)b=a[g],!("attached"in
b)||"attached"in b&&b.attached?b.processUpdate(d):f.push(b);f=e._updatablesToUpdate;b=f.slice();for(f=f.length=0;f<b.length;f++)b[f].processUpdate(d);0===e._layerViewsToUpdate.length&&0===e._updatablesToUpdate.length&&0===m.length&&e._frameTaskHandle.pause()}}}b.prototype.destroy=function(){this.stop()};b.prototype.start=function(){var b=this;this._updateParameters={state:this.view.state,pixelRatio:window.devicePixelRatio,stationary:!0};this._layerViewsTrash=[];this._layerViewsToUpdate=[];this._updatablesToUpdate=
[];this._allLayerViewsChangeHandle=this.view.allLayerViews.on("change",function(e){Array.prototype.push.apply(b._layerViewsTrash,e.removed);b.requestFrame()});this._stationaryHandle=this.view.watch("stationary",function(e){b.stationary=e;b.requestFrame()});this._frameTaskHandle=q.addFrameTask(this)};b.prototype.stop=function(){var b=this;this._frameTaskHandle&&(this.view.allLayerViews.forEach(function(e){return b._detachLayerView(e)}),this._stationaryHandle.remove(),this._allLayerViewsChangeHandle.remove(),
this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._allLayerViewsChangeHandle=this._frameTaskHandle=this._layerViewsTrash=this._layerViewsToUpdate=null,this.stationary=!0)};b.prototype.requestLayerViewUpdate=function(b){this._layerViewsToUpdate.push(b);this.requestFrame()};b.prototype.requestUpdate=function(b){this._updatablesToUpdate.push(b);this.requestFrame()};b.prototype.requestFrame=function(){this._frameTaskHandle&&this._frameTaskHandle.resume()};b.prototype._attachLayerView=
function(b){b.attached||(b.attached=!0,b.attach(),this._updateParameters.stationary?b.moving=!1:(b.moving=!0,b.moveStart()))};b.prototype._detachLayerView=function(b){b.attached&&(b.detach(),b.attached=!1,b.moving=!1)};return b}();l.default=p})},"esri/views/2d/MapViewConstraints":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Evented ../../core/accessorSupport/decorators ../../layers/support/LOD ./constraints/RotationConstraint ./constraints/ZoomConstraint".split(" "),
function(p,l,q,b,n,e,k,m,g,d){return function(f){function a(){var a=null!==f&&f.apply(this,arguments)||this;a.enabled=!0;a.lods=null;a.minScale=0;a.maxScale=0;a.minZoom=-1;a.maxZoom=-1;a.rotationEnabled=!0;a.snapToZoom=!0;return a}q(a,f);a.prototype.initialize=function(){this.watch("_zoom, _rotation",this.emit.bind(this,"update"),!0)};a.prototype.destroy=function(){this.view=null;this._set("_zoom",null);this._set("_rotation",null)};Object.defineProperty(a.prototype,"_rotation",{get:function(){return new g({rotationEnabled:this.rotationEnabled})},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_defaultLODs",{get:function(){var a=this.get("view.defaultsFromMap.tileInfo"),b=this.get("view.spatialReference");return a&&b&&a.spatialReference.equals(b)?a.lods:null},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_zoom",{get:function(){return new d({lods:this.lods||this._defaultLODs,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale,snapToZoom:this.snapToZoom})},enumerable:!0,
configurable:!0});a.prototype.canZoomInTo=function(a){var c=this.effectiveMaxScale;return 0===c||a>=c};a.prototype.canZoomOutTo=function(a){var c=this.effectiveMinScale;return 0===c||a<=c};a.prototype.constrain=function(a,b){if(!this.enabled)return a;this._zoom.constrain(a,b);this._rotation.constrain(a,b);return a};a.prototype.fit=function(a){if(!this.enabled||!this.snapToZoom)return a;this._zoom.fit(a);return a};a.prototype.zoomToScale=function(a){return this._zoom.zoomToScale(a)};a.prototype.scaleToZoom=
function(a){return this._zoom.scaleToZoom(a)};a.prototype.snapScale=function(a){return this._zoom.snapToClosestScale(a)};a.prototype.snapToNextScale=function(a){return this._zoom.snapToNextScale(a)};a.prototype.snapToPreviousScale=function(a){return this._zoom.snapToPreviousScale(a)};b([k.property({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],a.prototype,"effectiveLODs",void 0);b([k.property({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],a.prototype,"effectiveMinScale",void 0);b([k.property({readOnly:!0,
aliasOf:"_zoom.effectiveMaxScale"})],a.prototype,"effectiveMaxScale",void 0);b([k.property({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],a.prototype,"effectiveMinZoom",void 0);b([k.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],a.prototype,"effectiveMaxZoom",void 0);b([k.property()],a.prototype,"enabled",void 0);b([k.property({type:[m]})],a.prototype,"lods",void 0);b([k.property()],a.prototype,"minScale",void 0);b([k.property()],a.prototype,"maxScale",void 0);b([k.property()],a.prototype,
"minZoom",void 0);b([k.property()],a.prototype,"maxZoom",void 0);b([k.property()],a.prototype,"rotationEnabled",void 0);b([k.property()],a.prototype,"snapToZoom",void 0);b([k.property()],a.prototype,"view",void 0);b([k.property({type:g,dependsOn:["rotationEnabled"]})],a.prototype,"_rotation",null);b([k.property({dependsOn:["view.spatialReference","view.defaultsFromMap.tileInfo"]})],a.prototype,"_defaultLODs",null);b([k.property({readOnly:!0,type:d,dependsOn:"lods minZoom maxZoom minScale maxScale snapToZoom _defaultLODs".split(" ")})],
a.prototype,"_zoom",null);return a=b([k.subclass("esri.views.2d.MapViewConstraints")],a)}(k.declared(n,e))})},"esri/views/2d/constraints/RotationConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(p,l,q,b,n,e){return function(k){function m(){var b=null!==k&&k.apply(this,arguments)||this;b.enabled=!0;b.rotationEnabled=!0;return b}q(m,k);
g=m;m.prototype.constrain=function(b,f){if(!this.enabled||!f)return b;this.rotationEnabled||(b.rotation=f.rotation);return b};m.prototype.clone=function(){return new g({enabled:this.enabled,rotationEnabled:this.rotationEnabled})};var g;b([e.property()],m.prototype,"enabled",void 0);b([e.property()],m.prototype,"rotationEnabled",void 0);return m=g=b([e.subclass("esri.views.2d.constraints.RotationConstraint")],m)}(e.declared(n))})},"esri/views/2d/constraints/ZoomConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators ../../../layers/support/LOD".split(" "),
function(p,l,q,b,n,e,k){return function(m){function g(b){b=m.call(this,b)||this;b._lodByScale={};b._scales=[];b.effectiveLODs=null;b.effectiveMinZoom=-1;b.effectiveMaxZoom=-1;b.effectiveMinScale=0;b.effectiveMaxScale=0;b.lods=null;b.minZoom=-1;b.maxZoom=-1;b.minScale=0;b.maxScale=0;b.snapToZoom=!0;return b}q(g,m);d=g;g.prototype.initialize=function(){var b=this,a,c,h=this.lods;c=this.minScale;a=this.maxScale;var d=this.minZoom,e=this.maxZoom,g=-1,k=-1,m=!1,n=!1;0!==c&&0!==a&&c<a&&(a=[a,c],c=a[0],
a=a[1]);if(h&&h.length){h=h.map(function(a){return a.clone()});h.sort(function(a,c){return c.scale-a.scale});h.forEach(function(a,c){return a.level=c});for(var l,q=0,u=h;q<u.length;q++){var p=u[q];!m&&0<c&&c>=p.scale&&(g=p.level,m=!0);!n&&0<a&&a>=p.scale&&(k=l?l.level:-1,n=!0);l=p}-1===d&&(d=0===c?0:g);-1===e&&(e=0===a?h.length-1:k);d=Math.max(d,0);d=Math.min(d,h.length-1);e=Math.max(e,0);e=Math.min(e,h.length-1);d>e&&(c=[e,d],d=c[0],e=c[1]);c=h[d].scale;a=h[e].scale;h.splice(0,d);h.splice(e-d+1,
h.length);h.forEach(function(a,c){b._lodByScale[a.scale]=a;b._scales[c]=a.scale});this._set("effectiveLODs",h);this._set("effectiveMinZoom",d);this._set("effectiveMaxZoom",e)}this._set("effectiveMinScale",c);this._set("effectiveMaxScale",a)};g.prototype.constrain=function(b,a){if(a&&b.scale===a.scale)return b;var c=this.effectiveMinScale,h=this.effectiveMaxScale,d=b.targetGeometry,f=a&&a.targetGeometry,e=0!==c&&b.scale>c;if(0!==h&&b.scale<h||e)c=e?c:h,f&&(a=(c-a.scale)/(b.scale-a.scale),d.x=f.x+(d.x-
f.x)*a,d.y=f.y+(d.y-f.y)*a),b.scale=c;this.snapToZoom&&this.effectiveLODs&&(b.scale=this._getClosestScale(b.scale));return b};g.prototype.fit=function(b){if(!this.effectiveLODs)return this.constrain(b,null);var a=this.scaleToZoom(b.scale);b.scale=this.zoomToScale(.99<Math.abs(a-Math.floor(a))?Math.round(a):Math.floor(a));return b};g.prototype.zoomToScale=function(b){if(!this.effectiveLODs)return 0;b-=this.effectiveMinZoom;b=Math.max(0,b);var a=this._scales;if(0>=b)return a[0];if(b>=a.length)return a[a.length-
1];var c=Math.round(b);return a[c]+(c-b)*(a[Math.round(b-.5)]-a[c])};g.prototype.scaleToZoom=function(b){if(!this.effectiveLODs)return-1;var a=this._scales,c,h;if(b>=a[0])return this.effectiveMinZoom;if(b<=a[a.length-1])return this.effectiveMaxZoom;for(var d=0;d<a.length-1;d++){c=a[d];h=a[d+1];if(h===b)return a=d+this.effectiveMinZoom,a+1;if(c>b&&h<b)return a=d+this.effectiveMinZoom,a+1-(b-h)/(c-h)}};g.prototype.snapToClosestScale=function(b){if(!this.effectiveLODs)return b;b=this.scaleToZoom(b);
return this.zoomToScale(Math.round(b))};g.prototype.snapToNextScale=function(b,a){void 0===a&&(a=.5);if(!this.effectiveLODs)return b*a;b=Math.round(this.scaleToZoom(b));return this.zoomToScale(b+1)};g.prototype.snapToPreviousScale=function(b,a){void 0===a&&(a=2);if(!this.effectiveLODs)return b*a;b=Math.round(this.scaleToZoom(b));return this.zoomToScale(b-1)};g.prototype.clone=function(){return new d({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})};
g.prototype._getClosestScale=function(b){if(this._lodByScale[b])return this._lodByScale[b].scale;b=this._scales.reduce(function(a,c,h,d){return Math.abs(c-b)<=Math.abs(a-b)?c:a},this._scales[0]);return this._lodByScale[b].scale};var d;b([e.property({readOnly:!0})],g.prototype,"effectiveLODs",void 0);b([e.property({readOnly:!0})],g.prototype,"effectiveMinZoom",void 0);b([e.property({readOnly:!0})],g.prototype,"effectiveMaxZoom",void 0);b([e.property({readOnly:!0})],g.prototype,"effectiveMinScale",
void 0);b([e.property({readOnly:!0})],g.prototype,"effectiveMaxScale",void 0);b([e.property({type:[k]})],g.prototype,"lods",void 0);b([e.property()],g.prototype,"minZoom",void 0);b([e.property()],g.prototype,"maxZoom",void 0);b([e.property()],g.prototype,"minScale",void 0);b([e.property()],g.prototype,"maxScale",void 0);b([e.property()],g.prototype,"snapToZoom",void 0);return g=d=b([e.subclass("esri.views.2d.constraints.ZoomConstraint")],g)}(e.declared(n))})},"esri/views/2d/PaddedViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f64 ./viewpointUtils ./ViewState".split(" "),
function(p,l,q,b,n,e,k,m,g,d){var f=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.left=0;b.top=0;b.right=0;b.bottom=0;return b}q(c,a);b([e.property()],c.prototype,"left",void 0);b([e.property()],c.prototype,"top",void 0);b([e.property()],c.prototype,"right",void 0);b([e.property()],c.prototype,"bottom",void 0);return c=b([e.subclass("esri.views.2d.PaddedViewState.Padding")],c)}(e.declared(n));return function(a){function c(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];
var e=a.apply(this,b)||this;e.content=new d;e._updateContent=function(){var a=m.vec2f64.create();return function(){var b=e._get("size"),c=e._get("padding");if(b&&c){var d=e.content;k.vec2.set(a,c.left+c.right,c.top+c.bottom);k.vec2.subtract(a,b,a);k.vec2.copy(d.size,a);if(b=d.viewpoint)e.viewpoint=b}}}();e.watch(["size","padding"],e._updateContent,!0);e.padding=new f;e.size=[0,0];return e}q(c,a);Object.defineProperty(c.prototype,"padding",{set:function(a){this._set("padding",a||new f)},enumerable:!0,
configurable:!0});Object.defineProperty(c.prototype,"viewpoint",{set:function(a){if(a){var b=a.clone();this.content.viewpoint=a;g.addPadding(b,a,this._get("size"),this._get("padding"));a=this._viewpoint2D;var c=b.targetGeometry;a.center[0]=c.x;a.center[1]=c.y;a.rotation=b.rotation;a.scale=b.scale;a.spatialReference=c.spatialReference;this._update()}},enumerable:!0,configurable:!0});b([e.property()],c.prototype,"content",void 0);b([e.property({type:f})],c.prototype,"padding",null);b([e.property()],
c.prototype,"viewpoint",null);return c=b([e.subclass("esri.views.2d.PaddedViewState")],c)}(e.declared(d))})},"esri/views/2d/tiling":function(){define("require exports ./tiling/TileInfoView ./tiling/TileKey ./tiling/TileQueue ./tiling/TileStrategy".split(" "),function(p,l,q,b,n,e){Object.defineProperty(l,"__esModule",{value:!0});l.TileInfoView=q;l.TileKey=b;l.TileQueue=n;l.TileStrategy=e})},"esri/views/2d/tiling/TileInfoView":function(){define("require exports ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),
function(p,l,q,b,n,e,k){var m=new e("0/0/0/0"),g=function(){function b(a,b,d,f,e,g,k,m){this.x=a;this.ymin=b;this.ymax=d;this.invM=f;this.leftAdjust=e;this.rightAdjust=g;this.leftBound=k;this.rightBound=m}b.create=function(a,c){var d;a[1]>c[1]&&(d=[c,a],a=d[0],c=d[1]);d=a[0];a=a[1];var f=c[0];c=c[1];var e=f-d,g=c-a,g=0!==g?e/g:0,k=(Math.ceil(a)-a)*g,m=(Math.floor(a)-a)*g;return new b(d,Math.floor(a),Math.ceil(c),g,0>e?k:m,0>e?m:k,0>e?f:d,0>e?d:f)};b.prototype.incrRow=function(){this.x+=this.invM};
b.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};b.prototype.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return b}(),d=[[0,0],[0,0],[0,0],[0,0]];return function(){function f(a,c){var d=this;this.tileInfo=a;this.fullExtent=c;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};var f=a.lods.slice();f.sort(function(a,b){return b.scale-a.scale});var e=this._lodInfos=f.map(function(d){return b.create(a,
d,c)});f.forEach(function(a,b){d._infoByLevel[a.level]=e[b];d._infoByScale[a.scale]=e[b];d.scales[b]=a.scale},this);this._wrap=a.isWrappable}Object.defineProperty(f.prototype,"spatialReference",{get:function(){return this.tileInfo.spatialReference},enumerable:!0,configurable:!0});f.prototype.getLODInfoAt=function(a){return this._infoByLevel["number"===typeof a?a:a.level]};f.prototype.getTileBounds=function(a,b,d){void 0===d&&(d=!1);m.set(b);return(b=this._infoByLevel[m.level])?b.getTileBounds(a,m,
d):a};f.prototype.getTileCoords=function(a,b,d){void 0===d&&(d=!1);m.set(b);return(b=this._infoByLevel[m.level])?b.getTileCoords(a,m,d):a};f.prototype.getTileCoverage=function(a,b,h){void 0===b&&(b=192);void 0===h&&(h="closest");h="closest"===h?this.getClosestInfoForScale(a.scale):this.getSmallestInfoForScale(a.scale);var c=n.pool.acquire(h),f=this._wrap,e;e=Infinity;var m=-Infinity,l,t,q=c.spans;d[0][0]=d[0][1]=d[1][1]=d[3][0]=-b;d[1][0]=d[2][0]=a.size[0]+b;d[2][1]=d[3][1]=a.size[1]+b;for(b=0;b<
d.length;b++){var p=d[b];a.toMap(p,p);p[0]=h.getColumnForX(p[0]);p[1]=h.getRowForY(p[1])}a=[];p=3;for(b=0;4>b;b++){if(d[b][1]!==d[p][1]){var u=g.create(d[b],d[p]);e=Math.min(u.ymin,e);m=Math.max(u.ymax,m);void 0===a[u.ymin]&&(a[u.ymin]=[]);a[u.ymin].push(u)}p=b}if(null==e||null==m||100<m-e)return null;for(p=[];e<m;){null!=a[e]&&(p=p.concat(a[e]));l=Infinity;t=-Infinity;for(b=p.length-1;0<=b;b--)u=p[b],l=Math.min(l,u.getLeftCol()),t=Math.max(t,u.getRightCol());l=Math.floor(l);t=Math.floor(t);if(e>=
h.first[1]&&e<=h.last[1])if(f)if(h.size[0]<h.worldSize[0])for(u=Math.floor(t/h.worldSize[0]),b=Math.floor(l/h.worldSize[0]);b<=u;b++)q.push(new k(e,Math.max(h.getFirstColumnForWorld(b),l),Math.min(h.getLastColumnForWorld(b),t)));else q.push(new k(e,l,t));else l>h.last[0]||t<h.first[0]||(l=Math.max(l,h.first[0]),t=Math.min(t,h.last[0]),q.push(new k(e,l,t)));e+=1;for(b=p.length-1;0<=b;b--)u=p[b],u.ymax>=e?u.incrRow():p.splice(b,1)}return c};f.prototype.getTileParentId=function(a){m.set(a);a=this._lodInfos.indexOf(this._infoByLevel[m.level])-
1;if(0>a)return null;this._getTileIdAtLOD(m,this._lodInfos[a],m);return m.id};f.prototype.getTileResolution=function(a){return(a=this._infoByLevel["object"===typeof a?a.level:a])?a.resolution:-1};f.prototype.getTileScale=function(a){return(a=this._infoByLevel[a.level])?a.scale:-1};f.prototype.intersects=function(a,b){m.set(b);b=this._infoByLevel[m.level];var c=a.lodInfo;if(c.resolution>b.resolution){this._getTileIdAtLOD(m,c,m);for(var d=c.denormalizeCol(m.col,m.world),f=0,e=a.spans;f<e.length;f++){var g=
e[f];if(g.row===m.row&&g.colFrom<=d&&g.colTo>=d)return!0}}if(c.resolution<b.resolution){e=a.spans.reduce(function(a,b){a[0]=Math.min(a[0],b.row);a[1]=Math.max(a[1],b.row);a[2]=Math.min(a[2],b.colFrom);a[3]=Math.max(a[3],b.colTo);return a},[Infinity,-Infinity,Infinity,-Infinity]);a=e[0];var d=e[1],f=e[2],e=e[3],k=b.denormalizeCol(m.col,m.world),g=c.getColumnForX(b.getXForColumn(k)),n=c.getRowForY(b.getYForRow(m.row)),k=c.getColumnForX(b.getXForColumn(k+1))-1;b=c.getRowForY(b.getYForRow(m.row+1))-1;
return!(g>e||k<f||n>d||b<a)}var l=c.denormalizeCol(m.col,m.world);return a.spans.some(function(a){return a.row===m.row&&a.colFrom<=l&&a.colTo>=l})};f.prototype.normalizeBounds=function(a,b,d){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];this._wrap&&(b=q.getInfo(this.tileInfo.spatialReference),d=-d*(b.valid[1]-b.valid[0]),a[0]+=d,a[2]+=d);return a};f.prototype.getSmallestInfoForScale=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a];if(a>b[0])return this._infoByScale[b[0]];
for(var d=1;d<b.length-1;d++)if(a>b[d]+1E-6)return this._infoByScale[b[d-1]];return this._infoByScale[b[b.length-1]]};f.prototype.getClosestInfoForScale=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a];a=b.reduce(function(b,c,d,f){return Math.abs(c-a)<Math.abs(b-a)?c:b},b[0]);return this._infoByScale[a]};f.prototype.scaleToLevel=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a].level;for(var d=b.length-1;0<=d;d--)if(a<b[d])return d===
b.length-1?this._infoByScale[b[b.length-1]].level:this._infoByScale[b[d]].level+(b[d]-a)/(b[d]-b[d+1]);return this._infoByScale[b[0]].level};f.prototype.scaleToZoom=function(a){return this.tileInfo.scaleToZoom(a)};f.prototype._getTileIdAtLOD=function(a,b,d){var c=this._infoByLevel[d.level];a.set(d);if(b.resolution<c.resolution)return null;if(b.resolution===c.resolution)return a;a.level=b.level;a.col=Math.floor(d.col*c.resolution/b.resolution+.01);a.row=Math.floor(d.row*c.resolution/b.resolution+.01);
return a};return f}()})},"esri/views/2d/tiling/LODInfo":function(){define(["require","exports","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(p,l,q,b){function n(b,e,g){b[0]=e;b[1]=g;return b}var e=new b("0/0/0/0");return function(){function b(b,e,d,f,a,c,h,k,n,l,r,q){this.level=b;this.resolution=e;this.scale=d;this.origin=f;this.first=a;this.last=c;this.size=h;this.norm=k;this.worldStart=n;this.worldEnd=l;this.worldSize=r;this.wrap=q}b.create=function(e,g,d){var f=q.getInfo(e.spatialReference),
a=[e.origin.x,e.origin.y],c=[e.size[0]*g.resolution,e.size[1]*g.resolution],h=[-Infinity,-Infinity],k=[Infinity,Infinity],m=[Infinity,Infinity];d&&(n(h,Math.max(0,Math.floor((d.xmin-a[0])/c[0])),Math.max(0,Math.floor((a[1]-d.ymax)/c[1]))),n(k,Math.max(0,Math.floor((d.xmax-a[0])/c[0])),Math.max(0,Math.floor((a[1]-d.ymin)/c[1]))),n(m,k[0]-h[0]+1,k[1]-h[1]+1));var l;e.isWrappable?(e=[Math.ceil(Math.round(2*f.origin[1]/g.resolution)/e.size[0]),m[1]],f=[Math.floor((f.origin[0]-a[0])/c[0]),h[1]],d=[e[0]+
f[0]-1,k[1]],l=!0):(f=h,d=k,e=m,l=!1);return new b(g.level,g.resolution,g.scale,a,h,k,m,c,f,d,e,l)};b.prototype.normalizeCol=function(b){if(!this.wrap)return b;var e=this.worldSize[0];return 0>b?e-1-Math.abs((b+1)%e):b%e};b.prototype.denormalizeCol=function(b,e){return this.wrap?this.worldSize[0]*e+b:b};b.prototype.getWorldForColumn=function(b){return this.wrap?Math.floor(b/this.worldSize[0]):0};b.prototype.getFirstColumnForWorld=function(b){return b*this.worldSize[0]+this.first[0]};b.prototype.getLastColumnForWorld=
function(b){return b*this.worldSize[0]+this.first[0]+this.size[0]-1};b.prototype.getColumnForX=function(b){return(b-this.origin[0])/this.norm[0]};b.prototype.getXForColumn=function(b){return this.origin[0]+b*this.norm[0]};b.prototype.getRowForY=function(b){return(this.origin[1]-b)/this.norm[1]};b.prototype.getYForRow=function(b){return this.origin[1]-b*this.norm[1]};b.prototype.getTileBounds=function(b,g,d){void 0===d&&(d=!1);e.set(g);var f=d?e.col:this.denormalizeCol(e.col,e.world),a=e.row;g=this.getXForColumn(f);
d=this.getYForRow(a+1);f=this.getXForColumn(f+1);a=this.getYForRow(a);b[0]=g;b[1]=d;b[2]=f;b[3]=a;return b};b.prototype.getTileCoords=function(b,g,d){void 0===d&&(d=!1);e.set(g);g=d?e.col:this.denormalizeCol(e.col,e.world);Array.isArray(b)?n(b,this.getXForColumn(g),this.getYForRow(e.row)):(b.x=this.getXForColumn(g),b.y=this.getYForRow(e.row));return b};return b}()})},"esri/views/2d/tiling/TileCoverage":function(){define(["require","exports","../../../core/ArrayPool","../../../core/ObjectPool","./TileSpan"],
function(p,l,q,b,n){return function(){function e(b){this.lodInfo=b;this.spans=q.acquire()}e.prototype.release=function(){for(var b=0,e=this.spans;b<e.length;b++)n.pool.release(e[b]);q.release(this.spans)};e.prototype.forEach=function(b,e){var g=this.spans,d=this.lodInfo,f=d.level;if(0!==g.length)for(var a=0;a<g.length;a++)for(var c=g[a],h=c.row,k=c.colTo,c=c.colFrom;c<=k;c++)b.call(e,f,h,d.normalizeCol(c),d.getWorldForColumn(c))};e.pool=new b(e,!0);return e}()})},"esri/views/2d/tiling/TileSpan":function(){define(["require",
"exports","../../../core/ObjectPool"],function(p,l,q){return function(){function b(b,e,k){this.row=b;this.colFrom=e;this.colTo=k}b.pool=new q(b,!0);return b}()})},"esri/views/2d/tiling/TileQueue":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/Accessor ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/vec2 ../../support/QueueProcessor".split(" "),
function(p,l,q,b,n,e,k,m,g,d){function f(a,b){a.length=0;b.forEach(function(b){return a.push(b)});return a}var a=new Set,c=[],h=new Map,x=[0,0];return function(k){function l(a){a=k.call(this,a)||this;a._keyToItem=new Map;a.concurrency=6;a.strategy="scale-first";a.tileInfoView=null;return a}q(l,k);l.prototype.initialize=function(){var a=this,b=this.concurrency,c=this.process,h="scale-first"===this.strategy?this._peekByScaleFirst.bind(this):this._peekByCenterFirst.bind(this);this._queue=new d.QueueProcessor({concurrency:b,
process:function(b,d){b=a._keyToItem.get(b);return c(b,{signal:d})},peeker:h})};l.prototype.destroy=function(){this.clear();this._queue.destroy();this._queue=null};Object.defineProperty(l.prototype,"length",{get:function(){return this._queue?this._queue.length:0},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"onGoingCount",{get:function(){return this._keyToItem.size},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"updating",{get:function(){return 0<this.length||
0<this.onGoingCount},enumerable:!0,configurable:!0});l.prototype.abort=function(a){this._queue.abort("string"===typeof a?a:a.id)};l.prototype.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};l.prototype.get=function(a){return this._queue.get("string"===typeof a?a:a.id)};l.prototype.has=function(a){return"string"===typeof a?this._keyToItem.has(a):this._keyToItem.has(a.id)};l.prototype.isOngoing=function(a){a="string"===typeof a?a:a.id;return this.has(a)&&
this._queue.isOngoing(a)};l.prototype.pause=function(){this._queue.pause()};l.prototype.push=function(a){return e(this,void 0,void 0,function(){var b,c,d,h=this;return n(this,function(e){b=a.key.id;if(this.has(b))return[2,this.get(b)];c=this._queue.push(b);d=function(){h._keyToItem.delete(b);h.notifyChange("updating")};this._keyToItem.set(b,a);c.then(d,d);this.notifyChange("updating");return[2,c]})})};l.prototype.reset=function(){this._queue.reset();this.notifyChange("updating")};l.prototype.resume=
function(){this._queue.resume()};l.prototype._peekByScaleFirst=function(b){if(!this.state)return b[0];for(var d=this.tileInfoView,e=Number.NEGATIVE_INFINITY,g=Number.POSITIVE_INFINITY,k=0;k<b.length;k++){var m=this._keyToItem.get(b[k]),n=this.tileInfoView.getTileScale(m.key);h.has(n)||(h.set(n,[]),e=Math.max(n,e),g=Math.min(n,g));h.get(n).push(m.key);a.add(n)}var r=this.state.scale;h.has(r)||(f(c,a),c.sort(),r=c.reduce(function(a,b,c,d){return Math.abs(b-r)<Math.abs(a-r)?b:a},c[0]));r=Math.min(r,
e);r=Math.max(r,g);b=h.get(r);var l=d.getClosestInfoForScale(r),x=l.getColumnForX(this.state.center[0]),q=l.getRowForY(this.state.center[1]);b.sort(function(a,b){var c=l.denormalizeCol(a.col,a.world),d=l.denormalizeCol(b.col,b.world);return Math.sqrt((x-c)*(x-c)+(q-a.row)*(q-a.row))-Math.sqrt((x-d)*(x-d)+(q-b.row)*(q-b.row))});a.clear();h.clear();return b[0].id};l.prototype._peekByCenterFirst=function(a){if(!this.state)return a[0];for(var b=this.tileInfoView,c=this.state.center,d=Number.POSITIVE_INFINITY,
h=null,e=0;e<a.length;e++){var f=this._keyToItem.get(a[e]);b.getTileCoords(x,f.key);var k=g.vec2.distance(x,c);k<d&&(d=k,h=f.key)}return h.id};b([m.property({constructOnly:!0})],l.prototype,"concurrency",void 0);b([m.property({constructOnly:!0})],l.prototype,"process",void 0);b([m.property()],l.prototype,"state",void 0);b([m.property({constructOnly:!0})],l.prototype,"strategy",void 0);b([m.property({constructOnly:!0})],l.prototype,"tileInfoView",void 0);b([m.property({readOnly:!0})],l.prototype,"updating",
null);return l=b([m.subclass("esri.views.2d.tiling.TileQueue")],l)}(m.declared(k))})},"esri/views/support/QueueProcessor":function(){define("require exports ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/maybe ../../core/promiseUtils ../../core/Queue ../../core/scheduling".split(" "),function(p,l,q,b,n,e,k,m){Object.defineProperty(l,"__esModule",{value:!0});var g=function(){return function(b,e){this.item=b;this.controller=e;this.promise=null}}();p=function(){function d(b){var a=
this;this._deferreds=new Map;this._controllers=new Map;this._processingItems=new Map;this._isPaused=!1;this._task=this._schedule=null;this.concurrency=1;b.concurrency&&(this.concurrency=b.concurrency);this._queue=new k({peeker:b.peeker});this.process=b.process;var c=b.scheduler;b.priority&&c&&(this._task=c.registerTask(b.priority,function(b){return a.update(b)},function(){return a.needsUpdate()}))}d.prototype.destroy=function(){this.clear();this._schedule&&(this._schedule.remove(),this._schedule=
null);this._task&&(this._task.remove(),this._task=null)};Object.defineProperty(d.prototype,"length",{get:function(){return this._processingItems.size+this._queue.length},enumerable:!0,configurable:!0});d.prototype.abort=function(b){(b=this._controllers.get(b))&&b.abort()};d.prototype.clear=function(){this._queue.clear();var b=[];this._controllers.forEach(function(a){return b.push(a)});this._controllers.clear();b.forEach(function(a){return a.abort()});this._processingItems.clear();this._cancelNext()};
d.prototype.get=function(b){return(b=this._deferreds.get(b))?b.promise:void 0};d.prototype.isOngoing=function(b){return this._processingItems.has(b)};d.prototype.has=function(b){return this._deferreds.has(b)};d.prototype.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};d.prototype.push=function(d){return b(this,void 0,void 0,function(){var a,b,h,f,g,k,m=this;return q(this,function(c){if(a=this.get(d))return[2,a];h=e.createAbortController();f=function(){var a=m._processingItems.get(d);
a&&a.controller.abort();g();b.reject(e.createAbortError())};g=function(){k.remove();m._deferreds.delete(d);m._controllers.delete(d);m._queue.remove(d);m._processingItems.delete(d);m._scheduleNext()};k=e.onAbortOrThrow(h.signal,f);b=e.createDeferred();this._deferreds.set(d,b);this._controllers.set(d,h);b.promise.then(g,g);this._queue.push(d);this._scheduleNext();return[2,b.promise]})})};d.prototype.reset=function(){var b=[];this._processingItems.forEach(function(a){return b.push(a)});this._processingItems.clear();
for(var a=0;a<b.length;a++){var c=b[a];this._queue.push(c.item);c.controller.abort()}this._scheduleNext()};d.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};d.prototype.needsUpdate=function(){return!this._isPaused&&0<this._queue.length&&this._processingItems.size<this.concurrency};d.prototype.update=function(b){for(;!b.done&&0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),b.madeProgress()};d.prototype._scheduleNext=
function(){var b=this;this._task||this._isPaused||this._schedule||(this._schedule=m.schedule(function(){b._schedule=null;b._next()}))};d.prototype._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};d.prototype._cancelNext=function(){this._schedule&&(this._schedule.remove(),this._schedule=null)};d.prototype._processResult=function(b,a){this._canProcessFulfillment(b)&&(this._scheduleNext(),this._deferreds.get(b.item).resolve(a))};
d.prototype._processError=function(b,a){this._canProcessFulfillment(b)&&(this._scheduleNext(),this._deferreds.get(b.item).reject(a))};d.prototype._canProcessFulfillment=function(b){return this._deferreds.get(b.item)&&this._processingItems.get(b.item)===b?!0:!1};d.prototype._process=function(b){var a=this;if(!n.isNone(b)){var c,d=e.createAbortController(),f=new g(b,d);this._processingItems.set(b,f);try{c=this.process(b,d.signal)}catch(w){this._processError(f,w)}c&&"function"===typeof c.then?(f.promise=
c,c.then(function(b){return a._processResult(f,b)},function(b){return a._processError(f,b)})):this._processResult(f,c)}};Object.defineProperty(d.prototype,"test",{get:function(){var b=this;return{update:function(a){return b.update(a)}}},enumerable:!0,configurable:!0});return d}();l.QueueProcessor=p})},"esri/core/Queue":function(){define(["require","exports"],function(p,l){return function(){function l(b){this._items=[];this._itemSet=new Set;this._peeker=function(b){return b[0]};this._length=0;b&&b.peeker&&
(this._peeker=b.peeker)}Object.defineProperty(l.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0});l.prototype.clear=function(){this._itemSet.clear();this._length=this._items.length=0};l.prototype.peek=function(){if(0!==this._length)return this._peeker(this._items)};l.prototype.push=function(b){this.contains(b)||this._add(b)};l.prototype.contains=function(b){return 0<this._length&&this._itemSet.has(b)};l.prototype.pop=function(){if(0!==this._length){var b=this.peek();
this._remove(b);return b}};l.prototype.remove=function(b){this.contains(b)&&this._remove(b)};l.prototype._add=function(b){this._items.push(b);this._itemSet.add(b);this._length++};l.prototype._remove=function(b){this._itemSet.delete(b);this._items.splice(this._items.indexOf(b),1);this._length--};return l}()})},"esri/views/2d/tiling/TileStrategy":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./TileKey"],function(p,l,q,b){var n=new b(0,0,0,0),e=new Map,k=[],m=[];return function(){function b(b){this._previousScale=
Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";this.resampling=!0;this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=b.acquireTile;this.releaseTile=b.releaseTile;this.tileInfoView=b.tileInfoView;this.resampling=null==b.resampling||!!b.resampling;b.cachePolicy&&(this.cachePolicy=b.cachePolicy);b.coveragePolicy&&(this.coveragePolicy=b.coveragePolicy);null!=b.buffer&&(this.buffer=b.buffer)}b.prototype.destroy=function(){this.tileIndex.clear()};b.prototype.update=
function(b){var d=this,a=this.resampling,c=this.tileIndex,h=this.tileInfoView.getTileCoverage(b.state,this.buffer,this.coveragePolicy);m.length=0;k.length=0;e.clear();if(h){var g=this.tileInfoView.tileInfo,l=g.minScale,q=g.maxScale,g=h.spans,r=h.lodInfo,p=r.level,t=b.state.scale,y=!b.stationary&&t>this._previousScale;this._previousScale=t;this.tiles.length=0;if(!a&&(t>l||t<q))return this.tiles.length=0,e.clear(),c.forEach(function(a){d.releaseTile(a)}),c.clear(),m.length=0,k.length=0,e.clear(),!0;
c.forEach(function(a){return a.visible=!0});q=l=0;if(0<g.length)for(t=0;t<g.length;t++){b=g[t];for(var E=b.row,u=b.colTo,C=b.colFrom;C<=u;C++)l++,b=n.set(p,E,r.normalizeCol(C),r.getWorldForColumn(C)).id,c.has(b)?(a=c.get(b),a.isReady?(e.set(b,a),q++):y||this._addParentTile(b,e)):(a=this.acquireTile(n),this.tileIndex.set(b,a),y||this._addParentTile(b,e))}var z=q===l;c.forEach(function(a,b){n.set(b);if(!e.has(b)){var c=d.tileInfoView.intersects(h,n);!c||!y&&z?"purge"===d.cachePolicy?n.level===p&&c||
k.push(b):(n.level>p||!c)&&k.push(b):a.isReady?m.push(b):n.level>p&&k.push(b)}});for(g=0;g<m.length;g++)b=m[g],(a=c.get(b))&&a.isReady&&e.set(b,a);for(g=0;g<k.length;g++)b=k[g],a=c.get(b),this.releaseTile(a),c["delete"](b);e.forEach(function(a){return d.tiles.push(a)});c.forEach(function(a){e.has(a.key.id)||(a.visible=!1)});return z}};b.prototype.clear=function(){var b=this,e=this.tileIndex;e.forEach(function(a){b.releaseTile(a)});e.clear()};b.prototype._addParentTile=function(b,e){for(var a=null;;){b=
this.tileInfoView.getTileParentId(b);if(!b)break;if(this.tileIndex.has(b)&&(a=this.tileIndex.get(b))&&a.isReady){e.has(a.key.id)||e.set(a.key.id,a);break}}};return b}()})},"esri/views/2d/input/MapViewInputManager":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/Handles ../../../core/watchUtils ../../../core/accessorSupport/decorators ./handlers/DoubleClickZoom ./handlers/DragPan ./handlers/DragRotate ./handlers/GamepadNavigation ./handlers/KeyPan ./handlers/KeyRotate ./handlers/KeyZoom ./handlers/MouseWheelZoom ./handlers/PinchAction ../../input/BrowserEventSource ../../input/InputManager ../../input/ViewEvents ../../input/handlers/PreventContextMenu".split(" "),
function(p,l,q,b,n,e,k,m,g,d,f,a,c,h,x,w,v,r,B,t,y){var E={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},u={zoomIn:["\x3d","+"],zoomOut:["-","_"]},C={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};return function(l){function n(){var a=null!==l&&l.apply(this,arguments)||this;a._handles=new e;return a}q(n,l);n.prototype.initialize=function(){var a=this;this.viewEvents=new t.ViewEvents(this.view);
this._handles.add([k.whenNot(this.view,"ready",function(){return a._disconnect()}),k.when(this.view,"ready",function(){return a._connect()})])};n.prototype.destroy=function(){this._handles&&(this._handles.removeAll(),this._handles=null);this._disconnect();this.viewEvents.destroy();this.viewEvents=null};n.prototype._disconnect=function(){this._inputManager&&(this.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)};n.prototype._connect=
function(){var b=new r.BrowserEventSource(this.view.surface,this.view.input),e=new B.InputManager(b);e.installHandlers("prevent-context-menu",[new y.PreventContextMenu]);e.installHandlers("navigation",[new v.PinchRotateAndZoom(this.view),new a.GamepadNavigation(this.view),new w.MouseWheelZoom(this.view),new g.DoubleClickZoom(this.view),new d.DragPan(this.view,"primary"),new c.KeyPan(this.view,E),new x.KeyZoom(this.view,u),new h.KeyRotate(this.view,C),new f.DragRotate(this.view,"secondary"),new g.DoubleClickZoom(this.view,
["Ctrl"])]);this.viewEvents.connect(e);this._source=b;this._inputManager=e};Object.defineProperty(n.prototype,"debug",{get:function(){return{inputManager:this._inputManager}},enumerable:!0,configurable:!0});b([m.property()],n.prototype,"view",void 0);return n=b([m.subclass("esri.views.2d.input.MapViewInputManager")],n)}(m.declared(n))})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler","../../../input/handlers/support"],
function(p,l,q,b,n){Object.defineProperty(l,"__esModule",{value:!0});p=function(b){function e(e,g){var d=b.call(this,!0)||this;d.view=e;d.registerIncoming("double-click",g,function(b){return d._handleDoubleClick(b,g)});return d}q(e,b);e.prototype._handleDoubleClick=function(b,e){n.eventMatchesPointerAction(b.data,"primary")&&(b.stopPropagation(),e?this.view.mapViewNavigation.zoomOut([b.data.x,b.data.y]):this.view.mapViewNavigation.zoomIn([b.data.x,b.data.y]))};return e}(b.InputHandler);l.DoubleClickZoom=
p})},"esri/views/2d/input/handlers/DragPan":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../input/DragEventSeparator ../../../input/InputHandler ../../../input/handlers/support".split(" "),function(p,l,q,b,n,e){Object.defineProperty(l,"__esModule",{value:!0});p=function(k){function m(g,d,f){var a=k.call(this,!0)||this;a.view=g;a.pointerAction=d;a.registerIncoming("drag",f,function(b){return a._handleDrag(b)});a.registerIncoming("pointer-down",function(b){return a.stopMomentumNavigation()});
var c=a.view.mapViewNavigation;a.dragEventSeparator=new b.DragEventSeparator({start:function(b,d){c.pan.begin(a.view,d.data);d.stopPropagation()},update:function(b,d){c.pan.update(a.view,d.data);d.stopPropagation()},end:function(b,d){c.pan.end(a.view,d.data);d.stopPropagation()},condition:function(b,c){return 1===b&&e.eventMatchesPointerAction(c.data,a.pointerAction)}});return a}q(m,k);m.prototype._handleDrag=function(b){var d=this.view.mapViewNavigation;d.pinch.zoomMomentum||d.pinch.rotateMomentum?
this.stopMomentumNavigation():this.dragEventSeparator.handle(b)};m.prototype.stopMomentumNavigation=function(){this.view.mapViewNavigation.pan.stopMomentumNavigation()};return m}(n.InputHandler);l.DragPan=p})},"esri/views/2d/input/handlers/DragRotate":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../input/DragEventSeparator ../../../input/InputHandler ../../../input/handlers/support".split(" "),function(p,l,q,b,n,e){Object.defineProperty(l,"__esModule",{value:!0});
p=function(k){function m(g,d,f){var a=k.call(this,!0)||this;a.view=g;a.pointerAction=d;var c=a.view.mapViewNavigation;a.dragEventSeparator=new b.DragEventSeparator({start:function(b,d){c.rotate.begin(a.view,d.data);d.stopPropagation()},update:function(b,d){c.rotate.update(a.view,d.data);d.stopPropagation()},end:function(b,d){c.rotate.end(a.view,d.data);d.stopPropagation()},condition:function(b,c){return 1===b&&e.eventMatchesPointerAction(c.data,a.pointerAction)}});a.registerIncoming("drag",f,function(b){return a.dragEventSeparator.handle(b)});
return a}q(m,k);return m}(n.InputHandler);l.DragRotate=p})},"esri/views/2d/input/handlers/GamepadNavigation":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/Handles ../../../../core/scheduling ../../../../core/watchUtils ../../viewpointUtils ../../../input/InputHandler ../../../navigation/gamepadAndKeyboardUtils".split(" "),function(p,l,q,b,n,e,k,m,g){Object.defineProperty(l,"__esModule",{value:!0});p=function(c){function h(a){var d=c.call(this,!0)||this;
d.view=a;d.frameTask=null;d.watchHandles=new b;d.currentDevice=null;d.transformation={translation:[0,0,0],heading:0,tilt:0};d.handle=d.registerIncoming("gamepad",function(a){return d.handleEvent(a)});d.handle.pause();return d}q(h,c);h.prototype.onInstall=function(a){var b=this;c.prototype.onInstall.call(this,a);this.watchHandles.add([e.init(this.view.navigation.gamepad,"enabled",function(a){a?(b.handle.resume(),b.frameTask||(b.frameTask=n.addFrameTask({update:function(a){return b.frameUpdate(a.deltaTime)}}))):
(b.handle.pause(),b.frameTask&&(b.frameTask.remove(),b.frameTask=null))})])};h.prototype.onUninstall=function(){this.watchHandles.removeAll();this.frameTask&&(this.frameTask.remove(),this.frameTask=null);c.prototype.onUninstall.call(this)};h.prototype.handleEvent=function(a){var b=this.view.navigation.gamepad.device;b&&a.data.device!==b||this.currentDevice&&this.currentDevice!==a.data.device||("end"===a.data.action?(this.currentDevice=null,g.resetTransformation(this.transformation)):(this.currentDevice=
a.data.device,g.extractTransformation(a.data,this.view.navigation.gamepad,this.transformation)))};h.prototype.frameUpdate=function(b){var c=this.transformation;if(!g.isZeroTransformation(c)){var e=this.view.viewpoint.clone(),h=f*this.view.navigation.gamepad.velocityFactor*b;k.translateBy(e,e,[c.translation[0]*h,-c.translation[1]*h]);h=this.view.size;k.scaleAndRotateBy(e,e,1+c.translation[2]*a*b,this.view.constraints.rotationEnabled?-c.heading*d*b:0,[h[0]/2,h[1]],h);b=this.view.constraints.constrain(e,
this.view.viewpoint);this.view.viewpoint=b}};return h}(m.InputHandler);l.GamepadNavigation=p;var d=.06,f=.7,a=6E-4})},"esri/views/2d/input/handlers/KeyPan":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(p,l,q,b){Object.defineProperty(l,"__esModule",{value:!0});p=function(b){function e(e,m,g){var d,f=b.call(this,!0)||this;f.view=e;f.keys=m;f._pressed=!1;f._keyMap=(d={},d[m.left]="left",d[m.right]="right",d[m.up]="up",d[m.down]=
"down",d);f.registerIncoming("key-down",g,function(a){return f._handleKeyDown(a)});f.registerIncoming("key-up",g,function(a){return f._handleKeyUp(a)});f.registerIncoming("blur",g,function(){return f._handleBlur()});return f}q(e,b);e.prototype._handleKeyDown=function(b){b.data.repeat||this._handleKey(b,!0)};e.prototype._handleKeyUp=function(b){this._handleKey(b,!1)};e.prototype._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};e.prototype._handleKey=function(b,
e){var g=this._keyMap[b.data.key];if(this._pressed=null!=g){if(e)switch(g){case "left":this.view.mapViewNavigation.continousPanLeft();break;case "right":this.view.mapViewNavigation.continousPanRight();break;case "up":this.view.mapViewNavigation.continousPanUp();break;case "down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();b.stopPropagation()}};return e}(b.InputHandler);l.KeyPan=p})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["require",
"exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(p,l,q,b){Object.defineProperty(l,"__esModule",{value:!0});p=function(b){function e(e,m,g){var d,f=b.call(this,!0)||this;f.view=e;f.keys=m;f._pressed=!1;f._keyToDirection=(d={},d[m.clockwiseOption1]="clockwise",d[m.clockwiseOption2]="clockwise",d[m.counterClockwiseOption1]="counterClockwise",d[m.counterClockwiseOption2]="counterClockwise",d[m.resetOption1]="reset",d[m.resetOption2]="reset",d);f.registerIncoming("key-down",
g,function(a){return f._handleKeyDown(a)});f.registerIncoming("key-up",g,function(a){return f._handleKeyUp(a)});f.registerIncoming("blur",g,function(){return f._handleBlur()});return f}q(e,b);e.prototype._handleKeyDown=function(b){b.data.repeat||this._handleKey(b,!0)};e.prototype._handleKeyUp=function(b){this._handleKey(b,!1)};e.prototype._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};e.prototype._handleKey=function(b,e){var g=b.modifiers;if(!(0<g.size&&
!g.has("Shift")||!this.view.constraints.rotationEnabled)&&(g=this._keyToDirection[b.data.key],this._pressed=null!=g)){if(e)switch(g){case "clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case "counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case "reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();b.stopPropagation()}};return e}(b.InputHandler);l.KeyRotate=p})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["require",
"exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(p,l,q,b){Object.defineProperty(l,"__esModule",{value:!0});p=function(b){function e(e,m,g){var d=b.call(this,!0)||this;d.view=e;d.keys=m;d._keysToZoomAction={};d.registerIncoming("key-down",g,function(b){return d._handleKeyDown(b)});m.zoomIn.forEach(function(b){return d._keysToZoomAction[b]=0});m.zoomOut.forEach(function(b){return d._keysToZoomAction[b]=1});return d}q(e,b);e.prototype._handleKeyDown=function(b){this._handleKey(b)};
e.prototype._handleKey=function(b){var e=b.modifiers;0<e.size&&!e.has("Shift")||(e=this._keysToZoomAction[b.data.key],0===e?(this.view.mapViewNavigation.zoomIn(),b.stopPropagation()):1===e&&(this.view.mapViewNavigation.zoomOut(),b.stopPropagation()))};return e}(b.InputHandler);l.KeyZoom=p})},"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(p,l,q,b){Object.defineProperty(l,"__esModule",
{value:!0});p=function(b){function e(e,m){var g=b.call(this,!0)||this;g.view=e;g._canZoom=!0;g.registerIncoming("mouse-wheel",m,function(b){return g._handleMouseWheel(b)});return g}q(e,b);e.prototype._handleMouseWheel=function(b){var e=this;if(this._canZoom){var g=this.view.mapViewNavigation,d=b.data;if(d=g.zoom(1/Math.pow(.6,1/60*d.deltaY),[d.x,d.y]))this._canZoom=!1,d.catch(function(b){}).then(function(){e._canZoom=!0;g.end()});b.stopPropagation()}};return e}(b.InputHandler);l.MouseWheelZoom=p})},
"esri/views/2d/input/handlers/PinchAction":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/DragEventSeparator","../../../input/InputHandler"],function(p,l,q,b,n){Object.defineProperty(l,"__esModule",{value:!0});p=function(e){function k(k){var g=e.call(this,!0)||this;g.view=k;g.registerIncoming("drag",function(b){return g._handleDrag(b)});g.registerIncoming("pointer-down",function(b){return g.stopMomentumNavigation()});var d=g.view.mapViewNavigation;
g.dragEventSeparator=new b.DragEventSeparator({start:function(b,a){d.pinch.begin(g.view,a.data);a.stopPropagation()},update:function(b,a){d.pinch.update(g.view,a.data);a.stopPropagation()},end:function(b,a){d.pinch.end(g.view,a.data);a.stopPropagation()},condition:function(b){return 2<=b}});return g}q(k,e);k.prototype._handleDrag=function(b){this.dragEventSeparator.handle(b)};k.prototype.stopMomentumNavigation=function(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()};return k}(n.InputHandler);
l.PinchRotateAndZoom=p})},"esri/views/2d/support/HighlightOptions":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Color ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(p,l,q,b,n,e,k){return function(e){function g(){var b=null!==e&&e.apply(this,arguments)||this;b.color=new n([0,255,255]);b.haloOpacity=1;b.fillOpacity=.25;return b}q(g,e);b([k.property({type:n})],g.prototype,"color",
void 0);b([k.property()],g.prototype,"haloOpacity",void 0);b([k.property()],g.prototype,"fillOpacity",void 0);return g=b([k.subclass("esri.views.2d.support.HighlightOptions")],g)}(k.declared(e))})},"esri/views/ui/2d/DefaultUI2D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../DefaultUI".split(" "),function(p,l,q,b,n,e){return function(e){function k(b){b=e.call(this)||this;b.components=
["attribution","zoom"];return b}q(k,e);b([n.property()],k.prototype,"components",void 0);return k=b([n.subclass("esri.views.ui.2d.DefaultUI2D")],k)}(n.declared(e))})},"esri/widgets/Search/LocatorSearchSource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../core/lang ../../core/accessorSupport/decorators ../../tasks/Locator ./SearchSource ./support/locatorUtils".split(" "),function(p,l,q,b,n,e,
k,m,g,d){return function(f){function a(){var a=null!==f&&f.apply(this,arguments)||this;a.categories=null;a.countryCode=null;a.locator=null;a.locationType=null;a.name="";a.placeholder="";a.searchTemplate="";a.singleLineFieldName=null;a.suggestionsEnabled=null;a.zoomScale=null;a.getResults=function(b){return d.getResults(n({source:a},b))};a.getSuggestions=function(b){return d.getSuggestions(n({source:a},b))};return a}q(a,f);c=a;a.prototype.readLocator=function(a,b){return(a=b.url)?new m({url:a}):null};
a.prototype.writeLocator=function(a,b){b.url=a?a.url:null};a.prototype.clone=function(){return new c({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?e.clone(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,
searchExtent:this.searchExtent?this.searchExtent.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?e.clone(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,locator:this.locator,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})};var c;b([k.property()],a.prototype,"categories",void 0);b([k.property()],a.prototype,"countryCode",
void 0);b([k.property({type:m})],a.prototype,"locator",void 0);b([k.reader("locator",["url"])],a.prototype,"readLocator",null);b([k.writer("locator")],a.prototype,"writeLocator",null);b([k.property()],a.prototype,"locationType",void 0);b([k.property({json:{write:!0}})],a.prototype,"name",void 0);b([k.property({json:{write:!0}})],a.prototype,"placeholder",void 0);b([k.property()],a.prototype,"searchTemplate",void 0);b([k.property({json:{write:!0}})],a.prototype,"singleLineFieldName",void 0);b([k.property({json:{read:{source:"suggest"},
write:{target:"suggest"}}})],a.prototype,"suggestionsEnabled",void 0);b([k.property({json:{write:!0}})],a.prototype,"zoomScale",void 0);return a=c=b([k.subclass("esri.widgets.Search.LocatorSearchSource")],a)}(k.declared(g))})},"esri/tasks/Locator":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../request ../core/accessorSupport/decorators ../geometry/SpatialReference ./Task ./support/AddressCandidate".split(" "),
function(p,l,q,b,n,e,k,m,g,d){return function(f){function a(a){a=f.call(this,a)||this;a.outSpatialReference=null;a.url=null;return a}q(a,f);a.prototype.addressToLocations=function(a,b){var c=a.address,d=a.categories,h=a.countryCode,f=a.forStorage,g=a.location,k=a.locationType,m=a.magicKey,l=a.maxLocations,q=a.outFields;a=a.searchExtent;var p=g?g.clone().normalize():null,z=a?a.shiftCentralMeridian():null,D=this.outSpatialReference,g=this.parsedUrl;a=this.requestOptions;d={f:"json",outSR:D?JSON.stringify(D.toJSON()):
null,outFields:q?q.join(","):null,searchExtent:z?JSON.stringify(z.toJSON()):null,category:d?d.join(","):null,countryCode:h||null,magicKey:m||null,location:p,locationType:k||null,maxLocations:l||null,forStorage:f||null};c={query:this._encode(n({},g.query,c,d))};b=n({},a,b,c);return e(g.path+"/findAddressCandidates",b).then(this._handleAddressToLocationsResponse)};a.prototype.suggestLocations=function(a,b){var c=this.parsedUrl,d=this.requestOptions,h=a.location,f=a.searchExtent,h=h?h.clone().normalize():
null,f=f?f.shiftCentralMeridian():null;a={f:"json",text:a.text,maxSuggestions:a.maxSuggestions,searchExtent:f?JSON.stringify(f.toJSON()):null,category:a.categories?a.categories.join(","):null,countryCode:a.countryCode||null,location:h};a={query:this._encode(n({},c.query,a))};b=n({},d,b,a);return e(c.path+"/suggest",b).then(this._handleSuggestLocationsResponse)};a.prototype.addressesToLocations=function(a,b){var c=this.outSpatialReference,d=this.parsedUrl,h=this.requestOptions,f=a.addresses,g=a.categories,
k=a.locationType;a=a.countryCode;var m=[];Array.isArray(f)&&f.forEach(function(a){m.push({attributes:a})});c={category:g?g.join(","):null,sourceCountry:a||null,addresses:JSON.stringify({records:m}),locationType:k||null,f:"json",outSR:c?JSON.stringify(c):null};c={query:this._encode(n({},d.query,c))};b=n({},h,b,c);return e(d.path+"/geocodeAddresses",b).then(this._handleAddressesToLocationsResponse)};a.prototype.locationToAddress=function(a,b){var c=a.locationType,d=(a=a.location)?a.clone().normalize():
null,h="undefined"!==typeof d,f=this.outSpatialReference;a=this.parsedUrl;var g=this.requestOptions,c={outSR:f?JSON.stringify(f.toJSON()):null,location:h?JSON.stringify(d.toJSON()):null,locationType:c||null,f:"json"},c={query:this._encode(n({},a.query,c))};b=n({},g,b,c);return e(a.path+"/reverseGeocode",b).then(this._handleLocationToAddressResponse)};a.prototype._handleAddressToLocationsResponse=function(a){a=a.data;if(!a)return[];var b=a.candidates,c=a.spatialReference;return b?b.map(function(a){if(a){var b=
a.extent,e=a.location,h=b?b&&"number"===typeof b.xmin&&"number"===typeof b.ymin&&"number"===typeof b.xmax&&"number"===typeof b.ymax:!0;if(e&&"number"===typeof e.x&&"number"===typeof e.y&&h)return b&&(b.spatialReference=c),e.spatialReference=c,d.fromJSON(a)}}):[]};a.prototype._handleSuggestLocationsResponse=function(a){return(a=a.data)?a.suggestions||[]:[]};a.prototype._handleAddressesToLocationsResponse=function(a){a=a.data;if(!a)return[];var b=a.locations,c=a.spatialReference;return b?b.map(function(a){var b=
a.location;b&&(b.spatialReference=c);return d.fromJSON(a)}):[]};a.prototype._handleLocationToAddressResponse=function(a){if(a=a.data){var b=a.address;return d.fromJSON({address:b&&b.Match_addr||"",attributes:b||{},location:a.location,score:100})}};b([k.property({type:m})],a.prototype,"outSpatialReference",void 0);b([k.property()],a.prototype,"url",void 0);return a=b([k.subclass("esri.tasks.Locator")],a)}(k.declared(g))})},"esri/tasks/support/AddressCandidate":function(){define(["../../core/JSONSupport",
"../../geometry/Extent","../../geometry/Point"],function(p,l,q){return p.createSubclass({declaredClass:"esri.tasks.support.AddressCandidate",properties:{address:{value:null,json:{write:!0}},attributes:{value:null,json:{write:!0}},extent:{value:null,type:l,json:{write:!0}},location:{value:null,type:q,json:{write:!0}},score:{value:null,json:{write:!0}}}})})},"esri/widgets/Search/support/locatorUtils":function(){define("require exports ../../../Graphic ../../../core/maybe ../../../core/promiseUtils ./geometryUtils".split(" "),
function(p,l,q,b,n,e){function k(a){var b=a.source,d=a.spatialReference,e=a.location,g=a.sourceIndex,k=a.view;a=b.locator;var m=b.zoomScale,l=k&&k.scale;d&&(a.outSpatialReference=d);return a.locationToAddress({location:e}).then(function(a){return f([a],{sourceIndex:g,scale:l,view:k,zoomScale:m})})}function m(a,b){var c=a.filter,d=a.searchExtent;a=a.withinViewEnabled;var f=b&&b.extent;return(b=e.createExtentFromGeometry(c&&c.geometry,b,b&&b.scale))||d||(a&&f?f:void 0)}function g(a){var c=a.source,
d=a.suggestResult,e=a.spatialReference,g=a.view,k=a.maxResults,l=a.sourceIndex,q=c&&c.zoomScale;a=d.text.trim();if(!a)return n.resolve();a=""+(!d.key&&c.prefix?c.prefix:"")+a+(!d.key&&c.suffix?c.suffix:"");var p={},y=c.locator,E=g&&g.scale,u=m(c,g);if(!y)return n.resolve();c.categories&&(p.categories=c.categories);c.locationType&&(p.locationType=c.locationType);e&&(y.outSpatialReference=e);if(e=g&&g.get("extent.center"))p.location=e;p.maxLocations=k;u&&(p.searchExtent=b.unwrap(u));c.countryCode&&
(p.countryCode=c.countryCode);var C=d.key;C&&(p.magicKey=C);p.address={};p.address[c.singleLineFieldName||"Single Line Input"]=a;c.outFields&&(p.outFields=c.outFields);return y.addressToLocations(p).then(function(a){return f(a,{key:C,scale:E,sourceIndex:l,view:g,zoomScale:q})})}function d(a,b){return a.map(function(a){return{text:a.text,key:a.magicKey,sourceIndex:b}})}function f(a,b){return a.map(function(a){var c=b.key,d=b.scale,h=b.sourceIndex,f=b.view,g=b.zoomScale,k=a.extent,m=a.location,l=a.address;
a=new q({geometry:m,attributes:a.attributes});d=e.createExtentFromGeometry(k||m,f,d);f=g?e.scaleExtent(d,f,g):d;m=m?m.x+","+m.y:"";return{extent:f,feature:a,key:c,name:l||m,sourceIndex:h}})}Object.defineProperty(l,"__esModule",{value:!0});l.getResults=function(a){return a.location?k(a):g(a)};l.getSuggestions=function(a){var c=a.source,e=a.spatialReference,f=a.view,g=a.suggestTerm,k=a.maxSuggestions,l=a.sourceIndex;a={};var p=c.locator,q=m(c,f);if(!p)return n.resolve();c.categories&&(a.categories=
c.categories);p.outSpatialReference=e;if(e=f&&f.get("extent.center"))a.location=e;g=g.trim();if(!g)return n.resolve();e=c.prefix;f=c.suffix;a.text=""+(void 0===e?"":e)+g+(void 0===f?"":f);q&&(a.searchExtent=b.unwrap(q));a.maxSuggestions=k;c.countryCode&&(a.countryCode=c.countryCode);return p.suggestLocations(a).then(function(a){return d(a,l)})};l.isArcGISWorldGeocoder=function(a){return a?/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(a)||/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/gi.test(a):
!1}})},"esri/layers/SceneLayer":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../PopupTemplate ../renderers ../request ../core/asyncUtils ../core/Error ../core/Logger ../core/maybe ../core/promiseUtils ../core/urlUtils ../core/watchUtils ../core/accessorSupport/decorators ../core/accessorSupport/PropertyOrigin ../core/accessorSupport/utils ./FeatureLayer ./Layer ./mixins/ScaleRangeLayer ./mixins/SceneService ./support/commonProperties ./support/commonProperties ./support/FeatureReduction ./support/FeatureReductionSelection ./support/fieldProperties ./support/FieldsIndex ./support/fieldUtils ./support/I3SLayerDefinitions ./support/LabelClass ./support/labelingInfo ./support/RangeInfo ../portal/PortalItem ../renderers/support/jsonUtils ../renderers/support/styleUtils ../support/popupUtils ../tasks/support/Query".split(" "),
function(p,l,q,b,n,e,k,m,g,d,f,a,c,h,x,w,v,r,B,t,y,E,u,C,z,D,N,H,A,I,O,P,V,L,T,M,G,R,S,F){function J(a,b,c){a&&((a=G.read(a,b,c)||void 0)||K.error("Failed to create renderer",{rendererDefinition:a,layer:this,context:c}));return a}var Q=["3DObject","Point"],K=c.getLogger("esri.layers.SceneLayer"),U=A.defineFieldProperties(),W={"mesh-pyramids":"mesh-pyramids",meshpyramids:"mesh-pyramids","features-meshes":"mesh-pyramids",points:"points","features-points":"points",lines:"lines","features-lines":"lines",
polygons:"polygons","features-polygons":"polygons"},X={"mesh-pyramids":"mesh",points:"point",lines:"polyline",polygons:"polygon"};return function(c){function l(a,b){a=c.call(this)||this;a.featureReduction=null;a.rangeInfos=null;a.operationalLayerType="ArcGISSceneServiceLayer";a.type="scene";a.fields=null;a.outFields=null;a.nodePages=null;a.materialDefinitions=null;a.textureSetDefinitions=null;a.geometryDefinitions=null;a.definitionExpression=null;a.path=null;a.labelsVisible=!0;a.labelingInfo=null;
a.legendEnabled=!0;a.cachedDrawingInfo={color:!1};a.popupEnabled=!0;a.popupTemplate=null;a.objectIdField=null;a.objectIdFilter=null;a._fieldUsageInfo={};a.screenSizePerspectiveEnabled=!0;return a}b(l,c);l.prototype.normalizeCtorArgs=function(a,b){return"string"===typeof a?q({url:a},b):a};l.prototype.getField=function(a){return this.fieldsIndex.get(a)};l.prototype.getFieldDomain=function(a){return(a=this.getField(a))&&a.domain?a.domain:null};Object.defineProperty(l.prototype,"fieldsIndex",{get:function(){return new I(this.fields)},
enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"elevationInfo",{set:function(a){this._set("elevationInfo",a);this.loaded&&this._validateElevationInfo()},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"geometryType",{get:function(){return X[this.profile]||"mesh"},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"renderer",{set:function(a){O.fixRendererFields(a,this.fields);this._set("renderer",a)},enumerable:!0,configurable:!0});l.prototype.readCachedDrawingInfo=
function(a,b){if(null==a||"object"!==typeof a)a={};null==a.color&&(a.color=!1);return a};Object.defineProperty(l.prototype,"defaultPopupTemplate",{get:function(){return this.associatedLayer||this.attributeStorageInfo?this.createPopupTemplate():null},enumerable:!0,configurable:!0});l.prototype.readObjectIdField=function(a,b){!a&&b.fields&&b.fields.some(function(b){"esriFieldTypeOID"===b.type&&(a=b.name);return!!a});return a||void 0};l.prototype.readProfile=function(a,b){a=b.store.profile;if(null!=
a&&W[a])return W[a];K.error("Unknown or missing profile",{profile:a,layer:this});return"mesh-pyramids"};l.prototype.load=function(a){var b=this,c=h.isSome(a)?a.signal:null;a=f.safeCast(this.loadFromPortal({supportedTypes:["Scene Service"]},a)).then(function(){return f.safeCast(b._fetchService(c))},function(){return f.safeCast(b._fetchService(c))}).then(function(){return x.all([b._verifyRootNodeAndUpdateExtent(c),b._setAssociatedFeatureLayer(c)])}).then(function(){return b._validateElevationInfo()}).then(function(){return b._applyAssociatedLayerOverrides()}).then(function(){return b._populateFieldUsageInfo()}).then(function(){return R.loadStyleRenderer(b,
{origin:"service"},c)}).then(function(){return O.fixRendererFields(b.renderer,b.fields)});this.addResolvingPromise(a);return this.when()};l.prototype.importLayerViewModule=function(b){return k(this,void 0,void 0,function(){return e(this,function(c){return"2d"===b.type?[2,x.reject(new a("scene-layer:view-not-supported","SceneLayer is only supported in 3D"))]:null==this.profile||"mesh-pyramids"===this.profile?[2,x.create(function(a){return p(["../views/3d/layers/SceneLayerView3D"],a)})]:[2,x.create(function(a){return p(["../views/3d/layers/SceneLayerGraphicsView3D"],
a)})]})})};l.prototype.createQuery=function(){var a=new F;"mesh"!==this.geometryType&&(a.returnGeometry=!0,a.returnZ=!0);a.where=this.definitionExpression||"1\x3d1";a.sqlFormat="standard";return a};l.prototype.queryExtent=function(a,b){var c=this;return this._getAssociatedLayerForQuery().then(function(d){return d.queryExtent(a||c.createQuery(),b)})};l.prototype.queryFeatureCount=function(a,b){var c=this;return this._getAssociatedLayerForQuery().then(function(d){return d.queryFeatureCount(a||c.createQuery(),
b)})};l.prototype.queryFeatures=function(a,b){var c=this;return this._getAssociatedLayerForQuery().then(function(d){return d.queryFeatures(a||c.createQuery(),b)}).then(function(a){if(a&&a.features)for(var b=0,d=a.features;b<d.length;b++){var e=d[b];e.layer=c;e.sourceLayer=c}return a})};l.prototype.queryObjectIds=function(a,b){var c=this;return this._getAssociatedLayerForQuery().then(function(d){return d.queryObjectIds(a||c.createQuery(),b)})};l.prototype.getFieldUsageInfo=function(a){var b={supportsLabelingInfo:!1,
supportsRenderer:!1,supportsPopupTemplate:!1,supportsLayerQuery:!1};return this.loaded?this._fieldUsageInfo[a]||b:(K.error("#getFieldUsageInfo()","Unavailable until layer is loaded"),b)};l.prototype.createPopupTemplate=function(a){return S.createPopupTemplate(this,a)};l.prototype._getAssociatedLayerForQuery=function(){var b=this;if(!this.loaded)return this.load().then(function(){return b._getAssociatedLayerForQuery()});var c=this.associatedLayer;return null!=c?x.resolve(c):x.reject(new a("scenelayer:query-not-available",
"SceneLayer queries are not available without associated feature layer"))};l.prototype.hasCachedStatistics=function(a){return null!=this.statisticsInfo&&this.statisticsInfo.some(function(b){return b.name===a})};l.prototype.queryCachedStatistics=function(b){if(!this.hasCachedStatistics(b))return x.reject(new a("scenelayer:no-cached-statistics","Cached statistics for this attribute are not available"));for(var c=0,e=this.statisticsInfo;c<e.length;c++){var h=e[c];if(h.name===b)return b=w.join(this.parsedUrl.path,
h.href),d(b,{query:{f:"json"},responseType:"json"}).then(function(a){return a.data})}};l.prototype._validateLayer=function(b){if(b.layerType&&-1===Q.indexOf(b.layerType))throw new a("scenelayer:layer-type-not-supported","SceneLayer does not support this layer type",{layerType:b.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor))throw new a("layer:service-version-not-supported","Service version is not supported.",{serviceVersion:this.version.versionString,supportedVersions:"1.x"});
if(1<this.version.major)throw new a("layer:service-version-too-new","Service version is too new.",{serviceVersion:this.version.versionString,supportedVersions:"1.x"});b=this.normalReferenceFrame;var c=this.spatialReference,d=!1,e=!1;if(null==b)e=d=!0;else switch(c=c&&c.isGeographic,b){case "east-north-up":case "earth-centered":d=!0;e=c;break;case "vertex-reference-frame":d=!0;e=!c;break;default:d=!1}if(!d)throw new a("scenelayer:unsupported-normal-reference-frame","Normal reference frame is invalid.");
if(!e)throw new a("scenelayer:incompatible-normal-reference-frame","Normal reference frame is incompatible with layer spatial reference.");};l.prototype._populateFieldUsageInfo=function(){this._fieldUsageInfo={};if(this.fields)for(var a=function(a){var c=!(!b.attributeStorageInfo||!b.attributeStorageInfo.some(function(b){return b.name===a.name})),d=!!(b.associatedLayer&&b.associatedLayer.fields&&b.associatedLayer.fields.some(function(b){return b&&a.name===b.name}));b._fieldUsageInfo[a.name]={supportsLabelingInfo:c,
supportsRenderer:c,supportsPopupTemplate:c||d,supportsLayerQuery:d}},b=this,c=0,d=this.fields;c<d.length;c++)a(d[c])};l.prototype._applyAssociatedLayerOverrides=function(){if(this.associatedLayer){if(this.associatedLayer.fields){for(var a=null,b=0,c=this.associatedLayer.fields;b<c.length;b++){var d=c[b];this.getField(d.name)||(a||(a=this.fields?this.fields.slice():[]),a.push(d.clone()))}a&&this._set("fields",a)}a=["popupTemplate","popupEnabled"];b=t.getProperties(this);for(c=0;c<a.length;c++)d=a[c],
this._buddyIsMoreImportant(d)&&(b.setDefaultOrigin(this.associatedLayer.originOf(d)),b.set(d,this.associatedLayer[d]),b.setDefaultOrigin("user"))}};l.prototype._setAssociatedFeatureLayer=function(a){return k(this,void 0,void 0,function(){var b;return e(this,function(c){switch(c.label){case 0:return[4,this._fetchAssociatedFeatureLayer(a)];case 1:return this.associatedLayer=b=c.sent(),[2]}})})};l.prototype._fetchAssociatedFeatureLayer=function(a){return k(this,void 0,void 0,function(){var b;return e(this,
function(c){switch(c.label){case 0:if(-1===["mesh-pyramids","points"].indexOf(this.profile))return[2,null];c.label=1;case 1:return c.trys.push([1,4,,5]),[4,this.portalItem&&this.portalItem.isResolved()?this._fetchAssociatedFeatureLayerFromRelatedItems(this.portalItem,a):this._fetchAssociatedFeatureLayerFromUrl(a)];case 2:return b=c.sent(),[4,b.load({signal:a})];case 3:return[2,c.sent()];case 4:return c.sent(),this._logWarningOnPopupEnabled(),[2,null];case 5:return[2]}})})};l.prototype._logWarningOnPopupEnabled=
function(){var a=this;v.whenValidOnce(this,["popupTemplate","popupEnabled"],function(){return a.popupEnabled&&null!=a.popupTemplate}).then(function(){return function(){var b="this SceneLayer: "+a.title;null==a.attributeStorageInfo?K.warn("Associated FeatureLayer could not be loaded and no binary attributes found. Popups will not work on "+b):K.info("Associated FeatureLayer could not be loaded. Falling back to binary attributes for Popups on "+b)}})};l.prototype._fetchAssociatedFeatureLayerFromRelatedItems=
function(a,b){return k(this,void 0,void 0,function(){var c,d;return e(this,function(e){switch(e.label){case 0:return e.trys.push([0,4,,5]),[4,a.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:b})];case 1:return c=e.sent(),(d=c.filter(function(a){return"Feature Service"===a.type})[0])?[4,this._fetchAssociatedFeatureLayerFromPortalItem(new M({id:d.id,portal:d.portal}),b)]:[3,3];case 2:return[2,e.sent()];case 3:throw Error();case 4:return e.sent(),[2,this._fetchAssociatedFeatureLayerFromUrl(b)];
case 5:return[2]}})})};l.prototype._fetchAssociatedFeatureLayerFromPortalItem=function(a,b){return k(this,void 0,void 0,function(){var c;return e(this,function(d){switch(d.label){case 0:return[4,a.load({signal:b})];case 1:return d.sent(),[4,this._findMatchingAssociatedSublayerUrl(a.url,b)];case 2:return c=d.sent(),[2,new y({url:c,portalItem:a})]}})})};l.prototype._fetchAssociatedFeatureLayerFromUrl=function(a){return k(this,void 0,void 0,function(){var b;return e(this,function(c){switch(c.label){case 0:return[4,
this._findMatchingAssociatedSublayerUrl(null,a)];case 1:return b=c.sent(),[2,new y({url:b})]}})})};l.prototype._findMatchingAssociatedSublayerUrl=function(a,b){void 0===a&&(a=null);return k(this,void 0,void 0,function(){var c,h,f,g,k,l,m,n,r,p,q,u,z,t;return e(this,function(e){switch(e.label){case 0:c=this.parsedUrl.path.match(/^(.*)\/SceneServer\/layers\/([\d]*)\/?$/i);if(!c)return[2,x.reject()];null==a&&(a=c[1]+"/FeatureServer");h=a.replace(/^(.*FeatureServer)(\/[\d]*\/?)?$/i,"$1");f={query:{f:"json"},
responseType:"json",signal:b};g=c[1]+"/SceneServer";k=parseInt(c[2],10);l=d(g,f).catch(function(a){return{data:{layers:null}}});m=d(h,f);return[4,x.all([m,l])];case 1:n=e.sent();r=n[0];p=n[1];q=p.data&&p.data.layers;u=r.data&&r.data.layers;if(!Array.isArray(u))throw Error("expected layers array");if(Array.isArray(q))for(z=0;z<Math.min(q.length,u.length);z++){if(t=q[z],t.id===k)return[2,h+"/"+u[z].id]}else if(k<u.length)return[2,h+"/"+u[k].id];throw Error("could not find matching associated sublayer");
}})})};l.prototype._buddyIsMoreImportant=function(a){if(!this.associatedLayer)return!1;var b=B.nameToId(this.originOf(a));a=B.nameToId(this.associatedLayer.originOf(a));return null!=a&&a<=B.OriginId.SERVICE?null==b||b<B.OriginId.SERVICE:null!=a&&a<=B.OriginId.PORTAL_ITEM?null==b||b<B.OriginId.PORTAL_ITEM:!1};l.prototype._validateElevationInfo=function(){var a=this.elevationInfo;a&&("mesh-pyramids"===this.profile&&"absolute-height"!==a.mode&&K.warn(".elevationInfo\x3d","Mesh scene layers only support absolute-height elevation mode"),
a.featureExpressionInfo&&"0"!==a.featureExpressionInfo.expression&&K.warn(".elevationInfo\x3d","Scene layers do not support featureExpressionInfo"))};n([r.shared("esri.layers.SceneLayer")],l.prototype,"declaredClass",void 0);n([r.property({types:{key:"type",base:N.default,typeMap:{selection:H.default}},json:{origins:{"web-scene":{read:{source:"layerDefinition.featureReduction"},write:{target:"layerDefinition.featureReduction"}}}}})],l.prototype,"featureReduction",void 0);n([r.property({type:[T.default],
json:{read:!1,origins:{"web-scene":{read:{source:"layerDefinition.rangeInfos"},write:{target:"layerDefinition.rangeInfos"}}}}})],l.prototype,"rangeInfos",void 0);n([r.property({json:{read:!1}})],l.prototype,"associatedLayer",void 0);n([r.property({type:["show","hide"]})],l.prototype,"listMode",void 0);n([r.property({type:["ArcGISSceneServiceLayer"]})],l.prototype,"operationalLayerType",void 0);n([r.property({json:{read:!1},readOnly:!0})],l.prototype,"type",void 0);n([r.property(q({},U.fields,{readOnly:!0,
json:{read:!1,origins:{service:{read:!0}}}}))],l.prototype,"fields",void 0);n([r.property({readOnly:!0,dependsOn:["fields"]})],l.prototype,"fieldsIndex",null);n([r.property(U.outFields)],l.prototype,"outFields",void 0);n([r.property({type:P.I3SNodePageDefinition,readOnly:!0})],l.prototype,"nodePages",void 0);n([r.property({type:[P.I3SMaterialDefinition],readOnly:!0})],l.prototype,"materialDefinitions",void 0);n([r.property({type:[P.I3STextureSetDefinition],readOnly:!0})],l.prototype,"textureSetDefinitions",
void 0);n([r.property({type:[P.I3SGeometryDefinition],readOnly:!0})],l.prototype,"geometryDefinitions",void 0);n([r.property({readOnly:!0})],l.prototype,"attributeStorageInfo",void 0);n([r.property({readOnly:!0})],l.prototype,"statisticsInfo",void 0);n([r.property({type:String,json:{origins:{service:{read:!1,write:!1}},read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],l.prototype,"definitionExpression",void 0);n([r.property({type:String,
json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],l.prototype,"path",void 0);n([r.property(z.elevationInfo)],l.prototype,"elevationInfo",null);n([r.property({type:String,dependsOn:["profile"]})],l.prototype,"geometryType",null);n([r.property(z.labelsVisible)],l.prototype,"labelsVisible",void 0);n([r.property({type:[V],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:L.reader},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",
reader:L.reader},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],l.prototype,"labelingInfo",void 0);n([r.property(z.legendEnabled)],l.prototype,"legendEnabled",void 0);n([r.property({types:g.webSceneRendererTypes,json:{origins:{service:{read:{source:"drawingInfo.renderer",reader:J}}},read:{source:"layerDefinition.drawingInfo.renderer",reader:J},write:{target:"layerDefinition.drawingInfo.renderer"}},value:null})],l.prototype,"renderer",null);n([r.property({json:{read:!1}})],l.prototype,
"cachedDrawingInfo",void 0);n([r.reader("service","cachedDrawingInfo")],l.prototype,"readCachedDrawingInfo",null);n([r.property(z.popupEnabled)],l.prototype,"popupEnabled",void 0);n([r.property({type:m,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],l.prototype,"popupTemplate",void 0);n([r.property({readOnly:!0,json:{read:!1},dependsOn:["fields","title","attributeStorageInfo","associatedLayer"]})],l.prototype,"defaultPopupTemplate",null);n([r.property({type:String,json:{read:!1}})],
l.prototype,"objectIdField",void 0);n([r.reader("service","objectIdField",["objectIdField","fields"])],l.prototype,"readObjectIdField",null);n([r.property({json:{read:!1}})],l.prototype,"objectIdFilter",void 0);n([r.property({type:String,json:{read:!1}})],l.prototype,"profile",void 0);n([r.reader("service","profile",["store.profile"])],l.prototype,"readProfile",null);n([r.property({readOnly:!0,type:String,json:{origins:{service:{read:{source:"store.normalReferenceFrame"}}},read:!1}})],l.prototype,
"normalReferenceFrame",void 0);n([r.property(D.screenSizePerspectiveEnabled)],l.prototype,"screenSizePerspectiveEnabled",void 0);return l=n([r.subclass("esri.layers.SceneLayer")],l)}(r.declared(E,C,u))})},"esri/layers/mixins/SceneService":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../request ../../core/Error ../../core/Logger ../../core/MultiOriginJSONSupport ../../core/urlUtils ../../core/accessorSupport/decorators ../../geometry/Extent ../../geometry/HeightModelInfo ../../geometry/SpatialReference ../Layer ./ArcGISService ./OperationalLayer ./PortalLayer ../support/arcgisLayerUrl ../support/commonProperties".split(" "),
function(p,l,q,b,n,e,k,m,g,d,f,a,c,h,x,w,v,r,B,t,y){var E=g.getLogger("esri.layers.mixins.SceneService");return function(d){function g(){var a=null!==d&&d.apply(this,arguments)||this;a.blendMode=null;a.spatialReference=null;a.fullExtent=null;a.heightModelInfo=null;a.minScale=0;a.maxScale=0;a.version={major:Number.NaN,minor:Number.NaN,versionString:""};a.copyright=null;a.sublayerTitleMode="item-title";a.title=null;a.layerId=null;return a}q(g,d);g.prototype.readSpatialReference=function(a,b){return this._readSpatialReference(b)};
g.prototype._readSpatialReference=function(a){if(null!=a.spatialReference)return x.fromJSON(a.spatialReference);a=a.store;a=(a=a.indexCRS||a.geographicCRS)&&parseInt(a.substring(a.lastIndexOf("/")+1,a.length),10);return null!=a?new x(a):null};g.prototype.readFullExtent=function(a,b){a=b.store;b=this._readSpatialReference(b);return null==b||null==a||null==a.extent||!Array.isArray(a.extent)||a.extent.some(function(a){return-1E38>a})?null:new c({xmin:a.extent[0],ymin:a.extent[1],xmax:a.extent[2],ymax:a.extent[3],
spatialReference:b})};g.prototype.readVersion=function(a,b){a=b.store;b=null!=a.version?a.version.toString():"";a={major:Number.NaN,minor:Number.NaN,versionString:b};b=b.split(".");2<=b.length&&(a.major=parseInt(b[0],10),a.minor=parseInt(b[1],10));return a};g.prototype.readTitlePortalItem=function(a,b){return"item-title"!==this.sublayerTitleMode?void 0:a};g.prototype.readTitleService=function(a,b){a=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return t.titleFromUrlAndName(this.url,
b.name);b=b.name||t.parse(this.url).title;"item-title-and-service-name"===this.sublayerTitleMode&&a&&(b=a+" - "+b);return t.cleanTitle(b)};g.prototype.readLayerId=function(a,b){return b.id};Object.defineProperty(g.prototype,"url",{set:function(a){a=t.sanitizeUrlWithLayerId(this,a,E);this._set("url",a.url);null!=a.layerId&&this._set("layerId",a.layerId)},enumerable:!0,configurable:!0});g.prototype.writeUrl=function(a,b,c,d){t.writeUrlWithLayerId(this,a,"layers",b,d)};Object.defineProperty(g.prototype,
"parsedUrl",{get:function(){var a=this._get("url");if(!a)return null;a=f.urlToObject(a);null!=this.layerId&&t.match.test(a.path)&&(a.path=a.path+"/layers/"+this.layerId);return a},enumerable:!0,configurable:!0});g.prototype.readRootNode=function(a,b){return b.store.rootNode};g.prototype._verifyRootNodeAndUpdateExtent=function(a){return e(this,void 0,void 0,function(){var b;return n(this,function(c){switch(c.label){case 0:return b=this._updateExtentFromRootNode,[4,this._fetchRootNode(a)];case 1:return[2,
b.apply(this,[c.sent()])]}})})};g.prototype._updateExtentFromRootNode=function(a){if(null!=this.fullExtent&&!this.fullExtent.hasZ&&null!=a&&Array.isArray(a.mbs)&&4===a.mbs.length){var b=a.mbs[2];a=a.mbs[3];this.fullExtent.zmin=b-a;this.fullExtent.zmax=b+a}};g.prototype._fetchRootNode=function(a){return e(this,void 0,void 0,function(){var b,c,d;return n(this,function(e){switch(e.label){case 0:if(!this.rootNode)return[2];b=f.join(this.parsedUrl.path,this.rootNode);e.label=1;case 1:return e.trys.push([1,
3,,4]),[4,k(b,{query:{f:"json"},responseType:"json",signal:a})];case 2:return c=e.sent(),[2,c.data];case 3:throw d=e.sent(),new m("sceneservice:root-node-missing","Root node missing.",{error:d,url:b});case 4:return[2]}})})};g.prototype._fetchService=function(a){return e(this,void 0,void 0,function(){var b;return n(this,function(c){switch(c.label){case 0:return null==this.layerId&&/SceneServer\/*$/i.test(this.url)?[4,this._fetchFirstLayerId(a)]:[3,2];case 1:b=c.sent(),null!=b&&(this.layerId=b),c.label=
2;case 2:return[2,this._fetchServiceLayer(a)]}})})};g.prototype._fetchFirstLayerId=function(a){return e(this,void 0,void 0,function(){var b;return n(this,function(c){switch(c.label){case 0:return[4,k(this.url,{query:{f:"json"},responseType:"json",signal:a})];case 1:return b=c.sent(),b.data&&Array.isArray(b.data.layers)&&0<b.data.layers.length?[2,b.data.layers[0].id]:[2]}})})};g.prototype._fetchServiceLayer=function(a){return e(this,void 0,void 0,function(){var b,c;return n(this,function(d){switch(d.label){case 0:return[4,
k(this.parsedUrl.path,{query:{f:"json"},responseType:"json",signal:a})];case 1:return b=d.sent(),b.ssl&&(this.url=this.url.replace(/^http:/i,"https:")),c=b.data,this.read(c,{origin:"service",url:this.parsedUrl}),this._validateLayer(c),[2]}})})};g.prototype._validateLayer=function(a){};b([a.shared({id:{json:{origins:{service:{read:!1},"portal-item":{read:!1}}}}})],g.prototype,"properties",void 0);b([a.property({type:x})],g.prototype,"spatialReference",void 0);b([a.reader("spatialReference",["spatialReference",
"store.indexCRS","store.geographicCRS"])],g.prototype,"readSpatialReference",null);b([a.property({type:c})],g.prototype,"fullExtent",void 0);b([a.reader("fullExtent",["store.extent","spatialReference","store.indexCRS","store.geographicCRS"])],g.prototype,"readFullExtent",null);b([a.property({readOnly:!0,type:h})],g.prototype,"heightModelInfo",void 0);b([a.property({type:Number,json:{read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"},origins:{service:{read:{source:"minScale"},
write:!1}}}})],g.prototype,"minScale",void 0);b([a.property({type:Number,json:{read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"},origins:{service:{read:{source:"maxScale"},write:!1}}}})],g.prototype,"maxScale",void 0);b([a.property({readOnly:!0})],g.prototype,"version",void 0);b([a.reader("version",["store.version"])],g.prototype,"readVersion",null);b([a.property({type:String,json:{read:{source:"copyrightText"}}})],g.prototype,"copyright",void 0);b([a.property({type:String,
json:{read:!1}})],g.prototype,"sublayerTitleMode",void 0);b([a.property({type:String})],g.prototype,"title",void 0);b([a.reader("portal-item","title")],g.prototype,"readTitlePortalItem",null);b([a.reader("service","title",["name"])],g.prototype,"readTitleService",null);b([a.property({type:Number})],g.prototype,"layerId",void 0);b([a.reader("service","layerId",["id"])],g.prototype,"readLayerId",null);b([a.property(y.url)],g.prototype,"url",null);b([a.writer("url")],g.prototype,"writeUrl",null);b([a.property({dependsOn:["layerId"]})],
g.prototype,"parsedUrl",null);b([a.property({readOnly:!0})],g.prototype,"store",void 0);b([a.property({type:String,readOnly:!0})],g.prototype,"rootNode",void 0);b([a.reader("rootNode",["store.rootNode"])],g.prototype,"readRootNode",null);return g=b([a.subclass("esri.layers.mixins.SceneService")],g)}(a.declared(w,v,d,r,B))})},"esri/layers/support/I3SLayerDefinitions":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(p,l,q,b,n,e){Object.defineProperty(l,"__esModule",{value:!0});p=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.nodesPerPage=null;b.rootIndex=0;b.lodSelectionMetricType=null;return b}q(c,a);b([e.property({type:Number})],c.prototype,"nodesPerPage",void 0);b([e.property({type:Number})],c.prototype,"rootIndex",void 0);b([e.property({type:String})],c.prototype,"lodSelectionMetricType",void 0);return c=b([e.subclass("esri.layer.support.I3SNodePageDefinition")],c)}(e.declared(n));
l.I3SNodePageDefinition=p;var k=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.factor=1;return b}q(c,a);b([e.property({type:Number})],c.prototype,"textureSetDefinitionId",void 0);b([e.property({type:Number})],c.prototype,"factor",void 0);return c=b([e.subclass("esri.layer.support.I3SMaterialTexture")],c)}(e.declared(n));l.I3SMaterialTexture=k;var m=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.baseColorFactor=[1,1,1,1];b.baseColorTexture=null;b.metallicRoughnessTexture=
null;b.metallicFactor=1;b.roughnessFactor=1;return b}q(c,a);b([e.property({type:[Number]})],c.prototype,"baseColorFactor",void 0);b([e.property({type:k})],c.prototype,"baseColorTexture",void 0);b([e.property({type:k})],c.prototype,"metallicRoughnessTexture",void 0);b([e.property({type:Number})],c.prototype,"metallicFactor",void 0);b([e.property({type:Number})],c.prototype,"roughnessFactor",void 0);return c=b([e.subclass("esri.layer.support.I3SMaterialPBRMetallicRoughness")],c)}(e.declared(n));l.I3SMaterialPBRMetallicRoughness=
m;p=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.alphaMode="opaque";b.alphaCutoff=.25;b.doubleSided=!1;b.cullFace="none";b.normalTexture=null;b.occlusionTexture=null;b.emissiveTexture=null;b.emissiveFactor=null;b.pbrMetallicRoughness=null;return b}q(c,a);b([e.enumeration.serializable()({opaque:"opaque",mask:"mask",blend:"blend"})],c.prototype,"alphaMode",void 0);b([e.property({type:Number})],c.prototype,"alphaCutoff",void 0);b([e.property({type:Boolean})],c.prototype,"doubleSided",
void 0);b([e.enumeration.serializable()({none:"none",back:"back",front:"front"})],c.prototype,"cullFace",void 0);b([e.property({type:k})],c.prototype,"normalTexture",void 0);b([e.property({type:k})],c.prototype,"occlusionTexture",void 0);b([e.property({type:k})],c.prototype,"emissiveTexture",void 0);b([e.property({type:[Number]})],c.prototype,"emissiveFactor",void 0);b([e.property({type:m})],c.prototype,"pbrMetallicRoughness",void 0);return c=b([e.subclass("esri.layer.support.I3SMaterialDefinition")],
c)}(e.declared(n));l.I3SMaterialDefinition=p;var g=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}q(c,a);b([e.property({type:String,json:{read:{source:["name","index"],reader:function(a,b){return null!=a?a:""+b.index}}}})],c.prototype,"name",void 0);b([e.enumeration.serializable()({jpg:"jpg",png:"png",dds:"dds","ktx-etc2":"ktx-etc2"})],c.prototype,"format",void 0);return c=b([e.subclass("esri.layer.support.I3STextureFormat")],c)}(e.declared(n));l.I3STextureFormat=g;p=function(a){function c(){var b=
null!==a&&a.apply(this,arguments)||this;b.atlas=!1;return b}q(c,a);b([e.property({type:[g]})],c.prototype,"formats",void 0);b([e.property({type:Boolean})],c.prototype,"atlas",void 0);return c=b([e.subclass("esri.layer.support.I3STextureSetDefinition")],c)}(e.declared(n));l.I3STextureSetDefinition=p;var d=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}q(c,a);b([e.enumeration.serializable()({Float32:"Float32",UInt64:"UInt64",UInt32:"UInt32",UInt16:"UInt16",UInt8:"UInt8"})],
c.prototype,"type",void 0);b([e.property({type:Number})],c.prototype,"component",void 0);return c=b([e.subclass("esri.layer.support.I3SGeometryAttribute")],c)}(e.declared(n));l.I3SGeometryAttribute=d;var f=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}q(c,a);b([e.enumeration.serializable()({draco:"draco"})],c.prototype,"encoding",void 0);b([e.property({type:[String]})],c.prototype,"attributes",void 0);return c=b([e.subclass("esri.layer.support.I3SGeometryAttribute")],c)}(e.declared(n));
l.I3SGeometryCompressedAttributes=f;p=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.offset=0;return b}q(c,a);b([e.property({type:Number})],c.prototype,"offset",void 0);b([e.property({type:d})],c.prototype,"position",void 0);b([e.property({type:d})],c.prototype,"normal",void 0);b([e.property({type:d})],c.prototype,"uv0",void 0);b([e.property({type:d})],c.prototype,"color",void 0);b([e.property({type:d})],c.prototype,"uvRegion",void 0);b([e.property({type:d})],c.prototype,
"featureId",void 0);b([e.property({type:d})],c.prototype,"faceRange",void 0);b([e.property({type:f})],c.prototype,"compressedAttributes",void 0);return c=b([e.subclass("esri.layer.support.I3SGeometryBuffer")],c)}(e.declared(n));l.I3SGeometryBuffer=p;n=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}q(c,a);b([e.enumeration.serializable()({triangle:"triangle"})],c.prototype,"topology",void 0);b([e.property()],c.prototype,"geometryBuffers",void 0);return c=b([e.subclass("esri.layer.support.I3SMeshDefinition")],
c)}(e.declared(n));l.I3SGeometryDefinition=n})},"esri/layers/support/RangeInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(p,l,q,b,n,e){Object.defineProperty(l,"__esModule",{value:!0});p=function(k){function l(){var b=null!==k&&k.apply(this,arguments)||this;b.name=null;b.field=null;b.currentRangeExtent=null;b.fullRangeExtent=null;b.type="rangeInfo";
return b}q(l,k);b([e.property({type:String,json:{read:!0,write:!0}})],l.prototype,"name",void 0);b([e.property({type:String,json:{read:!0,write:!0}})],l.prototype,"field",void 0);b([e.property({type:[Number],json:{read:!0,write:!0}})],l.prototype,"currentRangeExtent",void 0);b([e.property({type:[Number],json:{read:!0,write:!0}})],l.prototype,"fullRangeExtent",void 0);b([e.property({type:String,readOnly:!0,json:{read:!1,write:!0}})],l.prototype,"type",void 0);return l=b([e.subclass("esri.layers.support.RangeInfo")],
l)}(e.declared(n));l.RangeInfo=p;l.default=p})},"widgets/Search/utils":function(){define("dojo/_base/lang dojo/_base/array dojo/Deferred dojo/when dojo/promise/all jimu/portalUtils jimu/utils esri/request".split(" "),function(p,l,q,b,n,e,k,m){return{map:null,layerInfosObj:null,appConfig:null,_esriLocatorRegExp:/geocode(.){0,3}\.arcgis.com\/arcgis\/rest\/services\/World\/GeocodeServer/g,setMap:function(b){this.map=b},setLayerInfosObj:function(b){this.layerInfosObj=b},setAppConfig:function(b){this.appConfig=
b},getConfigInfo:function(e){if(e&&e.sources&&0<e.sources.length){var d=null;return this.searchLayer(this.map)&&e.upgradeFromGeocoder?(d=this.map.itemInfo.itemData.applicationProperties.viewing.search,d=l.map(d.layers,p.hitch(this,function(b,a){a.hintText=b;return this._getQueryTypeGeocoder(a)},d.hintText)),n(d).then(p.hitch(this,function(b){e.sources=[].concat(b).concat(e.sources);return e}))):e}return b(this._getSoucesFromPortalAndWebmap()).then(p.hitch(this,function(b){return{allPlaceholder:"",
showInfoWindowOnSelect:!0,sources:b}}))},_getSoucesFromPortalAndWebmap:function(){var b=[],d=null;this.searchLayer(this.map)&&(d=this.map.itemInfo.itemData.applicationProperties.viewing.search,l.forEach(d.layers,p.hitch(this,function(d,a){a.hintText=d;b.push(this._getQueryTypeGeocoder(a))},d.hintText)));return e.getPortalSelfInfo(this.appConfig.portalUrl).then(p.hitch(this,function(d){if((d=d.helperServices&&d.helperServices.geocode)&&0<d.length)for(var a=0,c=d.length;a<c;a++){var e=d[a];e&&b.push(this._processSingleLine(e))}return n(b).then(p.hitch(this,
function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];d&&(d&&"query"===d.type||(d={name:d.name||this._getGeocodeName(d.url),url:d.url,singleLineFieldName:d.singleLineFieldName,placeholder:d.placeholder||window.jimuNls.common.findAddressOrPlace||d.name||this._getGeocodeName(d.url),maxResults:6,searchInCurrentMapExtent:!1,type:"locator"}),b.push(d))}return b}))}))},_getQueryTypeGeocoder:function(b){var d=this.map.findLayerById(b.id),e=null,a=null,a=b.id,e=null;d&&d.allSublayers&&(e=d.allSublayers.find(function(a){return a.id===
b.subLayer}));return d?(e="scene"===d.type?d.url+"/layers/"+d.layerId:e?e.url||d.url+"/"+b.subLayer:d.url+"/"+d.layerId,{name:d.title,layerId:a,url:e,placeholder:b.hintText||window.jimuNls.common.findAddressOrPlace,searchFields:[b.field.name],displayField:b.field.name,exactMatch:b.field.exactMatch||!1,maxResults:6,searchInCurrentMapExtent:!1,type:"query"}):null},_isEsriLocator:function(b){this._esriLocatorRegExp.lastIndex=0;return this._esriLocatorRegExp.test(b)},_processSingleLine:function(b){if(b.singleLineFieldName)return b;
if(this._isEsriLocator(b.url))return b.singleLineFieldName="SingleLine",b;var d=new q;m(b.url,{query:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(p.hitch(this,function(e){e.singleLineAddressField&&e.singleLineAddressField.name?(b.singleLineFieldName=e.singleLineAddressField.name,d.resolve(b)):(console.warn(b.url+"has no singleLineFieldName"),d.resolve(null))}),p.hitch(this,function(b){console.error(b);d.resolve(null)}));return d.promise},_getGeocodeName:function(b){if("string"!==
typeof b)return"geocoder";b=b.split("/");return b[b.length-2]||"geocoder"},getGeocoderName:function(b){return this._getGeocodeName(b)},hasAppSearchInfo:function(b){return b.itemInfo&&b.itemInfo.itemData&&b.itemInfo.itemData.applicationProperties&&b.itemInfo.itemData.applicationProperties.viewing&&b.itemInfo.itemData.applicationProperties.viewing.search},searchLayer:function(b){if(!b||!this.hasAppSearchInfo(b))return!1;b=b.itemInfo.itemData.applicationProperties.viewing.search;return b.enabled&&0!==
b.layers.length?!0:!1}}})},"widgets/Search/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/Search/Widget.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"searchNode" class\x3d"search-node"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"searchResultsNode" class\x3d"searchResults arcgisSearch esri-search"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',"url:widgets/Search/css/style.css":".jimu-widget-search{min-height: 32px;}.jimu-widget-search .search-node.default-width-for-openAtStart{width: 300px;}.jimu-widget-search .esri-search__container{border: 1px solid #57585A;}.jimu-widget-search .result-item-selected{background: #eee;}.jimu-widget-search .esri-search .esri-search-button:hover,.jimu-widget-search .esri-search .esri-search-button:focus {background-color: #485566; color: white;}.jimu-widget-search .esri-search .show-all-results{position: absolute; height: 25px; color: #686868; line-height: 25px; display: none; width: 237px; margin: auto; background-color: #fff; padding: 0 12px; cursor: pointer;}.jimu-widget-search .searchResults .esri-menu{border-radius: 0; color: #686868; font-size: 12px; padding: 0; top: 33px; visibility: visible;}.jimu-widget-search .searchMenu {position: absolute; top: 100%; left: 0; z-index: 1000; display: none; float: left; padding: 5px 0; margin: 2px 0 0; font-size: 14px; line-height: 16px; background-color: #fff; -webkit-background-clip: padding-box; background-clip: padding-box; border: 1px solid #57585A; -webkit-border-radius: 4px; border-radius: 4px; overflow: auto; max-height: 300px;}.jimu-widget-search .searchMenu ul {margin: 0; padding: 0; list-style: none;}.jimu-widget-search .esri-search .esri-menu li.active{background-color: #d9dde0; color: #686868; font-size: 14px;}.jimu-widget-search .esri-search .esri-menu li{padding: 0 12px; line-height: 25px; cursor: pointer;}.jimu-widget-search .esri-search .esri-menu li:hover,.jimu-widget-search .esri-search .esri-menu li:focus {background-color: #eee;}.jimu-widget-search .esri-search .esri-menu .menu-header{background-color: #d9dde0; color: #686868; font-size: 14px; min-height: 30px; padding: 0 12px; line-height: 30px;}",
"*now":function(p){p(['dojo/i18n!*preload*widgets/Search/nls/Widget*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","vi","uk","zh-hk","zh-tw","ROOT"]'])}}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/when dojo/on dojo/query dojo/keys dojo/Deferred dojo/promise/all jimu/BaseWidget jimu/utils esri/widgets/Search esri/widgets/Search/SearchViewModel esri/tasks/Locator esri/tasks/support/Query esri/layers/FeatureLayer esri/layers/SceneLayer esri/symbols/PictureMarkerSymbol esri/PopupTemplate ./utils dojo/NodeList-dom".split(" "),function(p,l,q,b,n,e,k,m,g,d,f,a,c,h,x,w,v,r,B,t,y){return p([f],{name:"Search",baseClass:"jimu-widget-search",
searchDijit:null,searchResults:null,_highlightedFeatureHandle:null,postCreate:function(){this.listenWidgetIds.push("framework")},startup:function(){this.inherited(arguments);this.config&&this.config.sources||(this.config.sources=[]);y.setMap(this.sceneView.map);y.setAppConfig(this.appConfig);n(y.getConfigInfo(this.config)).then(l.hitch(this,function(a){return d(this._convertConfig(a)).then(function(a){return q.filter(a,function(a){return a})})})).then(l.hitch(this,function(b){this.domNode&&(b=new h({activeSourceIndex:1===
b.length?0:-1,allPlaceholder:a.stripHTML(this.config.allPlaceholder?this.config.allPlaceholder:window.jimuNls.common.findAddressOrPlace),autoSelect:!0,buttonModeEnabled:!1,labelEnabled:!1,popupEnabled:a.isDefined(this.config.showInfoWindowOnSelect)?!!this.config.showInfoWindowOnSelect:!0,view:this.sceneView,sources:b,theme:"arcgisSearch"}),this.searchDijit=new c({viewModel:b,includeDefaultSources:!1,container:this.searchNode}),this._resetSearchDijitStyle(),this.own(this.searchDijit.viewModel.watch("activeSourceIndex",
l.hitch(this,"_onSourceIndexChange"))),this.own(e(this.searchDijit.viewModel,"select-result",l.hitch(this,"_onSelectResult"))),this.own(e(this.searchDijit.domNode,"click",l.hitch(this,"_onSearchDijitClick"))),this.own(e(this.searchDijit._inputNode,"keyup",l.hitch(this,function(a){a.keyCode!==m.ENTER&&this._onClearSearch()}))),this.own(e(this.searchDijit.viewModel,"suggest-results",l.hitch(this,"_onSuggestResults"))),this.own(e(this.searchDijit.viewModel,"search-clear",l.hitch(this,"_onClearSearch"))),
this.fetchData("framework"))}))},_convertConfig:function(b){return q.map(b.sources,l.hitch(this,function(b){var c=new g;if(b&&b.url&&"locator"===b.type)c.resolve({locator:new x(b.url||""),outFields:["*"],singleLineFieldName:b.singleLineFieldName||"",name:a.stripHTML(b.name||""),placeholder:a.stripHTML(b.placeholder||""),highlightSymbol:new B({url:this.folderUrl+"css/images/search-pointer.png",size:36,width:36,height:36,xoffset:9,yoffset:18}),countryCode:b.countryCode||"",maxSuggestions:b.maxSuggestions||
6,maxResults:b.maxResults||6,zoomScale:b.zoomScale||5E4,withinViewEnabled:!!b.searchInCurrentMapExtent});else if(b&&b.url&&"query"===b.type){var d=this._getLayerViewByLayerId(b.layerId),e;e=/\/sceneserver\//gi.test(b.url)?new r({url:b.url||null,outFields:["*"]}):new v({url:b.url||null,outFields:["*"]});e.load().then(l.hitch(this,function(){var f=this._getInfoTemplate(e,b,b.displayField),g=null;b.searchFields&&0<b.searchFields.length?g=b.searchFields:(g=[],q.forEach(e.fields,function(a){"esriFieldTypeOID"!==
a.type&&a.name!==e.objectIdField&&"esriFieldTypeGeometry"!==a.type&&g.push(a.name)}));f={layer:e,outFields:["*"],searchFields:g,displayField:b.displayField||"",exactMatch:!!b.exactMatch,name:a.stripHTML(b.name||""),placeholder:a.stripHTML(b.placeholder||""),maxSuggestions:b.maxSuggestions||6,maxResults:b.maxResults||6,popupTemplate:f||null,zoomScale:b.zoomScale||5E4,withinViewEnabled:!!b.searchInCurrentMapExtent,featureLayerId:b.layerId,featurelayerGeometryType:e.geometryType};d&&(f.resultGraphicEnabled=
!1);"scene"===e.type&&(f.autoNavigate=!1);c.resolve(f)}),l.hitch(this,function(){c.resolve(null)}))}else c.resolve(null);return c}))},_getInfoTemplate:function(b,c){var d,e=[];q.filter(b.fields,function(a){var b=a.name.toLowerCase();0>b.indexOf("shape")&&0>b.indexOf("objectid")&&0>b.indexOf("perimeter")&&e.push(a.name)});(b=a.getDefaultPopupInfo(b,c.name+": {"+c.displayField+"}",e))&&(d=new t({title:b.title,content:[{type:"fields",fieldInfos:b.fieldInfos}]}));return d},destroy:function(){y.setAppConfig(null);
var a=this.sceneView.popup.viewModel;a&&(a.visible=!1);this.searchDijit&&this.searchDijit.viewModel&&(this.searchDijit.viewModel.set("view",null),this.searchDijit.viewModel.clear());this._highlightedFeatureHandle&&this._highlightedFeatureHandle.remove();this.inherited(arguments)},_getLayerViewByLayerId:function(a){return this.sceneView.layerViews.find(l.hitch(this,function(b){return b.layer.id===a}))},_onSelectResult:function(a){var b=a.result;if(b&&b.name){var b=a.result.feature,c=this._getLayerViewByLayerId(a.source.featureLayerId);
if(c){var d=new w;d.where=c.layer.objectIdField+" \x3d "+b.attributes[c.layer.objectIdField];d.outFields=["*"];d.returnGeometry=!0;d.maxAllowableOffset=0;d.outSpatialReference=this.sceneView.spatialReference;c.layer.queryFeatures(d).then(l.hitch(this,function(a){if(a=a.features[0])this._highlightedFeatureHandle&&this._highlightedFeatureHandle.remove(),this._highlightedFeatureHandle=c.highlight(a),"scene"===c.layer.type&&this.sceneView.goTo(a)}))}"point"===a.source.featurelayerGeometryType&&a.source.zoomScale&&
this.sceneView.goTo({scale:a.source.zoomScale})}},_onSearchComplete:function(){},onReceiveData:function(a,b,c){"framework"===a&&"framework"===b&&c&&c.searchString&&(this.searchDijit.viewModel.set("value",c.searchString),this.searchDijit.viewModel.search())},setPosition:function(){this._resetSearchDijitStyle();this.inherited(arguments)},resize:function(){this._resetSearchDijitStyle()},_onSourceIndexChange:function(){this.searchDijit.viewModel.value&&this.searchDijit.viewModel.search(this.searchDijit.viewModel.value)},
_onSuggestResults:function(){this._resetSelectorPosition(".searchMenu");this._hideResultMenu()},_onClearSearch:function(){b.setStyle(this.searchResultsNode,"display","none");this.searchResultsNode.innerHTML="";this.searchResults=null;this.sceneView.popup.close();this._highlightedFeatureHandle&&this._highlightedFeatureHandle.remove()},_onSearchDijitClick:function(){this._resetSelectorPosition(".esri-source-menu")},_resetSelectorPosition:function(c){var d=b.getMarginBox(window.jimuConfig.layoutId);
k(c,this.domNode).forEach(l.hitch(this,function(e){var f=b.position(e),g=l.getObject("viewModel.sources.length",!1,this.searchDijit);if(1<g&&".esri-source-menu"===c){var h=k(c+" li[data-index]",this.domNode)[0],h=a.isDefined(h)?b.getMarginBox(h).h:30;f.h=h*(g+1)}if("none"!==b.getStyle(e,"display")){var g=b.position(this.searchDijit.domNode),h=g.y-2,m=d.h-g.y-g.h;m>f.y+f.h||h>f.h?b.setStyle(e,"top",(m>f.y+f.h?g.h:-f.h-2)+"px"):(b.setStyle(e,"height",Math.max(m,h)+"px"),b.setStyle(e,"top",(m>h?g.h:
-h-2)+"px"))}}))},_onSelectSearchResult:function(a){for(a=a.target;!b.hasAttr(a,"data-source-index")||!b.getAttr(a,"data-index");)a=a.parentNode;var c=null,c=b.getAttr(a,"data-source-index");a=parseInt(b.getAttr(a,"data-index"),10);"all"!==c&&(c=parseInt(c,10));this.searchResults&&this.searchResults[c]&&this.searchResults[c][a]&&(c=this.searchResults[c][a],this.searchDijit.viewModel.select(c))},_hideResultMenu:function(){k(".show-all-results",this.searchResultsNode).style("display","block");k(".searchMenu",
this.searchResultsNode).style("display","none")},_showResultMenu:function(){b.setStyle(this.searchResultsNode,"display","block");k(".show-all-results",this.searchResultsNode).style("display","none");k(".searchMenu",this.searchResultsNode).style("display","block");var a=k(".esri-input-container",this.searchDijit.domNode)[0];if(a){var a=b.getMarginBox(a),c={width:a.w+"px"};if(window.isRTL){var d=b.getMarginBox(this.searchDijit.domNode);c.right=d.w-a.l-a.w+"px"}else c.left=a.l+"px";k(".show-all-results",
this.searchResultsNode).style(c);k(".searchMenu",this.searchResultsNode).style(c)}},_resetSearchDijitStyle:function(){}})});