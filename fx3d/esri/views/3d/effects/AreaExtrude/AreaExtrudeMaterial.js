//>>built
require({cache:{"url:fx3d/views/3d/effects/AreaExtrude/AreaExtrudeMaterial.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\x3c!-- Copyright @ 2019 Esri. All rights reserved under the copyright laws of the United States and applicable international laws, treaties, and conventions. --\x3e\x3csnippets\x3e\x3csnippet name\x3d"areaExtrudeFS"\x3e\x3c![CDATA[\r\n#ifdef GL_ES\r\nprecision highp float;\r\n#endif\r\nuniform float im;uniform vec3 ss;uniform vec4 ol;uniform vec4 il;uniform vec4 lm;uniform vec3 mi;varying vec4 cg;varying vec3 gd;varying vec3 gh;const vec3 a\x3dvec3(1.0,1.0,1.0);const vec3 b\x3dvec3(1.0,1.0,1.0);const vec3 c\x3dvec3(0.2,0.2,0.2);void main(){vec3 d\x3dnormalize(gh-mi);vec3 e\x3dnormalize(gd);vec3 f\x3dnormalize(reflect(d,e));float g\x3dmax(dot(f,ss),.001);vec3 h\x3dc*lm.rgb*lm.w*pow(g,10.0);vec3 i\x3da*il.rgb*il.w*clamp(dot(e,ss),.0,1.0);vec3 j\x3db*ol.rgb*ol.w;vec3 k\x3dvec3(j+i+h);gl_FragColor.xyz\x3dcg.xyz*k;float l\x3dim*0.01;gl_FragColor.w\x3dl;}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"areaExtrudeVS"\x3e\x3c![CDATA[attribute vec3 $position;attribute vec2 $auxpos1;attribute vec2 $auxpos2;uniform mat4 mp;uniform mat4 oo;uniform sampler2D el;uniform sampler2D me;uniform float li;uniform vec2 po;uniform vec3 oi;uniform sampler2D lp;uniform vec3 ls;uniform float ps;uniform vec2 sl;uniform vec2 es;uniform bool ms;uniform vec4 oe;varying vec4 cg;varying vec3 gd;varying vec3 gh; $linearInterpolator  $lonlat2position  $translationMat  $localTrans  $quintEaseOut const float a\x3d1.0;const float b\x3d0.0;vec4 matchPixelCenter(vec4 c,vec2 d){vec2 e\x3dvec2(.500123)+.5*c.xy/c.w;vec2 f\x3dfloor(e*d);vec2 g\x3dvec2(1.0)/d;vec2 h\x3d(((vec2(.5)+f)*g)*2.0-vec2(1.0))*c.w;return vec4(h.x,h.y,c.z,c.w);}void main(void){float i\x3dfract($auxpos1.x/sl.x);float j\x3dfloor($auxpos1.x/sl.y)/sl.y;float k\x3d(texture2D(el,vec2(i,j))).r;float l\x3d(texture2D(me,vec2(i,j))).r;float m\x3dmod(ps,li);float n\x3dgetQuintEaseInOutValue(m,k,l,li);if(ms){n\x3dl;}float o\x3dgetLinearValue(es,n);bool p\x3dfalse;if($auxpos1.y\x3d\x3da){p\x3dtrue;}else if($auxpos1.y\x3d\x3db){p\x3dfalse;}vec3 q,r,s;mat4 t\x3dmat4(1.0);\r\n#ifdef GLOBAL\r\nmat4 u\x3dgetTransMat($position);q\x3du[3].xyz;t\x3dtoRotationMat(u);vec4 v\x3dvec4(0.0,0.0,1.0,0.0);s\x3dlonlat2position(vec3($auxpos2,1.0));r\x3d(t*v).xyz;\r\n#else\r\nq\x3dwgs84ToWebMerc($position);s\x3dwgs84ToWebMerc(vec3($auxpos2,1.0));r\x3dvec3(0.0,0.0,1.0);\r\n#endif\r\nr\x3dnormalize(r);if(p){cg\x3dtexture2D(lp,vec2(o,0.5));q+\x3d(r*(getScope(po,o)));}else{cg\x3dvec4(ls,1.0);}vec3 w\x3dvec3(1.0,0.0,0.0);float x\x3d1.0;float y\x3d1.0;float z\x3dabs(dot(r,normalize(oi-q)));float A\x3d0.00001;vec3 B\x3d(oo*vec4(q,1.0)).xyz;if(z\x3e.01){float C\x3dsqrt(1.0-z*z)/z;float D\x3d(1.0-C/oe[2]);if(y\x3e0.0){B*\x3dD;}else{B/\x3dD;}}B+\x3dw;vec4 E\x3dmp*vec4(B,1.0);E.z-\x3dy*A*E.w;gl_Position\x3dmatchPixelCenter(E,oe.zw);gd\x3dnormalize((r-normalize(s))+normalize(q));gh\x3dq;}]]\x3e\x3c/snippet\x3e\x3c/snippets\x3e'}});
define("dojo/text!./AreaExtrudeMaterial.xml esri/core/declare ../../webgl-engine-extensions/GLSLShader ../../webgl-engine-extensions/GLSLProgramExt ../../support/fx3dUtils ../Materials".split(" "),function(g,h,d,k,m,l){return h([l],{declaredClass:"esri.views.3d.effects.AreaExtrude.AreaExtrudeMaterial",constructor:function(a){this._gl=a.gl;this._shaderSnippets=a.shaderSnippets;this._program=null;this._viewingMode=a.viewingMode;this._pushState=a.pushState;this._restoreState=a.restoreState},destroy:function(){this._program&&
(this._program.dispose(),delete this._program,this._program=null)},_addDefines:function(a,b){var c="";if(null!=b)if(Array.isArray(b))for(var e=0,d=b.length;e<d;e++)var f=b[e],c=c+("#define "+f+"\n");else for(f in b)c+="#define "+f+"\n";return this._shaderSnippets.defines+"\n"+c+a},loadShaders:function(){if(this._shaderSnippets){null!=this._shaderSnippets.areaExtrudeVS&&null!=this._shaderSnippets.areaExtrudeFS||this._shaderSnippets._parse(g);var a=[];"global"==this._viewingMode?a.push("GLOBAL"):a.push("LOCAL");
var a=this._addDefines(this._shaderSnippets.areaExtrudeVS,a),a=new d(35633,a,this._gl),b=new d(35632,this._shaderSnippets.areaExtrudeFS,this._gl);this._program=new k([a,b],this._gl)}return this._initResources()},getProgram:function(){return this._program},_initResources:function(){return!0},bind:function(a,b){this._program.use();this._program.uniformMatrix4fv("mp",a.proj);this._program.uniformMatrix4fv("oo",a.view);this._program.uniform3fv("mi",a.camPos);this._program.uniform3fv("oi",a.camPos);this._program.uniform4fv("oe",
a.viewport);this._program.uniform3fv("ss",a.lightingData.direction);this._program.uniform4fv("ol",a.lightingData.ambient);this._program.uniform4fv("il",a.lightingData.diffuse);this._program.uniform4fv("lm",a.lightingData.specular);this._oldTex=this._gl.getParameter(32873);var c=this.getOldActiveUnit(b);a.el.bind(c+1);this._program.uniform1i("el",c+1);a.me.bind(c+2);this._program.uniform1i("me",c+2);this._program.uniform2fv("sl",a.sl);this._program.uniform2fv("es",[a.es,a.pp]);this._program.uniform2fv("po",
a.po);this._gl.activeTexture(33984+c+3);this._gl.bindTexture(3553,a.lp);this._program.uniform1i("lp",c+3);this._program.uniform1f("li",a.li);this._program.uniform1f("im",a.im);this._program.uniform3fv("ls",a.ls);this._program.uniform1f("ps",a.time);this._program.uniform1i("ms",a.reachedRepeatLimit);1!=b._depthTestEnabled&&(this._pushState(["setDepthTestEnabled",b._depthTestEnabled]),b.setDepthTestEnabled(!0));1!=b._polygonCullingEnabled&&(this._pushState(["setFaceCullingEnabled",b._polygonCullingEnabled]),
b.setFaceCullingEnabled(!0));1!=b._blendEnabled&&(this._pushState(["setBlendingEnabled",b._blendEnabled]),b.setBlendingEnabled(!0))},bindVec3:function(a,b){this._program.uniform3fv(a,b)},release:function(a){this._gl.activeTexture(33984+a._activeTextureUnit+1);this._gl.bindTexture(3553,this._oldTex);this._restoreState(a);this._gl.useProgram(null)}})});