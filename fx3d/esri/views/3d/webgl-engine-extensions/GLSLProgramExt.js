//>>built
define(["esri/views/3d/lib/glMatrix"],function(h){var k=h.vec2d,l=h.vec3d,m=h.vec4d,w=0;return function(f,d){var e,n,p,h=w++,v=function(){if(null==e){e=d.createProgram();for(var a=0;a<f.length;++a)d.attachShader(e,f[a].getGLName());null!=e&&(d.linkProgram(e),d.getProgramParameter(e,35714)||console.error("Could not initialize shader\nVALIDATE_STATUS: "+d.getProgramParameter(e,35715)+", gl error ["+d.getError()+"] infoLog: "+d.getProgramInfoLog(e)),n={},p={})}};this.dispose=function(){for(var a=0;a<
f.length;++a){var b=f[a].getGLName();d.isShader(b)&&d.deleteShader(b)}d.isProgram(e)&&d.deleteProgram(e)};this.getId=function(){return h};this.getShader=function(a){return f["vertex"===a?0:1]};this.use=function(){v();d.useProgram(e)};this.getLocation=function(a){return v(),null==n[a]&&(n[a]=d.getUniformLocation(e,a)),n[a]};this.hasUniform=function(a){return null!=this.getLocation(a)};this.getAttribLocation=function(a){return v(),null==p[a]&&(p[a]=d.getAttribLocation(e,a)),p[a]};var q={};this.uniform1i=
function(a,b){var c=q[a];null!=c&&b===c||(d.uniform1i(this.getLocation(a,d),b),q[a]=b)};this.uniform1f=function(a,b){var c=q[a];null!=c&&b===c||(d.uniform1f(this.getLocation(a,d),b),q[a]=b)};var r={};this.uniform2f=function(a,b,c){var e=r[a];null!=e&&b===e[0]&&c===e[1]||(d.uniform2f(this.getLocation(a,d),b,c),null==e?r[a]=k.createFrom(b,c):k.set2(b,c,e))};this.uniform2fv=function(a,b){var c=r[a];(2<b.length||null==c||b[0]!==c[0]||b[1]!==c[1])&&(d.uniform2fv(this.getLocation(a,d),b),null==c?r[a]=k.create(b):
k.set(b,c))};var t={};this.uniform3f=function(a,b,c,e){var g=t[a];null!=g&&b===g[0]&&c===g[1]&&e===g[2]||(d.uniform3f(this.getLocation(a,d),b,c,e),null==g?t[a]=l.createFrom(b,c,e):l.set3(b,c,e,g))};this.uniform3fv=function(a,b){var c=t[a];(3<b.length||null==c||b[0]!==c[0]||b[1]!==c[1]||b[2]!==c[2])&&(d.uniform3fv(this.getLocation(a,d),b),null==c?t[a]=l.create(b):l.set(b,c))};var u={};this.uniform4f=function(a,b,c,e,g){var f=u[a];null!=f&&b===f[0]&&c===f[1]&&e===f[2]&&g===f[3]||(d.uniform4f(this.getLocation(a,
d),b,c,e,g),null==f?u[a]=m.createFrom(b,c,e,g):m.set4(b,c,e,g,f))};this.uniform4fv=function(a,b){var c=u[a];(4<b.length||null==c||b[0]!==c[0]||b[1]!==c[1]||b[2]!==c[2]||b[3]!==c[3])&&(d.uniform4fv(this.getLocation(a,d),b),null==c?u[a]=m.create(b):m.set(b,c))};this.uniformMatrix4fv=function(a,b){d.uniformMatrix4fv(this.getLocation(a,d),!1,b)};this.dispose=function(){if(null!=e){for(var a=0;a<f.length;++a){var b=f[a].getGLName();d.detachShader(e,b);d.deleteShader(b)}d.deleteProgram(e)}}}});