//>>built
define(["./Number32ArrayList","esri/views/3d/webgl-engine/lib/Util"],function(e,f){var g=0,h=0,d=f.assert;return function(){function a(c,b,a,d){this.glName=c.createBuffer();this._gl=c;this.num=0;this.drawMode=d?35048:35044;this.dataBuffer=new e(b);this.isDirty=!1;this.bufferType=b?34962:34963;this.isVBO=b;this.vertexBufferLayout=a;this.id=b?g++:h++}return a.prototype.setData=function(c,b){d(c instanceof this.dataBuffer.getArrayType());this._gl.bindBuffer(this.bufferType,this.glName);this._gl.bufferData(this.bufferType,
c,this.drawMode);this._gl.bindBuffer(this.bufferType,null);this.isVBO&&this.vertexBufferLayout?this.num=b/this.vertexBufferLayout.getStride():this.num=b},a.prototype.addData=function(c,b){d(b instanceof this.dataBuffer.getArrayType());!0!==c?this.dataBuffer.whole(b):this.dataBuffer.append(b);this.isDirty=!0},a.prototype.updateSubData=function(c,b,a){this._gl.bindBuffer(this.bufferType,this.glName);this._gl.bufferSubData(this.bufferType,4*b,c.subarray(b,a));this._gl.bindBuffer(this.bufferType,null)},
a.prototype.updateData=function(a,b){this._gl.bindBuffer(this.bufferType,this.glName);this._gl.bufferSubData(this.bufferType,4*a,b);this._gl.bindBuffer(this.bufferType,null)},a.prototype.bind=function(a){this.isDirty&&(this.isDirty=!1,this.setData(this.dataBuffer.getArray(),this.dataBuffer.getSize()));this._gl.bindBuffer(this.bufferType,this.glName);this.isVBO&&this.vertexBufferLayout&&this.vertexBufferLayout.setVertexAttribPointers(this._gl,a)},a.prototype.unbind=function(){this._gl.bindBuffer(this.bufferType,
null)},a.prototype.getNum=function(){return this.num},a.prototype.getId=function(){return this.id},a.prototype.dispose=function(){this._gl.deleteBuffer(this.glName);this.dataBuffer.getArray()},a}()});