//>>built
define(["esri/views/3d/layers/graphics/Graphics3DSymbolCommonCode","esri/views/3d/webgl-engine/lib/gl-matrix","esri/views/3d/webgl-engine/lib/Util"],function(n,p,q){var h=p.vec3d,m=p.mat4d,r=q.logWithBase;return{getOrigin:function(c,k,b,a){if(!(0>=c.length)){var e=h.create();n.chooseOrigin(c,b,a,e);n.subtractCoordinates(c,0,k,e);var g,d=0,f=h.createFrom(c[d],c[d+1],c[d+2]),l=h.create(this.bbMin);for(b=0;b<k;b++)for(d=3*b,a=0;3>a;a++)g=c[d+a],g<f[a]?f[a]=g:g>l[a]&&(l[a]=g);a=h.create();h.lerp(f,l,
.5,a);for(b=f=0;b<k;b++)d=3*b,l=c[d]-a[0],g=c[d+1]-a[1],d=c[d+2]-a[2],d=l*l+g*g+d*d,d>f&&(f=d);f=Math.sqrt(f);b=m.identity();m.translate(b,e,b);c=m.maxScale(b);m.multiplyVec3(b,a,a);e=0;b=f*c*10/1E4;1<b&&(e=Math.ceil(r(b,2)));c=1E4*Math.pow(2,e);b=Math.round(a[0]/c);k=Math.round(a[1]/c);a=Math.round(a[2]/c);e=e+"_"+b+"_"+k+"_"+a;return{vec3:h.createFrom(b*c,k*c,a*c),id:e}}}}});