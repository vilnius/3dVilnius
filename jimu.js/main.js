// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"jimu/ConfigManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/topic dojo/Deferred dojo/on ./utils ./WidgetManager ./shared/AppVersionManager ./ConfigLoader ./tokenUtils ./portalUtils esri/config esri/tasks/GeometryService".split(" "),function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u){function t(a,b){var e=c.clone(a),d=g.widgetProperties;"undefined"===typeof b&&(b=!1);delete e.mode;g.visitElement(e,function(a,m){a.widgets?(delete a.isOnScreen,
delete a.gid,"jimu.js/images/group_icon.png"===a.icon&&delete a.icon,delete a.openType,m.isOnScreen&&a.panel&&g.isEqual(a.panel,e.widgetOnScreen.panel)&&delete a.panel):(a.icon&&a.icon===a.folderUrl+"images/icon.png?wab_dv\x3d"+window.deployVersion&&delete a.icon,delete a.panel,delete a.folderUrl,delete a.amdFolder,delete a.thumbnail,delete a.configFile,delete a.gid,delete a.isOnScreen,d.forEach(function(b){delete a[b]}),b?("undefined"===typeof a.openAtStart&&(a.openAtStart=!1),a.config||delete a.config):
(a.visible&&delete a.visible,a.manifest&&a.label===a.manifest.label&&delete a.label,a.isDefaultConfig&&(delete a.config,delete a.isDefaultConfig)),delete a.manifest)});delete e.rawAppConfig;delete e._ssl;delete e.getConfigElementById;delete e.getConfigElementsByName;delete e.getConfigElementByLabel;delete e.processNoUriWidgets;delete e.addElementId;delete e.getCleanConfig;delete e.visitElement;delete e.agolConfig;delete e._itemData;delete e.oldWabVersion;return e}var r=null,x;x=p(null,{urlParams:null,
appConfig:null,configFile:null,_configLoaded:!1,portalSelf:null,constructor:function(e){this.urlParams=e||{};this.listenBuilderEvents();this.versionManager=new b;this.widgetManager=f.getInstance();this.configLoader=a.getInstance(this.urlParams,{versionManager:this.versionManager});"config"===this.urlParams.mode&&window.parent.setConfigViewerTopic&&c.isFunction(window.parent.setConfigViewerTopic)&&window.parent.setConfigViewerTopic(k);"preview"===this.urlParams.mode&&window.parent.setPreviewViewerTopic&&
c.isFunction(window.parent.setPreviewViewerTopic)&&window.parent.setPreviewViewerTopic(k);h(window,"resize",c.hitch(this,this._onWindowResize))},listenBuilderEvents:function(){k.subscribe("builder/widgetChanged",c.hitch(this,this._onWidgetChanged));k.subscribe("builder/groupChanged",c.hitch(this,this._onGroupChanged));k.subscribe("builder/widgetPoolChanged",c.hitch(this,this._onWidgetPoolChanged));k.subscribe("builder/openAtStartChange",c.hitch(this,this._onOpenAtStartChanged));k.subscribe("builder/onScreenOrderChanged",
c.hitch(this,this._onScreenOrderChanged));k.subscribe("builder/layoutDefinitionChanged",c.hitch(this,this._onLayoutDefinitionChanged));k.subscribe("builder/sceneViewChanged",c.hitch(this,this._onSceneViewChanged));k.subscribe("builder/mapOptionsChanged",c.hitch(this,this._onMapOptionsChanged));k.subscribe("builder/appAttributeChanged",c.hitch(this,this._onAppAttributeChanged));k.subscribe("builder/setAppConfig",c.hitch(this,this._onAppConfigSet));k.subscribe("builder/themeChanged",c.hitch(this,this._onThemeChanged));
k.subscribe("builder/layoutChanged",c.hitch(this,this._onLayoutChanged));k.subscribe("builder/styleChanged",c.hitch(this,this._onStyleChanged));k.subscribe("builder/syncExtent",c.hitch(this,this._onSyncExtent));k.subscribe("builder/loadingPageChanged",c.hitch(this,this._onLoadingPageChanged));k.subscribe("builder/templateConfigChanged",c.hitch(this,this._onTemplateConfigChanged));k.subscribe("builder/sharedThemeChanged",c.hitch(this,this._onSharedThemeChanged))},loadConfig:function(){if("preview"!==
this.urlParams.mode&&"config"!==this.urlParams.mode)return this.configLoader.loadConfig().then(c.hitch(this,function(a){this.portalSelf=this.configLoader.portalSelf;this.appConfig=this._addDefaultValues(a);window.appInfo.isRunInMobile=this._isRunInMobile();console.timeEnd("Load Config");a=this.getAppConfig();k.publish("appConfigLoaded",a);return a}),c.hitch(this,function(a){console.error(a);a&&a.message&&"string"===typeof a.message&&this._showErrorMessage(a.message)}))},_showErrorMessage:function(a){l.create("div",
{"class":"app-error",innerHTML:g.sanitizeHTML("Unable to create map: "+a)},document.body)},getAppConfig:function(){var a;window.appInfo.isRunInMobile?(a=c.clone(this._getMobileConfig(this.appConfig)),a._originConfig=c.clone(this.appConfig)):a=c.clone(this.appConfig);a.getConfigElementById=function(a){return g.getConfigElementById(this,a)};a.getConfigElementByLabel=function(a){return g.getConfigElementByLabel(this,a)};a.getConfigElementsByName=function(a){return g.getConfigElementsByName(this,a)};
a.getCleanConfig=function(a){return this._originConfig?t(this._originConfig,a):t(this,a)};a.visitElement=function(a){g.visitElement(this,a)};return a},_onWindowResize:function(){var a=this._isRunInMobile();window.appInfo.isRunInMobile!==a&&(window.appInfo.isRunInMobile=a,this.appConfig&&k.publish("appConfigChanged",this.getAppConfig(),"layoutChange"))},_isRunInMobile:function(){var a=l.getMarginBox(window.jimuConfig.layoutId);if(a.w<=window.jimuConfig.breakPoints[0]||a.h<=window.jimuConfig.breakPoints[0])return l.addClass(window.jimuConfig.layoutId,
"jimu-ismobile"),!0;l.removeClass(window.jimuConfig.layoutId,"jimu-ismobile");return!1},_getMobileConfig:function(a){return g.mixinAppConfigPosition(a,a.mobileLayout)},_onWidgetChanged:function(a){var b=g.reCreateObject(a);a=g.getConfigElementById(this.appConfig,a.id);!1!==b.inPanel||a.uri||(b.closeable=!0);for(var e in b)a[e]=b[e];delete a.isDefaultConfig;this.configLoader.addNeedValues(this.appConfig);this._addDefaultValues(this.appConfig);k.publish("appConfigChanged",this.getAppConfig(),"widgetChange",
b)},_onGroupChanged:function(a){var b=g.reCreateObject(a);a=g.getConfigElementById(this.appConfig,a.id);for(var e in b)a[e]=b[e];this.configLoader.addNeedValues(this.appConfig);this._addDefaultValues(this.appConfig);k.publish("appConfigChanged",this.getAppConfig(),"groupChange",b)},_onWidgetPoolChanged:function(a){a=g.reCreateObject(a);if(1===this.widgetManager.getControllerWidgets().length)this.appConfig.widgetPool.widgets=a.widgets,this.appConfig.widgetPool.groups=a.groups;else{var b=g.getConfigElementById(this.appConfig,
a.controllerId);n.forEach(b.controlledWidgets,function(a){this._removeWidgetOrGroupFromPoolById(this.appConfig,a)},this);n.forEach(b.controlledGroups,function(a){this._removeWidgetOrGroupFromPoolById(this.appConfig,a)},this);this.appConfig.widgetPool.widgets="undefined"===typeof this.appConfig.widgetPool.widgets?a.widgets:this.appConfig.widgetPool.widgets.concat(a.widgets);this.appConfig.widgetPool.groups="undefined"===typeof this.appConfig.widgetPool.groups?a.groups:this.appConfig.widgetPool.groups.concat(a.groups);
this.configLoader.addNeedValues(this.appConfig);b.controlledWidgets=n.map(a.widgets,function(a){return a.id});b.controlledGroups=n.map(a.groups,function(a){return a.id})}this.configLoader.addNeedValues(this.appConfig);this._addDefaultValues(this.appConfig);k.publish("appConfigChanged",this.getAppConfig(),"widgetPoolChange",a)},_removeWidgetOrGroupFromPoolById:function(a,b){n.some(a.widgetPool.widgets,function(e,d){if(e.id===b)return a.widgetPool.widgets.splice(d,1),!0});n.some(a.widgetPool.groups,
function(e,d){if(e.id===b)return a.widgetPool.groups.splice(d,1),!0})},_onOpenAtStartChanged:function(a){var b=g.reCreateObject(a),e=this.appConfig;a.isOnScreen?(e=e.widgetOnScreen&&e.widgetOnScreen.widgets)&&0<e.length&&n.forEach(e,c.hitch(this,function(b){b.id===a.id?b.openAtStart=!b.openAtStart:delete b.openAtStart})):((e=e.widgetPool)&&e.groups&&0<e.groups.length&&n.forEach(e.groups,c.hitch(this,function(b){b.id===a.id?b.openAtStart=!b.openAtStart:delete b.openAtStart})),e&&e.widgets&&0<e.widgets.length&&
n.forEach(e.widgets,c.hitch(this,function(b){b.id===a.id?b.openAtStart=!b.openAtStart:delete b.openAtStart})));k.publish("appConfigChanged",this.getAppConfig(),"openAtStartChange",b)},_onScreenOrderChanged:function(a){var b=g.reCreateObject(a);n.forEach(this.appConfig.widgetOnScreen.widgets,function(a){a.isController||(!1!==a.inPanel||!0!==a.closeable)&&!0!==a.inPanel&&a.uri||n.some(b,function(b){if(a.id===b.id)return a.position=b.position,!0})},this);k.publish("appConfigChanged",this.getAppConfig(),
"onScreenOrderChange",b)},_onAppAttributeChanged:function(a){a=g.reCreateObject(a);c.mixin(this.appConfig,a);this.configLoader.processProxy(this.appConfig);this.configLoader.addNeedValues(this.appConfig);this._addDefaultValues(this.appConfig);k.publish("appConfigChanged",this.getAppConfig(),"attributeChange",a)},_onLoadingPageChanged:function(a){a=g.reCreateObject(a);var b;"backgroundColor"in a?this.appConfig.loadingPage.backgroundColor=a.backgroundColor:"backgroundImage"in a?(b=this.appConfig.loadingPage.backgroundImage||
{},this.appConfig.loadingPage.backgroundImage=c.mixin(b,a.backgroundImage)):"loadingGif"in a&&(b=this.appConfig.loadingPage.loadingGif||{},this.appConfig.loadingPage.loadingGif=c.mixin(b,a.loadingGif));this.configLoader.addNeedValues(this.appConfig);this._addDefaultValues(this.appConfig);k.publish("appConfigChanged",this.getAppConfig(),"loadingPageChange",a)},_onTemplateConfigChanged:function(a){a=g.reCreateObject(a);this.appConfig.templateConfig=a;this.configLoader.addNeedValues(this.appConfig);
this._addDefaultValues(this.appConfig);k.publish("appConfigChanged",this.getAppConfig(),"templateConfigChange",a)},_onLayoutDefinitionChanged:function(a){a=g.reCreateObject(a);g.isEqual(this.appConfig.layoutDefinition,a.layoutDefinition)||(this.appConfig.layoutDefinition=a.layoutDefinition,this.appConfig.widgetOnScreen.groups=g.handleGridLayoutOnScreenGroupChange(this.appConfig.widgetOnScreen.groups,a.groupIds),this.configLoader.addNeedValues(this.appConfig),this._addDefaultValues(this.appConfig),
k.publish("appConfigChanged",this.getAppConfig(),"layoutDefinitionChange",a.layoutDefinition))},_onSceneViewChanged:function(a){a=g.reCreateObject(a);a.itemId&&a.itemId!==this.appConfig.map.itemId&&this.appConfig.map.mapOptions&&g.deleteMapOptions(this.appConfig.map.mapOptions);c.mixin(this.appConfig.map,a);this.configLoader.addNeedValues(this.appConfig);this._addDefaultValues(this.appConfig);k.publish("appConfigChanged",this.getAppConfig(),"mapChange",a)},_onMapOptionsChanged:function(a){a=g.reCreateObject(a);
this.appConfig.map.mapOptions||(this.appConfig.map.mapOptions={});c.mixin(this.appConfig.map.mapOptions,a);k.publish("appConfigChanged",this.getAppConfig(),"mapOptionsChange",a)},_onThemeChanged:function(a){this._getAppConfigFromTheme(a).then(c.hitch(this,function(b){this.appConfig=b;k.publish("appConfigChanged",this.getAppConfig(),"themeChange",a.getName())}))},_onLayoutChanged:function(a){this.appConfig=g.mixinAppConfigPosition(this.appConfig,a.layoutConfig);this.appConfig.layoutDefinition=a.layoutConfig.layoutDefinition;
this.configLoader.addNeedValues(this.appConfig);this._addDefaultValues(this.appConfig);this._addDefaultPanelAndPosition(this.appConfig);k.publish("appConfigChanged",this.getAppConfig(),"layoutChange",a.name)},_onStyleChanged:function(a){this.appConfig.theme.styles=this._genStyles(this.appConfig.theme.styles,a.name);a.isCustom?this.appConfig.theme.customStyles={mainBackgroundColor:a.styleColor}:(delete this.appConfig.theme.customStyles,delete this.appConfig.titleColor,this.appConfig.theme.sharedTheme=
{isPortalSupport:this.appConfig.theme.sharedTheme.isPortalSupport,useHeader:!1,useLogo:!1});k.publish("appConfigChanged",this.getAppConfig(),"styleChange",a.name)},_onSharedThemeChanged:function(a){var b=this.appConfig.theme.sharedTheme;a=g.reCreateObject(a);a.useHeader&&!b.useHeader&&(this.portalSelf.portalProperties&&this.portalSelf.portalProperties.sharedTheme?(this.appConfig.theme.customStyles={mainBackgroundColor:this.portalSelf.portalProperties.sharedTheme.header.background},this.appConfig.titleColor=
this.portalSelf.portalProperties.sharedTheme.header.text,this._onAppAttributeChanged({titleColor:this.appConfig.titleColor})):console.error("Portal does not support sharedTheme."));!a.useHeader&&b.useHeader&&(delete this.appConfig.titleColor,this._onAppAttributeChanged({titleColor:this.appConfig.titleColor}));a.useLogo&&!b.useLogo&&(this.portalSelf.portalProperties&&this.portalSelf.portalProperties.sharedTheme?(this.appConfig.logo=this.portalSelf.portalProperties.sharedTheme.logo.small?this.portalSelf.portalProperties.sharedTheme.logo.small:
"images/app-logo.png",this.appConfig.logoLink=this.portalSelf.portalProperties.sharedTheme.logo.link,this._onAppAttributeChanged({logo:this.appConfig.logo,logoLink:this.appConfig.logoLink})):console.error("Portal does not support sharedTheme."));!a.useLogo&&b.useLogo&&this._onAppAttributeChanged({logo:this.appConfig.logo});c.mixin(b,a);k.publish("appConfigChanged",this.getAppConfig(),"sharedThemeChange",a)},_onSyncExtent:function(a){k.publish("syncExtent",a)},_genStyles:function(a,b){var e=[];e.push(b);
n.forEach(a,function(a){0>e.indexOf(a)&&e.push(a)});return e},_getAppConfigFromTheme:function(a){var b=new d,e,m=[],f=this.getAppConfig().getCleanConfig();f.mode=this.urlParams.mode;n.forEach(f.widgetPool.groups,function(a){delete a.panel},this);if(a.appConfig)e=c.clone(a.appConfig),e.map=f.map,e.map.position=a.appConfig.map.position,this._copyPoolToThemePool(f,e),e.links=f.links,e.title=f.title,e.subtitle=f.subtitle,e.logo=f.logo;else{var r=a.getCurrentLayout(),m=a.getCurrentStyle();e=c.clone(f);
r=c.clone(r.layoutConfig);e.widgetOnScreen=r.widgetOnScreen;r.widgetPool&&(n.forEach(r.widgetPool.widgets,function(a){a.isPreconfiguredInTheme=!0}),n.forEach(r.widgetPool.groups,function(a){a.isPreconfiguredInTheme=!0}));this._copyPoolToThemePool(f,r);e.widgetPool=r.widgetPool;r.map&&r.map.position&&(e.map.position=r.map.position);e.mobileLayout=r.mobileLayout;e.layoutDefinition=r.layoutDefinition;m=this._genStyles(n.map(a.getStyles(),function(a){return a.name}),m.name);e.theme={name:a.getName(),
styles:m,version:a.getVersion()};this.portalSelf.portalProperties&&this.portalSelf.portalProperties.sharedTheme?(e.theme.sharedTheme={useHeader:!0,useLogo:!0,isPortalSupport:!0},e.theme.customStyles={mainBackgroundColor:this.portalSelf.portalProperties.sharedTheme.header.background}):(e.theme.sharedTheme={useHeader:!1,useLogo:!1,isPortalSupport:!1},e.theme.customStyles={mainBackgroundColor:""});e.titleColor=f.titleColor;e.logoLink=f.logoLink}this.configLoader.addNeedValues(e);this.configLoader.loadWidgetsManifest(e).then(c.hitch(this,
function(){this._addDefaultValues(e);b.resolve(e)}));return b},_copyPoolToThemePool:function(a,b){var e=a.widgetPool;b.widgetPool||(b.widgetPool={});a=b.widgetPool;var d=n.filter(a.widgets,function(a){if(a.isPreconfiguredInTheme||!n.some(e.widgets,function(b){return b.name===a.name}))return!0}),m=n.filter(a.groups,function(a){return a.isPreconfiguredInTheme}),f=n.filter(e.widgets,function(a){return!a.isPreconfiguredInTheme}),r=n.filter(e.groups,function(a){return!a.isPreconfiguredInTheme}),f=this._getPoolWidgetsWithoutDuplicated(f,
b.widgetOnScreen.widgets||[]);a.widgets=f.concat(d);a.groups=r.concat(m)},_getPoolWidgetsWithoutDuplicated:function(a,b){for(var e=c.clone(a),d=this.getAppConfig(),m=a.length-1;0<=m;m--)for(var f=b.length-1;0<=f;f--)if(b[f].uri){var r=b[f].name;r||(r=g.getWidgetNameFromUri(b[f].uri));var q=d.getConfigElementById(a[m].id);a[m]&&a[m].name===r&&!1===q.supportMultiInstance&&(console.log("Widget",a[m].name,"is not copied to new theme because this widget exists in new theme."),e.splice(m,1))}return e},
_onAppConfigSet:function(a){a=g.reCreateObject(a);window.appInfo.isRunInMobile=this._isRunInMobile();this.configLoader.processProxy(a);this.configLoader.addNeedValues(a);this._addDefaultValues(a);e.setPortalUrl(a.portalUrl);this.appConfig?(a.map.itemId&&a.map.itemId!==this.appConfig.map.itemId&&g.deleteMapOptions(a.map.mapOptions),this.appConfig=a,k.publish("appConfigChanged",this.getAppConfig(),"resetConfig",a)):(this.appConfig=a,m.getPortal(a.portalUrl).loadSelfInfo().then(c.hitch(this,function(a){this.portalSelf=
a;k.publish("appConfigLoaded",this.getAppConfig())})))},_addDefaultValues:function(a){this._addDefaultPortalUrl(a);this._addDefaultGeometryService(a);this._addDefaultStyle(a);this._addDefaultMap(a);this._addDefaultVisible(a);this._addDefaultSharedTheme(a);"undefined"===typeof a.widgetOnScreen&&(a.widgetOnScreen={});"undefined"===typeof a.widgetPool&&(a.widgetPool={});this._addDefaultPanelAndPosition(a);this._addDefaultOfWidgetGroup(a);(a.widgetPool.widgets&&0<a.widgetPool.widgets.length&&void 0===
a.widgetPool.widgets[0].index||a.widgetPool.groups&&0<a.widgetPool.groups.length&&void 0===a.widgetPool.groups[0].index)&&this._addIndexForWidgetPool(a);return a},_addDefaultPortalUrl:function(a){"undefined"===typeof a.portalUrl&&(a.portalUrl="http://www.arcgis.com/");a.portalUrl&&"/"!==a.portalUrl.substr(a.portalUrl.length-1)&&(a.portalUrl+="/")},_addDefaultGeometryService:function(a){var b=a&&a.geometryService,b=b&&"string"===typeof b&&c.trim(b)?c.trim(b):this.portalSelf.helperServices.geometry.url;
a.geometryService=b;q.geometryService=new u(a.geometryService);g.setGlobalGeometryService(a.geometryService)},_addDefaultStyle:function(a){!a.theme||a.theme.styles&&0!==a.theme.styles.length||(a.theme.styles=["default"])},_addDefaultMap:function(a){a.map.id="map";"undefined"===typeof a.map["3D"]&&"undefined"===typeof a.map["2D"]&&(a.map["2D"]=!0);"undefined"===typeof a.map.position&&(a.map.position={left:0,right:0,top:0,bottom:0});"undefined"===typeof a.map.portalUrl&&(a.map.portalUrl=a.portalUrl)},
_addDefaultVisible:function(a){g.visitElement(a,function(a){void 0===a.visible&&(a.visible=!0)})},_addDefaultSharedTheme:function(a){a.theme.sharedTheme?("undefined"===typeof a.theme.sharedTheme.useHeader&&(a.theme.sharedTheme.useHeader=!1),"undefined"===typeof a.theme.sharedTheme.useLogo&&(a.theme.sharedTheme.useLogo=!1)):a.theme.sharedTheme={useHeader:!1,useLogo:!1}},_addDefaultPanelAndPosition:function(a){this._addOnScreenDefaultPanelAndPosition(a);this._addPoolDefaultPanelAndPosition(a)},_addOnScreenDefaultPanelAndPosition:function(a){var b,
e;if(a=a.widgetOnScreen){b=a.panel&&a.panel.positionRelativeTo?a.panel.positionRelativeTo:"map";"undefined"===typeof a.panel||"undefined"===typeof a.panel.uri?a.panel={uri:"jimu/OnScreenWidgetPanel",position:{relativeTo:b}}:"undefined"===typeof a.panel.position?a.panel.position={relativeTo:b}:"undefined"===typeof a.panel.position.relativeTo&&(a.panel.position.relativeTo=b);if(a.widgets)for(b=0;b<a.widgets.length;b++)a.widgets[b].position||(a.widgets[b].position={}),a.widgets[b].position.relativeTo||
(a.widgets[b].position.relativeTo=a.widgets[b]&&a.widgets[b].positionRelativeTo?a.widgets[b].positionRelativeTo:"map"),!0!==a.widgets[b].inPanel||a.widgets[b].panel||(a.widgets[b].panel=c.clone(a.panel),a.widgets[b].panel.position=a.widgets[b].position,a.widgets[b].panel.position.relativeTo=a.widgets[b].position.relativeTo);if(a.groups)for(b=0;b<a.groups.length;b++)for(a.groups[b].panel||(a.groups[b].panel=a.panel),a.groups[b].panel&&!a.groups[b].panel.position&&(a.groups[b].panel.position={}),a.groups[b].panel.position.relativeTo||
(a.groups[b].panel.position.relativeTo=a.groups[b].panel.positionRelativeTo?a.groups[b].panel.positionRelativeTo:"map"),a.groups[b].widgets||(a.groups[b].widgets=[]),e=0;e<a.groups[b].widgets.length;e++)a.groups[b].widgets[e].panel=a.groups[b].panel}},_addPoolDefaultPanelAndPosition:function(a){var b,e,d=a.widgetPool;if(d){b=d.panel&&d.panel.positionRelativeTo?d.panel.positionRelativeTo:"map";"undefined"===typeof d.panel||"undefined"===typeof d.panel.uri?d.panel={uri:"jimu/OnScreenWidgetPanel",position:{relativeTo:b}}:
"undefined"===typeof d.panel.position?d.panel.position={relativeTo:b}:"undefined"===typeof d.panel.position.relativeTo&&(d.panel.position.relativeTo=b);if(d.groups)for(b=0;b<d.groups.length;b++)for(d.groups[b].panel?d.groups[b].panel.position.relativeTo||(d.groups[b].panel.position.relativeTo=d.groups[b].panel.positionRelativeTo?d.groups[b].panel.positionRelativeTo:"map"):d.groups[b].panel=d.panel,d.groups[b].widgets||(d.groups[b].widgets=[]),e=0;e<d.groups[b].widgets.length;e++)d.groups[b].widgets[e].panel=
d.groups[b].panel;if(d.widgets)for(b=0;b<d.widgets.length;b++)!1===d.widgets[b].inPanel?(e=d.widgets[b].positionRelativeTo?d.widgets[b].positionRelativeTo:"map",d.widgets[b].position)?d.widgets[b].position.relativeTo||(d.widgets[b].position.relativeTo=e):d.widgets[b].position={relativeTo:e}:d.widgets[b].panel||(d.widgets[b].panel=a.widgetPool.panel)}},_addDefaultOfWidgetGroup:function(a){g.visitElement(a,c.hitch(this,function(a,b){a.isOnScreen=b.isOnScreen;a.widgets?(a.gid=a.id,1===a.widgets.length?
(a.label||(a.label=a.widgets[0].label?a.widgets[0].label:"Group"),a.icon||(a.icon=a.widgets[0].uri?this._getDefaultIconFromUri(a.widgets[0].uri):"jimu.js/images/group_icon.png")):(a.icon=a.icon?a.icon:"jimu.js/images/group_icon.png",a.label=a.label?a.label:"Group_"+b.index)):(a.gid=b.groupId,a.uri&&g.processWidgetSetting(a))}))},_getDefaultIconFromUri:function(a){a=a.split("/");a.pop();return a.join("/")+"/images/icon.png"},_addIndexForWidgetPool:function(a){var b=0,e,d;if(a.widgetPool.widgets)for(e=
0;e<a.widgetPool.widgets.length;e++)a.widgetPool.widgets[e].index=b,b++;if(a.widgetPool.groups)for(e=0;e<a.widgetPool.groups.length;e++)for(a.widgetPool.groups[e].index=b,b++,d=0;d<a.widgetPool.groups[e].widgets.length;d++)a.widgetPool.groups[e].widgets[d].index=d}});x.getInstance=function(a){null===r?r=new x(a):a&&(r.urlParams=a);window.getAppConfig=c.hitch(r,r.getAppConfig);return r};return x})},"dojo/_base/html":function(){define("./kernel ../dom ../dom-style ../dom-attr ../dom-prop ../dom-class ../dom-construct ../dom-geometry".split(" "),
function(p,c,n,l,k,d,h,g){p.byId=c.byId;p.isDescendant=c.isDescendant;p.setSelectable=c.setSelectable;p.getAttr=l.get;p.setAttr=l.set;p.hasAttr=l.has;p.removeAttr=l.remove;p.getNodeProp=l.getNodeProp;p.attr=function(d,b,a){return 2==arguments.length?l["string"==typeof b?"get":"set"](d,b):l.set(d,b,a)};p.hasClass=d.contains;p.addClass=d.add;p.removeClass=d.remove;p.toggleClass=d.toggle;p.replaceClass=d.replace;p._toDom=p.toDom=h.toDom;p.place=h.place;p.create=h.create;p.empty=function(d){h.empty(d)};
p._destroyElement=p.destroy=function(d){h.destroy(d)};p._getPadExtents=p.getPadExtents=g.getPadExtents;p._getBorderExtents=p.getBorderExtents=g.getBorderExtents;p._getPadBorderExtents=p.getPadBorderExtents=g.getPadBorderExtents;p._getMarginExtents=p.getMarginExtents=g.getMarginExtents;p._getMarginSize=p.getMarginSize=g.getMarginSize;p._getMarginBox=p.getMarginBox=g.getMarginBox;p.setMarginBox=g.setMarginBox;p._getContentBox=p.getContentBox=g.getContentBox;p.setContentSize=g.setContentSize;p._isBodyLtr=
p.isBodyLtr=g.isBodyLtr;p._docScroll=p.docScroll=g.docScroll;p._getIeDocumentElementOffset=p.getIeDocumentElementOffset=g.getIeDocumentElementOffset;p._fixIeBiDiScrollLeft=p.fixIeBiDiScrollLeft=g.fixIeBiDiScrollLeft;p.position=g.position;p.marginBox=function(d,b){return b?g.setMarginBox(d,b):g.getMarginBox(d)};p.contentBox=function(d,b){return b?g.setContentSize(d,b):g.getContentBox(d)};p.coords=function(d,b){p.deprecated("dojo.coords()","Use dojo.position() or dojo.marginBox().");d=c.byId(d);var a=
n.getComputedStyle(d),a=g.getMarginBox(d,a);d=g.position(d,b);a.x=d.x;a.y=d.y;return a};p.getProp=k.get;p.setProp=k.set;p.prop=function(d,b,a){return 2==arguments.length?k["string"==typeof b?"get":"set"](d,b):k.set(d,b,a)};p.getStyle=n.get;p.setStyle=n.set;p.getComputedStyle=n.getComputedStyle;p.__toPixelValue=p.toPixelValue=n.toPixelValue;p.style=function(d,b,a){switch(arguments.length){case 1:return n.get(d);case 2:return n["string"==typeof b?"get":"set"](d,b)}return n.set(d,b,a)};return p})},"jimu/utils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/sniff dojo/_base/config dojo/io-query dojo/query dojo/NodeList-traverse dojo/Deferred dojo/promise/all dojo/on dojo/json dojo/cookie dojo/number dojo/date/locale dojo/i18n!dojo/cldr/nls/number dojox/encoding/base64 esri/kernel esri/config esri/geometry/SpatialReference esri/geometry/Extent esri/geometry/Multipoint esri/geometry/Polyline esri/geometry/Polygon esri/geometry/support/webMercatorUtils esri/tasks/GeometryService esri/tasks/support/ProjectParameters esri/core/urlUtils esri/request esri/identity/IdentityManager esri/identity/OAuthInfo jimu/portalUrlUtils ./shared/utils".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z,A,B,D,C,E,H,G,I,K,M,T){function N(a,b){a=a||"";var e=0,d=[{test:window.File&&window.FileReader&&window.FileList&&window.Blob||!F.file.isEnabledFlash(),failure:[a+"libs/polyfills/fileAPI/FileAPI.js"],callback:function(){e++;e===d.length&&b()}}];for(a=0;a<d.length;a++)testLoad(d[a])}function S(a,b){var e=a.match(/url\([^)]+\)/gi),d,m;if(null===e||""===b)return a;for(d=0;d<e.length;d++)if(m=e[d].match(/(url\(["|']?)(.*)((?:['|"]?)\))/i),4<=m.length){var r=
m[2];/^data:image\/.*;/.test(r)||(b.endWith("/")||(b+="/"),a=a.replace(m[1]+r+m[3],m[1]+b+r+m[3]))}return a}function O(a,b){var e=Array.isArray(b),d=e&&[]||{};e?(a=a||[],d=d.concat(a),b.forEach(function(b,e){"undefined"===typeof a[e]?d[e]=b:"object"===typeof b?d[e]=O(a[e],b):-1===a.indexOf(b)&&d.push(b)})):(a&&"object"===typeof a&&Object.keys(a).forEach(function(b){d[b]=a[b]}),Object.keys(b).forEach(function(e){d[e]="object"===typeof b[e]&&b[e]?a[e]?O(a[e],b[e]):b[e]:b[e]}));return d}function V(a){var b,
e={};b=a.indexOf("/");a.substring(0,b);b=a.substring(0,a.lastIndexOf("/")+1);e.folderUrl=require(F.getRequireConfig()).toUrl(b);e.amdFolder=b;e.url=e.folderUrl;if(/^http(s)?:\/\//.test(a)||/^\/\//.test(a))e.isRemote=!0;return e}function Q(a){a.panels.forEach(function(a){a.uri="panels/"+a.name+"/Panel.js"});a.styles.forEach(function(a){a.uri="styles/"+a.name+"/style.css"});a.layouts.forEach(function(a){a.uri="layouts/"+a.name+"/config.json";a.icon="layouts/"+a.name+"/icon.png";a.RTLIcon="layouts/"+
a.name+"/icon_rtl.png"})}function J(a,b){var e=a.map(function(a){return a.id});c.forEach(b,function(b){0>e.indexOf(b)&&a.push({id:b,widgets:[]})},this);var d=[];a=c.filter(a,function(a){return 0>b.indexOf(a.id)?(d.push(a),!1):!0},this);if(0===a.length)return[];var m=a[a.length-1];c.forEach(d,function(a){m.widgets=m.widgets.concat(a.widgets)},this);return a=a.sort(function(a,e){return b.indexOf(a.id)-b.indexOf(e.id)})}function P(a,b,e){function d(a,b){return p.isArray(a[b.key])?a[b.key][b.index]:a[b.key]}
b=function(a){var b=[];a.split("_").forEach(function(a){var e=!1,d;"--"===a.slice(a.length-2)&&(e=!0,a=a.slice(0,a.length-2));d=a.search(/\[[0-9]+\]/);-1===d&&(d=a.length);b.push({key:a.slice(0,d),index:Number(a.slice(d+1,-1)),deleteFlag:e})});return b}(b);for(var m=1;m<b.length-1;m++)if(a=d(a,b[m]),!a)return;if(b[b.length-1].deleteFlag)!0===e&&(p.isArray(a[b[b.length-1].key])?delete a[b[b.length-1].key][b[b.length-1].index]:delete a[b[b.length-1].key]);else if(p.isArray(a[b[b.length-1].key])){if(void 0===
e)return a[b[b.length-1].key][b[b.length-1].index];a[b[b.length-1].key][b[b.length-1].index]=e}else{if(void 0===e)return a[b[b.length-1].key];a[b[b.length-1].key]=e}}function L(a,b,e){function d(e){e=F.template.getSearchRange(b,e,"]");var d=b.slice(e.firstPos,e.lastPos);return-1!==e.firstPos?(d=b.slice(e.firstPos+d.indexOf("[")+1,e.lastPos-1),e=b.slice(e.lastPos+1),(d=F.getConfigElementById(a,d))?{object:d,key:"section_"+e,state:"isSection"}:{state:"deleted"}):{state:"isNotSection"}}var m=a,r=b=b.replace(/\//g,
"_"),f=d("groups\\[.+\\]");if("deleted"!==f.state&&("isSection"===f.state&&(m=f.object,r=f.key),f=d("widgets\\[.+\\]"),"delete"!==f.state))return"isSection"===f.state&&(m=f.object,r=f.key),P(m,r,e)}var F={},Y={geometryService:"http://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer"};p.mixin(F,T);window.atob||(window.atob=function(a){a=r.decode(a);for(var b="",e=0,d=a.length;e<d;e++)b+=String.fromCharCode(a[e]);return b});window.btob||(window.btob=function(a){for(var b=[],e=0,
d=a.length;e<d;e++)b.push(String.charCodeAt(a[e]));return r.encode(b)});var X="unload",R=[];require.on("error",function(a){c.forEach(R,function(b){a.info[0]&&-1<a.info[0].indexOf(b.resKey)&&b.def.reject(a);for(var e in a.info)-1<e.indexOf(b.resKey)&&b.def.reject(a)})});F.checkError=function(a,b){R.push({resKey:a,def:b})};F.replacePlaceHolder=function(a,b){var d=e.stringify(a),m=d.match(/\$\{(\w)+\}/g);if(null===m)return a;for(a=0;a<m.length;a++){var r=m[a].match(/(\w)+/g)[0];b[r]&&(d=d.replace(m[a],
b[r]))}return e.parse(d)};F.changeUnit=function(a){var b=Math.abs(a),e;a=Math.floor(b);e=Math.floor(60*(b-a));b=(60*(60*(b-a)-e)).toFixed(2);return a+"\u00b0"+(10>e?"0"+e:e)+"'"+(10>b?"0"+b:b)+'"'};F.formatTime=function(a){var b=a/1E3;a=Math.floor(b/60);b=Number(b-60*a).toFixed(1);return(10>a?"0"+a:a)+":"+(10>b?"0"+b:b)};F.parseTime=function(a){var b=/(\d{2,})\:(\d{2})\.(\d{1})/;if(!b.test(a))return console.log("wrong time format."),-1;a=a.match(b);return 1E3*(60*parseInt(a[1],10)+parseInt(a[2],10)+
parseInt(a[3],10)/10)};F.preloadImg=function(a,b){var e=[],e="string"===typeof a?[a]:a;c.forEach(e,function(a){(new Image).src=b?b+a:a})};F.setWABLogoDefaultAlt=function(a){if(a){a=h("img",a);for(var b=["img_1412759111499","img_1545621838463","img_1560482577021"],e=0,d=a.length;e<d;e++){var m=a[e];-1<b.indexOf(n.getAttr(m,"id"))&&!n.getAttr(m,"alt")&&n.setAttr(m,"alt","Web AppBuilder for ArcGIS.png")}}};var Z=null;F.getImagesSize=function(b){var e=new f;if(!b||0!==b.indexOf("http"))return e.reject(),
e;null===Z&&(Z=n.create("img",{id:"__test-image-size",style:{position:"absolute",left:"-9999px",top:"-9999px"}},document.body));var d=a(Z,"load",function(){clearTimeout(m);m=null;d.remove();var a=n.getContentBox(Z);1===a.w&&1===a.h||0===a.w||0===a.h?e.reject():e.resolve([a.w,a.h])},{}),m=setTimeout(function(){clearTimeout(m);m=null;e.reject()},5E3);n.setAttr(Z,"src",b);return e};F.getPositionStyle=function(a){var b={};if(!a)return b;a=p.clone(a);if(window.isRTL){var e;"undefined"!==typeof a.left&&
"undefined"!==typeof a.right?(e=a.left,a.left=a.right,a.right=e):"undefined"!==typeof a.left?(a.right=a.left,delete a.left):"undefined"!==typeof a.right&&(a.left=a.right,delete a.right);"undefined"!==typeof a.paddingLeft&&"undefined"!==typeof a.paddingRight?(e=a.paddingLeft,a.paddingLeft=a.paddingRight,a.paddingRight=e):"undefined"!==typeof a.paddingLeft?(a.paddingRight=a.paddingLeft,delete a.paddingLeft):"undefined"!==typeof a.paddingRight&&(a.paddingLeft=a.paddingRight,delete a.paddingRight);"undefined"!==
typeof a.marginLeft&&"undefined"!==typeof a.marginRight?(e=a.marginLeft,a.marginLeft=a.marginRight,a.marginRight=e):"undefined"!==typeof a.marginLeft?(a.marginRight=a.marginLeft,delete a.marginLeft):"undefined"!==typeof a.marginRight&&(a.marginLeft=a.marginRight,delete a.marginRight)}e="left top right bottom width height padding paddingLeft paddingRight paddingTop paddingBottom margin marginLeft marginRight marginTop marginBottom".split(" ");for(var d=0;d<e.length;d++){var m=e[d];"number"===typeof a[m]?
b[m]=a[m]+"px":"undefined"!==typeof a[m]?b[m]=a[m]:"padding"===m.substr(0,7)||"margin"===m.substr(0,7)?b[m]=0:b[m]="auto"}b.zIndex="undefined"===typeof a.zIndex?"auto":a.zIndex;return b};F.isEqual=function(a,b){function e(a,b){var r;if(null===a&&null===b||"undefined"===typeof a&&"undefined"===typeof b)return!0;if(null===a&&null!==b||null===b&&null!==a||"undefined"===typeof a&&"undefined"!==typeof b||"undefined"===typeof b&&"undefined"!==typeof a)return!1;if(isNaN(a)&&isNaN(b)&&"number"===typeof a&&
"number"===typeof b||a===b)return!0;if("function"===typeof a&&"function"===typeof b||a instanceof Date&&b instanceof Date||a instanceof RegExp&&b instanceof RegExp||a instanceof String&&b instanceof String||a instanceof Number&&b instanceof Number)return a.toString()===b.toString();if(-1<d.indexOf(a)||-1<m.indexOf(b))return!1;if(null!==b){for(r in b)if(b.hasOwnProperty(r)!==a.hasOwnProperty(r)||typeof b[r]!==typeof a[r])return!1;for(r in a){if(b.hasOwnProperty(r)!==a.hasOwnProperty(r)||typeof b[r]!==
typeof a[r])return!1;switch(typeof a[r]){case "object":case "function":d.push(a);m.push(b);if(!e(a[r],b[r]))return!1;d.pop();m.pop();break;default:if(a[r]!==b[r])return!1}}}return!0}var d,m;d=[];m=[];return e(a,b)?!0:!1};F.getUriInfo=V;F.file={loadFileAPI:function(){var a=new f;if("unload"===X){var b=window.isBuilder?"stemapp/":"";window.FileAPI={debug:!1,flash:!0,staticPath:b+"libs/polyfills/fileAPI/",flashUrl:b+"libs/polyfills/fileAPI/FileAPI.flash.swf",flashImageUrl:b+"libs/polyfills/fileAPI/FileAPI.flash.image.swf"};
N(b,p.hitch(this,function(){X="loaded";a.resolve()}));X="loading"}else"loaded"===X&&a.resolve();return a},supportHTML5:function(){return window.File&&window.FileReader&&window.FileList&&window.Blob?!0:!1},supportFileAPI:function(){return l("safari")&&6>l("safari")?!1:window.FileAPI&&window.FileAPI.readAsDataURL?!0:!1},isEnabledFlash:function(){var a=null;if(document.all)try{a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(ja){a=null}else navigator.plugins&&0<navigator.plugins.length&&(a=
navigator.plugins["Shockwave Flash"]);return!!a},containSeparator:function(a){return 0<=a.indexOf("/")?!0:0<=a.indexOf("\\")?!0:!1},getNameFromPath:function(a){var b="",b=0<=a.indexOf("/")?"/":"\\";a=a.split(b);return 0<a.length?a[a.length-1]:null},getFolderFromPath:function(a){return a.substr(0,a.length-F.file.getNameFromPath(a).length)},readFile:function(a,b,e,d){if(this.supportHTML5()){var m=a.target.files[0];m&&(m.type.match(b)?m.size>=e?d({errCode:"exceed"}):(a=new FileReader,a.onload=function(a){d(null,
m.name,a.target.result)},a.readAsDataURL(m)):d({errCode:"invalidType"}))}else if(this.supportFileAPI()){var r=window.FileAPI.getFiles(a);r[0].type.match(b)?r[0].size>=e?d({errCode:"exceed"}):window.FileAPI.readAsDataURL(r[0],function(a){a&&a.result?d(null,r[0].name,a.result):d({errCode:"readError"})}):d({errCode:"invalidType"})}}};F.processWidgetSetting=function(a){if(!a.uri)return a;p.mixin(a,V(a.uri));a.icon||(a.icon=a.amdFolder+"images/icon.png");a.thumbnail||(a.thumbnail=a.amdFolder+"images/thumbnail.png");
return a};F.getRequireConfig=function(){if(jimuConfig){var a=[];jimuConfig.widgetsPackage&&(a=a.concat(jimuConfig.widgetsPackage));jimuConfig.themesPackage&&(a=a.concat(jimuConfig.themesPackage));jimuConfig.configsPackage&&(a=a.concat(jimuConfig.configsPackage));return{packages:a}}return{}};F.getTypeByGeometryType=function(a){var b="",e="esriGeometryLine esriGeometryCircularArc esriGeometryEllipticArc esriGeometryBezier3Curve esriGeometryPath esriGeometryPolyline".split(" "),d=["esriGeometryRing",
"esriGeometryPolygon","esriGeometryEnvelope"];0<=["esriGeometryPoint","esriGeometryMultipoint"].indexOf(a)?b="point":0<=e.indexOf(a)?b="polyline":0<=d.indexOf(a)&&(b="polygon");return b};F.getSymbolTypeByGeometryType=function(a){var b=null;a=F.getTypeByGeometryType(a);"point"===a?b="marker":"polyline"===a?b="line":"polygon"===a&&(b="fill");return b};F.getServices=function(){return Y};F.getArcGISDefaultGeometryService=function(){return new C(Y.geometryService)};F.restoreToDefaultWebMapExtent=function(a,
b,e){var d=new f;if(!a||"esri.Map"!==a.declaredClass)return setTimeout(function(){d.reject("Invalid map.")},0),d;b=b&&b.itemInfo;if(!b)return setTimeout(function(){d.reject("Invalid itemInfo")},0),d;b=b.item&&b.item.extent;if(!b)return setTimeout(function(){d.reject("Invalid itemInfo.item.extent")}),d;var m=new v({wkid:4326}),m=new y(b[0][0],b[0][1],b[1][0],b[1][1],m);if(4326===parseInt(a.spatialReference.wkid,10))return a.setExtent(m);if(a.spatialReference.isWebMercator)return m=D.geographicToWebMercator(m),
a.setExtent(m);b=new E;b.geometries=[m];b.outSR=a.spatialReference;m=w&&w.defaults&&w.defaults.geometryService;m&&"esri.tasks.GeometryService"===m.declaredClass||(e&&"string"===typeof e&&p.trim(e)?(e=p.trim(e),m=new C(e)):m=F.getArcGISDefaultGeometryService());m.project(b).then(function(b){if(b=b&&b[0])return a.setExtent(b);d.reject("Invalid projected geometry.");return d},function(a){console.error(a);d.reject(a);return d});return d};F.getAncestorWindow=function(){for(var a=window;a&&a.parent&&a!==
a.parent;)a=a.parent;return a};F.getAncestorDom=function(a,b,e){if(a&&1===a.nodeType&&b&&"function"===typeof b){var d=100,m=document.body;e&&("number"===typeof e?(e=parseInt(e,10),0<e&&(d=e)):1===e.nodeType&&(m=e));for(e=0;a.parentNode&&e<d&&n.isDescendant(a.parentNode,m);){if(b(a.parentNode))return a.parentNode;a=a.parentNode;e++}}return null};F.bindClickAndDblclickEvents=function(b,e,d,m){var r=null;if(b&&1===b.nodeType&&e&&"function"===typeof e&&d&&"function"===typeof d){var f=200;m&&"number"===
typeof m&&(m=parseInt(m,10),0<m&&(f=m));var q=0,r=a(b,"click",function(a){q++;1===q?setTimeout(function(){1===q&&(q=0,e(a))},f):2===q&&(q=0,d(a))})}return r};F.isScrollToBottom=function(a){var b=n.getContentBox(a);return 1>a.scrollHeight-(a.scrollTop+b.h)};F.getAllItemTypes=function(){var a=[],a=a.concat(["Web Map","Web Scene","CityEngine Web Scene"]).concat("Feature Service;Map Service;Image Service;KML;WMS;Feature Collection;Feature Collection Template;Geodata Service;Globe Service".split(";")).concat(["Geometry Service",
"Geocoding Service","Network Analysis Service","Geoprocessing Service"]).concat(["Web Mapping Application","Mobile Application","Code Attachment","Operations Dashboard Add In","Operation View"]).concat("Symbol Set;Color Set;Shapefile;CSV;Service Definition;Document Link;Microsoft Word;Microsoft PowerPoint;Microsoft Excel;PDF;Image;Visio Document".split(";"));return a=a.concat("Map Document;Map Package;Tile Package;ArcPad Package;Explorer Map;Globe Document;Scene Document;Published Map;Map Template;Windows Mobile Package".split(";")).concat(["Layer",
"Layer Package","Explorer Layer"]).concat(["Geoprocessing Package","Geoprocessing Sample","Locator Package","Rule Package"]).concat("Workflow Manager Package;Desktop Application;Desktop Application Template;Code Sample;Desktop Add In;Explorer Add In".split(";"))};F.getItemQueryStringByTypes=function(a){var b="",e=F.getAllItemTypes();if(a&&0<a.length&&0<a.length){var d="";c.forEach(a,function(b,e){d+=' type:"'+b+'" ';e!==a.length-1&&(d+=" OR ")});b=" ( "+d+" ) ";e=a.concat(e);e=c.filter(e,function(b){return c.every(a,
function(a){return 0>a.toLowerCase().indexOf(b.toLowerCase())})});c.forEach(e,function(a){b+=' -type:"'+a+'" '})}return b};F.getItemQueryStringByTypeKeywords=function(a){var b="";a&&0<a.length&&(b=' typekeywords:"'+a.join(",")+'" ');return b};F.isNotEmptyString=function(a,b){var e=a&&"string"===typeof a;return e?b?e&&p.trim(a):!0:!1};F.isValidNumber=function(a){return"number"===typeof a&&!isNaN(a)};F.isObject=function(a){return a&&"object"===typeof a};F.getRandomString=function(){var a=Math.random().toString();
return a=a.slice(2,a.length)};F._getDomainsByServerName=function(a){var b=a.split("."),e=b.length;return c.map(b,p.hitch(this,function(a,d){a=b.slice(d,e);var m="",r=a.length-1;c.forEach(a,p.hitch(this,function(a,b){m+=a;b!==r&&(m+=".")}));return m}))};F.removeCookie=function(a,b){var e=this._getDomainsByServerName(window.location.hostname);c.forEach(e,p.hitch(this,function(e){m(a,null,{expires:-1,path:b});m(a,null,{expires:-1,path:b,domain:e});m(a,null,{expires:-1,path:b,domain:"."+e})}))};F.isLocaleChanged=
function(a,b){return!a.startWith(b)};F.hashToObject=function(a){a=a.replace("#","");a=d.queryToObject(a);for(var b in a)if(a.hasOwnProperty(b))try{a[b]=e.parse(a[b])}catch(ba){}return a};F.reCreateObject=function(a){function b(a){var d=[];a.forEach(function(a){Array.isArray(a)?d.push(b(a)):"object"===typeof a?d.push(e(a)):d.push(a)});return d}function e(a){var d={},m;for(m in a)a.hasOwnProperty(m)&&(null===a[m]?d[m]=null:Array.isArray(a[m])?d[m]=b(a[m]):d[m]="object"===typeof a[m]?e(a[m]):a[m]);return d}
return Array.isArray(a)?b(a):e(a)};F.setVerticalCenter=function(a){setTimeout(function(){var b=h(".jimu-vcenter-text",a),e,d;c.forEach(b,function(a){e=n.getContentBox(a).h;n.setStyle(a,{lineHeight:e+"px"})},this);b=h(".jimu-vcenter",a);c.forEach(b,function(a){e=n.getContentBox(a).h;d=n.getContentBox(h(a).parent()[0]).h;n.setStyle(a,{marginTop:(d-e)/2+"px"})},this)},10)};F.merge=O;F.loadStyleLink=function(b,e,d){var m=new f,r,q=require(F.getRequireConfig()).toUrl(e);if(require.cache["url:"+q]){r=require.cache["url:"+
q];var g=q.split("/").pop(),q=q.substr(0,q.length-g.length);r=S(r,q);b=d?n.create("style",{id:b,type:"text/css"},n.byId(d),"before"):n.create("style",{id:b,type:"text/css"},document.getElementsByTagName("head")[0]);b.styleSheet&&!b.sheet?b.styleSheet.cssText=r:b.appendChild(n.toDom(r));m.resolve("load");return m}r=d?n.create("link",{id:b,rel:"stylesheet",type:"text/css",href:q},n.byId(d),"before"):n.create("link",{id:b,rel:"stylesheet",type:"text/css",href:q},document.getElementsByTagName("head")[0]);
a(r,"load",function(){m.resolve("load")});var h=setInterval(function(){var a;if(c.some(document.styleSheets,function(b){if(b.href&&b.href.substr(b.href.indexOf(e),b.href.length)===e)return a=b,!0}))try{!m.isFulfilled()&&(a.cssRules&&a.cssRules.length||a.rules&&a.rules.length)&&m.resolve("load"),clearInterval(h)}catch(na){}},50);return m};F.changeLocation=function(a){window.history.pushState&&window.history.pushState({path:a},"",a)};F.urlToObject=function(a){var b=null;-1===a.indexOf("#")?(b=H.urlToObject(a),
b.hash=null):(a=a.split("#"),b=H.urlToObject(a[0]),b.hash=a[1]?-1<a[1].indexOf("\x3d")?d.queryToObject(a[1]):a[1]:null);return b};F.addManifestProperies=function(a){a.icon=a.url+"images/icon.png";"theme"===a.category?Q(a):("undefined"!==typeof a["2D"]&&(a.support2D=a["2D"]),"undefined"!==typeof a["3D"]&&(a.support3D=a["3D"]),"undefined"===typeof a["2D"]&&"undefined"===typeof a["3D"]&&(a.support2D=!0),delete a["2D"],delete a["3D"],"undefined"===typeof a.properties&&(a.properties={}),T.processWidgetProperties(a))};
F.getUniqueValues=function(a,b){var d=new f;a=a.replace(/\/*$/g,"")+"/generateRenderer";b=e.stringify({type:"uniqueValueDef",uniqueValueFields:[b]});G(a,{query:{classificationDef:b,f:"json"},responseType:"json",callbackParamName:"callback"}).then(p.hitch(this,function(a){var b=a.data;a=[];(b=b&&b.uniqueValueInfos)&&0<b.length&&(a=c.map(b,p.hitch(this,function(a){return a.value})));d.resolve(a)}),p.hitch(this,function(a){d.reject(a)}));return d};F.combineRadioCheckBoxWithLabel=function(a,b){var e=
!1;if(a&&1===a.nodeType&&"input"===a.tagName.toLowerCase()){var d=a.getAttribute("type")||"",d=d.toLowerCase();if("radio"===d||"checkbox"===d)e=!0}d=!1;b&&1===b.nodeType&&"label"===b.tagName.toLowerCase()&&(d=!0);e&&d&&(e=a.getAttribute("id"),e||(e="input_"+F.getRandomString(),a.setAttribute("id",e)),b.setAttribute("for",e),n.setStyle(b,"cursor","pointer"))};F.convertExtentToPolygon=function(a){var b=a.xmin,e=a.xmax,d=a.ymin,m=a.ymax;return new B({rings:[[[b,m],[e,m],[e,d],[b,d],[b,m]]],spatialReference:a.toJson()})};
F.combineGeometries=function(a){function b(a){var b={points:[],spatialReference:a[0].spatialReference.toJson()};c.forEach(a,function(a){b.points=b.points.concat(a.points)});return new z(b)}function e(a){var b={paths:[],spatialReference:a[0].spatialReference.toJson()};c.forEach(a,function(a){b.paths=b.paths.concat(a.paths)});return new A(b)}function d(a){var b={rings:[],spatialReference:a[0].spatialReference.toJson()};c.forEach(a,function(a){"polygon"===a.type?b.rings=b.rings.concat(a.rings):"extent"===
a.type&&(a=F.convertExtentToPolygon(a),b.rings=b.rings.concat(a.rings))});return new B(b)}var m=null;if(a&&0<a.length)if(1===a.length)m=a[0];else{for(var r=null,f=null,q=null,g=null,h=0;h<a.length;h++){r=a[h];switch(r.type){case "point":case "multipoint":g="point";break;case "polyline":g="polyline";break;case "polygon":case "extent":g="polygon";break;default:return null}if(0===h)q=g;else if(q!==g)return null;if(h!==a.length-1&&(f=a[h+1],!r.spatialReference.equals(f.spatialReference)))return null}"point"===
g?m=b(a):"polyline"===g?m=e(a):"polygon"===g&&(m=d(a))}return m};F.isFeaturelayerUrlSupportQuery=function(a,b){var e=!1,d=/\/featureserver\//gi.test(a);a=/\/mapserver\//gi.test(a);b=(b||"").toLowerCase();d?e=0<=b.indexOf("query"):a&&(e=0<=b.indexOf("data"));return e};F.isImageServiceSupportQuery=function(a){return 0<=(a||"").toLowerCase().indexOf("catalog")};F.isStringEndWith=function(a,b){return a.lastIndexOf(b)+b.length===a.length};F.processManifestLabel=function(a,b){a.label=a.i18nLabels&&(a.i18nLabels[b]||
a.i18nLabels.defaultLabel)||a.label||a.name;a.layouts&&c.forEach(a.layouts,function(e){var d="i18nLabels_layout_"+e.name;e.label=a[d]&&(a[d][b]||a[d].defaultLabel)||e.label||e.name});a.styles&&c.forEach(a.styles,function(e){var d="i18nLabels_style_"+e.name;e.label=a[d]&&(a[d][b]||a[d].defaultLabel)||e.label||e.name})};F.addManifest2WidgetJson=function(a,b){p.mixin(a,b.properties);a.name=b.name;a.label||(a.label=b.label);a.manifest=b};F.widgetJson=function(){var a={addManifest2WidgetJson:function(a,
b){p.mixin(a,b.properties);a.name=b.name;a.label||(a.label=b.label);a.manifest=b;a.isRemote=b.isRemote;a.isRemote&&(a.itemId=b.itemId);b.featureActions&&(a.featureActions=b.featureActions);a.icon||(a.icon=b.icon);a.thumbnail||(a.thumbnail=b.thumbnail);a.folderUrl=b.folderUrl;a.amdFolder=b.amdFolder},removeManifestFromWidgetJson:function(a){if(a.manifest){for(var b in a.manifest.properties)a[b]=void 0;a.name=void 0;a.label=void 0;a.featureActions=void 0;a.manifest=void 0}},getUriFromItem:function(b){return b.url?
a.getFolderUrlFromItem(b)+"Widget":null},getFolderUrlFromItem:function(a){if(!a.url)return null;a=/manifest\.json$/.test(a.url)?a.url.substring(0,a.url.length-13):/\/$/.test(a.url)?a.url:a.url+"/";"https:"===window.location.protocol&&(a=a.replace(/^http:\/\//,"https://"));return a}};return a}();F.addI18NLabel=function(a){var b=new f;if(a.i18nLabels)return b.resolve(a),b;a.i18nLabels={};if(a.properties&&!1===a.properties.hasLocale)return b.resolve(a),b;var e="widget"===a.category?"_widgetLabel":"_themeLabel";
require(F.getRequireConfig(),["dojo/i18n!"+a.amdFolder+"nls/strings"],function(d){a.i18nLabels[dojoConfig.locale]=d[e];"theme"===a.category&&(a.layouts&&a.layouts.forEach(function(b){a["i18nLabels_layout_"+b.name]={};a["i18nLabels_layout_"+b.name][dojoConfig.locale]=d["_layout_"+b.name]}),a.styles&&a.styles.forEach(function(b){a["i18nLabels_style_"+b.name]={};a["i18nLabels_style_"+b.name][dojoConfig.locale]=d["_style_"+b.name]}));b.resolve(a)});return b};F.localizeNumber=function(a,b){var e=(a.toString().split(".")[1]||
"").length,d="",d=b&&isFinite(b.places)&&b.places,d=0<d||0<e?"#,###,###,##0.0"+Array.prototype.join.call({length:0<d?d+1:e},"0"):"#,###,###,##0",e={locale:k.locale,pattern:d};p.mixin(e,b||{});try{return q.format(a,e)}catch(W){return console.error(W),a.toLocaleString()}};F.parseNumber=function(a,b){var e={locale:k.locale};p.mixin(e,b||{});try{return q.parse(a,e)}catch(ha){return console.error(ha),a}};F.localizeDate=function(a,b){var e={locale:k.locale,fullYear:!0};p.mixin(e,b||{});try{return u.format(a,
e)}catch(ha){return console.error(ha),"date"===e.selector?a.toLocaleDateString():"time"===e.selector?a.toLocaleTimeString():a.toLocaleString()}};F.localizeNumberByFieldInfo=function(a,b){var e=null,e=p.exists("format.places",b)&&b.format.places,e=F.localizeNumber(a,{places:e});return p.exists("format.digitSeparator",b)&&!b.format.digitSeparator?e.toString().replace(new RegExp("\\"+t.group,"g"),""):e};F.fieldFormatter={getFormattedUrl:function(a){if(a&&"string"===typeof a){var b=a.indexOf("http:");
-1===b&&(b=a.indexOf("https:"));if(-1<b&&-1===a.indexOf("href\x3d")){var e=a.indexOf(" ",b);-1===e&&(e=a.length);var d=a.substring(b,e);a=a.substring(0,b)+'\x3cA href\x3d"'+d+'" target\x3d"_blank"\x3e'+d+"\x3c/A\x3e"+a.substring(e,a.length)}}return a||""},getFormattedNumber:function(a,b){if("number"===typeof a){var e=(a.toString().split(".")[1]||"").length;a=F.localizeNumberByFieldInfo(a,{format:{places:b&&"number"===typeof b.places?parseInt(b.places,10):e,digitSeparator:b&&b.digitSeparator}});return'\x3cspan class\x3d"jimu-numeric-value"\x3e'+
(a||"")+"\x3c/span\x3e"}return a},getFormattedDate:function(a){a&&(a=F.localizeDate(new Date(a),{fullYear:!0}));return a||""},getCodedValue:function(a,b){if(a&&a.codedValues){for(var e=0,d=a.codedValues.length;e<d;e++){var m=a.codedValues[e];if(F.isDefined(b)&&p.exists("code",m)&&b.toString()===m.code.toString())return m.name}return b}return b||null},getTypeName:function(a,b){for(var e=b.length,d=0;d<e;d++)if(a===b[d].id)return b[d].name;return a}};F.addRelativePathInCss=S;F.url={isAbsolute:function(a){return a?
a.startWith("http")||a.startWith("/"):!1},removeQueryParamFromUrl:function(a,b){a=H.urlToObject(a);a.query&&delete a.query[b];b=a.path;for(var e in a.query)b=b===a.path?b+"?"+e+"\x3d"+a.query[e]:b+"\x26"+e+"\x3d"+a.query[e];return b},addQueryParamToUrl:function(a,b,e){a=H.urlToObject(a);a.query||(a.query={});a.query[b]=e;b=a.path;for(var d in a.query)b=b===a.path?b+"?"+d+"\x3d"+a.query[d]:b+"\x26"+d+"\x3d"+a.query[d];return b}};F.processUrlInWidgetConfig=function(a,b){if(a)return a.startWith("data:")||
a.startWith("http")||a.startWith("/")?a:a.startWith("${appPath}")?a.replace("${appPath}",window.appInfo.appPath):b+a};F.processUrlInAppConfig=function(a){if(a)return a.startWith("data:")||a.startWith("http")||a.startWith("/")?a:window.appInfo.appPath+a};F.getLocationUrlWithoutHashAndQueryParams=function(){var a=window.location,b=a.protocol+"//"+a.host+a.pathname,a=H.urlToObject(a.href);a.query&&a.query.apiurl&&(b=F.url.addQueryParamToUrl(b,"apiurl",a.query.apiurl));return b};F.getDefaultWebMapThumbnail=
function(){return require.toUrl("jimu/images/webmap.png")};F.invertColor=function(a){a=a.substring(1);3===a.length&&(a=a.slice(0,1)+a.slice(0,1)+a.slice(1,1)+a.slice(1,1)+a.slice(2,1)+a.slice(2,1));a=parseInt(a,16);return 7829367<a?"#000000":"#ffffff"};F.mixinAppConfigPosition=function(a,b){var e=p.clone(a);if(!b)return e;b=p.clone(b);var d=e.widgetOnScreen,m=b.widgetOnScreen;m&&m.widgets&&("[object Object]"===Object.prototype.toString.call(m.widgets)?c.forEach(d.widgets,function(a,b){b=a.uri?a.uri:
"ph_"+b;m.widgets[b]&&m.widgets[b].position&&(m.widgets[b].position.relativeTo||(m.widgets[b].position.relativeTo="map"),a.position=m.widgets[b].position)},this):c.forEach(m.widgets,function(a,b){a.position&&!a.position.relativeTo&&(a.position.relativeTo="map");d.widgets[b]&&a.position&&(d.widgets[b].position=a.position)}));m&&m.groups&&("[object Object]"===Object.prototype.toString.call(m.groups)?c.forEach(d.groups,function(a,b){b=a.label?a.label:"g_"+b;m.groups[b]&&m.groups[b].panel&&m.groups[b].panel.position&&
(m.groups[b].panel.position.relativeTo||(m.groups[b].panel.position.relativeTo="map"),a.panel.position=m.groups[b].panel.position)},this):(a=a.layoutDefinition?a.layoutDefinition.manager:"jimu/layoutManagers/AbsolutePositionLayoutManager","jimu/layoutManagers/AbsolutePositionLayoutManager"===a?c.forEach(m.groups,function(a,b){a.panel&&a.panel.position&&!a.panel.position.relativeTo&&(a.panel.position.relativeTo="map");d.groups[b]&&a.panel&&a.panel.position&&(d.groups[b].panel.position=a.panel.position)}):
"jimu/layoutManagers/GridLayoutManager"===a&&(d.groups=J(d.groups,m.groups.map(function(a){return a.id})))));b.map&&b.map.position&&(e.map?e.map.position=b.map.position:e.map={position:b.map.position});b.widgetPool&&b.widgetPool.panel&&(b.widgetPool.panel.position&&!b.widgetPool.panel.position.relativeTo&&(b.widgetPool.panel.position.relativeTo="map"),e.widgetPool.panel.position=b.widgetPool.panel.position);b.mobileLayout&&(e.mobileLayout=b.mobileLayout);return e};F.handleGridLayoutOnScreenGroupChange=
J;F.template={groupIdentification:"groups\\[.+\\]",widgetIdentification:"widgets\\[.+\\]",getSearchRange:function(a,b,e){var d=-1;b=a.search(new RegExp(b));0<=b&&(a=a.slice(b,a.length),a=a.indexOf(e),d=b+a+e.length);return{firstPos:b,lastPos:d}},setConfigValue:function(a,b,e){P(a,b,e)},getConfigValue:function(a,b){return P(a,b)},setConfigValueWithId:function(a,b,e){L(a,b,e)},getConfigValueWithId:function(a,b){return L(a,b)},getKeyInfo:function(a){var b=this.getWidgetIdByKey(a);if(null!==b)return{type:"widget",
id:b};a=this.getGroupIdByKey(a);return null!==a?{type:"group",id:a}:{type:"unknow",id:null}},getWidgetIdByKey:function(a){var b=F.template.getSearchRange(a,F.template.widgetIdentification,"]");if(-1===b.firstPos)a=null;else{var e=a.slice(b.firstPos,b.lastPos);a=a.slice(b.firstPos+e.indexOf("[")+1,b.lastPos-1)}return a},getGroupIdByKey:function(a){var b=F.template.getSearchRange(a,F.template.groupIdentification,"]");if(-1===b.firstPos)a=null;else{var e=a.slice(b.firstPos,b.lastPos);a=a.slice(b.firstPos+
e.indexOf("[")+1,b.lastPos-1)}return a},getConfigedWidgetsByTemplateConfig:function(a){var b=[],e=F.template.widgetIdentification+"_config",d;c.forEach(a.configurationSettings,function(a){c.forEach(a.fields,function(a){a.fieldName&&(d=F.template.getSearchRange(a.fieldName,e,"]"),0<=d.firstPos&&(a=F.template.getWidgetIdByKey(a.fieldName),-1===b.indexOf(a)&&b.push(a)))},this)},this);return b},mergeTemplateAppConfigToAppConfig:function(a,b,e){function d(a){var b=[];c.forEach(a,function(a){a&&b.push(a)},
this);return b}var m=a.widgetOnScreen,r=a.portalUrl;b.values.webmap&&(a.map.itemId=b.values.webmap);e&&(a.map.mapOptions&&F.deleteMapOptions(a.map.mapOptions),a.map.portalUrl=r,b.values.app_title||(b.values.app_title=e.title),b.values.app_subtitle||(b.values.app_subtitle=e.snippet));for(var f in b.values)"webmap"!==f&&F.template.setConfigValueWithId(a,f,b.values[f]);a.widgetPool.widgets=d(a.widgetPool.widgets);m.widgets=d(m.widgets);if(a.widgetPool.groups)for(b=0;b<a.widgetPool.groups.length;b++)a.widgetPool.groups[b].widgets=
d(a.widgetPool.groups[b].widgets);if(m.groups)for(b=0;b<m.groups.length;b++)m.groups[b].widgets=d(m.groups[b].widgets);return a}};F.deleteMapOptions=function(a){a&&(delete a.extent,delete a.lods,delete a.center,delete a.scale,delete a.zoom,delete a.maxScale,delete a.maxZoom,delete a.minScale,delete a.minZoom,delete a.initialState)};F.localeIsSame=function(a,b){return a.split("-")[0]===b.split("-")[0]};F.graphicsExtent=function(){return null};F.sanitizeHTML=function(a){return html_sanitize(a,function(a){return a},
function(a){return a})};F.stripHTML=function(a){return a?-1<a.indexOf("\x3c")&&-1<a.indexOf("\x3e")?a.replace(/<(?:.|\s)*?>/g,""):a:a};F.removeSuffixSlashes=function(a){return a.replace(/\/*$/g,"")};F.getBestDisplayAttributes=function(a,b){var e={},d=null,m;for(m in a)d=F.getBestDisplayValue(m,a,b),e[m]=d;return e};F.getBestDisplayValue=function(a,b,e){var d="",m=null;p.isArrayLike(e)?m=F.getFieldInfoByFieldName(e,a):"object"===typeof e&&e.name===a&&(m=e);m&&(d=b[a],"esriFieldTypeDate"===m.type?d&&
(a=new Date(parseInt(d,10)),d=F._tryLocaleDate(a)):"number"===typeof d&&(m.domain&&"codedValue"===m.domain.type?c.some(m.domain.codedValues,function(a){if(a.code===d)return d=a.name,!0}):d=F._tryLocaleNumber(d)));if(null===d||void 0===d)d="";return d};F._tryLocaleNumber=function(a){var b=F.localizeNumber(a);if(null===b||void 0===b)b=a;return b};F._tryLocaleDate=function(a){var b=F.localizeDate(a);b||(b=a.toLocaleDateString());return b};F.getFieldInfoByFieldName=function(a,b){var e=null;a&&0<a.length&&
c.some(a,p.hitch(this,function(a){return a.name===b?(e=a,!0):!1}));return e};F.containsNonLatinCharacter=function(a){for(var b=0;b<a.length;b++)if(255<a.charCodeAt(b))return!0;return!1};F.isVersion4API=function(){return 0===x.version.indexOf("4")};F.getEsriConfig=function(){return w};F.getEsriConfigRequestObject=function(){var a=null;return a=F.isVersion4API()?w.request:w.defaults.io};F.setGlobalGeometryService=function(a){a=new C(a);F.isVersion4API()?w.geometryService=a:w.defaults.geometryService=
a;return a};F.getQueryableFeatureLayersFromMap=function(a){var b=[];a.layers&&(b=a.layers.filter(function(a){return"esri.layers.FeatureLayer"===a.declaredClass&&a.url&&a.supportedQueryFormats&&0<=a.supportedQueryFormats.toUpperCase().indexOf("JSON")}));return b};F.has=function(a){var b=l(a);if(b)return b;if("ie"===a.toLowerCase()){a=0;var e=/MSIE (\d+\.\d+);/.test(navigator.userAgent),d=!!navigator.userAgent.match(/Trident\/7.0/),m=navigator.userAgent.indexOf("rv:11.0");e&&(a=Number(RegExp.$1));-1!==
navigator.appVersion.indexOf("MSIE 10")&&(a=10);d&&-1!==m&&(a=11);return 11===a&&11||b}if("edge"===a.toLowerCase())return navigator.userAgent.split("Edge/")[1]||b};F.detectUserAgent=function(){var a={},b={},e=navigator.userAgent,d=navigator.platform,m=e.match(/Web[kK]it[\/]{0,1}([\d.]+)/),r=e.match(/(Android);?[\s\/]+([\d.]+)?/),f=!!e.match(/\(Macintosh\; Intel /),q=e.match(/(iPad).*OS\s([\d_]+)/),g=e.match(/(iPod)(.*OS\s([\d_]+))?/),h=!q&&e.match(/(iPhone\sOS)\s([\d_]+)/),t=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),
d=/Win\d{2}|Windows/.test(d),x=e.match(/Windows Phone ([\d.]+)/),c=t&&e.match(/TouchPad/),u=e.match(/Kindle\/([\d.]+)/),k=e.match(/Silk\/([\d._]+)/),l=e.match(/(BlackBerry).*Version\/([\d.]+)/),w=e.match(/(BB10).*Version\/([\d.]+)/),v=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),y=e.match(/PlayBook/),z=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),A=e.match(/Firefox\/([\d.]+)/),n=e.match(/\((?:Mobile|Tablet); rv:([\d.]+)\).*Firefox\/[\d.]+/),B=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),
G=!z&&e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),H=G||e.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);b.webkit=!!m;b.webkit&&(b.version=m[1]);r&&(a.android=!0,a.version=r[2]);h&&!g&&(a.ios=a.iphone=!0,a.version=h[2].replace(/_/g,"."));q&&(a.ios=a.ipad=!0,a.version=q[2].replace(/_/g,"."));g&&(a.ios=a.ipod=!0,a.version=g[3]?g[3].replace(/_/g,"."):null);x&&(a.wp=!0,a.version=x[1]);t&&(a.webos=!0,a.version=t[2]);c&&(a.touchpad=!0);l&&(a.blackberry=!0,a.version=l[2]);
w&&(a.bb10=!0,a.version=w[2]);v&&(a.rimtabletos=!0,a.version=v[2]);y&&(b.playbook=!0);u&&(a.kindle=!0,a.version=u[1]);k&&(b.silk=!0,b.version=k[1]);!k&&a.android&&e.match(/Kindle Fire/)&&(b.silk=!0);z&&(b.chrome=!0,b.version=z[1]);A&&(b.firefox=!0,b.version=A[1]);n&&(a.firefoxos=!0,a.version=n[1]);B&&(b.ie=!0,b.version=B[1]);H&&(f||a.ios||d)&&(b.safari=!0,a.ios||(b.version=H[1]));G&&(b.webview=!0);a.tablet=!!(q||y||r&&!e.match(/Mobile/)||A&&e.match(/Tablet/)||B&&!e.match(/Phone/)&&e.match(/Touch/));
a.phone=!(a.tablet||a.ipod||!(r||h||t||l||w||z&&e.match(/Android/)||z&&e.match(/CriOS\/([\d.]+)/)||A&&e.match(/Mobile/)||B&&e.match(/Touch/)));return{os:a,browser:b}};F.isMobileUa=function(){var a=F.detectUserAgent();return!0===a.os.phone||!0===a.os.tablet?!0:!1};F.isNeedHttpsButNot=function(){var a=navigator.geolocation,b=window.hasOwnProperty("isSecureContext");return(b&&window.isSecureContext||!b&&"https:"===window.location.protocol)&&a?!1:!0};F.isInConfigOrPreviewWindow=function(){var a=!1;try{a=
!window.isBuilder&&window.parent&&window.parent!==window&&window.parent.isBuilder}catch(ja){a=!1}return!!a};F.getAppHref=function(){var a="";return a=F.isInConfigOrPreviewWindow()?window.parent.location.href:window.location.href};F.getAppIdFromUrl=function(){var a=!0,b=F.getAppHref();if(-1!==b.indexOf("id\x3d")||-1!==b.indexOf("appid\x3d")||-1!==b.indexOf("apps"))a=!1;if(!0===a)return b;a=this.urlToObject(window.location.href);if(a.query&&(a.query.id||a.query.appid))return a.query.id||a.query.appid;
if(window.appInfo){if(window.appInfo.id)return window.appInfo.id;if(window.appInfo.appPath){if(a=window.appInfo.appPath.split("/"),a.length&&2<a.length)return a[a.length-2]}else console.error("CAN NOT getAppIdFromUrl")}};F.getEditorContentHeight=function(a,b,e){var d=new f;this._content=a;this._dom=b;this._domParam=e;var m=setTimeout(p.hitch(this,function(){clearTimeout(m);m=null;var a=0,b=this._domParam.contentWidth;try{var e=document.createElement("div");e.setAttribute("id","fakeContent");n.setStyle(e,
"background-size","contain");e.innerHTML=this._content;this._dom.appendChild(e);if(e){var r=h("img",e);r&&r.length&&r.style({maxWidth:b-20+"px"});n.setStyle(e,"position","absolute");n.setStyle(e,"width",b+"px");n.setStyle(e,"left","-99999px");n.setStyle(e,"top","-99999px");n.setStyle(e,"visibility","hidden");var f=n.getContentBox(e);f.h&&(a=f.h,a+=this._domParam.contentMarginTop+this._domParam.footerHeight+8)}}catch(pa){console.error("can't getEditorContentHeight"+pa),a=200}d.resolve(a)}),1500);return d};
F.getEditorTextColor=function(a,b){return{name:"dijit.editor.plugins.EditorTextColor",custom:{recordUID:F.getColorRecordName(a),forceAttr:b}}};F.getEditorBackgroundColor=function(a){return{name:"dijit.editor.plugins.EditorBackgroundColor",custom:{recordUID:F.getColorRecordName(a)}}};F.getColorRecordName=function(a){return"wab_cr_"+(a||"")};F.isEsriDomain=function(a){return/^https?:\/\/(?:[\w\-\_]+\.)+(?:esri|arcgis)\.com/.test(a)};F.b64toBlob=function(a,b,e){b=b||"";e=e||512;a=window.atob(a.replace(/^data:image\/(png|jpg|jpeg|gif);base64,/,
""));for(var d=[],m=0;m<a.length;m+=e){for(var r=a.slice(m,m+e),f=Array(r.length),q=0;q<r.length;q++)f[q]=r.charCodeAt(q);r=new Uint8Array(f);d.push(r)}return new Blob(d,{type:b})};F.subtractionArray=function(a,b){for(var e=a.length-1;0<=e;e--)for(var d=a[e],m=b.length-1;0<=m;m--)if(d===b[m]){a.splice(e,1);b.splice(m,1);break}return a};F.resourcesUrlToBlob=function(a){return G({url:a,handleAs:"blob"})};F.processItemResourceOfAppConfig=function(a,e){function d(a){var b=a.obj,e=a.key,d={obj:b,key:e};
"number"===typeof a.i?(d.i=a.i,d.value=b[e][a.i]):d.value=b[e];return d}function m(a){for(var b in a)if("object"===typeof a[b])if(Array.isArray(a[b]))for(var e=a,d=b,f=0;f<e[d].length;f++)"string"===typeof e[d][f]?r(e,d,f):"object"===typeof e[d][f]&&m(e[d][f]);else m(a[b]);else"string"===typeof a[b]&&r(a,b)}function r(a,b,m){"number"===typeof m?e.test(a[b][m])&&(g=e.func(d({obj:a,key:b,i:m})),"function"===typeof g.then?q.push(g):f.push(g)):e.test(a[b])&&(g=e.func(d({obj:a,key:b})),"function"===typeof g.then?
q.push(g):f.push(g))}var f=[],q=[],g;m(a);return 0<q.length?b(q).then(function(b){0<f.length&&(b=b.concat(f));return{appConfig:a,result:b}}):{appConfig:a,result:f}};F.isDefined=function(a){return void 0!==a&&null!==a};F.getDefaultPopupInfo=function(a,b,e){var d=null;a&&a.fields&&(d={title:b,fieldInfos:[],description:null,showAttachments:!0,mediaInfos:[]},c.forEach(a.fields,function(a){var b=!1;e?c.some(e,p.hitch(this,function(b){return b&&a.name.toLowerCase()===b.toLowerCase()}))&&(b=!0):b=!0;b&&
(b=this.getDefaultPortalFieldInfo(a),b.visible=!0,b.isEditable=a.editable,d.fieldInfos.push(b))},this));return d};F.getDefaultPortalFieldInfo=function(a){var b=a.name,b={fieldName:b,label:a.alias||b,tooltip:"",visible:!1,format:null,stringFieldOption:"textbox"};switch(a.type){case "esriFieldTypeSmallInteger":case "esriFieldTypeInteger":b.format={places:0,digitSeparator:!0};break;case "esriFieldTypeSingle":case "esriFieldTypeDouble":b.format={places:2,digitSeparator:!0};break;case "esriFieldTypeDate":b.format=
{dateFormat:"longMonthDayYear"}}return b};F.checkEssentialAppsLicense=function(a,b,e){var d=M.getStandardPortalUrl(b.portalUrl),m=M.getSharingUrl(d),d=new K({appId:"arcgisWebApps",portalUrl:d});I.registerOAuthInfos([d]);return e?I.checkAppAccess(m,"arcgisWebApps"):b.getItemById(a).then(function(a){if("public"!==a.access)return I.checkAppAccess(m,"arcgisWebApps",{force:!0})})};F.getStyleColorInTheme=function(a){var b=new f,e,d;window&&window.isBuilder?(d="./stemapp3d/themes/",e=window.appConfig):(d=
"./themes/",e=window.getAppConfig());if(e&&e.theme.customStyles&&e.theme.customStyles.mainBackgroundColor)return b.resolve(e.theme.customStyles.mainBackgroundColor),b.promise;var m=e.theme.name,r=e.theme.styles[0];a&&(r=a);G(d+m+"/manifest.json",{responseType:"json"}).then(p.hitch(this,function(a){if(a&&a.data){a=a.data.styles;for(var e=0;e<a.length;e++){var d=a[e];d.name===r&&b.resolve(d.styleColor)}}}),p.hitch(this,function(a){console.error(a);b.reject(null)}));return b.promise};return F})},"dojo/NodeList-traverse":function(){define(["./query",
"./_base/lang","./_base/array"],function(p,c,n){var l=p.NodeList;c.extend(l,{_buildArrayFromCallback:function(c){for(var d=[],h=0;h<this.length;h++){var g=c.call(this[h],this[h],d);g&&(d=d.concat(g))}return d},_getUniqueAsNodeList:function(c){for(var d=[],h=0,g;g=c[h];h++)1==g.nodeType&&-1==n.indexOf(d,g)&&d.push(g);return this._wrap(d,null,this._NodeListCtor)},_getUniqueNodeListWithParent:function(c,d){c=this._getUniqueAsNodeList(c);c=d?p._filterResult(c,d):c;return c._stash(this)},_getRelatedUniqueNodes:function(c,
d){return this._getUniqueNodeListWithParent(this._buildArrayFromCallback(d),c)},children:function(k){return this._getRelatedUniqueNodes(k,function(d,h){return c._toArray(d.childNodes)})},closest:function(c,d){return this._getRelatedUniqueNodes(null,function(h,g){do if(p._filterResult([h],c,d).length)return h;while(h!=d&&(h=h.parentNode)&&1==h.nodeType);return null})},parent:function(c){return this._getRelatedUniqueNodes(c,function(d,h){return d.parentNode})},parents:function(c){return this._getRelatedUniqueNodes(c,
function(d,h){for(h=[];d.parentNode;)d=d.parentNode,h.push(d);return h})},siblings:function(c){return this._getRelatedUniqueNodes(c,function(d,h){h=[];for(var g=d.parentNode&&d.parentNode.childNodes,f=0;f<g.length;f++)g[f]!=d&&h.push(g[f]);return h})},next:function(c){return this._getRelatedUniqueNodes(c,function(d,h){for(d=d.nextSibling;d&&1!=d.nodeType;)d=d.nextSibling;return d})},nextAll:function(c){return this._getRelatedUniqueNodes(c,function(d,h){for(h=[];d=d.nextSibling;)1==d.nodeType&&h.push(d);
return h})},prev:function(c){return this._getRelatedUniqueNodes(c,function(d,h){for(d=d.previousSibling;d&&1!=d.nodeType;)d=d.previousSibling;return d})},prevAll:function(c){return this._getRelatedUniqueNodes(c,function(d,h){for(h=[];d=d.previousSibling;)1==d.nodeType&&h.push(d);return h})},andSelf:function(){return this.concat(this._parent)},first:function(){return this._wrap(this[0]&&[this[0]]||[],this)},last:function(){return this._wrap(this.length?[this[this.length-1]]:[],this)},even:function(){return this.filter(function(c,
d){return 0!=d%2})},odd:function(){return this.filter(function(c,d){return 0==d%2})}});return l})},"dojo/number":function(){define(["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(p,c,n,l,k){var d={};p.setObject("dojo.number",d);d.format=function(g,f){f=p.mixin({},f||{});var b=c.normalizeLocale(f.locale),b=c.getLocalization("dojo.cldr","number",b);f.customs=b;b=f.pattern||b[(f.type||"decimal")+"Format"];return isNaN(g)||Infinity==Math.abs(g)?null:d._applyPattern(g,
b,f)};d._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;d._applyPattern=function(g,f,b){b=b||{};var a=b.customs.group,e=b.customs.decimal;f=f.split(";");var m=f[0];f=f[0>g?1:0]||"-"+m;if(-1!=f.indexOf("%"))g*=100;else if(-1!=f.indexOf("\u2030"))g*=1E3;else if(-1!=f.indexOf("\u00a4"))a=b.customs.currencyGroup||a,e=b.customs.currencyDecimal||e,f=f.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/,function(a,e,d,m){return(a=b[["symbol","currency","displayName"][d.length-1]]||b.currency||"")?e+a+m:""});else if(-1!=
f.indexOf("E"))throw Error("exponential notation not supported");var q=d._numberPatternRE,m=m.match(q);if(!m)throw Error("unable to find a number expression in pattern: "+f);!1===b.fractional&&(b.places=0);return f.replace(q,d._formatAbsolute(g,m[0],{decimal:e,group:a,places:b.places,round:b.round}))};d.round=function(d,f,b){b=10/(b||10);return(b*+d).toFixed(f)/b};if(0==(.9).toFixed()){var h=d.round;d.round=function(d,f,b){var a=Math.pow(10,-f||0),e=Math.abs(d);if(!d||e>=a)a=0;else if(e/=a,.5>e||
.95<=e)a=0;return h(d,f,b)+(0<d?a:-a)}}d._formatAbsolute=function(g,f,b){b=b||{};!0===b.places&&(b.places=0);Infinity===b.places&&(b.places=6);f=f.split(".");var a="string"==typeof b.places&&b.places.indexOf(","),e=b.places;a?e=b.places.substring(a+1):0<=e||(e=(f[1]||[]).length);0>b.round||(g=d.round(g,e,b.round));g=String(Math.abs(g)).split(".");var m=g[1]||"";f[1]||b.places?(a&&(b.places=b.places.substring(0,a)),a=void 0!==b.places?b.places:f[1]&&f[1].lastIndexOf("0")+1,a>m.length&&(g[1]=l.pad(m,
a,"0",!0)),e<m.length&&(g[1]=m.substr(0,e))):g[1]&&g.pop();e=f[0].replace(",","");a=e.indexOf("0");-1!=a&&(a=e.length-a,a>g[0].length&&(g[0]=l.pad(g[0],a)),-1==e.indexOf("#")&&(g[0]=g[0].substr(g[0].length-a)));var e=f[0].lastIndexOf(","),q,h;-1!=e&&(q=f[0].length-e-1,f=f[0].substr(0,e),e=f.lastIndexOf(","),-1!=e&&(h=f.length-e-1));f=[];for(e=g[0];e;)a=e.length-q,f.push(0<a?e.substr(a):e),e=0<a?e.slice(0,a):"",h&&(q=h,h=void 0);g[0]=f.reverse().join(b.group||",");return g.join(b.decimal||".")};d.regexp=
function(g){return d._parseInfo(g).regexp};d._parseInfo=function(g){g=g||{};var f=c.normalizeLocale(g.locale),f=c.getLocalization("dojo.cldr","number",f),b=g.pattern||f[(g.type||"decimal")+"Format"],a=f.group,e=f.decimal,m=1;if(-1!=b.indexOf("%"))m/=100;else if(-1!=b.indexOf("\u2030"))m/=1E3;else{var q=-1!=b.indexOf("\u00a4");q&&(a=f.currencyGroup||a,e=f.currencyDecimal||e)}f=b.split(";");1==f.length&&f.push("-"+f[0]);f=k.buildGroupRE(f,function(b){b="(?:"+k.escapeString(b,".")+")";return b.replace(d._numberPatternRE,
function(b){var r={signed:!1,separator:g.strict?a:[a,""],fractional:g.fractional,decimal:e,exponent:!1};b=b.split(".");var f=g.places;1==b.length&&1!=m&&(b[1]="###");1==b.length||0===f?r.fractional=!1:(void 0===f&&(f=g.pattern?b[1].lastIndexOf("0")+1:Infinity),f&&void 0==g.fractional&&(r.fractional=!0),!g.places&&f<b[1].length&&(f+=","+b[1].length),r.places=f);b=b[0].split(",");1<b.length&&(r.groupSize=b.pop().length,1<b.length&&(r.groupSize2=b.pop().length));return"("+d._realNumberRegexp(r)+")"})},
!0);q&&(f=f.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(a,b,e,d){a=k.escapeString(g[["symbol","currency","displayName"][e.length-1]]||g.currency||"");if(!a)return"";b=b?"[\\s\\xa0]":"";d=d?"[\\s\\xa0]":"";return g.strict?b+a+d:(b&&(b+="*"),d&&(d+="*"),"(?:"+b+a+d+")?")}));return{regexp:f.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:a,decimal:e,factor:m}};d.parse=function(g,f){f=d._parseInfo(f);g=(new RegExp("^"+f.regexp+"$")).exec(g);if(!g)return NaN;var b=g[1];if(!g[1]){if(!g[2])return NaN;
b=g[2];f.factor*=-1}b=b.replace(new RegExp("["+f.group+"\\s\\xa0]","g"),"").replace(f.decimal,".");return b*f.factor};d._realNumberRegexp=function(g){g=g||{};"places"in g||(g.places=Infinity);"string"!=typeof g.decimal&&(g.decimal=".");"fractional"in g&&!/^0/.test(g.places)||(g.fractional=[!0,!1]);"exponent"in g||(g.exponent=[!0,!1]);"eSigned"in g||(g.eSigned=[!0,!1]);var f=d._integerRegexp(g),b=k.buildGroupRE(g.fractional,function(a){var b="";a&&0!==g.places&&(b="\\"+g.decimal,b=Infinity==g.places?
"(?:"+b+"\\d+)?":b+("\\d{"+g.places+"}"));return b},!0),a=k.buildGroupRE(g.exponent,function(a){return a?"([eE]"+d._integerRegexp({signed:g.eSigned})+")":""}),f=f+b;b&&(f="(?:(?:"+f+")|(?:"+b+"))");return f+a};d._integerRegexp=function(d){d=d||{};"signed"in d||(d.signed=[!0,!1]);"separator"in d?"groupSize"in d||(d.groupSize=3):d.separator="";var f=k.buildGroupRE(d.signed,function(a){return a?"[-+]":""},!0),b=k.buildGroupRE(d.separator,function(a){if(!a)return"(?:\\d+)";a=k.escapeString(a);" "==a?
a="\\s":"\u00a0"==a&&(a="\\s\\xa0");var b=d.groupSize,m=d.groupSize2;return m?(a="(?:0|[1-9]\\d{0,"+(m-1)+"}(?:["+a+"]\\d{"+m+"})*["+a+"]\\d{"+b+"})",0<b-m?"(?:"+a+"|(?:0|[1-9]\\d{0,"+(b-1)+"}))":a):"(?:0|[1-9]\\d{0,"+(b-1)+"}(?:["+a+"]\\d{"+b+"})*)"},!0);return f+b};return d})},"dojo/date/locale":function(){define("../_base/lang ../_base/array ../date ../cldr/supplemental ../i18n ../regexp ../string ../i18n!../cldr/nls/gregorian module".split(" "),function(p,c,n,l,k,d,h,g,f){function b(a,b,e,d){return d.replace(/([a-z])\1*/ig,
function(r){var f,q,g=r.charAt(0);r=r.length;var t=["abbr","wide","narrow"];switch(g){case "G":f=b[4>r?"eraAbbr":"eraNames"][0>a.getFullYear()?0:1];break;case "y":f=a.getFullYear();switch(r){case 1:break;case 2:if(!e.fullYear){f=String(f);f=f.substr(f.length-2);break}default:q=!0}break;case "Q":case "q":f=Math.ceil((a.getMonth()+1)/3);q=!0;break;case "M":case "L":f=a.getMonth();3>r?(f+=1,q=!0):(g=["months","L"==g?"standAlone":"format",t[r-3]].join("-"),f=b[g][f]);break;case "w":f=m._getWeekOfYear(a,
0);q=!0;break;case "d":f=a.getDate();q=!0;break;case "D":f=m._getDayOfYear(a);q=!0;break;case "e":case "c":if(f=a.getDay(),2>r){f=(f-l.getFirstDayOfWeek(e.locale)+8)%7;break}case "E":f=a.getDay();3>r?(f+=1,q=!0):(g=["days","c"==g?"standAlone":"format",t[r-3]].join("-"),f=b[g][f]);break;case "a":g=12>a.getHours()?"am":"pm";f=e[g]||b["dayPeriods-format-wide-"+g];break;case "h":case "H":case "K":case "k":q=a.getHours();switch(g){case "h":f=q%12||12;break;case "H":f=q;break;case "K":f=q%12;break;case "k":f=
q||24}q=!0;break;case "m":f=a.getMinutes();q=!0;break;case "s":f=a.getSeconds();q=!0;break;case "S":f=Math.round(a.getMilliseconds()*Math.pow(10,r-3));q=!0;break;case "v":case "z":if(f=m._getZone(a,!0,e))break;r=4;case "Z":g=m._getZone(a,!1,e);g=[0>=g?"+":"-",h.pad(Math.floor(Math.abs(g)/60),2),h.pad(Math.abs(g)%60,2)];4==r&&(g.splice(0,0,"GMT"),g.splice(3,0,":"));f=g.join("");break;default:throw Error("dojo.date.locale.format: invalid pattern char: "+d);}q&&(f=h.pad(f,r));return f})}function a(a,
b,e,d){var m=function(a){return a};b=b||m;e=e||m;d=d||m;var f=a.match(/(''|[^'])+/g),r="'"==a.charAt(0);c.forEach(f,function(a,d){a?(f[d]=(r?e:b)(a.replace(/''/g,"'")),r=!r):f[d]=""});return d(f.join(""))}function e(a,b,e,m){m=d.escapeString(m);e.strict||(m=m.replace(" a"," ?a"));return m.replace(/([a-z])\1*/ig,function(d){var m;m=d.charAt(0);var f=d.length,r="",g="";e.strict?(1<f&&(r="0{"+(f-1)+"}"),2<f&&(g="0{"+(f-2)+"}")):(r="0?",g="0{0,2}");switch(m){case "y":m="\\d{2,4}";break;case "M":case "L":2<
f?(m=b["months-"+("L"==m?"standAlone":"format")+"-"+q[f-3]].slice(0).join("|"),e.strict||(m=m.replace(/\./g,""),m="(?:"+m+")\\.?")):m="1[0-2]|"+r+"[1-9]";break;case "D":m="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+r+"[1-9][0-9]|"+g+"[1-9]";break;case "d":m="3[01]|[12]\\d|"+r+"[1-9]";break;case "w":m="[1-4][0-9]|5[0-3]|"+r+"[1-9]";break;case "E":case "e":case "c":m=".+?";break;case "h":m="1[0-2]|"+r+"[1-9]";break;case "k":m="1[01]|"+r+"\\d";break;case "H":m="1\\d|2[0-3]|"+r+"\\d";break;case "K":m="1\\d|2[0-4]|"+
r+"[1-9]";break;case "m":case "s":m="[0-5]\\d";break;case "S":m="\\d{"+f+"}";break;case "a":f=e.am||b["dayPeriods-format-wide-am"];r=e.pm||b["dayPeriods-format-wide-pm"];m=f+"|"+r;e.strict||(f!=f.toLowerCase()&&(m+="|"+f.toLowerCase()),r!=r.toLowerCase()&&(m+="|"+r.toLowerCase()),-1!=m.indexOf(".")&&(m+="|"+m.replace(/\./g,"")));m=m.replace(/\./g,"\\.");break;default:m=".*"}a&&a.push(d);return"("+m+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var m={};p.setObject(f.id.replace(/\//g,"."),m);m._getZone=function(a,
b,e){return b?n.getTimezoneName(a):a.getTimezoneOffset()};m.format=function(e,d){d=d||{};var f=k.normalizeLocale(d.locale),r=d.formatLength||"short",f=m._getGregorianBundle(f),q=[];e=p.hitch(this,b,e,f,d);if("year"==d.selector)return a(f["dateFormatItem-yyyy"]||"yyyy",e);var g;"date"!=d.selector&&(g=d.timePattern||f["timeFormat-"+r])&&q.push(a(g,e));"time"!=d.selector&&(g=d.datePattern||f["dateFormat-"+r])&&q.push(a(g,e));return 1==q.length?q[0]:f["dateTimeFormat-"+r].replace(/\'/g,"").replace(/\{(\d+)\}/g,
function(a,b){return q[b]})};m.regexp=function(a){return m._parseInfo(a).regexp};m._parseInfo=function(b){b=b||{};var d=k.normalizeLocale(b.locale),d=m._getGregorianBundle(d),f=b.formatLength||"short",r=b.datePattern||d["dateFormat-"+f],q=b.timePattern||d["timeFormat-"+f],f="date"==b.selector?r:"time"==b.selector?q:d["dateTimeFormat-"+f].replace(/\{(\d+)\}/g,function(a,b){return[q,r][b]}),g=[];return{regexp:a(f,p.hitch(this,e,g,d,b)),tokens:g,bundle:d}};m.parse=function(a,b){var e=/[\u200E\u200F\u202A\u202E]/g,
d=m._parseInfo(b),f=d.tokens,r=d.bundle;a=(new RegExp("^"+d.regexp.replace(e,"")+"$",d.strict?"":"i")).exec(a&&a.replace(e,""));if(!a)return null;var q=["abbr","wide","narrow"],g=[1970,0,1,0,0,0,0],h="";a=c.every(a,function(a,e){if(!e)return!0;var d=f[e-1];e=d.length;d=d.charAt(0);switch(d){case "y":if(2!=e&&b.strict)g[0]=a;else if(100>a)a=Number(a),d=""+(new Date).getFullYear(),e=100*d.substring(0,2),d=Math.min(Number(d.substring(2,4))+20,99),g[0]=a<d?e+a:e-100+a;else{if(b.strict)return!1;g[0]=a}break;
case "M":case "L":if(2<e){if(e=r["months-"+("L"==d?"standAlone":"format")+"-"+q[e-3]].concat(),b.strict||(a=a.replace(".","").toLowerCase(),e=c.map(e,function(a){return a.replace(".","").toLowerCase()})),a=c.indexOf(e,a),-1==a)return!1}else a--;g[1]=a;break;case "E":case "e":case "c":e=r["days-"+("c"==d?"standAlone":"format")+"-"+q[e-3]].concat();b.strict||(a=a.toLowerCase(),e=c.map(e,function(a){return a.toLowerCase()}));a=c.indexOf(e,a);if(-1==a)return!1;break;case "D":g[1]=0;case "d":g[2]=a;break;
case "a":e=b.am||r["dayPeriods-format-wide-am"];d=b.pm||r["dayPeriods-format-wide-pm"];if(!b.strict){var m=/\./g;a=a.replace(m,"").toLowerCase();e=e.replace(m,"").toLowerCase();d=d.replace(m,"").toLowerCase()}if(b.strict&&a!=e&&a!=d)return!1;h=a==d?"p":a==e?"a":"";break;case "K":24==a&&(a=0);case "h":case "H":case "k":if(23<a)return!1;g[3]=a;break;case "m":g[4]=a;break;case "s":g[5]=a;break;case "S":g[6]=a}return!0});e=+g[3];"p"===h&&12>e?g[3]=e+12:"a"===h&&12==e&&(g[3]=0);e=new Date(g[0],g[1],g[2],
g[3],g[4],g[5],g[6]);b.strict&&e.setFullYear(g[0]);var t=f.join(""),d=-1!=t.indexOf("d"),t=-1!=t.indexOf("M");if(!a||t&&e.getMonth()>g[1]||d&&e.getDate()>g[2])return null;if(t&&e.getMonth()<g[1]||d&&e.getDate()<g[2])e=n.add(e,"hour",1);return e};var q=["abbr","wide","narrow"],u=[],t={};m.addCustomFormats=function(a,b){u.push({pkg:a,name:b});t={}};m._getGregorianBundle=function(a){if(t[a])return t[a];var b={};c.forEach(u,function(e){e=k.getLocalization(e.pkg,e.name,a);b=p.mixin(b,e)},this);return t[a]=
b};m.addCustomFormats(f.id.replace(/\/date\/locale$/,".cldr"),"gregorian");m.getNames=function(a,b,e,d){var f;d=m._getGregorianBundle(d);a=[a,e,b];"standAlone"==e&&(e=a.join("-"),f=d[e],1==f[0]&&(f=void 0));a[1]="format";return(f||d[a.join("-")]).concat()};m.isWeekend=function(a,b){b=l.getWeekend(b);a=(a||new Date).getDay();b.end<b.start&&(b.end+=7,a<b.start&&(a+=7));return a>=b.start&&a<=b.end};m._getDayOfYear=function(a){return n.difference(new Date(a.getFullYear(),0,1,a.getHours()),a)+1};m._getWeekOfYear=
function(a,b){1==arguments.length&&(b=0);var e=(new Date(a.getFullYear(),0,1)).getDay(),d=(e-b+7)%7,d=Math.floor((m._getDayOfYear(a)+d-1)/7);e==b&&d++;return d};return m})},"dojo/date":function(){define(["./has","./_base/lang"],function(p,c){var n={getDaysInMonth:function(c){var k=c.getMonth();return 1==k&&n.isLeapYear(c)?29:[31,28,31,30,31,30,31,31,30,31,30,31][k]},isLeapYear:function(c){c=c.getFullYear();return!(c%400)||!(c%4)&&!!(c%100)},getTimezoneName:function(c){var k=c.toString(),d="",h=k.indexOf("(");
if(-1<h)d=k.substring(++h,k.indexOf(")"));else if(h=/([A-Z\/]+) \d{4}$/,k=k.match(h))d=k[1];else if(k=c.toLocaleString(),h=/ ([A-Z\/]+)$/,k=k.match(h))d=k[1];return"AM"==d||"PM"==d?"":d},compare:function(c,k,d){c=new Date(+c);k=new Date(+(k||new Date));"date"==d?(c.setHours(0,0,0,0),k.setHours(0,0,0,0)):"time"==d&&(c.setFullYear(0,0,0),k.setFullYear(0,0,0));return c>k?1:c<k?-1:0},add:function(c,k,d){var h=new Date(+c),g=!1,f="Date";switch(k){case "day":break;case "weekday":var b;(k=d%5)?b=parseInt(d/
5):(k=0<d?5:-5,b=0<d?(d-5)/5:(d+5)/5);var a=c.getDay(),e=0;6==a&&0<d?e=1:0==a&&0>d&&(e=-1);a+=k;if(0==a||6==a)e=0<d?2:-2;d=7*b+k+e;break;case "year":f="FullYear";g=!0;break;case "week":d*=7;break;case "quarter":d*=3;case "month":g=!0;f="Month";break;default:f="UTC"+k.charAt(0).toUpperCase()+k.substring(1)+"s"}if(f)h["set"+f](h["get"+f]()+d);g&&h.getDate()<c.getDate()&&h.setDate(0);return h},difference:function(c,k,d){k=k||new Date;d=d||"day";var h=k.getFullYear()-c.getFullYear(),g=1;switch(d){case "quarter":c=
c.getMonth();k=k.getMonth();g=Math.floor(k/3)+1+4*h-(Math.floor(c/3)+1);break;case "weekday":h=Math.round(n.difference(c,k,"day"));d=parseInt(n.difference(c,k,"week"));if(0==h%7)h=5*d;else{var g=0,f=c.getDay(),b=k.getDay();d=parseInt(h/7);k=h%7;c=new Date(c);c.setDate(c.getDate()+7*d);c=c.getDay();if(0<h)switch(!0){case 6==f:g=-1;break;case 0==f:g=0;break;case 6==b:g=-1;break;case 0==b:g=-2;break;case 5<c+k:g=-2}else if(0>h)switch(!0){case 6==f:g=0;break;case 0==f:g=1;break;case 6==b:g=2;break;case 0==
b:g=1;break;case 0>c+k:g=2}h=h+g-2*d}g=h;break;case "year":g=h;break;case "month":g=k.getMonth()-c.getMonth()+12*h;break;case "week":g=parseInt(n.difference(c,k,"day")/7);break;case "day":g/=24;case "hour":g/=60;case "minute":g/=60;case "second":g/=1E3;case "millisecond":g*=k.getTime()-c.getTime()}return Math.round(g)}};c.mixin(c.getObject("dojo.date",!0),n);return n})},"dojo/cldr/supplemental":function(){define(["../_base/lang","../i18n"],function(p,c){var n={};p.setObject("dojo.cldr.supplemental",
n);n.getFirstDayOfWeek=function(c){c={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0}[n._region(c)];return void 0===c?1:c};n._region=function(l){l=c.normalizeLocale(l);
l=l.split("-");var k=l[1];k?4==k.length&&(k=l[2]):k={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",eu:"es",fa:"ir",ff:"sn",fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",
hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us","in":"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",ml:"in",mn:"mn",mo:"ro",mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",
or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",uk:"ua",ur:"pk",uz:"uz",ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",
ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",crk:"ca",csb:"pl",dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",
fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",khq:"ml",kht:"in",kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",
lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",nds:"de","new":"np",niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",
rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",teo:"ug",tet:"tl",tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",
umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",yav:"cm",zza:"tr"}[l[0]];return k};n.getWeekend=function(c){var k=n._region(c);c={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5}[k];k={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6}[k];void 0===c&&(c=6);void 0===k&&(k=0);return{start:c,end:k}};return n})},"dojox/encoding/base64":function(){define(["dojo/_base/lang"],
function(p){p=p.getObject("dojox.encoding.base64",!0);p.encode=function(c){for(var n=[],l=c.length,k=l%3,l=l-k,d=0;d<l;){var h=c[d++]<<16|c[d++]<<8|c[d++];n.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(h>>>18&63));n.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(h>>>12&63));n.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(h>>>6&63));n.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(h&
63))}switch(k){case 2:h=c[d++]<<16|c[d++]<<8;n.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(h>>>18&63));n.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(h>>>12&63));n.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(h>>>6&63));n.push("\x3d");break;case 1:h=c[d++]<<16,n.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(h>>>18&63)),n.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(h>>>
12&63)),n.push("\x3d"),n.push("\x3d")}return n.join("")};p.decode=function(c){c=c.split("");for(var n=[],l=c.length;"\x3d"==c[--l];);for(var k=0;k<l;){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(c[k++])<<18;k<=l&&(d|="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(c[k++])<<12);k<=l&&(d|="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(c[k++])<<6);k<=l&&(d|="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(c[k++]));
n.push(d>>>16&255);n.push(d>>>8&255);n.push(d&255)}for(;0==n[n.length-1];)n.pop();return n};return p})},"esri/tasks/GeometryService":function(){define("../core/lang ../core/jsonMap ../core/accessorSupport/ensureType ../geometry/Extent ../geometry/Multipoint ../geometry/Polyline ../geometry/Polygon ../geometry/support/jsonUtils ../request ./Task ./support/ProjectParameters".split(" "),function(p,c,n,l,k,d,h,g,f,b,a){var e=new c.JSONMap({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",
DMS:"dms",DDM:"ddm",DD:"dd"}),m=n.ensureType(a);c=b.createSubclass({declaredClass:"esri.tasks.GeometryService",areasAndLengths:function(a,b){a={query:p.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||b)a=p.mixin({},this.requestOptions,b,a);return f(this.parsedUrl.path+"/areasAndLengths",a).then(function(a){return a.data})},autoComplete:function(a,b,e){var d=a[0].spatialReference;a={query:p.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(d.toJSON()),polygons:JSON.stringify(this._encodeGeometries(a).geometries),
polylines:JSON.stringify(this._encodeGeometries(b).geometries)})};if(this.requestOptions||e)a=p.mixin({},this.requestOptions,e,a);return f(this.parsedUrl.path+"/autoComplete",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new h({spatialReference:d,rings:a.rings})})})},buffer:function(a,b){var e=p.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),d=a.outSpatialReference||a.geometries[0].spatialReference;a={query:e};if(this.requestOptions||b)a=p.mixin({},this.requestOptions,
b,a);return f(this.parsedUrl.path+"/buffer",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new h({spatialReference:d,rings:a.rings})})})},cut:function(a,b,e){var d=a[0].spatialReference,m=a.map(function(a){return a.toJSON()});a={query:p.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(d.toJSON()),target:JSON.stringify({geometryType:g.getJsonType(a[0]),geometries:m}),cutter:JSON.stringify(b.toJSON())})};if(this.requestOptions||e)a=p.mixin({},this.requestOptions,e,
a);return f(this.parsedUrl.path+"/cut",a).then(function(a){a=a.data;return{cutIndexes:a.cutIndexes,geometries:(a.geometries||[]).map(function(a){return g.fromJSON(a).set("spatialReference",d)})}})},convexHull:function(a,b){var e=a[0].spatialReference;a={query:p.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(e.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))})};if(this.requestOptions||b)a=p.mixin({},this.requestOptions,b,a);return f(this.parsedUrl.path+"/convexHull",a).then(function(a){return g.fromJSON(a.data.geometry).set("spatialReference",
e)})},densify:function(a,b){var e=p.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),d=a.geometries[0].spatialReference;a={query:e};if(this.requestOptions||b)a=p.mixin({},this.requestOptions,b,a);return f(this.parsedUrl.path+"/densify",a).then(function(a){return(a.data.geometries||[]).map(function(a){return g.fromJSON(a).set("spatialReference",d)})})},difference:function(a,b,e){var d=a[0].spatialReference;a={query:p.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(d.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a)),
geometry:JSON.stringify({geometryType:g.getJsonType(b),geometry:b.toJSON()})})};if(this.requestOptions||e)a=p.mixin({},this.requestOptions,e,a);return f(this.parsedUrl.path+"/difference",a).then(function(a){return(a.data.geometries||[]).map(function(a){return g.fromJSON(a).set("spatialReference",d)})})},distance:function(a,b){a={query:p.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||b)a=p.mixin({},this.requestOptions,b,a);return f(this.parsedUrl.path+"/distance",a).then(this._handleDistanceResponse)},
fromGeoCoordinateString:function(a,b){var d={};d.sr=null!=a.sr&&"object"===typeof a.sr?a.sr.wkid||JSON.stringify(a.sr):a.sr;d.strings=JSON.stringify(a.strings);d.conversionType=e.toJSON(a.conversionType||"mgrs");d.conversionMode=a.conversionMode;a={query:p.mixin({},this.parsedUrl.query,{f:"json"},d)};if(this.requestOptions||b)a=p.mixin({},this.requestOptions,b,a);return f(this.parsedUrl.path+"/fromGeoCoordinateString",a).then(this._handleFromGeoCoordinateResponse)},generalize:function(a,b){var e=
p.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),d=a.geometries[0].spatialReference;a={query:e};if(this.requestOptions||b)a=p.mixin({},this.requestOptions,b,a);return f(this.parsedUrl.path+"/generalize",a).then(function(a){return(a.data.geometries||[]).map(function(a){return g.fromJSON(a).set("spatialReference",d)})})},intersect:function(a,b,e){var d=a[0].spatialReference;a={query:p.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(d.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a)),
geometry:JSON.stringify({geometryType:g.getJsonType(b),geometry:b.toJSON()})})};if(this.requestOptions||e)a=p.mixin({},this.requestOptions,e,a);return f(this.parsedUrl.path+"/intersect",a).then(function(a){return(a.data.geometries||[]).map(function(a){return g.fromJSON(a).set("spatialReference",d)})})},lengths:function(a,b){a={query:p.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||b)a=p.mixin({},this.requestOptions,b,a);return f(this.parsedUrl.path+"/lengths",a).then(function(a){return a.data})},
labelPoints:function(a,b){var e=a.map(function(a){return a.toJSON()}),d=a[0].spatialReference;a={query:p.mixin({},this.parsedUrl.query,{f:"json",sr:d.wkid?d.wkid:JSON.stringify(d.toJSON()),polygons:JSON.stringify(e)})};if(this.requestOptions||b)a=p.mixin({},this.requestOptions,b,a);return f(this.parsedUrl.path+"/labelPoints",a).then(function(a){return(a.data.labelPoints||[]).map(function(a){return g.fromJSON(a).set("spatialReference",d)})})},offset:function(a,b){var e=p.mixin({},this.parsedUrl.query,
{f:"json"},a.toJSON()),d=a.geometries[0].spatialReference;a={query:e};if(this.requestOptions||b)a=p.mixin({},this.requestOptions,b,a);return f(this.parsedUrl.path+"/offset",a).then(function(a){return(a.data.geometries||[]).map(function(a){return g.fromJSON(a).set("spatialReference",d)})})},project:function(a,b){a=m(a);var e=p.mixin({},a.toJSON(),this.parsedUrl.query,{f:"json"}),d=a.outSpatialReference,q=g.getJsonType(a.geometries[0]),h=this._decodeGeometries;a={query:e};if(this.requestOptions||b)a=
p.mixin({},this.requestOptions,b,a);return f(this.parsedUrl.path+"/project",a).then(function(a){return h(a.data,q,d)})},relation:function(a,b){a={query:p.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||b)a=p.mixin({},this.requestOptions,b,a);return f(this.parsedUrl.path+"/relation",a).then(this._handleRelationResponse)},reshape:function(a,b,e){var d=a.spatialReference;a={query:p.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(d.toJSON()),target:JSON.stringify({geometryType:g.getJsonType(a),
geometry:a.toJSON()}),reshaper:JSON.stringify(b.toJSON())})};if(this.requestOptions||e)a=p.mixin({},this.requestOptions,e,a);return f(this.parsedUrl.path+"/reshape",a).then(function(a){return g.fromJSON(a.data.geometry).set("spatialReference",d)})},simplify:function(a,b){var e=a[0].spatialReference,d=p.mixin({},this.parsedUrl.query,{f:"json",sr:e.wkid?e.wkid:JSON.stringify(e.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))}),m=g.getJsonType(a[0]),q=this._decodeGeometries;a={query:d};
if(this.requestOptions||b)a=p.mixin({},this.requestOptions,b,a);return f(this.parsedUrl.path+"/simplify",a).then(function(a){return q(a.data,m,e)})},toGeoCoordinateString:function(a,b){var d={};d.sr=null!=a.sr&&"object"===typeof a.sr?a.sr.wkid||JSON.stringify(a.sr):a.sr;d.coordinates=JSON.stringify(a.coordinates);d.conversionType=e.toJSON(a.conversionType||"mgrs");d.conversionMode=a.conversionMode;d.numOfDigits=a.numOfDigits;d.rounding=a.rounding;d.addSpaces=a.addSpaces;a={query:p.mixin({},this.parsedUrl.query,
{f:"json"},d)};if(this.requestOptions||b)a=p.mixin({},this.requestOptions,b,a);return f(this.parsedUrl.path+"/toGeoCoordinateString",a).then(this._handleToGeoCoordinateResponse)},trimExtend:function(a,b){var e=p.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),m=a.sr;a={query:e};if(this.requestOptions||b)a=p.mixin({},this.requestOptions,b,a);return f(this.parsedUrl.path+"/trimExtend",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new d({spatialReference:m,paths:a.paths})})})},
union:function(a,b){var e=a[0].spatialReference;a={query:p.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(e.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))})};if(this.requestOptions||b)a=p.mixin({},this.requestOptions,b,a);return f(this.parsedUrl.path+"/union",a).then(function(a){return g.fromJSON(a.data.geometry).set("spatialReference",e)})},_handleRelationResponse:function(a){return a.data.relations},_handleDistanceResponse:function(a){return(a=a.data)&&a.distance},_handleToGeoCoordinateResponse:function(a){return a.data.strings},
_handleFromGeoCoordinateResponse:function(a){return a.data.coordinates},_encodeGeometries:function(a){var b=[],e,d=a.length;for(e=0;e<d;e++)b.push(a[e].toJSON());return{geometryType:g.getJsonType(a[0]),geometries:b}},_decodeGeometries:function(a,b,e){var d=g.getGeometryType(b);a=a.geometries;var m=[],f={spatialReference:e.toJSON()},q=p.mixin;a.forEach(function(a,b){m[b]=new d(q(a,f))});return m},_toProjectGeometry:function(a){var b=a.spatialReference.toJSON();return a instanceof l?new h({rings:[[[a.xmin,
a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]],spatialReference:b}):new d({paths:[[].concat(a.points)],spatialReference:b})},_fromProjectedGeometry:function(a,b,e){return"extent"===b?(a=a.rings[0],new l(a[0][0],a[0][1],a[2][0],a[2][1],e)):new k({points:a.paths[0],spatialReference:e.toJSON()})}});p.mixin(c,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,
UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,
UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,
UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",
UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});return c})},"esri/tasks/support/ProjectParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/Logger ../../core/accessorSupport/decorators ../../geometry/support/jsonUtils".split(" "),
function(p,c,n,l,k,d,h,g){var f=d.getLogger("esri.tasks.support.ProjectParameters");return function(b){function a(a){a=b.call(this)||this;a.geometries=null;a.outSpatialReference=null;a.transformation=null;a.transformForward=null;return a}n(a,b);Object.defineProperty(a.prototype,"outSR",{get:function(){f.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");return this.outSpatialReference},set:function(a){f.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");
this.outSpatialReference=a},enumerable:!0,configurable:!0});a.prototype.toJSON=function(){var a=this.geometries.map(function(a){return a.toJSON()}),b=this.geometries[0],d={};d.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON());d.inSR=b.spatialReference.wkid||JSON.stringify(b.spatialReference.toJSON());d.geometries=JSON.stringify({geometryType:g.getJsonType(b),geometries:a});this.transformation&&(d.transformation=this.transformation.wkid||JSON.stringify(this.transformation));
null!=this.transformForward&&(d.transformForward=this.transformForward);return d};l([h.property()],a.prototype,"geometries",void 0);l([h.property({json:{read:{source:"outSR"}}})],a.prototype,"outSpatialReference",void 0);l([h.property({json:{read:!1}})],a.prototype,"outSR",null);l([h.property()],a.prototype,"transformation",void 0);l([h.property()],a.prototype,"transformForward",void 0);return a=l([h.subclass("esri.tasks.support.ProjectParameters")],a)}(h.declared(k))})},"jimu/portalUrlUtils":function(){define(["dojo/_base/lang",
"jimu/shared/basePortalUrlUtils"],function(p,c){var n=p.clone(c);n.declaredClass="jimu.portalUrlUtils";n.getPortalUrlFromLocation=function(){return n.getPortalServerFromLocation()+n.getDeployContextFromLocation()};n.getPortalSignInUrlFromLocation=function(){return n.getPortalUrlFromLocation()+"home/signin.html"};n.getPortalServerFromLocation=function(){return window.location.protocol+"//"+window.location.host};n.getDeployContextFromLocation=function(){var c=window.location.href.split("?")[0],k=c.indexOf("/home/");
0>k&&(k=c.indexOf("/apps/"));c=c.substring(c.indexOf(window.location.host)+window.location.host.length+1,k);"/"!==c&&(c="/"+c+"/");return c};n.getRestBaseUrlFromLocation=function(){return window.location.protocol+"//"+window.location.host+n.getDeployContextFromLocation()+"sharing/rest/"};return n})},"jimu/shared/basePortalUrlUtils":function(){define(function(){var p={declaredClass:"jimu.shared.basePortalUrlUtils"};"function"!==typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s*/gi,
"").replace(/\s*$/gi,"")});"function"!==typeof String.prototype.startWith&&(String.prototype.startWith=function(c){return this.substr(0,c.length)===c});"function"!==typeof String.prototype.endWith&&(String.prototype.endWith=function(c){return this.substr(this.length-c.length,c.length)===c});p.getServerByUrl=function(c){c=(c||"").trim();c=c.replace(/^(http(s?):?)\/\//gi,"");0===c.indexOf("//")&&(c=c.slice(2));return c.split("/")[0]};p.getServerWithProtocol=function(c){var n="";if(c=(c||"").trim()){var l=
p.getServerByUrl(c);if(!l)return n;var k=p.getProtocol(c);k?n=k+"://"+l:0===c.indexOf("//")&&(n="//"+l)}return n};p.isSameServer=function(c,n){c=p.getServerByUrl(c)||"";n=p.getServerByUrl(n)||"";return c.toLowerCase()===n.toLowerCase()};p.isOnline=function(c){return 0<=p.getServerByUrl(c).toLowerCase().indexOf(".arcgis.com")};p.isArcGIScom=function(c){c=p.getServerByUrl(c).toLowerCase();return"www.arcgis.com"===c||"arcgis.com"===c};p.getStandardPortalUrl=function(c){var n=p.getServerByUrl(c);if(""===
n)return"";p.isOnline(n)?(p.isArcGIScom(n)&&(n="www.arcgis.com"),c=p.addProtocol(c),c=p.getProtocol(c)+"://"+n):(c=(c||"").trim().replace(/sharing(.*)/gi,"").replace(/\/*$/g,""),c=p.addProtocol(c),c.replace(new RegExp("http(s?)://"+n,"g"),"")||(c+="/arcgis"));return c};p.isSamePortalUrl=function(c,n){var l=/^http(s?):\/\//gi,k=/^\/\//gi;c=p.getStandardPortalUrl(c).toLowerCase().replace(l,"").replace(k,"");n=p.getStandardPortalUrl(n).toLowerCase().replace(l,"").replace(k,"");return c===n};p.addProtocol=
function(c){if(-1>=c.toLowerCase().indexOf("http://")&&-1>=c.toLowerCase().indexOf("https://")){var n="";"undefined"!==typeof window&&window.location?(n=window.location.protocol,c=c.startWith("//")?n+c:c.startWith("/")?n+"//"+window.location.host+c:n+"//"+c):(n="http:",c.startWith("//")&&(c=n+c))}return c};p.getProtocol=function(c){var n="";c=c.toLowerCase();0===c.indexOf("https://")?n="https":0===c.indexOf("http://")&&(n="http");return n};p.updateUrlProtocolByOtherUrl=function(c,n){n=n.toLowerCase();
0===n.indexOf("https://")?c=p.setHttpsProtocol(c):0===n.indexOf("http://")&&(c=p.setHttpProtocol(c));return c};p.removeProtocol=function(c){return c.replace(/^http(s?):\/\//i,"//")};p.setHttpProtocol=function(c){c=p.addProtocol(c);return c.replace(/^https:\/\//,"http://")};p.setHttpsProtocol=function(c){c=p.addProtocol(c);return c.replace(/^http:\/\//,"https://")};p.setProtocol=function(c,n){return 0<=n.indexOf("https")?p.setHttpsProtocol(c):0<=n.indexOf("http")?p.setHttpProtocol(c):c};p.getSharingUrl=
function(c){var n="";(c=p.getStandardPortalUrl(c))&&(n=c+"/sharing");return n};p.getOAuth2Url=function(c){var n="";(c=p.getStandardPortalUrl(c))&&(n=c+"/sharing/oauth2");return n};p.getAppIdUrl=function(c,n){var l="";(c=p.getStandardPortalUrl(c))&&(l=c+"/sharing/oauth2/apps/"+n);return l};p.getSignInUrl=function(c){var n="";(c=p.getStandardPortalUrl(c))&&(n=c+"/home/signin.html");return n};p.getBaseSearchUrl=function(c){var n="";c=p.getStandardPortalUrl(c);(c=c.replace(/\/*$/g,""))&&(n=c+"/sharing/rest/search");
return n};p.getBaseItemUrl=function(c){var n="";(c=p.getStandardPortalUrl(c))&&(n=c+"/sharing/rest/content/items");return n};p.getItemUrl=function(c,n){var l="";(c=p.getBaseItemUrl(c))&&n&&(l=c+"/"+n);return l};p.getItemDataUrl=function(c,n){var l="";(c=p.getItemUrl(c,n))&&(l=c+"/data");return l};p.getGenerateTokenUrl=function(c){var n="";c&&(c=p.getStandardPortalUrl(c),n=c+"/sharing/generateToken");return n};p.getItemDetailsPageUrl=function(c,n){var l="";c&&n&&(c=p.getStandardPortalUrl(c),l=c+"/home/item.html?id\x3d"+
n);return l};p.getUserProfilePageUrl=function(c,n){var l="";c&&n&&(c=p.getStandardPortalUrl(c),l=c+"/home/user.html?user\x3d"+n);return l};p.getBaseGroupUrl=function(c){var n="";(c=p.getStandardPortalUrl(c))&&(n=c+"/sharing/rest/community/groups");return n};p.getPortalSelfInfoUrl=function(c){var n="";(c=p.getStandardPortalUrl(c||""))&&(n=c+"/sharing/portals/self");return n};p.getCommunitySelfUrl=function(c){var n="";(c=p.getStandardPortalUrl(c||""))&&(n=c+"/sharing/rest/community/self");return n};
p.getBaseUserUrl=function(c){var n="";(c=p.getStandardPortalUrl(c))&&(n=c+"/sharing/rest/community/users");return n};p.getUserUrl=function(c,n){var l="",k=p.getBaseUserUrl(c);c&&n&&(l=k+"/"+n);return l};p.getUserTagsUrl=function(c,n){var l="",k=p.getUserUrl(c,n);c&&n&&(l=k+"/tags");return l};p.getUserThumbnailUrl=function(c,n,l){var k="";(c=p.getUserUrl(c,n))&&l&&(k=c+"/info/"+l);return k};p.getContentUrl=function(c){var n="";c&&(c=p.getStandardPortalUrl(c),n=c+"/sharing/rest/content");return n};
p.getUserContentUrl=function(c,n,l){var k="",k="";c&&n&&(k=p.getContentUrl(c),k=l?k+"/users/"+n+"/"+l:k+"/users/"+n);return k};p.getUserContentItemUrl=function(c,n,l){var k="",k="";c&&n&&l&&(k=p.getUserContentUrl(c,n),k=k+"/items/"+l);return k};p.getItemResourceUrl=function(c,n,l){var k="",k="";c&&n&&(k=p.getContentUrl(c),k=l?k+"/items/"+n+"/resources/"+l:k+"/items/"+n+"/resources");return k};p.getAddItemUrl=function(c,n,l){var k="",k="";c&&n&&(k=p.getUserContentUrl(c,n,l),k+="/addItem");return k};
p.getDeleteItemUrl=function(c,n,l){var k="";(c=p.getUserItemsUrl(c,n))&&(k=c+"/"+l+"/delete");return k};p.getUserItemsUrl=function(c,n,l){var k="",k="";c&&n&&(k=p.getUserContentUrl(c,n,l),k+="/items");return k};p.getUpdateItemUrl=function(c,n,l,k){var d="",d="";c&&n&&(d=p.getUserItemsUrl(c,n,k),d=d+"/"+l+"/update");return d};p.shareItemUrl=function(c,n,l,k){var d="",d="";c&&n&&(d=p.getUserItemsUrl(c,n,k),d=d+"/"+l+"/share");return d};p.getHomeIndexUrl=function(c){var n="";(c=p.getStandardPortalUrl(c))&&
(n=c+"/home/index.html");return n};p.getHomeMapViewerUrl=function(c,n){var l="";if(c=p.getStandardPortalUrl(c))l=c+"/home/webmap/viewer.html",l=n?l+("?webmap\x3d"+n):l+"?useExisting\x3d1";return l};p.getHomeGalleryUrl=function(c){var n="";(c=p.getStandardPortalUrl(c))&&(n=c+"/home/gallery.html");return n};p.getHomeGroupsUrl=function(c){var n="";(c=p.getStandardPortalUrl(c))&&(n=c+"/home/groups.html");return n};p.getHomeMyContentUrl=function(c){var n="";(c=p.getStandardPortalUrl(c))&&(n=c+"/home/content.html");
return n};p.getHomeMyOrganizationUrl=function(c){var n="";(c=p.getStandardPortalUrl(c))&&(n=c+"/home/organization.html");return n};p.getHomeUserUrl=function(c){var n="";(c=p.getStandardPortalUrl(c))&&(n=c+"/home/user.html");return n};p.getPortalHelpUrl=function(c,n){var l="";(c=p.getStandardPortalUrl(c))&&(l=c+"/portalhelp/"+(n||"en")+"/portal/");return l};p.getPortalAdminHelpUrl=function(c,n){var l="";(c=p.getStandardPortalUrl(c))&&(l=c+"/portalhelp/"+(n||"en")+"/admin/help/");return l};p.getPortalProxyUrl=
function(c){var n="";(c=p.getStandardPortalUrl(c))&&(n=c+"/sharing/proxy");return n};p.getOAuth2SignOutUrl=function(c){var n="";(c=p.getStandardPortalUrl(c))&&(n=c+"/sharing/oauth2/signout");return n};p.getNewPrintUrl=function(c){var n="";if(c=p.getStandardPortalUrl(c))c=p.setHttpProtocol(c),n=c+"/sharing/tools/newPrint";return n};return p})},"jimu/shared/utils":function(){define(["./basePortalUrlUtils"],function(p){function c(c,d){function h(d,f){var b,a,e,m,g="widgetOnScreen"===d;if(c[d]){if(c[d].groups)for(b=
0;b<c[d].groups.length;b++)if(e=c[d].groups[b],f(e,{index:b,isWidget:!1,groupId:e.id,isThemeWidget:!1,isOnScreen:g}),c[d].groups[b].widgets)for(a=0;a<c[d].groups[b].widgets.length;a++)m=c[d].groups[b].widgets[a],f(m,{index:a,isWidget:!0,groupId:e.id,isThemeWidget:m.uri&&-1<m.uri.indexOf("themes/"+c.theme.name),isOnScreen:g});if(c[d].widgets)for(b=0;b<c[d].widgets.length;b++)m=c[d].widgets[b],f(c[d].widgets[b],{index:b,isWidget:!0,groupId:d,isThemeWidget:m.uri&&-1<m.uri.indexOf("themes/"+c.theme.name),
isOnScreen:g})}}h("widgetOnScreen",d);h("widgetPool",d)}var n={},l="inPanel hasLocale hasStyle hasConfig hasUIFile hasSettingPage hasSettingUIFile hasSettingLocale hasSettingStyle keepConfigAfterMapSwitched isController hasVersionManager isThemeWidget supportMultiInstance mirrorIconForRTL".split(" ");n.visitElement=c;n.getConfigElementById=function(k,d){var h;if("map"===d)return k.map;c(k,function(g){if(g.id===d)return h=g,!0});return h};n.getConfigElementByLabel=function(k,d){var h;if("map"===d)return k.map;
c(k,function(g){if(g.label||g.name===d)return h=g,!0});return h};n.getConfigElementsByName=function(k,d){var h=[];if("map"===d)return[k.map];c(k,function(g){g.name===d&&h.push(g)});return h};n.getWidgetNameFromUri=function(c){c=c.split("/");c.pop();return c.pop()};n.getAmdFolderFromUri=function(c){c=c.split("/");c.pop();return c.join("/")+"/"};n.widgetProperties=l;n.processWidgetProperties=function(c){"undefined"===typeof c.properties.isController&&(c.properties.isController=!1);"undefined"===typeof c.properties.isThemeWidget&&
(c.properties.isThemeWidget=!1);"undefined"===typeof c.properties.hasVersionManager&&(c.properties.hasVersionManager=!1);"undefined"===typeof c.properties.mirrorIconForRTL&&(c.properties.mirrorIconForRTL=!1);l.forEach(function(d){"undefined"===typeof c.properties[d]&&(c.properties[d]=!0)})};n.getControllerWidgets=function(c){var d=[];c.visitElement(function(h){h.isController&&d.push(h)});return d};n.isHostedService=function(c){var d=p.getServerByUrl(c);return(new RegExp(d+"/[^/]+/[^/]+/rest/services",
"gi")).test(c)};return n})},"jimu/WidgetManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/Deferred dojo/topic dojo/Evented dojo/on dojo/aspect dojo/json dojo/query dojo/request/xhr dojo/promise/all ./utils jimu/tokenUtils ./dijit/Message".split(" "),function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t){var r=null,x=p(h,{constructor:function(){this.loaded=[];this.missedActions=[];this.activeWidget=null;window.isBuilder?(d.subscribe("app/sceneViewLoaded",c.hitch(this,
this._onSceneViewLoaded)),d.subscribe("app/sceneViewChanged",c.hitch(this,this._onSceneViewChanged))):(d.subscribe("sceneViewLoaded",c.hitch(this,this._onSceneViewLoaded)),d.subscribe("sceneViewChanged",c.hitch(this,this._onSceneViewChanged)));window.isBuilder?(d.subscribe("app/appConfigLoaded",c.hitch(this,this._onAppConfigLoaded)),d.subscribe("app/appConfigChanged",c.hitch(this,this._onAppConfigChanged))):(d.subscribe("appConfigLoaded",c.hitch(this,this._onAppConfigLoaded)),d.subscribe("appConfigChanged",
c.hitch(this,this._onAppConfigChanged)));d.subscribe("userSignIn",c.hitch(this,this._onUserSignIn));d.subscribe("userSignOut",c.hitch(this,this._onUserSignOut));d.subscribe("builder/actionTriggered",c.hitch(this,this._onActionTriggered));d.subscribe("/dnd/move/start",c.hitch(this,this._onMoveStart))},loadWidget:function(a){var b=new k,e;a=c.clone(a);a.folderUrl||q.processWidgetSetting(a);(e=this.getWidgetById(a.id))?b.resolve(e):m([this.loadWidgetClass(a),this.loadWidgetManifest(a)]).then(c.hitch(this,
function(a){var e=a[0],m=a[1];this.loadWidgetResources(m).then(c.hitch(this,function(a){try{var f=this.createWidget(m,e,a);console.log("widget ["+m.uri+"] created.")}catch(E){console.log("create ["+m.uri+"] error:"+E.stack),new t({message:window.jimuNls.createWidgetError+": "+m.uri}),b.reject(E)}setTimeout(c.hitch(this,function(){b.resolve(f);this.emit("widget-created",f);d.publish("widgetCreated",f)}),50)}),function(a){b.reject(a)})}),function(a){b.reject(a)});return b},loadWidgetClass:function(a){var b=
new k,e;e=a.isRemote?a.uri+".js":a.uri;require(q.getRequireConfig(),[e],c.hitch(this,function(a){b.resolve(a)}));q.checkError(a.uri,b);return b},loadWidgetResources:function(a){var b=new k,e,d,f,r=[];f=c.clone(a);a=this.tryLoadWidgetConfig(f);e=this._tryLoadResource(f,"i18n");d=this._tryLoadResource(f,"style");f=this._tryLoadResource(f,"template");r.push(a);r.push(e);r.push(f);r.push(d);m(r).then(c.hitch(this,function(a){var e={};e.config=a[0];e.i18n=a[1];e.template=a[2];e.style=a[3];b.resolve(e)}),
function(a){b.reject(a)});return b},loadWidgetManifest:function(a){var b=new k,d=q.getUriInfo(a.uri),d=d.isRemote?d.folderUrl+"manifest.json?f\x3djson":d.folderUrl+"manifest.json";if(a.manifest)return b.resolve(a),b;e(d,{handleAs:"json",headers:{"X-Requested-With":null}}).then(c.hitch(this,function(e){if(e.error&&e.error.code)return b.reject(e.error);e.amdFolder=a.amdFolder;e.category="widget";a.label?(this._processManifest(e),q.addManifest2WidgetJson(a,e),b.resolve(a)):q.addI18NLabel(e).then(c.hitch(this,
function(){this._processManifest(e);q.addManifest2WidgetJson(a,e);b.resolve(a)}))}),function(a){b.reject(a)});return b},getWidgetMarginBox:function(a){if("string"===typeof a&&(a=this.getWidgetById(a),!a))return{};if(a._marginBox)return a._marginBox;a.setPosition({left:-9999,top:-9999,relativeTo:a.position.relativeTo});this.openWidget(a);a._marginBox=a.getMarginBox();this.closeWidget(a);return a._marginBox},_processManifest:function(a){q.addManifestProperies(a);q.processManifestLabel(a,window.dojoConfig.locale)},
createWidget:function(a,b,e){if(this.getWidgetById(a.id))return this.getWidgetById(a.id);e.config&&e.i18n&&(e.config=q.replacePlaceHolder(e.config,e.i18n));a.rawConfig=a.config;a.config=e.config||{};this.appConfig._appData&&this._mergeAgolConfig(a);a.nls=e.i18n||{};e.template&&(a.templateString=e.template);a["class"]="jimu-widget";a.label||(a.label=a.name);a.sceneView=this.sceneView;a.appConfig=this.appConfig;e={};for(var d in a)a.hasOwnProperty(d)&&(e[d]=a[d]);e.widgetManager=this;a=new b(e);a.clazz=
b;f.after(a,"startup",c.hitch(this,this._postWidgetStartup,a));f.before(a,"destroy",c.hitch(this,this._onDestroyWidget,a));g(a.domNode,"click",c.hitch(this,this._onClickWidget,a));this.loaded.push(a);return a},getAllWidgets:function(){return this.loaded},destroyAllWidgets:function(){var a=n.map(this.loaded,function(a){return a.id});n.forEach(a,function(a){this.destroyWidget(a)},this);this.loaded=[]},loadWidgetSettingPage:function(a){var b=new k;a=c.clone(a);a.id+="_setting";m([this.loadWidgetSettingClass(a)]).then(c.hitch(this,
function(e){var d=e[0];this.loadWidgetSettingPageResources(a).then(c.hitch(this,function(e){var m,r={nls:e.i18n,appConfig:this.appConfig,sceneView:this.sceneView,"class":"jimu-widget-setting"};null!==e.template&&(r.templateString=e.template);for(var g in a)a.hasOwnProperty(g)&&(r[g]=a[g]);try{m=new d(r),f.before(m,"destroy",c.hitch(this,this._onDestroyWidgetSetting,m)),b.resolve(m)}catch(E){new t({message:window.jimuNls.createWidgetSettingError+":"+a.uri}),b.reject(E)}}),function(a){console.log(a)})}),
function(a){b.reject(a)});return b},loadWidgetSettingClass:function(a){var b=new k,e;e=a.isRemote?a.folderUrl+"setting/Setting.js":a.amdFolder+"setting/Setting";require(q.getRequireConfig(),[e],c.hitch(this,function(a){b.resolve(a)}));q.checkError(a.folderUrl+"setting/Setting.js",b);return b},loadWidgetSettingPageResources:function(a){var b=new k,e,d,f=[];a=c.clone(a);e=this._tryLoadResource(a,"settingI18n");d=this._tryLoadResource(a,"settingTemplate");a=this._tryLoadResource(a,"settingStyle");f.push(e);
f.push(d);f.push(a);m(f).then(c.hitch(this,function(a){var e={};e.i18n=a[0]||{};e.template=a[1];e.style=a[2];b.resolve(e)}),function(a){console.log(a)});return b},getWidgetById:function(a){var b;n.some(this.loaded,function(e){if(e.id===a)return b=e,!0},this);return b},getWidgetByLabel:function(a){var b;n.some(this.loaded,function(e){if(e.label===a)return b=e,!0},this);return b},getWidgetsByName:function(a){var b=[];n.some(this.loaded,function(e){e.name===a&&b.push(e)},this);return b},changeWindowStateTo:function(a,
b){"normal"===b?this.normalizeWidget(a):"minimized"===b?this.minimizeWidget(a):"maximized"===b?this.maximizeWidget(a):console.log("error state: "+b)},closeWidget:function(a){if("string"===typeof a&&(a=this.getWidgetById(a),!a))return;if("closed"!==a.state){this.activeWidget&&this.activeWidget.id===a.id&&(this.activeWidget.onDeActive(),this.activeWidget=null);l.setStyle(a.domNode,"display","none");a.setState("closed");try{a.onClose()}catch(v){console.log(console.error("fail to close widget "+a.name+
". "+v.stack))}}},openWidget:function(a){if("string"===typeof a&&(a=this.getWidgetById(a),!a))return;if(!a.started)try{a.started=!0,a.startup()}catch(v){console.error("fail to startup widget "+a.name+". "+v.stack)}if("closed"===a.state){l.setStyle(a.domNode,"display","");a.setState("opened");try{a.onOpen()}catch(v){console.error("fail to open widget "+a.name+". "+v.stack)}}},activateWidget:function(a){if("string"===typeof a&&(a=this.getWidgetById(a),!a))return;"opened"===a.state&&this._activeWidget(a)},
maximizeWidget:function(a){if("string"===typeof a&&(a=this.getWidgetById(a),!a))return;"closed"===a.state&&this.openWidget(a);a.setWindowState("maximized");try{a.onMaximize()}catch(v){console.log(console.error("fail to maximize widget "+a.name+". "+v.stack))}},minimizeWidget:function(a){if("string"===typeof a&&(a=this.getWidgetById(a),!a))return;"closed"===a.state&&this.openWidget(a);a.setWindowState("minimized");try{a.onMinimize()}catch(v){console.log(console.error("fail to minimize widget "+a.name+
". "+v.stack))}},normalizeWidget:function(a){if("string"===typeof a&&(a=this.getWidgetById(a),!a))return;"closed"===a.state&&this.openWidget(a);a.setWindowState("normal");try{a.onNormalize()}catch(v){console.log(console.error("fail to normalize widget "+a.name+". "+v.stack))}},destroyWidget:function(a){if("string"===typeof a&&(a=this.getWidgetById(a),!a))return;this._removeWidget(a);try{a.destroy()}catch(v){console.log(console.error("fail to destroy widget "+a.name+". "+v.stack))}},tryLoadWidgetConfig:function(a){return this._tryLoadWidgetConfig(a).then(c.hitch(this,
function(b){return this._upgradeWidgetConfig(a,b).then(function(b){return a.config=b})}))},triggerWidgetOpen:function(a){function b(a){var b=f.after(a,"onOpen",function(){b.remove();e.resolve(a)})}var e=new k,m=this.getWidgetById(a);if(m){if("closed"!==m.state)return e.resolve(m),e;b(m)}else var r=d.subscribe("widgetCreated",c.hitch(this,function(b){b.id===a&&(r.remove(),e.resolve(b))}));d.publish("openWidget",a);return e},_tryLoadWidgetConfig:function(a){var d=new k;if(a.config&&c.isObject(a.config))return d.resolve(a.config),
d;if(a.config){if(require.cache["url:"+a.config])return d.resolve(b.parse(require.cache["url:"+a.config])),d;d=q.processUrlInAppConfig(a.config);d=d.split("/");d[d.length-1]=encodeURIComponent(d[d.length-1]);d=d.join("/");return e(d,{handleAs:"json"})}return this._tryLoadResource(a,"config").then(function(b){a.isDefaultConfig=!0;return b})},_upgradeWidgetConfig:function(a,b){var e=new k,d=a.manifest.version,m=a.version,f;if(d===m)return e.resolve(b),e;if(!1===a.hasVersionManager)return a.version=
d,e.resolve(b),e;require(q.getRequireConfig(),[a.amdFolder+"VersionManager"],c.hitch(this,function(r){r=new r;var g=r.getVersionIndex(m),q=r.getVersionIndex(d);if(g>q)e.reject("Bad widget version number, "+a.name+","+m);else try{f=r.upgrade(b,m,d),a.version=d,e.resolve(f)}catch(H){console.log("Read widget ["+a.name+"] old config error,"+H.stack),e.resolve(b)}}));return e},loadWidgetStyle:function(a){var b="widget/style/"+a.uri,e=new k,b=this._replaceId(b);return l.byId(b)?(e.resolve("load"),e):q.loadStyleLink(b,
a.styleFile,"theme_"+this.appConfig.theme.name+"_style_common")},loadWidgetSettingStyle:function(a){var b="widget/style/"+a.uri+"/setting",e=new k,b=this._replaceId(b);return l.byId(b)?(e.resolve("load"),e):q.loadStyleLink(b,a.settingStyleFile)},loadWidgetConfig:function(a){a=require(q.getRequireConfig()).toUrl(a.configFile);if(require.cache["url:"+a]){var d=new k;d.resolve(b.parse(require.cache["url:"+a]));return d}return e(a,{handleAs:"json"})},loadWidgetI18n:function(a){var b=new k;require(q.getRequireConfig(),
["dojo/i18n!"+a.i18nFile],function(a){b.resolve(a)});return b},loadWidgetSettingI18n:function(a){var b=new k;require(q.getRequireConfig(),["dojo/i18n!"+a.settingI18nFile],function(a){b.resolve(a)});return b},loadWidgetTemplate:function(a){var b=new k;require(q.getRequireConfig(),["dojo/text!"+a.templateFile],function(a){b.resolve(a)});q.checkError(a.templateFile,b);return b},loadWidgetSettingTemplate:function(a){var b=new k;require(q.getRequireConfig(),["dojo/text!"+a.settingTemplateFile],function(a){b.resolve(a)});
q.checkError(a.settingTemplateFile,b);return b},removeWidgetStyle:function(a){l.destroy(this._replaceId("widget/style/"+a.uri))},removeWidgetSettingStyle:function(a){l.destroy(this._replaceId("widget/style/"+a.uri+"/setting"))},getControllerWidgets:function(){return n.filter(this.loaded,function(a){return a.isController})},getOffPanelWidgets:function(){return n.filter(this.loaded,function(a){return!a.inPanel})},getOnScreenOffPanelWidgets:function(){return n.filter(this.loaded,function(a){return a.isOnScreen&&
!a.inPanel})},closeOtherWidgetsInTheSameGroup:function(a){if("string"===typeof a&&(a=this.getWidgetById(a),!a))return;for(var b=0;b<this.loaded.length;b++)this.loaded[b].gid===a.gid&&this.loaded[b].id!==a.id&&this.closeWidget(this.loaded[b])},closeAllWidgetsInGroup:function(a){for(var b=0;b<this.loaded.length;b++)this.loaded[b].gid===a&&this.closeWidget(this.loaded[b])},_mergeAgolConfig:function(a){var b=this.appConfig._appData.values,e="widgets["+a.id+"]",d;for(d in b){var m=d.replace(/\//g,"_").indexOf(e+
"_config");0<=m&&q.template.setConfigValue(a,d.replace(/\//g,"_").substr(m,d.length).replace(e,"widget"),b[d])}},_onUserSignIn:function(a){n.forEach(this.loaded,function(b){b.onSignIn(a)},this)},_onUserSignOut:function(){n.forEach(this.loaded,function(a){a.onSignOut()},this)},_activeWidget:function(a){if(this.activeWidget){if(this.activeWidget.id===a.id){!1===this.activeWidget.inPanel&&this.activeWidget.moveTopOnActive&&l.setStyle(this.activeWidget.domNode,"zIndex",101);return}"active"===this.activeWidget.state&&
(this.activeWidget.setState("opened"),!1===this.activeWidget.inPanel&&l.setStyle(a.domNode,"zIndex","zIndex"in a.position?a.position.zIndex:"auto"),this.activeWidget.onDeActive())}this.activeWidget=a;"opened"===this.activeWidget.state&&(this.activeWidget.setState("active"),!1===this.activeWidget.inPanel&&this.activeWidget.moveTopOnActive&&l.setStyle(this.activeWidget.domNode,"zIndex",101),this.activeWidget.onActive(),d.publish("widgetActived",a))},_onClickWidget:function(b,e){var d=a(".jimu-widget",
b.domNode);if(0<d.length)for(var m=0;m<d.length;m++)if(e.target===d[m]||l.isDescendant(e.target,d[m]))return;this._activeWidget(b)},_onMoveStart:function(a){n.forEach(this.loaded,function(b){b.domNode===a.node&&this._activeWidget(b)},this)},_onAppConfigLoaded:function(a){this.appConfig=a=c.clone(a);u.setPortalUrl(a.portalUrl)},_onSceneViewLoaded:function(a){this.sceneView=a},_onSceneViewChanged:function(a){this.sceneView=a},_onAppConfigChanged:function(a,b,e,d){var m=c.clone(a);this.appConfig=m;n.forEach(this.loaded,
function(a){a&&(a.onAppConfigChanged(m,b,e,d),"widgetChange"===b&&this._onConfigChanged(e.id,e.config,d))},this)},_onConfigChanged:function(a,b){if(a=this.getWidgetById(a))a.onConfigChanged(b),c.mixin(a.config,b)},_onActionTriggered:function(a){if("map"!==a.elementId&&"app"!==a.elementId){var b=this.getWidgetById(a.elementId);if(b)b.onAction(a.action,a.data);else this.missedActions.push({id:a.elementId,action:{name:a.action,data:a.data}});n.forEach(this.getControllerWidgets(),function(b){if(b.widgetIsControlled(a.elementId))b.onAction(a.action,
{widgetId:a.elementId,data:a.data})},this)}},_postWidgetStartup:function(a){a.started=!0;q.setVerticalCenter(a.domNode);f.after(a,"resize",c.hitch(this,q.setVerticalCenter,a.domNode));this.openWidget(a);var b=u.getPortalCredential(this.appConfig.portalUrl);if(b)a.onSignIn(b);else a.onSignOut();this._triggerMissedAction(a)},_triggerMissedAction:function(a){this.missedActions.forEach(function(b){if(b.id===a.id)a.onAction(b.action.name,b.action.data)})},_remove:function(a){return n.some(this.loaded,
function(b,e){if(b.id===a)return this.loaded.splice(e,1),!0},this)},_tryLoadResource:function(a,b){var e,d=new k;if("config"===b)e=a.amdFolder+"config.json",a.configFile=e,e="hasConfig";else if("style"===b)e=a.amdFolder+"css/style.css",a.styleFile=e,e="hasStyle";else if("i18n"===b)e=a.amdFolder+"nls/strings.js",a.i18nFile=a.isRemote?e:a.amdFolder+"nls/strings",e="hasLocale";else if("template"===b)e=a.amdFolder+"Widget.html",a.templateFile=e,e="hasUIFile";else if("settingTemplate"===b)e=a.amdFolder+
"setting/Setting.html",a.settingTemplateFile=e,e="hasSettingUIFile";else if("settingI18n"===b)e=a.amdFolder+"setting/nls/strings.js",a.settingI18nFile=a.isRemote?e:a.amdFolder+"setting/nls/strings",e="hasSettingLocale";else if("settingStyle"===b)e=a.amdFolder+"setting/css/style.css",a.settingStyleFile=e,e="hasSettingStyle";else return d;a[e]?function(){var e;if("config"===b)e=this.loadWidgetConfig(a);else if("style"===b)e=this.loadWidgetStyle(a);else if("i18n"===b)e=this.loadWidgetI18n(a);else if("template"===
b)e=this.loadWidgetTemplate(a);else if("settingTemplate"===b)e=this.loadWidgetSettingTemplate(a);else if("settingStyle"===b)e=this.loadWidgetSettingStyle(a);else if("settingI18n"===b)e=this.loadWidgetSettingI18n(a);else return d;e.then(function(a){d.resolve(a)},function(e){console.error("Load widget resource error. resource:",b);console.error(e);new t({message:window.jimuNls.loadWidgetResourceError+": "+a.uri});d.reject(e)})}.apply(this):d.resolve(null);return d},_replaceId:function(a){return a.replace(/\//g,
"_").replace(/\./g,"_")},_onDestroyWidget:function(a){"closed"!==a.state&&this.closeWidget(a);this._removeWidget(a);console.log("destroy widget ["+a.uri+"].")},_onDestroyWidgetSetting:function(a){this.removeWidgetSettingStyle(a)},_removeWidget:function(a){if("string"===typeof a&&(a=this.getWidgetById(a),!a))return;this.activeWidget&&this.activeWidget.id===a.id&&(this.activeWidget=null);this._remove(a.id);0===this.getWidgetsByName(a.name).length&&this.removeWidgetStyle(a)}});x.getInstance=function(a){null===
r&&(r=new x(a),window._widgetManager=r);return r};return x})},"jimu/tokenUtils":function(){define("require dojo/_base/lang dojo/_base/array dojo/aspect dojo/Deferred dojo/cookie dojo/json dojo/topic dojo/request/script esri/kernel esri/request esri/core/urlUtils esri/identity/IdentityManager esri/identity/OAuthInfo jimu/portalUrlUtils jimu/utils".split(" "),function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t){"function"!==typeof d.getAll&&(d.getAll=function(a){var b=[];(a=d(a))&&b.push(a);return b});m={portalUrl:null,
cookiePath:"/",_started:!1,webTierPortalUrls:[],isInBuilderWindow:function(){return!!window.isBuilder},isInConfigOrPreviewWindow:function(){return t.isInConfigOrPreviewWindow()},isStringStartWith:function(a,b){return a.substr(0,b.length)===b},getCookiePath:function(){return this.cookiePath},setPortalUrl:function(a){(a=u.getStandardPortalUrl(a))&&(a+="/");this.portalUrl=a},getPortalUrl:function(){return this.portalUrl},isWebTierPortal:function(a){var d=new k,m=u.getStandardPortalUrl(a);a=m+"/sharing";
var r=u.setHttpsProtocol(m+"/sharing/generateToken?f\x3djson"),g=u.setHttpsProtocol(a);f.get(r,{jsonp:"callback"}).then(c.hitch(this,function(a){a.token?(this.webTierPortalUrls.push(m),this.removeWabAuthCookie(),b.id.getCredential(g).then(c.hitch(this,function(b){function g(a){var b=a.creationTime||(new Date).getTime(),e=a.expires;0<b&&0<e&&e>b&&setTimeout(function(){f.get(r,{jsonp:"callback"}).then(function(b){b.token&&(a.token=b.token,a.expires=b.expires,a.creationTime=(new Date).getTime(),a.refreshServerTokens(),
g(a))},function(a){console.error(a)})},.8*(e-b))}b.token||(b.token=a.token);b.expires||(b.expires=a.expires);var q=t.getEsriConfigRequestObject(),h=e.isTrustedServer(b.server,!0);-1<h&&q.corsEnabledServers.splice(h,1);this._pushCorsEnabledServerInfo({host:u.getServerByUrl(m),withCredentials:!0});d.resolve(!0);g(b)}),c.hitch(this,function(){d.resolve(!0)}))):d.resolve(!1)}),c.hitch(this,function(a){console.error(a);d.reject(a)}));return d},addAuthorizedCrossOriginDomains:function(a){if(a&&0<a.length)for(var b=
0;b<a.length;b++)this.addWithCredentialDomain(a[b])},addWithCredentialDomain:function(a){if(a&&"string"===typeof a){var b=t.getEsriConfigRequestObject().corsEnabledServers,d=u.getServerByUrl(a);(a=u.getServerWithProtocol(a))||(a="http://"+d);a=e.isTrustedServer(a,!0);-1<a&&b.splice(a,1);this._pushCorsEnabledServerInfo({host:d,withCredentials:!0})}},_pushCorsEnabledServerInfo:function(a){if(a){var b=t.getEsriConfigRequestObject(),e=b.corsEnabledServers,d="charAt charCodeAt concat endsWith indexOf lastIndexOf localeCompare match replace search slice split startsWith substr substring toLocaleLowerCase toLocaleUpperCase toLowerCase toString toUpperCase trim trimLeft trimRight valueOf".split(" ");
if("object"===typeof a&&"string"===typeof a.host){for(var m in a.host)a[m]="function"===typeof a.host[m]?function(){return a.host[m].apply(a.host,arguments)}:a.host[m];a.length=a.host.length;n.forEach(d,function(b){"function"===typeof a.host[b]&&(a[b]=function(){return a.host[b].apply(a.host,arguments)})});a.withCredentials&&b.webTierAuthServers&&0>b.webTierAuthServers.indexOf(a.host)&&b.webTierAuthServers.push(a.host)}e.push(a)}},tryRegisterCredential:function(a){return this.isValidCredential(a)?
n.some(b.id.credentials,c.hitch(this,function(b){return a.token===b.token}))?!1:(b.id.credentials.push(a),!0):!1},registerToken:function(a){var e=u.getSharingUrl(this.portalUrl);b.id.findCredential(e)&&n.some(b.id.credentials,c.hitch(this,function(a,e){if(this.isValidPortalCredentialOfPortalUrl(this.portalUrl,a))return b.id.credentials.splice(e,1),!0}));return this._getTokenInfo(a).then(function(a){b.id.registerToken(a)})},_getTokenInfo:function(a){var b=u.getPortalSelfInfoUrl(this.portalUrl);return f.get(b+
("?f\x3djson\x26token\x3d"+a),{jsonp:"callback"}).then(c.hitch(this,function(b){if(b.user)return{server:u.getSharingUrl(this.portalUrl),ssl:b.allSSL,token:a,userId:b.user.username};throw Error(window.jimuNls.urlParams.invalidToken);}),function(a){console.error(a);throw Error(window.jimuNls.urlParams.validateTokenError);})},_isInvalidPortalUrl:function(a){return a&&"string"===typeof a&&c.trim(a)},signInPortal:function(a){var e=new k;if(this._isInvalidPortalUrl(a)){a=u.getStandardPortalUrl(a);var d=
u.getSharingUrl(a),m=this.getPortalCredential(a);m?setTimeout(c.hitch(this,function(){e.resolve(m)}),0):e=b.id.getCredential(d)}else setTimeout(c.hitch(this,function(){e.reject("Invalid portalurl.")}),0);return e},_loadPortalSelfInfo:function(b){b=u.getPortalSelfInfoUrl(b);var e=new k;a(b,{responseType:"json",query:{f:"json"},callbackParamName:"callback"}).then(c.hitch(this,function(a){e.resolve(a.data)}),c.hitch(this,function(a){e.reject(a)}));return e},registerOAuthInfo:function(a,e){if(!a||"string"!==
typeof a||!e||"string"!==typeof e)return null;var d=b.id.findOAuthInfo(a);d||(d=window.location.protocol+"//"+window.location.host+p.toUrl("jimu")+"/oauth-callback.html",d=new q({appId:e,expiration:20160,portalUrl:a,authNamespace:"/",popup:!0,popupCallbackUrl:d}),b.id.registerOAuthInfos([d]));d.appId=e;return d},signOutAll:function(){var a=u.getStandardPortalUrl(this.portalUrl),e=!!b.id.findCredential(a+"/sharing/rest");window.appInfo.isRunInPortal?this.removeEsriAuthCookieStorage():this.removeWabAuthCookie();
b.id.destroyCredentials();b.id._oAuthHash=null;e&&this._publishCurrentPortalUserSignOut(a)},userHaveSignInPortal:function(a){return!!this.getPortalCredential(c.trim(a||""))},isValidCredential:function(a){var b=!1;if(a){var b=a.token,e=a.server,d=a.scope,b=b&&"string"===typeof b&&c.trim(b),e=e&&"string"===typeof e&&c.trim(e),d="portal"===d||"server"===d,m=!0;a.expires&&(a=parseInt(a.expires,10),m=(new Date).getTime(),m=a>m);b=b&&e&&d&&m}return b},isValidPortalCredentialOfPortalUrl:function(a,b){var e=
!1;this.isValidCredential(b)&&(e="portal"===b.scope,a=u.isSameServer(a,b.server),e=e&&a);return e},getPortalCredential:function(a){var e=null;a=c.trim(a||"");if(!a)return null;a=u.getStandardPortalUrl(a);return e=this._filterPortalCredential(a,b.id.credentials)},saveAndRegisterCookieToCredential:function(a){a=c.clone(a);a.referer=window.location.host;a.scope="portal";a.isAdmin=!!a.isAdmin;this.saveWabCookie(a);var e=a.server+"/sharing/rest";a.server=e;b.id.registerToken(a);return b.id.findCredential(e,
a.userId)},registerAuth2Hash:function(a){a=c.clone(a);var b=1E3*parseInt(a.expires_in,10),b=(new Date).getTime()+b,e=u.getStandardPortalUrl(a.state.portalUrl);return this.saveAndRegisterCookieToCredential({referer:window.location.host,server:e,token:a.access_token,expires:b,userId:a.username,scope:"portal",isAdmin:!!a.isAdmin})},saveWabCookie:function(a){this.removeCookie("wab_auth");d("wab_auth",h.stringify(a),{expires:new Date(a.expires),path:"/"})},removeWabAuthCookie:function(){this.removeCookie("wab_auth")},
removeEsriAuthCookieStorage:function(){this.removeCookie("esri_auth");window.localStorage&&window.localStorage.removeItem("esriJSAPIOAuth");window.sessionStorage&&window.sessionStorage.removeItem("esriJSAPIOAuth")},_filterPortalCredential:function(a,b){var e=null;b&&0<b.length&&(b=n.filter(b,c.hitch(this,function(b){return this.isValidPortalCredentialOfPortalUrl(a,b)})),0<b.length&&(e=b[b.length-1]));return e},_removePortalCredential:function(a){var e=c.trim(a||"");if(e){e=u.getStandardPortalUrl(e);
for(a=n.filter(b.id.credentials,c.hitch(this,function(a){return this.isValidPortalCredentialOfPortalUrl(e,a)}));0<a.length;)a[0].destroy(),a.splice(0,1);b.id.credentials=n.filter(b.id.credentials,c.hitch(this,function(a){return!this.isValidPortalCredentialOfPortalUrl(e,a)}))}},getUserIdByToken:function(e,d){var m=new k;if(e&&"string"===typeof e&&d&&"string"===typeof d){var f=u.getStandardPortalUrl(d);d=n.filter(b.id.credentials,c.hitch(this,function(a){var b=a.token===e&&a.userId;a=u.isSameServer(f,
a.server);return b&&a}));if(0<d.length){var g=d[0];setTimeout(c.hitch(this,function(){m.resolve(g.userId)}),0);return m}d=u.getCommunitySelfUrl(f);a(d,{responseType:"json",query:{f:"json"},callbackParamName:"callback"}).then(c.hitch(this,function(a){a=a&&a.data;m.resolve(a&&a.username||"")}),c.hitch(this,function(a){console.error(a);m.reject("fail to get userId by token")}))}else setTimeout(c.hitch(this,function(){m.reject("invalid parameters")}),0);return m},xtGetCredentialFromCookie:function(a){var e=
d("wab_auth"),m=null;if(e)try{m=h.parse(e)}catch(v){console.error(v)}if(!m||"object"!==typeof m||!u.isSameServer(a,m.server)||window.location.host!==m.referer)return null;m.expires=parseInt(m.expires,10);e=(new Date).getTime();if(!(m.expires>e))return this.removeCookie("wab_auth"),null;a+="/sharing/rest";m.server=a;(e=b.id.findCredential(a))||b.id.registerToken(m);return e=b.id.findCredential(a)},removeCookie:function(a){var b=this.getCookiePath();t.removeCookie(a,b)},_getDomainsByServerName:function(a){var b=
a.split("."),e=b.length;return n.map(b,c.hitch(this,function(a,d){a=b.slice(d,e);var m="",f=a.length-1;n.forEach(a,c.hitch(this,function(a,b){m+=a;b!==f&&(m+=".")}));return m}))},_publishCurrentPortalUserSignIn:function(a){if(this.isValidCredential(a))try{g.publish("userSignIn",a)}catch(x){console.error(x)}},_publishAnyUserSignIn:function(a){if(this.isValidCredential(a))try{g.publish("anyUserSignIn",a)}catch(x){console.error(x)}},_publishCurrentPortalUserSignOut:function(a){try{g.publish("userSignOut",
a)}catch(x){console.error(x)}},_signInSuccess:function(a){try{this.isValidPortalCredentialOfPortalUrl(this.portalUrl,a)&&this._publishCurrentPortalUserSignIn(a),this._publishAnyUserSignIn(a)}catch(x){console.error(x)}},_bindEvents:function(){l.after(b.id,"signIn",c.hitch(this,function(a,b){console.log(b[1]);l.after(a,"callback",c.hitch(this,function(a,b){this._signInSuccess(b[0],!1)}));return a}))},isStart:function(){return this._started},startup:function(){if(!this._started){if(this.isInConfigOrPreviewWindow()){var a=
window.parent;if(a){var e=a.esri&&a.esri.id;if(e){b.id=e;p.module.deps.some(c.hitch(this,function(a){return"esri/identity/IdentityManager"===a.mid?(a.result=e,!0):!1}));var d=t.getEsriConfigRequestObject(),a=a.esriConfig.defaults.io;d.corsEnabledServers=a.corsEnabledServers;d.webTierAuthServers=a.webTierAuthServers;d._processedCorsServers=a._processedCorsServers;d.corsStatus=a.corsStatus}}}this._bindEvents();this._started=!0}}};m.startup();return m})},"jimu/dijit/Message":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/keys dojo/on jimu/dijit/Popup".split(" "),
function(p,c,n,l,k,d){return p(d,{baseClass:"jimu-popup jimu-message",declaredClass:"jimu.dijit.Message",type:"message",message:"",autoHeight:!0,maxWidth:350,maxHeight:180,postMixInProperties:function(){this.content=this.message},_createTitleNode:function(){this.titleLabel&&(this.titleNode=n.create("div",{"class":"title"},this.domNode),this.titleLabeNode=n.create("span",{"class":"title-label jimu-float-leading",innerHTML:this.titleLabel||"\x26nbsp"},this.titleNode),this.closeBtnNode=n.create("div",
{"class":"close-btn jimu-float-trailing"},this.titleNode),this.own(k(this.closeBtnNode,"click",c.hitch(this,this.close))))},_preProcessing:function(){0===this.buttons.length&&this.buttons.push({label:window.jimuNls.common.ok,key:l.ENTER,onClick:c.hitch(this,this.close)})},_increaseZIndex:function(){n.setStyle(this.domNode,"zIndex",501);n.setStyle(this.overlayNode,"zIndex",500)}})})},"jimu/dijit/Popup":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/fx dojo/on dojo/sniff dojo/touch dojo/query dojo/dnd/move dijit/_WidgetBase jimu/utils".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e){var m=0;return p(a,{declaredClass:"jimu.dijit.Popup",baseClass:"jimu-popup",titleLabel:"",content:null,container:null,buttons:[],enabledButtons:[],disabledButtons:[],onClose:null,_fixedHeight:!1,autoHeight:!1,maxHeight:800,maxWidth:1024,constructor:function(){this.buttons=[];this.enabledButtons=[];this.disabledButtons=[];this.pauseKeyHandles=[];this.container=jimuConfig.layoutId},postCreate:function(){this._preProcessing();this.inherited(arguments);this._initDomNode();
this._positioning();l.place(this.domNode,this.container);setTimeout(c.hitch(this,function(){this._moveToMiddle()}),50);this.own(d(window,"resize",c.hitch(this,function(){this._fixedHeight||this.autoHeight?(this._calculatePosition(),this._moveToMiddle()):this._positioning()})));this.overlayNode=l.create("div",{"class":"jimu-overlay"},this.container);this._increaseZIndex();k.animateProperty({node:this.domNode,properties:{opacity:1},duration:200}).play();this.domNode.focus()},_preProcessing:function(){"number"===
typeof this.height&&(this._fixedHeight=!0,this.autoHeight=!1);this.autoHeight&&(this.maxHeight=598)},_createTitleNode:function(){this.titleNode=l.create("div",{"class":"title"},this.domNode);this.titleLabeNode=l.create("span",{"class":"title-label jimu-float-leading",innerHTML:this.titleLabel||"\x26nbsp"},this.titleNode);this.closeBtnNode=l.create("div",{"class":"close-btn jimu-icon jimu-icon-close jimu-float-trailing"},this.titleNode);var a=null,a="ontouchstart"in document?g.press:"click";this.own(d(this.closeBtnNode,
a,c.hitch(this,this.close)))},_initDomNode:function(){this._createTitleNode();this.contentContainerNode=l.create("div",{"class":"content"},this.domNode);this.content&&("string"===typeof this.content?this.contentContainerNode.innerHTML=this.content:this.content.domNode?(this.content.placeAt(this.contentContainerNode),this.content.popup=this):1===this.content.nodeType&&l.place(this.content,this.contentContainerNode));this.buttonContainer=l.create("div",{"class":"button-container"},this.domNode);0===
this.buttons.length&&l.setStyle(this.buttonContainer,"display","none");for(var a=this.buttons.length-1;-1<a;a--)this._createButton(this.buttons[a]),this.buttons[a].disable&&this.disableButton(a)},_limitButtonsMaxWidth:function(){var a=this.enabledButtons.length;if(0!==a){var b=l.getContentBox(this.buttonContainer),e=l.getMarginExtents(this.enabledButtons[0]),d=l.getPadBorderExtents(this.enabledButtons[0]),m=0,d=8===h("ie")?d.l+d.r:0,m=(b.w-(e.l+e.r+d)*a)/a;0<m&&(n.forEach(this.enabledButtons,c.hitch(this,
function(a){l.setStyle(a,"maxWidth",m+"px")})),n.forEach(this.disabledButtons,c.hitch(this,function(a){l.setStyle(a,"maxWidth",m+"px")})))}},_moveableNode:function(a,e){this.moveable&&(this.moveable.destroy(),this.moveable=null);var m=l.getMarginBox(this.container);m.l=m.l-a+e;m.w+=2*(a-e);this.moveable=new b.boxConstrainedMoveable(this.domNode,{box:m,handle:this.titleNode||this.contentContainerNode,within:!0});this.own(d(this.moveable,"Moving",c.hitch(this,this.onMoving)));this.own(d(this.moveable,
"MoveStop",c.hitch(this,this.onMoveStop)))},_getHeaderBox:function(){return 0===f("#header").length?{t:0,l:0,w:0,h:0}:l.getMarginBox("header")},_getFooterBox:function(){return 0===f(".footer",this.container).length?{t:0,l:0,w:0,h:0}:l.getMarginBox(f(".footer",this.container)[0])},_calculatePosition:function(){var a=l.getContentBox(this.container),b=this._getHeaderBox(),e=this._getFooterBox(),e=a.h-b.h-e.h-40,d=0;d=this._fixedHeight?this.height:this.autoHeight?e-200:this.height=e>this.maxHeight?this.maxHeight:
e;e=(e-d)/2+b.h+20;e=e<b.h?b.h:e;this.width=this.width||this.maxWidth;l.setStyle(this.domNode,{left:(a.w-this.width)/2+"px",top:e+"px",width:this.width+"px"})},_calculateHeight:function(){this.autoHeight?(l.setStyle(this.domNode,"height","auto"),l.addClass(this.contentContainerNode,"content-static"),0===this.buttons.length&&l.setStyle(this.contentContainerNode,{marginBottom:"15px"})):(l.setStyle(this.domNode,"height",this.height+"px"),l.addClass(this.contentContainerNode,"content-absolute"),l.addClass(this.buttonContainer,
"button-container-absolute"),0===this.buttons.length&&l.setStyle(this.contentContainerNode,{bottom:"15px"}));this._moveableNode(this.width,100)},_moveToMiddle:function(){if(this.autoHeight){var a=l.getMarginBox(this.domNode),b=l.getContentBox(this.container),e=this._getHeaderBox(),d=this._getFooterBox(),d=b.h-e.h-d.h-40,m=0,m=a.h||d-200,a=(d-m)/2+e.h+20,a=a<e.h?e.h:a;l.setStyle(this.domNode,{left:(b.w-this.width)/2+"px",top:a+"px",width:this.width+"px"})}},_positioning:function(){this._calculatePosition();
this._calculateHeight()},_increaseZIndex:function(){l.setStyle(this.domNode,"zIndex",m+200+1);l.setStyle(this.overlayNode,"zIndex",m+200);m++},setTitleLabel:function(a){this.titleNode.innerHTML=e.stripHTML(a)},onMoving:function(a){l.setStyle(a.node,"opacity",.9)},onMoveStop:function(a){l.setStyle(a.node,"opacity",1)},close:function(){if(!this.onClose||!1!==this.onClose()){var a=this.domNode.parentNode,b=c.clone(this.domNode);l.setStyle(this.domNode,"display","none");l.destroy(this.overlayNode);this.destroy();
this.moveable.destroy();l.place(b,a);k.animateProperty({node:b,properties:{opacity:0},duration:200,onEnd:function(){l.destroy(b)}}).play()}},addButton:function(a){this._createButton(a)},_createButton:function(a){var b=" ";a.classNames&&0<a.classNames.length&&"function"===typeof a.classNames.join&&(b+=a.classNames.join(" "));var e=l.create("div",{"class":"jimu-btn jimu-float-trailing jimu-trailing-margin1 "+b,innerHTML:a.label,title:a.title},this.buttonContainer);this.enabledButtons.unshift(e);b=l.create("div",
{"class":"jimu-btn jimu-state-disabled jimu-float-trailing jimu-trailing-margin1 "+b,title:a.title,innerHTML:a.label,style:{display:"none"}},this.buttonContainer);this.disabledButtons.unshift(b);this.own(d(e,"click",c.hitch(this,function(b){if(a.onClick)a.onClick(b);else this.close()})))},setButtonProps:function(a,b){"number"===typeof a&&isFinite(a)||(b=a,a=0);if(b&&0!==this.enabledButtons.length)for(var e in b)"title"===e?(l.setAttr(this.enabledButtons[a],"title",b[e]),l.setAttr(this.disabledButtons[a],
"title",b[e])):"label"===e&&(l.setProp(this.enabledButtons[a],"innerHTML",b[e]),l.setProp(this.disabledButtons[a],"innerHTML",b[e]))},enableButton:function(a){"number"===typeof a&&isFinite(a)&&a<this.enabledButtons.length?(l.setStyle(this.enabledButtons[a],"display","inline-block"),l.setStyle(this.disabledButtons[a],"display","none")):(n.forEach(this.enabledButtons[a],c.hitch(this,function(a){l.setStyle(a,"display","inline-block")})),n.forEach(this.disabledButtons[a],c.hitch(this,function(a){l.setStyle(a,
"display","none")})))},disableButton:function(a){"number"===typeof a&&isFinite(a)&&a<this.disabledButtons.length?(l.setStyle(this.disabledButtons[a],"display","inline-block"),l.setStyle(this.enabledButtons[a],"display","none")):(n.forEach(this.disabledButtons,c.hitch(this,function(a){l.setStyle(a,"display","inline-block")})),n.forEach(this.enabledButtons,c.hitch(this,function(a){l.setStyle(a,"display","none")})))},showButton:function(a){this.enableButton(a)},hideButton:function(a){"number"===typeof a&&
isFinite(a)&&a<this.disabledButtons.length?(l.setStyle(this.disabledButtons[a],"display","none"),l.setStyle(this.enabledButtons[a],"display","none")):(n.forEach(this.disabledButtons,c.hitch(this,function(a){l.setStyle(a,"display","none")})),n.forEach(this.enabledButtons,c.hitch(this,function(a){l.setStyle(a,"display","none")})))}})})},"dojo/dnd/move":function(){define("../_base/declare ../dom-geometry ../dom-style ./common ./Mover ./Moveable".split(" "),function(p,c,n,l,k,d){l=p("dojo.dnd.move.constrainedMoveable",
d,{constraints:function(){},within:!1,constructor:function(d,g){g||(g={});this.constraints=g.constraints;this.within=g.within},onFirstMove:function(d){var g=this.constraintBox=this.constraints.call(this,d);g.r=g.l+g.w;g.b=g.t+g.h;this.within&&(d=c.getMarginSize(d.node),g.r-=d.w,g.b-=d.h)},onMove:function(d,g){var f=this.constraintBox,b=d.node.style;this.onMoving(d,g);g.l=g.l<f.l?f.l:f.r<g.l?f.r:g.l;g.t=g.t<f.t?f.t:f.b<g.t?f.b:g.t;b.left=g.l+"px";b.top=g.t+"px";this.onMoved(d,g)}});k=p("dojo.dnd.move.boxConstrainedMoveable",
l,{box:{},constructor:function(d,g){var f=g&&g.box;this.constraints=function(){return f}}});p=p("dojo.dnd.move.parentConstrainedMoveable",l,{area:"content",constructor:function(d,g){var f=g&&g.area;this.constraints=function(){var b=this.node.parentNode,a=n.getComputedStyle(b),e=c.getMarginBox(b,a);if("margin"==f)return e;var d=c.getMarginExtents(b,a);e.l+=d.l;e.t+=d.t;e.w-=d.w;e.h-=d.h;if("border"==f)return e;d=c.getBorderExtents(b,a);e.l+=d.l;e.t+=d.t;e.w-=d.w;e.h-=d.h;if("padding"==f)return e;d=
c.getPadExtents(b,a);e.l+=d.l;e.t+=d.t;e.w-=d.w;e.h-=d.h;return e}}});return{constrainedMoveable:l,boxConstrainedMoveable:k,parentConstrainedMoveable:p}})},"jimu/shared/AppVersionManager":function(){define(["./BaseVersionManager"],function(p){function c(){this.versions=[{version:"2.0beta",description:"The version for Developer Edition beta 2.0.",upgrader:function(c){return c},compatible:!0},{version:"2.0",description:"The version for Online 4.1.",upgrader:function(c){return c},compatible:!0},{version:"2.0.1",
description:"The version for Developer Edition 2.0.",upgrader:function(c){var l=null,k=0,d=c.widgetOnScreen.widgets;if(d&&0<d.length)for(k=0;k<d.length;k++)l=d[k],"widgets/Viz/Widget"===l.uri&&(l.uri="widgets/3DFx/Widget",l.name="3DFx");if((d=c.widgetPool.widgets)&&0<d.length)for(k=0;k<d.length;k++)l=d[k],"widgets/Viz/Widget"===l.uri&&(l.uri="widgets/3DFx/Widget",l.name="3DFx");return c},compatible:!0},{version:"2.1",description:"The version for Online 4.2.",upgrader:function(c){return c},compatible:!0},
{version:"2.2",description:"The version for Online 4.3.",upgrader:function(c){return c},compatible:!0},{version:"2.3",description:"The version for Online 4.4.",upgrader:function(c){return c},compatible:!0},{version:"2.4",description:"The version for Online 5.1.",upgrader:function(c){return c},compatible:!0},{version:"2.5",description:"The version for Online 5.2.",upgrader:function(c){return c},compatible:!0},{version:"2.6",description:"The version for Online 5.3.",upgrader:function(c){return c},compatible:!0},
{version:"2.7",description:"The version for Online 5.4.",upgrader:function(c){(function(){function l(k){var d=0,h=0;if(c[k].widgets)for(d=0;d<c[k].widgets.length;d++)if("widgets/Environment/Widget"===c[k].widgets[d].uri){c[k].widgets[d].uri="widgets/Daylight/Widget";break}if(c[k].groups)for(d=0;d<c[k].groups.length;d++)for(var g=c[k].groups[d],h=0;h<g.widgets.length;h++)if("widgets/Environment/Widget"===g.widgets[h].uri){g.widgets[h].uri="widgets/Daylight/Widget";break}}l("widgetOnScreen");l("widgetPool")})();
return c},compatible:!0},{version:"2.8",description:"The version for Online 6.1.",upgrader:function(c){return c},compatible:!0},{version:"2.9",description:"The version for Online 6.2.",upgrader:function(c){return c},compatible:!0},{version:"2.10",description:"The version for Online 6.3.",upgrader:function(c){return c},compatible:!0},{version:"2.11",description:"The version for Online 6.4.",upgrader:function(c){return c},compatible:!0},{version:"2.12",description:"The version for Online 7.1",upgrader:function(c){return c},
compatible:!0},{version:"2.13",description:"The version for Online 7.2",upgrader:function(c){return c},compatible:!0}];this.isCompatible=function(c,l){c=this.getVersionIndex(c);l=this.getVersionIndex(l);for(c+=1;c<=l;c++)if(!1===this.versions[c].compatible)return!1;return!0}}c.prototype=new p;return c.prototype.constructor=c})},"jimu/shared/BaseVersionManager":function(){define(function(){return function(){this.versions=[];this.upgrade=function(p,c,n){c=this.getVersionIndex(c);n=this.getVersionIndex(n);
if(c>=n)throw Error("New version should higher than old version.");for(c+=1;c<=n;c++)this.versions[c].upgrader&&(p=this.versions[c].upgrader(p));return p};this.getVersionIndex=function(p){p=this.fixVersion(p);var c,n;for(n=0;n<this.versions.length;n++)this.versions[n].version===p&&(c=n);null===p&&(c=-1);void 0===c&&(c=this.versions.length-1);return c};this.fixVersion=function(p){return p?p:null}}})},"jimu/ConfigLoader":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/config dojo/cookie dojo/Deferred dojo/promise/all dojo/request/xhr ./utils ./WidgetManager ./shared/utils ./tokenUtils ./portalUtils ./appConfigResourceUtils ./portalUrlUtils ./AppStateManager esri/identity/IdentityManager esri/core/urlUtils".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w){var v=null,y;y=p(null,{urlParams:null,appConfig:null,rawAppConfig:null,configFile:null,_configLoaded:!1,portalSelf:null,constructor:function(b,e){this._removeHash(b);this.urlParams=b||{};this.widgetManager=a.getInstance();c.mixin(this,e)},loadConfig:function(){console.time("Load Config");return this._tryLoadConfig().then(c.hitch(this,function(a){var e=this.checkConfig(a);if(e)throw e;this.rawAppConfig=c.clone(a);r.getInstance().setRawAppConfig(this.rawAppConfig);
a=this._upgradeAppConfig(a);this._processAfterTryLoad(a);this.appConfig=a;if(this.urlParams.id)return this.loadWidgetsManifest(a).then(c.hitch(this,function(){return this._upgradeAllWidgetsConfig(a)})).then(c.hitch(this,function(a){return this.insertAppIdtoResourceUrlofAppConfig(a,this.urlParams.id)})).then(c.hitch(this,function(){this._configLoaded=!0;a.title&&(document.title=window.isBuilder?b.stripHTML(a.title)+" - Web AppBuilder for ArcGIS":b.stripHTML(a.title));this._readAndSetSharedTheme(a);
return this.getAppConfig()}));m.setPortalUrl(a.portalUrl);return this._proesssWebTierAndSignin(a).then(c.hitch(this,function(){if(this.urlParams.appid){if(window.appInfo.isRunInPortal){var e=t.getStandardPortalUrl(a.portalUrl),e=q.getPortal(e);return b.checkEssentialAppsLicense(this.urlParams.appid,e,m.isInBuilderWindow()).then(c.hitch(this,function(){return this._getAppConfigFromTemplateAppId(a.portalUrl,this.urlParams.appid).then(c.hitch(this,function(a){this._tryUpdateAppConfigByLocationUrl(a);
return this._processInPortalAppProtocol(a)}))}),c.hitch(this,function(a){console.error(a);throw Error(window.jimuNls.essentialAppsLicenseErrorForApp);}))}return this._processNotInPortalAppProtocol(a).then(c.hitch(this,function(a){return this._getAppDataAddTemplateDataFromTemplateAppId(a.portalUrl,this.urlParams.appid).then(c.hitch(this,function(b){b.appData.appConfig&&(a=b.appData.appConfig);a._appData=b.appData;a.templateConfig=b.templateData;a.isTemplateApp=!0;return a}))}))}return this._processNotInPortalAppProtocol(a)})).then(c.hitch(this,
function(a){this._processAfterTryLoad(a);this.appConfig=a;return a.map.itemId?a:q.getDefaultWebScene(a.portalUrl).then(function(b){a.map.itemId=b;return a})})).then(c.hitch(this,function(a){return this.loadWidgetsManifest(a)})).then(c.hitch(this,function(a){return a._appData?a._appData.values&&a._appData.values.webmap?q.getPortal(a.portalUrl).getItemById(a._appData.values.webmap).then(c.hitch(this,function(e){return b.template.mergeTemplateAppConfigToAppConfig(a,a._appData,e)})):b.template.mergeTemplateAppConfigToAppConfig(a,
a._appData):a})).then(c.hitch(this,function(){return this._upgradeAllWidgetsConfig(a)})).then(c.hitch(this,function(a){return a._wabAppId?this.processResourceInAppConfigForConfigLoader(a,this.urlParams):a.appItemId&&-1<window.JSON.stringify(a).indexOf("${itemId}")?this.insertAppIdtoResourceUrlofAppConfig(a,a.appItemId):a})).then(c.hitch(this,function(){this.appConfig=a;this._configLoaded=!0;a.title&&(document.title=b.stripHTML(a.title));this._readAndSetSharedTheme(a);return this.getAppConfig()}))}),
c.hitch(this,function(a){this.showError(a)}))},processResourceInAppConfigForConfigLoader:function(a,b){var e=a.portalUrl,d=a.appItemId,m=b.appid,f=new h,g=c.clone(a);this.insertAppIdtoResourceUrlofAppConfig(g,m).then(function(){if("config"===b.mode){var r=this.getResourceUrlsOfAppConfig(a).result;0!==r.length?q.getItemResources(e,m).then(function(a){if(0===a.length)return r=r.map(function(a){return{resUrl:a}}),u.AddResourcesToItemForAppSave(e,r,d,m).then(function(){f.resolve(g)},function(a){console.warn("Add resource to template based app error:"+
a.message||a);f.resolve(g)});f.resolve(g)},function(a){console.warn("Get resource of template based item error:"+a.message||a);f.resolve(g)}):f.resolve(g)}else f.resolve(g)}.bind(this),function(a){console.warn("Insert appId to resource url of appConfig error:"+a.message||a);f.resolve(g)});return f},getResourceUrlsOfAppConfig:function(a){var e={test:function(a){return/^https?:\/\/(.)+\/sharing\/rest\/content\/items/.test(a)},func:c.hitch(this,function(a){return a.value})};return b.processItemResourceOfAppConfig(a,
e)},insertAppIdtoResourceUrlofAppConfig:function(a,e){function d(a){return/^https?:\/\/(.)+\/sharing\/rest\/content\/items/.test(a)}function m(a,b){var e=b.obj,d=b.key,m={obj:e,key:d};"number"===typeof b.i?(m.i=b.i,m.value=e[d][b.i]):m.value=e[d];b=m;a=g.processItemIdAndTokenOfResources(b.value,a);e=b.obj;d=b.key;"number"===typeof b.i?e[d][b.i]=a:e[d]=a;return!0}var f=a.portalUrl,g=this;return q.getPortal(f).getItemById(e).then(c.hitch(this,function(g){g={test:d,func:c.hitch(this,m,{appId:e,isPublic:"public"===
g.access,portalUrl:f})};return b.processItemResourceOfAppConfig(a,g).appConfig}))},processItemIdAndTokenOfResources:function(a,b){0<a.indexOf("${itemId}")&&(a=a.replace("${itemId}",b.appId));/(\?|\&)token=.+/.test(a)&&(a=a.replace(/(\?|\&)token=.+/,""));b.isPublic||(b=m.getPortalCredential(b.portalUrl))&&(a+="?token\x3d"+b.token);return a},getAppConfig:function(){var a=c.clone(this.appConfig);a.getConfigElementById=function(a){return b.getConfigElementById(this,a)};a.getConfigElementsByName=function(a){return b.getConfigElementsByName(this,
a)};a.visitElement=function(a){b.visitElement(this,a)};this._addAuthorizedCrossOriginDomains(this.portalSelf,a);return a},_addAuthorizedCrossOriginDomains:function(a,b){a&&a.authorizedCrossOriginDomains&&m.addAuthorizedCrossOriginDomains(a.authorizedCrossOriginDomains);b&&b.authorizedCrossOriginDomains&&m.addAuthorizedCrossOriginDomains(b.authorizedCrossOriginDomains)},checkConfig:function(a){return(a=this._getRepeatedId(a))?"repeated id:"+a:null},processProxy:function(a){var e=b.getEsriConfigRequestObject();
e.alwaysUseProxy=a.httpProxy&&a.httpProxy.useProxy&&a.httpProxy.alwaysUseProxy;e.proxyUrl="";e.proxyRules=[];a.httpProxy&&a.httpProxy.useProxy&&a.httpProxy.url&&(e.proxyUrl=a.httpProxy.url);a.httpProxy&&a.httpProxy.useProxy&&a.httpProxy.rules&&n.forEach(a.httpProxy.rules,function(a){w.addProxyRule(a)})},addNeedValues:function(a){this._processNoUriWidgets(a);this._processEmptyGroups(a);this._addElementId(a);this._processWidgetJsons(a)},showError:function(a){l.create("div",{"class":"app-error",innerHTML:b.sanitizeHTML(a.message)},
document.body)},_tryLoadConfig:function(){if(this.urlParams.config)return this.configFile=this.urlParams.config,f(this.configFile,{handleAs:"json",headers:{"X-Requested-With":null}}).then(c.hitch(this,function(a){m.setPortalUrl(a.portalUrl);return this.urlParams.token?m.registerToken(this.urlParams.token).then(function(){return a}):a}));if(this.urlParams.id){window.appInfo.isRunInPortal=!0;var a=t.getPortalUrlFromLocation(),e=new h;m.setPortalUrl(a);var d;this.urlParams.token?d=m.registerToken(this.urlParams.token):
(d=new h,d.resolve());d.then(c.hitch(this,function(){var d=q.getPortal(a);d.loadSelfInfo().then(c.hitch(this,function(f){this.portalSelf=f;f.allSSL&&"http:"===window.location.protocol?(window.location.href=t.setHttpsProtocol(window.location.href),e.reject()):this._processSignIn(a).then(c.hitch(this,function(){this._getAppConfigFromAppId(a,this.urlParams.id).then(c.hitch(this,function(a){return b.checkEssentialAppsLicense(this.urlParams.id,d,m.isInBuilderWindow()).then(c.hitch(this,function(){this._tryUpdateAppConfigByLocationUrl(a);
return this._processInPortalAppProtocol(a)}),c.hitch(this,function(a){console.error(a);throw Error(window.jimuNls.essentialAppsLicenseErrorForApp);}))})).then(function(a){e.resolve(a)},function(a){e.reject(a)})}))}))}),c.hitch(this,function(a){this.showError(a)}));return e}this.configFile="config.json";return f(this.configFile,{handleAs:"json"}).then(c.hitch(this,function(a){m.setPortalUrl(a.portalUrl);return this.urlParams.token?m.registerToken(this.urlParams.token).then(function(){return a}):a}))},
_upgradeAppConfig:function(a){var b=window.wabVersion,e=a.wabVersion;if(b===e)return a;var d=this.versionManager.getVersionIndex(e),m=this.versionManager.getVersionIndex(b);if(d>m)throw Error("Bad version number, "+e);a=this.versionManager.upgrade(a,e,b);a.wabVersion=b;a.isUpgraded=!0;return a},_upgradeAllWidgetsConfig:function(a){var b=new h,d=[];if(!a.isUpgraded)return b.resolve(a),b;delete a.isUpgraded;e.visitElement(a,c.hitch(this,function(a){a.uri&&(a.config?(a=this.widgetManager.tryLoadWidgetConfig(a),
d.push(a)):a.version=a.manifest.version)}));g(d).then(c.hitch(this,function(){b.resolve(a)}),function(a){b.reject(a)});return b},_processAfterTryLoad:function(a){this._setPortalUrl(a);this._tryUpdateAppConfigByLocationUrl(a);this._processUrlParams(a);this.addNeedValues(a);this.processProxy(a);x.tokenValidity=10080;return a},_readAndSetSharedTheme:function(a){a.theme.sharedTheme||(a.theme.sharedTheme={useHeader:!1,useLogo:!1},a.theme.sharedTheme.isPortalSupport=this.portalSelf.portalProperties&&this.portalSelf.portalProperties.sharedTheme?
!0:!1);a.theme.sharedTheme.useHeader&&(a.theme.sharedTheme.isPortalSupport&&this.portalSelf.portalProperties?(a.theme.customStyles={mainBackgroundColor:this.portalSelf.portalProperties.sharedTheme.header.background},a.titleColor=this.portalSelf.portalProperties.sharedTheme.header.text):console.error("Portal does not support sharedTheme."));a.theme.sharedTheme.useLogo&&(a.theme.sharedTheme.isPortalSupport&&this.portalSelf.portalProperties?(a.logo=this.portalSelf.portalProperties.sharedTheme.logo.small?
this.portalSelf.portalProperties.sharedTheme.logo.small:"images/app-logo.png",!a.logoLink&&this.portalSelf.portalProperties.sharedTheme.logo.link&&(a.logoLink=this.portalSelf.portalProperties.sharedTheme.logo.link)):(console.error("Portal does not support sharedTheme, use default logo."),a.logo="images/app-logo.png"))},_tryUpdateAppConfigByLocationUrl:function(a){if(!(this.urlParams.config&&-1<this.urlParams.config.indexOf("arcgis.com/sharing/rest/content/items/"))){var b=t.getPortalUrlFromLocation(),
b=t.getStandardPortalUrl(b);t.isOnline(b)&&(b=t.updateUrlProtocolByOtherUrl(b,a.portalUrl),a.map.portalUrl&&t.isSamePortalUrl(a.portalUrl,a.map.portalUrl)&&(a.map.portalUrl=b),a.portalUrl=b,a.httpProxy&&a.httpProxy.url&&(a.httpProxy.url=t.getPortalProxyUrl(b)))}},_processWidgetJsons:function(a){e.visitElement(a,function(a,e){e.isWidget&&a.uri&&b.processWidgetSetting(a)})},_processNoUriWidgets:function(a){var b=0;e.visitElement(a,function(a,e){e.isWidget&&!a.uri&&(b++,a.placeholderIndex=b)})},_processEmptyGroups:function(a){var b=
0;a.widgetOnScreen.groups&&n.forEach(a.widgetOnScreen.groups,function(a){if(!a.widgets||a.widgets&&0===a.widgets.length)b++,a.placeholderIndex=b})},_addElementId:function(a){var b=0,d;e.visitElement(a,function(a){if(a.id){a.id=a.id.replace(/\//g,"_");var e=a.id.lastIndexOf("_");-1<e&&(d=a.id.substr(e+1),b=Math.max(b,d))}});e.visitElement(a,function(a){a.id||(b++,a.id=a.uri?a.uri.replace(/\//g,"_")+"_"+b:"_"+b)})},_setPortalUrl:function(a){if(a.portalUrl){var b=t.getPortalUrlFromLocation(),e=t.isOnline(b);
t.isSamePortalUrl(a.portalUrl,b)||e||(window.appInfo.isRunInPortal=!1)}else window.isXT&&d("wab_portalurl")?a.portalUrl=d("wab_portalurl"):(window.appInfo.isRunInPortal=!0,a.portalUrl=t.getPortalUrlFromLocation())},_changePortalUrlProtocol:function(a,b){a.portalUrl=t.setProtocol(a.portalUrl,b);a.map.portalUrl&&(a.map.portalUrl=t.setProtocol(a.map.portalUrl,b));a.httpProxy&&(a.httpProxy.url=t.setProtocol(a.httpProxy.url,b),a.httpProxy&&a.httpProxy.rules&&n.forEach(a.httpProxy.rules,c.hitch(this,function(a){a.proxyUrl=
t.setProtocol(a.proxyUrl,b)})))},_processInPortalAppProtocol:function(a){var b=new h,e=q.getPortal(a.portalUrl),d=c.hitch(this,function(e){if("https:"===window.location.protocol)this._changePortalUrlProtocol(a,"https");else{if(e){window.location.href=t.setHttpsProtocol(window.location.href);b.reject();return}this._changePortalUrlProtocol(a,"http")}this._checkLocale();b.resolve(a)});e.loadSelfInfo().then(c.hitch(this,function(b){this.portalSelf=b;"private"===b.access?(b=0===a.portalUrl.toLowerCase().indexOf("https://"),
d(b)):d(b.allSSL)}),c.hitch(this,function(a){b.reject(a)}));return b},_processNotInPortalAppProtocol:function(a){var b=new h;a.portalUrl?q.getPortal(a.portalUrl).loadSelfInfo().then(c.hitch(this,function(e){this.portalSelf=e;var d="https:"===window.location.protocol;(e.allSSL||d)&&this._changePortalUrlProtocol(a,"https");0!==a.portalUrl.toLowerCase().indexOf("https://")||d||m.isInConfigOrPreviewWindow()?b.resolve(a):(window.location.href=t.setHttpsProtocol(window.location.href),b.reject())}),c.hitch(this,
function(a){b.reject(a)})):b.resolve(a);return b},_proesssWebTierAndSignin:function(a){var b=new h,e=!1,d=a.portalUrl;this._processWebTier(a).then(c.hitch(this,function(a){e=a;return q.getPortal(d).loadSelfInfo()})).then(c.hitch(this,function(a){this.portalSelf=a;return this._processSignIn(d,e)})).then(c.hitch(this,function(){b.resolve()}),function(a){b.reject(a)});return b},_processWebTier:function(a){var b=new h,e=a.portalUrl;a.isWebTier?(m.addAuthorizedCrossOriginDomains([e]),m.isWebTierPortal(e).then(c.hitch(this,
function(){var d=m.getPortalCredential(e);d&&d.ssl&&"http:"===window.location.protocol&&!m.isInConfigOrPreviewWindow()?window.location.href=t.setHttpsProtocol(window.location.href):b.resolve(a.isWebTier)}),c.hitch(this,function(a){b.reject(a)}))):b.resolve(!1);return b},_processSignIn:function(a,b){var e=new h,d=q.getPortal(a),f=t.getSharingUrl(a);window.appInfo.isRunInPortal?(b=x.checkSignInStatus(f),b.always(c.hitch(this,function(){e.resolve()}))):(m.isInBuilderWindow()||m.isInConfigOrPreviewWindow()||
!this.portalSelf.supportsOAuth||!this.rawAppConfig.appId||b||m.registerOAuthInfo(a,this.rawAppConfig.appId),b=x.checkSignInStatus(f),b.always(c.hitch(this,function(){m.xtGetCredentialFromCookie(a);d.loadSelfInfo().then(c.hitch(this,function(a){this.portalSelf=a;this._checkLocale();e.resolve()}))})));return e},_checkLocale:function(){if(!m.isInConfigOrPreviewWindow()){var a=this.portalSelf.user&&this.portalSelf.user.culture||k.locale,a=a.toLowerCase();!this.urlParams.locale&&b.isLocaleChanged(k.locale,
a)&&(d("wab_app_locale",a),window.location.reload())}},_getAppConfigFromTemplateAppId:function(a,b){var e=q.getPortal(a);return this._getWabAppIdAndDataFromTemplateAppId(a,b).then(c.hitch(this,function(b){var d=b.appId,m=b.appData;return g([this._getAppConfigFromAppId(a,d),e.getItemData(m.source)]).then(c.hitch(this,function(a){var b;m.appConfig?(b=m.appConfig,delete m.appConfig):b=a[0];b=this._upgradeAppConfig(b);a=a[1];b._appData=m;b._wabAppId=d;b.templateConfig=a;b.isTemplateApp=!0;return b}))}))},
_getAppDataAddTemplateDataFromTemplateAppId:function(a,b){var e=q.getPortal(a);return e.getItemData(b).then(function(a){return e.getItemData(a.source).then(function(b){return{appData:a,templateData:b}})})},_getWabAppIdAndDataFromTemplateAppId:function(a,b){var e=new h,d=q.getPortal(a);d.getItemData(b).then(c.hitch(this,function(a){d.getItemById(a.source).then(c.hitch(this,function(b){b=w.urlToObject(b.url);e.resolve({appId:b.query.id,appData:a})}))}),function(a){e.reject(a)});return e},_getAppConfigFromAppId:function(a,
b){return q.getPortal(a).getItemData(b)},_removeHash:function(a){for(var b in a)a[b]&&(a[b]=a[b].replace("#",""))},loadWidgetsManifest:function(a){function d(e,d,g){function r(b){return e.loadWidgetManifest(b).then(function(a){return a},function(e){console.log("Widget failed to load, it is removed.",b.name);e.stack?console.error(e.stack):console.log(e);f(a,b)})}return d.itemId?q.getPortal(g).getItemById(d.itemId).then(function(e){var g;g=b.isEsriDomain(e.url)?!0:m.getPortalCredential(a.portalUrl)?
!0:!1;if(g)return d.uri=b.widgetJson.getUriFromItem(e),r(d);console.log("Widget is not useable, it is removed.",d.name);f(a,d)}):r(d)}function f(a,b){function e(e){a[e]&&a[e].widgets&&(a[e].widgets=a[e].widgets.filter(function(a){if(b)return a.id!==b.id;a.uri&&!a.manifest&&console.error("Widget is removed because it is not loaded successfully.",a.uri);return a.manifest}));a[e]&&a[e].groups&&a[e].groups.forEach(function(a){a.widgets&&(a.widgets=a.widgets.filter(function(a){if(b)return a.id!==b.id;
a.uri&&!a.manifest&&console.error("Widget is removed because it is not loaded successfully.",a.uri);return a.manifest}))})}e("widgetOnScreen");e("widgetPool")}var r=[],t=new h;a._buildInfo&&a._buildInfo.widgetManifestsMerged?this._loadMergedWidgetManifests().then(c.hitch(this,function(m){e.visitElement(a,c.hitch(this,function(e){e.widgets||!e.uri&&!e.itemId||(e.uri&&m[e.uri]?(this._addNeedValuesForManifest(m[e.uri],e.uri),b.widgetJson.addManifest2WidgetJson(e,m[e.uri])):r.push(d(this.widgetManager,
e,a.portalUrl)))}));g(r).then(function(){t.resolve(a)})})):(e.visitElement(a,c.hitch(this,function(b){b.widgets||!b.uri&&!b.itemId||r.push(d(this.widgetManager,b,a.portalUrl))})),g(r).then(function(){t.resolve(a)}));setTimeout(function(){t.isResolved()||(f(a),t.resolve(a))},6E4);return t},_addNeedValuesForManifest:function(a,e){c.mixin(a,b.getUriInfo(e));b.addManifestProperies(a);b.processManifestLabel(a,k.locale)},_loadMergedWidgetManifests:function(){return f(window.appInfo.appPath+"widgets/widgets-manifest.json",
{handleAs:"json"})},_getRepeatedId:function(a){var b=[],d;e.visitElement(a,function(a){if(0<b.indexOf(a.id))return d=a.id,!0;b.push(a.id)});return d},_processUrlParams:function(a){var e=this.urlParams.itemid||this.urlParams.webmap;e&&a.map.itemId!==e&&(a.map.mapOptions&&b.deleteMapOptions(a.map.mapOptions),a.map.itemId=e);this.urlParams.mode&&(a.mode=this.urlParams.mode);a.map.mapOptions||(a.map.mapOptions={});this.urlParams.scale&&(a.map.mapOptions.scale=this.urlParams.scale);if(this.urlParams.level||
this.urlParams.zoom)a.map.mapOptions.zoom=this.urlParams.level||this.urlParams.zoom}});y.getInstance=function(a,b){null===v?v=new y(a,b):(v.urlParams=a,v.options=b);return v};return y})},"jimu/portalUtils":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/config dojo/Deferred dojo/topic dojo/json esri/request ./utils ./portalUrlUtils ./tokenUtils".split(" "),function(p,c,n,l,k,d,h,g,f,b,a){var e=p([],{declaredClass:"jimu.Portal",selfUrl:null,user:null,selfInfo:null,
portalUrl:null,credential:null,constructor:function(a){this.portalUrl=b.getStandardPortalUrl(a);this.selfUrl=b.getPortalSelfInfoUrl(a)},loadSelfInfo:function(){var a=new k,b={query:{f:"json"},responseType:"json",callbackParamName:"callback",cacheBust:!0};this.isValidCredential()&&(b.query.token=this.credential.token);g(this.selfUrl,b).then(c.hitch(this,function(b){b=b.data;var e=b.user;delete b.user;c.mixin(this,b);b.user=e;a.resolve(b)}),c.hitch(this,function(b){console.error(b);a.reject(b)}));return a},
_checkCredential:function(){var b=a.isValidCredential(this.credential);b||this.clearCredentialAndUser();return b},isValidCredential:function(){this.updateCredential();return this._checkCredential()},updateCredential:function(){this._checkCredential()||(this.credential=a.getPortalCredential(this.portalUrl))},signIn:function(){var b=new k;this.updateCredential();this.isValidCredential()?setTimeout(c.hitch(this,function(){b.resolve(this.credential)}),0):b=a.signInPortal(this.portalUrl);return b},haveSignIn:function(){return a.userHaveSignInPortal(this.portalUrl)},
clearCredentialAndUser:function(){this.user=this.credential=null},getUser:function(){this.updateCredential();var b=new k;this.user&&"jimu.PortalUser"===this.user.declaredClass?setTimeout(c.hitch(this,function(){this.user.updateCredential();b.resolve(this.user)}),0):this.isValidCredential()?this.credential.userId?this._getUser(this.credential.userId).then(c.hitch(this,function(a){this.user=a;b.resolve(this.user)}),c.hitch(this,function(a){console.error(a);b.reject(a)})):a.getUserIdByToken(this.credential.token,
this.portalUrl).then(c.hitch(this,function(a){this.credential.userId=a;this._getUser(this.credential.userId).then(c.hitch(this,function(a){this.user=a;b.resolve(this.user)}),c.hitch(this,function(a){console.error(a);b.reject(a)}))}),c.hitch(this,function(a){console.error(a);b.reject(a)})):setTimeout(c.hitch(this,function(){b.reject("credential is null.")}),0);return b},queryItems:function(a){this.updateCredential();var e=new k,d=b.getBaseSearchUrl(this.portalUrl),m={f:"json"};a&&(m=c.mixin(m,a));
this.isValidCredential()&&(m.token=this.credential.token);m.sortField||m.sortOrder||(m.sortField="title",m.sortOrder="asc");g(d,{responseType:"json",query:m,callbackParamName:"callback"}).then(c.hitch(this,function(a){a=a.data;a.results=n.map(a.results,c.hitch(this,function(a){a.portalUrl=this.portalUrl;a.credential=this.credential;a.portal=this;return new u(a)}));e.resolve(a)}),c.hitch(this,function(a){console.error(a);e.reject(a)}));return e},getItemData:function(a){this.updateCredential();a=b.getItemDataUrl(this.portalUrl,
a);var e={responseType:"json",query:{f:"json"},callbackParamName:"callback"};this.isValidCredential()&&(e.query.token=this.credential.token);var d=new k;g(a,e).then(c.hitch(this,function(a){d.resolve(a.data)}),c.hitch(this,function(a){d.reject(a)}));return d},getItemById:function(a){var e=new k;this.updateCredential();a=b.getItemUrl(this.portalUrl,a);var d={responseType:"json",query:{f:"json"},callbackParamName:"callback"};this.isValidCredential()&&(d.query.token=this.credential.token);g(a,d).then(c.hitch(this,
function(a){a=a.data;a.portalUrl=this.portalUrl;a.credential=this.credential;a.portal=this;a=new u(a);e.resolve(a)}),c.hitch(this,function(a){console.error(a);e.reject(a)}));return e},getAppById:function(a){var e=new k;this.updateCredential();this.isValidCredential()?(a=b.getAppIdUrl(this.portalUrl,a),g(a,{responseType:"json",query:{f:"json",token:this.credential.token}}).then(c.hitch(this,function(a){e.resolve(a.data)}),c.hitch(this,function(a){e.reject(a)}))):setTimeout(c.hitch(this,function(){e.reject("token is null.")}),
0);return e},queryGroups:function(a){this.updateCredential();var e=new k,d=b.getBaseGroupUrl(this.portalUrl),m={f:"json"};a&&(m=c.mixin(m,a));this.isValidCredential()&&(m.token=this.credential.token);g(d,{responseType:"json",query:m,callbackParamName:"callback"}).then(c.hitch(this,function(a){a=a.data;a.results=n.map(a.results,c.hitch(this,function(a){a.portalUrl=this.portalUrl;a.credential=this.credential;a.portal=this;return new q(a)}));e.resolve(a)}),c.hitch(this,function(a){console.error(a);e.reject(a)}));
return e},registerApp:function(a,e,d){var m=new k;this.updateCredential();if(this.isValidCredential()){var f=this.credential&&this.credential.token,r=b.getOAuth2Url(this.portalUrl);g(r+"/registerApp",{query:{itemId:a,appType:e,redirect_uris:h.stringify(d),token:f,f:"json"},responseType:"json",method:"post"}).then(c.hitch(this,function(a){m.resolve(a.data)}),c.hitch(this,function(a){m.reject(a)}))}else setTimeout(c.hitch(this,function(){m.reject("token is null.")}),0);return m},createAndRegisterApp:function(a){var b=
new k;this.updateCredential();this.isValidCredential()?this.getUser().then(c.hitch(this,function(e){e.addItem({title:"Web AppBuilder for ArcGIS",type:"Web Mapping Application",text:"",snippet:"",tags:"Registered App for OAuth"},"").then(c.hitch(this,function(e){e.success?this.registerApp(e.id,"browser",a).then(c.hitch(this,function(a){b.resolve(a)}),c.hitch(this,function(a){console.error(a);b.reject(a)})):b.reject("create app failed")}),c.hitch(this,function(a){console.error(a);b.reject(a)}))}),c.hitch(this,
function(a){console.error(a);b.reject(a)})):setTimeout(c.hitch(this,function(){b.reject("token is null.")}),0);return b},_getUser:function(a){this.updateCredential();var e=new k;a=b.getUserUrl(this.portalUrl,a);var d={query:{f:"json"},responseType:"json",callbackParamName:"callback"};this.isValidCredential()&&(d.query.token=this.credential&&this.credential.token);g(a,d).then(c.hitch(this,function(a){a=a.data;a.portalUrl=this.portalUrl;a.credential=this.credential;a.portal=this;this.user=new m(a);
e.resolve(this.user)}),c.hitch(this,function(a){console.error(a);e.reject(a)}));return e},getItemResources:function(a,e,d){d||(d=100);a=b.getStandardPortalUrl(a);a=b.getItemResourceUrl(a,e);return g({url:a,content:{f:"json",num:d}}).then(function(a){if(a&&a.resources)return a.resources})},addResource:function(a,e,d,m,f){a=b.getStandardPortalUrl(a);var c=this.getPortal(a),h=new FormData;h.append("file",d,m);h.append("fileName",m);h.append("f","json");var r="";f?(h.append("resourcesPrefix",f),r=f+"/"+
m):r=m;return c.getItemById(e,!0).then(function(d){d=b.getUserContentItemUrl(a,d.owner,e);return g({url:d+"/addResources",form:h}).then(function(e){var d="";e&&e.success&&(d=b.getItemResourceUrl(a,"${itemId}",r));return d},function(a){console.error(a.message||a);return a})})},removeResources:function(a,e,d,m){var f={resource:m?m+"/"+d:d,f:"json"};a=b.getStandardPortalUrl(a);return this.getPortal(a).getItemById(e,!0).then(function(d){d=b.getUserContentItemUrl(a,d.owner,e);return g({url:d+"/removeResources",
content:f},{usePost:!0}).then(function(a){return a},function(a){console.error(a.message||a);return a})})}}),m=p([],{declaredClass:"jimu.PortalUser",portalUrl:null,credential:null,portal:null,constructor:function(a){a&&c.mixin(this,a)},_checkCredential:function(){var b=a.isValidCredential(this.credential);b||(this.credential=null);return b},isValidCredential:function(){this.updateCredential();return this._checkCredential()},updateCredential:function(){this._checkCredential()||(this.portal.updateCredential(),
this.credential=this.portal.credential)},getGroups:function(){var a=[];this.groups&&(a=n.map(this.groups,c.hitch(this,function(a){a.portalUrl=this.portalUrl;a.credential=this.credential;a.portal=this.portal;return new q(a)})));return a},getItemsByKeywords:function(a,b){return this.portal.queryItems({start:b||1,num:100,q:"owner:"+this.username+' AND typekeywords:"'+a+'"'})},getContent:function(){this.updateCredential();var a=b.getUserContentUrl(this.portalUrl,this.username),e={responseType:"json",
query:{f:"json"},callbackParamName:"callback"};this.isValidCredential&&(e.query.token=this.credential.token);var d=new k;g(a,e).then(c.hitch(this,function(a){d.resolve(a.data)}),c.hitch(this,function(a){d.reject(a)}));return d},getTags:function(){this.updateCredential();var a=b.getUserTagsUrl(this.portalUrl,this.username),e={responseType:"json",query:{f:"json"},callbackParamName:"callback"};this.isValidCredential()&&(e.query.token=this.credential.token);var d=new k;g(a,e).then(c.hitch(this,function(a){d.resolve(a.data)}),
c.hitch(this,function(a){d.reject(a)}));return d},addItem:function(a,e){this.updateCredential();var d=new k;if(this.isValidCredential()){var m={f:"json",token:this.credential.token};a&&(m=c.mixin(m,a));a=b.getAddItemUrl(this.portalUrl,this.username,e);g(a,{responseType:"json",callbackParamName:"callback",query:m,method:"post"}).then(c.hitch(this,function(a){d.resolve(a.data)}),c.hitch(this,function(a){console.error(a);d.reject(a)}))}else setTimeout(c.hitch(this,function(){d.reject("token is null.")}),
0);return d},deleteItem:function(a){this.updateCredential();var e=new k;this.isValidCredential()?(a=b.getDeleteItemUrl(this.portalUrl,this.username,a),g(a,{query:{token:this.credential.token,f:"json"},responseType:"json",method:"post"}).then(c.hitch(this,function(a){e.resolve(a.data)}),c.hitch(this,function(a){e.reject(a)}))):setTimeout(c.hitch(this,function(){e.reject("token is null.")}),0);return e},getItemById:function(a,e){this.updateCredential();var d=new k;e=b.getUserItemsUrl(this.portalUrl,
this.username,e);var m={responseType:"json",query:{f:"json"},callbackParamName:"callback"};this.isValidCredential()&&(m.query.token=this.credential.token);g(e+"/"+a,m).then(c.hitch(this,function(a){a=a.data;a.portalUrl=this.portalUrl;a.credential=this.credential;a.portal=this;a=new u(a);d.resolve(a)}),c.hitch(this,function(a){console.error(a);d.reject(a)}));return d},shareItem:function(a,e,d){this.updateCredential();var m=new k;this.isValidCredential()?(e=b.shareItemUrl(this.portalUrl,this.username,
e,d),d={responseType:"json",callbackParamName:"callback",query:{f:"json",token:this.credential.token},method:"post"},a&&(a.content&&!a.query&&(a.query=a.content),d.query=c.mixin(d.query,a)),g(e,d).then(c.hitch(this,function(a){m.resolve(a.data)}),c.hitch(this,function(a){console.error(a);m.reject(a)}))):setTimeout(c.hitch(this,function(){m.reject("token is null.")}),0);return m},updateItem:function(a,e){this.updateCredential();var d=new k;this.isValidCredential()?this.portal.getItemById(a).then(c.hitch(this,
function(m){var f={f:"json",token:this.credential.token};e&&(f=c.mixin(f,e));m=b.getUpdateItemUrl(this.portalUrl,this.username,a,m.ownerFolder);g(m,{responseType:"json",callbackParamName:"callback",timeout:1E5,query:f,method:"post"}).then(c.hitch(this,function(a){d.resolve(a.data)}),c.hitch(this,function(a){console.error(a);d.reject(a)}))}),c.hitch(this,function(a){console.error(a);d.reject(a)})):setTimeout(c.hitch(this,function(){d.reject("token is null.")}),0);return d},isAdminRole:function(){return"org_admin"===
this.role||"account_admin"===this.role},isPublisherRole:function(){return"org_publisher"===this.role||"account_publisher"===this.role},isUserRole:function(){return"org_user"===this.role||"account_user"===this.role}}),q=p([],{declaredClass:"jimu.PortalGroup",portalUrl:null,credential:null,portal:null,constructor:function(a){a&&c.mixin(this,a)},_checkCredential:function(){var b=a.isValidCredential(this.credential);b||(this.credential=null);return b},isValidCredential:function(){this.updateCredential();
return this._checkCredential()},updateCredential:function(){this._checkCredential()||(this.portal.updateCredential(),this.credential=this.portal.credential)},queryItems:function(a){a.q="group:"+this.id+" AND "+a.q;return this.portal.queryItems(a)}}),u=p([],{declaredClass:"jimu.PortalItem",itemUrl:null,detailsPageUrl:null,ownerPageUrl:null,portalUrl:null,credential:null,portal:null,token:null,constructor:function(a){a&&c.mixin(this,a);this.itemUrl=b.getItemUrl(this.portalUrl,this.id);!this.thumbnailUrl&&
this.thumbnail&&this.itemUrl&&(this.thumbnailUrl=this.itemUrl+"/info/"+this.thumbnail);this.token=this.credential&&this.credential.token;this.thumbnailUrl&&this.token&&(this.thumbnailUrl+="?token\x3d"+this.token);this.portalUrl&&this.id&&(this.detailsPageUrl=b.getItemDetailsPageUrl(this.portalUrl,this.id));this.portalUrl&&this.owner&&(this.ownerPageUrl=b.getUserProfilePageUrl(this.portalUrl,this.owner))},_checkCredential:function(){var b=a.isValidCredential(this.credential);b||(this.credential=null);
return b},isValidCredential:function(){this.updateCredential();return this._checkCredential()},updateCredential:function(){this._checkCredential()||(this.portal.updateCredential(),this.credential=this.portal.credential)},getItemData:function(){return this.portal.getItemData(this.id)}}),t={portals:[],webMapQueryStr:" "+f.getItemQueryStringByTypes(["Web Map"])+" ",webSceneQueryStr:" "+f.getItemQueryStringByTypes(["Web Scene"])+" ",_findPortal:function(a){for(var e=0;e<this.portals.length;e++){var d=
this.portals[e];if(b.isSamePortalUrl(a,d.portalUrl))return d.updateCredential(),d}return null},getPortal:function(d){if(!d||"string"!==typeof d||!c.trim(d))return null;d=b.getStandardPortalUrl(d);var m=this._findPortal(d);m||(m=new e(d),m.credential=a.getPortalCredential(m.portalUrl),m.updateCredential(),this.portals.push(m));return m},getPortalSelfInfo:function(a){return this.getPortal(a).loadSelfInfo()},getBasemapGalleryGroup:function(a){return this._getPortalSelfGroup(a,"basemapGalleryGroupQuery")},
getTemplatesGroup:function(a){return this._getPortalSelfGroup(a,"templatesGroupQuery")},getUnits:function(a){var b="english",e="",d=new k;this.getPortal(a).getUser().then(c.hitch(this,function(a){a&&a.units?b=a.units:(e=l.locale,b=e.startWith("en")?"english":"metric");d.resolve(b)}),c.hitch(this,function(m){console.warn(m);this.getPortalSelfInfo(a).then(c.hitch(this,function(a){var b=null;a&&a.units?b=a.units:(e=a&&a.culture||l.locale,b=e.startWith("en")?"english":"metric");d.resolve(b)}),c.hitch(this,
function(a){console.warn(a);e=l.locale;b=e.startWith("en")?"english":"metric";d.resolve(b)}))}));return d.promise},_getPortalSelfGroup:function(a,b){var e=new k,d=this.getPortal(a);d||setTimeout(c.hitch(this,function(){e.reject()}),0);this.getPortalSelfInfo(a).then(c.hitch(this,function(a){d.queryGroups({f:"json",q:a[b]}).then(c.hitch(this,function(a){0<a.results.length?(a=a.results[0],a.portalUrl=d.portalUrl,a.credential=d.credential,a.portal=d,a=new q(a),e.resolve(a)):e.reject("Can't find portal self group.")}),
c.hitch(this,function(a){console.error(a);e.reject(a)}))}),c.hitch(this,function(a){console.error(a);e.reject(a)}));return e},getWebMapsFromBasemapGalleryGroup:function(a){var b=new k;this.getBasemapGalleryGroup(a).then(c.hitch(this,function(a){a?a.queryItems({start:1,num:100,f:"json",q:this.webMapQueryStr}).then(c.hitch(this,function(a){b.resolve(a)}),c.hitch(this,function(a){console.error(a);b.reject(a)})):b.reject()}),c.hitch(this,function(a){console.error(a);b.reject(a)}));return b},getDefaultWebScene:function(a){var b=
new k,e=this.getPortal(a);e.getUser().then(c.hitch(this,function(a){e.queryItems({start:1,num:1,f:"json",q:this.webSceneQueryStr+' AND owner:"'+a.username+'" ',sortField:"numViews",sortOrder:"desc"}).then(c.hitch(this,function(a){a=a.results;a=n.filter(a,c.hitch(this,function(a){return a.type&&"web scene"===a.type.toLowerCase()}));0<a.length?b.resolve(a[0].id):b.resolve(null)}),c.hitch(this,function(a){b.reject(a)}))}),c.hitch(this,function(){b.reject("not sign in")}));return b},getDefaultWebMap:function(a){var b=
new k;this.getPortalSelfInfo(a).then(c.hitch(this,function(e){var d=e.defaultBasemap&&e.defaultBasemap.id;d?b.resolve(d):this._getDefaultWebMapByBasemapGallery(a,e).then(c.hitch(this,function(e){e?b.resolve(e):this._getMostNumViewsWebMap(a).then(c.hitch(this,function(a){a?b.resolve(a):b.reject()}),c.hitch(this,function(a){console.error(a);b.reject(a)}))}),c.hitch(this,function(a){console.error(a);b.reject(a)}))}),c.hitch(this,function(a){console.error(a);b.reject(a)}));return b},_getDefaultWebMapByBasemapGallery:function(a,
b){var e=new k,d=this.getPortal(a),m=b.defaultBasemap&&b.defaultBasemap.title;d.queryGroups({f:"json",q:b.basemapGalleryGroupQuery}).then(c.hitch(this,function(a){a=a.results;0<a.length?d.queryItems({start:1,num:1,f:"json",q:this.webMapQueryStr+" AND group:"+a[0].id+" AND title:"+m}).then(c.hitch(this,function(a){a=a.results;a=n.filter(a,c.hitch(this,function(a){return a.type&&"web map"===a.type.toLowerCase()}));0<a.length?e.resolve(a[0].id):(console.log("Can't find web map under basemapGalleryGroupQuery."),
d.queryItems({start:1,num:1,f:"json",q:this.webMapQueryStr+" AND title:"+m}).then(c.hitch(this,function(a){a=a.results;a=n.filter(a,c.hitch(this,function(a){return a.type&&"web map"===a.type.toLowerCase()}));if(0<a.length){var b=a[0];d.getItemData(b.id).then(c.hitch(this,function(a){a&&(a.operationalLayers||a.baseMap||a.version)?e.resolve(b.id):e.resolve(null)}),c.hitch(this,function(){e.resolve(null)}))}else console.log("Can't find web map by defaultBasemap.title."),e.resolve(null)}),c.hitch(this,
function(a){console.error(a);e.reject(a)})))}),c.hitch(this,function(a){console.error(a);e.reject(a)})):(console.log("Can't find group by basemapGalleryGroupQuery."),e.resolve(null))}),c.hitch(this,function(a){console.error(a);e.reject(a)}));return e},_getMostNumViewsWebMap:function(a){var b=new k;this.getPortal(a).queryItems({start:1,num:1,f:"json",q:this.webMapQueryStr+" AND access:public AND owner:esri_en",sortField:"numViews",sortOrder:"desc"}).then(c.hitch(this,function(a){a=a.results;a=n.filter(a,
c.hitch(this,function(a){return a.type&&"web map"===a.type.toLowerCase()}));0<a.length?b.resolve(a[0].id):b.reject("Can't find most-num-views web map.")}),c.hitch(this,function(a){console.error(a);b.reject(a)}));return b}};d.subscribe("userSignOut",function(a){(a=t._findPortal(a))&&a.clearCredentialAndUser()});return t})},"jimu/appConfigResourceUtils":function(){define(["dojo/Deferred","dojo/promise/all","jimu/portalUtils","jimu/utils"],function(p,c,n,l){return{AddResourcesToItemForAppSave:function(k,
d,h,g){d=d||[];if(0===d.length){var f=new p;f.resolve(d);return f}d=d.map(function(b){var a=b.resUrl.split("resources/")[1],e=new p;b.b64?(b=l.b64toBlob(b.b64),e.resolve({blob:b,fileName:a.split("/")[1],prefixName:a.split("/")[0]})):(b=b.resUrl,0<b.indexOf("${itemId}")&&(b=b.replace("${itemId}",h)),l.resourcesUrlToBlob(b).then(function(b){e.resolve({blob:b,fileName:a.split("/")[1],prefixName:a.split("/")[0]},function(a){console.error(a.message||a);e.reject(a)})}));return e});return c(d).then(function(b){if(b instanceof
Array&&0<b.length)return b=b.map(function(a){var b=h;g&&(b=g);return n.addResource(k,b,a.blob,a.fileName,a.prefixName)}.bind(this)),c(b).then(function(a){return a})}.bind(this))}}})},"jimu/AppStateManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/json esri/geometry/Extent esri/geometry/SpatialReference libs/storejs/store libs/md5/md5 jimu/tokenUtils".split(" "),function(p,c,n,l,k,d,h,g,f){var b=null,a=p(null,{rawAppConfig:null,mapMd5:null,appStateKey:null,setRawAppConfig:function(a){this.rawAppConfig=
a},_getAppStateMd5:function(){if("string"!==typeof this.mapMd5){var a=l.stringify(this.rawAppConfig.map);this.mapMd5=g(a)}return this.mapMd5},_getAppStateKey:function(){return this.appStateKey?this.appStateKey:this.appStateKey="wab_appstate_"+this.urlParams.id||this.urlParams.appid||window.path},getWabAppState:function(){var a=new n,b={};if(f.isInConfigOrPreviewWindow()||!this.rawAppConfig||!this.rawAppConfig.map)return a.resolve(b),a;var g=this._getAppStateKey(),c=h.get(g);c&&c.appStateMd5===this._getAppStateMd5()?
(g=c.map&&c.map.extent,c=c.map&&c.map.layers,g&&(b.extent=new k(g.xmin,g.ymin,g.xmax,g.ymax,new d(g.spatialReference))),c&&(b.layers=c)):h.remove(g);a.resolve(b);return a},saveWabAppState:function(a,b){if(a&&!f.isInConfigOrPreviewWindow()){var e=this._getAppStateKey(),d={extent:{xmin:a.extent.xmin,xmax:a.extent.xmax,ymin:a.extent.ymin,ymax:a.extent.ymax,spatialReference:{wkid:a.extent.spatialReference.wkid,wkt:a.extent.spatialReference.wkt}},layers:{}};b&&b.traversalLayerInfosOfWebmap&&b.traversalLayerInfosOfWebmap(c.hitch(this,
function(a){d.layers[a.id]={visible:a.isShowInMap()}}));h.set(e,{map:d,appStateMd5:this._getAppStateMd5()})}}});a.getInstance=function(e){null===b&&(b=new a);b.urlParams=e;return b};return a})},"jimu/LayoutManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dijit/_WidgetBase dojo/topic dojo/on dojo/query dojo/Deferred dojo/promise/all dojo/debounce require ./MapManager ./utils".split(" "),function(p,c,n,l,k,d,h,g,f,b,a,e,m){var q=null,u;u=p([l],{constructor:function(a,e){this.own(k.subscribe("appConfigLoaded",
c.hitch(this,this._onAppConfigLoaded)));this.own(k.subscribe("appConfigChanged",c.hitch(this,this._onAppConfigChanged)));this.own(k.subscribe("sceneViewLoaded",c.hitch(this,this._onSceneViewLoaded)));this.own(k.subscribe("sceneViewChanged",c.hitch(this,this._onSceneViewChanged)));this.own(k.subscribe("beforeSceneViewDestory",c.hitch(this,this._onBeforeSceneViewDestroy)));this.own(k.subscribe("builder/actionTriggered",c.hitch(this,this._onActionTriggered)));this.own(k.subscribe("openWidget",c.hitch(this,
this._onOpenWidgetRequest)));this.own(d(window,"resize",b(c.hitch(this,this.resize),200)));this.id=e},postCreate:function(){this.containerNode=this.domNode},sceneView:null,mapId:"map",mapDiv:null,layoutManager:null,animTime:500,resize:function(){this.layoutManager&&this.layoutManager.resize()},_onAppConfigLoaded:function(a){this.appConfig=c.clone(a);this._loadLayoutManager(this.appConfig).then(c.hitch(this,function(a){this.layoutManager=a;this.layoutManager.onEnter(this.appConfig,this.mapId).then(c.hitch(this,
function(){this.mapDiv=this.layoutManager.getMapDiv();this._loadMap(this.mapId);this.appConfig.theme&&this._loadTheme(this.appConfig.theme)}))}))},_loadLayoutManager:function(b){b=b.layoutDefinition?b.layoutDefinition.manager:"jimu/layoutManagers/AbsolutePositionLayoutManager";var e=new g;a([b],c.hitch(this,function(a){a=a.getInstance();this.sceneView&&a.setSceneView(this.sceneView);e.resolve(a)}));return e},_loadMap:function(){this.mapManager=e.getInstance({appConfig:this.appConfig,urlParams:this.urlParams},
this.mapId);this.mapManager.showMap()},_onSceneViewLoaded:function(a){this.sceneView=a;this.layoutManager.setSceneView(a);this.layoutManager.loadAndLayout(this.appConfig)},_loadTheme:function(b){var e=new g;a(["themes/"+b.name+"/main"],c.hitch(this,function(){f([this._loadThemeCommonStyle(b),this._loadThemeCurrentStyle(b)]).then(c.hitch(this,function(){this._addCustomStyle(b);this.layoutManager.onThemeLoad();e.resolve()}))}));return e},_loadThemeCommonStyle:function(a){n.addClass(this.domNode,a.name);
return m.loadStyleLink(this._getThemeCommonStyleId(a),"themes/"+a.name+"/common.css")},_loadThemeCurrentStyle:function(a){n.addClass(this.domNode,a.styles[0]);return m.loadStyleLink(this._getThemeCurrentStyleId(a),"themes/"+a.name+"/styles/"+a.styles[0]+"/style.css")},_addCustomStyle:function(a){var b=c.getObject("customStyles",!1,a);if(b){var e=".jimu-main-background{background-color: ${mainBackgroundColor} !important;}";(a=this._getFixedThemeStyles(a))&&(e+=a);e=c.replace(e,b,/\$\{([^\}]+)\}/g);
b=n.create("style",{type:"text/css"});try{b.appendChild(document.createTextNode(e))}catch(w){b.styleSheet.cssText=e}b.setAttribute("source","custom");document.head.appendChild(b)}},_getFixedThemeStyles:function(a){var b=".esriPopup .titlePane {background-color: ${mainBackgroundColor} !important;}";"PlateauTheme"===a.name?b+=".jimu-widget-header-controller .jimu-title, .jimu-widget-header-controller .jimu-subtitle{color: ${mainBackgroundColor} !important;}.jimu-widget-header-controller .links .jimu-link{color: ${mainBackgroundColor} !important;}.jimu-widget-homebutton .HomeButton .home, .jimu-widget-mylocation, .jimu-widget-mylocation .place-holder, .jimu-widget-zoomslider.vertical .zoom-in, .jimu-widget-zoomslider.vertical .zoom-out, .jimu-widget-extent-navigate.vertical .operation{background-color: ${mainBackgroundColor} !important;}.jimu-preload-widget-icon-panel \x3e .jimu-panel-title, .jimu-foldable-panel \x3e .jimu-panel-title, .jimu-title-panel \x3e .title{color: ${mainBackgroundColor} !important;}.jimu-panel{border-color: ${mainBackgroundColor} !important;}.jimu-widget-header-controller{border-bottom-color: ${mainBackgroundColor} !important;}.jimu-tab\x3e.control\x3e.tab{color: ${mainBackgroundColor} !important; border-color: ${mainBackgroundColor} !important}":
"BillboardTheme"===a.name?b+=".jimu-widget-homebutton .HomeButton .home, .jimu-widget-mylocation, .jimu-widget-mylocation .place-holder, .jimu-widget-zoomslider.vertical .zoom-in, .jimu-widget-zoomslider.vertical .zoom-out, .jimu-widget-extent-navigate .operation, .jimu-widget-navigate, .jimu-widget-home, .jimu-widget-zoom .esri-zoom .esri-widget, .jimu-widget-placeholder{background-color: ${mainBackgroundColor} !important;}.jimu-widget-onscreen-icon{background-color: ${mainBackgroundColor} !important;}":
"BoxTheme"===a.name?b+=".jimu-widget-homebutton .HomeButton .home, .jimu-widget-mylocation, .jimu-widget-mylocation .place-holder, .jimu-widget-zoomslider.vertical .zoom-in, .jimu-widget-zoomslider.vertical .zoom-out, .jimu-widget-extent-navigate, .jimu-widget-navigate, .jimu-widget-home, .jimu-widget-zoom .esri-zoom .esri-widget, .jimu-widget-placeholder{background-color: ${mainBackgroundColor} !important;}":"TabTheme"===a.name?b+=".tab-widget-frame .title-label{color: ${mainBackgroundColor} !important;}":
"DashboardTheme"===a.name?b+=".jimu-widget-dnd-header{background-color: ${mainBackgroundColor} !important;}":"DartTheme"===a.name&&(b+=".jimu-widget-fullScreen .fullScreen{background-color: ${mainBackgroundColor} !important;}");return b},_onAppConfigChanged:function(a,b,e){a=c.clone(a);switch(b){case "themeChange":this._onThemeChange(a);break;case "styleChange":this._onStyleChange(a);break;case "layoutChange":this._onLayoutChange(a);break;case "widgetChange":this._onWidgetChange(a,e);break;case "groupChange":this._onGroupChange(a,
e);break;case "widgetPoolChange":this._onWidgetPoolChange(a,e);break;case "resetConfig":this._onResetConfig(a);break;case "loadingPageChange":this._onLoadingPageChange(a,e);break;case "layoutDefinitionChange":this._onLayoutDefinitionChange(a,e);break;case "onScreenGroupsChange":this._onOnScreenGroupsChange(a,e);break;case "onScreenOrderChange":this._onOnScreenOrderChange(a,e)}this.appConfig=a},_onSceneViewChanged:function(a){this.sceneView=a;this.layoutManager.setSceneView(a);this.layoutManager.loadAndLayout(this.appConfig)},
_onBeforeSceneViewDestroy:function(){this.layoutManager.destroyOnScreenWidgetsAndGroups()},_onActionTriggered:function(a){this.layoutManager.onActionTriggered(a)},_onWidgetChange:function(a,b){this.layoutManager.onWidgetChange(a,b)},_onGroupChange:function(a,b){this.layoutManager.onGroupChange(a,b)},_onWidgetPoolChange:function(a,b){this.layoutManager.onWidgetPoolChange(a,b)},_onLayoutDefinitionChange:function(a,b){this.layoutManager.onLayoutDefinitionChange(a,b)},_onOnScreenGroupsChange:function(a,
b){this.layoutManager.onOnScreenGroupsChange(a,b)},_onOnScreenOrderChange:function(a,b){this.layoutManager.onOnScreenOrderChange(a,b)},_onThemeChange:function(a){this.layoutManager.destroyOnScreenWidgetsAndGroups();this._removeThemeCommonStyle(this.appConfig.theme);this._removeThemeCurrentStyle(this.appConfig.theme);this._removeCustomStyle();f([this._loadLayoutManager(a),this._loadTheme(a.theme)]).then(c.hitch(this,function(b){var e=b[0];this.layoutManager.name!==e.name?(this.layoutManager.onLeave(),
e.onEnter(a,this.mapId).then(c.hitch(this,function(){this.layoutManager=e;this.layoutManager.loadAndLayout(a)}))):this.layoutManager.loadAndLayout(a)}))},_onResetConfig:function(a){var b=this.appConfig;k.publish("appConfigChanged",a,"mapChange",a);this.appConfig=b;this._loadLayoutManager(a).then(c.hitch(this,function(a){this.layoutManager=a;this._removeThemeCommonStyle(this.appConfig.theme);this._removeThemeCurrentStyle(this.appConfig.theme);this._removeCustomStyle();this._loadTheme(this.appConfig.theme)}))},
_onLoadingPageChange:function(a,b){"backgroundColor"in b?n.setStyle(jimuConfig.loadingId,"background-color",a.loadingPage.backgroundColor):"backgroundImage"in b?(a=a.loadingPage.backgroundImage,a.visible&&a.uri?(n.setStyle(jimuConfig.loadingImageId,"background-image","url('"+a.uri+"')"),n.setStyle(jimuConfig.loadingImageId,"width",a.width+"px"),n.setStyle(jimuConfig.loadingImageId,"height",a.height+"px")):(n.setStyle(jimuConfig.loadingImageId,"background-image","url('')"),n.setStyle(jimuConfig.loadingImageId,
"width","0px"),n.setStyle(jimuConfig.loadingImageId,"height","0px"))):"loadingGif"in b&&(a=a.loadingPage.loadingGif,a.visible&&a.uri?(n.setStyle(jimuConfig.loadingGifId,"background-image","url('"+a.uri+"')"),n.setStyle(jimuConfig.loadingGifId,"width",a.width+"px"),n.setStyle(jimuConfig.loadingGifId,"height",a.height+"px")):(n.setStyle(jimuConfig.loadingGifId,"background-image","url('')"),n.setStyle(jimuConfig.loadingGifId,"width","0px"),n.setStyle(jimuConfig.loadingGifId,"height","0px")))},_onStyleChange:function(a){this._removeThemeCurrentStyle(this.appConfig.theme);
this._loadThemeCurrentStyle(a.theme);this._removeCustomStyle();this._addCustomStyle(a.theme)},_onLayoutChange:function(a){this.layoutManager.onLayoutChange(a)},_removeThemeCommonStyle:function(a){n.removeClass(this.domNode,a.name);n.destroy(this._getThemeCommonStyleId(a))},_removeThemeCurrentStyle:function(a){n.removeClass(this.domNode,a.styles[0]);n.destroy(this._getThemeCurrentStyleId(a))},_removeCustomStyle:function(){h('style[source\x3d"custom"]',document.head).forEach(function(a){n.destroy(a)})},
_getThemeCommonStyleId:function(a){return"theme_"+a.name+"_style_common"},_getThemeCurrentStyleId:function(a){return"theme_"+a.name+"_style_"+a.styles[0]},_doPostLoad:function(){a(["dynamic-modules/postload"])},_onOpenWidgetRequest:function(a){this.layoutManager.openWidget(a)}});u.getInstance=function(a,b){null===q&&(q=new u(a,b),window._layoutManager=q);return q};return u})},"dojo/debounce":function(){define([],function(){return function(p,c){var n;return function(){n&&clearTimeout(n);var l=this,
k=arguments;n=setTimeout(function(){p.apply(l,k)},c)}}})},"jimu/MapManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/topic dojo/on dojo/keys esri/geometry/Extent esri/geometry/Point ./utils ./dijit/LoadingShelter ./AppStateManager ./WebSceneLoader esri/Viewpoint".split(" "),function(p,c,n,l,k,d,h,g,f,b,a,e,m,q){var u=null,t=p(null,{appConfig:null,mapDivId:"",map:null,previousInfoWindow:null,mobileInfoWindow:null,isMobileInfoWindow:!1,layerInfosObj:null,
constructor:function(a,b){this.appConfig=a.appConfig;this.urlParams=a.urlParams;this.id=this.mapDivId=b;this.appStateManager=e.getInstance(this.urlParams);k.subscribe("appConfigChanged",c.hitch(this,this.onAppConfigChanged));k.subscribe("changeMapPosition",c.hitch(this,this.onChangeMapPosition));k.subscribe("syncViewpoint",c.hitch(this,this.onSyncViewpoint));d(window,"resize",c.hitch(this,this.onWindowResize));d(window,"beforeunload",c.hitch(this,this.onBeforeUnload))},showMap:function(){this._showMap(this.appConfig)},
_showMap:function(b){console.time("Load Map");this.loading=new a;this.loading.placeAt(this.mapDivId);this.loading.startup();b.map["3D"]?b.map.itemId?this._show3DWebScene(b):console.log("No webscene found. Please set map.itemId in config.json."):b.map.itemId?this._show2DWebMap(b):console.log("No webmap found. Please set map.itemId in config.json.")},onBeforeUnload:function(){this.appStateManager.saveWabAppState(this.map,this.layerInfosObj)},onWindowResize:function(){this.map&&this.map.resize&&(this.map.resize(),
this.resetInfoWindow(!1))},getMapInfoWindow:function(){return{mobile:this._mapMobileInfoWindow,bigScreen:this._mapInfoWindow}},resetInfoWindow:function(a){a&&(this._mapInfoWindow=this.map.infoWindow,this._mapMobileInfoWindow&&this._mapMobileInfoWindow.destroy(),this.isMobileInfoWindow=!1);window.appInfo.isRunInMobile&&!this.isMobileInfoWindow?this.isMobileInfoWindow=!0:!window.appInfo.isRunInMobile&&this.isMobileInfoWindow&&(this.isMobileInfoWindow=!1)},onChangeMapPosition:function(a){var b=c.clone(this.mapPosition);
c.mixin(b,a);this.setMapPosition(b)},setMapPosition:function(a){this.mapPosition=a;a=b.getPositionStyle(a);l.setStyle(this.mapDivId,a);this.map&&this.map.resize&&this.map.resize()},getMapPosition:function(){return this.mapPosition},onSyncViewpoint:function(a){this.sceneView&&(this.sceneView.viewpoint=a.clone())},_visitConfigMapLayers:function(a,b){n.forEach(a.map.basemaps,function(a,e){a.isOperationalLayer=!1;b(a,e)},this);n.forEach(a.map.operationallayers,function(a,e){a.isOperationalLayer=!0;b(a,
e)},this)},_destroySceneView:function(){if(this.sceneView)try{this.sceneView.destroy()}catch(r){console.error(r)}this.sceneView=null;window._sceneView=null},_show3DWebScene:function(a){var b=a.map.portalUrl,e=a.map.itemId;this._destroySceneView();m.createMap(this.mapDivId,b,e).then(c.hitch(this,function(b){this._publishSceneViewEvent(b);if(a.map.mapOptions)if((b=a.map.mapOptions.initialState)&&b.viewpoint)try{var e=q.fromJSON(b.viewpoint);e&&(this.sceneView.map.initialViewProperties.viewpoint=e,this.sceneView.viewpoint=
e.clone())}catch(z){console.error(z)}else this.sceneView.map.initialViewProperties.viewpoint=this.sceneView.viewpoint}),c.hitch(this,function(){this.loading&&this.loading.destroy();k.publish("mapCreatedFailed")}))},_publishSceneViewEvent:function(a){window._sceneView=a;console.timeEnd("Load Map");this.loading&&this.loading.destroy();this.sceneView?(this.sceneView=a,console.log("sceneView changed"),k.publish("sceneViewChanged",this.sceneView)):(this.sceneView=a,console.log("sceneView loaded"),k.publish("sceneViewLoaded",
this.sceneView))},_show2DWebMap:function(a){a.map.mapOptions||(a.map.mapOptions={});var e=this._processMapOptions(a.map.mapOptions)||{};e.isZoomSlider=!1;b.createWebMap(a.map.portalUrl,a.map.itemId,this.mapDivId,{mapOptions:e,bingMapsKey:a.bingMapsKey,usePopupManager:!0}).then(c.hitch(this,function(b){var e=b.map;e.hideZoomSlider();e.infoWindow.resize(270,316);e.itemId=a.map.itemId;e.itemInfo=b.itemInfo;e.webMapResponse=b;e.enableSnapping({snapKey:h.copyKey});l.setStyle(e.root,"zIndex",0);e._initialExtent=
e.extent;n.forEach("extent center marker find query scale level".split(" "),function(a){},this);this._publishMapEvent(e)}),c.hitch(this,function(){this.loading&&this.loading.destroy();k.publish("mapCreatedFailed")}))},_processMapOptions:function(a){if(a)return a.lods||delete a.lods,a.lods&&0===a.lods.length&&delete a.lods,a=c.clone(a),a.extent&&(a.extent=new g(a.extent)),a.center&&!c.isArrayLike(a.center)&&(a.center=new f(a.center)),a},onAppConfigChanged:function(a,b,e){this.appConfig=a;"mapChange"===
b?this._recreateMap(a):"mapOptionsChange"===b&&e.initialState&&(a=e.initialState.viewpoint)&&(this.sceneView.map.initialViewProperties.viewpoint=q.fromJSON(a),this.sceneView.animateTo(q.fromJSON(a)))},_recreateMap:function(a){this.sceneView&&(k.publish("beforeSceneViewDestory",this.sceneView),this._destroySceneView());this._showMap(a)},disableWebMapPopup:function(){},enableWebMapPopup:function(){}});t.getInstance=function(a,b){null===u&&(u=new t(a,b));return u};return t})},"jimu/dijit/LoadingShelter":function(){define(["dojo/_base/declare",
"dijit/_WidgetBase","dijit/_TemplatedMixin","dojo/text!./templates/LoadingShelter.html","dojo/_base/html"],function(p,c,n,l,k){return p([c,n],{baseClass:"jimu-loading-shelter",declaredClass:"jimu.dijit.LoadingShelter",templateString:l,loadingText:null,hidden:!1,showLoading:!0,postMixInProperties:function(){this.nls=window.jimuNls.loadingShelter},postCreate:function(){this.inherited(arguments);this.hidden&&k.setStyle(this.domNode,"display","none");k.setStyle(this.domNode,{width:"100%",height:"100%"});
this.showLoading||k.setStyle(this.imgDiv,"display","none");"string"===typeof this.loadingText&&(this.textNode.innerHTML=this.loadingText)},show:function(d){this.domNode&&this.hidden&&("string"===typeof d&&(this.textNode.innerHTML=d),k.setStyle(this.domNode,"display","block"),this.hidden=!1)},hide:function(){this.domNode&&!this.hidden&&(k.setStyle(this.domNode,"display","none"),this.hidden=!0)}})})},"jimu/WebSceneLoader":function(){define("dojo/Deferred dojo/_base/lang dojo/_base/array dojo/_base/html dojo/promise/all esri/kernel esri/WebScene esri/views/SceneView esri/portal/Portal esri/portal/PortalItem esri/core/has ./utils ./portalUtils ./portalUrlUtils".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q){return{createMap:function(b,e,d){var m=new p;a("esri-webgl")?m=this._createMap(b,e,d):(m.reject("The browser doesn't support webgl."),(b=c.getObject("webSceneLoader.webglSupportTip",!1,window.jimuNls))||(b="3D web apps aren't supported in your browser."),l.create("div",{"class":"app-error",innerHTML:b},document.body));return m},_createMap:function(a,d,r){e.getEsriConfig().portalUrl=q.getStandardPortalUrl(d);var t=new p,u=[];f._default=null;var l=new h({portalItem:new b({id:r})}),
y=new g({map:l,container:a,constraints:{collision:{enabled:!1},tilt:{max:179.99}}});u.push(y.when());d=m.getPortal(d);u.push(d.getItemById(r));u.push(d.getItemData(r));k(u).then(c.hitch(this,function(b){y.popup&&(y.popup.closeOnViewChangeEnabled=!0);l.id=a;l.itemId=r;l.itemInfo={item:b[1],itemData:b[2]};this._handleLocalScene(y);t.resolve(y)}),c.hitch(this,function(a){console.error(a);t.reject(a)}));return t},_handleLocalScene:function(a){try{a.viewingMode&&"local"===a.viewingMode.toLowerCase()&&
(c.setObject("constraints.collision.enabled",!1,a),c.setObject("constraints.tilt.max",179.99,a))}catch(t){console.error(t)}},_handleAttribution:function(a){try{if("4.0"!==d.version){var b=a.ui&&a.ui._components;b&&0<b.length&&n.some(b,function(a){return(a=a&&a._widget)&&"esri.widgets.Attribution"===a.declaredClass?(a.domNode.parentNode.style.width="100%",l.create("span",{innerHTML:"Powered by Esri","class":"esri-attribution-powered-by"},a.domNode),!0):!1})}}catch(r){console.error(r)}}}})},"esri/WebScene":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/tsSupport/paramHelper ./core/tsSupport/assignHelper ./core/tsSupport/generatorHelper ./core/tsSupport/awaiterHelper ./kernel ./Map ./Viewpoint ./core/asyncUtils ./core/Collection ./core/Error ./core/Handles ./core/has ./core/JSONSupport ./core/lang ./core/Loadable ./core/loadAll ./core/Logger ./core/promiseUtils ./core/urlUtils ./core/accessorSupport/decorators ./core/accessorSupport/originUtils ./core/accessorSupport/read ./geometry/Extent ./geometry/HeightModelInfo ./geometry/SpatialReference ./geometry/support/heightModelInfoUtils ./geometry/support/jsonUtils ./portal/Portal ./portal/PortalItem ./support/webSceneUtils ./views/3d/support/projectionUtils ./views/support/spatialReferenceSupport ./webscene/ApplicationProperties ./webscene/Environment ./webscene/InitialViewProperties ./webscene/Presentation ./webscene/Version".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z,A,B,D,C,E,H,G,I,K,M,T,N,S,O,V,Q,J,P,L){var F=y.getLogger("esri.WebScene"),Y=new L.default(1,16),X={width:600,height:400};return function(b){function c(a){a=b.call(this)||this;a._handles=new u;a.applicationProperties=null;a.clippingArea=null;a.clippingEnabled=!1;a.heightModelInfo=null;a.sourceVersion=null;a.supportsHeightModelInfo=!0;a.presentation=new P;a.initialViewProperties=new J;a.portalItem=null;a.resourceInfo=null;a.authoringApp=null;a.authoringAppVersion=
null;a._isAuthoringAppSetByUser=!1;a._isAuthoringAppVersionSetByUser=!1;return a}n(c,b);c.prototype.initialize=function(){var a=this;this.when().catch(function(a){F.error("#load()","Failed to load web scene",a)});if(this.resourceInfo){var b=void 0;try{b=this._validateJSON(this.resourceInfo)}catch(ba){this.addResolvingPromise(z.reject(ba));return}this.read(b);this.addResolvingPromise(this._validateSpatialReference());this.addResolvingPromise(this._validateHeightModelInfo())}this._handles.add(this.allLayers.on("change",
function(){return a._scheduleLayersIdGC()}))};c.prototype.destroy=function(){this._unscheduleLayersIdGC();this._handles.destroy()};c.prototype.writeClippingArea=function(a,b){b.clippingArea||(b.clippingArea={});b.clippingArea.geometry=a.toJSON()};c.prototype.readClippingEnabled=function(a,b){return b.clippingArea?!!b.clippingArea.clip:!1};c.prototype.writeClippingEnabled=function(a,b){this.clippingArea&&(b.clippingArea||(b.clippingArea={}),b.clippingArea.clip=a)};c.prototype.writeLayers=function(a,
b,e,m){var f=this,g=d({},m,{layerContainerType:"operational-layers"});a=a.map(function(a){return f.verifyWriteLayer(a,m)?a.write(null,g):null}).filter(function(a){return!!a});b[e]=a.toArray()};c.prototype.verifyWriteLayer=function(a,b){return"write"in a?!0:(b&&b.messages&&b.messages.push(new q("layer:unsupported","Layers ("+a.title+", "+a.id+") of type '"+a.declaredClass+"' cannot be persisted in web scenes",{layer:a})),!1)};c.prototype.readSourceVersion=function(a,b){a=b.version.split(".");b=a[1];
return new L.default(parseInt(a[0],10),parseInt(b,10))};c.prototype.writeSourceVersion=function(a,b,e){b[e]=Y.major+"."+Y.minor};Object.defineProperty(c.prototype,"thumbnailUrl",{get:function(){return this.portalItem&&this.portalItem.thumbnailUrl||null},set:function(a){a?this._override("thumbnailUrl",a):this._clearOverride("thumbnailUrl")},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"authoringApp",{set:function(a){this._isAuthoringAppSetByUser=!0;this._set("authoringApp",a)},
enumerable:!0,configurable:!0});c.prototype.writeAuthoringApp=function(a,b){b.authoringApp=a&&this._isAuthoringAppSetByUser?a:"ArcGIS API for JavaScript"};Object.defineProperty(c.prototype,"authoringAppVersion",{set:function(a){this._isAuthoringAppVersionSetByUser=!0;this._set("authoringAppVersion",a)},enumerable:!0,configurable:!0});c.prototype.writeAuthoringAppVersion=function(a,b){b.authoringAppVersion=a&&this._isAuthoringAppVersionSetByUser?a:f.version};c.prototype.writeGround=function(a,b,e,
d){b[e]=a?a.write(null,d):{transparency:0,layers:[]}};c.prototype.readInitialViewProperties=function(b,e){b={};e.initialState&&e.initialState.environment&&(b.environment=Q.fromJSON(e.initialState.environment));b.spatialReference=e.spatialReference?G.fromJSON(e.spatialReference):G.WebMercator;b.viewingMode=e.viewingMode||"global";e.initialState&&e.initialState.viewpoint&&(b.viewpoint=a.fromJSON(e.initialState.viewpoint));return new J(b)};c.prototype.writeInitialViewProperties=function(a,b,e,d){a&&
(e={},a.environment&&(e.environment=a.environment.write({},d)),a.viewpoint&&(e.viewpoint=a.viewpoint.write({},d)),0!==Object.keys(e).length&&(b.initialState=e),b.spatialReference=a.spatialReference?a.spatialReference.write({},d):G.WebMercator.toJSON(),b.viewingMode=null!=a.viewingMode?a.viewingMode:"global")};c.prototype.load=function(a){this.addResolvingPromise(this._loadFromSource());return this.when()};c.prototype.loadAll=function(){var a=this;return e.safeCast(v.default(this,function(b){var e=
a.presentation&&a.presentation.slides;b(a.ground,a.basemap,a.layers,e&&e.map(function(a){return a.basemap}))}))};c.prototype.read=function(a,b){var e=this;b=d({},b,{origin:"web-scene"});var m=this._isAuthoringAppVersionSetByUser,f=this._isAuthoringAppSetByUser,g=arguments;C.readLoadable(this,a,function(b){return e.inherited(g,[a,b])},b);f||(this._isAuthoringAppSetByUser=!1);m||(this._isAuthoringAppVersionSetByUser=!1);if(a.baseMap&&Array.isArray(a.baseMap.elevationLayers)&&this.sourceVersion.supportsVisibleElevationLayersInSlides){var m=
a.baseMap.elevationLayers.map(function(a){return{id:a.id}}),c=this.presentation.slides,h=function(a,b){return a.visibleLayers.some(function(a){return a.id===b})},q=m.filter(function(a){return!c.some(function(b){return h(b,a.id)})});c.forEach(function(a){a.visibleLayers.addMany(q)})}};c.prototype._writeBasemapElevationLayers=function(a){var b=a.ground&&a.ground.layers;!a.baseMap&&b&&b.length&&(a.baseMap={title:"Basemap",baseMapLayers:[]});a.baseMap&&(a.baseMap.elevationLayers=x.clone(b))};c.prototype.write=
function(a,b){if("loaded"!==this.loadStatus){var e=new q("webscene:not-loaded","Web scene must be loaded before it can be serialized");F.error("#toJSON()","Web scene must be loaded before it can be serialized",this.loadError||this.loadStatus);throw e;}this._runLayersIdGC();b=d({},b,{origin:"web-scene"});e=this.inherited(arguments,[a,b]);this._writeBasemapElevationLayers(e);return e};c.prototype.save=function(a){return g(this,void 0,void 0,function(){var b,e,d;return h(this,function(m){switch(m.label){case 0:if(this.portalItem)return[3,
2];F.error("save(): requires the .portalItem property to be set");return[4,z.reject(new q("webscene:portal-item-not-set","Portal item to save to has not been set on the WebScene"))];case 1:m.sent(),m.label=2;case 2:return"Web Scene"===this.portalItem.type?[3,4]:[4,z.reject(new q("webscene:portal-item-wrong-type",'Portal item needs to have type "Web Scene"'))];case 3:m.sent(),m.label=4;case 4:return b=this._updateFromPromise,[4,this.load()];case 5:return m.sent(),[4,this._loadObjectsWithLayers()];
case 6:return m.sent(),e=this._enableVerifyItemRelativeUrls({origin:"web-scene",url:this.portalItem.itemUrl&&A.urlToObject(this.portalItem.itemUrl),messages:[],portal:this.portalItem.portal||M.getDefault(),writtenProperties:[],blockedRelativeUrls:[]}),d=this.write(null,e),[4,this._verifySave(d,e,a)];case 7:return m.sent(),this._updateTypeKeywords(this.portalItem),[4,this.portalItem.update({data:d})];case 8:return m.sent(),D.updateOrigins(e),b?[4,b]:[3,10];case 9:m.sent(),m.label=10;case 10:return[4,
this._saveThumbnail()];case 11:return m.sent(),[2,this.portalItem]}})})};c.prototype.saveAs=function(a,b){return g(this,void 0,void 0,function(){var e,d,m,f,g;return h(this,function(c){switch(c.label){case 0:if(a)return[3,2];F.error("saveAs(portalItem): requires a portal item parameter");return[4,z.reject(new q("webscene:portal-item-required","saveAs requires a portal item to save to"))];case 1:c.sent(),c.label=2;case 2:return a.id&&(a=a.clone(),a.id=null),e=a.portal||M.getDefault(),[4,this.load()];
case 3:return c.sent(),[4,this._loadObjectsWithLayers()];case 4:return c.sent(),d=this._enableVerifyItemRelativeUrls({origin:"web-scene",url:null,messages:[],portal:e,writtenProperties:[],blockedRelativeUrls:[]}),m=this.write(null,d),[4,this._verifySaveAs(m,d,b)];case 5:return c.sent(),[4,e._signIn()];case 6:return c.sent(),f=this.thumbnailUrl,g=!this._isOverridden("thumbnailUrl"),a.type="Web Scene",a.portal=e,this._updateTypeKeywords(a),[4,e.user.addItem({item:a,folder:b&&b.folder,data:m})];case 7:return c.sent(),
this.portalItem=a,r.prototype.read.call(this,{version:m.version,authoringApp:m.authoringApp,authoringAppVersion:m.authoringAppVersion},{name:"web-scene",ignoreDefaults:!0,url:a.itemUrl&&A.urlToObject(a.itemUrl)}),D.updateOrigins(d),f&&(this.thumbnailUrl=g?A.addQueryParameter(f,"w","8192"):f),[4,this._saveThumbnail()];case 8:return c.sent(),[2,a]}})})};c.prototype._saveThumbnail=function(){return g(this,void 0,void 0,function(){return h(this,function(a){switch(a.label){case 0:return this._isOverridden("thumbnailUrl")?
[4,this.portalItem.updateThumbnail({thumbnail:this.thumbnailUrl})]:[3,2];case 1:a.sent(),this._clearOverride("thumbnailUrl"),a.label=2;case 2:return[2]}})})};c.prototype._verifySave=function(a,b,e,d){void 0===d&&(d=!1);var m=b.messages.filter(function(a){return"error"===a.type}).map(function(a){return new q(a.name,a.message,a.details)});b.blockedRelativeUrls&&(m=m.concat(b.blockedRelativeUrls.map(function(a){return new q("url:unsupported","Relative url '"+a+"' is not supported in Web Scene")})));
e&&e.ignoreUnsupported&&(m=m.filter(function(a){return"layer:unsupported"!==a.name&&"symbol:unsupported"!==a.name&&"symbol-layer:unsupported"!==a.name&&"property:unsupported"!==a.name&&"url:unsupported"!==a.name}));e&&e.strictSchemaValidationEnabled||(m=m.filter(function(a){return"web-document-write:property-required"!==a.name}));var f=e&&e.strictSchemaValidationEnabled;return(f?z.create(function(a){return p(["./webscene/validator"],a)}).then(function(b){b=b.validate(a);if(0<b.length){var e="webscene did not validate:\n"+
b.join("\n");F.error((d?"saveAs":"save")+"(): "+e)}return b.map(function(a){return new q("webscene:schema-validation",a)})}).then(function(a){return f&&0<a.length?(a=N.createSchemaValidationError(a.concat(m)),z.reject(a)):m}):z.resolve(m)).then(function(a){if(0<a.length)return z.reject(new q("webscene:save","Failed to save webscene due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:a}))})};c.prototype._verifySaveAs=function(a,b,e){return this.canSaveAs(b)?
z.reject(N.createCopyError()):this._verifySave(a,b,e,!0)};c.prototype.verifySaveAs=function(a){var b=this._enableVerifyItemRelativeUrls({origin:"web-scene",messages:[]}),e=this.write(null,b);return this._verifySaveAs(e,b,a)};c.prototype.canSaveAs=function(a){a||(a=this._enableVerifyItemRelativeUrls({origin:"web-scene",messages:[]}),this.write(null,a));return a.verifyItemRelativeUrls&&0<a.verifyItemRelativeUrls.writtenUrls.length};c.prototype.updateFrom=function(a,b){void 0===b&&(b={});return g(this,
void 0,void 0,function(){var e,d;return h(this,function(m){switch(m.label){case 0:return this._updateFromPromise=e=this._updateFromInternal(a,b),[4,e];case 1:m.sent();if(d=this._updateFromPromise===e)this._updateFromPromise=null;return[2]}})})};c.prototype._updateFromInternal=function(a,b){void 0===b&&(b={});return g(this,void 0,void 0,function(){return h(this,function(e){switch(e.label){case 0:return[4,a.whenReady()];case 1:return e.sent(),!b.environmentExcluded&&a.environment&&(this.initialViewProperties.environment=
Q.prototype.clone.apply(a.environment)),!b.viewpointExcluded&&a.viewpoint&&(this.initialViewProperties.viewpoint=a.viewpoint.clone()),this.initialViewProperties.spatialReference=a.spatialReference.clone(),this.initialViewProperties.viewingMode=a.viewingMode,a.clippingArea?a.clippingArea!==this.clippingArea&&(this.clippingArea=a.clippingArea.clone(),this.clippingEnabled=!0):this.clippingEnabled=!1,a.heightModelInfo&&(this.heightModelInfo=a.heightModelInfo.clone()),a.map===this&&a.allLayerViews.forEach(function(a){a.layer.visible=
a.visible}),!1===b.thumbnailExcluded||null==b.thumbnailExcluded&&!b.viewpointExcluded?[4,this._updateFromThumbnail(a,b.thumbnailSize||void 0)]:[3,3];case 2:e.sent(),e.label=3;case 3:return[2]}})})};c.prototype._updateFromThumbnail=function(a,b){void 0===b&&(b=X);return g(this,void 0,void 0,function(){var e,d,m,f;return h(this,function(g){switch(g.label){case 0:return e=b.width,d=b.height,m=e/d,1.5>m?d=e/1.5:1.5<m&&(e=1.5*d),e>a.width&&(d*=a.width/e,e=a.width),d>a.height&&(e*=a.height/d,d=a.height),
[4,a.takeScreenshot({format:"jpg",width:Math.round(e),height:Math.round(d),disableSlice:!0})];case 1:return f=g.sent(),this.thumbnailUrl=f.dataUrl,[2]}})})};c.prototype._loadFromSource=function(){return this.resourceInfo?this._loadFromJSON(this.resourceInfo,{origin:"web-scene"}):this.portalItem&&this.portalItem.id?this._loadFromItem(this.portalItem):this._loadObjectsWithLayers()};c.prototype._readAndLoadFromJSON=function(a,b){a=this._validateJSON(a,b&&b.url&&b.url.path);this.read(a,b);return this._loadFromJSON(a,
b)};c.prototype._extractOperationalLayers=function(a){var b=this,e=[];if(!this.sourceVersion.supportsGround&&a.baseMap&&Array.isArray(a.baseMap.elevationLayers))for(var d=0,m=a.baseMap.elevationLayers;d<m.length;d++)e.push(m[d]);var f=[],g=function(a){a.layers&&(a.layers=a.layers.filter(g));return"ArcGISTiledElevationServiceLayer"===a.layerType?(b.sourceVersion.supportsGround||f.push(a),!1):!0};return{operationalLayers:a.operationalLayers?a.operationalLayers.filter(g):[],operationalElevationLayers:f,
basemapElevationLayers:e}};c.prototype._loadFromJSON=function(a,b){var f=this,g=new m;return this._validateSpatialReference().then(function(){return f._validateHeightModelInfo()}).then(function(){return z.create(function(a){return p(["./portal/support/layersCreator"],a)})}).then(function(m){var c=f._extractOperationalLayers(a),h=c.operationalLayers,q=c.operationalElevationLayers,c=c.basemapElevationLayers,r=[],t={context:d({},b,{layerContainerType:"operational-layers"})};f.portalItem&&(t.context.portal=
f.portalItem.portal||M.getDefault());if(0<c.length){var k=d({},t,{context:d({},t.context,{layerContainerType:"ground"})});k.defaultLayerType="ArcGISTiledElevationServiceLayer";r.push(e.safeCast(m.populateOperationalLayers(f.ground.layers,c,k)))}0<q.length&&(k=d({},t,{context:d({},t.context,{layerContainerType:"ground"})}),k.defaultLayerType="ArcGISTiledElevationServiceLayer",r.push(e.safeCast(m.populateOperationalLayers(g,q,k))));h&&0<h.length&&r.push(e.safeCast(m.populateOperationalLayers(f.layers,
h,t)));return z.eachAlways(r).then(function(){})}).then(function(){return f._loadObjectsWithLayers()}).then(function(){f.ground.layers.addMany(g)})};c.prototype._loadObjectsWithLayers=function(){var a=[];this.ground&&a.push(this.ground.load());this.basemap&&a.push(this.basemap.load());this.presentation.slides.forEach(function(b){b.basemap&&a.push(b.basemap.load())});return z.eachAlways(a).then(function(){})};c.prototype._loadFromItem=function(a){var b=this;return a.load().catch(function(a){throw new q("webscene:load-portal-item",
"Failed to load portal item",{error:a});}).then(function(){if("Web Scene"!==a.type)throw new q("webscene:invalid-portal-item","Invalid portal item type '${type}', expected 'Web Scene'",{type:a.type});}).then(function(){return a.fetchData()}).then(function(e){b.resourceInfo=e;return b._readAndLoadFromJSON(e,{origin:"web-scene",url:A.urlToObject(a.itemUrl),portal:a.portal||M.getDefault()})})};c.prototype._validateSpatialReference=function(){var a=this.initialViewProperties,b=this._sceneSpatialReference,
e;if("local"!==a.viewingMode){if(!O.isSpatialReferenceSupported(b,"global"))return z.reject(new q("webscene:unsupported-spatial-reference","Unsupported spatial reference (${spatialReference.wkid}) in global mode, only Web Mercator, WGS84 GCS or CGCS2000 are supported",{spatialReference:b,viewingMode:a.viewingMode}));e=function(a){return!a||S.canProject(a,b)}}else{if(!O.isSpatialReferenceSupported(b,"local"))return z.reject(new q("webscene:unsupported-spatial-reference","Unsupported spatial reference (${spatialReference.wkid}) in local mode, only projected coordinate systems are supported",
{spatialReference:b,viewingMode:a.viewingMode}));e=function(a){return!a||a.equals(b)}}var d=function(a){return a&&(a.camera&&a.camera.position&&a.camera.position.spatialReference||a.targetGeometry&&a.targetGeometry.spatialReference)},m=d(a.viewpoint);return m&&!e(m)?z.reject(new q("webscene:incompatible-camera-spatial-reference","Camera spatial reference (${cameraSpatialReference.wkid}) is incompatible with the scene spatial reference (${sceneSpatialReference.wkid})",{cameraSpatialReference:m,sceneSpatialReference:b,
viewingMode:a.viewingMode})):(m=this.presentation.slides.find(function(a){return!e(d(a.viewpoint))}))?(m=d(m.viewpoint),z.reject(new q("webscene:incompatible-slide-spatial-reference","Slide spatial reference (${slideSpatialReference.wkid}) is incompatible with the scene spatial reference (${sceneSpatialReference.wkid})",{slideSpatialReference:m,sceneSpatialReference:b,viewingMode:a.viewingMode}))):z.resolve()};c.prototype._validateHeightModelInfo=function(){var a=I.validateWebSceneError(this.heightModelInfo,
this._sceneSpatialReference);return a?z.reject(a):z.resolve()};c.prototype._validateJSON=function(a,b){void 0===b&&(b=null);b=L.default.parse(a.version||"","webscene");Y.validate(b);a.version=b.major+"."+b.minor;1===b.major&&2>=b.minor&&(a.spatialReference=G.WebMercator.toJSON());return a};c.prototype._updateTypeKeywords=function(a){"local"===this.initialViewProperties.viewingMode?a.typeKeywords?-1===a.typeKeywords.indexOf("ViewingMode-Local")&&a.typeKeywords.push("ViewingMode-Local"):a.typeKeywords=
["ViewingMode-Local"]:"global"===this.initialViewProperties.viewingMode&&a.typeKeywords&&(a.typeKeywords=a.typeKeywords.filter(function(a){return"ViewingMode-Local"!==a}));a.typeKeywords&&(a.typeKeywords=a.typeKeywords.filter(function(a,b,e){return e.indexOf(a)===b}))};Object.defineProperty(c.prototype,"_sceneSpatialReference",{get:function(){return this.initialViewProperties.spatialReference||G.WebMercator},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"_verifyItemRelativeRootPath",
{get:function(){return this.portalItem&&this.portalItem.itemUrl?A.urlToObject(this.portalItem.itemUrl).path:null},enumerable:!0,configurable:!0});c.prototype._enableVerifyItemRelativeUrls=function(a){var b=this._verifyItemRelativeRootPath;b&&(a.verifyItemRelativeUrls={rootPath:b,writtenUrls:[]});return a};c.prototype._unscheduleLayersIdGC=function(){this._layersIdGCTimeoutId&&(clearTimeout(this._layersIdGCTimeoutId),this._layersIdGCTimeoutId=0)};c.prototype._scheduleLayersIdGC=function(){var a=this;
this._unscheduleLayersIdGC();this._layersIdGCTimeoutId=setTimeout(function(){a._layersIdGCTimeoutId=0;a._runLayersIdGC()},3E3)};c.prototype._runLayersIdGC=function(){var a=this;this._unscheduleLayersIdGC();var b=this.applicationProperties&&this.applicationProperties.viewing&&this.applicationProperties.viewing.search,e=function(b){return!!a.allLayers.find(function(a){return a.id===b})};b&&b.layers&&(b.layers=b.layers.filter(function(a){return e(a.id)}));(b=this.presentation&&this.presentation.slides)&&
b.forEach(function(a){a.visibleLayers&&(a.visibleLayers=a.visibleLayers.filter(function(a){return e(a.id)}))})};c.fromJSON=function(a){if(!a)throw new q("webscene:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:a})};c.VERSION=Y;l([B.property({type:V,json:{write:!0}})],c.prototype,"applicationProperties",void 0);l([B.property({json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],c.prototype,"basemap",void 0);l([B.property({type:E,json:{read:{source:"clippingArea.geometry",
reader:K.fromJSON},write:{target:"clippingArea.geometry"}}})],c.prototype,"clippingArea",void 0);l([B.writer("clippingArea")],c.prototype,"writeClippingArea",null);l([B.property({type:Boolean,json:{write:{target:"clippingArea.clip"}}})],c.prototype,"clippingEnabled",void 0);l([B.reader("clippingEnabled",["clippingArea"])],c.prototype,"readClippingEnabled",null);l([B.writer("clippingEnabled")],c.prototype,"writeClippingEnabled",null);l([B.property({type:H,json:{write:!0}})],c.prototype,"heightModelInfo",
void 0);l([B.property({json:{write:{target:"operationalLayers"}}})],c.prototype,"layers",void 0);l([B.writer("layers")],c.prototype,"writeLayers",null);l([B.property({readOnly:!0,type:L.default,json:{type:String,write:{allowNull:!0,target:"version",isRequired:!0}}})],c.prototype,"sourceVersion",void 0);l([B.reader("sourceVersion",["version"])],c.prototype,"readSourceVersion",null);l([B.writer("sourceVersion")],c.prototype,"writeSourceVersion",null);l([B.property({dependsOn:["portalItem.thumbnailUrl"]})],
c.prototype,"thumbnailUrl",null);l([B.property({type:String,json:{write:{allowNull:!0}}})],c.prototype,"authoringApp",null);l([B.writer("authoringApp")],c.prototype,"writeAuthoringApp",null);l([B.property({type:String,json:{write:{allowNull:!0}}})],c.prototype,"authoringAppVersion",null);l([B.writer("authoringAppVersion")],c.prototype,"writeAuthoringAppVersion",null);l([B.property({json:{write:{isRequired:!0,allowNull:!0,enabled:!0}}})],c.prototype,"ground",void 0);l([B.writer("ground")],c.prototype,
"writeGround",null);l([B.property({type:P,nonNullable:!0,json:{write:function(a,b,e,m){a.slides&&0<a.slides.length&&(e=d({},m,{isPresentation:!0}),b.presentation=a.write(null,e))}}})],c.prototype,"presentation",void 0);l([B.property({type:J,nonNullable:!0,json:{default:function(){return new J({viewingMode:"global",spatialReference:G.WebMercator})}}})],c.prototype,"initialViewProperties",void 0);l([B.reader("initialViewProperties",["initialState.environment","spatialReference","viewingMode","initialState.viewpoint"])],
c.prototype,"readInitialViewProperties",null);l([B.writer("initialViewProperties",{"initialState.environment":{type:Q},spatialReference:{type:G},viewingMode:{type:String},"initialState.viewpoint":{type:a}})],c.prototype,"writeInitialViewProperties",null);l([B.property({type:T})],c.prototype,"portalItem",void 0);l([B.property()],c.prototype,"resourceInfo",void 0);l([k(0,B.cast(T))],c.prototype,"saveAs",null);l([B.property()],c.prototype,"_sceneSpatialReference",null);l([B.property()],c.prototype,"_verifyItemRelativeRootPath",
null);return c=l([B.subclass("esri.WebScene")],c)}(B.declared(b,w,r))})},"esri/core/accessorSupport/originUtils":function(){define(["require","exports","../MultiOriginJSONSupport"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.updateOrigins=function(c){c&&c.writtenProperties&&c.writtenProperties.forEach(function(c){var d=c.target;c.newOrigin&&c.oldOrigin!==c.newOrigin&&d.isInstanceOf(n)&&d.updateOrigin(c.propName,c.newOrigin)})}})},"esri/support/webSceneUtils":function(){define(["require",
"exports","../core/Error"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.createCopyError=function(){return new n("webscene:failed-to-copy-embedded-resources","Copying of embedded resources is currently not supported")};c.isCopyError=function(c){return c&&"webscene:failed-to-copy-embedded-resources"===c.name};c.createSchemaValidationError=function(c){return new n("webscene:schema-validation","Failed to save webscene due to schema validation errors. See 'details.errors' for more detailed information",
{errors:c})};c.isSchemaValidationError=function(c){return c&&"webscene:schema-validation"===c.name}})},"esri/views/3d/support/projectionUtils":function(){define("require exports ../../../core/mathUtils ../../../core/maybe ../../../core/unitUtils ../../../core/libs/gl-matrix-2/mat4 ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../geometry/Point ../../../geometry/SpatialReference ../../../geometry/support/aaBoundingRect ../../../layers/graphics/dehydratedFeatures ./earthUtils ./mathUtils ../webgl-engine/lib/BufferVectorMath".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u){function t(a,b,e,d){2===a.length?(R[0]=a[0],R[1]=a[1],R[2]=0,a=R):a===e&&(h.vec3.copy(R,a),a=R);return r(a,b,0,e,d,0,1)}function r(a,b,e,d,m,f,g){void 0===g&&(g=1);b=H(b,m,P).projector;if(l.isNone(b))return!1;if(b===w){if(a===d&&e===f)return!0;for(b=e+3*g;e<b;e++,f++)d[f]=a[e];return!0}for(g=e+3*g;e<g;e+=3,f+=3)b(a,e,d,f);return!0}function x(a,b){if(b.spatialReference===a)return b.spatialReferenceId;b.spatialReference=a;"metersPerUnit"in b&&(b.metersPerUnit=
k.getMetersPerUnitForSR(a,1));return a.wkt===c.SphericalECEFSpatialReference.wkt?b.spatialReferenceId=1:a.isWGS84?b.spatialReferenceId=2:a.isWebMercator?b.spatialReferenceId=3:a.wkt===c.WGS84ECEFSpatialReference.wkt?b.spatialReferenceId=4:4490===a.wkid?b.spatialReferenceId=5:b.spatialReferenceId=0}function w(a,b,e,d){e[d++]=a[b++];e[d++]=a[b++];e[d]=a[b]}function v(a,b,e,d){e[d++]=Y*(a[b++]/m.earthRadius);e[d++]=Y*(Math.PI/2-2*Math.atan(Math.exp(-1*a[b++]/m.earthRadius)));e[d]=a[b]}function y(a,b,
e,d){var f=.4999999*Math.PI,f=n.clamp(F*a[b+1],-f,f),f=Math.sin(f);e[d++]=F*a[b]*m.earthRadius;e[d++]=m.halfEarthRadius*Math.log((1+f)/(1-f));e[d]=a[b+2]}function z(a,b,e){b=x(b,Q);b=V[b][6];if(l.isNone(b))return!1;b(a,0,R,0);e!==R&&(e[0]=R[0],e[1]=R[1],2<e.length&&(e[2]=R[2]));return!0}function A(a,b){R[0]=a.x;R[1]=a.y;R[2]=a.hasZ?a.z:0;return z(R,a.spatialReference,b)}function B(a,b,e,d){var f=m.earthRadius+a[b+2],g=F*a[b+1];a=F*a[b];b=Math.cos(g);e[d++]=Math.cos(a)*b*f;e[d++]=Math.sin(a)*b*f;e[d]=
Math.sin(g)*f}function D(a,b,e,d){var f=u.Vec3Compact.length(a,b),g=q.asin(a[b+2]/(0===f?1:f)),c=Math.cos(g)*f;a=(0<a[b+1]?1:-1)*q.acos(a[b]/(0===c?1:c));e[d++]=Y*a;e[d++]=Y*g;e[d]=f-m.earthRadius}function C(a,b,e,d){var m=X,f=F*a[b],g=F*a[b+1];a=a[b+2];b=Math.sin(g);var g=Math.cos(g),c=m.a/Math.sqrt(1-m.e2*b*b);e[d++]=(c+a)*g*Math.cos(f);e[d++]=(c+a)*g*Math.sin(f);e[d++]=(c*(1-m.e2)+a)*b}function E(a,b,e,d){var m=X,f=a[b],g=a[b+1];a=a[b+2];var c,h,q,r,t,k;b=Math.abs(a);c=f*f+g*g;h=Math.sqrt(c);q=
c+a*a;r=Math.sqrt(q);f=Math.atan2(g,f);t=a*a/q;q=c/q;g=m.a2/r;c=m.a3-m.a4/r;.3<q?(t=b/r*(1+q*(m.a1+g+t*c)/r),r=Math.asin(t),g=t*t,q=Math.sqrt(1-g)):(q=h/r*(1-t*(m.a5-g-q*c)/r),r=Math.acos(q),g=1-q*q,t=Math.sqrt(g));k=1-m.e2*g;g=m.a/Math.sqrt(k);m=m.a6*g;g=h-g*q;c=b-m*t;b=q*g+t*c;h=q*c-t*g;m=h/(m/k+b);r+=m;0>a&&(r=-r);e[d++]=Y*f;e[d++]=Y*r;e[d]=b+h*m/2}function H(a,b,e){if(e.source.spatialReference===a&&e.dest.spatialReference===b)return e;var d=x(a,e.source),m=x(b,e.dest);0===d&&0===m?a.equals(b)?
e.projector=w:e.projector=null:e.projector=V[d][m];return e}Object.defineProperty(c,"__esModule",{value:!0});var G,I,K,M,T,N,S,O;c.SphericalECEFSpatialReference=new b({wkt:'GEOCCS["Spherical geocentric",\n  DATUM["Not specified",\n    SPHEROID["Sphere",\' + earthUtils.earthRadius + \',0]],\n  PRIMEM["Greenwich",0.0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",EAST],\n  AXIS["Geocentric Z",NORTH]\n]'});c.WGS84ECEFSpatialReference=new b({wkt:'GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",6378137,298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]'});
c.canProject=function(a,b){return!!H(a,b,P).projector};c.vectorToVector=t;c.pointToPoint=function(a,b,e,d){void 0===e&&(e=b.spatialReference);void 0===d&&(d=0);R[0]=a.x;R[1]=a.y;var m=a.z;R[2]=void 0!==m?m:d;if(!r(R,a.spatialReference,0,R,e,0,1))return!1;b.x=R[0];b.y=R[1];b.spatialReference=e;void 0!==m?(b.z=R[2],b.hasZ=!0):(b.z=void 0,b.hasZ=!1);return!0};c.pointToVector=function(a,b,e,d){void 0===d&&(d=0);R[0]=a.x;R[1]=a.y;var m=a.z;R[2]=void 0!==m?m:d;return r(R,a.spatialReference,0,b,e,0,1)};
c.vectorToPoint=function(a,b,d,m){d instanceof f?m=m||d.spatialReference:e.isPoint(d)?(d.hasZ=!0,m=m||d.spatialReference):(m=d,d=new f({spatialReference:m}));return r(a,b,0,R,m,0,1)?(d.x=R[0],d.y=R[1],d.z=R[2],d.spatialReference=m,d):null};c.xyzToVector=function(a,b,e,d,m,f){R[0]=a;R[1]=b;R[2]=e;return r(R,d,0,m,f,0,1)};c.bufferToBuffer=r;c.computeLinearTransformation=function(a,b,e,m){var f=x(a,Q),g=x(m,J);if(f===g&&1!==g&&(0!==f||a.equals(m)))return d.mat4.identity(e),d.mat4.translate(e,e,b),!0;
if(1===g){a=V[f][6];g=V[6][g];if(l.isNone(a)||l.isNone(g))return!1;a(b,0,Z,0);g(Z,0,da,0);a=F*Z[0];g=F*Z[1];b=Math.sin(a);a=Math.cos(a);m=Math.sin(g);g=Math.cos(g);e[0]=-b;e[4]=-m*a;e[8]=g*a;e[12]=da[0];e[1]=a;e[5]=-m*b;e[9]=g*b;e[13]=da[1];e[2]=0;e[6]=g;e[10]=m;e[14]=da[2];e[3]=0;e[7]=0;e[11]=0;e[15]=1;return!0}if(3===g&&(2===f||1===f)){a=V[f][6];g=V[6][3];if(l.isNone(a)||l.isNone(g))return!1;a(b,0,Z,0);b=F*Z[1];g(Z,0,da,0);d.mat4.identity(e);d.mat4.translate(e,e,da);b=1/Math.cos(b);d.mat4.scale(e,
e,[b,b,1]);return!0}return!1};c.transformDirection=function(a,b,e,d,m){h.vec3.copy(ja,a);h.vec3.add(ba,a,b);t(ja,e,ja,m);t(ba,e,ba,m);h.vec3.subtract(d,ba,ja);h.vec3.normalize(d,d)};c.mbsToMbs=function(a,b,e,d){b=H(b,d,L);if(b.projector===w)return e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],!0;if(l.isNone(b.projector))return!1;d=b.source;var f=b.dest;if(3===f.spatialReferenceId){b=V[d.spatialReferenceId][2];if(l.isNone(b))return!1;b(a,0,Z,0);b=Math.abs(F*Z[1])+Math.asin(a[3]/(m.earthRadius+a[2]));y(Z,
0,e,0);e[3]=b>.9999*Math.PI?Number.MAX_VALUE:1/Math.cos(b)*a[3];return!0}b.projector(a,0,e,0);e[3]=a[3]*d.metersPerUnit/f.metersPerUnit;return!0};c.extentToBoundingBox=function(a,b,e){if(null==a)return!1;var d;R[0]=null!=a.xmin?a.xmin:0;R[1]=null!=a.ymin?a.ymin:0;R[2]=null!=a.zmin?a.zmin:0;d=r(R,a.spatialReference,0,b,e,0,1);R[0]=null!=a.xmax?a.xmax:0;R[1]=null!=a.ymax?a.ymax:0;R[2]=null!=a.zmax?a.zmax:0;d=d&&r(R,a.spatialReference,0,b,e,3,1);null==a.xmin&&(b[0]=-Infinity);null==a.ymin&&(b[1]=-Infinity);
null==a.zmin&&(b[2]=-Infinity);null==a.xmax&&(b[3]=Infinity);null==a.ymax&&(b[4]=Infinity);null==a.zmax&&(b[5]=Infinity);return d};c.extentToBoundingRect=function(a,b,e){if(null==a)return!1;var d;R[0]=null!=a.xmin?a.xmin:0;R[1]=null!=a.ymin?a.ymin:0;R[2]=null!=a.zmin?a.zmin:0;d=r(R,a.spatialReference,0,R,e,0,1);b[0]=R[0];b[1]=R[1];R[0]=null!=a.xmax?a.xmax:0;R[1]=null!=a.ymax?a.ymax:0;R[2]=null!=a.zmax?a.zmax:0;d=d&&r(R,a.spatialReference,0,R,e,0,1);b[2]=R[0];b[3]=R[1];null==a.xmin&&(b[0]=-Infinity);
null==a.ymin&&(b[1]=-Infinity);null==a.xmax&&(b[2]=Infinity);null==a.ymax&&(b[3]=Infinity);return d};c.boundingRectToBoundingRect=function(b,e,d,m){if(null==b)return!1;if(e.equals(m))return a.set(d,b),!0;var f;R[0]=b[0];R[1]=b[1];R[2]=0;f=r(R,e,0,R,m,0,1);d[0]=R[0];d[1]=R[1];R[0]=b[2];R[1]=b[3];R[2]=0;f=f&&r(R,e,0,R,m,0,1);d[2]=R[0];d[3]=R[1];return f};(function(a){a.x2lon=function(a){return a/m.earthRadius};a.y2lat=function(a){return Math.PI/2-2*Math.atan(Math.exp(-1*a/m.earthRadius))};a.lon2x=function(a){return a*
m.earthRadius};a.lat2y=function(a){a=Math.sin(a);return m.earthRadius/2*Math.log((1+a)/(1-a))}})(c.webMercator||(c.webMercator={}));c.canProjectToWGS84ComparableLonLat=function(a){a=x(a,Q);return!!V[a][6]};c.vectorToWGS84ComparableLonLat=z;c.pointToWGS84ComparableLonLat=A;c.pointToWGS84ComparableLonLatPoint=function(a,b){var e=x(b.spatialReference,J);return l.isNone(V[6][e])?!1:A(a,R)?(b.x=R[0],b.y=R[1],b.z=R[2],!0):!1};c.wgs84ComparableLonLatToECEF=function(a,b,e,d){void 0===d&&(d=0);d=m.earthRadius+
d;var f=Math.cos(e);a[0]=Math.cos(b)*f*d;a[1]=Math.sin(b)*f*d;a[2]=Math.sin(e)*d};var V=(G={},G[2]=(I={},I[5]=null,I[6]=w,I[1]=B,I[0]=null,I[3]=y,I[2]=w,I[4]=C,I),G[5]=(K={},K[5]=w,K[6]=w,K[1]=B,K[0]=null,K[3]=null,K[2]=null,K[4]=C,K),G[3]=(M={},M[5]=null,M[6]=v,M[1]=function(a,b,e,d){v(a,b,e,d);B(e,d,e,d)},M[0]=null,M[3]=w,M[2]=v,M[4]=function(a,b,e,d){v(a,b,e,d);C(e,d,e,d)},M),G[4]=(T={},T[5]=E,T[6]=E,T[1]=function(a,b,e,d){E(a,b,e,d);B(e,d,e,d)},T[0]=null,T[3]=function(a,b,e,d){E(a,b,e,d);y(e,
d,e,d)},T[2]=E,T[4]=w,T),G[1]=(N={},N[5]=D,N[6]=D,N[1]=w,N[0]=null,N[3]=function(a,b,e,d){D(a,b,e,d);y(e,d,e,d)},N[2]=D,N[4]=function(a,b,e,d){D(a,b,e,d);C(e,d,e,d)},N),G[0]=(S={},S[5]=null,S[6]=null,S[1]=null,S[0]=w,S[3]=null,S[2]=null,S[4]=null,S),G[6]=(O={},O[5]=null,O[6]=w,O[1]=B,O[0]=null,O[3]=null,O[2]=w,O[4]=C,O),G),Q={spatialReference:null,spatialReferenceId:0},J={spatialReference:null,spatialReferenceId:0},P={source:{spatialReference:null,spatialReferenceId:0},dest:{spatialReference:null,
spatialReferenceId:0},projector:w},L={source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:w},F=q.deg2rad(1),Y=q.rad2deg(1),X={a:6378137,e2:.006694379990137799,a1:42697.67270715754,a2:1.8230912546075456E9,a3:142.91722289812412,a4:4.557728136518864E9,a5:42840.589930055656,a6:.9933056200098622},R=g.vec3f64.create(),Z=g.vec3f64.create(),da=g.vec3f64.create(),ja=g.vec3f64.create(),ba=g.vec3f64.create()})},"esri/core/libs/gl-matrix-2/mat4":function(){define(["require",
"exports","./math/mat4"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.mat4=n})},"esri/core/libs/gl-matrix-2/math/mat4":function(){define(["require","exports","../factories/vec3f64","./common"],function(p,c,n,l){function k(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function d(b,a,e){var d=a[0],f=a[1],g=a[2],c=a[3],h=a[4],k=a[5],l=a[6],v=a[7],y=a[8],z=a[9],A=a[10],n=a[11],D=a[12],C=a[13],E=a[14];
a=a[15];var H=e[0],G=e[1],I=e[2],K=e[3];b[0]=H*d+G*h+I*y+K*D;b[1]=H*f+G*k+I*z+K*C;b[2]=H*g+G*l+I*A+K*E;b[3]=H*c+G*v+I*n+K*a;H=e[4];G=e[5];I=e[6];K=e[7];b[4]=H*d+G*h+I*y+K*D;b[5]=H*f+G*k+I*z+K*C;b[6]=H*g+G*l+I*A+K*E;b[7]=H*c+G*v+I*n+K*a;H=e[8];G=e[9];I=e[10];K=e[11];b[8]=H*d+G*h+I*y+K*D;b[9]=H*f+G*k+I*z+K*C;b[10]=H*g+G*l+I*A+K*E;b[11]=H*c+G*v+I*n+K*a;H=e[12];G=e[13];I=e[14];K=e[15];b[12]=H*d+G*h+I*y+K*D;b[13]=H*f+G*k+I*z+K*C;b[14]=H*g+G*l+I*A+K*E;b[15]=H*c+G*v+I*n+K*a;return b}function h(b,a,e){var d=
a[0],f=a[1],g=a[2],c=a[3],h=d+d,k=f+f,l=g+g;a=d*h;var v=d*k,d=d*l,y=f*k,f=f*l,g=g*l,h=c*h,k=c*k,c=c*l;b[0]=1-(y+g);b[1]=v+c;b[2]=d-k;b[3]=0;b[4]=v-c;b[5]=1-(a+g);b[6]=f+h;b[7]=0;b[8]=d+k;b[9]=f-h;b[10]=1-(a+y);b[11]=0;b[12]=e[0];b[13]=e[1];b[14]=e[2];b[15]=1;return b}function g(b,a,e){b[0]=a[0]-e[0];b[1]=a[1]-e[1];b[2]=a[2]-e[2];b[3]=a[3]-e[3];b[4]=a[4]-e[4];b[5]=a[5]-e[5];b[6]=a[6]-e[6];b[7]=a[7]-e[7];b[8]=a[8]-e[8];b[9]=a[9]-e[9];b[10]=a[10]-e[10];b[11]=a[11]-e[11];b[12]=a[12]-e[12];b[13]=a[13]-
e[13];b[14]=a[14]-e[14];b[15]=a[15]-e[15];return b}Object.defineProperty(c,"__esModule",{value:!0});c.copy=function(b,a){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};c.set=function(b,a,e,d,f,g,c,h,k,l,v,y,z,A,n,D,C){b[0]=a;b[1]=e;b[2]=d;b[3]=f;b[4]=g;b[5]=c;b[6]=h;b[7]=k;b[8]=l;b[9]=v;b[10]=y;b[11]=z;b[12]=A;b[13]=n;b[14]=D;b[15]=C;return b};c.identity=k;c.transpose=
function(b,a){if(b===a){var e=a[1],d=a[2],f=a[3],g=a[6],c=a[7],h=a[11];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=e;b[6]=a[9];b[7]=a[13];b[8]=d;b[9]=g;b[11]=a[14];b[12]=f;b[13]=c;b[14]=h}else b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15];return b};c.invert=function(b,a){var e=a[0],d=a[1],f=a[2],g=a[3],c=a[4],h=a[5],k=a[6],l=a[7],v=a[8],y=a[9],z=a[10],A=a[11],n=a[12],D=a[13],C=a[14];
a=a[15];var E=e*h-d*c,H=e*k-f*c,G=e*l-g*c,I=d*k-f*h,K=d*l-g*h,M=f*l-g*k,p=v*D-y*n,N=v*C-z*n,S=v*a-A*n,O=y*C-z*D,V=y*a-A*D,Q=z*a-A*C,J=E*Q-H*V+G*O+I*S-K*N+M*p;if(!J)return null;J=1/J;b[0]=(h*Q-k*V+l*O)*J;b[1]=(f*V-d*Q-g*O)*J;b[2]=(D*M-C*K+a*I)*J;b[3]=(z*K-y*M-A*I)*J;b[4]=(k*S-c*Q-l*N)*J;b[5]=(e*Q-f*S+g*N)*J;b[6]=(C*G-n*M-a*H)*J;b[7]=(v*M-z*G+A*H)*J;b[8]=(c*V-h*S+l*p)*J;b[9]=(d*S-e*V-g*p)*J;b[10]=(n*K-D*G+a*E)*J;b[11]=(y*G-v*K-A*E)*J;b[12]=(h*N-c*O-k*p)*J;b[13]=(e*O-d*N+f*p)*J;b[14]=(D*H-n*I-C*E)*J;
b[15]=(v*I-y*H+z*E)*J;return b};c.adjoint=function(b,a){var e=a[0],d=a[1],f=a[2],g=a[3],c=a[4],h=a[5],k=a[6],l=a[7],v=a[8],y=a[9],z=a[10],A=a[11],n=a[12],D=a[13],C=a[14];a=a[15];b[0]=h*(z*a-A*C)-y*(k*a-l*C)+D*(k*A-l*z);b[1]=-(d*(z*a-A*C)-y*(f*a-g*C)+D*(f*A-g*z));b[2]=d*(k*a-l*C)-h*(f*a-g*C)+D*(f*l-g*k);b[3]=-(d*(k*A-l*z)-h*(f*A-g*z)+y*(f*l-g*k));b[4]=-(c*(z*a-A*C)-v*(k*a-l*C)+n*(k*A-l*z));b[5]=e*(z*a-A*C)-v*(f*a-g*C)+n*(f*A-g*z);b[6]=-(e*(k*a-l*C)-c*(f*a-g*C)+n*(f*l-g*k));b[7]=e*(k*A-l*z)-c*(f*A-
g*z)+v*(f*l-g*k);b[8]=c*(y*a-A*D)-v*(h*a-l*D)+n*(h*A-l*y);b[9]=-(e*(y*a-A*D)-v*(d*a-g*D)+n*(d*A-g*y));b[10]=e*(h*a-l*D)-c*(d*a-g*D)+n*(d*l-g*h);b[11]=-(e*(h*A-l*y)-c*(d*A-g*y)+v*(d*l-g*h));b[12]=-(c*(y*C-z*D)-v*(h*C-k*D)+n*(h*z-k*y));b[13]=e*(y*C-z*D)-v*(d*C-f*D)+n*(d*z-f*y);b[14]=-(e*(h*C-k*D)-c*(d*C-f*D)+n*(d*k-f*h));b[15]=e*(h*z-k*y)-c*(d*z-f*y)+v*(d*k-f*h);return b};c.determinant=function(b){var a=b[0],e=b[1],d=b[2],f=b[3],g=b[4],c=b[5],h=b[6],k=b[7],l=b[8],v=b[9],y=b[10],z=b[11],A=b[12],n=b[13],
D=b[14];b=b[15];return(a*c-e*g)*(y*b-z*D)-(a*h-d*g)*(v*b-z*n)+(a*k-f*g)*(v*D-y*n)+(e*h-d*c)*(l*b-z*A)-(e*k-f*c)*(l*D-y*A)+(d*k-f*h)*(l*n-v*A)};c.multiply=d;c.translate=function(b,a,e){var d=e[0],f=e[1];e=e[2];var g=void 0,c=void 0,h=void 0,k=void 0,l=void 0,v=void 0,y=void 0,z=void 0,A=void 0,n=void 0,D=void 0,C=void 0;a===b?(b[12]=a[0]*d+a[4]*f+a[8]*e+a[12],b[13]=a[1]*d+a[5]*f+a[9]*e+a[13],b[14]=a[2]*d+a[6]*f+a[10]*e+a[14],b[15]=a[3]*d+a[7]*f+a[11]*e+a[15]):(g=a[0],c=a[1],h=a[2],k=a[3],l=a[4],v=
a[5],y=a[6],z=a[7],A=a[8],n=a[9],D=a[10],C=a[11],b[0]=g,b[1]=c,b[2]=h,b[3]=k,b[4]=l,b[5]=v,b[6]=y,b[7]=z,b[8]=A,b[9]=n,b[10]=D,b[11]=C,b[12]=g*d+l*f+A*e+a[12],b[13]=c*d+v*f+n*e+a[13],b[14]=h*d+y*f+D*e+a[14],b[15]=k*d+z*f+C*e+a[15]);return b};c.scale=function(b,a,e){var d=e[0],f=e[1];e=e[2];b[0]=a[0]*d;b[1]=a[1]*d;b[2]=a[2]*d;b[3]=a[3]*d;b[4]=a[4]*f;b[5]=a[5]*f;b[6]=a[6]*f;b[7]=a[7]*f;b[8]=a[8]*e;b[9]=a[9]*e;b[10]=a[10]*e;b[11]=a[11]*e;b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};c.rotate=
function(b,a,e,d){var m=d[0],f=d[1];d=d[2];var g=Math.sqrt(m*m+f*f+d*d),c=void 0,h=void 0,k=void 0,v=void 0,y=void 0,z=void 0,A=void 0,n=void 0,D=void 0,C=void 0,E=void 0,H=void 0,G=void 0,I=void 0,K=void 0,M=void 0,p=void 0,N=void 0,S=void 0,O=void 0,V=void 0,Q=void 0,h=c=void 0;if(g<l.EPSILON)return null;g=1/g;m*=g;f*=g;d*=g;c=Math.sin(e);h=Math.cos(e);k=1-h;v=a[0];y=a[1];z=a[2];A=a[3];n=a[4];D=a[5];C=a[6];E=a[7];H=a[8];G=a[9];I=a[10];K=a[11];M=m*m*k+h;p=f*m*k+d*c;N=d*m*k-f*c;S=m*f*k-d*c;O=f*f*
k+h;V=d*f*k+m*c;Q=m*d*k+f*c;c=f*d*k-m*c;h=d*d*k+h;b[0]=v*M+n*p+H*N;b[1]=y*M+D*p+G*N;b[2]=z*M+C*p+I*N;b[3]=A*M+E*p+K*N;b[4]=v*S+n*O+H*V;b[5]=y*S+D*O+G*V;b[6]=z*S+C*O+I*V;b[7]=A*S+E*O+K*V;b[8]=v*Q+n*c+H*h;b[9]=y*Q+D*c+G*h;b[10]=z*Q+C*c+I*h;b[11]=A*Q+E*c+K*h;a!==b&&(b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b};c.rotateX=function(b,a,e){var d=Math.sin(e);e=Math.cos(e);var f=a[4],g=a[5],c=a[6],h=a[7],k=a[8],l=a[9],v=a[10],y=a[11];a!==b&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[12]=a[12],
b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[4]=f*e+k*d;b[5]=g*e+l*d;b[6]=c*e+v*d;b[7]=h*e+y*d;b[8]=k*e-f*d;b[9]=l*e-g*d;b[10]=v*e-c*d;b[11]=y*e-h*d;return b};c.rotateY=function(b,a,e){var d=Math.sin(e);e=Math.cos(e);var f=a[0],g=a[1],c=a[2],h=a[3],k=a[8],l=a[9],v=a[10],y=a[11];a!==b&&(b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[0]=f*e-k*d;b[1]=g*e-l*d;b[2]=c*e-v*d;b[3]=h*e-y*d;b[8]=f*d+k*e;b[9]=g*d+l*e;b[10]=c*d+v*e;b[11]=h*d+y*e;return b};c.rotateZ=function(b,
a,e){var d=Math.sin(e);e=Math.cos(e);var f=a[0],g=a[1],c=a[2],h=a[3],k=a[4],l=a[5],v=a[6],y=a[7];a!==b&&(b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[0]=f*e+k*d;b[1]=g*e+l*d;b[2]=c*e+v*d;b[3]=h*e+y*d;b[4]=k*e-f*d;b[5]=l*e-g*d;b[6]=v*e-c*d;b[7]=y*e-h*d;return b};c.fromTranslation=function(b,a){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=a[0];b[13]=a[1];b[14]=a[2];b[15]=1;return b};c.fromScaling=function(b,
a){b[0]=a[0];b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a[1];b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=a[2];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};c.fromRotation=function(b,a,e){var d=e[0],f=e[1];e=e[2];var g=Math.sqrt(d*d+f*f+e*e),c=void 0,h=void 0,k=void 0;if(g<l.EPSILON)return null;g=1/g;d*=g;f*=g;e*=g;c=Math.sin(a);h=Math.cos(a);k=1-h;b[0]=d*d*k+h;b[1]=f*d*k+e*c;b[2]=e*d*k-f*c;b[3]=0;b[4]=d*f*k-e*c;b[5]=f*f*k+h;b[6]=e*f*k+d*c;b[7]=0;b[8]=d*e*k+f*c;b[9]=f*e*k-d*c;b[10]=e*e*k+h;b[11]=0;b[12]=0;b[13]=0;
b[14]=0;b[15]=1;return b};c.fromXRotation=function(b,a){var e=Math.sin(a);a=Math.cos(a);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a;b[6]=e;b[7]=0;b[8]=0;b[9]=-e;b[10]=a;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};c.fromYRotation=function(b,a){var e=Math.sin(a);a=Math.cos(a);b[0]=a;b[1]=0;b[2]=-e;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=e;b[9]=0;b[10]=a;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};c.fromZRotation=function(b,a){var e=Math.sin(a);a=Math.cos(a);b[0]=a;b[1]=e;b[2]=0;b[3]=0;b[4]=
-e;b[5]=a;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};c.fromRotationTranslation=h;c.fromQuat2=function(b,a){var e=f,d=-a[0],g=-a[1],c=-a[2],k=a[3],r=a[4],l=a[5],w=a[6],v=a[7],y=d*d+g*g+c*c+k*k;0<y?(e[0]=2*(r*k+v*d+l*c-w*g)/y,e[1]=2*(l*k+v*g+w*d-r*c)/y,e[2]=2*(w*k+v*c+r*g-l*d)/y):(e[0]=2*(r*k+v*d+l*c-w*g),e[1]=2*(l*k+v*g+w*d-r*c),e[2]=2*(w*k+v*c+r*g-l*d));h(b,a,e);return b};var f=n.create();c.getTranslation=function(b,a){b[0]=a[12];b[1]=a[13];b[2]=a[14];return b};
c.getScaling=function(b,a){var e=a[0],d=a[1],f=a[2],g=a[4],c=a[5],h=a[6],k=a[8],l=a[9];a=a[10];b[0]=Math.sqrt(e*e+d*d+f*f);b[1]=Math.sqrt(g*g+c*c+h*h);b[2]=Math.sqrt(k*k+l*l+a*a);return b};c.getRotation=function(b,a){var e=a[0]+a[5]+a[10],d=0;0<e?(d=2*Math.sqrt(e+1),b[3]=.25*d,b[0]=(a[6]-a[9])/d,b[1]=(a[8]-a[2])/d,b[2]=(a[1]-a[4])/d):a[0]>a[5]&&a[0]>a[10]?(d=2*Math.sqrt(1+a[0]-a[5]-a[10]),b[3]=(a[6]-a[9])/d,b[0]=.25*d,b[1]=(a[1]+a[4])/d,b[2]=(a[8]+a[2])/d):a[5]>a[10]?(d=2*Math.sqrt(1+a[5]-a[0]-a[10]),
b[3]=(a[8]-a[2])/d,b[0]=(a[1]+a[4])/d,b[1]=.25*d,b[2]=(a[6]+a[9])/d):(d=2*Math.sqrt(1+a[10]-a[0]-a[5]),b[3]=(a[1]-a[4])/d,b[0]=(a[8]+a[2])/d,b[1]=(a[6]+a[9])/d,b[2]=.25*d);return b};c.fromRotationTranslationScale=function(b,a,e,d){var m=a[0],f=a[1],g=a[2],c=a[3],h=m+m,k=f+f,l=g+g;a=m*h;var y=m*k,m=m*l,z=f*k,f=f*l,g=g*l,h=c*h,k=c*k,c=c*l,l=d[0],A=d[1];d=d[2];b[0]=(1-(z+g))*l;b[1]=(y+c)*l;b[2]=(m-k)*l;b[3]=0;b[4]=(y-c)*A;b[5]=(1-(a+g))*A;b[6]=(f+h)*A;b[7]=0;b[8]=(m+k)*d;b[9]=(f-h)*d;b[10]=(1-(a+z))*
d;b[11]=0;b[12]=e[0];b[13]=e[1];b[14]=e[2];b[15]=1;return b};c.fromRotationTranslationScaleOrigin=function(b,a,e,d,f){var m=a[0],g=a[1],c=a[2],h=a[3],q=m+m,k=g+g,l=c+c;a=m*q;var z=m*k,A=m*l,m=g*k,g=g*l,n=c*l,c=h*q,k=h*k,D=h*l,C=d[0],E=d[1],l=d[2];d=f[0];h=f[1];f=f[2];var q=(1-(m+n))*C,H=(z+D)*C,C=(A-k)*C,z=(z-D)*E,n=(1-(a+n))*E,E=(g+c)*E,A=(A+k)*l,g=(g-c)*l;a=(1-(a+m))*l;b[0]=q;b[1]=H;b[2]=C;b[3]=0;b[4]=z;b[5]=n;b[6]=E;b[7]=0;b[8]=A;b[9]=g;b[10]=a;b[11]=0;b[12]=e[0]+d-(q*d+z*h+A*f);b[13]=e[1]+h-(H*
d+n*h+g*f);b[14]=e[2]+f-(C*d+E*h+a*f);b[15]=1;return b};c.fromQuat=function(b,a){var e=a[0],d=a[1],f=a[2];a=a[3];var g=e+e,c=d+d,h=f+f,e=e*g,k=d*g,d=d*c,l=f*g,v=f*c,f=f*h,g=a*g,c=a*c;a*=h;b[0]=1-d-f;b[1]=k+a;b[2]=l-c;b[3]=0;b[4]=k-a;b[5]=1-e-f;b[6]=v+g;b[7]=0;b[8]=l+c;b[9]=v-g;b[10]=1-e-d;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};c.frustum=function(b,a,e,d,f,g,c){var m=1/(e-a),h=1/(f-d),q=1/(g-c);b[0]=2*g*m;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=2*g*h;b[6]=0;b[7]=0;b[8]=(e+a)*m;b[9]=(f+d)*h;b[10]=
(c+g)*q;b[11]=-1;b[12]=0;b[13]=0;b[14]=c*g*2*q;b[15]=0;return b};c.perspective=function(b,a,e,d,f){a=1/Math.tan(a/2);var m=void 0;b[0]=a/e;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[11]=-1;b[12]=0;b[13]=0;b[15]=0;null!=f&&Infinity!==f?(m=1/(d-f),b[10]=(f+d)*m,b[14]=2*f*d*m):(b[10]=-1,b[14]=-2*d);return b};c.perspectiveFromFieldOfView=function(b,a,e,d){var m=Math.tan(a.upDegrees*Math.PI/180),f=Math.tan(a.downDegrees*Math.PI/180),g=Math.tan(a.leftDegrees*Math.PI/180);a=Math.tan(a.rightDegrees*
Math.PI/180);var c=2/(g+a),h=2/(m+f);b[0]=c;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=h;b[6]=0;b[7]=0;b[8]=-((g-a)*c*.5);b[9]=(m-f)*h*.5;b[10]=d/(e-d);b[11]=-1;b[12]=0;b[13]=0;b[14]=d*e/(e-d);b[15]=0;return b};c.ortho=function(b,a,e,d,f,g,c){var m=1/(a-e),h=1/(d-f),q=1/(g-c);b[0]=-2*m;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=-2*h;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=2*q;b[11]=0;b[12]=(a+e)*m;b[13]=(f+d)*h;b[14]=(c+g)*q;b[15]=1;return b};c.lookAt=function(b,a,e,d){var m=void 0,f=void 0,g=void 0,c=void 0,h=void 0,w=void 0,
v=void 0,y=void 0,z=void 0,A=void 0,n=a[0],D=a[1];a=a[2];g=d[0];c=d[1];d=d[2];v=e[0];y=e[1];e=e[2];if(Math.abs(n-v)<l.EPSILON&&Math.abs(D-y)<l.EPSILON&&Math.abs(a-e)<l.EPSILON)return k(b);v=n-v;y=D-y;z=a-e;A=1/Math.sqrt(v*v+y*y+z*z);v*=A;y*=A;z*=A;m=c*z-d*y;f=d*v-g*z;g=g*y-c*v;(A=Math.sqrt(m*m+f*f+g*g))?(A=1/A,m*=A,f*=A,g*=A):g=f=m=0;c=y*g-z*f;h=z*m-v*g;w=v*f-y*m;(A=Math.sqrt(c*c+h*h+w*w))?(A=1/A,c*=A,h*=A,w*=A):w=h=c=0;b[0]=m;b[1]=c;b[2]=v;b[3]=0;b[4]=f;b[5]=h;b[6]=y;b[7]=0;b[8]=g;b[9]=w;b[10]=z;
b[11]=0;b[12]=-(m*n+f*D+g*a);b[13]=-(c*n+h*D+w*a);b[14]=-(v*n+y*D+z*a);b[15]=1;return b};c.targetTo=function(b,a,e,d){var m=a[0],f=a[1];a=a[2];var g=d[0],c=d[1],h=d[2];d=m-e[0];var k=f-e[1];e=a-e[2];var l=d*d+k*k+e*e;0<l&&(l=1/Math.sqrt(l),d*=l,k*=l,e*=l);var y=c*e-h*k,h=h*d-g*e,g=g*k-c*d,l=y*y+h*h+g*g;0<l&&(l=1/Math.sqrt(l),y*=l,h*=l,g*=l);b[0]=y;b[1]=h;b[2]=g;b[3]=0;b[4]=k*g-e*h;b[5]=e*y-d*g;b[6]=d*h-k*y;b[7]=0;b[8]=d;b[9]=k;b[10]=e;b[11]=0;b[12]=m;b[13]=f;b[14]=a;b[15]=1;return b};c.str=function(b){return"mat4("+
b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+b[15]+")"};c.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2)+Math.pow(b[4],2)+Math.pow(b[5],2)+Math.pow(b[6],2)+Math.pow(b[7],2)+Math.pow(b[8],2)+Math.pow(b[9],2)+Math.pow(b[10],2)+Math.pow(b[11],2)+Math.pow(b[12],2)+Math.pow(b[13],2)+Math.pow(b[14],2)+Math.pow(b[15],2))};c.add=function(b,a,
e){b[0]=a[0]+e[0];b[1]=a[1]+e[1];b[2]=a[2]+e[2];b[3]=a[3]+e[3];b[4]=a[4]+e[4];b[5]=a[5]+e[5];b[6]=a[6]+e[6];b[7]=a[7]+e[7];b[8]=a[8]+e[8];b[9]=a[9]+e[9];b[10]=a[10]+e[10];b[11]=a[11]+e[11];b[12]=a[12]+e[12];b[13]=a[13]+e[13];b[14]=a[14]+e[14];b[15]=a[15]+e[15];return b};c.subtract=g;c.multiplyScalar=function(b,a,e){b[0]=a[0]*e;b[1]=a[1]*e;b[2]=a[2]*e;b[3]=a[3]*e;b[4]=a[4]*e;b[5]=a[5]*e;b[6]=a[6]*e;b[7]=a[7]*e;b[8]=a[8]*e;b[9]=a[9]*e;b[10]=a[10]*e;b[11]=a[11]*e;b[12]=a[12]*e;b[13]=a[13]*e;b[14]=a[14]*
e;b[15]=a[15]*e;return b};c.multiplyScalarAndAdd=function(b,a,e,d){b[0]=a[0]+e[0]*d;b[1]=a[1]+e[1]*d;b[2]=a[2]+e[2]*d;b[3]=a[3]+e[3]*d;b[4]=a[4]+e[4]*d;b[5]=a[5]+e[5]*d;b[6]=a[6]+e[6]*d;b[7]=a[7]+e[7]*d;b[8]=a[8]+e[8]*d;b[9]=a[9]+e[9]*d;b[10]=a[10]+e[10]*d;b[11]=a[11]+e[11]*d;b[12]=a[12]+e[12]*d;b[13]=a[13]+e[13]*d;b[14]=a[14]+e[14]*d;b[15]=a[15]+e[15]*d;return b};c.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]&&b[4]===a[4]&&b[5]===a[5]&&b[6]===a[6]&&b[7]===a[7]&&
b[8]===a[8]&&b[9]===a[9]&&b[10]===a[10]&&b[11]===a[11]&&b[12]===a[12]&&b[13]===a[13]&&b[14]===a[14]&&b[15]===a[15]};c.equals=function(b,a){var e=b[0],d=b[1],f=b[2],g=b[3],c=b[4],h=b[5],k=b[6],w=b[7],v=b[8],y=b[9],z=b[10],A=b[11],n=b[12],D=b[13],C=b[14];b=b[15];var E=a[0],H=a[1],G=a[2],I=a[3],K=a[4],M=a[5],p=a[6],N=a[7],S=a[8],O=a[9],V=a[10],Q=a[11],J=a[12],P=a[13],L=a[14];a=a[15];return Math.abs(e-E)<=l.EPSILON*Math.max(1,Math.abs(e),Math.abs(E))&&Math.abs(d-H)<=l.EPSILON*Math.max(1,Math.abs(d),Math.abs(H))&&
Math.abs(f-G)<=l.EPSILON*Math.max(1,Math.abs(f),Math.abs(G))&&Math.abs(g-I)<=l.EPSILON*Math.max(1,Math.abs(g),Math.abs(I))&&Math.abs(c-K)<=l.EPSILON*Math.max(1,Math.abs(c),Math.abs(K))&&Math.abs(h-M)<=l.EPSILON*Math.max(1,Math.abs(h),Math.abs(M))&&Math.abs(k-p)<=l.EPSILON*Math.max(1,Math.abs(k),Math.abs(p))&&Math.abs(w-N)<=l.EPSILON*Math.max(1,Math.abs(w),Math.abs(N))&&Math.abs(v-S)<=l.EPSILON*Math.max(1,Math.abs(v),Math.abs(S))&&Math.abs(y-O)<=l.EPSILON*Math.max(1,Math.abs(y),Math.abs(O))&&Math.abs(z-
V)<=l.EPSILON*Math.max(1,Math.abs(z),Math.abs(V))&&Math.abs(A-Q)<=l.EPSILON*Math.max(1,Math.abs(A),Math.abs(Q))&&Math.abs(n-J)<=l.EPSILON*Math.max(1,Math.abs(n),Math.abs(J))&&Math.abs(D-P)<=l.EPSILON*Math.max(1,Math.abs(D),Math.abs(P))&&Math.abs(C-L)<=l.EPSILON*Math.max(1,Math.abs(C),Math.abs(L))&&Math.abs(b-a)<=l.EPSILON*Math.max(1,Math.abs(b),Math.abs(a))};c.mul=d;c.sub=g})},"esri/views/3d/support/earthUtils":function(){define("require exports ../../../core/wgs84Constants ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../geometry/Point ./mathUtils ./projectionUtils".split(" "),
function(p,c,n,l,k,d,h,g){function f(a,b,e,m){var f,g;a instanceof d&&b instanceof d&&(e=b.longitude,m=b.latitude,g=a.latitude,f=a.longitude);a=h.deg2rad(g);m=h.deg2rad(m);f=h.deg2rad(f);b=h.deg2rad(e);e=Math.sin((a-m)/2);f=Math.sin((f-b)/2);e=2*h.asin(Math.sqrt(e*e+Math.cos(a)*Math.cos(m)*f*f))*c.earthRadius;return Math.round(1E4*e)/1E4}function b(a,b,e){a=e/c.earthRadius;b=h.deg2rad(b);a=Math.sin(a/2);b=Math.cos(b);b=2*h.asin(Math.sqrt(a*a/(b*b)));return h.rad2deg(b)}function a(a,b,e){return h.rad2deg(e/
c.earthRadius)}function e(a,b){a/=15;b||(a=Math.round(a));return a}Object.defineProperty(c,"__esModule",{value:!0});c.earthRadius=n.wgs84Radius;c.halfEarthRadius=c.earthRadius/2;c.halfEarthCircumference=Math.PI*c.earthRadius;c.earthCircumference=2*c.halfEarthCircumference;c.metersPerDegree=c.halfEarthCircumference/180;c.getGreatCircleDistance=f;c.getGreatCircleSpanAt=function(a,b,e){var m=b.spatialReference,g=new d(b.x,a.y,m),c=new d(e.x,a.y,m);b=new d(a.x,b.y,m);a=new d(a.x,e.y,m);return{lon:f(g,
c),lat:f(b,a)}};c.getLonDeltaForDistance=b;c.getLatDeltaForDistance=a;c.getLatLonDeltaForDistance=function(e,d,m){return{lat:a(e,d,m),lon:b(e,d,m)}};c.getMaxCameraAltitude=function(a){a=h.deg2rad(a/2);return(1-Math.sin(a))*c.earthRadius/Math.sin(a)};c.getViewExtentDistance=function(a,b){b=h.deg2rad(b/2);return 2*h.acos((Math.pow(a+c.earthRadius,2)+Math.pow(c.earthRadius,2)-Math.pow((a+c.earthRadius)*Math.cos(b)-Math.sqrt(Math.pow(Math.cos(b)*(a+c.earthRadius),2)-a*a-2*a*c.earthRadius),2))/(2*(a+c.earthRadius)*
c.earthRadius))*c.earthRadius};c.computeCartesianDistance=function(a,b){a=g.wgs84ComparableLonLatToECEF(m,a.longitude,a.latitude,a.z||0);b=g.wgs84ComparableLonLatToECEF(q,b.longitude,b.latitude,b.z||0);b=[b[0]-a[0],b[1]-a[1],b[2]-a[2]];return Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2])};c.longitudeToTimezone=e;c.positionToTimezone=function(a,b){b||(b={hours:0,minutes:0,seconds:0});b.hours=e(a[0],!0);a=b.hours%1;b.hours-=a;b.minutes=60*a;a=b.minutes%1;b.minutes-=a;b.seconds=Math.round(60*a);return b};
c.distanceToIdealHorizon=function(a,b){b=b||c.earthRadius;a=l.vec3.dot(a,a);return Math.sqrt(Math.abs(a-b*b))};var m=k.vec3f64.create(),q=k.vec3f64.create()})},"esri/views/3d/webgl-engine/lib/BufferVectorMath":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});(function(c){c.length=function(c,k){var d=c[k],h=c[k+1];c=c[k+2];return Math.sqrt(d*d+h*h+c*c)};c.normalize=function(c,k){var d=c[k],h=c[k+1],g=c[k+2],d=1/Math.sqrt(d*d+h*h+g*g);c[k]*=d;c[k+
1]*=d;c[k+2]*=d};c.scale=function(c,k,d){c[k]*=d;c[k+1]*=d;c[k+2]*=d};c.add=function(c,k,d,h,g,f){void 0===f&&(f=k);g=g||c;g[f]=c[k]+d[h];g[f+1]=c[k+1]+d[h+1];g[f+2]=c[k+2]+d[h+2]};c.subtract=function(c,k,d,h,g,f){void 0===f&&(f=k);g=g||c;g[f]=c[k]-d[h];g[f+1]=c[k+1]-d[h+1];g[f+2]=c[k+2]-d[h+2]}})(c.Vec3Compact||(c.Vec3Compact={}))})},"esri/views/support/spatialReferenceSupport":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});c.isSpatialReferenceSupported=
function(c,l){return null==c?!1:"2d"===l?!0:"local"===l?!c.isGeographic:c.isWebMercator||c.isWGS84||4490===c.wkid}})},"esri/webscene/ApplicationProperties":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators ../webdoc/applicationProperties/Viewing".split(" "),function(p,c,n,l,k,d,h){return function(g){function f(a){a=g.call(this,a)||this;a.viewing=null;return a}n(f,g);b=f;f.prototype.clone=
function(){return new b({viewing:this.viewing?this.viewing.clone():null})};var b;l([d.property({type:h,json:{write:!0}})],f.prototype,"viewing",void 0);return f=b=l([d.subclass("esri.webscene.ApplicationProperties")],f)}(d.declared(k))})},"esri/webdoc/applicationProperties/Viewing":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ./Search".split(" "),function(p,
c,n,l,k,d,h,g){return function(f){function b(a){a=f.call(this,a)||this;a.search=null;return a}n(b,f);a=b;b.prototype.clone=function(){return new a(d.clone({search:this.search}))};var a;l([h.property({type:g,json:{write:!0}})],b.prototype,"search",void 0);return b=a=l([h.subclass("esri.webdoc.applicationProperties.Viewing")],b)}(h.declared(k))})},"esri/webdoc/applicationProperties/Search":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Collection ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ./SearchLayer".split(" "),
function(p,c,n,l,k,d,h,g,f){var b=k.ofType(f);return function(a){function e(e){e=a.call(this,e)||this;e.addressSearchEnabled=!0;e.enabled=!0;e.hintText=null;e.layers=new b;return e}n(e,a);d=e;e.prototype.readAddressSearchEnabled=function(a,b){return!a};e.prototype.writeAddressSearchEnabled=function(a,b,e){b[e]=!a};e.prototype.clone=function(){return new d(h.clone({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers}))};var d;l([g.property({type:Boolean,
json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder"},default:!0,origins:{"web-scene":{read:!1,write:!1}}}})],e.prototype,"addressSearchEnabled",void 0);l([g.reader("addressSearchEnabled")],e.prototype,"readAddressSearchEnabled",null);l([g.writer("addressSearchEnabled")],e.prototype,"writeAddressSearchEnabled",null);l([g.property({type:Boolean,json:{write:!0,default:!0}})],e.prototype,"enabled",void 0);l([g.property({type:String,json:{write:!0}})],e.prototype,"hintText",void 0);
l([g.property({type:b,json:{write:{enabled:!0,isRequired:!0}}})],e.prototype,"layers",void 0);return e=d=l([g.subclass("esri.webdoc.applicationProperties.Search")],e)}(g.declared(d))})},"esri/webdoc/applicationProperties/SearchLayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ./SearchLayerField".split(" "),function(p,
c,n,l,k,d,h,g,f){return function(b){function a(a){a=b.call(this,a)||this;a.field=null;a.id=null;a.subLayer=null;return a}n(a,b);e=a;a.prototype.clone=function(){return new e(d.clone({field:this.field,id:this.id,subLayer:this.subLayer}))};var e;l([h.property({type:f,json:{write:{enabled:!0,isRequired:!0}}})],a.prototype,"field",void 0);l([h.property({type:String,json:{write:{enabled:!0,isRequired:!0}}})],a.prototype,"id",void 0);l([h.property({type:g.Integer,json:{write:!0}})],a.prototype,"subLayer",
void 0);return a=e=l([h.subclass("esri.webdoc.applicationProperties.SearchLayer")],a)}(h.declared(k))})},"esri/webdoc/applicationProperties/SearchLayerField":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../layers/support/fieldType".split(" "),function(p,c,n,l,k,d,h){return function(g){function f(a){a=g.call(this,a)||this;a.exactMatch=!1;a.name=null;a.type=null;return a}
n(f,g);b=f;f.prototype.clone=function(){return new b({exactMatch:this.exactMatch,type:this.type,name:this.name})};var b;l([d.property({type:Boolean,json:{write:!0}})],f.prototype,"exactMatch",void 0);l([d.property({type:String,json:{write:!0}})],f.prototype,"name",void 0);l([d.enumeration.serializable()(h.kebabDict)],f.prototype,"type",void 0);return f=b=l([d.subclass("esri.webdoc.applicationProperties.SearchLayerField")],f)}(d.declared(k))})},"esri/webscene/Environment":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators ./Lighting ./background/utils".split(" "),
function(p,c,n,l,k,d,h,g,f){var b=function(a,b,d){return{enabled:!d||!d.isPresentation}};return function(a){function e(b){b=a.call(this,b)||this;b.lighting=new g;b.background=null;b.atmosphereEnabled=!0;b.starsEnabled=!0;return b}n(e,a);m=e;e.prototype.clone=function(){return new m(this.cloneConstructProperties())};e.prototype.cloneConstructProperties=function(){return{lighting:g.prototype.clone.call(this.lighting),background:d.clone(this.background),atmosphereEnabled:this.atmosphereEnabled,starsEnabled:this.starsEnabled}};
var m;l([h.property({type:g,json:{write:!0}})],e.prototype,"lighting",void 0);l([h.property(f.backgroundProperty)],e.prototype,"background",void 0);l([h.property({type:Boolean,nonNullable:!0,json:{write:{overridePolicy:b}}})],e.prototype,"atmosphereEnabled",void 0);l([h.property({type:Boolean,nonNullable:!0,json:{write:{overridePolicy:b}}})],e.prototype,"starsEnabled",void 0);return e=m=l([h.subclass("esri.webscene.Environment")],e)}(h.declared(k))})},"esri/webscene/Lighting":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),
function(p,c,n,l,k,d){return function(c){function g(b){b=c.call(this,b)||this;b.date=null;b.directShadowsEnabled=!1;b.displayUTCOffset=null;return b}n(g,c);f=g;g.prototype.readDate=function(b,a){return null!=a.datetime&&new Date(a.datetime)||null};g.prototype.writeDate=function(b,a,e){a[e]=b.getTime()};g.prototype.readDirectShadowsEnabled=function(b,a){return!!a.directShadows};g.prototype.writedirectShadowsEnabled=function(b,a,e){b&&(a[e]=b)};g.prototype.writeDisplayUTCOffset=function(b,a){null!=
b&&(a.displayUTCOffset=b)};g.prototype.clone=function(){return new f(this.cloneConstructProperties())};g.prototype.cloneConstructProperties=function(){var b={directShadowsEnabled:this.directShadowsEnabled,displayUTCOffset:null!=this.displayUTCOffset?this.displayUTCOffset:null};null!=this.date&&(b.date=new Date(this.date.getTime()));return b};var f;l([d.property({type:Date,json:{type:Number,write:{target:"datetime"}}})],g.prototype,"date",void 0);l([d.reader("date",["datetime"])],g.prototype,"readDate",
null);l([d.writer("date")],g.prototype,"writeDate",null);l([d.property({type:Boolean,json:{default:!1,write:{target:"directShadows"}}})],g.prototype,"directShadowsEnabled",void 0);l([d.reader("directShadowsEnabled",["directShadows"])],g.prototype,"readDirectShadowsEnabled",null);l([d.writer("directShadowsEnabled")],g.prototype,"writedirectShadowsEnabled",null);l([d.property({type:Number,json:{write:!0}})],g.prototype,"displayUTCOffset",void 0);l([d.writer("displayUTCOffset")],g.prototype,"writeDisplayUTCOffset",
null);return g=f=l([d.subclass("esri.webscene.Lighting")],g)}(d.declared(k))})},"esri/webscene/background/utils":function(){define(["require","exports","./Background","./ColorBackground"],function(p,c,n,l){Object.defineProperty(c,"__esModule",{value:!0});p={base:n,key:"type",typeMap:{color:l}};c.backgroundProperty={types:p,json:{read:function(c){return function(d,h,g){if(!d)return d;for(var f in c.typeMap)if(d.type===f)return h=new c.typeMap[f],h.read(d,g),h}}(p),write:{overridePolicy:function(c,
d,h){return{enabled:!h||!h.isPresentation}}}}}})},"esri/webscene/background/Background":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(p,c,n,l,k,d,h,g){var f=d.strict()({color:"color"});return function(b){function a(a){return b.call(this)||this}n(a,b);a.prototype.normalizeCtorArgs=function(a){a&&a.type&&
(a=k({},a),delete a.type);return a};a.prototype.clone=function(){};l([g.property({type:f.apiValues,readOnly:!0,json:{type:f.jsonValues,read:!1,write:f.write}})],a.prototype,"type",void 0);return a=l([g.subclass("esri.webscene.background.Background")],a)}(g.declared(h))})},"esri/webscene/background/ColorBackground":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../Color ../../core/accessorSupport/decorators ../../symbols/support/materialUtils ./Background".split(" "),
function(p,c,n,l,k,d,h,g,f){var b=k({},g.colorAndTransparencyProperty,{nonNullable:!0});return function(a){function e(b){b=a.call(this)||this;b.type="color";b.color=new d([0,0,0,1]);return b}n(e,a);m=e;e.prototype.clone=function(){return new m(this.cloneProperties())};e.prototype.cloneProperties=function(){return{color:this.color.clone()}};var m;l([h.enumeration.serializable()({color:"color"})],e.prototype,"type",void 0);l([h.property(b)],e.prototype,"color",void 0);return e=m=l([h.subclass("esri.webscene.background.ColorBackground")],
e)}(h.declared(f))})},"esri/webscene/InitialViewProperties":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../Viewpoint ../core/Accessor ../core/accessorSupport/decorators ../geometry/SpatialReference ./Environment".split(" "),function(p,c,n,l,k,d,h,g,f){return function(b){function a(a){a=b.call(this,a)||this;a.environment=new f;a.spatialReference=null;a.viewpoint=null;return a}n(a,b);e=a;Object.defineProperty(a.prototype,"viewingMode",{set:function(a){this._set("viewingMode",
a)},enumerable:!0,configurable:!0});a.prototype.clone=function(){return new e({environment:this.environment.clone(),spatialReference:this.spatialReference?this.spatialReference.clone():null,viewingMode:this.viewingMode,viewpoint:this.viewpoint?this.viewpoint.clone():null})};var e;l([h.property({type:f,json:{write:{isRequired:!0}}})],a.prototype,"environment",void 0);l([h.property({type:g})],a.prototype,"spatialReference",void 0);l([h.property({type:["local","global"]})],a.prototype,"viewingMode",
null);l([h.property({type:k,json:{write:{isRequired:!0}}})],a.prototype,"viewpoint",void 0);return a=e=l([h.subclass("esri.webscene.InitialViewProperties")],a)}(h.declared(d))})},"esri/webscene/Presentation":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/collectionUtils ../core/JSONSupport ../core/accessorSupport/decorators ./Slide".split(" "),function(p,c,n,l,k,d,h,g,f){var b=k.ofType(f);return function(a){function e(e){e=
a.call(this,e)||this;e.slides=new b;return e}n(e,a);Object.defineProperty(e.prototype,"slides",{set:function(a){a&&(a=a.filter(function(a){return!!a.viewpoint}));this._set("slides",d.referenceSetter(a,this._get("slides"),b))},enumerable:!0,configurable:!0});e.prototype.clone=function(){return new this.constructor({slides:this.slides.clone()})};l([g.property({type:b,nonNullable:!0,json:{write:!0}}),g.cast(d.castForReferenceSetter)],e.prototype,"slides",null);return e=l([g.subclass("esri.webscene.Presentation")],
e)}(g.declared(h))})},"esri/webscene/Slide":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../Basemap ../Viewpoint ../core/asyncUtils ../core/Collection ../core/collectionUtils ../core/JSONSupport ../core/Logger ../core/promiseUtils ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ../core/libs/gl-matrix-2/vec3 ../core/libs/gl-matrix-2/vec3f64 ../layers/Layer ../support/basemapUtils ../views/3d/support/mathUtils ../webdoc/support/Thumbnail ./Environment ./Lighting ./support/Description ./support/SlideGround ./support/SlideVisibleLayer ./support/Title".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z,A,B,D,C,E,H,G){function I(a){if("building-scene"===a.type||"map-image"===a.type)return a.allSublayers}function K(a){if(a=I(a))return a.filter(function(a){return a.visible}).map(function(a){return a.id}).toArray()}function M(a,b){a=b-a;a>V&&(a-=O);a<-V&&(a+=O);return a}var T=0,N=a.ofType(H.default),S=q.getLogger("esri.webscene.Slide"),O=86400,V=43200;return function(m){function c(a){a=m.call(this,a)||this;a._applyToController=null;a.id=Date.now().toString(16)+
"-slide-"+T++;a.title=new G.default;a.description=new C.default;a.thumbnail=new A.default;a.viewpoint=null;a.basemap=null;a.ground=null;a.environment=new B;a.visibleLayers=new N;return a}l(c,m);c.prototype.castTitle=function(a){return"string"===typeof a?new G.default({text:a}):r.ensureType(G.default,a)};c.prototype.castDescription=function(a){return"string"===typeof a?new C.default({text:a}):r.ensureType(C.default,a)};c.prototype.castThumbnail=function(a){return"string"===typeof a?new A.default({url:a}):
r.ensureType(A.default,a)};c.prototype.castBasemap=function(a){return y.ensureType(a)};Object.defineProperty(c.prototype,"visibleLayers",{set:function(a){this._set("visibleLayers",e.referenceSetter(a,this._get("visibleLayers"),N))},enumerable:!0,configurable:!0});c.prototype.castVisibleLayers=function(a){return a&&"function"===typeof a.map?a.map(function(a){if("string"===typeof a)return{id:a};if(a instanceof v){var b=K(a);return{id:a.id,sublayerIds:b}}if(a.id)return{id:a.id,sublayerIds:a.sublayerIds};
S.warn('Invalid visible layer, expected { id }, Layer or "id"');return a}):null};c.prototype.clone=function(){return new this.constructor({id:this.id,title:this.title.clone(),thumbnail:this.thumbnail.clone(),description:this.description&&this.description.clone()||null,viewpoint:this.viewpoint&&this.viewpoint.clone()||null,basemap:this.basemap&&this.basemap.clone()||null,ground:this.ground&&this.ground.clone()||null,visibleLayers:this.visibleLayers.clone(),environment:this.environment&&this.environment.clone()||
null})};c.prototype._updateVisibleLayersFrom=function(a){var b=this,e=[];return u.eachAlways(this._allLayers(a.map).map(function(b){return a.whenLayerView(b).then(function(a){if(a.visible){var d=K(b);e.push(new H.default({id:a.layer.id,sublayerIds:d}))}})}).toArray()).then(function(){b.visibleLayers.removeAll();b.visibleLayers.addMany(e)})};c.prototype.updateFrom=function(a,b){var e=this;b={screenshot:n({format:"jpeg",quality:80,width:120,height:75,disableSlice:!0},b&&b.screenshot)};return a.when(function(){e.viewpoint=
a.viewpoint.clone();e.environment.lighting=D.prototype.clone.apply(a.environment.lighting);e.basemap=a.map.basemap&&a.map.basemap.clone()||null;e.ground=a.map.ground?E.default.fromGround(a.map.ground):null;return e._updateVisibleLayersFrom(a)}).then(function(){return a.takeScreenshot(b.screenshot)}).then(function(a){e.thumbnail=new A.default({url:a.dataUrl});return e})};c.prototype.applyTo=function(a,b){return h(this,void 0,void 0,function(){var e,m,f;return d(this,function(d){this._applyToController&&
this._applyToController.abort();this._applyToController=e=u.createAbortController();u.onAbortOrThrow(b,function(){return e.abort()});m=n({animate:!0},b,{signal:this._applyToController.signal});f=u.createDeferred(function(){e.abort()});this._applyTo(a,m,e).then(f.resolve,f.reject);return[2,f.promise]})})};c.prototype._applyTo=function(a,e,m){return h(this,void 0,void 0,function(){var f,c=this;return d(this,function(g){switch(g.label){case 0:return[4,b.result(function(){return h(c,void 0,void 0,function(){return d(this,
function(b){switch(b.label){case 0:return[4,this._applyBasemap(a,e)];case 1:return b.sent(),this._applyLayerVisibility(a),this._applyGround(a),[4,this._applyViewpoint(a,e)];case 2:return b.sent(),[2]}})})}())];case 1:f=g.sent();this._applyToController===m&&(this._applyToController=null);if(!1===f.ok)throw f.error;return[2,this]}})})};c.prototype._applyBasemap=function(a,b){return h(this,void 0,void 0,function(){var e;return d(this,function(d){switch(d.label){case 0:if(!this.basemap)return[3,5];d.label=
1;case 1:return d.trys.push([1,3,,4]),[4,this.basemap.load(b)];case 2:return d.sent(),[3,4];case 3:e=d.sent();if(u.isAbortError(e))throw e;return[3,4];case 4:a.map.basemap=y.clonePreservingTiledLayers(this.basemap,a.map.basemap),d.label=5;case 5:return[2]}})})};c.prototype._applyGround=function(a){this.ground&&(a.map.ground=this.ground.cloneAndApplyTo(a.map.ground))};c.prototype._allLayers=function(b){var e=new a;this._collectLayers(b,e);this._collectLayers(b.ground,e);return e};c.prototype._collectLayers=
function(a,b){var e=this;a.layers.forEach(function(a){b.add(a);a.layers&&e._collectLayers(a,b)})};c.prototype._applyLayerVisibility=function(a){var b=this;this.visibleLayers&&this._allLayers(a.map).forEach(function(a){var e=b.visibleLayers.find(function(b){return b.id===a.id});a.visible=null!=e;var d=e&&e.sublayerIds,e=I(a);d&&e&&e.forEach(function(a){return a.visible=0<=d.indexOf(a.id)})})};c.prototype._applyViewpoint=function(a,b){return h(this,void 0,void 0,function(){return d(this,function(e){switch(e.label){case 0:if(!this.viewpoint||
b.ignoreViewpoint)return[3,5];this.viewpoint.camera.fov=a.camera.fov;return b.animate?this.get("environment.lighting.date")?[4,this._animateToLighting(a,b)]:[3,2]:[3,4];case 1:return e.sent(),[2];case 2:return a.environment.lighting=this.environment.lighting.clone(),[4,a.goTo(this.viewpoint,b)];case 3:e.sent(),e.label=4;case 4:return a.viewpoint=this.viewpoint,a.environment.lighting=this.environment.lighting.clone(),[3,6];case 5:a.environment.lighting=this.environment.lighting.clone(),e.label=6;case 6:return[2]}})})};
c.prototype._animateToLighting=function(a,b){return h(this,void 0,void 0,function(){var e,m,f,c=this;return d(this,function(d){e=null;"global"===a.viewingMode&&(e=this._animateLightingWithCamera(a));a.environment.lighting.cameraTrackingEnabled=!1;a.environment.lighting.directShadowsEnabled=this.environment.lighting.directShadowsEnabled;null!=this.environment.lighting.displayUTCOffset&&(a.environment.lighting.displayUTCOffset=this.environment.lighting.displayUTCOffset);m=a.goTo(this.viewpoint,b);m.then(function(){a.environment.lighting=
c.environment.lighting.clone()});f=function(){e&&e.remove();a.environment.lighting.cameraTrackingEnabled=!0};m.catch(function(a){f();throw a;}).then(f);return[2,m]})})};c.prototype._getTime=function(a){var b=a.getTime();a=3600*a.getUTCHours()+60*a.getUTCMinutes()+a.getUTCSeconds();return[b,a]};c.prototype._setTime=function(a,b,e){a.setTime(b);a.setUTCHours(e/3600);a.setUTCMinutes(e%3600/60);a.setUTCSeconds(e%3600%60);return a};c.prototype._animateLightingWithCamera=function(a){var b=this,e=this._getTime(new Date(a.environment.lighting.date.toString())),
d=e[0],m=e[1],e=this._getTime(this.environment.lighting.date),f=e[0],c=M(m,e[1]),g=a.renderCoordsHelper,h=w.vec3f64.create();g.toRenderCoords(a.camera.position,h);var k=w.vec3f64.create();g.toRenderCoords(this.viewpoint.camera.position,k);var q=w.vec3f64.create(),l=new Date;return a.watch("camera",function(e){g.toRenderCoords(e.position,q);var r=x.vec3.squaredDistance(h,q),t=x.vec3.squaredDistance(k,q);e=0;0!==r+t&&(e=r/(r+t));r=d+(f-d)*e;e=z.moduloPositive(m+c*e,O);a.environment.lighting.date=b._setTime(l,
r,e)})};c.createFrom=function(a,b){return(new this).updateFrom(a,b)};k([t.property({type:String,json:{write:{isRequired:!0}}})],c.prototype,"id",void 0);k([t.property({type:G.default,json:{default:function(){return new G.default({text:""})},write:{isRequired:!0}}})],c.prototype,"title",void 0);k([t.cast("title")],c.prototype,"castTitle",null);k([t.property({type:C.default,json:{write:{overridePolicy:function(a){return{enabled:!(!a||!a.text)}}}}})],c.prototype,"description",void 0);k([t.cast("description")],
c.prototype,"castDescription",null);k([t.property({type:A.default,json:{default:function(){return new A.default({url:""})},write:{isRequired:!0}}})],c.prototype,"thumbnail",void 0);k([t.cast("thumbnail")],c.prototype,"castThumbnail",null);k([t.property({type:f,nonNullable:!0,json:{write:{isRequired:!0}}})],c.prototype,"viewpoint",void 0);k([t.property({type:g,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],c.prototype,"basemap",void 0);k([t.cast("basemap")],c.prototype,"castBasemap",null);
k([t.property({type:E.default,json:{write:!0}})],c.prototype,"ground",void 0);k([t.property({type:N,json:{write:{isRequired:!0}}})],c.prototype,"visibleLayers",null);k([t.cast("visibleLayers")],c.prototype,"castVisibleLayers",null);k([t.property({type:B,json:{write:!0}})],c.prototype,"environment",void 0);return c=k([t.subclass("esri.webscene.Slide")],c)}(t.declared(m))})},"esri/webdoc/support/Thumbnail":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(p,c,n,l,k,d){Object.defineProperty(c,"__esModule",{value:!0});p=function(c){function g(){var b=null!==c&&c.apply(this,arguments)||this;b.url="";return b}n(g,c);f=g;g.prototype.clone=function(){return new f({url:this.url})};var f;l([d.property({type:String,json:{write:{isRequired:!0}}})],g.prototype,"url",void 0);return g=f=l([d.subclass("esri.webdoc.support.Thumbnail")],g)}(d.declared(k));c.default=p})},"esri/webscene/support/Description":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(p,c,n,l,k,d){Object.defineProperty(c,"__esModule",{value:!0});p=function(c){function g(){var b=null!==c&&c.apply(this,arguments)||this;b.text="";return b}n(g,c);f=g;g.prototype.clone=function(){return new f({text:this.text})};var f;l([d.property({type:String,json:{write:!0}})],g.prototype,"text",void 0);return g=f=l([d.subclass("esri.webscene.support.Description")],g)}(d.declared(k));c.default=p})},"esri/webscene/support/SlideGround":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Ground ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../webdoc/support/opacityUtils".split(" "),
function(p,c,n,l,k,d,h,g,f){Object.defineProperty(c,"__esModule",{value:!0});p=function(b){function a(){var a=null!==b&&b.apply(this,arguments)||this;a.opacity=null;return a}n(a,b);e=a;a.prototype.clone=function(){return new e({opacity:this.opacity})};a.prototype.cloneAndApplyTo=function(a){if(null==this.opacity)return a;a=null!=a?a.clone():new k;a.opacity=this.opacity;return a};a.fromGround=function(a){return new e({opacity:a.opacity})};var e;l([h.property({type:Number,json:{type:g.Integer,read:{reader:f.transparencyToOpacity,
source:"transparency"},write:{writer:function(a,b){b.transparency=f.opacityToTransparency(a)},target:"transparency"}}})],a.prototype,"opacity",void 0);return a=e=l([h.subclass("esri.webscene.support.SlideGround")],a)}(h.declared(d));c.default=p})},"esri/webscene/support/SlideVisibleLayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),
function(p,c,n,l,k,d,h,g){Object.defineProperty(c,"__esModule",{value:!0});p=function(f){function b(a){a=f.call(this)||this;a.id="";a.sublayerIds=null;return a}n(b,f);a=b;b.prototype.clone=function(){return new a({id:this.id,sublayerIds:d.clone(this.sublayerIds)})};var a;l([h.property({type:String,json:{write:!0}})],b.prototype,"id",void 0);l([h.property({type:[g.Integer],json:{read:{source:"subLayerIds"},write:{target:"subLayerIds"}}})],b.prototype,"sublayerIds",void 0);return b=a=l([h.subclass("esri.webscene.support.SlideVisibleLayer")],
b)}(h.declared(k));c.SlideVisibleLayer=p;c.default=p})},"esri/webscene/support/Title":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(p,c,n,l,k,d){Object.defineProperty(c,"__esModule",{value:!0});p=function(c){function g(){var b=null!==c&&c.apply(this,arguments)||this;b.text="";return b}n(g,c);f=g;g.prototype.clone=function(){return new f({text:this.text})};
var f;l([d.property({type:String,json:{write:{isRequired:!0}}})],g.prototype,"text",void 0);return g=f=l([d.subclass("esri.webscene.support.Title")],g)}(d.declared(k));c.default=p})},"esri/webscene/Version":function(){define(["require","exports","../core/tsSupport/extendsHelper","../core/Version"],function(p,c,n,l){Object.defineProperty(c,"__esModule",{value:!0});p=function(c){function d(d,g){return c.call(this,d,g,"webscene")||this}n(d,c);Object.defineProperty(d.prototype,"supportsGround",{get:function(){return this.since(1,
8)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"supportsVisibleElevationLayersInSlides",{get:function(){return this.lessThan(1,8)},enumerable:!0,configurable:!0});return d}(l.Version);c.Version=p;c.default=p})},"esri/core/Version":function(){define(["require","exports","./Error"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(c,d,h){void 0===h&&(h="");this.major=c;this.minor=d;this._context=h}c.prototype.lessThan=function(c,d){return this.major<
c||c===this.major&&this.minor<d};c.prototype.since=function(c,d){return!this.lessThan(c,d)};c.prototype.validate=function(c){if(this.major!==c.major)throw new n((this._context&&this._context+":")+"unsupported-version","Required major "+(this._context&&this._context+" ")+"version is '"+this.major+"', but got '${version.major}.${version.minor}'",{version:c});};c.prototype.clone=function(){return new c(this.major,this.minor,this._context)};c.parse=function(k,d){void 0===d&&(d="");var h=k.split("."),
g=h[0],h=h[1],f=/^\s*\d+\s*$/;if(!g||!g.match||!g.match(f))throw new n((d&&d+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:k});if(!h||!h.match||!h.match(f))throw new n((d&&d+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:k});k=parseInt(g,10);g=parseInt(h,10);return new c(k,g,d)};return c}();c.Version=p})},"esri/views/SceneView":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../core/tsSupport/assignHelper ../Camera ../geometry ../Graphic ../Ground ../Viewpoint ../core/asyncUtils ../core/Collection ../core/domUtils ../core/Error ../core/events ../core/Handles ../core/has ../core/Logger ../core/maybe ../core/promiseUtils ../core/scheduling ../core/watchUtils ./../core/screenUtils ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ../core/libs/gl-matrix-2/vec3f64 ../geometry/HeightModelInfo ../geometry/support/aaBoundingRect ../geometry/support/scaleUtils ../geometry/support/webMercatorUtils ./BreakpointsOwner ./DOMContainer ./GroundView ./PopupView ./View ./ViewAnimation ./3d/constraints/Constraints ./3d/environment/SceneViewEnvironment ./3d/environment/SceneViewEnvironmentManager ./3d/input/SceneInputManager ./3d/layers/graphics/Deconflictor ./3d/layers/graphics/Labeler ./3d/layers/support/FeatureTileTree3D ./3d/layers/support/FeatureTileTree3DDebugger ./3d/layers/support/MemoryManagedLayerView ./3d/state/ViewState ./3d/state/ViewStateManager ./3d/state/helpers/SceneIntersectionHelper ./3d/support/CombinedElevationProvider ./3d/support/debugFlags ./3d/support/DisplayQualityProfile ./3d/support/geometryUtils ./3d/support/HighlightOptions ./3d/support/index ./3d/support/MapCoordsHelper ./3d/support/projectionUtils ./3d/support/PropertiesPool ./3d/support/QualitySettings ./3d/support/RenderCoordsHelper ./3d/support/SharedSymbolResources ./3d/support/geometryUtils/boundedPlane ./3d/support/pointsOfInterest/PointsOfInterest ./3d/terrain/TerrainSurface ./3d/terrain/terrainUtils ./3d/webgl-engine/Stage ./3d/webgl-engine/lib/Intersector ./3d/webgl-engine/lib/intersectorUtils ./support/screenshotUtils ./support/spatialReferenceSupport ./support/WebGLRequirements ./ui/3d/DefaultUI3D ../webscene/Environment".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z,A,B,D,C,E,H,G,I,K,M,T,N,S,O,V,Q,J,P,L,F,Y,X,R,Z,da,ja,ba,ha,W,ea,ga,ma,qa,na,pa,sa,ia,va,Aa,za,xa,Ba,Fa,Ea,Ka,Ga,Ha,fa,Ca,La,oa,Ia){function Da(a,b){a.layerUids||(a.layerUids=new Set);a.layerUids.add(b)}function wa(a,b){a.graphicUids||(a.graphicUids=new Set);a.graphicUids.add(b)}function Ja(a){return 1099511627776<=a?Math.round(a/1099511627776)+"TB":1073741824<=a?Math.round(a/1073741824)+"GB":1048576<=a?Math.round(a/1048576)+"MB":1024<=a?Math.round(a/
1024)+"KB":a.toFixed(0)+"B"}var ca=v.getLogger("esri.views.SceneView");c=function(c){function h(a){var b=c.call(this)||this;b._clippingArea=null;b._userClippingArea=null;b._initialDefaultSpatialReference=null;b._defaults={};b._externallySet={environment:!1};b._handles=new x;b._createGraphicsViewController=null;b._updateDrawingOrderHandle=null;b.onViewExtentUpdateHandle=null;b._resolveWhenReady=[];b.propertiesPool=new ia.default({slicePlane:xa.BoundedPlaneClass},b);b._resourceController=na.newResourceController(b);
b._defaultToMapOptions={include:new Set};b._defaultHitTestOptions={exclude:new Set};b.deconflictor=new Y.Deconflictor({view:b});b.labeler=new X.Labeler({view:b});b.renderSpatialReference=null;b.sharedSymbolResources=null;b.basemapTerrain=null;b.elevationProvider=null;b.camera=null;b.canvas=null;b.center=null;b.constraints=new J.default;b.extent=null;b.fullOpacity=1;b.graphicsView=null;b.groundView=null;b.map=null;b.screenSizePerspectiveEnabled=!0;b.state=null;b.scale=null;b.spatialReference=null;
b.isHeightModelInfoRequired=!0;b.alphaCompositingEnabled=!1;b.supersampleScreenhotsEnabled=!0;b.type="3d";b.ui=new oa;b.updating=!1;b.updatingPercentage=0;b.viewpoint=null;b.zoom=null;b.highlightOptions=new qa;a&&a.environment||(b._defaults.environment=new P,b.environment=b._defaults.environment);a=function(){b.notifyChange("dataExtent");b._evaluateUpdating()};b._handles.add([B.when(b,"ready",function(a,e){return b._viewReadyHandler(e)}),B.on(b,"map.allLayers","change",a,a,a,!0),b.allLayerViews.on("change",
function(a){return b._updateUpdatingMonitors(a)}),b.watch("map",function(a){a&&a.load&&a.load()})]);b.inputManager=new F({view:b});b.stateManager=new ba.ViewStateManager({view:b,updateDevicePixelRatio:function(){return b.notifyChange("pixelRatio")}});return b}n(h,c);h.prototype.initialize=function(){var a=this;this.groundView=new S({view:this});this.environmentManager=new L.default({view:this});this._updateUpdatingMonitors({added:this.allLayerViews.toArray(),removed:[]});var b=function(){return a._updateDefaultToMapOptions()};
this._handles.add([this.watch("stationary",function(){return a._evaluateUpdating()}),this.layerViewManager.watch("updating",function(){return a._evaluateUpdating()}),this.resourceController.memoryController.events.on("updating-changed",function(){return a._evaluateUpdating()}),this.labeler.watch("updating",function(){return a._evaluateUpdating()}),this.deconflictor.watch("updating",function(){return a._evaluateUpdating()}),this.environmentManager.watch("updating",function(){return a._evaluateUpdating()}),
this.inputManager.watch("hasPendingInputs",function(){return a._evaluateUpdating()}),B.whenNot(this,"ready",function(b,e){return a._viewUnreadyHandler(e)}),B.init(this.qualitySettings,"memoryLimit",function(b){a.resourceController&&(a.resourceController.memoryController.maxMemory=b)}),B.init(this.qualitySettings,"additionalCacheMemory",function(b){a.resourceController&&(a.resourceController.memoryController.additionalCacheMemory=b)}),B.init(this.qualitySettings,"frameRate",function(a){return A.setFrameDuration(0<
a?1E3/Math.ceil(a):0)}),B.init(ea,"SCENEVIEW_LOCKING_LOG",function(b){return a.defaultsFromMap.logDebugInformation=b}),B.on(this,"map.allLayers","after-changes",b,b,b),B.init(this,"map.ground",b,!0),B.init(this,"map.ground.opacity",function(){return a._updateDefaultHitTestOptions()},!0)])};h.prototype.destroy=function(){this.activeTool=null;this.layerViewManager.clear();this.stateManager.deinit();this.groundView.destroy();this.groundView=null;this.destroyViewData();this._disposeSurface();this._disposeGraphicsView();
this.sharedSymbolResources&&(this.sharedSymbolResources.destroy(),this.sharedSymbolResources=null);this._lostWebGLContextHandle&&(this._lostWebGLContextHandle.remove(),this._lostWebGLContextHandle=null);this._stage&&(this._stage.dispose(),this._stage=null,this._handles.remove("stage"));this.state&&this.state.destroy();this._set("canvas",null);this.labeler.destroy();this.labeler=null;this.deconflictor.destroy();this.deconflictor=null;this._resourceController.destroy();this._resourceController=null;
this.environmentManager.destroy();this._set("environmentManager",null);this.stateManager.destroy();this._set("stateManager",null);this.inputManager.destroy();this._set("inputManager",null);this._handles.destroy();this.propertiesPool.destroy();this.propertiesPool=null};Object.defineProperty(h.prototype,"clippingArea",{get:function(){if("global"===this.viewingMode)return null;if(this._userClippingArea)return this._userClippingArea;var a=this.get("map.clippingEnabled"),b=this.get("map.clippingArea");
if(!a||!b)return this._clippingArea=null;if(!(b instanceof f.Extent))return ca.error("#clippingArea","only clippingArea geometries of type Extent are supported"),this._clippingArea;if(!M.canProject(b.spatialReference,this.spatialReference))return ca.error("#clippingArea","setting clippingArea with incompatible SpatialReference"),this._clippingArea;b=M.project(b,this.spatialReference);return this._clippingArea&&b&&this._clippingArea.equals(b)?this._clippingArea:this._clippingArea=b},set:function(a){this.ready&&
"global"===this.viewingMode&&a?ca.error("#clippingArea\x3d","Clipping area is only supported in local viewingMode"):(this._userClippingArea=a,this.notifyChange("clippingArea"))},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"dataExtent",{get:function(){var a=[],b=this.spatialReference||f.SpatialReference.WGS84,e=this.clippingArea;e&&(e=M.project(e,b));var d=function(d){d&&(d=M.project(d,b))&&(e&&(d=d.intersection(e)),d&&a.push(d))},m=this._get("basemapTerrain");m&&m.spatialReference&&
d(new f.Extent({xmin:m.extent[0],ymin:m.extent[1],zmin:0,xmax:m.extent[2],ymax:m.extent[3],zmax:0,spatialReference:m.spatialReference}));this.map&&this.map.allLayers.forEach(function(a){return d(a.fullExtent)});return 0<a.length?(m=a.reduce(function(a,b){return a.union(b)}),m.hasZ?(m.zmin=Math.min(0,m.zmin),m.zmax=Math.max(0,m.zmax)):(m.zmin=0,m.zmax=0),m):new f.Extent({xmin:0,ymin:0,zmin:0,xmax:0,ymax:0,zmax:0,spatialReference:b})},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,
"environment",{set:function(a){a!==this._defaults.environment&&(this._externallySet.environment=!0);this._set("environment",a)},enumerable:!0,configurable:!0});h.prototype.castEnvironment=function(a){return a?a instanceof P?a:a instanceof Ia?P.fromWebsceneEnvironment(a):E.ensureType(P,a):new P};Object.defineProperty(h.prototype,"pixelRatio",{get:function(){return Math.min(window.devicePixelRatio,this.maximumPixelRatio)},set:function(a){y.isSome(a)?this._override("pixelRatio",a):this._clearOverride("pixelRatio")},
enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"maximumPixelRatio",{get:function(){var a=Infinity,b=this.qualitySettings,e=b.maximumPixelRatio,b=b.maximumRenderResolution;null!=e&&(a=Math.min(a,e));null!=b&&(a=Math.min(a,b/Math.max(this.width,this.height)));return a},set:function(a){y.isSome(a)?this._override("maximumPixelRatio",a):this._clearOverride("maximumPixelRatio")},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"groundExtent",{get:function(){var a=this._get("basemapTerrain");
if(a&&a.spatialReference){var b=a.extent;return new f.Extent({xmin:b[0],ymin:b[1],xmax:b[2],ymax:b[3],spatialReference:a.spatialReference})}return new f.Extent({spatialReference:this.spatialReference||f.SpatialReference.WGS84})},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"initialExtentRequired",{get:function(){return this.stateManager&&!this.stateManager.hasInitialView},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"interacting",{get:function(){return!!this.state&&
this.state.interacting},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"qualityProfile",{get:function(){return this._get("qualityProfile")||ga.getDefaultProfile()},set:function(a){ga.isValidProfile(a)&&(ga.apply(a,this.qualitySettings),this._set("qualityProfile",a))},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"slicePlane",{set:function(a){this._stage.renderView.setRenderParameters({slicePlane:a});if(a){var b=this.propertiesPool.get("slicePlane");ma.boundedPlane.copy(a,
b);this._set("slicePlane",b)}else this._set("slicePlane",null)},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"resolution",{get:function(){return null!=this.spatialReference?K.getResolutionForScale(this.scale,this.spatialReference):0},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"heightModelInfo",{get:function(){var a=this.getDefaultHeightModelInfo();return null!=a?G.deriveUnitFromSR(a,this.spatialReference):null},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,
"viewingMode",{get:function(){var a=this.get("map.initialViewProperties.viewingMode"),b=this.spatialReference;a||(a=!b||Ca.isSpatialReferenceSupported(b,"global")?"global":"local");return a},set:function(a){this.internallyReady?ca.error("#viewingMode","viewingMode cannot be set once view is ready"):0<=["local","global"].indexOf(a)?this._override("viewingMode",a):void 0===a&&this._clearOverride("viewingMode")},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"resourceController",{get:function(){return this._resourceController},
enumerable:!0,configurable:!0});h.prototype.on=function(a,b,e){var d=this.inputManager.viewEvents.register(a,b,e);return d?d:this.inherited(arguments)};h.prototype.hasEventListener=function(a){return this.inherited(arguments)||this.inputManager&&this.inputManager.viewEvents.hasHandler(a)};h.prototype.toMap=function(a,b){if(!this.ready)return ca.error("#toMap()","Scene view cannot be used before it is ready"),null;b=b?this._externalToInternalIntersectOptions(b):this._defaultToMapOptions;var e=y.isSome(b.graphics)&&
(y.isSome(b.graphics.include)||y.isSome(b.graphics.exclude));b.allEnabled=e;a=D.isSupportedScreenPointEvent(a)?D.createScreenPointFromSupportedEvent(this,a):a;a=D.screenPointObjectToArray(a);var d=b.include&&!b.include.has(Ha.TERRAIN_ID)||b.exclude&&b.exclude.has(Ha.TERRAIN_ID);a=this.sceneIntersectionHelper.intersectIntersectorScreen(a,null,b,!0,d).results;if(e){e=0;for(a=a.all;e<a.length;e++){var d=a[e],m=d.toGraphic(this);if(y.isNone(m)||this._testGraphicUidFilter(b.graphics,m))return this._intersectResultToMapPoint(d)}return null}return this._intersectResultToMapPoint(a.min)};
h.prototype.toScreen=function(a){if(!this.ready)return ca.error("#toScreen()","Scene view cannot be used before it is ready"),null;var b=null==a.z&&this.basemapTerrain.getElevation(a)||0;sa.pointToVector(a,ya,this.renderSpatialReference,b);return this.engineToScreen(ya)};h.prototype.pixelSizeAt=function(a,b){if(!this.ready)return ca.error("#pixelSizeAt()","Scene view cannot be used before it is ready"),null;if("number"===typeof a){if(a=this.sceneIntersectionHelper.intersectIntersectorScreen(D.createScreenPointArray(a,
b)).results.min,!a.getIntersectionPoint(ya))return 0}else if(a instanceof f.Point)sa.pointToVector(a,ya,this.renderSpatialReference);else if(a=this.sceneIntersectionHelper.intersectIntersectorScreen(D.createScreenPointArray(a.x,a.y)).results.min,!a.getIntersectionPoint(ya))return 0;return this.state.camera.computeScreenPixelSizeAt(ya)};h.prototype.hitTest=function(a,b){if(!this.ready)return ca.error("#hitTest()","Scene view cannot be used before it is ready"),null;a=D.isSupportedScreenPointEvent(a)?
D.createScreenPointFromSupportedEvent(this,a):a;var e=D.createScreenPointArray(a.x,a.y),d=b?this._externalToInternalIntersectOptions(b):this._defaultHitTestOptions;d.allEnabled=!0;d.terrainLocationFeedbackEnabled=!0;b=this.sceneIntersectionHelper.intersectIntersectorScreen(e,null,d,!0,!0);e=this._intersectResultsToHits(b.results.all,d.graphics);d=b.results.terrain;a={screenPoint:a,results:e,ground:{mapPoint:this._intersectResultToMapPoint(d),distance:d.hasIntersectionPoint?d.distanceInRenderSpace:
0}};ea.SCENEVIEW_HITTEST_RETURN_INTERSECTOR&&(a.intersector=b);return z.resolve(a)};h.prototype.popupHitTest=function(a){return this.hitTest(a).then(function(b){for(var e=[],d=b.results.length?b.results[0].distance:0,m=0,f=b.results;m<f.length;m++){var c=f[m];if(c.distance!==d)break;e.push(c)}m=null;if(0===e.length||1E-5>Math.abs(d-b.ground.distance))m=b.ground.mapPoint;return{results:e,screenPoint:a,mapPoint:m}})};h.prototype.goTo=function(a,b){return m.safeCast(this.stateManager.goTo(a,b))};h.prototype.takeScreenshot=
function(a){var b=this;return this.whenReady().then(function(){var e=fa.toRenderSettings(a,b);e.pixelRatio/=b.pixelRatio;return b._stage.renderView.takeScreenshot(fa.screenshotSuperSampleSettings(e,b.supersampleScreenhotsEnabled))})};h.prototype.forceDOMReadyCycle=function(){this.forceReadyCycle()};h.prototype.getDefaultSpatialReference=function(){return this.get("map.initialViewProperties.spatialReference")||this.get("defaultsFromMap.spatialReference")||this.get("defaultsFromMap.isSpatialReferenceDone")&&
this._initialDefaultSpatialReference||null};h.prototype.validate=function(){var a=La.check();w("safari")&&9>w("safari")&&(a=new t("sceneview:browser-not-supported","This browser is not supported by SceneView (Safari \x3c 9)",{type:"safari",requiredVersion:9,detectedVersion:w("safari")}));return a?(ca.warn("#validate()",a.message),z.reject(a)):z.resolve()};h.prototype.isSpatialReferenceSupported=function(a,b,e){var d=a.isGeographic,m=a.isWebMercator,f=Ca.isSpatialReferenceSupported(a,"global"),c="local"===
this.viewingMode,g=!(!this._isOverridden("viewingMode")&&!this.get("map.initialViewProperties.viewingMode"));if(g){if(c&&d)return e&&e("Layer "+b.id+" is ignored because it is GCS and viewing mode is local"),!1;if(!c&&!f)return e&&e("Layer "+b.id+" is ignored because its spatial reference is not supported in global viewing mode"),!1}else if(d&&!f)return e&&e("Layer "+b.id+" is ignored because its spatial reference is geographic but unsupported"),!1;if(b)if(Ea.isTiledLayer(b)){if(d=void 0,g?g=Ea.getTiledLayerInfo(b,
a,this.viewingMode):(g=Ea.getTiledLayerInfo(b,a,"global"),null==g.tileInfo&&(g=Ea.getTiledLayerInfo(b,a,"local"))),d=null!=g.tileInfo,!d)return e&&e("Layer "+b.id+" is ignored because it is tiled but\n            its tiling scheme is not supported or compatible with the viewing mode"),!1}else if((a.isWGS84||m)&&!c)return null==this._initialDefaultSpatialReference&&(this._initialDefaultSpatialReference=a),g||this.internallyReady||(this.viewingMode="global",e&&e("Viewing mode locked to global due to reprojectable layer "+
b.id)),e&&e("Layer "+b.id+" is ignored because it supports server-side reprojection"),!1;return!0};h.prototype.whenReady=function(){var a=this;return z.create(function(b){a.internallyReady?b(a):a._resolveWhenReady.push(b)})};h.prototype.computeMapPointFromVec3d=function(a,b){var e=this.spatialReference||f.SpatialReference.WGS84;sa.vectorToVector(a,this.renderSpatialReference,a,e)||(e=f.SpatialReference.WGS84,sa.vectorToVector(a,this.renderSpatialReference,a,e));b?(b.x=a[0],b.y=a[1],b.z=a[2],b.spatialReference=
e):b=new f.Point(a,e);return b};h.prototype.engineToScreen=function(a,b){var e=D.createRenderScreenPointArray3();this.state.camera.projectPoint(a,e);a=D.screenPointArrayToObject(e);return D.renderToScreen(this,a,b)};h.prototype.flushDisplayModifications=function(){this._stage.processDirty()};h.prototype.getDrawingOrder=function(a){return this.allLayerViews.findIndex(function(b){return b.layer&&b.layer.uid===a})};h.prototype.getViewForGraphic=function(a){return a.layer===this.graphics?this.graphicsView:
a.layer?this.allLayerViews.find(function(b){return b.layer===a.layer}):null};h.prototype.graphicChanged=function(a){y.isSome(this.graphicsView)&&this.graphicsView.graphicChanged(a)};h.prototype.whenViewForGraphic=function(a){var b=this;return a.layer===this?B.whenOnce(this,"graphicsView").then(function(){return b.graphicsView}):a.layer?this.whenLayerView(a.layer):z.reject()};h.prototype.getStats=function(){var a=this.resourceController.memoryController,b=this.resourceController.scheduler,e={Memory:a.maxMemory.toFixed(0)+
"MB","Memory Used":Math.round(100*a.usedMemory)+"%",Quality:Math.round(100*a.memoryFactor)+"%",Load:b.load.toFixed(1)};this.basemapTerrain&&(e.Terrain=Ja(this.basemapTerrain.getUsedMemory()));this.allLayerViews.items.forEach(function(a){da.isMemoryManagedLayerView(a)&&(e[a.layer.title]=Ja(a.getUsedMemory()))});if(a=this._stage&&this._stage.renderView&&this._stage.renderView.edgeView)a=a.getUsedMemory(),1024<a&&(e.Edges=Ja(a));return e};h.prototype._intersectResultToMapPoint=function(a,b){if(a.getIntersectionPoint(ya)){b=
this.computeMapPointFromVec3d(ya,b);var e=this.basemapTerrain;"TerrainRenderer"===a.intersector&&e&&(b.z=e.getElevation(b)||0);return b}return null};h.prototype._intersectResultsToHits=function(a,b){for(var e=[],d=null,m=0;m<a.length;m++){var f=a[m],c=f.toOwner(this);if(y.isSome(c)&&(c===this.map.ground||"type"in c&&"integrated-mesh"===c.type))break;c=f.toGraphic(this);if(y.isSome(c)){y.isNone(d)&&m!==a.length-1&&(d=new Set);if(y.isSome(d)){var g=this._getGraphicFilterUid(c);if(d.has(g))continue;
d.add(g)}this._testGraphicUidFilter(b,c)&&(g=this._intersectResultToMapPoint(f),e.push({graphic:c,mapPoint:g,distance:f.distanceInRenderSpace}))}}return e};h.prototype._getGraphicFilterUid=function(a){if(a.layer&&"objectIdField"in a.layer){var b=a.attributes[a.layer.objectIdField];if(b)return"o-"+a.layer.id+"-"+b}return"u-"+a.uid};h.prototype._testGraphicUidFilter=function(a,b){b=this._getGraphicFilterUid(b);return y.isNone(a)||(y.isNone(a.include)||a.include.has(b))&&(y.isNone(a.exclude)||!a.exclude.has(b))};
h.prototype._externalToInternalRenderItems=function(e,d,m){var f=this;void 0===m&&(m={layerUids:null,graphicUids:null});if(!e)return m;e instanceof b?(wa(m,this._getGraphicFilterUid(e)),0===d&&(y.isSome(this.graphicsView)&&e.layer===this.graphicsView?Da(m,this.graphicsView.mockLayerId):e.layer&&Da(m,e.layer.uid))):"forEach"in e?e.forEach(function(b){Array.isArray(b)?f._externalToInternalRenderItems(b,d,m):q.isCollection(b)?b===f.graphics&&y.isSome(f.graphicsView)?Da(m,f.graphicsView.mockLayerId):
f._externalToInternalRenderItems(b,d,m):b instanceof a?b===f.map.ground&&Da(m,Ha.TERRAIN_ID):f._externalToInternalRenderItems(b,d,m)}):Da(m,e.uid);return m};h.prototype._externalToInternalIntersectOptions=function(a){var b=this._externalToInternalRenderItems(a.include,0);a=this._externalToInternalRenderItems(a.exclude,1);return{include:b.layerUids,exclude:a.layerUids,graphics:{include:b.graphicUids,exclude:a.graphicUids}}};h.prototype._viewingModeToManifold=function(a){switch(a){case "global":return"spherical";
case "local":return"planar"}};h.prototype._initBasemapTerrain=function(a){var b=this;this._disposeBasemapTerrain();this._set("basemapTerrain",new Fa(this,this._viewingModeToManifold(a)));this._set("elevationProvider",new W({view:this}));this.elevationProvider.register("ground",this.basemapTerrain);this._handles.add([B.init(this,"map.ground.opacity",function(a){return b.basemapTerrain.baseOpacity=null==a?1:a},!0),B.init(this,"map.ground.surfaceColor",function(a){b.basemapTerrain.backgroundColor=a})],
"basemapTerrain")};h.prototype._initGlobe=function(a){var b=this;this._initCoordinateSystem();this._initState();this._initBasemapTerrain(a);this._set("pointsOfInterest",new Ba.default({view:this}));this._set("featureTiles",new R.default({renderCoordsHelper:this.renderCoordsHelper,cameraOnSurface:this.pointsOfInterest.cameraOnSurface,focus:this.pointsOfInterest.focus,tilingSchemeOwner:this.basemapTerrain,viewState:this.state,scheduler:this._resourceController.scheduler}));this._handles.add([this.featureTiles.watch("updating",
function(){return b._evaluateUpdating()}),this.pointsOfInterest.watch("updating",function(){return b._evaluateUpdating()})]);this._handles.add(B.init(ea,"FEATURE_TILE_TREE_SHOW_TILES",function(a){a&&b.featureTiles&&!b.featureTilesDebugger?b.featureTilesDebugger=new Z.FeatureTileTree3DDebugger(b):!a&&b.featureTilesDebugger&&(b.featureTilesDebugger.destroy(),b.featureTilesDebugger=null)}),"feature-tiles");this._handles.add(B.init(this,["clippingArea","basemapTerrain.extent"],function(){var a=b.basemapTerrain&&
b.basemapTerrain.extent;b.clippingArea||a?a&&b.basemapTerrain.spatialReference?(a=I.toExtent(b.basemapTerrain.extent,b.basemapTerrain.spatialReference),b.featureTiles.filterExtent=b.clippingArea?a.intersection(b.clippingArea):a):b.featureTiles.filterExtent=b.clippingArea:b.featureTiles.filterExtent=null},!0),"feature-tiles");this.stateManager.init()};h.prototype._initCoordinateSystem=function(){var a=this;if(this.spatialReference){var b=this.spatialReference;this.mapCoordsHelper&&this.mapCoordsHelper.spatialReference.equals(b)||
this._set("mapCoordsHelper",new pa.default(this.map,b));var e="global"===this.viewingMode,b=e?sa.SphericalECEFSpatialReference:b;b!==this.renderSpatialReference&&(this.renderSpatialReference=b,this._set("renderCoordsHelper",Aa.RenderCoordsHelper.createMode(this.viewingMode,b)),e||this._handles.add(this.watch("basemapTerrain.extent",function(b){if(0!==b[0]||0!==b[1]||0!==b[2]||0!==b[3])a.renderCoordsHelper.extent=b},!0),"render-coords-helper"),this.sceneIntersectionHelper&&this.sceneIntersectionHelper.setTolerance(Ga.DEFAULT_TOLERANCE/
this.renderCoordsHelper.unitInMeters))}else this._set("mapCoordsHelper",null),this._set("renderCoordsHelper",null),this.renderSpatialReference=null};h.prototype._evaluateUpdating=function(){var a=0,b=0,e=!1;this.allLayerViews.forEach(function(d){d.isFulfilled()?d.updating&&(e=!0,d="updatingPercentage"in d?d.updatingPercentage:null,null!=d&&(++b,a+=d)):e=!0});e=!!(e||!this.stationary||this._createGraphicsViewController||y.isSome(this.graphicsView)&&this.graphicsView.updating||this.layerViewManager&&
this.layerViewManager.updating||this._resourceController&&this._resourceController.updating||this.featureTiles&&this.featureTiles.updating||this.pointsOfInterest&&this.pointsOfInterest.updating||this.labeler&&this.labeler.updating||this.deconflictor&&this.deconflictor.updating||this.environmentManager&&this.environmentManager.updating||this.inputManager&&this.inputManager.hasPendingInputs||this.map&&this.map.allLayers&&this.map.allLayers.some(function(a){return!a.isFulfilled()}));e!==this.updating&&
this._set("updating",e);a=0!==b?a/b:e?100:0;this.updatingPercentage!==a&&this._set("updatingPercentage",a)};h.prototype._updateUpdatingMonitors=function(a){for(var b=this,e=0,d=a.removed;e<d.length;e++){var m=d[e];this._handles.remove(m.uid)}e=0;for(a=a.added;e<a.length;e++)m=a[e],m.destroyed||this._handles.add([m.watch(["updating","updatingPercentage"],function(){return b._evaluateUpdating()})],m.uid);this._evaluateUpdating()};h.prototype._disposeSurface=function(){var a=function(a){a&&a.remove();
return null};this._updateDrawingOrderHandle=a(this._updateDrawingOrderHandle);this.onViewExtentUpdateHandle=a(this.onViewExtentUpdateHandle);this.pointsOfInterest&&(this.pointsOfInterest.destroy(),this._set("pointsOfInterest",null));this.featureTiles&&(this.featureTiles.destroy(),this._set("featureTiles",null));this._handles.remove("feature-tiles");this._handles.remove("render-coords-helper");this._disposeBasemapTerrain();this.environmentManager&&this.environmentManager.disposeRendering()};h.prototype._disposeBasemapTerrain=
function(){var a=this._get("basemapTerrain");a&&(this._handles.remove("basemapTerrain"),a.destroy(),this._set("basemapTerrain",null))};h.prototype._renderScreenshotOverlay=function(a,b){if(this.overlay&&this.overlay.hasVisibleItems){var e=a.getContext("2d");e.putImageData(b,0,0);this.overlay.renderCanvas(a);a=e.getImageData(0,0,b.width,b.height);for(e=0;e<a.data.length;e++)b.data[e]=a.data[e]}};h.prototype._initStage=function(){var a=this,b={renderContext:this.renderContext,deactivatedWebGLExtensions:this.deactivatedWebGLExtensions,
debugWebGLExtensions:this.debugWebGLExtensions,viewingMode:this.viewingMode,alpha:this.alphaCompositingEnabled,canvas:this.renderCanvas,screenshot:{renderOverlay:function(b,e){return a._renderScreenshotOverlay(b,e)}}},e=new ha.SceneIntersectionHelper(this.viewingMode,{forEachLayer:function(b){var e=a._stage.getLayers();Object.keys(e).forEach(function(a){b(e[a])})}},this);this._set("sceneIntersectionHelper",e);var d=u.byId(this.surface);this._stage=new Ka(this.viewingMode,d,b,e);this._lostWebGLContextHandle=
r.on(this._stage.renderView.getCanvas(),"webglcontextlost",function(){return a.fatalError=new t("webgl-context-lost")});this._handles.add(B.init(this.qualitySettings,"antialiasingEnabled",function(){a._stage.renderView.setRenderParameters({antialiasingEnabled:a.qualitySettings.antialiasingEnabled})}),"stage");b=function(){a._stage.renderView.setRenderParameters({defaultHighlightOptions:qa.toEngineOptions(a.highlightOptions)})};this._handles.add(this.watch(["highlightOptions","highlightOptions.color",
"highlightOptions.haloOpacity","highlightOptions.fillOpacity"],b),"stage");b();this.renderCoordsHelper&&this.sceneIntersectionHelper.setTolerance(Ga.DEFAULT_TOLERANCE/this.renderCoordsHelper.unitInMeters);this._set("canvas",this._stage.renderView.getCanvas())};h.prototype._initSurface=function(){this._initStage();this._initGlobe(this.viewingMode);this.sharedSymbolResources=new za.default({stage:this._stage,viewingMode:this.viewingMode,resourceController:this._resourceController,pointsOfInterest:this.pointsOfInterest,
viewState:this.state})};h.prototype._createGraphicsViewIfNeeded=function(){var a=this;if(!this.graphicsView&&!this._createGraphicsViewController&&0!==this.graphics.length){this._handles.remove("graphics-view");this._createGraphicsViewController=z.createAbortController();var b=function(){a._createGraphicsViewController=null;a._evaluateUpdating()};this._createGraphicsViewAsync(this._createGraphicsViewController.signal).then(b,b);this._evaluateUpdating()}};h.prototype._createGraphicsViewAsync=function(a){return d(this,
void 0,void 0,function(){var b,e,d=this;return k(this,function(m){switch(m.label){case 0:return[4,z.create(function(a){return p(["./3d/layers/GraphicsView3D"],a)})];case 1:return b=m.sent(),z.throwIfAborted(a),[4,B.whenTrueOnce(this.basemapTerrain,"ready",a)];case 2:return m.sent(),e=new b({view:this}),this._set("graphicsView",e),this._handles.add([B.init(e,"updating",function(){return d._evaluateUpdating()})],e.mockLayerId),[2]}})})};h.prototype._disposeGraphicsView=function(){this._createGraphicsViewController&&
(this._createGraphicsViewController.abort(),this._createGraphicsViewController=null);this._handles.remove("graphics-view");y.isSome(this.graphicsView)&&(this._handles.remove(this.graphicsView.mockLayerId),this.graphicsView.destroy(),this._set("graphicsView",null))};h.prototype._initState=function(){this._set("state",new ja.default({viewingMode:this.viewingMode,spatialReference:this.spatialReference}))};h.prototype._viewReadyHandler=function(a){var b=this;a||("global"===this.viewingMode&&(this._clippingArea=
null),this.internallyReady=!0,this._initSurface(),this._handles.add(B.on(this,"graphics","change",function(){return b._createGraphicsViewIfNeeded()}),"graphics-view"),this._createGraphicsViewIfNeeded(),this._evaluateUpdating(),!this._externallySet.environment&&(a=this.get("map.initialViewProperties.environment"))&&(this.environment=a),this._updateDrawingOrderHandle=this.allLayerViews.on("change",function(){return b._updateDrawingOrder()}),this._updateDrawingOrder(),this.labeler.setup(),this.environmentManager.updateReadyChange(!0),
this.inputManager.connect(),a=this._resolveWhenReady,this._resolveWhenReady=[],a.forEach(function(a){return a(b)}))};h.prototype._viewUnreadyHandler=function(a){a&&(y.isSome(this.activeTool)&&(this.activeTool.deactivate&&this.activeTool.deactivate(),this._set("activeTool",null)),this._initialDefaultSpatialReference=null,this.inputManager.disconnect(),this.environmentManager.updateReadyChange(!1),this._disposeGraphicsView(),this.internallyReady=!1,this.stateManager.deinit(),this._disposeSurface(),
this.state.destroy(),this._set("state",null),this.sharedSymbolResources&&(this.sharedSymbolResources.destroy(),this.sharedSymbolResources=null),this.labeler&&this.labeler.dispose(),this._lostWebGLContextHandle&&(this._lostWebGLContextHandle.remove(),this._lostWebGLContextHandle=null),this._stage&&(this._stage.dispose(),this._stage=null),this._handles.remove("stage"),this._set("canvas",null))};h.prototype._updateDrawingOrder=function(){var a=this.allLayerViews.length-1;this.allLayerViews.forEach(function(b,
e){"drawingOrder"in b&&(b.drawingOrder=a-e)})};h.prototype._updateDefaultToMapOptions=function(){this._defaultToMapOptions.include.clear();if(this.map){this.map.ground&&this._defaultToMapOptions.include.add(Ha.TERRAIN_ID);for(var a=0,b=this.map.allLayers.items;a<b.length;a++){var e=b[a];"integrated-mesh"===e.type&&this._defaultToMapOptions.include.add(e.uid)}}};h.prototype._updateDefaultHitTestOptions=function(){this._defaultHitTestOptions.exclude.clear();if(this.map){this.map.ground&&1>this.map.ground.opacity&&
this._defaultHitTestOptions.exclude.add(Ha.TERRAIN_ID);for(var a=0,b=this.map.allLayers.items;a<b.length;a++){var e=b[a];"integrated-mesh"===e.type&&1>e.opacity&&this._defaultToMapOptions.exclude.add(e.uid)}}};l([C.property({type:Q,readOnly:!0,aliasOf:"state.animation"})],h.prototype,"animation",void 0);l([C.property({readOnly:!0})],h.prototype,"basemapTerrain",void 0);l([C.property({readOnly:!0})],h.prototype,"elevationProvider",void 0);l([C.property({type:g,aliasOf:"stateManager.camera"})],h.prototype,
"camera",void 0);l([C.property({readOnly:!0})],h.prototype,"canvas",void 0);l([C.property({type:f.Point,aliasOf:"stateManager.center"})],h.prototype,"center",void 0);l([C.property({type:f.Extent,dependsOn:["map.clippingArea?","map.clippingEnabled?","viewingMode"]})],h.prototype,"clippingArea",null);l([C.property({type:J.default})],h.prototype,"constraints",void 0);l([C.property({type:f.Extent,dependsOn:["basemapTerrain.extent","clippingArea","map"],readOnly:!0})],h.prototype,"dataExtent",null);l([C.property({value:null,
type:P})],h.prototype,"environment",null);l([C.cast("environment")],h.prototype,"castEnvironment",null);l([C.property()],h.prototype,"environmentManager",void 0);l([C.property({type:f.Extent,aliasOf:"stateManager.extent"})],h.prototype,"extent",void 0);l([C.property({readOnly:!0,aliasOf:"stateManager.screenCenter"})],h.prototype,"screenCenter",void 0);l([C.property({type:Number,dependsOn:["maximumPixelRatio"]})],h.prototype,"pixelRatio",null);l([C.property({type:Number,dependsOn:["qualitySettings.maximumPixelRatio",
"qualitySettings.maximumRenderResolution","size"]})],h.prototype,"maximumPixelRatio",null);l([C.property({aliasOf:"stateManager.frustum"})],h.prototype,"frustum",void 0);l([C.property({type:Number,readOnly:!0})],h.prototype,"fullOpacity",void 0);l([C.property({readOnly:!0})],h.prototype,"graphicsView",void 0);l([C.property({type:f.Extent,dependsOn:["basemapTerrain.extent"],readOnly:!0})],h.prototype,"groundExtent",null);l([C.property()],h.prototype,"groundView",void 0);l([C.property({type:Boolean,
dependsOn:["stateManager.hasInitialView"]})],h.prototype,"initialExtentRequired",null);l([C.property({type:Boolean,dependsOn:["state.interacting"],readOnly:!0})],h.prototype,"interacting",null);l([C.property()],h.prototype,"map",void 0);l([C.property({readOnly:!0})],h.prototype,"mapCoordsHelper",void 0);l([C.property({aliasOf:"stateManager.padding"})],h.prototype,"padding",void 0);l([C.property({type:Ba.default,readOnly:!0})],h.prototype,"pointsOfInterest",void 0);l([C.property({type:R.default,readOnly:!0})],
h.prototype,"featureTiles",void 0);l([C.property({type:Z.FeatureTileTree3DDebugger})],h.prototype,"featureTilesDebugger",void 0);l([C.property({type:Boolean})],h.prototype,"screenSizePerspectiveEnabled",void 0);l([C.property({constructOnly:!0})],h.prototype,"deactivatedWebGLExtensions",void 0);l([C.property({constructOnly:!0})],h.prototype,"debugWebGLExtensions",void 0);l([C.property({constructOnly:!0})],h.prototype,"renderCanvas",void 0);l([C.property({readOnly:!0})],h.prototype,"state",void 0);
l([C.property({readOnly:!0})],h.prototype,"inputManager",void 0);l([C.property({readOnly:!0})],h.prototype,"stateManager",void 0);l([C.property({type:["low","medium","high"]})],h.prototype,"qualityProfile",null);l([C.property({type:va,get:function(){var a=this._get("qualitySettings");a||(a=new va,ga.apply(this.qualityProfile,a));return a}})],h.prototype,"qualitySettings",void 0);l([C.property()],h.prototype,"slicePlane",null);l([C.property({dependsOn:["viewingMode"]})],h.prototype,"ready",void 0);
l([C.property({readOnly:!0})],h.prototype,"renderCoordsHelper",void 0);l([C.property({readOnly:!0})],h.prototype,"sceneIntersectionHelper",void 0);l([C.property({type:Number,dependsOn:["scale","spatialReference"],readOnly:!0})],h.prototype,"resolution",null);l([C.property({type:Number,aliasOf:"stateManager.scale"})],h.prototype,"scale",void 0);l([C.property()],h.prototype,"heightModelInfo",null);l([C.property({dependsOn:["map.initialViewProperties?.spatialReference","defaultsFromMap.isSpatialReferenceDone"]})],
h.prototype,"spatialReference",void 0);l([C.property({type:Boolean,constructOnly:!0})],h.prototype,"alphaCompositingEnabled",void 0);l([C.property({type:Boolean})],h.prototype,"supersampleScreenhotsEnabled",void 0);l([C.property({readOnly:!0})],h.prototype,"type",void 0);l([C.property({type:oa})],h.prototype,"ui",void 0);l([C.property({type:Boolean,readOnly:!0})],h.prototype,"updating",void 0);l([C.property({type:Number,readOnly:!0})],h.prototype,"updatingPercentage",void 0);l([C.property({type:["global",
"local"],dependsOn:["map.initialViewProperties?.viewingMode","spatialReference"]})],h.prototype,"viewingMode",null);l([C.property({type:e,aliasOf:"stateManager.viewpoint"})],h.prototype,"viewpoint",void 0);l([C.property({type:Number,aliasOf:"stateManager.zoom"})],h.prototype,"zoom",void 0);l([C.property({type:qa})],h.prototype,"highlightOptions",void 0);return h=l([C.subclass("esri.views.SceneView")],h)}(C.declared(N,V,T,O));var ya=H.vec3f64.create();return c})},"esri/geometry/support/scaleUtils":function(){define(["require",
"exports","../../config","../../core/unitUtils"],function(p,c,n,l){function k(d,c){c=l.getMetersPerUnitForSR(c);return d/(c*l.inchesPerMeter*n.screenDPI)}Object.defineProperty(c,"__esModule",{value:!0});c.getScale=function(d,c){c=c||d.extent;d=d.width;var g=l.getMetersPerUnitForSR(c&&c.spatialReference);return c&&d?c.width/d*g*l.inchesPerMeter*n.screenDPI:0};c.getResolutionForScale=k;c.getScaleForResolution=function(d,c){c=l.getMetersPerUnitForSR(c);return d*c*l.inchesPerMeter*n.screenDPI};c.getExtentForScale=
function(d,c){var g=d.extent;d=d.width;c=k(c,g.spatialReference);return g.clone().expand(c*d/g.width)}})},"esri/views/BreakpointsOwner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/Accessor ../core/ArrayPool ../core/Handles ../core/watchUtils ../core/accessorSupport/decorators ./DOMContainer".split(" "),function(p,c,n,l,k,d,h,g,f,b,a){function e(a,b){return b?m[a].valueToClassName[b].split(" "):[]}
var m={widthBreakpoint:{getValue:function(a){var b=a.viewSize[0];a=a.breakpoints;var e=this.values;return b<=a.xsmall?e.xsmall:b<=a.small?e.small:b<=a.medium?e.medium:b<=a.large?e.large:e.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",
medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},
heightBreakpoint:{getValue:function(a){var b=a.viewSize[1];a=a.breakpoints;var e=this.values;return b<=a.xsmall?e.xsmall:b<=a.small?e.small:b<=a.medium?e.medium:b<=a.large?e.large:e.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",
medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},
orientation:{getValue:function(a){a=a.viewSize;var b=this.values;return a[1]>=a[0]?b.portrait:b.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},q={xsmall:544,small:768,medium:992,large:1200};return function(a){function d(){var b=null!==a&&a.apply(this,arguments)||this;b._breakpointsHandles=new g;b.breakpoints=q;b.orientation=null;b.widthBreakpoint=null;b.heightBreakpoint=null;return b}
n(d,a);d.prototype.initialize=function(){this._breakpointsHandles.add(f.init(this,["breakpoints","size"],this._updateClassNames))};d.prototype.destroy=function(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles.destroy(),this._breakpointsHandles=null)};d.prototype._updateClassNames=function(){if(this.container){var a=h.acquire(),b=h.acquire(),d=!1,f,c,g;for(f in m)c=this[f],g=m[f].getValue({viewSize:this.size,breakpoints:this.breakpoints}),c!==g&&(d=!0,this[f]=g,e(f,c).forEach(function(a){return b.push(a)}),
e(f,g).forEach(function(b){return a.push(b)}));d&&(this._applyClassNameChanges(a,b),h.release(a),h.release(b))}};d.prototype._applyClassNameChanges=function(a,b){var e=this.container;e&&(b.forEach(function(a){return e.classList.remove(a)}),a.forEach(function(a){return e.classList.add(a)}))};d.prototype._removeActiveClassNames=function(){var a=this.container;if(a)for(var b in m)e(b,this[b]).forEach(function(b){return a.classList.remove(b)})};l([b.property({set:function(a){var b=this._get("breakpoints");
if(a!==b){b=(b=a)&&b.xsmall<b.small&&b.small<b.medium&&b.medium<b.large;if(!b){var e=JSON.stringify(q,null,2);console.warn("provided breakpoints are not valid, using defaults:"+e)}a=b?a:q;this._set("breakpoints",k({},a))}}})],d.prototype,"breakpoints",void 0);l([b.property()],d.prototype,"orientation",void 0);l([b.property()],d.prototype,"widthBreakpoint",void 0);l([b.property()],d.prototype,"heightBreakpoint",void 0);return d=l([b.subclass("esri.views.BreakpointsOwner")],d)}(b.declared(d,a))})},
"esri/views/DOMContainer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/domUtils ../core/Evented ../core/Handles ../core/scheduling ../core/watchUtils ../core/accessorSupport/decorators ./overlay/ViewOverlay ../widgets/Popup".split(" "),function(p,c,n,l,k,d,h,g,f,b,a,e,m){function q(a){a&&(d.empty(a),a.parentNode&&a.parentNode.removeChild(a))}var u=[0,0];return function(c){function h(){var a=c.call(this)||this;a._domHandles=
new g;a._freqInfo={freq:16,time:750};a._overlayRenderTaskHandle=null;a.height=0;a.position=null;a.resizing=!1;a.root=null;a.surface=null;a.suspended=!0;a.ui=null;a.userContent=null;a.width=0;a.watch("cursor",function(b){var e=a.surface;e&&e.setAttribute("data-cursor",b)});a.watch("interacting",function(b){var e=a.surface;e&&e.setAttribute("data-interacting",b.toString())});return a}n(h,c);h.prototype.initialize=function(){var a=this;this.watch("ui",this._handleUIChange);this._wireUI(this.ui);this._focusHandle=
this.on("focus",function(){return a.notifyChange("focused")});this._blurHandle=this.on("blur",function(){return a.notifyChange("focused")})};h.prototype.destroy=function(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null,this._domHandles.destroy(),this._focusHandle&&(this._focusHandle.remove(),this._focusHandle=null),this._blurHandle&&(this._blurHandle.remove(),this._blurHandle=null))};Object.defineProperty(h.prototype,
"container",{set:function(a){var m=this,c=this._get("container");if(c!==a)if(this._domHandles.remove("dom-size"),this._stopMeasuring(),c&&(c.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay.destroy(),this._set("overlay",null),q(this.root),this._set("root",null),d.reparent(this.userContent,c),q(this.userContent),this._set("userContent",null)),a){a.classList.add("esri-view");c=document.createElement("div");
c.className="esri-view-user-storage";d.reparent(a,c);a.appendChild(c);this._set("userContent",c);c=document.createElement("div");c.className="esri-view-root";a.insertBefore(c,a.firstChild);this._set("root",c);var g=document.createElement("div");g.className="esri-view-surface";g.setAttribute("role","application");g.tabIndex=0;c.appendChild(g);this._set("surface",g);var h=new e;c.appendChild(h.surface);this._set("overlay",h);h.watch("needsRender",function(a){a&&!m._overlayRenderTaskHandle?m._overlayRenderTaskHandle=
f.addFrameTask({render:function(){m.overlay.render()}}):m._overlayRenderTaskHandle&&(m._overlayRenderTaskHandle.remove(),m._overlayRenderTaskHandle=null)});this.forceDOMReadyCycle();this._domHandles.add(b.init(this,"size",function(a){var b=a[1];g.classList.toggle("esri-view-surface--inset-outline",a[0]>=document.body.clientWidth||b>=document.body.clientHeight)}),"dom-size");this._set("container",a);this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",
!0),this._set("surface",null),this._set("container",null)},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"focused",{get:function(){var a=document.activeElement===this.surface;return document.hasFocus()&&a},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"popup",{get:function(){return this._get("popup")||new m({view:this})},set:function(a){var b=this._get("popup");b&&b!==a&&b.destroy();this._set("popup",a)},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,
"size",{get:function(){return[this.width,this.height]},enumerable:!0,configurable:!0});h.prototype.blur=function(){this.surface&&this.surface.blur()};h.prototype.focus=function(){this.surface&&this.surface.focus()};h.prototype.pageToContainer=function(a,b,e){var d=this.position;a-=d[0];b-=d[1];e?(e[0]=a,e[1]=b):e=[a,b];return e};h.prototype.containerToPage=function(a,b,e){var d=this.position;a+=d[0];b+=d[1];e?(e[0]=a,e[1]=b):e=[a,b];return e};h.prototype._handleUIChange=function(a,b){b&&(this._domHandles.remove("ui"),
b.destroy());a&&this._wireUI(a);this._set("ui",a)};h.prototype._wireUI=function(a){this._domHandles.remove("ui");a&&(a.view=this,this._domHandles.add([b.init(this,"root",function(b){if(b){var e=document.createElement("div");b.appendChild(e);b=e}else b=null;a.container=b}),b.init(this,"popup",function(b,e){e&&a.remove(e,"popup");b&&(b.view=a.view,a.add(b,{key:"popup",position:"manual"}))})],"ui"))};h.prototype._stopMeasuring=function(){this._domHandles.remove("measuring");this._get("resizing")&&this._set("resizing",
!1)};h.prototype._startMeasuring=function(){var a=this,b=this._freqInfo;b.freq=16;b.time=750;this._domHandles.add([function(){var a=function(){b.freq=16;b.time=750};window.addEventListener("resize",a);return{remove:function(){window.removeEventListener("resize",a)}}}(),f.addFrameTask({prepare:function(b){var e=a._measure(),d=a._freqInfo;d.time+=b.deltaTime;e&&(d.freq=16,a._get("resizing")||a._set("resizing",!0));d.time<d.freq||(d.time=0,a._position()||e?d.freq=16:d.freq=Math.min(750,2*d.freq),!e&&
512<=d.freq&&a._get("resizing")&&a._set("resizing",!1))}})],"measuring");this._measure();this._position()};h.prototype._measure=function(){var a=this.container,b=a?a.clientWidth:0,e=a?a.clientHeight:0;if(0===b||0===e||"hidden"===window.getComputedStyle(a).visibility)return this.suspended||this._set("suspended",!0),!1;var a=this.width,d=this.height;if(b===a&&e===d)return this.suspended&&this._set("suspended",!1),!1;this._set("width",b);this._set("height",e);this.suspended&&this._set("suspended",!1);
this.emit("resize",{oldWidth:a,oldHeight:d,width:b,height:e});return!0};h.prototype._position=function(){var a=this.container,b=this.position,e=(a.ownerDocument||window.document).defaultView,a=a.getBoundingClientRect();u[0]=a.left+e.pageXOffset;u[1]=a.top+e.pageYOffset;return b&&u[0]===b[0]&&u[1]===b[1]?!1:(this._set("position",[u[0],u[1]]),!0)};h.prototype.forceDOMReadyCycle=function(){};l([a.property({value:null,cast:function(a){return d.byId(a)}})],h.prototype,"container",null);l([a.property({readOnly:!0,
dependsOn:["surface"]})],h.prototype,"focused",null);l([a.property({readOnly:!0})],h.prototype,"height",void 0);l([a.property({type:m})],h.prototype,"popup",null);l([a.property({type:e})],h.prototype,"overlay",void 0);l([a.property({readOnly:!0})],h.prototype,"position",void 0);l([a.property({readOnly:!0})],h.prototype,"resizing",void 0);l([a.property({readOnly:!0})],h.prototype,"root",void 0);l([a.property({value:null,dependsOn:["width","height"],readOnly:!0})],h.prototype,"size",null);l([a.property({readOnly:!0})],
h.prototype,"surface",void 0);l([a.property({readOnly:!0})],h.prototype,"suspended",void 0);l([a.property()],h.prototype,"ui",void 0);l([a.property({readOnly:!0})],h.prototype,"userContent",void 0);l([a.property({readOnly:!0})],h.prototype,"width",void 0);return h=l([a.subclass("esri.views.DOMContainer")],h)}(a.declared(k,h))})},"esri/views/overlay/ViewOverlay":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Collection ../../core/accessorSupport/decorators maquette".split(" "),
function(p,c,n,l,k,d,h,g){return function(f){function b(){var a=null!==f&&f.apply(this,arguments)||this;a.items=new d;a._callbacks=new Map;a._projector=g.createProjector();a._hiddenProjector=g.createProjector();return a}n(b,f);Object.defineProperty(b.prototype,"needsRender",{get:function(){return 0<this.items.length},enumerable:!0,configurable:!0});b.prototype.initialize=function(){var a=this,b=document.createElement("div");b.className="esri-overlay-surface";this._set("surface",b);this._hiddenSurface=
document.createElement("div");this._hiddenSurface.setAttribute("style","visibility: hidden;");b.appendChild(this._hiddenSurface);this._itemsChangeHandle=this.items.on("change",function(b){b.added.map(function(b){var e=function(){return b.render()};a._callbacks.set(b,e);a._projector.append(a.surface,e)});b.removed.map(function(b){var e=a._projector.detach(a._callbacks.get(b));a.surface.removeChild(e.domNode);a._callbacks.delete(b)})})};b.prototype.addItem=function(a){this.items.add(a)};b.prototype.removeItem=
function(a){this.items.remove(a)};b.prototype.destroy=function(){this.items.removeAll();this._itemsChangeHandle.remove();this._projector=this._callbacks=null};b.prototype.render=function(){this._projector.renderNow()};b.prototype.computeBoundingRect=function(a){var b=this._hiddenSurface,d=this._hiddenProjector,f=null,c=function(){return f=a.render()};d.append(b,c);d.renderNow();var g={left:0,top:0,right:0,bottom:0};if(f&&f.domNode){var h=f.domNode.getBoundingClientRect();g.left=h.left;g.top=h.top;
g.right=h.right;g.bottom=h.bottom}for(d.detach(c);b.firstChild;)b.removeChild(b.firstChild);return g};b.prototype.overlaps=function(a,b){a=this.computeBoundingRect(a);b=this.computeBoundingRect(b);return Math.max(a.left,b.left)<=Math.min(a.right,b.right)&&Math.max(a.top,b.top)<=Math.min(a.bottom,b.bottom)};Object.defineProperty(b.prototype,"hasVisibleItems",{get:function(){return this.items.some(function(a){return a.visible})},enumerable:!0,configurable:!0});b.prototype.renderCanvas=function(a){if(this.items.some(function(a){return a.visible})){var b=
a.getContext("2d");b.save();b.font="10px "+getComputedStyle(this.surface).fontFamily;this.items.forEach(function(a){b.save();a.renderCanvas(b);b.restore()});b.restore()}};l([h.property({readOnly:!0})],b.prototype,"surface",void 0);l([h.property({readOnly:!0})],b.prototype,"items",void 0);l([h.property({readOnly:!0,dependsOn:["items.length"]})],b.prototype,"needsRender",null);return b=l([h.subclass("esri.views.overlay.ViewOverlay")],b)}(h.declared(k))})},"maquette/dist/maquette.umd":function(){(function(p,
c){"object"===typeof exports&&"undefined"!==typeof module?c(exports):"function"===typeof define&&define.amd?define(["exports"],c):(p=p||self,c(p.maquette={}))})(this,function(p){var c=[],n=function(a,b){var e={};Object.keys(a).forEach(function(b){e[b]=a[b]});b&&Object.keys(b).forEach(function(a){e[a]=b[a]});return e},l=function(a,b){return a.vnodeSelector!==b.vnodeSelector?!1:a.properties&&b.properties?a.properties.key!==b.properties.key?!1:a.properties.bind===b.properties.bind:!a.properties&&!b.properties},
k=function(a){if("string"!==typeof a)throw Error("Style values must be strings");},d=function(a,b,e,d){var m=a[b];if(""!==m.vnodeSelector){var f=m.properties;if(!(f&&(void 0===f.key?f.bind:f.key)))for(f=0;f<a.length;f++)if(f!==b&&l(a[f],m))throw Error(e.vnodeSelector+" had a "+m.vnodeSelector+" child "+("added"===d?d:"removed")+", but there is now more than one. You must add unique key properties to make them distinguishable.");}},h=[],g=!1,f=function(a){(a.children||[]).forEach(f);a.properties&&
a.properties.afterRemoved&&a.properties.afterRemoved.apply(a.properties.bind||a.properties,[a.domNode])},b=function(){g=!1;h.forEach(f);h.length=0},a=function(a){h.push(a);g||(g=!0,"undefined"!==typeof window&&"requestIdleCallback"in window?window.requestIdleCallback(b,{timeout:16}):setTimeout(b,16))},e=function(b){var e=b.domNode;if(b.properties){var d=b.properties.exitAnimation;if(d){e.style.pointerEvents="none";d(e,function(){e.parentNode&&(e.parentNode.removeChild(e),a(b))},b.properties);return}}e.parentNode&&
(e.parentNode.removeChild(e),a(b))},m=function(a,b,e){if(b)for(var d=e.eventHandlerInterceptor,m=Object.keys(b),f=m.length,c=function(f){f=m[f];var c=b[f];if("className"===f)throw Error('Property "className" is not supported, use "class".');if("class"===f)r(a,c,!0);else if("classes"===f){var g=Object.keys(c),h=g.length;for(f=0;f<h;f++){var q=g[f];c[q]&&a.classList.add(q)}}else if("styles"===f)for(g=Object.keys(c),h=g.length,f=0;f<h;f++){var q=g[f],l=c[q];l&&(k(l),e.styleApplyer(a,q,l))}else"key"!==
f&&null!==c&&void 0!==c&&(g=typeof c,"function"===g?0===f.lastIndexOf("on",0)&&(d&&(c=d(f,c,a,b)),"oninput"===f&&function(){var a=c;c=function(b){a.apply(this,[b]);b.target["oninput-value"]=b.target.value}}(),a[f]=c):"http://www.w3.org/2000/svg"===e.namespace?"href"===f?a.setAttributeNS("http://www.w3.org/1999/xlink",f,c):a.setAttribute(f,c):"string"===g&&"value"!==f&&"innerHTML"!==f?a.setAttribute(f,c):a[f]=c)},g=0;g<f;g++)c(g)},q=function(a,b,e){var d=b.children;if(d)for(var f=0;f<d.length;f++)u(d[f],
a,void 0,e);b.text&&(a.textContent=b.text);m(a,b.properties,e);b.properties&&b.properties.afterCreate&&b.properties.afterCreate.apply(b.properties.bind||b.properties,[a,e,b.vnodeSelector,b.properties,b.children])},u=function(a,b,e,d){var m,f=0,c=a.vnodeSelector,g=b.ownerDocument;if(""===c)m=a.domNode=g.createTextNode(a.text),void 0!==e?b.insertBefore(m,e):b.appendChild(m);else{for(var h=0;h<=c.length;++h){var k=c.charAt(h);if(h===c.length||"."===k||"#"===k)k=c.charAt(f-1),f=c.slice(f,h),"."===k?m.classList.add(f):
"#"===k?m.id=f:("svg"===f&&(d=n(d,{namespace:"http://www.w3.org/2000/svg"})),void 0!==d.namespace?m=a.domNode=g.createElementNS(d.namespace,f):(m=a.domNode=a.domNode||g.createElement(f),"input"===f&&a.properties&&void 0!==a.properties.type&&m.setAttribute("type",a.properties.type)),void 0!==e?b.insertBefore(m,e):m.parentNode!==b&&b.appendChild(m)),f=h+1}q(m,a,d)}},t,r=function(a,b,e){b&&b.split(" ").forEach(function(b){b&&a.classList.toggle(b,e)})};t=function(a,b,m){var f=a.domNode;if(a===b)return!1;
var g=!1;if(""===b.vnodeSelector){if(b.text!==a.text)return a=f.ownerDocument.createTextNode(b.text),f.parentNode.replaceChild(a,f),b.domNode=a,!0;b.domNode=f}else{0===b.vnodeSelector.lastIndexOf("svg",0)&&(m=n(m,{namespace:"http://www.w3.org/2000/svg"}));a.text!==b.text&&(g=!0,void 0===b.text?f.removeChild(f.firstChild):f.textContent=b.text);b.domNode=f;var h;h=a.children;var q=b.children,x=m;if(h===q)h=!1;else{h=h||c;for(var q=q||c,y=h.length,v=q.length,z=0,A=0,w=!1;A<v;){var B=z<y?h[z]:void 0,
D=q[A];if(void 0!==B&&l(B,D))w=t(B,D,x)||w,z++;else{b:{var B=h,C=D;if(""!==C.vnodeSelector)for(var L=z+1;L<B.length;L++)if(l(B[L],C)){B=L;break b}B=-1}if(0<=B){for(;z<B;z++)e(h[z]),d(h,z,b,"removed");w=t(h[B],D,x)||w;z=B+1}else u(D,f,z<y?h[z].domNode:void 0,x),D.properties&&(B=D.properties.enterAnimation)&&B(D.domNode,D.properties),d(q,A,b,"added")}A++}if(y>z)for(;z<y;z++)e(h[z]),d(h,z,b,"removed");h=w}g=h||g;h=a.properties;q=b.properties;x=m;if(q){y=!1;v=Object.keys(q);A=v.length;for(w=0;w<A;w++)if(B=
v[w],D=q[B],z=h[B],"class"===B)z!==D&&(r(f,z,!1),r(f,D,!0));else if("classes"===B)for(var C=f.classList,L=Object.keys(D),E=L.length,B=0;B<E;B++){var p=L[B],X=!!D[p];X!==!!z[p]&&(y=!0,X?C.add(p):C.remove(p))}else if("styles"===B)for(C=Object.keys(D),L=C.length,B=0;B<L;B++)E=C[B],p=D[E],p!==z[E]&&(y=!0,p?(k(p),x.styleApplyer(f,E,p)):x.styleApplyer(f,E,""));else D||"string"!==typeof z||(D=""),"value"===B?(C=f[B],C!==D&&(f["oninput-value"]?C===f["oninput-value"]:D!==z)&&(f[B]=D,f["oninput-value"]=void 0),
D!==z&&(y=!0)):D!==z&&(z=typeof D,"function"===z&&x.eventHandlerInterceptor||("http://www.w3.org/2000/svg"===x.namespace?"href"===B?f.setAttributeNS("http://www.w3.org/1999/xlink",B,D):f.setAttribute(B,D):"string"===z&&"innerHTML"!==B?"role"===B&&""===D?f.removeAttribute(B):f.setAttribute(B,D):f[B]!==D&&(f[B]=D),y=!0));h=y}else h=void 0;g=h||g;b.properties&&b.properties.afterUpdate&&b.properties.afterUpdate.apply(b.properties.bind||b.properties,[f,m,b.vnodeSelector,b.properties,b.children])}g&&b.properties&&
b.properties.updateAnimation&&b.properties.updateAnimation(f,b.properties,a.properties);return!1};var x=function(a,b){return{getLastRender:function(){return a},update:function(e){if(a.vnodeSelector!==e.vnodeSelector)throw Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");var d=a;a=e;t(d,e,b)},domNode:a.domNode}},w={namespace:void 0,performanceLogger:function(){},eventHandlerInterceptor:void 0,styleApplyer:function(a,
b,e){a.style[b]=e}},v={create:function(a,b){b=n(w,b);u(a,document.createElement("div"),void 0,b);return x(a,b)},append:function(a,b,e){e=n(w,e);u(b,a,void 0,e);return x(b,e)},insertBefore:function(a,b,e){e=n(w,e);u(b,a.parentNode,a,e);return x(b,e)},merge:function(a,b,e){e=n(w,e);b.domNode=a;q(a,b,e);return x(b,e)},replace:function(a,b,e){e=n(w,e);u(b,a.parentNode,a,e);a.parentNode.removeChild(a);return x(b,e)}},y=function(a,b,e){for(var d=0,f=b.length;d<f;d++){var m=b[d];Array.isArray(m)?y(a,m,e):
null!==m&&void 0!==m&&!1!==m&&("string"===typeof m&&(m={vnodeSelector:"",properties:void 0,children:void 0,text:m.toString(),domNode:null}),e.push(m))}},z;z=Array.prototype.find?function(a,b){return a.find(b)}:function(a,b){return a.filter(b)[0]};var A=function(a,b){var e=a;b.forEach(function(a){e=e&&e.children?z(e.children,function(b){return b.domNode===a}):void 0});return e},B=function(a,b,e){var d=function(d){e("domEvent",d);var f=b(),m;m=d.currentTarget;for(var c=f.domNode,g=[];m!==c;)g.push(m),
m=m.parentNode;m=g;m.reverse();f=A(f.getLastRender(),m);a.scheduleRender();var h;f&&(h=f.properties["on"+d.type].apply(f.properties.bind||this,arguments));e("domEventProcessed",d);return h};return function(a,b,e,m){return d}};p.createCache=function(){var a,b;return{invalidate:function(){a=b=void 0},result:function(e,d){if(a)for(var m=0;m<e.length;m++)a[m]!==e[m]&&(b=void 0);b||(b=d(),a=e);return b}}};p.createMapping=function(a,b,e){var d=[],m=[];return{results:m,map:function(f){for(var c=f.map(a),
g=m.slice(),h=0,k=0;k<f.length;k++){var q=f[k],l=c[k];if(l===d[h])m[k]=g[h],e(q,g[h],k),h++;else{for(var r=!1,t=1;t<d.length+1;t++){var u=(h+t)%d.length;if(d[u]===l){m[k]=g[u];e(f[k],g[u],k);h=u+1;r=!0;break}}r||(m[k]=b(q,k))}}m.length=f.length;d=c}}};p.createProjector=function(a){var b,e=n(w,a),d=e.performanceLogger,m=!0,f,c=!1,g=[],h=[],k=function(a,m,f){var c;e.eventHandlerInterceptor=B(b,function(){return c},d);c=a(m,f(),e);g.push(c);h.push(f)},q=function(){f=void 0;if(m){m=!1;d("renderStart",
void 0);for(var a=0;a<g.length;a++){var b=h[a]();d("rendered",void 0);g[a].update(b);d("patched",void 0)}d("renderDone",void 0);m=!0}};return b={renderNow:q,scheduleRender:function(){f||c||(f=requestAnimationFrame(q))},stop:function(){f&&(cancelAnimationFrame(f),f=void 0);c=!0},resume:function(){c=!1;m=!0;b.scheduleRender()},append:function(a,b){k(v.append,a,b)},insertBefore:function(a,b){k(v.insertBefore,a,b)},merge:function(a,b){k(v.merge,a,b)},replace:function(a,b){k(v.replace,a,b)},detach:function(a){for(var b=
0;b<h.length;b++)if(h[b]===a)return h.splice(b,1),g.splice(b,1)[0];throw Error("renderFunction was not found");}}};p.dom=v;p.h=function(a,b,e){if(Array.isArray(b))e=b,b=void 0;else if(b&&("string"===typeof b||b.hasOwnProperty("vnodeSelector"))||e&&("string"===typeof e||e.hasOwnProperty("vnodeSelector")))throw Error("h called with invalid arguments");var d,m;e&&1===e.length&&"string"===typeof e[0]?d=e[0]:e&&(m=[],y(a,e,m),0===m.length&&(m=void 0));return{vnodeSelector:a,properties:b,children:m,text:""===
d?void 0:d,domNode:null}};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/widgets/Popup":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper dojo/i18n!../nls/common dojo/i18n!./Popup/nls/Popup ../intl ../core/events ../core/Handles ../core/Logger ../core/promiseUtils ../core/watchUtils ../core/accessorSupport/decorators ./Spinner ./Widget ./Popup/PopupViewModel ./support/widget ./support/widgetUtils".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y){function z(a,b){return void 0===b?"esri-popup__"+a:"esri-popup__"+a+"-"+b}function A(){return h(this,void 0,void 0,function(){return d(this,function(a){return[2,q.create(function(a){p(["./Feature"],function(b){a(b)})})]})})}var B={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},D=m.getLogger("esri.widgets.Popup");return function(m){function c(a){var b=m.call(this)||this;b._blurContainer=!1;b._containerNode=null;b._mainContainerNode=null;
b._featureMenuNode=null;b._actionsMenuNode=null;b._focusContainer=!1;b._focusDockButton=!1;b._focusFeatureMenuButton=!1;b._focusActionsMenuButton=!1;b._focusFirstFeature=!1;b._focusFirstAction=!1;b._handles=new e;b._pointerOffsetInPx=16;b._spinner=null;b.actions=null;b.alignment="auto";b.autoCloseEnabled=null;b.autoOpenEnabled=null;b.defaultPopupTemplateEnabled=null;b.content=null;b.collapsed=!1;b.collapseEnabled=!0;b.dockEnabled=!1;b.featureCount=null;b.features=null;b.featureNavigationEnabled=!0;
b.goToOverride=null;b.highlightEnabled=null;b.location=null;b.featureWidgets=[];b.promises=null;b.selectedFeature=null;b.selectedFeatureIndex=null;b.selectedFeatureWidget=null;b.spinnerEnabled=!0;b.title=null;b.updateLocationEnabled=null;b.view=null;b.viewModel=new w;b.visible=null;b._addSelectedFeatureIndexHandle();b.own([u.watch(b,"viewModel.screenLocation",function(){return b._positionContainer()}),u.watch(b,["viewModel.visible","dockEnabled"],function(){return b._toggleScreenLocationEnabled()}),
u.watch(b,"viewModel.screenLocation",function(a,e){!!a!==!!e&&b.reposition()}),u.watch(b,"viewModel.features",function(){return b._updateFeatureWidgets()}),u.watch(b,"viewModel.view.padding viewModel.view.size viewModel.visible viewModel.waitingForResult viewModel.location alignment".split(" "),function(){return b.reposition()}),u.watch(b,"spinnerEnabled",function(a){return b._spinnerEnabledChange(a)}),u.watch(b,"viewModel.view.size",function(a,e){return b._updateDockEnabledForViewSize(a,e)}),u.watch(b,
"viewModel.view",function(a,e){return b._viewChange(a,e)}),u.watch(b,"viewModel.view.ready",function(a,e){return b._viewReadyChange(a,e)}),u.watch(b,["viewModel.waitingForResult","viewModel.location"],function(){return b._displaySpinner()}),u.watch(b,["featureWidgets","viewModel.selectedFeatureIndex"],function(){return b._updateFeatureWidget()}),u.watch(b,"selectedFeatureWidget.viewModel.title",function(a){return b._setTitleFromFeatureWidget(a)}),u.watch(b,["selectedFeatureWidget.viewModel.content",
"selectedFeatureWidget.viewModel.waitingForContent"],function(){return b._setContentFromFeatureWidget()}),u.whenFalse(b,"collapsed",function(){"xsmall"===b.get("viewModel.view.widthBreakpoint")&&b.visible&&b.collapseEnabled&&b.viewModel.centerAtLocation()})]);return b}n(c,m);c.prototype.destroy=function(){this._destroyFeatureWidgets();this._destroySpinner();this._handles&&this._handles.destroy();this._handles=null};Object.defineProperty(c.prototype,"actionsMenuOpen",{get:function(){return this.viewModel.visible?
this._get("actionsMenuOpen"):!1},set:function(a){this._set("actionsMenuOpen",!!a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"currentAlignment",{get:function(){return this._getCurrentAlignment()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"currentDockPosition",{get:function(){return this._getCurrentDockPosition()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"dockOptions",{get:function(){return this._get("dockOptions")||B},set:function(a){var b=
k({},B),e=this.get("viewModel.view.breakpoints"),d={};e&&(d.width=e.xsmall,d.height=e.xsmall);a=k({},b,a);b=k({},b.breakpoint,d);d=a.breakpoint;!0===d?a.breakpoint=b:"object"===typeof d&&(a.breakpoint=k({},b,d));this._set("dockOptions",a);this._setCurrentDockPosition();this.reposition()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"featureMenuOpen",{get:function(){return this.viewModel.visible?this._get("featureMenuOpen"):!1},set:function(a){this._set("featureMenuOpen",!!a)},
enumerable:!0,configurable:!0});c.prototype.blur=function(){this.visible||D.warn("Popup cannot be blurred while visible is false");this._blurContainer=!0;this.scheduleRender()};c.prototype.clear=function(){};c.prototype.close=function(){this.visible=!1};c.prototype.focus=function(){this.visible||D.warn("Popup cannot be focused while visible is false");this._focusContainer=!0;this.scheduleRender()};c.prototype.next=function(){return null};c.prototype.open=function(a){this._handles.remove("selected-index");
var b={collapsed:a?!!a.collapsed:!1,actionsMenuOpen:a?!!a.actionsMenuOpen:!1,featureMenuOpen:a?!!a.featureMenuOpen:!1};"xsmall"===this.get("viewModel.view.widthBreakpoint")&&(b.collapsed=!0);this.set(b);this.viewModel.open(a);this._addSelectedFeatureIndexHandle()};c.prototype.previous=function(){return null};c.prototype.reposition=function(){this.renderNow();this._positionContainer();this._setCurrentAlignment()};c.prototype.triggerAction=function(a){return null};c.prototype.render=function(){var a=
this,e,d,m,c,h,k,q,l=this.actionsMenuOpen,r=this.collapsed,t=this.collapseEnabled,u=this.dockEnabled,x=this.featureMenuOpen,A=this.featureNavigationEnabled,w=this.featureWidgets,n=this.visible,B=this.viewModel,D=B.content,C=B.featureCount,p=B.pendingPromisesCount,E=B.selectedFeatureIndex,ba=B.title,ha=1<C&&A,W=ha?2:3,A=this._divideActions(W),ea=A.inlineActions,ga=A.menuActions,A=ha&&x,B=1<ga.length&&l,ma=ha&&this._getPageText(C,E),qa=this._renderContent(),na=y.isRTL(),pa=!!(this.get("selectedFeatureWidget")?
this.get("selectedFeatureWidget.viewModel.waitingForContent")||this.get("selectedFeatureWidget.viewModel.content"):qa),sa=(t=!!(t&&ba&&pa))&&!A&&r,ia=this.get("viewModel.view.widthBreakpoint"),va=u?f.undock:f.dock,r=this.currentAlignment,C=this.currentDockPosition,p=p?v.tsx("div",{key:z("loading-container"),role:"presentation",class:"esri-popup__loading-container","aria-label":g.loading,title:g.loading},v.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-loading-indicator",
"esri-rotating")})):null,Aa=(e={},e["esri-icon-right-triangle-arrow"]=na,e["esri-popup__pagination-previous-icon--rtl"]=na,e["esri-icon-left-triangle-arrow"]=!na,e["esri-popup__pagination-previous-icon"]=!na,e);e=v.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",Aa)});Aa=v.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes("esri-popup__button","esri-popup__pagination-previous"),"aria-label":f.previous,title:f.previous},
e);e=(d={},d["esri-icon-left-triangle-arrow"]=na,d["esri-popup__pagination-next-icon--rtl"]=na,d["esri-icon-right-triangle-arrow"]=!na,d["esri-popup__pagination-next-icon"]=!na,d);d=v.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",e)});na=v.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes("esri-popup__button","esri-popup__pagination-next"),"aria-label":f.next,title:f.next},d);e=y.cssTransition("enter","esri-popup--feature-updated");
d=this.id+"-feature-menu";x=v.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes("esri-popup__button","esri-popup__feature-menu-button"),"aria-haspopup":"true","aria-controls":d,"aria-expanded":x,"aria-label":g.menu,title:g.menu},ma);ma=ha?[Aa,p||x,na]:null;x=this._wouldDockTo();x=(m={},m["esri-icon-minimize"]=u,m["esri-popup__icon--dock-icon"]=
!u,m["esri-icon-dock-right"]=!u&&("top-right"===x||"bottom-right"===x),m["esri-icon-dock-left"]=!u&&("top-left"===x||"bottom-left"===x),m["esri-icon-maximize"]=!u&&"top-center"===x,m["esri-icon-dock-bottom"]=!u&&"bottom-center"===x,m);m=v.tsx("span",{"aria-hidden":"true",class:this.classes(x,"esri-popup__icon")});m="xsmall"!==ia&&this.get("dockOptions.buttonEnabled")?v.tsx("div",{role:"button","aria-label":va,title:va,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,
afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes("esri-popup__button","esri-popup__button--dock")},m):null;x=(c={},c["esri-popup__header-container--button"]=t,c);ia=t?"button":"heading";va=t?sa?g.expand:g.collapse:"";c=this.id+"-popup-title";ba=ba?v.tsx("div",{class:this.classes("esri-popup__header-container",x),key:ba,enterAnimation:e,id:c,role:ia,"aria-label":va,title:va,tabIndex:t?0:-1,bind:this,onclick:this._toggleCollapsed,onkeydown:this._toggleCollapsed},
v.tsx("h2",{class:"esri-popup__header-title",innerHTML:ba})):null;x=v.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-close")});x=v.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:"esri-popup__button","aria-label":g.close,title:g.close},x);m=v.tsx("header",{class:"esri-popup__header"},ba,v.tsx("div",{class:"esri-popup__header-buttons"},m,x));x=this.id+"-popup-content";D=!pa||t&&sa?null:v.tsx("article",{key:D,enterAnimation:e,
id:x,class:"esri-popup__content"},qa);pa="bottom-left"===r||"bottom-center"===r||"bottom-right"===r||"top-left"===C||"top-center"===C||"top-right"===C;qa="top-left"===r||"top-center"===r||"top-right"===r||"bottom-left"===C||"bottom-center"===C||"bottom-right"===C;e=l?g.close:g.open;e=ga.length?v.tsx("div",{key:z("actions-menu-button"),class:this.classes("esri-popup__button","esri-popup__actions-menu-button"),role:"button",id:this.id+"-actions-menu-button","aria-haspopup":"true","aria-controls":l?
this.id+"-actions-menu":null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":e,title:e},v.tsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"})):null;ia=ea.length&&ea.toArray().map(function(b,e){return a._renderAction({action:b,index:e,key:"actions",type:"inline"})});l=ga.length&&l?v.tsx("ul",{id:this.id+"-actions-menu",role:"menu","aria-labelledby":this.id+
"-actions-menu-button",key:z("actions"),class:"esri-popup__actions",bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},ga.toArray().map(function(b,e){return a._renderAction({action:b,index:e+W,key:"actions",type:"menu-item"})})):null;l=ia?v.tsx("div",{key:"inline-actions-container",class:"esri-popup__inline-actions-container"},ia,e,l):null;ma=ha?v.tsx("section",{key:z("navigation"),class:this.classes("esri-popup__navigation")},
ma):null;ga=(h={},h["esri-popup__footer--has-pagination"]=ha,h["esri-popup__footer--has-actions"]=!!ea.length,h["esri-popup__footer--has-actions-menu"]=!!ga.length,h);h=ha||ea.length?v.tsx("div",{key:z("feature-buttons"),class:this.classes("esri-popup__footer",ga)},l,ma):null;E=this._renderFeatureMenuNode(w,E,d);w=b.substitute(f.selectedFeatures,{total:w.length});ea=v.tsx("section",{key:z("menu"),class:"esri-popup__feature-menu"},v.tsx("h2",{class:"esri-popup__feature-menu-header"},w),v.tsx("nav",
{class:"esri-popup__feature-menu-viewport",afterCreate:this._featureMenuViewportNodeUpdated,afterUpdate:this._featureMenuViewportNodeUpdated},E));w=u?null:v.tsx("div",{key:z("pointer"),class:"esri-popup__pointer",role:"presentation"},v.tsx("div",{class:this.classes("esri-popup__pointer-direction","esri-popup--shadow")}));E=this.get("selectedFeature.layer.title");ha=this.get("selectedFeature.layer.id");t=(k={},k["esri-popup--shadow"]=u,k["esri-popup--is-collapsible"]=t,k["esri-popup--is-collapsed"]=
sa,k);k=(q={},q["esri-popup--aligned-top-center"]=n&&"top-center"===r,q["esri-popup--aligned-bottom-center"]=n&&"bottom-center"===r,q["esri-popup--aligned-top-left"]=n&&"top-left"===r,q["esri-popup--aligned-bottom-left"]=n&&"bottom-left"===r,q["esri-popup--aligned-top-right"]=n&&"top-right"===r,q["esri-popup--aligned-bottom-right"]="bottom-right"===r,q["esri-popup--is-docked"]=n&&u,q["esri-popup--shadow"]=n&&!u,q["esri-popup--is-docked-top-left"]=n&&"top-left"===C,q["esri-popup--is-docked-top-center"]=
n&&"top-center"===C,q["esri-popup--is-docked-top-right"]=n&&"top-right"===C,q["esri-popup--is-docked-bottom-left"]=n&&"bottom-left"===C,q["esri-popup--is-docked-bottom-center"]=n&&"bottom-center"===C,q["esri-popup--is-docked-bottom-right"]=n&&"bottom-right"===C,q["esri-popup--feature-menu-open"]=n&&A,q["esri-popup--actions-menu-open"]=n&&B,q);q=pa?ea:null;u=qa?ea:null;A=pa?h:null;B=qa?h:null;q=v.tsx("div",{class:this.classes("esri-popup__main-container","esri-widget",t),tabIndex:-1,role:"dialog",
"aria-labelledby":ba?c:"","aria-describedby":D?x:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},A,q,m,D,B,u);return v.tsx("div",{key:z("base"),class:this.classes("esri-popup",k),role:"presentation","data-layer-title":E,"data-layer-id":ha,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},n?[q,w]:null)};c.prototype._divideActions=function(a){var b=this.viewModel.allActions;return{inlineActions:b.slice(0,
a),menuActions:b.slice(a)}};c.prototype._featureMenuOpenChanged=function(a){a?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0};c.prototype._actionsMenuOpenChanged=function(a){a?this._focusFirstAction=!0:this._focusActionsMenuButton=!0};c.prototype._setTitleFromFeatureWidget=function(a){this.selectedFeatureWidget&&(this.viewModel.title=a||"")};c.prototype._setContentFromFeatureWidget=function(){var a=this.selectedFeatureWidget;a&&(this.viewModel.content=a)};c.prototype._handleFeatureMenuKeyup=
function(b){"Escape"===a.eventKey(b)&&(b.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())};c.prototype._handleActionMenuKeyup=function(b){"Escape"===a.eventKey(b)&&(b.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())};c.prototype._handleFeatureMenuItemKeyup=function(b){var e=a.eventKey(b),d=this._featureMenuNode,m=b.currentTarget["data-feature-index"];if(d){var d=d.querySelectorAll("li"),f=d.length;"ArrowUp"===
e?(b.stopPropagation(),d[(m-1+f)%f].focus()):"ArrowDown"===e?(b.stopPropagation(),d[(m+1+f)%f].focus()):"Home"===e?(b.stopPropagation(),d[0].focus()):"End"===e&&(b.stopPropagation(),d[d.length-1].focus())}};c.prototype._handleActionMenuItemKeyup=function(b){var e=a.eventKey(b),d=this._actionsMenuNode,m=b.currentTarget["data-action-index"];if(d){var d=d.querySelectorAll("li"),f=d.length;"ArrowUp"===e?(b.stopPropagation(),d[(m-1+f)%f].focus()):"ArrowDown"===e?(b.stopPropagation(),d[(m+1+f)%f].focus()):
"Home"===e?(b.stopPropagation(),d[0].focus()):"End"===e&&(b.stopPropagation(),d[d.length-1].focus())}};c.prototype._handleMainKeyup=function(b){var e=a.eventKey(b);"ArrowLeft"===e&&(b.stopPropagation(),this.previous());"ArrowRight"===e&&(b.stopPropagation(),this.next())};c.prototype._spinnerEnabledChange=function(a){this._destroySpinner();a&&(a=this.get("viewModel.view"),this._createSpinner(a))};c.prototype._displaySpinner=function(){var a=this._spinner;if(a){var b=this.viewModel,e=b.location;b.waitingForResult?
a.show({location:e}):a.hide()}};c.prototype._getIconStyles=function(a){return{"background-image":a?"url("+a+")":""}};c.prototype._renderAction=function(a){var e=this,d,m,f=a.action,c=a.index,g=a.key;a=a.type;var h=u.watch(f,"active className disabled id title image visible".split(" "),function(){return e.scheduleRender()});this._handles.add(h,g);var h=this.get("selectedFeature.attributes"),g=f.title,k=f.className,q=f.image,k=q||k?k:"esri-icon-default-action",g=g&&h?b.substitute(g,h):g,l=k&&h?b.substitute(k,
h):k,h=q&&h?b.substitute(q,h):q,q=(d={},d["esri-icon-loading-indicator"]=f.active,d["esri-rotating"]=f.active,d["esri-popup__icon"]=!!k,d["esri-popup__action-image"]=!f.active&&!!h,d);l&&(q[l]=!f.active);d=(m={},m["esri-popup__action"]="toggle"!==f.type,m["esri-popup__action-toggle"]="toggle"===f.type,m["esri-popup__action-toggle--on"]="toggle"===f.type&&f.value,m["esri-popup__button--disabled"]=f.disabled,m);m=v.tsx("span",{key:"text",class:"esri-popup__action-text"},g);m=[v.tsx("span",{key:"icon",
"aria-hidden":"true",class:this.classes("esri-popup__icon",q),styles:this._getIconStyles(h)}),m];c="menu-item"===a?v.tsx("li",{key:f,role:"menuitem",tabIndex:0,title:g,"aria-label":g,class:this.classes("esri-popup__button",d),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-index":c,onclick:this._triggerAction,onkeydown:this._triggerAction},m):v.tsx("div",{key:f,role:"button",tabIndex:0,title:g,"aria-label":g,class:this.classes("esri-popup__button",d),onkeyup:this._handleActionMenuItemKeyup,
bind:this,"data-action-index":c,onclick:this._triggerAction,onkeydown:this._triggerAction},m);return f.visible?c:null};c.prototype._addSelectedFeatureIndexHandle=function(){var a=this,b=u.watch(this,"viewModel.selectedFeatureIndex",function(b,e){return a._selectedFeatureIndexUpdated(b,e)});this._handles.add(b,"selected-index")};c.prototype._selectedFeatureIndexUpdated=function(a,b){this.featureCount&&a!==b&&-1!==a&&(this.featureMenuOpen=this.actionsMenuOpen=!1)};c.prototype._updateFeatureWidget=function(){this._set("selectedFeatureWidget",
this.featureWidgets[this.viewModel.selectedFeatureIndex]||null)};c.prototype._destroyFeatureWidgets=function(){this.featureWidgets.forEach(function(a){return a.destroy()});this._set("featureWidgets",[])};c.prototype._updateFeatureWidgets=function(){return h(this,void 0,void 0,function(){var a,b,e,m,f,c,g=this;return d(this,function(d){switch(d.label){case 0:return a=this,b=a.features,e=a.featureWidgets,b&&b.length?[4,A()]:(this._destroyFeatureWidgets(),[2]);case 1:return m=d.sent(),f=e.slice(0),c=
[],b.forEach(function(a,b){if(a){var e=null;f.some(function(b,d){b&&b.graphic===a&&(e=b,f.splice(d,1));return!!e});if(e)c[b]=e;else{var d=new m({defaultPopupTemplateEnabled:g.defaultPopupTemplateEnabled,graphic:a,spatialReference:g.get("view.spatialReference"),map:g.get("view.map")});d.visibleElements=k({},d.visibleElements,{title:!1});c[b]=d}}}),f.forEach(function(a){return a&&a.destroy()}),this._set("featureWidgets",c),[2]}})})};c.prototype._isScreenLocationWithinView=function(a,b){return-1<a.x&&
-1<a.y&&a.x<=b.width&&a.y<=b.height};c.prototype._isOutsideView=function(a){var b=a.popupHeight,e=a.popupWidth,d=a.screenLocation,m=a.side;a=a.view;if(isNaN(e)||isNaN(b)||!a||!d)return!1;var f=a.padding;return"right"===m&&d.x+e/2>a.width-f.right||"left"===m&&d.x-e/2<f.left||"top"===m&&d.y-b<f.top||"bottom"===m&&d.y+b>a.height-f.bottom?!0:!1};c.prototype._determineCurrentAlignment=function(){var a=this._pointerOffsetInPx,b=this._containerNode,e=this._mainContainerNode,d=this.viewModel,m=d.screenLocation,
d=d.view;if(!m||!d||!b)return"top-center";if(!this._isScreenLocationWithinView(m,d))return this._get("currentAlignment")||"top-center";var f=e?window.getComputedStyle(e,null):null,e=f?parseInt(f.getPropertyValue("max-height").replace(/[^-\d\.]/g,""),10):0,f=f?parseInt(f.getPropertyValue("height").replace(/[^-\d\.]/g,""),10):0,c=b.getBoundingClientRect(),b=c.width+a,c=Math.max(c.height,e,f)+a,a=this._isOutsideView({popupHeight:c,popupWidth:b,screenLocation:m,side:"right",view:d}),e=this._isOutsideView({popupHeight:c,
popupWidth:b,screenLocation:m,side:"left",view:d}),f=this._isOutsideView({popupHeight:c,popupWidth:b,screenLocation:m,side:"top",view:d}),m=this._isOutsideView({popupHeight:c,popupWidth:b,screenLocation:m,side:"bottom",view:d});return e?f?"bottom-right":"top-right":a?f?"bottom-left":"top-left":f?m?"top-center":"bottom-center":"top-center"};c.prototype._getCurrentAlignment=function(){var a=this.alignment;return this.dockEnabled?null:"auto"===a?this._determineCurrentAlignment():"function"===typeof a?
a.call(this):a};c.prototype._setCurrentAlignment=function(){this._set("currentAlignment",this._getCurrentAlignment())};c.prototype._setCurrentDockPosition=function(){this._set("currentDockPosition",this._getCurrentDockPosition())};c.prototype._getDockPosition=function(){var a=this.get("dockOptions.position");return"auto"===a?this._determineCurrentDockPosition():"function"===typeof a?a.call(this):a};c.prototype._getCurrentDockPosition=function(){return this.dockEnabled?this._getDockPosition():null};
c.prototype._wouldDockTo=function(){return this.dockEnabled?null:this._getDockPosition()};c.prototype._renderFeatureMenuItemNode=function(a,b,e){var d,m=b===e,c=(d={},d["esri-popup__feature-menu-item--selected"]=m,d);d=m?v.tsx("span",{key:z("feature-menu-selected-feature-"+e),title:f.selectedFeature,"aria-label":f.selectedFeature,class:"esri-icon-check-mark"}):null;a=v.tsx("span",{innerHTML:a.title||g.untitled});return v.tsx("li",{role:"menuitem",tabIndex:-1,key:z("feature-menu-feature-"+e),class:this.classes(c,
"esri-popup__feature-menu-item"),bind:this,"data-feature-index":b,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature},v.tsx("span",{class:"esri-popup__feature-menu-title"},a,d))};c.prototype._renderFeatureMenuNode=function(a,b,e){var d=this;return 1<a.length?v.tsx("ol",{class:"esri-popup__feature-menu-list",id:e,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},
a.map(function(a,e){return d._renderFeatureMenuItemNode(a,e,b)})):null};c.prototype._determineCurrentDockPosition=function(){var a=this.get("viewModel.view"),b=y.isRTL()?"top-left":"top-right";if(!a)return b;var e=a.padding||{left:0,right:0,top:0,bottom:0},e=a.width-e.left-e.right;return(a=a.get("breakpoints"))&&e<=a.xsmall?"bottom-center":b};c.prototype._renderContent=function(){var a=this.get("viewModel.content");if(!a)return null;if("string"===typeof a)return v.tsx("div",{key:a,innerHTML:a});if(v.isWidget(a)&&
!a.destroyed)return v.tsx("div",{key:a},a.render());if(a instanceof HTMLElement)return v.tsx("div",{key:a,bind:a,afterCreate:this._attachToNode});if(v.isWidgetBase(a))return v.tsx("div",{key:a,bind:a.domNode,afterCreate:this._attachToNode})};c.prototype._attachToNode=function(a){a.appendChild(this)};c.prototype._positionContainer=function(a){void 0===a&&(a=this._containerNode);a&&(this._containerNode=a);if(a){var b=this.viewModel.screenLocation,e=a.getBoundingClientRect().width;if(b=this._calculatePositionStyle(b,
e))a.style.top=b.top,a.style.left=b.left,a.style.bottom=b.bottom,a.style.right=b.right}};c.prototype._calculateFullWidth=function(a){var b=this.currentAlignment,e=this._pointerOffsetInPx;return"top-left"===b||"bottom-left"===b||"top-right"===b||"bottom-right"===b?a+e:a};c.prototype._calculateAlignmentPosition=function(a,b,e,d){var m=this.currentAlignment,f=this._pointerOffsetInPx;d/=2;var c=e.height-b;e=e.width-a;var g=this.view.padding;if("bottom-center"===m)return{top:b+f-g.top,left:a-d-g.left};
if("top-left"===m)return{bottom:c+f-g.bottom,right:e+f-g.right};if("bottom-left"===m)return{top:b+f-g.top,right:e+f-g.right};if("top-right"===m)return{bottom:c+f-g.bottom,left:a+f-g.left};if("bottom-right"===m)return{top:b+f-g.top,left:a+f-g.left};if("top-center"===m)return{bottom:c+f-g.bottom,left:a-d-g.left}};c.prototype._calculatePositionStyle=function(a,b){var e=this.view;if(e){if(this.dockEnabled)return{left:"",top:"",right:"",bottom:""};if(a&&b&&(b=this._calculateFullWidth(b),a=this._calculateAlignmentPosition(a.x,
a.y,e,b)))return{top:void 0!==a.top?a.top+"px":"auto",left:void 0!==a.left?a.left+"px":"auto",bottom:void 0!==a.bottom?a.bottom+"px":"auto",right:void 0!==a.right?a.right+"px":"auto"}}};c.prototype._viewChange=function(a,b){a&&b&&(this.close(),this.clear())};c.prototype._viewReadyChange=function(a,b){a?(a=this.get("viewModel.view"),this._wireUpView(a)):b&&(this.close(),this.clear())};c.prototype._wireUpView=function(a){this._destroySpinner();a&&(this.spinnerEnabled&&this._createSpinner(a),this._setDockEnabledForViewSize(this.dockOptions))};
c.prototype._dockingThresholdCrossed=function(a,b,e){var d=a[0];a=a[1];var m=b[0];b=b[1];var f=e.width;e=e.height;return d<=f&&m>f||d>f&&m<=f||a<=e&&b>e||a>e&&b<=e};c.prototype._updateDockEnabledForViewSize=function(a,b){if(a&&b){var e=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},d=e.left+e.right,m=e.top+e.bottom,e=[],f=[];e[0]=a[0]-d;e[1]=a[1]-m;f[0]=b[0]-d;f[1]=b[1]-m;a=this.dockOptions;this._dockingThresholdCrossed(e,f,a.breakpoint)&&this._setDockEnabledForViewSize(a);this._setCurrentDockPosition()}};
c.prototype._focusDockButtonNode=function(a){this._focusDockButton&&(this._focusDockButton=!1,a.focus())};c.prototype._mainContainerNodeUpdated=function(a){this._mainContainerNode=a;this._focusContainer?(this._focusContainer=!1,a.focus()):this._blurContainer&&(this._blurContainer=!1,a.blur())};c.prototype._featureMenuNodeUpdated=function(a){(this._featureMenuNode=a)&&this._focusFirstFeature&&(this._focusFirstFeature=!1,a=a.querySelectorAll("li"),a.length&&a[0].focus())};c.prototype._actionsMenuNodeUpdated=
function(a){(this._actionsMenuNode=a)&&this._focusFirstAction&&(this._focusFirstAction=!1,a=a.querySelectorAll("li"),a.length&&a[0].focus())};c.prototype._focusFeatureMenuButtonNode=function(a){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,a.focus())};c.prototype._focusActionsMenuButtonNode=function(a){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,a.focus())};c.prototype._featureMenuViewportNodeUpdated=function(a){a&&(a.scrollTop=0)};c.prototype._toggleScreenLocationEnabled=
function(){var a=this.dockEnabled,b=this.viewModel;b&&(b.screenLocationEnabled=this.visible&&!a)};c.prototype._shouldDockAtCurrentViewSize=function(a){a=a.breakpoint;var b=this.get("viewModel.view.ui"),e=b.width,b=b.height;if(isNaN(e)||isNaN(b))return!1;e=a.hasOwnProperty("width")&&e<=a.width;a=a.hasOwnProperty("height")&&b<=a.height;return e||a};c.prototype._setDockEnabledForViewSize=function(a){a.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(a))};c.prototype._getPageText=function(a,
e){return b.substitute(f.pageText,{index:e+1,total:a})};c.prototype._destroySpinner=function(){var a=this._spinner,b=this.view;a&&(b&&b.ui&&b.ui.remove(this._spinner,"popup-spinner"),a.destroy(),this._spinner=null)};c.prototype._createSpinner=function(a){a&&(this._spinner=new r({view:a}),a.ui.add(this._spinner,{key:"popup-spinner",position:"manual"}))};c.prototype._toggleCollapsed=function(){this.collapsed=!this.collapsed};c.prototype._close=function(){this.close();this.view&&this.view.focus()};c.prototype._toggleDockEnabled=
function(){this.dockEnabled=!this.dockEnabled;this._focusDockButton=!0;this.scheduleRender()};c.prototype._toggleFeatureMenu=function(){var a=!this.featureMenuOpen;this._featureMenuOpenChanged(a);this.actionsMenuOpen=!1;this.featureMenuOpen=a};c.prototype._toggleActionsMenu=function(){var a=!this.actionsMenuOpen;this._actionsMenuOpenChanged(a);this.featureMenuOpen=!1;this.actionsMenuOpen=a};c.prototype._triggerAction=function(a){a=a.currentTarget["data-action-index"];var b=this.viewModel.allActions.getItemAt(a);
b&&"toggle"===b.type&&(b.value=!b.value);this.actionsMenuOpen=!1;this.viewModel.triggerAction(a)};c.prototype._selectFeature=function(a){a=a.currentTarget["data-feature-index"];isNaN(a)||(this.viewModel.selectedFeatureIndex=a);this.featureMenuOpen=!1;this._focusFeatureMenuButton=!0;this.scheduleRender()};c.prototype._next=function(){this.next()};c.prototype._previous=function(){this.previous()};l([t.aliasOf("viewModel.actions"),v.renderable()],c.prototype,"actions",void 0);l([t.property({dependsOn:["viewModel.visible"]}),
v.renderable()],c.prototype,"actionsMenuOpen",null);l([t.property()],c.prototype,"alignment",void 0);l([t.aliasOf("viewModel.autoCloseEnabled")],c.prototype,"autoCloseEnabled",void 0);l([t.aliasOf("viewModel.autoOpenEnabled")],c.prototype,"autoOpenEnabled",void 0);l([t.aliasOf("viewModel.defaultPopupTemplateEnabled")],c.prototype,"defaultPopupTemplateEnabled",void 0);l([t.aliasOf("viewModel.content"),v.renderable()],c.prototype,"content",void 0);l([t.property(),v.renderable()],c.prototype,"collapsed",
void 0);l([t.property(),v.renderable()],c.prototype,"collapseEnabled",void 0);l([t.property({readOnly:!0,dependsOn:["dockEnabled","alignment"]}),v.renderable()],c.prototype,"currentAlignment",null);l([t.property({readOnly:!0,dependsOn:["viewModel.view.ready","dockEnabled","dockOptions"]}),v.renderable()],c.prototype,"currentDockPosition",null);l([t.property(),v.renderable()],c.prototype,"dockOptions",null);l([t.property(),v.renderable()],c.prototype,"dockEnabled",void 0);l([t.aliasOf("viewModel.featureCount"),
v.renderable()],c.prototype,"featureCount",void 0);l([t.property({dependsOn:["viewModel.visible"]}),v.renderable()],c.prototype,"featureMenuOpen",null);l([t.aliasOf("viewModel.features"),v.renderable()],c.prototype,"features",void 0);l([t.property(),v.renderable()],c.prototype,"featureNavigationEnabled",void 0);l([t.aliasOf("viewModel.goToOverride")],c.prototype,"goToOverride",void 0);l([t.aliasOf("viewModel.highlightEnabled")],c.prototype,"highlightEnabled",void 0);l([t.aliasOf("viewModel.location"),
v.renderable()],c.prototype,"location",void 0);l([t.property({readOnly:!0}),v.renderable()],c.prototype,"featureWidgets",void 0);l([t.aliasOf("viewModel.promises")],c.prototype,"promises",void 0);l([t.aliasOf("viewModel.selectedFeature"),v.renderable()],c.prototype,"selectedFeature",void 0);l([t.aliasOf("viewModel.selectedFeatureIndex"),v.renderable()],c.prototype,"selectedFeatureIndex",void 0);l([t.property({readOnly:!0}),v.renderable()],c.prototype,"selectedFeatureWidget",void 0);l([t.property()],
c.prototype,"spinnerEnabled",void 0);l([t.aliasOf("viewModel.title"),v.renderable()],c.prototype,"title",void 0);l([t.aliasOf("viewModel.updateLocationEnabled")],c.prototype,"updateLocationEnabled",void 0);l([t.aliasOf("viewModel.view")],c.prototype,"view",void 0);l([t.property({type:w}),v.renderable("viewModel.view.widthBreakpoint viewModel.allActions viewModel.screenLocation viewModel.screenLocationEnabled viewModel.state viewModel.pendingPromisesCount viewModel.promiseCount viewModel.waitingForResult".split(" ")),
v.vmEvent(["triggerAction","trigger-action"])],c.prototype,"viewModel",void 0);l([t.aliasOf("viewModel.visible"),v.renderable()],c.prototype,"visible",void 0);l([t.aliasOf("viewModel.clear")],c.prototype,"clear",null);l([t.aliasOf("viewModel.next")],c.prototype,"next",null);l([t.aliasOf("viewModel.previous")],c.prototype,"previous",null);l([t.aliasOf("viewModel.triggerAction")],c.prototype,"triggerAction",null);l([v.accessibleHandler()],c.prototype,"_toggleCollapsed",null);l([v.accessibleHandler()],
c.prototype,"_close",null);l([v.accessibleHandler()],c.prototype,"_toggleDockEnabled",null);l([v.accessibleHandler()],c.prototype,"_toggleFeatureMenu",null);l([v.accessibleHandler()],c.prototype,"_toggleActionsMenu",null);l([v.accessibleHandler()],c.prototype,"_triggerAction",null);l([v.accessibleHandler()],c.prototype,"_selectFeature",null);l([v.accessibleHandler()],c.prototype,"_next",null);l([v.accessibleHandler()],c.prototype,"_previous",null);return c=l([t.subclass("esri.widgets.Popup")],c)}(t.declared(x))})},
"esri/widgets/Spinner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/promiseUtils ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./Spinner/SpinnerViewModel ./support/widget".split(" "),function(p,c,n,l,k,d,h,g,f,b){return function(a){function e(b){b=a.call(this)||this;b._animationDelay=500;b._animationPromise=null;b.location=null;b.view=null;b.viewModel=new f;b.visible=!1;return b}n(e,a);e.prototype.postInitialize=
function(){var a=this;this.own([d.watch(this,"visible",function(b){return a._visibleChange(b)})])};e.prototype.destroy=function(){this._animationPromise=null};e.prototype.show=function(a){var b=this,e=a.location;a=a.promise;e&&(this.viewModel.location=e);this.visible=!0;e=function(){return b.hide()};a&&a.catch(function(){}).then(e)};e.prototype.hide=function(){this.visible=!1};e.prototype.render=function(){var a,e=this.visible,d=!!this.viewModel.screenLocation,e=(a={},a["esri-spinner--start"]=e&&
d,a["esri-spinner--finish"]=!e&&d,a);a=this._getPositionStyles();return b.tsx("div",{class:this.classes("esri-spinner",e),styles:a})};e.prototype._visibleChange=function(a){var b=this;if(a)this.viewModel.screenLocationEnabled=!0;else{var e=k.after(this._animationDelay);this._animationPromise=e;e.catch(function(){}).then(function(){b._animationPromise===e&&(b.viewModel.screenLocationEnabled=!1,b._animationPromise=null)})}};e.prototype._getPositionStyles=function(){var a=this.viewModel,b=a.screenLocation,
a=a.view;if(!a||!b)return{};a=a.padding;return{left:b.x-a.left+"px",top:b.y-a.top+"px"}};l([h.aliasOf("viewModel.location")],e.prototype,"location",void 0);l([h.aliasOf("viewModel.view")],e.prototype,"view",void 0);l([h.property({type:f}),b.renderable(["viewModel.screenLocation","viewModel.screenLocationEnabled"])],e.prototype,"viewModel",void 0);l([h.aliasOf("viewModel.visible")],e.prototype,"visible",void 0);return e=l([h.subclass("esri.widgets.Spinner")],e)}(h.declared(g))})},"esri/widgets/Widget":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/Collection ../core/domUtils ../core/Evented ../core/Handles ../core/Logger ../core/watchUtils ../core/accessorSupport/decorators ./support/widget maquette".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u){var t=a.getLogger("esri.widgets.Widget"),r=0;return function(a){function d(e,d){e=a.call(this)||this;e._attached=!1;e.destroyed=!1;e.domNode=null;e.iconClass="esri-icon-checkbox-unchecked";e.label=e.declaredClass.split(".").pop();e.visible=!0;e._internalHandles=new b;e.render=e.render.bind(e);return e}l(d,a);d.prototype.normalizeCtorArgs=function(a,b){a=n({},a);b&&(a.container=b);return a};d.prototype.initialize=function(){var a=this;this._internalHandles.add(this._renderableProps.map(function(b){return e.init(a,
b,function(a,e){var d=this;h.isCollection(e)&&this._internalHandles.remove(this.declaredClass+":"+b+"-collection-change-event-listener");h.isCollection(a)&&(a=a.on("change",function(){return d.scheduleRender()}),this._internalHandles.add(a,this.declaredClass+":"+b+"-collection-change-event-listener"));this.scheduleRender()})}));this._delegatedEventNames.length&&this._internalHandles.add(e.init(this,"viewModel",function(){a._get("viewModel")&&a._internalHandles.remove("delegated-events");a._delegatedEventNames.map(function(b){return a.viewModel.on(b,
function(e){a.emit(b,e)})})}),"delegated-events");this.postInitialize();this._internalHandles.add(e.whenOnce(this,"container",function(b){return a._attach(b)}))};d.prototype.postInitialize=function(){};d.prototype.destroy=function(){this.destroyed||(this.viewModel&&(this.viewModel.destroy(),this.viewModel=null),this._detach(this.container),this._internalHandles.destroy(),this._emitter.clear(),this._set("destroyed",!0))};d.prototype.startup=function(){t.warn("Widget.startup() is deprecated and no longer needed")};
Object.defineProperty(d.prototype,"container",{set:function(a){this._get("container")||this._set("container",a)},enumerable:!0,configurable:!0});d.prototype.castContainer=function(a){return g.byId(a)};Object.defineProperty(d.prototype,"id",{get:function(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+r++},set:function(a){a&&this._set("id",a)},enumerable:!0,configurable:!0});d.prototype.scheduleRender=function(){this._projector.scheduleRender()};d.prototype.classes=
function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return q.classes.apply(this,a)};d.prototype.own=function(a){1<arguments.length&&(a=Array.prototype.slice.call(arguments));this._internalHandles.add(a)};d.prototype.renderNow=function(){this._projector.renderNow()};d.prototype._attach=function(a){a&&(this._projector.merge(a,this.render),this._attached=!0)};d.prototype._detach=function(a){a&&this._attached&&(this._projector.detach(this.render),a.parentNode&&a.parentNode.removeChild(a),
this._attached=!1)};k([m.shared(u.createProjector())],d.prototype,"_projector",void 0);k([m.shared([])],d.prototype,"_renderableProps",void 0);k([m.shared([])],d.prototype,"_delegatedEventNames",void 0);k([m.property({value:null})],d.prototype,"container",null);k([m.cast("container")],d.prototype,"castContainer",null);k([m.property({readOnly:!0})],d.prototype,"destroyed",void 0);k([m.property({aliasOf:"container"})],d.prototype,"domNode",void 0);k([m.property()],d.prototype,"iconClass",void 0);k([m.property({dependsOn:["container"]})],
d.prototype,"id",null);k([m.property()],d.prototype,"label",void 0);k([m.property()],d.prototype,"viewModel",void 0);k([m.property()],d.prototype,"visible",void 0);return d=k([m.subclass("esri.widgets.Widget")],d)}(m.declared(d,f))})},"esri/widgets/Spinner/SpinnerViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../support/AnchorElementViewModel".split(" "),function(p,c,n,l,k,d){return function(d){function c(f){f=
d.call(this,f)||this;f.visible=!1;return f}n(c,d);l([k.property()],c.prototype,"visible",void 0);return c=l([k.subclass("esri.widgets.CompassViewModel")],c)}(k.declared(d))})},"esri/widgets/support/AnchorElementViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Evented ../../core/Handles ../../core/watchUtils ../../core/watchUtils ../../core/accessorSupport/decorators".split(" "),function(p,c,n,
l,k,d,h,g,f,b){return function(a){function e(b){var e=a.call(this)||this;e._anchorHandles=new h;e.location=null;e.screenLocation=null;e.screenLocationEnabled=!1;e.view=null;e._anchorHandles.add([f.watch(e,["screenLocationEnabled","location","view.size","view.stationary"],function(){return e._updateScreenPointAndHandle()}),f.watch(e,["view","view.ready"],function(){return e._wireUpView()})]);return e}n(e,a);e.prototype.destroy=function(){this.view=null;this._anchorHandles&&this._anchorHandles.destroy();
this._viewpointHandle=this._anchorHandles=null};e.prototype._wireUpView=function(){var a=this;this._anchorHandles.remove("view");this._viewpointHandle=null;if(this.get("view.ready")){this._setScreenLocation();var b=this.view,b=g.pausable(b,"3d"===b.type?"camera":"viewpoint",function(){return a._viewpointChange()});this._anchorHandles.add(b,"view");this._viewpointHandle=b;this._toggleWatchingViewpoint()}};e.prototype._viewpointChange=function(){this._setScreenLocation();this.emit("view-change")};e.prototype._updateScreenPointAndHandle=
function(){this._setScreenLocation();this._toggleWatchingViewpoint()};e.prototype._toggleWatchingViewpoint=function(){var a=this._viewpointHandle,b=this.screenLocationEnabled;a&&(this.location&&b?a.resume():a.pause())};e.prototype._setScreenLocation=function(){var a=this.location,b=this.view,e=this.screenLocationEnabled,d=this.get("view.ready"),a=e&&a&&d?b.toScreen(a):null;this._set("screenLocation",a)};l([b.property()],e.prototype,"location",void 0);l([b.property({readOnly:!0})],e.prototype,"screenLocation",
void 0);l([b.property()],e.prototype,"screenLocationEnabled",void 0);l([b.property()],e.prototype,"view",void 0);return e=l([b.subclass("esri.widgets.support.AnchorElementViewModel")],e)}(b.declared(k,d))})},"esri/widgets/Popup/PopupViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../geometry ../../core/Collection ../../core/compilerUtils ../../core/Error ../../core/Handles ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/support/webMercatorUtils ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionToggle ../../views/support/layerViewUtils ./actions ../support/AnchorElementViewModel ../support/GoTo".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z,A){var B=h.ofType({key:"type",defaultKeyValue:"button",base:r,typeMap:{button:x,toggle:w}}),D=a.getLogger("esri.widgets.Popup.PopupViewModel");return function(a){function c(e){e=a.call(this)||this;e._handles=new b;e._pendingPromises=new Set;e._zoomToLocation=null;e._fetchFeaturesController=null;e.actions=new B([y.zoomToFeature.clone()]);e.defaultPopupTemplateEnabled=!1;e.autoCloseEnabled=!1;e.autoOpenEnabled=!0;e.content=null;e.highlightEnabled=
!0;e.title=null;e.updateLocationEnabled=!1;e.view=null;e.visible=!1;e.zoomFactor=4;return e}n(c,a);c.prototype.initialize=function(){var a=this;this._handles.add([q.init(this,"autoOpenEnabled",this._autoOpenEnabledChange),this.on("view-change",this._autoClose),q.watch(this,["highlightEnabled","selectedFeature","visible","view"],this._highlightFeature),q.watch(this,"view.animation.state",function(b){a._zoomToLocation||(y.zoomToFeature.disabled="waiting-for-target"===b)}),q.watch(this,"location",function(b){var e=
a.selectedFeature;a.updateLocationEnabled&&b&&(!e||e.geometry)&&a.centerAtLocation()}),q.watch(this,"selectedFeature",function(b){if(b){var d=a.location,f=a.updateLocationEnabled,m=a.view;!f&&d||!b.geometry?f&&!b.geometry&&a.centerAtLocation().then(function(){a.location=m.center.clone()}):a.location=e.unwrap(a._getPointFromGeometry(b.geometry))}}),this.on("trigger-action",function(b){return y.triggerAction({event:b,view:a.view})})])};c.prototype.destroy=function(){this._cancelFetchingFeatures();this._handles.destroy();
this._handles=null;this._pendingPromises.clear();this.view=null};Object.defineProperty(c.prototype,"allActions",{get:function(){var a=this._get("allActions")||new B;a.removeAll();var b=this.selectedFeature&&("function"===typeof this.selectedFeature.getEffectivePopupTemplate&&this.selectedFeature.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled)||this.selectedFeature.popupTemplate),e=b&&b.actions;(b=b&&b.overwriteActions?e:e?e.concat(this.actions):this.actions)&&b.filter(Boolean).forEach(function(b){return a.add(b)});
return a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"featureCount",{get:function(){return this.features.length},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"features",{get:function(){return this._get("features")||[]},set:function(a){a=a||[];this._set("features",a);var b=this.pendingPromisesCount,e=this.selectedFeatureIndex,d=this.promiseCount&&a.length;d&&b&&-1===e?this.selectedFeatureIndex=0:d&&-1!==e||(this.selectedFeatureIndex=a.length?0:-1)},enumerable:!0,
configurable:!0});Object.defineProperty(c.prototype,"location",{get:function(){return this._get("location")||null},set:function(a){var b=this.get("view.spatialReference.isWebMercator");a&&a.get("spatialReference.isWGS84")&&b&&(a=t.geographicToWebMercator(a));this._set("location",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"pendingPromisesCount",{get:function(){return this._pendingPromises.size},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"waitingForResult",
{get:function(){return 0<this.pendingPromisesCount&&0===this.featureCount},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"promiseCount",{get:function(){return this.promises.length},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"promises",{get:function(){return this._get("promises")||[]},set:function(a){var b=this;this._pendingPromises.clear();this.features=[];Array.isArray(a)&&a.length?(this._set("promises",a),a=a.slice(0),a.forEach(function(a){b._pendingPromises.add(a);
a.then(function(e){b._pendingPromises.has(a)&&b._updateFeatures(e);b._updatePendingPromises(a)},function(){return b._updatePendingPromises(a)})})):this._set("promises",[]);this.notifyChange("pendingPromisesCount")},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"selectedFeature",{get:function(){var a=this.selectedFeatureIndex;return-1===a?null:this.features[a]||null},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"selectedFeatureIndex",{get:function(){var a=this._get("selectedFeatureIndex");
return"number"===typeof a?a:-1},set:function(a){var b=this.featureCount;a=isNaN(a)||-1>a||!b?-1:(a+b)%b;this._set("selectedFeatureIndex",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0});c.prototype.centerAtLocation=function(){var a=this.view,b=this._getSelectedTarget();return b?this.callGoTo({target:{target:b,scale:a.scale}}):(a=new f("center-at-location:invalid-target-or-view",
"Cannot center at a location without a target and view.",{target:b,view:a}),D.error(a),m.reject(a))};c.prototype.clear=function(){this.set({promises:[],features:[],content:null,title:null,location:null})};c.prototype.open=function(a){var b=this;a=k({updateLocationEnabled:!1,promises:[],fetchFeatures:!1,visible:!1},a);var e=a.fetchFeatures;delete a.fetchFeatures;e=e?this._fetchFeatures(a.location||this.location):m.resolve();this.set(a);e.then(function(){b._setVisibleWhenContentExists()})};c.prototype.triggerAction=
function(a){(a=this.allActions.getItemAt(a))&&this.emit("trigger-action",{action:a})};c.prototype.next=function(){this.selectedFeatureIndex+=1;return this};c.prototype.previous=function(){--this.selectedFeatureIndex;return this};c.prototype.zoomToLocation=function(){var a=this,b=this.location,e=this.selectedFeature,d=this.view,c=this.zoomFactor,g=this._getSelectedTarget();if(!g)return b=new f("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:g,view:d}),
D.error(b),m.reject(b);var d=d.scale/c,h=this.get("selectedFeature.geometry")||b,k=h&&"point"===h.type&&this._isScreenSize(e);y.zoomToFeature.active=!0;y.zoomToFeature.disabled=!0;return this._zoomToLocation=b=this.callGoTo({target:{target:g,scale:k?d:void 0}}).then(function(){k&&(a.location=h);y.zoomToFeature.active=!1;y.zoomToFeature.disabled=!1;a._zoomToLocation=null}).catch(function(){y.zoomToFeature.active=!1;y.zoomToFeature.disabled=!1;a._zoomToLocation=null})};c.prototype._getSelectedTarget=
function(){var a=this.selectedFeature,b=this.location,e=this.view;if(!e)return null;var e="3d"===e.type,d=this.get("selectedFeature.geometry");return e?a||b:d||b};c.prototype._fetchPopupFeatures=function(a){var b=this.view;this._cancelFetchingFeatures();if(!b||!a)return a=new f("fetch-features:invalid-screenPoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:a,view:b}),D.error(a),m.reject(a);var e=m.createAbortController();this._fetchFeaturesController=e;return b.fetchPopupFeatures(a,
{defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:e.signal})};c.prototype._autoOpenEnabledChange=function(){var a=this,b=this._handles,e=this.autoOpenEnabled;b.remove("auto-fetch-features");e&&(e=q.on(this,"view","click",function(b){a.view.toolViewManager.handlesClickEvent(b)||"mouse"===b.pointerType&&0!==b.button||a._fetchFeaturesAndOpen(b)}),b.add(e,"auto-fetch-features"))};c.prototype._cancelFetchingFeatures=function(){var a=this._fetchFeaturesController;a&&a.abort();this._fetchFeaturesController=
null};c.prototype._fetchFeatures=function(a){var b=this,e=this.view;if(!a||!e)return a=new f("open:invalid-location-or-view","Cannot fetch content without a location and view.",{location:a,view:e}),D.error(a),m.reject(a);a="function"===typeof e.toScreen?e.toScreen(a):null;return this._fetchPopupFeatures(a).then(function(a){b.promises=a.promises})};c.prototype._fetchFeaturesAndOpen=function(a){var b=a.mapPoint,e=this.view;this._fetchPopupFeatures(a.screenPoint).then(function(a){e.popup.open({location:a.location||
b,promises:a.promises});return a})};c.prototype._updatePendingPromises=function(a){a&&this._pendingPromises.has(a)&&(this._pendingPromises.delete(a),this.notifyChange("pendingPromisesCount"))};c.prototype._setVisibleWhenContentExists=function(){var a=this,b=this._handles,e=this.promiseCount;b.remove("pendingVisible");e?(e=q.init(this,"pendingPromisesCount",function(e){a.featureCount&&(a.set("visible",!0),b.remove("pendingVisible"));e||b.remove("pendingVisible")}),b.add(e,"pendingVisible")):this.set("visible",
!0)};c.prototype._autoClose=function(){this.autoCloseEnabled&&(this.visible=!1)};c.prototype._isScreenSize=function(a){var b=this.view;if("3d"!==b.type||!a||"esri.Graphic"!==a.declaredClass)return!0;if((b=b.getViewForGraphic(a))&&"whenGraphicBounds"in b){var e=!1;b.whenGraphicBounds(a,{useViewElevation:!0}).then(function(a){e=!a||!a.boundingBox||a.boundingBox[0]===a.boundingBox[3]&&a.boundingBox[1]===a.boundingBox[4]&&a.boundingBox[2]===a.boundingBox[5]});return e}return!0};c.prototype._getPointFromGeometry=
function(a){return e.isNone(a)?null:"point"===a.type?a:"extent"===a.type?a.center:"polygon"===a.type?a.centroid:"multipoint"===a.type||"polyline"===a.type?a.extent.center:null};c.prototype._highlightFeature=function(){var a=this;this._handles.remove("highlight");var b=this.selectedFeature,e=this.highlightEnabled,d=this.view,f=this.visible;if(b&&d&&e&&f){var m=b.layer;m&&d.when().then(function(){g.typeCast(d)().whenLayerView(m).then(function(e){if(e&&v.hasHighlight(e)){var d=m.objectIdField,f=b.attributes;
e=e.highlight(f&&f[d]||b);a._handles.add(e,"highlight")}})})}};c.prototype._updateFeatures=function(a){var b=this.features;a&&a.length&&(b.length?(a=a.filter(function(a){return-1===b.indexOf(a)}),this.features=b.concat(a)):this.features=a)};l([u.property({type:B})],c.prototype,"actions",void 0);l([u.property({dependsOn:["actions.length","selectedFeature.sourceLayer.popupTemplate.actions.length","selectedFeature.sourceLayer.popupTemplate.overwriteActions","selectedFeature.popupTemplate.actions.length",
"selectedFeature.popupTemplate.overwriteActions"],readOnly:!0})],c.prototype,"allActions",null);l([u.property({type:Boolean})],c.prototype,"defaultPopupTemplateEnabled",void 0);l([u.property()],c.prototype,"autoCloseEnabled",void 0);l([u.property()],c.prototype,"autoOpenEnabled",void 0);l([u.property()],c.prototype,"content",void 0);l([u.property({readOnly:!0,dependsOn:["features"]})],c.prototype,"featureCount",null);l([u.property()],c.prototype,"features",null);l([u.property()],c.prototype,"highlightEnabled",
void 0);l([u.property({type:d.Point})],c.prototype,"location",null);l([u.property({readOnly:!0,dependsOn:["promises"]})],c.prototype,"pendingPromisesCount",null);l([u.property({readOnly:!0,dependsOn:["featureCount","pendingPromisesCount"]})],c.prototype,"waitingForResult",null);l([u.property({readOnly:!0,dependsOn:["promises"]})],c.prototype,"promiseCount",null);l([u.property()],c.prototype,"promises",null);l([u.property({value:null,readOnly:!0,dependsOn:["features","selectedFeatureIndex","updateLocationEnabled"]})],
c.prototype,"selectedFeature",null);l([u.property({value:-1})],c.prototype,"selectedFeatureIndex",null);l([u.property({readOnly:!0,dependsOn:["view.ready"]})],c.prototype,"state",null);l([u.property()],c.prototype,"title",void 0);l([u.property()],c.prototype,"updateLocationEnabled",void 0);l([u.property()],c.prototype,"view",void 0);l([u.property()],c.prototype,"visible",void 0);l([u.property()],c.prototype,"zoomFactor",void 0);l([u.property()],c.prototype,"centerAtLocation",null);l([u.property()],
c.prototype,"clear",null);l([u.property()],c.prototype,"triggerAction",null);l([u.property()],c.prototype,"next",null);l([u.property()],c.prototype,"previous",null);l([u.property()],c.prototype,"zoomToLocation",null);return c=l([u.subclass("esri.widgets.Popup.PopupViewModel")],c)}(u.declared(z,A))})},"esri/views/support/layerViewUtils":function(){define(["require","exports","../../core/maybe"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.hasHighlight=function(c){return c&&"function"===
typeof c.highlight};c.scaleBoundsPredicate=function(c,k,d){return n.isNone(c)||c>d&&(0===k||c<k)};c.extractSafeScaleBounds=function(c){return{minScale:c.minScale||0,maxScale:c.maxScale||0}}})},"esri/widgets/Popup/actions":function(){define("require exports dojo/i18n!../../nls/common dojo/i18n!./nls/Popup ../../core/Error ../../core/promiseUtils ../../support/actions/ActionButton".split(" "),function(p,c,n,l,k,d,h){Object.defineProperty(c,"__esModule",{value:!0});c.zoomToFeature=new h({id:"zoom-to-feature",
title:l.zoom,className:"esri-icon-zoom-in-magnifying-glass"});c.removeSelectedFeature=new h({id:"remove-selected-feature",title:n.remove,className:"esri-icon-trash"});c.all=[c.zoomToFeature,c.removeSelectedFeature];c.triggerAction=function(g){var f=g.view;g=g.event.action;var b=f&&f.popup;if(!g)return d.reject(new k("trigger-action:missing-arguments","Event has no action"));if(!b)return d.reject(new k("trigger-action:missing-arguments","view.popup is missing"));var a=g.disabled,e=g.id;if(!e)return d.reject(new k("trigger-action:invalid-action",
"action.id is missing"));if(a)return d.reject(new k("trigger-action:invalid-action","Action is disabled"));if(e===c.zoomToFeature.id)return b.viewModel.zoomToLocation();if(e===c.removeSelectedFeature.id){b.close();g=b.selectedFeature;if(!g)return d.reject(new k("trigger-action:"+c.removeSelectedFeature.id,"selectedFeature is required",{selectedFeature:g}));(b=g.sourceLayer)?b.remove(g):f.graphics.remove(g);return d.resolve()}return d.reject(new k("trigger-action:unknown-action","Unable to identify action to perform",
{action:g,popup:b}))}})},"esri/widgets/support/GoTo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(p,c,n,l,k,d){return function(c){function g(){var d=null!==c&&c.apply(this,arguments)||this;d.goToOverride=null;d.view=null;return d}n(g,c);g.prototype.callGoTo=function(d){var b=this.view;return this.goToOverride?this.goToOverride(b,d):b.goTo(d.target,d.options)};
l([d.property()],g.prototype,"goToOverride",void 0);l([d.property()],g.prototype,"view",void 0);return g=l([d.subclass("esri.widgets.support.GoTo")],g)}(d.declared(k))})},"esri/views/GroundView":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/Collection ../core/Handles ../core/watchUtils ../core/accessorSupport/decorators ./support/GroundViewElevationSampler".split(" "),function(p,c,n,l,k,d,h,g,f,b){return function(a){function e(b){b=
a.call(this)||this;b.handles=new h;b.view=null;b.layerViews=new d;return b}n(e,a);e.prototype.initialize=function(){var a=this;this.handles.add(g.when(this,"view.map.ground",function(a){return a.load()}));this.handles.add(this.layerViews.on("after-changes",function(){return a.layerViewsAfterChangesHandler()}))};e.prototype.destroy=function(){this._set("view",null);this.handles&&(this.handles.destroy(),this.handles=null)};Object.defineProperty(e.prototype,"elevationSampler",{get:function(){return this.view&&
"2d"!==this.view.type&&this.view.ready&&this.view.basemapTerrain&&this.view.basemapTerrain.ready?new b({view:this.view}):null},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"updating",{get:function(){return this.suspended?!1:this.layerViews.some(function(a){return a.updating})},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"suspended",{get:function(){return!this.view||this.view.suspended},enumerable:!0,configurable:!0});e.prototype.layerViewsAfterChangesHandler=
function(){var a=this;this.handles.remove("updating");this.handles.add(this.layerViews.map(function(b){return b.watch("updating",function(){return a.updateUpdating()},!0)}).toArray(),"updating");this.updateUpdating()};e.prototype.updateUpdating=function(){this.notifyChange("updating")};l([f.property({readOnly:!0,dependsOn:["view.ready","view.basemapTerrain?.ready"]})],e.prototype,"elevationSampler",null);l([f.property({type:Boolean,dependsOn:["suspended"],readOnly:!0})],e.prototype,"updating",null);
l([f.property({constructOnly:!0})],e.prototype,"view",void 0);l([f.property({type:d,readOnly:!0})],e.prototype,"layerViews",void 0);l([f.property({readOnly:!0,dependsOn:["view.suspended"]})],e.prototype,"suspended",null);return e=l([f.subclass("esri.views.GroundView")],e)}(f.declared(k))})},"esri/views/support/GroundViewElevationSampler":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Evented ../../core/Logger ../../core/accessorSupport/decorators ../../geometry/support/aaBoundingRect ../../geometry/support/contains ../../geometry/support/webMercatorUtils ../../layers/support/ElevationSampler ../3d/terrain/TerrainConst".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m){var q=h.getLogger("esri.views.support.GroundViewElevationSampler");return function(d){function c(a){a=d.call(this,a)||this;a.demResolution={min:-1,max:-1};a.noDataValue=m.ELEVATION_NODATA_VALUE;return a}n(c,d);c.prototype.initialize=function(){var a=this;this.view.basemapTerrain.on("elevation-change",function(){return a.emit("changed",{})})};Object.defineProperty(c.prototype,"extent",{get:function(){var a=this.view.basemapTerrain;return a.extent&&a.spatialReference?
f.toExtent(a.extent,a.spatialReference):null},enumerable:!0,configurable:!0});c.prototype.elevationAt=function(e){var d=e.spatialReference,f=this.spatialReference;if(!a.canProject(d,f))return q.error("Cannot sample elevation at a location with spatial reference ("+(d?d.wkid:"unknown")+") different from the view ("+f.wkid+")"),null;b.extentContainsPoint(this.extent,e)||(d=this.extent,q.warn("#elevationAt()","Point used to sample elevation ("+e.x+", "+e.y+") is outside of the sampler extent ("+(d.xmin+
", "+d.ymin+", "+d.xmax+", "+d.ymax)+")"));return this.view.basemapTerrain.getElevation(e)};c.prototype.queryElevation=function(a){return e.updateGeometryElevation(a.clone(),this)};l([g.property({readOnly:!0})],c.prototype,"demResolution",void 0);l([g.property({readOnly:!0,dependsOn:["view.basemapTerrain.extent","view.basemapTerrain.spatialReference"]})],c.prototype,"extent",null);l([g.property({readOnly:!0})],c.prototype,"noDataValue",void 0);l([g.property({readOnly:!0,aliasOf:"view.basemapTerrain.spatialReference"})],
c.prototype,"spatialReference",void 0);l([g.property({constructOnly:!0})],c.prototype,"view",void 0);return c=l([g.subclass("esri.views.support.GroundViewElevationSampler")],c)}(g.declared(k,d))})},"esri/layers/support/ElevationSampler":function(){define("require exports ../../core/tsSupport/extendsHelper ../../geometry ../../core/compilerUtils ../../core/Logger ../../core/unitUtils ../../geometry/support/aaBoundingRect ../../geometry/support/contains ../../geometry/support/webMercatorUtils".split(" "),
function(p,c,n,l,k,d,h,g,f,b){function a(a,b){var d=e(a,b.spatialReference);if(!d)return null;switch(a.type){case "point":a.z=b.elevationAt(d)||0;break;case "polyline":u.spatialReference=d.spatialReference;for(var f=a.hasM&&!a.hasZ,m=0;m<a.paths.length;m++)for(var c=a.paths[m],g=d.paths[m],h=0;h<c.length;h++){var q=c[h],l=g[h];u.x=l[0];u.y=l[1];l=b.elevationAt(u)||0;f&&(q[3]=q[2]);q[2]=l}a.hasZ=!0;break;case "multipoint":u.spatialReference=d.spatialReference;f=a.hasM&&!a.hasZ;for(m=0;m<a.points.length;m++)c=
a.points[m],g=d.points[m],u.x=g[0],u.y=g[1],g=b.elevationAt(u)||0,f&&(c[3]=c[2]),c[2]=g;a.hasZ=!0;break;default:k.neverReached(a)}return a}function e(a,e){var d=a.spatialReference;return d.equals(e)?a:b.canProject(d,e)?b.project(a,e):(m.error("Cannot project geometry spatial reference (wkid:"+d.wkid+") to elevation sampler spatial reference (wkid:"+e.wkid+")"),null)}Object.defineProperty(c,"__esModule",{value:!0});var m=d.getLogger("esri.layers.support.ElevationSampler");p=function(){function b(){}
b.prototype.queryElevation=function(b){return a(b.clone(),this)};b.prototype.on=function(a,b){return t};b.prototype.projectIfRequired=function(a,b){return e(a,b)};return b}();c.ElevationSamplerBase=p;var q=function(a){function b(b,e,d){var f=a.call(this)||this;f.tile=b;f.noDataValue=d;f.extent=g.toExtent(b.tile.extent,e.spatialReference);d=h.getMetersPerUnitForSR(e.spatialReference);b=e.lodAt(b.tile.level).resolution*d;f.demResolution={min:b,max:b};return f}n(b,a);Object.defineProperty(b.prototype,
"spatialReference",{get:function(){return this.extent.spatialReference},enumerable:!0,configurable:!0});b.prototype.contains=function(a){a=this.projectIfRequired(a,this.spatialReference);return f.extentContainsPoint(this.extent,a)};b.prototype.elevationAt=function(a){var b=this.projectIfRequired(a,this.spatialReference);if(!b)return null;if(!this.contains(a)){var e=this.extent;m.warn("#elevationAt()","Point used to sample elevation ("+a.x+", "+a.y+") is outside of the sampler extent ("+(e.xmin+", "+
e.ymin+", "+e.xmax+", "+e.ymax)+")")}return this.tile.sample(b.x,b.y)};return b}(p);c.TileElevationSampler=q;p=function(a){function b(b,e,d){var f=a.call(this)||this,m;"number"===typeof e?(f.noDataValue=e,m=null):(m=e,f.noDataValue=d);f.samplers=m?b.map(function(a){return new q(a,m,f.noDataValue)}):b;if(b=f.samplers[0])for(f.extent=b.extent.clone(),b=b.demResolution,f.demResolution={min:b.min,max:b.max},b=1;b<f.samplers.length;b++)e=f.samplers[b],f.extent.union(e.extent),f.demResolution.min=Math.min(f.demResolution.min,
e.demResolution.min),f.demResolution.max=Math.max(f.demResolution.max,e.demResolution.max);else f.extent=g.toExtent(g.create(),m.spatialReference),f.demResolution={min:0,max:0};return f}n(b,a);Object.defineProperty(b.prototype,"spatialReference",{get:function(){return this.extent.spatialReference},enumerable:!0,configurable:!0});b.prototype.elevationAt=function(a){var b=this.projectIfRequired(a,this.spatialReference);if(!b)return null;for(var e=0,d=this.samplers;e<d.length;e++){var f=d[e];if(f.contains(b))return f.elevationAt(b)}m.warn("#elevationAt()",
"Point used to sample elevation ("+a.x+", "+a.y+") is outside of the sampler");return null};return b}(p);c.MultiTileElevationSampler=p;c.updateGeometryElevation=a;var u=new l.Point,t={remove:function(){}}})},"esri/views/3d/terrain/TerrainConst":function(){define(["require","exports","../../../geometry/support/aaBoundingRect","./TilingScheme"],function(p,c,n,l){Object.defineProperty(c,"__esModule",{value:!0});(function(c){c[c.ELEVATION=0]="ELEVATION";c[c.MAP=1]="MAP";c[c.COUNT=2]="COUNT"})(c.LayerClass||
(c.LayerClass={}));(function(c){c[c.NONE=0]="NONE";c[c.SPLIT=1]="SPLIT";c[c.VSPLITMERGE=2]="VSPLITMERGE";c[c.MERGE=4]="MERGE";c[c.GEOMETRY=8]="GEOMETRY";c[c.TEXTURE=16]="TEXTURE"})(c.TileUpdate||(c.TileUpdate={}));(function(c){c[c.BACK_TO_FRONT=-1]="BACK_TO_FRONT";c[c.NONE=0]="NONE";c[c.FRONT_TO_BACK=1]="FRONT_TO_BACK"})(c.RenderOrder||(c.RenderOrder={}));c.TILE_LOADING_DEBUGLOG=!1;c.MAX_ROOT_TILES=64;c.MAX_PATCH_TESSELATION=512;c.MAX_MEMORY_LOD_BIAS=2.5;c.ELEVATION_NODATA_VALUE=3.40282347E38/10;
c.START_LOADING_LEVEL_DELTA=8;c.LOADING_LEVEL_MODULO=2;c.ELEVATION_DESIRED_RESOLUTION_LEVEL=4;c.TILEMAP_SIZE_EXP=5;c.TILEMAP_SIZE=1<<c.TILEMAP_SIZE_EXP;c.WEBMERCATOR_WORLD_EXTENT=n.create();l.WebMercatorAuxiliarySphere.getExtent(0,0,0,c.WEBMERCATOR_WORLD_EXTENT);c.GEOGRAPHIC_WORLD_EXTENT=n.create([-180,-90,180,90]);c.TOO_MANY_ROOT_TILES_AFTER_CHANGE_ERROR="Cannot extend surface to encompass all layers because it would result in too many root tiles.";c.TOO_MANY_ROOT_TILES_FOR_LAYER_ERROR="Surface extent is too large for tile resolution at level 0.";
c.DEFAULT_TILE_BACKGROUND="data:image/png;base64,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";
c.GEOMETRY_VERTEX_STRIDE=5})},"esri/views/3d/terrain/TilingScheme":function(){define("require exports ../../../geometry ../../../core/Error ../../../core/unitUtils ../../../geometry/SpatialReference ../../../geometry/support/aaBoundingRect ../../../layers/support/TileInfo ../support/mathUtils ../support/projectionUtils".split(" "),function(p,c,n,l,k,d,h,g,f,b){var a=b.webMercator.x2lon,e=b.webMercator.y2lat;p=function(){function c(a){var e=c._checkUnsupported(a);if(e)throw e;this.spatialReference=
a.spatialReference;this._isWebMercator=this.spatialReference.isWebMercator;this._isWGS84Comparable=b.canProjectToWGS84ComparableLonLat(this.spatialReference);this.origin=[a.origin.x,a.origin.y];this.pixelSize=[a.size[0],a.size[1]];this.dpi=a.dpi;var d=a.lods.reduce(function(a,b,e){b.level<a.min&&(a.min=b.level,a.minIndex=e);a.max=Math.max(a.max,b.level);return a},{min:Infinity,minIndex:0,max:-Infinity}),f=a.lods[d.minIndex],m=Math.pow(2,f.level),e=f.resolution*m,f=f.scale*m;this.levels=Array(d.max+
1);for(d=0;d<this.levels.length;d++)this.levels[d]={resolution:e,scale:f,tileSize:[e*a.size[0],e*a.size[1]]},e/=2,f/=2}c.prototype.clone=function(){return new c(this.toTileInfo())};c.prototype.toTileInfo=function(){return new g({dpi:this.dpi,origin:{x:this.origin[0],y:this.origin[1],spatialReference:this.spatialReference},size:[this.pixelSize[0],this.pixelSize[1]],spatialReference:this.spatialReference,lods:this.levels.map(function(a,b){return{level:b,scale:a.scale,resolution:a.resolution}})})};c.prototype.getExtent=
function(b,d,c,m,g){void 0===m&&(m=h.create());var k=this.levels[b];b=k.tileSize[0];k=k.tileSize[1];m[0]=this.origin[0]+c*b;m[2]=m[0]+b;m[3]=this.origin[1]-d*k;m[1]=m[3]-k;g&&(this._isWebMercator?(g[0]=a(m[0]),g[1]=e(m[1]),g[2]=a(m[2]),g[3]=e(m[3])):this._isWGS84Comparable&&(g[0]=f.deg2rad(m[0]),g[1]=f.deg2rad(m[1]),g[2]=f.deg2rad(m[2]),g[3]=f.deg2rad(m[3])));return m};c.prototype.getExtentGeometry=function(a,b,e,d){void 0===d&&(d=new n.Extent);this.getExtent(a,b,e,m);d.spatialReference=this.spatialReference;
d.xmin=m[0];d.ymin=m[1];d.xmax=m[2];d.ymax=m[3];d.zmin=void 0;d.zmax=void 0;return d};c.prototype.ensureMaxLod=function(a){if(null==a)return!1;for(var b=!1;this.levels.length<=a;){var b=this.levels[this.levels.length-1],e=b.resolution/2;this.levels.push({resolution:e,scale:b.scale/2,tileSize:[e*this.pixelSize[0],e*this.pixelSize[1]]});b=!0}return b};c.prototype.capMaxLod=function(a){this.levels.length>a+1&&(this.levels.length=a+1)};c.prototype.getMaxLod=function(){return this.levels.length-1};c.prototype.scaleAtLevel=
function(a){return this.levels[0].scale/Math.pow(2,a)};c.prototype.levelAtScale=function(a){var b=this.levels[0].scale;return a>=b?0:Math.log(b/a)*Math.LOG2E};c.prototype.resolutionAtLevel=function(a){return this.levels[0].resolution/Math.pow(2,a)};c.prototype.compatibleWith=function(a){if(!(a instanceof c)){if(c._checkUnsupported(a))return!1;a=new c(a)}if(!a.spatialReference.equals(this.spatialReference)||a.pixelSize[0]!==this.pixelSize[0]||a.pixelSize[1]!==this.pixelSize[1])return!1;var b=Math.min(this.levels.length,
a.levels.length)-1,e=this.levels[b].resolution,d=.5*e;if(!f.floatEqualAbsolute(a.origin[0],this.origin[0],d)||!f.floatEqualAbsolute(a.origin[1],this.origin[1],d))return!1;d=.5*e/Math.pow(2,b)/Math.max(this.pixelSize[0],this.pixelSize[1])*12;return f.floatEqualAbsolute(e,a.levels[b].resolution,d)};c.prototype.rootTilesInExtent=function(a,b,e){var d=this.levels[0].tileSize;if(0===d[0]||0===d[1])return[];c.computeRowColExtent(a,d,this.origin,m);a=m[1];var f=m[3],g=m[0],h=m[2],k=h-g,q=f-a;k*q>e&&(e=Math.floor(Math.sqrt(e)),
q>e&&(a=a+Math.floor(.5*q)-Math.floor(.5*e),f=a+e),k>e&&(g=g+Math.floor(.5*k)-Math.floor(.5*e),h=g+e));e=Array((h-g)*(f-a));k=0;for(q=a;q<f;q++)for(var l=g;l<h;l++)e[k++]=[0,q,l];b&&(b[0]=this.origin[0]+g*d[0],b[1]=this.origin[1]-f*d[1],b[2]=this.origin[0]+h*d[0],b[3]=this.origin[1]-a*d[1]);return e};c.computeRowColExtent=function(a,b,e,d){var f=.001*(a[2]-a[0]+(a[3]-a[1]));d[0]=Math.floor((a[0]+f-e[0])/b[0]);d[2]=Math.ceil((a[2]-f-e[0])/b[0]);d[1]=Math.floor((e[1]-a[3]+f)/b[1]);d[3]=Math.ceil((e[1]-
a[1]-f)/b[1])};c.isPowerOfTwo=function(a){a=a.lods;var b=a[0].resolution*Math.pow(2,a[0].level);return!a.some(function(a){return!f.floatEqualRelative(a.resolution,b/Math.pow(2,a.level))})};c.hasGapInLevels=function(a){a=a.lods.map(function(a){return a.level});a.sort(function(a,b){return a-b});for(var b=1;b<a.length;b++)if(a[b]!==a[0]+b)return!0;return!1};c.tileSizeSupported=function(a){var b=a.size[1];return b===a.size[0]&&0===(b&b-1)&&128<=b&&512>=b};c._checkUnsupported=function(a){return a?1>a.lods.length?
new l("tilingscheme:generic","Tiling scheme must have at least one level"):c.isPowerOfTwo(a)?null:new l("tilingscheme:power-of-two","Tiling scheme must be power of two"):new l("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")};c.checkUnsupported=function(a){var b=c._checkUnsupported(a);return b?b:c.hasGapInLevels(a)?new l("tilingscheme:gaps","Tiling scheme levels must not have gaps between min and max level"):c.tileSizeSupported(a)?null:new l("tilingscheme:tile-size",
"Tiles must be square and size must be one of [128, 256, 512]")};c.fromExtent=function(a,b){var e=a[2]-a[0],d=a[3]-a[1],f=k.getMetersPerUnitForSR(b),m=1.2*Math.max(e,d);a=new c(new g({size:[256,256],origin:{x:a[0]-.5*(m-e),y:a[3]+.5*(m-d)},lods:[{level:0,resolution:m/256,scale:1/(256/96*.0254/(m*f))}],spatialReference:b}));a.ensureMaxLod(20);return a};c.makeWebMercatorAuxiliarySphere=function(a){void 0===a&&(a=19);var b=new c(c.WebMercatorAuxiliarySphereTileInfo);b.ensureMaxLod(a);return b};c.makeGCSWithTileSize=
function(a,b,e){void 0===b&&(b=256);void 0===e&&(e=16);var d=256/b;a=new c(new g({size:[b,b],origin:{x:-180,y:90,spatialReference:a},spatialReference:a,lods:[{level:0,resolution:.703125*d,scale:2.95497598570834E8*d}]}));a.ensureMaxLod(e);return a};c.WebMercatorAuxiliarySphereTileInfo=new g({size:[256,256],origin:{x:-2.0037508342787E7,y:2.0037508342787E7,spatialReference:d.WebMercator},spatialReference:d.WebMercator,lods:[{level:0,resolution:156543.03392800014,scale:5.91657527591555E8}]});c.WebMercatorAuxiliarySphere=
c.makeWebMercatorAuxiliarySphere(19);return c}();var m=h.create();return p})},"esri/views/PopupView":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/awaiterHelper ../core/tsSupport/generatorHelper ../core/Accessor ../core/arrayUtils ../core/asyncUtils ../core/maybe ../core/Promise ../core/promiseUtils ../core/accessorSupport/decorators".split(" "),function(p,c,n,l,k,d,h,g,f,b,a,e,m,q){return function(e){function c(){return null!==
e&&e.apply(this,arguments)||this}l(c,e);c.prototype.when=function(a,b){return this.inherited(arguments)};c.prototype.fetchPopupFeatures=function(a,e){return b.safeCast(this._fetchPopupFeaturesAsync(a,e))};c.prototype._fetchPopupFeaturesAsync=function(a,b){return d(this,void 0,void 0,function(){var e,d,c,g,k,q;return h(this,function(h){switch(h.label){case 0:return[4,this.when()];case 1:return h.sent(),[4,this._prepareFetchPopupFeatures(a,b)];case 2:return e=h.sent(),d=e.location,c=this._queryLayerPopupFeatures(e,
b),g=m.resolve(e.clientOnlyGraphics),k=[g].concat(c),q=m.eachAlwaysValues(k).then(f.flatten),[2,{promise:q,location:d,promises:k}]}})})};c.prototype._queryLayerPopupFeatures=function(b,e){var d=b.queryArea;return b.layerViewsAndGraphics.map(function(b){var f=b.layerView;b={clientGraphics:b.graphics,signal:a.isSome(e)?e.signal:null,defaultPopupTemplateEnabled:a.isSome(e)?!!e.defaultPopupTemplateEnabled:!1};return f.fetchPopupFeatures(d,b)})};c.prototype._isValidPopupGraphic=function(b,e){return b&&
!!b.getEffectivePopupTemplate(a.isSome(e)&&e.defaultPopupTemplateEnabled)};c.prototype._prepareFetchPopupFeatures=function(a,b){return d(this,void 0,void 0,function(){var e,d,f,c,m,g,k,q;return h(this,function(h){switch(h.label){case 0:return[4,this._popupHitTestGraphics(a,b)];case 1:return e=h.sent(),d=e.clientGraphics,f=e.queryArea,c=e.location,m=this._getFetchPopupLayerViews(),g=this._graphicsPerFetchPopupLayerView(d,m),k=g.layerViewsAndGraphics,q=g.clientOnlyGraphics,[2,{clientOnlyGraphics:q,
layerViewsAndGraphics:k,queryArea:f,location:c}]}})})};c.prototype._popupHitTestGraphics=function(a,b){return d(this,void 0,void 0,function(){var e,d,f,c,m,g,k=this;return h(this,function(h){switch(h.label){case 0:return[4,this.popupHitTest(a)];case 1:return e=h.sent(),d=e.results,f=e.mapPoint,c=d.filter(function(a){return k._isValidPopupGraphic(a.graphic,b)}),m=c.length?c[0].mapPoint:null,g=c.map(function(a){return a.graphic}),[2,{clientGraphics:g,queryArea:f,location:f||m}]}})})};c.prototype._getFetchPopupLayerViews=
function(){var a=this,b=[];this.allLayerViews.forEach(function(e){a._isValidPopupLayerView(e)&&b.push(e)});this._isValidPopupLayerView(this.graphicsView)&&b.push(this.graphicsView);return b.reverse()};c.prototype._isValidPopupLayerView=function(b){return a.isSome(b)&&(!("layer"in b)||!b.suspended)&&"function"===typeof b.fetchPopupFeatures};c.prototype._graphicsPerFetchPopupLayerView=function(a,b){var e=[],d=new Map;b=b.map(function(a){var b=[];"layer"in a?d.set(a.layer,b):d.set(a.graphics,b);return{layerView:a,
graphics:b}});for(var f=0;f<a.length;f++){var c=a[f],m=d.get(c.layer)||null;m?m.push(c):e.push(c)}return{layerViewsAndGraphics:b,clientOnlyGraphics:e}};return c=k([q.subclass("esri.views.PopupView")],c)}(q.declared(g,e))})},"esri/views/3d/constraints/Constraints":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators ./AltitudeConstraint ./ClipDistanceConstraint ./CollisionConstraint ./TiltConstraint".split(" "),
function(p,c,n,l,k,d,h,g,f,b){Object.defineProperty(c,"__esModule",{value:!0});p=function(a){function e(){var e=null!==a&&a.apply(this,arguments)||this;e.tilt=new b.default;e.altitude=new h.default;e.clipDistance=new g.default;e.collision=new f.default;return e}n(e,a);l([d.property({type:b.default})],e.prototype,"tilt",void 0);l([d.property({type:h.default})],e.prototype,"altitude",void 0);l([d.property({type:g.default})],e.prototype,"clipDistance",void 0);l([d.property({type:f.default})],e.prototype,
"collision",void 0);return e=l([d.subclass("esri.views.3d.constraints.Constraints")],e)}(d.declared(k));c.Constraints=p;c.default=p})},"esri/views/3d/constraints/AltitudeConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper dojo/_base/kernel ../../../core/Accessor ../../../core/accessorSupport/decorators ../state/Constraints".split(" "),function(p,c,n,l,k,d,h,g){Object.defineProperty(c,"__esModule",{value:!0});p=function(d){function b(){var a=
null!==d&&d.apply(this,arguments)||this;a.min=g.AltitudeDefault.min;a.max=g.AltitudeDefault.max;return a}n(b,d);Object.defineProperty(b.prototype,"mode",{get:function(){k.deprecated("esri.views.SceneView.constraints.altitude.mode is deprecated. The altitude constraint no longer applies to local scenes and does not have an automatic mode anymore.","","4.6");return"manual"},set:function(a){k.deprecated("esri.views.SceneView.constraints.altitude.mode is deprecated. The altitude constraint no longer applies to local scenes and does not have an automatic mode anymore.",
"","4.6")},enumerable:!0,configurable:!0});l([h.property({type:Number})],b.prototype,"min",void 0);l([h.property({type:Number})],b.prototype,"max",void 0);return b=l([h.subclass("esri.views.3d.constraints.AltitudeConstraint")],b)}(h.declared(d));c.AltitudeConstraint=p;c.default=p})},"esri/views/3d/state/Constraints":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/Logger ../../../core/mathUtils ../../../core/accessorSupport/decorators ../support/earthUtils ../support/mathUtils".split(" "),
function(p,c,n,l,k,d,h,g,f,b){Object.defineProperty(c,"__esModule",{value:!0});var a=d.getLogger("esri.views.3d.state.Constraints");p=function(d){function f(a){a=d.call(this)||this;a.collision=new m;a.distance=Infinity;a.minimumPoiDistance=4;return a}n(f,d);Object.defineProperty(f.prototype,"altitude",{get:function(){return"local"===this.mode?null:this._get("altitude")||null},set:function(b){"local"===this.mode?a.warn("Altitude constraint is ignored in local scenes"):this._set("altitude",b)},enumerable:!0,
configurable:!0});f.prototype.clampAltitude=function(a){return this.altitude?h.clamp(a,this.altitude.min,this.altitude.max):a};f.prototype.clampTilt=function(a,b){if(!this.tilt)return b;a=this.tilt(a);return h.clamp(b,a.min,a.max)};f.prototype.clampDistance=function(a){return Math.min(a,this.distance)};f.prototype.createDefaultTilt=function(){return"local"===this.mode?this.createDefaultTiltLocal():this.createDefaultTiltGlobal()};f.prototype.createConstantMaxTilt=function(a){return function(b,d){void 0===
d&&(d=e);d.min=c.TiltDefault.min;d.max=a;return d}};f.prototype.createDefaultTiltLocal=function(){var a=this.collision.enabled?b.makePiecewiseLinearFunction([[4E3,c.TiltDefault.max],[1E4,b.deg2rad(88)],[6E6,b.deg2rad(88)]]):function(){return c.TiltDefault.max};return function(b,d){void 0===d&&(d=e);d.min=c.TiltDefault.min;d.max=a(b);return d}};f.prototype.createDefaultTiltGlobal=function(){var a=this.collision.enabled?b.makePiecewiseLinearFunction([[4E3,c.TiltDefault.max],[5E4,b.deg2rad(88)],[6E6,
b.deg2rad(88)],[2E7,c.TiltDefault.min]]):b.makePiecewiseLinearFunction([[3E5,c.TiltDefault.max],[3E6,b.deg2rad(88)],[6E6,b.deg2rad(88)],[2E7,c.TiltDefault.min]]);return function(b,d){void 0===d&&(d=e);d.min=c.TiltDefault.min;d.max=a(b);return d}};l([g.property()],f.prototype,"altitude",null);l([g.property({readOnly:!0})],f.prototype,"collision",void 0);l([g.property()],f.prototype,"distance",void 0);l([g.property({readOnly:!0})],f.prototype,"minimumPoiDistance",void 0);l([g.property()],f.prototype,
"tilt",void 0);l([g.property({constructOnly:!0})],f.prototype,"mode",void 0);return f=l([g.subclass("esri.views.3d.state.Constraints")],f)}(g.declared(k));c.Constraints=p;c.AltitudeDefault={min:-2E5,max:4*f.earthRadius};c.TiltDefault={min:b.deg2rad(.5),max:b.deg2rad(179.5)};var e={min:0,max:0},m=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.enabled=!0;b.elevationMargin=5;return b}n(b,a);l([g.property({type:Boolean})],b.prototype,"enabled",void 0);l([g.property({type:Number})],
b.prototype,"elevationMargin",void 0);return b=l([g.subclass("esri.views.3d.state.Constraints.CollisionConstraint")],b)}(g.declared(k));c.default=p})},"esri/views/3d/constraints/ClipDistanceConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(p,c,n,l,k,d){Object.defineProperty(c,"__esModule",{value:!0});p=function(c){function g(){var d=
null!==c&&c.apply(this,arguments)||this;d.mode="auto";return d}n(g,c);Object.defineProperty(g.prototype,"near",{get:function(){return this._get("near")},set:function(d){this._set("near",d);d>=this._get("far")&&(this.far=d+1E-9);this.mode="manual"},enumerable:!0,configurable:!0});g.prototype.castNear=function(d){return Math.max(1E-8,d)};Object.defineProperty(g.prototype,"far",{get:function(){return this._get("far")},set:function(d){this._set("far",d);d<=this._get("near")&&(this.near=d-1E-9);this.mode=
"manual"},enumerable:!0,configurable:!0});g.prototype.castFar=function(d){return Math.max(1E-8,d)};g.prototype.autoUpdate=function(d,b){"auto"===this.mode&&(this._get("near")!==d&&this._set("near",d),this._get("far")!==b&&this._set("far",b))};l([d.property({type:Number,value:1E-8})],g.prototype,"near",null);l([d.cast("near")],g.prototype,"castNear",null);l([d.property({type:Number,value:1E-8})],g.prototype,"far",null);l([d.cast("far")],g.prototype,"castFar",null);l([d.property({type:["auto","manual"]})],
g.prototype,"mode",void 0);return g=l([d.subclass("esri.views.3d.constraints.ClipDistanceConstraint")],g)}(d.declared(k));c.ClipDistanceConstraint=p;c.default=p})},"esri/views/3d/constraints/CollisionConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper dojo/_base/kernel ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(p,c,n,l,k,d,h){Object.defineProperty(c,"__esModule",{value:!0});p=function(d){function f(){return null!==
d&&d.apply(this,arguments)||this}n(f,d);Object.defineProperty(f.prototype,"enabled",{set:function(b){k.deprecated("SceneView.constraint.collision.enabled","Use Map.ground.navigationConstraint instead","4.8");this._set("enabled",b)},enumerable:!0,configurable:!0});l([h.property({value:!0})],f.prototype,"enabled",null);return f=l([h.subclass("esri.views.3d.constraints.CollisionConstraint")],f)}(h.declared(d));c.CollisionConstraint=p;c.default=p})},"esri/views/3d/constraints/TiltConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/mathUtils ../../../core/accessorSupport/decorators ../state/Constraints ../support/mathUtils".split(" "),
function(p,c,n,l,k,d,h,g,f){Object.defineProperty(c,"__esModule",{value:!0});var b=f.rad2deg(g.TiltDefault.min),a=f.rad2deg(g.TiltDefault.max);p=function(e){function f(){var a=null!==e&&e.apply(this,arguments)||this;a.mode="auto";return a}n(f,e);Object.defineProperty(f.prototype,"max",{get:function(){return this._get("max")},set:function(a){this._set("max",a);this.mode="manual"},enumerable:!0,configurable:!0});f.prototype.castMax=function(e){return d.clamp(e,b,a)};f.prototype.autoUpdate=function(a){"auto"===
this.mode&&this._get("max")!==a&&this._set("max",a)};l([h.property({type:["auto","manual"]})],f.prototype,"mode",void 0);l([h.property({type:Number,value:a})],f.prototype,"max",null);l([h.cast("max")],f.prototype,"castMax",null);return f=l([h.subclass("esri.views.3d.constraints.TiltConstraint")],f)}(h.declared(k));c.TiltConstraint=p;c.default=p})},"esri/views/3d/environment/SceneViewEnvironment":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/assignHelper ../../../core/lang ../../../core/accessorSupport/decorators ../../../core/accessorSupport/ensureType ./SceneViewAtmosphere ./SceneViewLighting ../../../webscene/Environment ../../../webscene/Lighting".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e){return function(a){function c(b){b=a.call(this,b)||this;b.atmosphere=new f.default;return b}n(c,a);m=c;c.fromWebsceneEnvironment=function(a){a=a.cloneConstructProperties();return new m(k({},a,{lighting:b.SceneViewLighting.fromWebsceneLighting(a.lighting)}))};c.prototype.castLighting=function(a){return a?a instanceof b.SceneViewLighting?a:a instanceof e?this.lighting?this.lighting.cloneWithWebsceneLighting(a):b.SceneViewLighting.fromWebsceneLighting(a):g.ensureType(b.SceneViewLighting,
a):new b.SceneViewLighting};c.prototype.clone=function(){return new m({lighting:this.lighting.clone(),atmosphere:this.atmosphere.clone(),atmosphereEnabled:this.atmosphereEnabled,starsEnabled:this.starsEnabled,background:d.clone(this.background)})};var m;l([h.property({type:f.default,json:{read:!1}})],c.prototype,"atmosphere",void 0);l([h.property()],c.prototype,"lighting",void 0);l([h.cast("lighting")],c.prototype,"castLighting",null);return c=m=l([h.subclass("esri.views.3d.environment.SceneViewEnvironment")],
c)}(h.declared(a))})},"esri/views/3d/environment/SceneViewAtmosphere":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(p,c,n,l,k,d){Object.defineProperty(c,"__esModule",{value:!0});p=function(c){function g(){return null!==c&&c.apply(this,arguments)||this}n(g,c);f=g;Object.defineProperty(g.prototype,"quality",{set:function(b){-1!==["low","high"].indexOf(b)&&
this._set("quality",b)},enumerable:!0,configurable:!0});g.prototype.clone=function(){return new f({quality:this.quality})};var f;l([d.property({type:["low","high"],value:"low"})],g.prototype,"quality",null);return g=f=l([d.subclass("esri.views.3d.environment.SceneViewAtmosphere")],g)}(d.declared(k));c.SceneViewAtmosphere=p;c.default=p})},"esri/views/3d/environment/SceneViewLighting":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/assignHelper ../../../core/Evented ../../../core/accessorSupport/decorators ../../../webscene/Lighting".split(" "),
function(p,c,n,l,k,d,h,g){Object.defineProperty(c,"__esModule",{value:!0});p=function(b){function a(a){a=b.call(this,a)||this;a.positionTimezoneInfo={hours:0,minutes:0,seconds:0,autoUpdated:!0};a.cameraTrackingEnabled=!0;a.ambientOcclusionEnabled=!1;var e=(new Date).getFullYear(),e=new Date("March 15, "+e+" 12:00:00 UTC");a._set("defaultDate",e);a._set("date",e);return a}n(a,b);e=a;a.fromWebsceneLighting=function(a){return new e(k({},a.cloneConstructProperties()))};Object.defineProperty(a.prototype,
"defaultDate",{get:function(){return new Date(this._get("defaultDate").getTime())},set:function(a){var b=this._get("date")===this._get("defaultDate");a=new Date(a.getTime());this._set("defaultDate",a);b&&this._set("date",a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"date",{set:function(a){null!=a&&(this.positionTimezoneInfo.autoUpdated=!1,this._set("date",new Date(a.getTime())))},enumerable:!0,configurable:!0});a.prototype.autoUpdate=function(a,b){var e=this._calculateTimezoneOffset(this.positionTimezoneInfo);
this.positionTimezoneInfo.hours=b.hours;this.positionTimezoneInfo.minutes=b.minutes;this.positionTimezoneInfo.seconds=b.seconds;b=null;null!=a&&(this.positionTimezoneInfo.autoUpdated=!0,b=this.date&&this.date.getTime(),this._set("date",new Date(a.getTime())));var d=this._calculateTimezoneOffset(this.positionTimezoneInfo);e!==d&&(f.target=this,f.timezoneOffset=d,this.emit("timezone-will-change",f));if(null!=a)return b!==a.getTime()};a.prototype.clone=function(){var a=this._get("date")===this._get("defaultDate"),
b=new e(k({},this.cloneConstructProperties(),{defaultDate:this.defaultDate,cameraTrackingEnabled:this.cameraTrackingEnabled,ambientOcclusionEnabled:this.ambientOcclusionEnabled}));a&&b._set("date",b._get("defaultDate"));b.positionTimezoneInfo.autoUpdated=this.positionTimezoneInfo.autoUpdated;b.positionTimezoneInfo.hours=this.positionTimezoneInfo.hours;b.positionTimezoneInfo.minutes=this.positionTimezoneInfo.minutes;b.positionTimezoneInfo.seconds=this.positionTimezoneInfo.seconds;return b};a.prototype.cloneWithWebsceneLighting=
function(a){var b=this.clone();null!=a.date&&(b.date=a.date);b.directShadowsEnabled=a.directShadowsEnabled;b.displayUTCOffset=a.displayUTCOffset;return b};a.prototype._calculateTimezoneOffset=function(a){return Math.round(a.hours+a.minutes/60+a.seconds/3600)};var e;l([h.property({type:Boolean})],a.prototype,"cameraTrackingEnabled",void 0);l([h.property({type:Boolean})],a.prototype,"ambientOcclusionEnabled",void 0);l([h.property({type:Date})],a.prototype,"defaultDate",null);l([h.property({type:Date})],
a.prototype,"date",null);return a=e=l([h.subclass("esri.views.3d.environment.SceneViewLighting")],a)}(h.declared(g,d));c.SceneViewLighting=p;var f={target:null,timezoneOffset:0};c.default=p})},"esri/views/3d/environment/SceneViewEnvironmentManager":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Color ../../../core/Accessor ../../../core/Evented ../../../core/Handles ../../../core/maybe ../../../core/promiseUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../core/libs/gl-matrix-2/vec4f64 ./EnvironmentRenderer ../support/earthUtils ../support/projectionUtils ../support/sunUtils ../webgl-engine/lighting/Lightsources ../../../webscene/background/ColorBackground".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y){Object.defineProperty(c,"__esModule",{value:!0});var z=q.vec3f64.fromValues(.5773502691896258,-.5773502691896258,.5773502691896258);p=function(d){function c(a){a=d.call(this)||this;a._referencePointUpdateDelay=200;a._referencePointUpdateInterval=3E3;a._referencePointUpdateDistThreshold=1E6;a._referencePosUpdateQuery=null;a._referencePosMapCoordsRequested=null;a._viewHandles=new g;a._preserveAbsoluteDateTime=!1;a._trackingEnabled=!1;a._viewConnected=
!1;a._referencePosResetPreserveAbsoluteTime=!1;a.referencePosUpdateTimer=null;a._referencePosWGS84Comparable=null;a._referencePosMapCoords=null;a._mainLight=new v.MainLight;a._ambientLight=new v.AmbientLight;a._moonLight=new v.FillLight;a._renderer=null;a._resetReferencePosition();return a}n(c,d);c.prototype.destroy=function(){this._viewHandles.destroy();this.disposeRendering()};Object.defineProperty(c.prototype,"updating",{get:function(){return this._viewConnected?!this.disableQueries&&(!!this._referencePosUpdateQuery||
!!this._referencePosMapCoordsRequested)||this._renderer.updating:!1},enumerable:!0,configurable:!0});c.prototype.updateReadyChange=function(a){a&&!this._viewConnected?(this._viewConnected=!0,this.connectView(this.view),this.notifyChange("updating")):!a&&this._viewConnected&&(this._viewConnected=!1,this.disconnectView(this.view),this.notifyChange("updating"))};c.prototype.disposeRendering=function(){this._renderer&&(this._renderer.destroy(),this._renderer=null);this._resetReferencePosition()};c.prototype.connectView=
function(b){var e=this;this._renderer=new t({view:b});this._viewHandles.add([this.view.watch("environment.lighting.date",function(a){return e._lightingDateHandler(a)},!0),this.view.watch("interacting,stationary",this._interactingStationaryHandler.bind(this)),this.view.watch(["environment.lighting.directShadowsEnabled","environment.lighting.ambientOcclusionEnabled","environment.background.color"],function(){return e._updateRenderParamsHandler()}),this.view.watch("spatialReference",function(){return e._resetReferencePosition()}),
a.init(this.view,"viewingMode",function(){return e._resetReferencePosition()}),a.init(this.view,"environment.lighting.cameraTrackingEnabled",function(a){return e._updateCameraTracking(a)},!0),a.init(this,"view.state.camera",function(){return e._cameraHandler(null)},!0),this.watch("disableQueries",function(){return e._cameraHandler(null)})]);this._updateRenderParamsHandler();this._updateLightParams();this._cameraHandler()};c.prototype._updateCameraTracking=function(a){if(this._trackingEnabled=a)this._cameraHandler();
else if(a=this.get("view.environment.lighting"))a.positionTimezoneInfo.autoUpdated=!1};c.prototype.disconnectView=function(a){this.disposeRendering();this._viewHandles.removeAll()};c.prototype._lightingDateHandler=function(a){if(a){var b=this.view.environment.lighting;if(!b.positionTimezoneInfo.autoUpdated){this._preserveAbsoluteDateTime=!0;if(!x.canProjectToWGS84ComparableLonLat(this.view.spatialReference)){var e=this.view.camera.position;if(!this._referencePosMapCoords||!this._referencePosMapCoords.equals(e)){this._requestReferencePositionUpdate(e);
return}}this._preupdateTracking(a);this._referencePosWGS84Comparable&&(e=r.positionToTimezone(this._referencePosWGS84Comparable,B),f.isSome(e)&&(b.autoUpdate(null,e),this._trackingEnabled&&(b.positionTimezoneInfo.autoUpdated=!0)))}this._updateLightParams(a)}};c.prototype._preupdateTracking=function(a){!this._trackingEnabled&&this.get("view.environment.lighting.cameraTrackingEnabled")&&this._cameraHandler(a)};c.prototype._cameraHandler=function(a){void 0===a&&(a=null);if(this.view.ready){var b=this.view.camera;
b&&(this._cameraHandlerClientSide(b,a)||this._cameraHandlerServerSide(b,a))}};c.prototype._cameraHandlerClientSide=function(a,b){if(!x.canProjectToWGS84ComparableLonLat(this.view.spatialReference))return!1;a=a.position;this._referencePosWGS84Comparable||(this._referencePosWGS84Comparable=q.vec3f64.create());x.pointToWGS84ComparableLonLat(a,this._referencePosWGS84Comparable);this._autoUpdateTimezone(this._referencePosWGS84Comparable,b)||this._updateLightParams(b);return!0};c.prototype._cameraHandlerServerSide=
function(a,b){a=a.position;(!this._referencePosMapCoords||this._referencePosMapCoordsRequested||this._exceedsReferencePosDistThreshold(a))&&this._requestReferencePositionUpdate(a,!0);this.view.mapCoordsHelper&&this._referencePosWGS84Comparable&&(this._referencePosWGS84Comparable[2]=a.z*this.view.mapCoordsHelper.unitInMeters,this._referencePosChanged())};c.prototype._interactingStationaryHandler=function(){!this.view.interacting&&this.view.stationary&&this._executePendingReferencePositionUpdate()};
c.prototype._updateLightParams=function(a){var b=this.view.environment.lighting;a=a||b.date;var b=this.view._stage,e;this._referencePosWGS84Comparable?(e=w.computeColorAndIntensity(a,this._referencePosWGS84Comparable),w.computeDirection(a,this._referencePosWGS84Comparable,this.view.viewingMode,e.diffuse.direction)):e={diffuse:{color:[1,1,1],intensity:.55,direction:z},ambient:{color:[1,1,1],intensity:.55},noonFactor:.5,globalFactor:0};m.vec3.scale(this._mainLight.intensity,e.diffuse.color,e.diffuse.intensity*
Math.PI);m.vec3.negate(this._mainLight.direction,e.diffuse.direction);m.vec3.scale(this._ambientLight.intensity,e.ambient.color,e.ambient.intensity);m.vec3.lerp(this._moonLight.intensity,D,C,e.globalFactor);m.vec3.scale(this._moonLight.intensity,this._moonLight.intensity,(1-.5*e.globalFactor)*(1-.4*e.noonFactor*(1-e.globalFactor)));m.vec3.copy(this._moonLight.direction,e.diffuse.direction);b.setLighting({lights:[this._mainLight,this._ambientLight,this._moonLight],globalFactor:e.globalFactor,groundLightingFactor:1-
e.noonFactor});this._updateRenderParamsHandler()};c.prototype._autoUpdateTimezone=function(a,b){void 0===b&&(b=null);if(!this.view.get("environment.lighting.cameraTrackingEnabled"))return!1;var e=A;e.setTime((b||this.view.environment.lighting.date).getTime());a=r.positionToTimezone(a,B);if(f.isNone(a))return!1;var d=this.view.environment.lighting.positionTimezoneInfo;if(!d.autoUpdated)d=a;else if(d.hours===a.hours&&d.minutes===a.minutes&&d.seconds===a.seconds)return!1;var c=e.getUTCHours()-(a.hours-
d.hours),m=e.getUTCMinutes()-(a.minutes-d.minutes),d=e.getUTCSeconds()-(a.seconds-d.seconds);e.setUTCHours(c);e.setUTCMinutes(m);e.setUTCSeconds(d);return b?!1:this.view.environment.lighting.autoUpdate(e,a)};c.prototype._updateRenderParamsHandler=function(){var a=this.view._stage;if(a){var b=this._referencePosWGS84Comparable?w.computeShadowsEnabled(this._referencePosWGS84Comparable,this.view.viewingMode):!0,e=this.view.environment.background,e=e instanceof y?{type:"color",color:u.vec4f64.fromArray(k.toUnitRGBA(e.color))}:
{type:"color",color:u.vec4f64.fromValues(0,0,0,1)};a.renderView.setRenderParameters({shadowMap:this.view.environment.lighting.directShadowsEnabled&&b,ssao:this.view.environment.lighting.ambientOcclusionEnabled,background:e})}};c.prototype._resetReferencePosition=function(){this._cancelReferencePosUpdates();this._referencePosWGS84Comparable=this._referencePosResetPreserveAbsoluteTime=this._referencePosMapCoordsRequested=this._referencePosMapCoords=null;this.notifyChange("updating")};c.prototype._requestReferencePositionUpdate=
function(a,e){var d=this;void 0===e&&(e=!1);if(this.view.mapCoordsHelper.canProject()&&!this.disableQueries&&(this._referencePosMapCoordsRequested?this._referencePosMapCoordsRequested.copy(a):this._referencePosMapCoordsRequested=a.clone(),this._referencePosResetPreserveAbsoluteTime=!!e,!this._referencePosUpdateQuery&&!this.referencePosUpdateTimer&&!this.view.interacting&&this.view.stationary)){var c=this._referencePosUpdateQuery=b.after(this._referencePointUpdateDelay).then(function(){if(d._referencePosUpdateQuery===
c)return d._doReferencePositionUpdateQuery(function(){return d._referencePosUpdateQuery!==c})}).catch(function(){}).then(function(){d._referencePosUpdateQuery===c&&(d._referencePosUpdateQuery=null,d.referencePosUpdateTimer||d._executePendingReferencePositionUpdate(),d.notifyChange("updating"))}),f=this.referencePosUpdateTimer=b.after(this._referencePointUpdateInterval).then(function(){d.referencePosUpdateTimer===f&&(d.referencePosUpdateTimer=null,d._referencePosUpdateQuery||d._executePendingReferencePositionUpdate())});
this.notifyChange("updating")}};c.prototype._doReferencePositionUpdateQuery=function(a){var b=this;this._referencePosResetPreserveAbsoluteTime&&(this._preserveAbsoluteDateTime=!1);this._referencePosMapCoords?this._referencePosMapCoords.copy(this._referencePosMapCoordsRequested):this._referencePosMapCoords=this._referencePosMapCoordsRequested.clone();this._referencePosMapCoordsRequested=this._referencePosResetPreserveAbsoluteTime=null;return this.view.mapCoordsHelper.toGeographic(this._referencePosMapCoords).then(function(e){if(!a()&&
!isNaN(e[0])&&!isNaN(e[1])){var d=b._referencePosMapCoords.z*b.view.mapCoordsHelper.unitInMeters;b._referencePosWGS84Comparable?(b._referencePosWGS84Comparable[0]=e[0],b._referencePosWGS84Comparable[1]=e[1],b._referencePosWGS84Comparable[2]=d):b._referencePosWGS84Comparable=[e[0],e[1],d];b._referencePosChanged()}})};c.prototype._executePendingReferencePositionUpdate=function(){var a=this._referencePosMapCoordsRequested;a&&this._requestReferencePositionUpdate(a,this._referencePosResetPreserveAbsoluteTime)};
c.prototype._referencePosChanged=function(){this._preserveAbsoluteDateTime?this._updateLightParams():this._autoUpdateTimezone(this._referencePosWGS84Comparable)||this._updateLightParams()};c.prototype._exceedsReferencePosDistThreshold=function(a){return this._referencePosMapCoords?(a=this._referencePosMapCoords.distance(a),this.view.mapCoordsHelper&&(a*=this.view.mapCoordsHelper.unitInMeters),a>this._referencePointUpdateDistThreshold):!0};c.prototype._cancelReferencePosUpdates=function(){this.referencePosUpdateTimer=
this._referencePosUpdateQuery=null};Object.defineProperty(c.prototype,"test",{get:function(){var a=this;return{renderer:this._renderer,set referencePointUpdateInterval(b){a._referencePointUpdateInterval=b},set referencePointUpdateDistThreshold(b){a._referencePointUpdateDistThreshold=b},set referencePosUpdateTimer(b){a.referencePosUpdateTimer=b},set referencePointUpdateDelay(b){a._referencePointUpdateDelay=b}}},enumerable:!0,configurable:!0});c.FIXED_LIGHT_DIRECTION=z;l([e.property({type:Boolean,dependsOn:["disableQueries",
"_renderer.updating"],readOnly:!0})],c.prototype,"updating",null);l([e.property()],c.prototype,"disableQueries",void 0);l([e.property({constructOnly:!0})],c.prototype,"view",void 0);l([e.property()],c.prototype,"_renderer",void 0);return c=l([e.subclass("esri.views.3d.environment.SceneViewEnvironmentManager")],c)}(e.declared(d,h));c.SceneViewEnvironmentManager=p;var A=new Date,B={hours:0,minutes:0,seconds:0},D=q.vec3f64.fromValues(.22,.22,.33),C=q.vec3f64.fromValues(.22,.22,.22);c.default=p})},"esri/core/libs/gl-matrix-2/vec4f64":function(){define(["require",
"exports","./factories/vec4f64"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.vec4f64=n})},"esri/core/libs/gl-matrix-2/factories/vec4f64":function(){define(["require","exports"],function(p,c){function n(){return[0,0,0,0]}function l(){return[1,1,1,1]}function k(){return[1,0,0,0]}function d(){return[0,1,0,0]}function h(){return[0,0,1,0]}function g(){return[0,0,0,1]}Object.defineProperty(c,"__esModule",{value:!0});c.create=n;c.clone=function(d){return[d[0],d[1],d[2],d[3]]};c.fromValues=
function(d,b,a,e){return[d,b,a,e]};c.fromArray=function(d){for(var b=n(),a=Math.min(4,d.length),e=0;e<a;++e)b[e]=d[e];return b};c.createView=function(d,b){return new Float64Array(d,b,4)};c.zeros=function(){return n()};c.ones=l;c.unitX=k;c.unitY=d;c.unitZ=h;c.unitW=g;c.ZEROS=n();c.ONES=l();c.UNIT_X=k();c.UNIT_Y=d();c.UNIT_Z=h();c.UNIT_W=g()})},"esri/views/3d/environment/EnvironmentRenderer":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/compilerUtils ../../../core/Handles ../../../core/watchUtils ../../../core/accessorSupport/decorators ./PanoramicAtmosphere ./RealisticAtmosphere ./SimpleAtmosphere ./Stars".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m){var q=[13,14];return function(c){function k(){var a=null!==c&&c.apply(this,arguments)||this;a.needsRender=!1;a.didRender=!0;a._handles=new h;a._initContext=null;a._pendingAtmosphere=null;a._atmosphere=null;a._stars=null;return a}n(k,c);Object.defineProperty(k.prototype,"updating",{get:function(){return null!=this._pendingAtmosphere},enumerable:!0,configurable:!0});k.prototype.initialize=function(){this.view._stage.addRenderPlugin(q,this)};k.prototype.destroy=function(){this._pendingAtmosphere&&
(this._pendingAtmosphere.destroy(),this._pendingAtmosphere=null);this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=null);this._stars&&(this._stars.destroy(),this._stars=null);this._handles&&this._handles.removeAll();this.view&&(this.view._stage.removeRenderPlugin(this),this.view=null)};k.prototype.initializeRenderContext=function(a){this._initContext=a;this.setup()};k.prototype.setup=function(){var a=this;this._handles.add(g.when(this.view,"basemapTerrain",function(){return a._updateBasemapTerrain()}));
this._handles.add([g.init(this.view,["viewingMode","environment.atmosphereEnabled","environment.atmosphere.quality"],function(){return a._updateAtmosphere()}),g.init(this.view,"environment.starsEnabled",function(){return a._updateStars()})])};k.prototype.uninitializeRenderContext=function(a){this._stars&&(this._stars.uninitializeRenderContext(a),this._stars.destroy(),this._stars=null);this._atmosphere&&(this._atmosphere.uninitializeRenderContext(a),this._atmosphere.destroy(),this._atmosphere=null)};
k.prototype.render=function(a){var b=this.view.basemapTerrain;if(!(b&&b.loaded||"global"!==this.view.viewingMode))return!1;b=!0;this._stars&&(b=this._stars.render(a)&&b);this._atmosphere&&(b=this._atmosphere.render(a)&&b);b&&(this.needsRender=!1);return b};k.prototype._updateStars=function(){var a=this.view.get("environment.starsEnabled")||!1;a&&!this._stars?(this._stars=new m(this.view),this._stars.initializeRenderContext(this._initContext),this.needsRender=!0):!a&&this._stars&&(this._stars.destroy(),
this._stars=null,this.needsRender=!0)};k.prototype._updateAtmosphere=function(){var a=this,b=this._getAtmosphereType();this.atmosphereType!==b&&(this.atmosphereType=b,this._pendingAtmosphere&&(this._pendingAtmosphere!==this._atmosphere&&this._pendingAtmosphere.destroy(),this._pendingAtmosphere=null),(b=this._getAtmosphereClass())?(b=new b(this.view),b.initializeRenderContext(this._initContext),null==this._atmosphere?(this._atmosphere=b,this.needsRender=!0):(this._pendingAtmosphere=b,b.when(function(){a._atmosphere.destroy();
a._atmosphere=a._pendingAtmosphere;a._pendingAtmosphere=null})),b.when(function(){a.needsRender=!0;a._updateBasemapTerrain()})):(this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=null,this.needsRender=!0),this._updateBasemapTerrain()))};k.prototype._getAtmosphereClass=function(){var c=this._getAtmosphereType();switch(c){case "none":return null;case "realistic":return a;case "panoramic":return b;case "simple":return e;default:d.neverReached(c)}};k.prototype._getAtmosphereType=function(){var b=
this.view.get("environment.atmosphereEnabled"),e=this.view.get("environment.atmosphere.quality");return b&&null!=e?"local"===this.view.viewingMode?"panoramic":"high"===e&&a.isSupported(this._initContext)?"realistic":"simple":"none"};k.prototype._updateBasemapTerrain=function(){var a=this.view.basemapTerrain;a&&(a.velvetOverground=null!=this._atmosphere&&"simple"===this.atmosphereType)};Object.defineProperty(k.prototype,"test",{get:function(){return{atmosphere:this._atmosphere}},enumerable:!0,configurable:!0});
l([f.property()],k.prototype,"view",void 0);l([f.property({dependsOn:["_pendingAtmosphere"]})],k.prototype,"updating",null);l([f.property()],k.prototype,"_pendingAtmosphere",void 0);return k=l([f.subclass("esri.views.3d.environment.EnvironmentRenderer")],k)}(f.declared(k))})},"esri/views/3d/environment/PanoramicAtmosphere":function(){define("require exports ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/promiseUtils ../../../core/libs/gl-matrix-2/mat4 ../../../core/libs/gl-matrix-2/mat4f64 ./resources/SimpleAtmosphereTexture ../support/imageUtils ../support/buffer/glUtil ../support/buffer/InterleavedLayout ../webgl-engine/lib/GeometryUtil ../webgl-engine/lib/Util ../webgl-engine/shaders/SimpleAtmospherePrograms ../../webgl/BufferObject ../../webgl/programUtils ../../webgl/renderState ../../webgl/Texture ../../webgl/Util ../../webgl/Util ../../webgl/VertexArrayObject".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y){p=function(){function a(a){this.needsRender=!1;this.didRender=!0;this.slot=13;this._readyResolver=k.createResolver();this._readyController=k.createAbortController();this.view=a}a.prototype.destroy=function(){this._readyResolver.reject();this._program&&(this._program.dispose(),this._program=null);this._texture&&(this._texture.dispose(),this._texture=null);this._readyController&&(this._readyController.abort(),this._readyController=null)};a.prototype.when=
function(a){return l(this,void 0,void 0,function(){return n(this,function(b){switch(b.label){case 0:return[4,this._readyResolver.promise];case 1:return b.sent(),a(),[2]}})})};a.prototype.initializeRenderContext=function(a){var b=this,e=a.rctx;this._program=t.createProgram(e,q.colorPass,{panoramic:!0});this._pipelineState=r.makePipelineState({blending:r.separateBlendingParams(770,1,771,771),culling:r.backFaceCullingParams,depthTest:{func:515},colorWrite:r.defaultColorWriteParams});this._vao=this._createVertexArrayObject(e);
this._vaoCount=v.vertexCount(this._vao,"geometry");f.requestImage(g,this._readyController).then(function(e){b._texture=new x(a.rctx,{pixelFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!0},e);b.needsRender=!0;b._readyController=null;b._readyResolver.resolve()})};a.prototype.uninitializeRenderContext=function(a){this.destroy()};a.prototype.render=function(a){if(a.slot!==this.slot||0!==a.pass||null==this._texture)return!1;var b=a.rctx,e=this._program;b.bindProgram(e);b.setPipelineState(this._pipelineState);
b.bindTexture(this._texture);e.setUniform1i("tex",0);e.setUniformMatrix4fv("proj",a.camera.projectionMatrix);var c=z;d.mat4.copy(c,a.camera.viewMatrix);c[12]=0;c[13]=0;c[14]=0;c[15]=1;e.setUniformMatrix4fv("view",z);e.setUniform4f("color",1,1,1,1);e.setUniform3fv("lightDirection",a.lightingData.direction);b.bindVAO(this._vao);w.assertCompatibleVertexAttributeLocations(this._vao,e);b.drawArrays(4,0,this._vaoCount);this.needsRender=!1;return!0};a.prototype._createVertexArrayObject=function(a){for(var d=
e.createPolySphereGeometry(1,2,!1),c=d.indices[m.VertexAttrConstants.POSITION],f=0;f<c.length;f+=3){var g=c[f];c[f]=c[f+2];c[f+2]=g}for(var d=d.vertexAttributes[m.VertexAttrConstants.POSITION].data,g=A.createBuffer(c.length),h=g.position,f=0;f<c.length;++f){var k=3*c[f];h.set(f,0,d[k]);h.set(f,1,d[k+1]);h.set(f,2,d[k+2])}return new y(a,q.colorPass.attributes,{geometry:b.glLayout(A)},{geometry:u.createVertex(a,35044,g.buffer)})};return a}();var z=h.mat4f64.create(),A=a.newLayout().vec3f("position");
return p})},"esri/core/libs/gl-matrix-2/mat4f64":function(){define(["require","exports","./factories/mat4f64"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.mat4f64=n})},"esri/core/libs/gl-matrix-2/factories/mat4f64":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});c.create=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]};c.clone=function(c){return[c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],
c[14],c[15]]};c.fromValues=function(c,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x){return[c,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x]};c.createView=function(c,l){return new Float64Array(c,l,16)}})},"esri/views/3d/environment/resources/SimpleAtmosphereTexture":function(){define(["require","exports"],function(p,c){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAIACAYAAABD1gYFAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7AAAAOwAFq1okJAAAAB3RJTUUH4QkLDx4bnqU2+QAAAd1JREFUSMd9lkmWxDAIQ/Xluv+V0wuDjaeuhV+IGQUoJUnNwGfAVvx+lsBCWJIsCaMpQn8nuhgqyyEzbAX1Ih0oHaQZN5X5jul581diaDVbSgAdZv1YLoCLyn/RruCsOdcqR7RS/jXkLMa9UddcDn9O7G8gwprzs6xbQl/Fns3BE90r9veQ/wzNrTM5p1yDF1yokLCosDX5kik1lxeSWxfWsihN/lZcHuPIOuhccZ4Ovt74qQK3USkFzsQx7Ki5NgqoMI1J5ILztr9UrGoGHN2qnSEwOHiD97ByDghs/KIVYp9DfdIIoJPcBkWWnM2O2s5ru3su+8GdPLhM5048r/09UDsZmJ3HRwe5MT/aA9Ul4cG74+lIvICYlZcFY42B6vAzuz/HEVn5VbP3DDgQ7xuAGZtnI76cEkbPczDDgSMDR8iFkfBMTQV728mnsx84GopNWZxQsWJxbI9pD0hmNAzWB8bun41hRk+3mNlRFvbY86mcMEVCWWAX+xJbERJHWVPP3Wkq91uyDtuKDLrYNKLl7bww6rZulo3jnafyePJ64ZZi67aEl0MkbJtTbE1h+2vIzVOU3JwWISrNyNtfi+9xqECIXZk87ODcEMeBhjj41GN1Xf+DzP9c9UmPd39C1BID2rDpAwAAAABJRU5ErkJggg\x3d\x3d"})},
"esri/views/3d/support/imageUtils":function(){define(["require","exports","../../../core/tsSupport/assignHelper","../../../request"],function(p,c,n,l){Object.defineProperty(c,"__esModule",{value:!0});c.dataURItoBlob=function(c){var d=atob(c.split(",")[1]);c=c.split(",")[0].split(":")[1].split(";")[0];for(var h=new ArrayBuffer(d.length),g=new Uint8Array(h),f=0;f<d.length;f++)g[f]=d.charCodeAt(f);return new Blob([h],{type:c})};c.requestImage=function(c,d){return l(c,n({responseType:"image"},d)).then(function(d){return d.data})}})},
"esri/views/3d/support/buffer/glUtil":function(){define(["require","exports","../../../../core/tsSupport/assignHelper"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});var l={divisor:0,prefixA:!1};c.glLayout=function(d,c){void 0===c&&(c={});c=n({},l,c);var g=d.stride;return d.fieldNames.filter(function(c){c=d.fields.get(c).optional;return!(c&&c.glPadding)}).map(function(f){var b=d.fields.get(f),a=b.constructor.ElementCount,e;e=k[b.constructor.ElementType];if(!e)throw Error("BufferType not supported in WebGL");
var m=b.offset,b=!(!b.optional||!b.optional.glNormalized);return{name:c.prefixA?"a"+f[0].toUpperCase()+f.substr(1):f,stride:g,count:a,type:e,offset:m,normalized:b,divisor:c.divisor}})};var k={u8:5121,u16:5123,u32:5125,i8:5120,i16:5122,i32:5124,f32:5126}})},"esri/views/3d/support/buffer/InterleavedLayout":function(){define(["require","exports","./BufferView","./types"],function(p,c,n,l){Object.defineProperty(c,"__esModule",{value:!0});var k=function(){function d(d,c){this.layout=d;this.buffer="number"===
typeof c?new ArrayBuffer(c*d.stride):c;c=0;for(var b=d.fieldNames;c<b.length;c++){var a=b[c],e=d.fields.get(a);this[a]=new e.constructor(this.buffer,e.offset,this.stride)}}Object.defineProperty(d.prototype,"stride",{get:function(){return this.layout.stride},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"count",{get:function(){return this.buffer.byteLength/this.stride},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"byteLength",{get:function(){return this.buffer.byteLength},
enumerable:!0,configurable:!0});d.prototype.getField=function(d,c){return(d=this[d])&&d.elementCount===c.ElementCount&&d.elementType===c.ElementType?d:null};d.prototype.slice=function(c,f){return new d(this.layout,this.buffer.slice(c*this.stride,f*this.stride))};d.prototype.copyFrom=function(d,c,b,a){var e=this.stride;0===e%4?(d=new Uint32Array(d.buffer,c*e,a*e/4),b=new Uint32Array(this.buffer,b*e,a*e/4)):(d=new Uint8Array(d.buffer,c*e,a*e),b=new Uint8Array(this.buffer,b*e,a*e));b.set(d)};return d}();
c.InterleavedBuffer=k;var d=function(){function d(){this.stride=0;this.fields=new Map;this.fieldNames=[]}d.prototype.vec2f=function(d,c){this.appendField(d,n.BufferViewVec2f,c);return this};d.prototype.vec2f64=function(d,c){this.appendField(d,n.BufferViewVec2f64,c);return this};d.prototype.vec3f=function(d,c){this.appendField(d,n.BufferViewVec3f,c);return this};d.prototype.vec3f64=function(d,c){this.appendField(d,n.BufferViewVec3f64,c);return this};d.prototype.vec4f=function(d,c){this.appendField(d,
n.BufferViewVec4f,c);return this};d.prototype.vec4f64=function(d,c){this.appendField(d,n.BufferViewVec4f64,c);return this};d.prototype.mat3f=function(d,c){this.appendField(d,n.BufferViewMat3f,c);return this};d.prototype.mat3f64=function(d,c){this.appendField(d,n.BufferViewMat3f64,c);return this};d.prototype.mat4f=function(d,c){this.appendField(d,n.BufferViewMat4f,c);return this};d.prototype.mat4f64=function(d,c){this.appendField(d,n.BufferViewMat4f64,c);return this};d.prototype.vec4u8=function(d,
c){this.appendField(d,n.BufferViewVec4u8,c);return this};d.prototype.f32=function(d,c){this.appendField(d,n.BufferViewFloat,c);return this};d.prototype.f64=function(d,c){this.appendField(d,n.BufferViewFloat64,c);return this};d.prototype.u8=function(d,c){this.appendField(d,n.BufferViewUint8,c);return this};d.prototype.u16=function(d,c){this.appendField(d,n.BufferViewUint16,c);return this};d.prototype.i8=function(d,c){this.appendField(d,n.BufferViewInt8,c);return this};d.prototype.vec2i8=function(d,
c){this.appendField(d,n.BufferViewVec2i8,c);return this};d.prototype.vec2i16=function(d,c){this.appendField(d,n.BufferViewVec2i16,c);return this};d.prototype.vec2u8=function(d,c){this.appendField(d,n.BufferViewVec2u8,c);return this};d.prototype.vec4u16=function(d,c){this.appendField(d,n.BufferViewVec4u16,c);return this};d.prototype.u32=function(d,c){this.appendField(d,n.BufferViewUint32,c);return this};d.prototype.appendField=function(d,c,b){var a=c.ElementCount*l.elementTypeSize(c.ElementType);this.fields.set(d,
{size:a,constructor:c,offset:this.stride,optional:b});this.stride+=a;this.fieldNames.push(d)};d.prototype.alignTo=function(d){this.stride=Math.floor((this.stride+d-1)/d)*d;return this};d.prototype.hasField=function(d){return 0<=this.fieldNames.indexOf(d)};d.prototype.createBuffer=function(d){return new k(this,d)};d.prototype.createView=function(d){return new k(this,d)};d.prototype.clone=function(){var c=new d;c.stride=this.stride;c.fields=new Map;this.fields.forEach(function(d,b){return c.fields.set(b,
d)});c.fieldNames=this.fieldNames.slice();c.BufferType=this.BufferType;return c};return d}();c.InterleavedLayout=d;c.newLayout=function(){return new d}})},"esri/views/3d/support/buffer/BufferView":function(){define("require exports ../../../../core/tsSupport/extendsHelper ./internals/Mat3 ./internals/Mat4 ./internals/Scalar ./internals/Vec2 ./internals/Vec3 ./internals/Vec4".split(" "),function(p,c,n,l,k,d,h,g,f){Object.defineProperty(c,"__esModule",{value:!0});p=function(b){function a(a,d,c,f){void 0===
d&&(d=0);a=b.call(this,Float32Array,a,d,c,f)||this;a.elementType="f32";return a}n(a,b);a.ElementType="f32";return a}(d.BufferViewScalarImpl);c.BufferViewFloat=p;p=function(b){function a(a,d,c,f){void 0===d&&(d=0);a=b.call(this,Float32Array,a,d,c,f)||this;a.elementType="f32";return a}n(a,b);a.ElementType="f32";return a}(h.BufferViewVec2Impl);c.BufferViewVec2f=p;p=function(b){function a(a,d,c,f){void 0===d&&(d=0);a=b.call(this,Float32Array,a,d,c,f)||this;a.elementType="f32";return a}n(a,b);a.ElementType=
"f32";return a}(g.BufferViewVec3Impl);c.BufferViewVec3f=p;p=function(b){function a(a,d,c,f){void 0===d&&(d=0);a=b.call(this,Float32Array,a,d,c,f)||this;a.elementType="f32";return a}n(a,b);a.ElementType="f32";return a}(f.BufferViewVec4Impl);c.BufferViewVec4f=p;p=function(b){function a(a,d,c,f){void 0===d&&(d=0);a=b.call(this,Float32Array,a,d,c,f)||this;a.elementType="f32";return a}n(a,b);a.ElementType="f32";return a}(l.BufferViewMat3Impl);c.BufferViewMat3f=p;l=function(b){function a(a,d,c,f){void 0===
d&&(d=0);a=b.call(this,Float64Array,a,d,c,f)||this;a.elementType="f64";return a}n(a,b);a.ElementType="f64";return a}(l.BufferViewMat3Impl);c.BufferViewMat3f64=l;l=function(b){function a(a,d,c,f){void 0===d&&(d=0);a=b.call(this,Float32Array,a,d,c,f)||this;a.elementType="f32";return a}n(a,b);a.ElementType="f32";return a}(k.BufferViewMat4Impl);c.BufferViewMat4f=l;k=function(b){function a(a,d,c,f){void 0===d&&(d=0);a=b.call(this,Float64Array,a,d,c,f)||this;a.elementType="f64";return a}n(a,b);a.ElementType=
"f64";return a}(k.BufferViewMat4Impl);c.BufferViewMat4f64=k;k=function(b){function a(a,d,c,f){void 0===d&&(d=0);a=b.call(this,Float64Array,a,d,c,f)||this;a.elementType="f64";return a}n(a,b);a.ElementType="f64";return a}(d.BufferViewScalarImpl);c.BufferViewFloat64=k;k=function(b){function a(a,d,c,f){void 0===d&&(d=0);a=b.call(this,Float64Array,a,d,c,f)||this;a.elementType="f64";return a}n(a,b);a.ElementType="f64";return a}(h.BufferViewVec2Impl);c.BufferViewVec2f64=k;k=function(b){function a(a,d,c,
f){void 0===d&&(d=0);a=b.call(this,Float64Array,a,d,c,f)||this;a.elementType="f64";return a}n(a,b);a.ElementType="f64";return a}(g.BufferViewVec3Impl);c.BufferViewVec3f64=k;k=function(b){function a(a,d,c,f){void 0===d&&(d=0);a=b.call(this,Float64Array,a,d,c,f)||this;a.elementType="f64";return a}n(a,b);a.ElementType="f64";return a}(f.BufferViewVec4Impl);c.BufferViewVec4f64=k;k=function(b){function a(a,d,c,f){void 0===d&&(d=0);a=b.call(this,Uint8Array,a,d,c,f)||this;a.elementType="u8";return a}n(a,
b);a.ElementType="u8";return a}(d.BufferViewScalarImpl);c.BufferViewUint8=k;k=function(b){function a(a,d,c,f){void 0===d&&(d=0);a=b.call(this,Uint8Array,a,d,c,f)||this;a.elementType="u8";return a}n(a,b);a.ElementType="u8";return a}(h.BufferViewVec2Impl);c.BufferViewVec2u8=k;k=function(b){function a(a,d,c,f){void 0===d&&(d=0);a=b.call(this,Uint8Array,a,d,c,f)||this;a.elementType="u8";return a}n(a,b);a.ElementType="u8";return a}(g.BufferViewVec3Impl);c.BufferViewVec3u8=k;k=function(b){function a(a,
d,c,f){void 0===d&&(d=0);a=b.call(this,Uint8Array,a,d,c,f)||this;a.elementType="u8";return a}n(a,b);a.ElementType="u8";return a}(f.BufferViewVec4Impl);c.BufferViewVec4u8=k;k=function(b){function a(a,d,c,f){void 0===d&&(d=0);a=b.call(this,Uint16Array,a,d,c,f)||this;a.elementType="u16";return a}n(a,b);a.ElementType="u16";return a}(d.BufferViewScalarImpl);c.BufferViewUint16=k;k=function(b){function a(a,d,c,f){void 0===d&&(d=0);a=b.call(this,Uint16Array,a,d,c,f)||this;a.elementType="u16";return a}n(a,
b);a.ElementType="u16";return a}(h.BufferViewVec2Impl);c.BufferViewVec2u16=k;k=function(b){function a(a,d,c,f){void 0===d&&(d=0);a=b.call(this,Uint16Array,a,d,c,f)||this;a.elementType="u16";return a}n(a,b);a.ElementType="u16";return a}(g.BufferViewVec3Impl);c.BufferViewVec3u16=k;k=function(b){function a(a,d,c,f){void 0===d&&(d=0);a=b.call(this,Uint16Array,a,d,c,f)||this;a.elementType="u16";return a}n(a,b);a.ElementType="u16";return a}(f.BufferViewVec4Impl);c.BufferViewVec4u16=k;k=function(b){function a(a,
d,c,f){void 0===d&&(d=0);a=b.call(this,Uint32Array,a,d,c,f)||this;a.elementType="u32";return a}n(a,b);a.ElementType="u32";return a}(d.BufferViewScalarImpl);c.BufferViewUint32=k;k=function(b){function a(a,d,c,f){void 0===d&&(d=0);a=b.call(this,Uint32Array,a,d,c,f)||this;a.elementType="u32";return a}n(a,b);a.ElementType="u32";return a}(h.BufferViewVec2Impl);c.BufferViewVec2u32=k;k=function(b){function a(a,d,c,f){void 0===d&&(d=0);a=b.call(this,Uint32Array,a,d,c,f)||this;a.elementType="u32";return a}
n(a,b);a.ElementType="u32";return a}(g.BufferViewVec3Impl);c.BufferViewVec3u32=k;k=function(b){function a(a,d,c,f){void 0===d&&(d=0);a=b.call(this,Uint32Array,a,d,c,f)||this;a.elementType="u32";return a}n(a,b);a.ElementType="u32";return a}(f.BufferViewVec4Impl);c.BufferViewVec4u32=k;k=function(b){function a(a,d,c,f){void 0===d&&(d=0);a=b.call(this,Int8Array,a,d,c,f)||this;a.elementType="i8";return a}n(a,b);a.ElementType="i8";return a}(d.BufferViewScalarImpl);c.BufferViewInt8=k;k=function(b){function a(a,
d,c,f){void 0===d&&(d=0);a=b.call(this,Int8Array,a,d,c,f)||this;a.elementType="i8";return a}n(a,b);a.ElementType="i8";return a}(h.BufferViewVec2Impl);c.BufferViewVec2i8=k;k=function(b){function a(a,d,c,f){void 0===d&&(d=0);a=b.call(this,Int8Array,a,d,c,f)||this;a.elementType="i8";return a}n(a,b);a.ElementType="i8";return a}(g.BufferViewVec3Impl);c.BufferViewVec3i8=k;k=function(b){function a(a,d,c,f){void 0===d&&(d=0);a=b.call(this,Int8Array,a,d,c,f)||this;a.elementType="i8";return a}n(a,b);a.ElementType=
"i8";return a}(f.BufferViewVec4Impl);c.BufferViewVec4i8=k;k=function(b){function a(a,d,c,f){void 0===d&&(d=0);a=b.call(this,Int16Array,a,d,c,f)||this;a.elementType="i16";return a}n(a,b);a.ElementType="i16";return a}(d.BufferViewScalarImpl);c.BufferViewInt16=k;k=function(b){function a(a,d,c,f){void 0===d&&(d=0);a=b.call(this,Int16Array,a,d,c,f)||this;a.elementType="i16";return a}n(a,b);a.ElementType="i16";return a}(h.BufferViewVec2Impl);c.BufferViewVec2i16=k;k=function(b){function a(a,d,c,f){void 0===
d&&(d=0);a=b.call(this,Int16Array,a,d,c,f)||this;a.elementType="i16";return a}n(a,b);a.ElementType="i16";return a}(g.BufferViewVec3Impl);c.BufferViewVec3i16=k;k=function(b){function a(a,d,c,f){void 0===d&&(d=0);a=b.call(this,Int16Array,a,d,c,f)||this;a.elementType="i16";return a}n(a,b);a.ElementType="i16";return a}(f.BufferViewVec4Impl);c.BufferViewVec4i16=k;d=function(b){function a(a,d,c,f){void 0===d&&(d=0);a=b.call(this,Int32Array,a,d,c,f)||this;a.elementType="i32";return a}n(a,b);a.ElementType=
"i32";return a}(d.BufferViewScalarImpl);c.BufferViewInt32=d;h=function(b){function a(a,d,c,f){void 0===d&&(d=0);a=b.call(this,Int32Array,a,d,c,f)||this;a.elementType="i32";return a}n(a,b);a.ElementType="i32";return a}(h.BufferViewVec2Impl);c.BufferViewVec2i32=h;g=function(b){function a(a,d,c,f){void 0===d&&(d=0);a=b.call(this,Int32Array,a,d,c,f)||this;a.elementType="i32";return a}n(a,b);a.ElementType="i32";return a}(g.BufferViewVec3Impl);c.BufferViewVec3i32=g;f=function(b){function a(a,d,c,f){void 0===
d&&(d=0);a=b.call(this,Int32Array,a,d,c,f)||this;a.elementType="i32";return a}n(a,b);a.ElementType="i32";return a}(f.BufferViewVec4Impl);c.BufferViewVec4i32=f})},"esri/views/3d/support/buffer/internals/Mat3":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(c,k,d,h,g){void 0===d&&(d=0);this.TypedArrayConstructor=c;this.elementCount=9;c=this.TypedArrayConstructor;void 0===h&&(h=9*c.BYTES_PER_ELEMENT);var f=0===k.byteLength?
0:d;this.typedBuffer=null==g?new c(k,f):new c(k,f,(g-d)/c.BYTES_PER_ELEMENT);this.typedBufferStride=h/c.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}c.prototype.getMat=function(c,k){c*=this.typedBufferStride;for(var d=0;9>d;d++)k[d]=this.typedBuffer[c+d];return k};c.prototype.setMat=function(c,k){c*=this.typedBufferStride;for(var d=0;9>d;d++)this.typedBuffer[c+d]=k[d]};c.prototype.get=
function(c,k){return this.typedBuffer[c*this.typedBufferStride+k]};c.prototype.set=function(c,k,d){this.typedBuffer[c*this.typedBufferStride+k]=d};c.prototype.copyFrom=function(c,k,d){var h=this.typedBuffer,g=k.typedBuffer;c*=this.typedBufferStride;k=d*k.typedBufferStride;for(d=0;9>d;++d)h[c+d]=g[k+d]};Object.defineProperty(c.prototype,"buffer",{get:function(){return this.typedBuffer.buffer},enumerable:!0,configurable:!0});c.ElementCount=9;return c}();c.BufferViewMat3Impl=p})},"esri/views/3d/support/buffer/internals/Mat4":function(){define(["require",
"exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(c,k,d,h,g){void 0===d&&(d=0);this.TypedArrayConstructor=c;this.elementCount=16;c=this.TypedArrayConstructor;void 0===h&&(h=16*c.BYTES_PER_ELEMENT);var f=0===k.byteLength?0:d;this.typedBuffer=null==g?new c(k,f):new c(k,f,(g-d)/c.BYTES_PER_ELEMENT);this.typedBufferStride=h/c.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}
c.prototype.getMat=function(c,k){c*=this.typedBufferStride;for(var d=0;16>d;d++)k[d]=this.typedBuffer[c+d];return k};c.prototype.setMat=function(c,k){c*=this.typedBufferStride;for(var d=0;16>d;d++)this.typedBuffer[c+d]=k[d]};c.prototype.get=function(c,k){return this.typedBuffer[c*this.typedBufferStride+k]};c.prototype.set=function(c,k,d){this.typedBuffer[c*this.typedBufferStride+k]=d};c.prototype.copyFrom=function(c,k,d){var h=this.typedBuffer,g=k.typedBuffer;c*=this.typedBufferStride;k=d*k.typedBufferStride;
for(d=0;16>d;++d)h[c+d]=g[k+d]};Object.defineProperty(c.prototype,"buffer",{get:function(){return this.typedBuffer.buffer},enumerable:!0,configurable:!0});c.ElementCount=16;return c}();c.BufferViewMat4Impl=p})},"esri/views/3d/support/buffer/internals/Scalar":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(c,k,d,h,g){void 0===d&&(d=0);this.TypedArrayConstructor=c;this.elementCount=1;c=this.TypedArrayConstructor;void 0===
h&&(h=c.BYTES_PER_ELEMENT);var f=0===k.byteLength?0:d;this.typedBuffer=null==g?new c(k,f):new c(k,f,(g-d)/c.BYTES_PER_ELEMENT);this.typedBufferStride=h/c.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}c.prototype.get=function(c){return this.typedBuffer[c*this.typedBufferStride]};c.prototype.set=function(c,k){this.typedBuffer[c*this.typedBufferStride]=k};Object.defineProperty(c.prototype,
"buffer",{get:function(){return this.typedBuffer.buffer},enumerable:!0,configurable:!0});c.ElementCount=1;return c}();c.BufferViewScalarImpl=p})},"esri/views/3d/support/buffer/internals/Vec2":function(){define(["require","exports","../../../../../core/libs/gl-matrix-2/vec2"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(c,d,h,g,f){void 0===h&&(h=0);this.TypedArrayConstructor=c;this.elementCount=2;c=this.TypedArrayConstructor;void 0===g&&(g=2*c.BYTES_PER_ELEMENT);
var b=0===d.byteLength?0:h;this.typedBuffer=null==f?new c(d,b):new c(d,b,(f-h)/c.BYTES_PER_ELEMENT);this.typedBufferStride=g/c.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}c.prototype.getVec=function(c,d){return n.vec2.set(d,this.typedBuffer[c*this.typedBufferStride],this.typedBuffer[c*this.typedBufferStride+1])};c.prototype.setVec=function(c,d){this.typedBuffer[c*this.typedBufferStride]=
d[0];this.typedBuffer[c*this.typedBufferStride+1]=d[1]};c.prototype.get=function(c,d){return this.typedBuffer[c*this.typedBufferStride+d]};c.prototype.set=function(c,d,h){this.typedBuffer[c*this.typedBufferStride+d]=h};c.prototype.copyFrom=function(c,d,h){var g=this.typedBuffer,f=d.typedBuffer;c*=this.typedBufferStride;d=h*d.typedBufferStride;g[c]=f[d];g[c+1]=f[d+1]};Object.defineProperty(c.prototype,"buffer",{get:function(){return this.typedBuffer.buffer},enumerable:!0,configurable:!0});c.ElementCount=
2;return c}();c.BufferViewVec2Impl=p})},"esri/core/libs/gl-matrix-2/vec2":function(){define(["require","exports","./math/vec2"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.vec2=n})},"esri/core/libs/gl-matrix-2/math/vec2":function(){define(["require","exports","./common"],function(p,c,n){function l(a,b,d){a[0]=b[0]-d[0];a[1]=b[1]-d[1];return a}function k(a,b,d){a[0]=b[0]*d[0];a[1]=b[1]*d[1];return a}function d(a,b,d){a[0]=b[0]/d[0];a[1]=b[1]/d[1];return a}function h(a,b){var e=
b[0]-a[0];a=b[1]-a[1];return Math.sqrt(e*e+a*a)}function g(a,b){var e=b[0]-a[0];a=b[1]-a[1];return e*e+a*a}function f(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)}function b(a){var b=a[0];a=a[1];return b*b+a*a}Object.defineProperty(c,"__esModule",{value:!0});c.copy=function(a,b){a[0]=b[0];a[1]=b[1];return a};c.set=function(a,b,d){a[0]=b;a[1]=d;return a};c.add=function(a,b,d){a[0]=b[0]+d[0];a[1]=b[1]+d[1];return a};c.subtract=l;c.multiply=k;c.divide=d;c.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=
Math.ceil(b[1]);return a};c.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);return a};c.min=function(a,b,d){a[0]=Math.min(b[0],d[0]);a[1]=Math.min(b[1],d[1]);return a};c.max=function(a,b,d){a[0]=Math.max(b[0],d[0]);a[1]=Math.max(b[1],d[1]);return a};c.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);return a};c.scale=function(a,b,d){a[0]=b[0]*d;a[1]=b[1]*d;return a};c.scaleAndAdd=function(a,b,d,c){a[0]=b[0]+d[0]*c;a[1]=b[1]+d[1]*c;return a};c.distance=h;c.squaredDistance=
g;c.length=f;c.squaredLength=b;c.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];return a};c.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];return a};c.normalize=function(a,b){var d=b[0],e=b[1],d=d*d+e*e;0<d&&(d=1/Math.sqrt(d),a[0]=b[0]*d,a[1]=b[1]*d);return a};c.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};c.cross=function(a,b,d){b=b[0]*d[1]-b[1]*d[0];a[0]=a[1]=0;a[2]=b;return a};c.lerp=function(a,b,d,c){var e=b[0];b=b[1];a[0]=e+c*(d[0]-e);a[1]=b+c*(d[1]-b);return a};c.random=function(a,b){b=b||1;var d=
2*n.RANDOM()*Math.PI;a[0]=Math.cos(d)*b;a[1]=Math.sin(d)*b;return a};c.transformMat2=function(a,b,d){var e=b[0];b=b[1];a[0]=d[0]*e+d[2]*b;a[1]=d[1]*e+d[3]*b;return a};c.transformMat2d=function(a,b,d){var e=b[0];b=b[1];a[0]=d[0]*e+d[2]*b+d[4];a[1]=d[1]*e+d[3]*b+d[5];return a};c.transformMat3=function(a,b,d){var e=b[0];b=b[1];a[0]=d[0]*e+d[3]*b+d[6];a[1]=d[1]*e+d[4]*b+d[7];return a};c.transformMat4=function(a,b,d){var e=b[0];b=b[1];a[0]=d[0]*e+d[4]*b+d[12];a[1]=d[1]*e+d[5]*b+d[13];return a};c.rotate=
function(a,b,d,c){var e=b[0]-d[0];b=b[1]-d[1];var f=Math.sin(c);c=Math.cos(c);a[0]=e*c-b*f+d[0];a[1]=e*f+b*c+d[1];return a};c.angle=function(a,b){var d=a[0];a=a[1];var e=b[0];b=b[1];var c=d*d+a*a;0<c&&(c=1/Math.sqrt(c));var f=e*e+b*b;0<f&&(f=1/Math.sqrt(f));d=(d*e+a*b)*c*f;return 1<d?0:-1>d?Math.PI:Math.acos(d)};c.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};c.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]};c.equals=function(a,b){var d=a[0];a=a[1];var e=b[0];b=b[1];return Math.abs(d-
e)<=n.EPSILON*Math.max(1,Math.abs(d),Math.abs(e))&&Math.abs(a-b)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};c.len=f;c.sub=l;c.mul=k;c.div=d;c.dist=h;c.sqrDist=g;c.sqrLen=b})},"esri/views/3d/support/buffer/internals/Vec3":function(){define(["require","exports","../../../../../core/libs/gl-matrix-2/vec3"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(c,d,h,g,f){void 0===h&&(h=0);this.TypedArrayConstructor=c;this.elementCount=3;c=this.TypedArrayConstructor;
void 0===g&&(g=3*c.BYTES_PER_ELEMENT);var b=0===d.byteLength?0:h;this.typedBuffer=null==f?new c(d,b):new c(d,b,(f-h)/c.BYTES_PER_ELEMENT);this.typedBufferStride=g/c.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}c.prototype.getVec=function(c,d){return n.vec3.set(d,this.typedBuffer[c*this.typedBufferStride],this.typedBuffer[c*this.typedBufferStride+1],this.typedBuffer[c*this.typedBufferStride+
2])};c.prototype.setVec=function(c,d){this.typedBuffer[c*this.typedBufferStride]=d[0];this.typedBuffer[c*this.typedBufferStride+1]=d[1];this.typedBuffer[c*this.typedBufferStride+2]=d[2]};c.prototype.get=function(c,d){return this.typedBuffer[c*this.typedBufferStride+d]};c.prototype.set=function(c,d,h){this.typedBuffer[c*this.typedBufferStride+d]=h};c.prototype.copyFrom=function(c,d,h){var g=this.typedBuffer,f=d.typedBuffer;c*=this.typedBufferStride;d=h*d.typedBufferStride;g[c]=f[d];g[c+1]=f[d+1];g[c+
2]=f[d+2]};Object.defineProperty(c.prototype,"buffer",{get:function(){return this.typedBuffer.buffer},enumerable:!0,configurable:!0});c.ElementCount=3;return c}();c.BufferViewVec3Impl=p})},"esri/views/3d/support/buffer/internals/Vec4":function(){define(["require","exports","../../../../../core/libs/gl-matrix-2/vec4"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(c,d,h,g,f){void 0===h&&(h=0);this.TypedArrayConstructor=c;this.elementCount=4;c=this.TypedArrayConstructor;
void 0===g&&(g=4*c.BYTES_PER_ELEMENT);var b=0===d.byteLength?0:h;this.typedBuffer=null==f?new c(d,b):new c(d,b,(f-h)/c.BYTES_PER_ELEMENT);this.typedBufferStride=g/c.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}c.prototype.getVec=function(c,d){return n.vec4.set(d,this.typedBuffer[c*this.typedBufferStride],this.typedBuffer[c*this.typedBufferStride+1],this.typedBuffer[c*this.typedBufferStride+
2],this.typedBuffer[c*this.typedBufferStride+3])};c.prototype.setVec=function(c,d){this.typedBuffer[c*this.typedBufferStride]=d[0];this.typedBuffer[c*this.typedBufferStride+1]=d[1];this.typedBuffer[c*this.typedBufferStride+2]=d[2];this.typedBuffer[c*this.typedBufferStride+3]=d[3]};c.prototype.get=function(c,d){return this.typedBuffer[c*this.typedBufferStride+d]};c.prototype.set=function(c,d,h){this.typedBuffer[c*this.typedBufferStride+d]=h};c.prototype.copyFrom=function(c,d,h){var g=this.typedBuffer,
f=d.typedBuffer;c*=this.typedBufferStride;d=h*d.typedBufferStride;g[c]=f[d];g[c+1]=f[d+1];g[c+2]=f[d+2];g[c+3]=f[d+3]};Object.defineProperty(c.prototype,"buffer",{get:function(){return this.typedBuffer.buffer},enumerable:!0,configurable:!0});c.ElementCount=4;return c}();c.BufferViewVec4Impl=p})},"esri/core/libs/gl-matrix-2/vec4":function(){define(["require","exports","./math/vec4"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.vec4=n})},"esri/core/libs/gl-matrix-2/math/vec4":function(){define(["require",
"exports","./common"],function(p,c,n){function l(a,b,d){a[0]=b[0]-d[0];a[1]=b[1]-d[1];a[2]=b[2]-d[2];a[3]=b[3]-d[3];return a}function k(a,b,d){a[0]=b[0]*d[0];a[1]=b[1]*d[1];a[2]=b[2]*d[2];a[3]=b[3]*d[3];return a}function d(a,b,d){a[0]=b[0]/d[0];a[1]=b[1]/d[1];a[2]=b[2]/d[2];a[3]=b[3]/d[3];return a}function h(a,b){var d=b[0]-a[0],e=b[1]-a[1],c=b[2]-a[2];a=b[3]-a[3];return Math.sqrt(d*d+e*e+c*c+a*a)}function g(a,b){var d=b[0]-a[0],e=b[1]-a[1],c=b[2]-a[2];a=b[3]-a[3];return d*d+e*e+c*c+a*a}function f(a){var b=
a[0],d=a[1],c=a[2];a=a[3];return Math.sqrt(b*b+d*d+c*c+a*a)}function b(a){var b=a[0],d=a[1],c=a[2];a=a[3];return b*b+d*d+c*c+a*a}Object.defineProperty(c,"__esModule",{value:!0});c.copy=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a};c.set=function(a,b,d,c,f){a[0]=b;a[1]=d;a[2]=c;a[3]=f;return a};c.add=function(a,b,d){a[0]=b[0]+d[0];a[1]=b[1]+d[1];a[2]=b[2]+d[2];a[3]=b[3]+d[3];return a};c.subtract=l;c.multiply=k;c.divide=d;c.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);
a[2]=Math.ceil(b[2]);a[3]=Math.ceil(b[3]);return a};c.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=Math.floor(b[2]);a[3]=Math.floor(b[3]);return a};c.min=function(a,b,d){a[0]=Math.min(b[0],d[0]);a[1]=Math.min(b[1],d[1]);a[2]=Math.min(b[2],d[2]);a[3]=Math.min(b[3],d[3]);return a};c.max=function(a,b,d){a[0]=Math.max(b[0],d[0]);a[1]=Math.max(b[1],d[1]);a[2]=Math.max(b[2],d[2]);a[3]=Math.max(b[3],d[3]);return a};c.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);
a[2]=Math.round(b[2]);a[3]=Math.round(b[3]);return a};c.scale=function(a,b,d){a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;a[3]=b[3]*d;return a};c.scaleAndAdd=function(a,b,d,c){a[0]=b[0]+d[0]*c;a[1]=b[1]+d[1]*c;a[2]=b[2]+d[2]*c;a[3]=b[3]+d[3]*c;return a};c.distance=h;c.squaredDistance=g;c.length=f;c.squaredLength=b;c.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=-b[3];return a};c.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];a[3]=1/b[3];return a};c.normalize=function(a,b){var d=b[0],
e=b[1],c=b[2];b=b[3];var f=d*d+e*e+c*c+b*b;0<f&&(f=1/Math.sqrt(f),a[0]=d*f,a[1]=e*f,a[2]=c*f,a[3]=b*f);return a};c.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};c.lerp=function(a,b,d,c){var e=b[0],f=b[1],m=b[2];b=b[3];a[0]=e+c*(d[0]-e);a[1]=f+c*(d[1]-f);a[2]=m+c*(d[2]-m);a[3]=b+c*(d[3]-b);return a};c.random=function(a,b){b=b||1;var d,e,c,f,g,h;do d=2*n.RANDOM()-1,e=2*n.RANDOM()-1,g=d*d+e*e;while(1<=g);do c=2*n.RANDOM()-1,f=2*n.RANDOM()-1,h=c*c+f*f;while(1<=h);g=Math.sqrt((1-g)/
h);a[0]=b*d;a[1]=b*e;a[2]=b*c*g;a[3]=b*f*g;return a};c.transformMat4=function(a,b,d){var e=b[0],c=b[1],f=b[2];b=b[3];a[0]=d[0]*e+d[4]*c+d[8]*f+d[12]*b;a[1]=d[1]*e+d[5]*c+d[9]*f+d[13]*b;a[2]=d[2]*e+d[6]*c+d[10]*f+d[14]*b;a[3]=d[3]*e+d[7]*c+d[11]*f+d[15]*b;return a};c.transformQuat=function(a,b,d){var e=b[0],c=b[1],f=b[2],m=d[0],g=d[1],h=d[2];d=d[3];var k=d*e+g*f-h*c,l=d*c+h*e-m*f,z=d*f+m*c-g*e,e=-m*e-g*c-h*f;a[0]=k*d+e*-m+l*-h-z*-g;a[1]=l*d+e*-g+z*-m-k*-h;a[2]=z*d+e*-h+k*-g-l*-m;a[3]=b[3];return a};
c.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};c.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]};c.equals=function(a,b){var d=a[0],e=a[1],c=a[2];a=a[3];var f=b[0],g=b[1],h=b[2];b=b[3];return Math.abs(d-f)<=n.EPSILON*Math.max(1,Math.abs(d),Math.abs(f))&&Math.abs(e-g)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(g))&&Math.abs(c-h)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(h))&&Math.abs(a-b)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};
c.sub=l;c.mul=k;c.div=d;c.dist=h;c.sqrDist=g;c.len=f;c.sqrLen=b})},"esri/views/3d/support/buffer/types":function(){define(["require","exports","../../../../core/compilerUtils"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.elementTypeSize=function(c){switch(c){case "u8":return 1;case "u16":return 2;case "u32":return 4;case "i8":return 1;case "i16":return 2;case "i32":return 4;case "f32":return 4;case "f64":return 8;default:n.neverReached(c)}};c.isSigned=function(c){switch(c){case "u8":case "u16":case "u32":return!1;
case "i8":case "i16":case "i32":case "f32":case "f64":return!0;default:n.neverReached(c)}};c.isInteger=function(c){switch(c){case "u8":case "u16":case "u32":case "i8":case "i16":case "i32":return!0;case "f32":case "f64":return!1;default:n.neverReached(c)}};c.maximumValue=function(c){switch(c){case "u8":return 255;case "u16":return 65535;case "u32":return 4294967295;case "i8":return 127;case "i16":return 32767;case "i32":return 2147483647;case "f32":return 3.402823E38;case "f64":return 1.79769E308;
default:n.neverReached(c)}}})},"esri/views/3d/webgl-engine/lib/GeometryUtil":function(){define("require exports ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f32 ../../../../core/libs/gl-matrix-2/vec3f64 ../../support/geometryUtils ./BufferVectorMath ./GeometryData ./Util".split(" "),function(p,c,n,l,k,d,h,g,f){var b=h.Vec3Compact,a;(function(a){for(var b=[[-.5,-.5,.5],[.5,-.5,.5],[.5,.5,.5],[-.5,.5,.5],[-.5,-.5,-.5],[.5,-.5,-.5],[.5,.5,-.5],[-.5,.5,-.5]],d=[0,0,1,-1,
0,0,1,0,0,0,-1,0,0,1,0,0,0,-1],e=[0,0,1,0,1,1,0,1],c=[0,1,2,2,3,0,4,0,3,3,7,4,1,5,6,6,2,1,1,0,4,4,5,1,3,2,6,6,7,3,5,4,7,7,6,5],m=Array(36),h=0;6>h;h++)for(var k=0;6>k;k++)m[6*h+k]=h;for(var l=Array(36),h=0;6>h;h++)l[6*h+0]=0,l[6*h+1]=1,l[6*h+2]=2,l[6*h+3]=2,l[6*h+4]=3,l[6*h+5]=0;a.createGeometry=function(a){Array.isArray(a)||(a=[a,a,a]);for(var h=new Float32Array(24),k=0;8>k;k++)h[3*k]=b[k][0]*a[0],h[3*k+1]=b[k][1]*a[1],h[3*k+2]=b[k][2]*a[2];a={};a[f.VertexAttrConstants.POSITION]=new Uint32Array(c);
a[f.VertexAttrConstants.NORMAL]=new Uint32Array(m);a[f.VertexAttrConstants.UV0]=new Uint32Array(l);k={};k[f.VertexAttrConstants.POSITION]={size:3,data:h};k[f.VertexAttrConstants.NORMAL]={size:3,data:new Float32Array(d)};k[f.VertexAttrConstants.UV0]={size:2,data:new Float32Array(e)};return new g(k,a)}})(a||(a={}));var e;(function(a){var b=[[-.5,0,-.5],[.5,0,-.5],[.5,0,.5],[-.5,0,.5],[0,-.5,0],[0,.5,0]],d=[0,1,-1,1,1,0,0,1,1,-1,1,0,0,-1,-1,1,-1,0,0,-1,1,-1,-1,0],e=[5,1,0,5,2,1,5,3,2,5,0,3,4,0,1,4,1,
2,4,2,3,4,3,0],c=[0,0,0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7];a.createGeometry=function(a){Array.isArray(a)||(a=[a,a,a]);for(var m=new Float32Array(18),h=0;6>h;h++)m[3*h]=b[h][0]*a[0],m[3*h+1]=b[h][1]*a[1],m[3*h+2]=b[h][2]*a[2];a={};a[f.VertexAttrConstants.POSITION]=new Uint32Array(e);a[f.VertexAttrConstants.NORMAL]=new Uint32Array(c);h={};h[f.VertexAttrConstants.POSITION]={size:3,data:m};h[f.VertexAttrConstants.NORMAL]={size:3,data:new Float32Array(d)};return new g(h,a)}})(e||(e={}));var m;
(function(a){var b=l.vec3f32.fromValues(-.5,0,-.5),d=l.vec3f32.fromValues(.5,0,-.5),e=l.vec3f32.fromValues(0,0,.5),c=l.vec3f32.fromValues(0,.5,0),m=l.vec3f32.create(),h=l.vec3f32.create(),k=l.vec3f32.create(),q=l.vec3f32.create(),r=l.vec3f32.create();n.vec3.subtract(m,b,c);n.vec3.subtract(h,b,d);n.vec3.cross(k,m,h);n.vec3.normalize(k,k);n.vec3.subtract(m,d,c);n.vec3.subtract(h,d,e);n.vec3.cross(q,m,h);n.vec3.normalize(q,q);n.vec3.subtract(m,e,c);n.vec3.subtract(h,e,b);n.vec3.cross(r,m,h);n.vec3.normalize(r,
r);var t=[b,d,e,c],u=[0,-1,0,k[0],k[1],k[2],q[0],q[1],q[2],r[0],r[1],r[2]],x=[0,1,2,3,1,0,3,2,1,3,0,2],K=[0,0,0,1,1,1,2,2,2,3,3,3];a.createGeometry=function(a){Array.isArray(a)||(a=[a,a,a]);for(var b=new Float32Array(12),d=0;4>d;d++)b[3*d]=t[d][0]*a[0],b[3*d+1]=t[d][1]*a[1],b[3*d+2]=t[d][2]*a[2];a={};a[f.VertexAttrConstants.POSITION]=new Uint32Array(x);a[f.VertexAttrConstants.NORMAL]=new Uint32Array(K);d={};d[f.VertexAttrConstants.POSITION]={size:3,data:b};d[f.VertexAttrConstants.NORMAL]={size:3,
data:new Float32Array(u)};return new g(d,a)}})(m||(m={}));var q;(function(c){function q(a,b,d,e,c){if(Math.abs(n.vec3.dot(b,a))>c)return!1;n.vec3.cross(d,a,b);n.vec3.normalize(d,d);n.vec3.cross(e,d,a);n.vec3.normalize(e,e);return!0}function x(a,b,d,e,c,f,m){return q(a,b,c,f,m)||q(a,d,c,f,m)||q(a,e,c,f,m)}c.createBoxGeometry=a.createGeometry;c.createDiamondGeometry=e.createGeometry;c.createTetrahedronGeometry=m.createGeometry;c.createSphereGeometry=function(a,b,d,e,c,m,h){a=a||50;e=void 0!==e?e:-Math.PI;
c=void 0!==c?c:2*Math.PI;m=void 0!==m?m:.5*-Math.PI;h=void 0!==h?h:Math.PI;var k=Math.max(3,Math.floor(b)||8),l=Math.max(2,Math.floor(d)||6),q=(k+1)*(l+1);d=new Float32Array(3*q);b=new Float32Array(3*q);for(var q=new Float32Array(2*q),r=[],t=0,u=0;u<=l;u++){for(var y=[],x=u/l,v=m+x*h,z=Math.cos(v),A=0;A<=k;A++){var w=A/k,n=e+w*c,B=Math.cos(n)*z,D=Math.sin(v),n=-Math.sin(n)*z;d[3*t]=B*a;d[3*t+1]=D*a;d[3*t+2]=n*a;b[3*t]=B;b[3*t+1]=D;b[3*t+2]=n;q[2*t]=w;q[2*t+1]=x;y.push(t);++t}r.push(y)}a=new Uint32Array(2*
k*(l-1)*3);for(u=t=0;u<l;u++)for(A=0;A<k;A++)e=r[u][A],c=r[u][A+1],m=r[u+1][A+1],h=r[u+1][A],0===u?(a[t++]=e,a[t++]=m,a[t++]=h):u===l-1?(a[t++]=e,a[t++]=c,a[t++]=m):(a[t++]=e,a[t++]=c,a[t++]=m,a[t++]=m,a[t++]=h,a[t++]=e);f.assert(t===a.length);k={};k[f.VertexAttrConstants.POSITION]=a;k[f.VertexAttrConstants.NORMAL]=a;k[f.VertexAttrConstants.UV0]=a;l={};l[f.VertexAttrConstants.POSITION]={size:3,data:d};l[f.VertexAttrConstants.NORMAL]={size:3,data:b};l[f.VertexAttrConstants.UV0]={size:2,data:q};return new g(l,
k)};c.createPolySphereGeometry=function(a,d,e){function c(d,e){d>e&&(e=[e,d],d=e[0],e=e[1]);var c=d.toString()+"."+e.toString();if(k[c])return k[c];var f=m.length;m.length+=3;b.add(m,3*d,m,3*e,m,f);b.scale(m,f,a/b.length(m,f));f/=3;return k[c]=f}var m;e?(m=[0,-1,0,1,0,0,0,0,1,-1,0,0,0,0,-1,0,1,0],e=new Uint32Array([0,1,2,0,2,3,0,3,4,0,4,1,1,5,2,2,5,3,3,5,4,4,5,1])):(e=a*(1+Math.sqrt(5))/2,m=[-a,e,0,a,e,0,-a,-e,0,a,-e,0,0,-a,e,0,a,e,0,-a,-e,0,a,-e,e,0,-a,e,0,a,-e,0,-a,-e,0,a],e=new Uint32Array([0,
11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1]));for(var h=0;h<m.length;h+=3)b.scale(m,h,a/b.length(m,h));for(var k={},h=0;h<d;h++){for(var l=e.length,q=new Uint32Array(4*l),r=0;r<l;r+=3){var t=e[r],u=e[r+1],y=e[r+2],x=c(t,u),v=c(u,y),z=c(y,t),A=4*r;q[A]=t;q[A+1]=x;q[A+2]=z;q[A+3]=u;q[A+4]=v;q[A+5]=x;q[A+6]=y;q[A+7]=z;q[A+8]=v;q[A+9]=x;q[A+10]=v;q[A+11]=z}e=q;k={}}d=new Float32Array(m);for(h=0;h<d.length;h+=3)b.normalize(d,
h);h={};h[f.VertexAttrConstants.POSITION]=e;h[f.VertexAttrConstants.NORMAL]=e;e={};e[f.VertexAttrConstants.POSITION]={size:3,data:new Float32Array(m)};e[f.VertexAttrConstants.NORMAL]={size:3,data:d};return new g(e,h)};c.createPointGeometry=function(a,b,d,e,c,m,h){b=b?new Float64Array([b[0],b[1],b[2]]):new Float32Array([0,0,0]);a=a?new Float32Array([a[0],a[1],a[2]]):new Float32Array([0,0,1]);m=m?new Float32Array(m):new Float32Array([0,0]);var k=d?new Uint8Array([255*d[0],255*d[1],255*d[2],3<d.length?
255*d[3]:255]):new Uint8Array([255,255,255,255]),l=null!=e&&2===e.length?new Float32Array(e):new Float32Array([1,1]);e=new Uint32Array([0]);d={};d[f.VertexAttrConstants.POSITION]=e;d[f.VertexAttrConstants.NORMAL]=e;d[f.VertexAttrConstants.UV0]=e;d[f.VertexAttrConstants.COLOR]=e;d[f.VertexAttrConstants.SIZE]=e;var q={};q[f.VertexAttrConstants.POSITION]={size:3,data:b};q[f.VertexAttrConstants.NORMAL]={size:3,data:a};q[f.VertexAttrConstants.UV0]={size:m.length,data:m};q[f.VertexAttrConstants.COLOR]=
{size:4,data:k};q[f.VertexAttrConstants.SIZE]={size:2,data:l};null!=c&&(c=new Float32Array([c[0],c[1],c[2],c[3]]),d[f.VertexAttrConstants.AUXPOS1]=e,q[f.VertexAttrConstants.AUXPOS1]={size:4,data:c});null!=h&&(h=new Float32Array([h[0],h[1],h[2],h[3]]),d[f.VertexAttrConstants.AUXPOS2]=e,q[f.VertexAttrConstants.AUXPOS2]={size:4,data:h});return new g(q,d,g.DefaultOffsets,"point")};c.createPointArrayGeometry=function(a,b){for(var d=new Float32Array(3*a.length),e=new Float32Array(b?3*a.length:3),c=new Uint32Array(a.length),
m=new Uint32Array(a.length),h=0;h<a.length;h++)d[3*h]=a[h][0],d[3*h+1]=a[h][1],d[3*h+2]=a[h][2],b&&(e[3*h]=b[h][0],e[3*h+1]=b[h][1],e[3*h+2]=b[h][2]),c[h]=h,m[h]=0;b||(e[0]=0,e[1]=1,e[2]=0);a=new Float32Array(2);a[0]=0;a[1]=0;h={};h[f.VertexAttrConstants.POSITION]=c;h[f.VertexAttrConstants.NORMAL]=b?c:m;h[f.VertexAttrConstants.UV0]=m;b={};b[f.VertexAttrConstants.POSITION]={size:3,data:d};b[f.VertexAttrConstants.NORMAL]={size:3,data:e};b[f.VertexAttrConstants.UV0]={size:2,data:a};return new g(b,h,
g.DefaultOffsets,"point")};c.createTriangleGeometry=function(){var a=new Float32Array([0,0,0,0,0,100,100,0,0]),b=new Uint32Array([0,1,2]),d=new Float32Array([0,1,0]),e=new Uint32Array([0,0,0]),c=new Float32Array([0,0]),m=new Uint32Array([0,0,0]),h={};h[f.VertexAttrConstants.POSITION]=b;h[f.VertexAttrConstants.NORMAL]=e;h[f.VertexAttrConstants.UV0]=m;b={};b[f.VertexAttrConstants.POSITION]={size:3,data:a};b[f.VertexAttrConstants.NORMAL]={size:3,data:d};b[f.VertexAttrConstants.UV0]={size:2,data:c};return new g(b,
h)};c.createSquareGeometry=function(a){var b=new Float32Array(12);if(a)for(var d=0;4>d;d++)for(var e=0;3>e;e++)b[3*d+e]=a[d][e];else b[0]=-1,b[1]=-1,b[2]=0,b[3]=1,b[4]=-1,b[5]=0,b[6]=1,b[7]=1,b[8]=0,b[9]=-1,b[10]=1,b[11]=0;var c=new Uint32Array([0,1,2,2,3,0]);a=new Float32Array([0,0,1]);var m=new Uint32Array([0,0,0,0,0,0]),d=new Float32Array([0,0,1,0,1,1,0,1]),e=new Uint8Array([255,255,255,255]),h={};h[f.VertexAttrConstants.POSITION]=c;h[f.VertexAttrConstants.NORMAL]=m;h[f.VertexAttrConstants.UV0]=
c;h[f.VertexAttrConstants.COLOR]=m;c={};c[f.VertexAttrConstants.POSITION]={size:3,data:b};c[f.VertexAttrConstants.NORMAL]={size:3,data:a};c[f.VertexAttrConstants.UV0]={size:2,data:d};c[f.VertexAttrConstants.COLOR]={size:4,data:e};return new g(c,h)};c.createConeGeometry=function(a,b,d,e,c,m){void 0===c&&(c=!0);void 0===m&&(m=!0);var h=0,k=l.vec3f32.fromValues(0,h,0),q=l.vec3f32.fromValues(0,h+a,0),r=l.vec3f32.fromValues(0,-1,0),t=l.vec3f32.fromValues(0,1,0);e&&(h=a,q=l.vec3f32.fromValues(0,0,0),k=
l.vec3f32.fromValues(0,h,0),r=l.vec3f32.fromValues(0,1,0),t=l.vec3f32.fromValues(0,-1,0));k=[q,k];r=[r,t];t=d+2;q=Math.sqrt(a*a+b*b);if(e)for(e=d-1;0<=e;e--)u=2*Math.PI/d*e,x=l.vec3f32.fromValues(Math.cos(u)*b,h,Math.sin(u)*b),k.push(x),u=l.vec3f32.fromValues(a*Math.cos(u)/q,-b/q,a*Math.sin(u)/q),r.push(u);else for(e=0;e<d;e++){var u=2*Math.PI/d*e,x=l.vec3f32.fromValues(Math.cos(u)*b,h,Math.sin(u)*b);k.push(x);u=l.vec3f32.fromValues(a*Math.cos(u)/q,b/q,a*Math.sin(u)/q);r.push(u)}a=new Uint32Array(6*
(d+2));d=new Uint32Array(6*(d+2));h=b=0;if(c){for(e=3;e<k.length;e++)a[b++]=1,a[b++]=e-1,a[b++]=e,d[h++]=0,d[h++]=0,d[h++]=0;a[b++]=k.length-1;a[b++]=2;a[b++]=1;d[h++]=0;d[h++]=0;d[h++]=0}if(m){for(e=3;e<k.length;e++)a[b++]=e,a[b++]=e-1,a[b++]=0,d[h++]=e,d[h++]=e-1,d[h++]=1;a[b++]=0;a[b++]=2;a[b++]=k.length-1;d[h++]=1;d[h++]=2;d[h++]=r.length-1}c=new Float32Array(3*t);for(e=0;e<t;e++)c[3*e]=k[e][0],c[3*e+1]=k[e][1],c[3*e+2]=k[e][2];m=new Float32Array(3*t);for(e=0;e<t;e++)m[3*e]=r[e][0],m[3*e+1]=r[e][1],
m[3*e+2]=r[e][2];k={};k[f.VertexAttrConstants.POSITION]=a;k[f.VertexAttrConstants.NORMAL]=d;r={};r[f.VertexAttrConstants.POSITION]={size:3,data:c};r[f.VertexAttrConstants.NORMAL]={size:3,data:m};return new g(r,k)};c.createCylinderGeometry=function(a,b,d,e,c,m){e=e?l.vec3f32.clone(e):l.vec3f32.fromValues(1,0,0);c=c?l.vec3f32.clone(c):l.vec3f32.fromValues(0,0,0);m=void 0===m?!0:m;var h=l.vec3f32.create();n.vec3.normalize(h,e);e=l.vec3f32.create();n.vec3.scale(e,h,Math.abs(a));var k=l.vec3f32.create();
n.vec3.scale(k,e,-.5);n.vec3.add(k,k,c);var q=l.vec3f32.fromValues(0,1,0);.2>Math.abs(1-n.vec3.dot(h,q))&&n.vec3.set(q,0,0,1);var r=l.vec3f32.create();n.vec3.cross(r,h,q);n.vec3.normalize(r,r);n.vec3.cross(q,r,h);var t=2*d+(m?2:0),u=d+(m?2:0);a=new Float32Array(3*t);c=new Float32Array(3*u);var x=new Float32Array(2*t),y=new Uint32Array(3*d*(m?4:2)),v=new Uint32Array(3*d*(m?4:2));m&&(a[3*(t-2)+0]=k[0],a[3*(t-2)+1]=k[1],a[3*(t-2)+2]=k[2],x[2*(t-2)]=0,x[2*(t-2)+1]=0,a[3*(t-1)+0]=a[3*(t-2)+0]+e[0],a[3*
(t-1)+1]=a[3*(t-2)+1]+e[1],a[3*(t-1)+2]=a[3*(t-2)+2]+e[2],x[2*(t-1)]=1,x[2*(t-1)+1]=1,c[3*(u-2)+0]=-h[0],c[3*(u-2)+1]=-h[1],c[3*(u-2)+2]=-h[2],c[3*(u-1)+0]=h[0],c[3*(u-1)+1]=h[1],c[3*(u-1)+2]=h[2]);for(var h=function(a,b,d){y[a]=b;v[a]=d},z=0,w=l.vec3f32.create(),A=l.vec3f32.create(),B=0;B<d;B++){var D=2*Math.PI/d*B;n.vec3.scale(w,q,Math.sin(D));n.vec3.scale(A,r,Math.cos(D));n.vec3.add(w,w,A);c[3*B+0]=w[0];c[3*B+1]=w[1];c[3*B+2]=w[2];n.vec3.scale(w,w,b);n.vec3.add(w,w,k);a[3*B+0]=w[0];a[3*B+1]=w[1];
a[3*B+2]=w[2];x[2*B+0]=B/d;x[2*B+1]=0;a[3*(B+d)+0]=a[3*B+0]+e[0];a[3*(B+d)+1]=a[3*B+1]+e[1];a[3*(B+d)+2]=a[3*B+2]+e[2];x[2*(B+d)+0]=B/d;x[2*B+1]=1;D=(B+1)%d;h(z++,B,B);h(z++,B+d,B);h(z++,D,D);h(z++,D,D);h(z++,B+d,B);h(z++,D+d,D)}if(m){for(B=0;B<d;B++)D=(B+1)%d,h(z++,t-2,u-2),h(z++,B,u-2),h(z++,D,u-2);for(B=0;B<d;B++)D=(B+1)%d,h(z++,B+d,u-1),h(z++,t-1,u-1),h(z++,D+d,u-1)}b={};b[f.VertexAttrConstants.POSITION]=y;b[f.VertexAttrConstants.NORMAL]=v;b[f.VertexAttrConstants.UV0]=y;d={};d[f.VertexAttrConstants.POSITION]=
{size:3,data:a};d[f.VertexAttrConstants.NORMAL]={size:3,data:c};d[f.VertexAttrConstants.UV0]={size:2,data:x};return new g(d,b)};c.createTubeGeometry=function(a,b,d,e,m){d=d||10;e=null!=e?e:!0;f.assert(1<a.length);for(var h=[],g=[],k=0;k<d;k++){h.push([0,-k-1,-((k+1)%d)-1]);var l=k/d*2*Math.PI;g.push([Math.cos(l)*b,Math.sin(l)*b])}return c.createPathExtrusionGeometry(g,a,[[0,0,0]],h,e,m)};c.createPathExtrusionGeometry=function(a,b,e,c,m,h){void 0===h&&(h=l.vec3f32.fromValues(0,0,0));var q=a.length,
r=new Float32Array(b.length*q*3+(6*e.length||0)),t=new Float32Array(b.length*q+(2*e.length||0)),y=new Float32Array(b.length*q*3+(e?6:0)),v=(b.length-1)*q*6+6*c.length,z=new Uint32Array(v),v=new Uint32Array(v),w=0,A=0,B=0,D=0,C=0,p=l.vec3f32.create(),J=l.vec3f32.create(),P=l.vec3f32.create(),L=l.vec3f32.create(),F=l.vec3f32.create(),Y=l.vec3f32.create(),X=l.vec3f32.create(),R=k.vec3f64.create(),Z=l.vec3f32.create(),da=l.vec3f32.create(),ja=l.vec3f32.create(),ba=l.vec3f32.create(),ha=l.vec3f32.create(),
W=d.plane.create();n.vec3.set(Z,0,1,0);n.vec3.subtract(J,b[1],b[0]);n.vec3.normalize(J,J);m?(n.vec3.add(R,b[0],h),n.vec3.normalize(P,R)):n.vec3.set(P,0,0,1);x(J,P,Z,Z,F,P,u);n.vec3.copy(L,P);n.vec3.copy(ba,F);for(var ea=0;ea<e.length;ea++)n.vec3.scale(Y,F,e[ea][0]),n.vec3.scale(R,P,e[ea][2]),n.vec3.add(Y,Y,R),n.vec3.add(Y,Y,b[0]),r[w++]=Y[0],r[w++]=Y[1],r[w++]=Y[2],t[B++]=0;y[A++]=-J[0];y[A++]=-J[1];y[A++]=-J[2];for(ea=0;ea<c.length;ea++)z[D++]=0<c[ea][0]?c[ea][0]:-c[ea][0]-1+e.length,z[D++]=0<c[ea][1]?
c[ea][1]:-c[ea][1]-1+e.length,z[D++]=0<c[ea][2]?c[ea][2]:-c[ea][2]-1+e.length,v[C++]=0,v[C++]=0,v[C++]=0;for(var ga=e.length,ea=e.length-1,ma=0;ma<b.length;ma++){var qa=!1;0<ma&&(n.vec3.copy(p,J),ma<b.length-1?(n.vec3.subtract(J,b[ma+1],b[ma]),n.vec3.normalize(J,J)):qa=!0,n.vec3.add(da,p,J),n.vec3.normalize(da,da),n.vec3.add(ja,b[ma-1],L),d.plane.fromPositionAndNormal(b[ma],da,W),d.plane.intersectRay(W,d.ray.wrap(ja,p),R)?(n.vec3.subtract(R,R,b[ma]),n.vec3.normalize(P,R),n.vec3.cross(F,da,P),n.vec3.normalize(F,
F)):x(da,L,ba,Z,F,P,u),n.vec3.copy(L,P),n.vec3.copy(ba,F));m&&(n.vec3.add(R,b[ma],h),n.vec3.normalize(ha,R));for(var na=0;na<q;na++)if(n.vec3.scale(Y,F,a[na][0]),n.vec3.scale(R,P,a[na][1]),n.vec3.add(Y,Y,R),n.vec3.normalize(X,Y),y[A++]=X[0],y[A++]=X[1],y[A++]=X[2],m?t[B++]=n.vec3.dot(Y,ha):t[B++]=Y[2],n.vec3.add(Y,Y,b[ma]),r[w++]=Y[0],r[w++]=Y[1],r[w++]=Y[2],!qa){var pa=(na+1)%q;z[D++]=ga+na;z[D++]=ga+q+na;z[D++]=ga+pa;z[D++]=ga+pa;z[D++]=ga+q+na;z[D++]=ga+q+pa;for(pa=0;6>pa;pa++)v[C++]=z[D-6+pa]-
ea}ga+=q}a=b[b.length-1];for(ea=0;ea<e.length;ea++)n.vec3.scale(Y,F,e[ea][0]),n.vec3.scale(R,P,e[ea][1]),n.vec3.add(Y,Y,R),n.vec3.add(Y,Y,a),r[w++]=Y[0],r[w++]=Y[1],r[w++]=Y[2],t[B++]=0;e=A/3;y[A++]=J[0];y[A++]=J[1];y[A++]=J[2];q=ga-q;for(ea=0;ea<c.length;ea++)z[D++]=0<=c[ea][0]?ga+c[ea][0]:-c[ea][0]-1+q,z[D++]=0<=c[ea][2]?ga+c[ea][2]:-c[ea][2]-1+q,z[D++]=0<=c[ea][1]?ga+c[ea][1]:-c[ea][1]-1+q,v[C++]=e,v[C++]=e,v[C++]=e;c={};c[f.VertexAttrConstants.POSITION]=z;c[f.VertexAttrConstants.NORMAL]=v;z={};
z[f.VertexAttrConstants.POSITION]={size:3,data:r};z.zOffset={size:1,data:t};z[f.VertexAttrConstants.NORMAL]={size:3,data:y};return new g(z,c)};c.createPolylineGeometry=function(a,b){f.assert(1<a.length,"createPolylineGeometry(): polyline needs at least 2 points");f.assert(3===a[0].length,"createPolylineGeometry(): malformed vertex");f.assert(void 0===b||b.length===a.length,"createPolylineGeometry: need same number of points and normals");f.assert(void 0===b||3===b[0].length,"createPolylineGeometry(): malformed normal");
for(var d=new Float32Array(3*a.length),e=new Uint32Array(2*(a.length-1)),c=0,m=0,h=0;h<a.length;h++){for(var k=0;3>k;k++)d[c++]=a[h][k];0<h&&(e[m++]=h-1,e[m++]=h)}c={};m={};c[f.VertexAttrConstants.POSITION]=e;m[f.VertexAttrConstants.POSITION]={size:3,data:d};if(b){for(var d=new Float32Array(3*b.length),l=0,h=0;h<a.length;h++)for(k=0;3>k;k++)d[l++]=b[h][k];c[f.VertexAttrConstants.NORMAL]=e;m[f.VertexAttrConstants.NORMAL]={size:3,data:d}}return new g(m,c,g.DefaultOffsets,"line")};c.createExtrudedTriangle=
function(a,b,d,e){var c,m,h=new Float32Array(18);a=[[-b,0,e/2],[d,0,e/2],[0,a,e/2],[-b,0,-e/2],[d,0,-e/2],[0,a,-e/2]];for(b=0;6>b;b++)h[3*b]=a[b][0],h[3*b+1]=a[b][1],h[3*b+2]=a[b][2];a=(c={},c[f.VertexAttrConstants.POSITION]=new Uint32Array([0,1,2,3,0,2,2,5,3,1,4,5,5,2,1,1,0,3,3,4,1,4,3,5]),c);c=(m={},m[f.VertexAttrConstants.POSITION]={size:3,data:h},m);return new g(c,a)};c.transformInPlace=function(a,b){a=a.vertexAttributes[f.VertexAttrConstants.POSITION].data;for(var d=0;d<a.length;d+=3)n.vec3.set(t,
a[d],a[d+1],a[d+2]),n.vec3.transformMat4(t,t,b),a[d]=t[0],a[d+1]=t[1],a[d+2]=t[2]};c.addVertexColors=function(a,b){var d=b||[1,1,1,1];b=new Uint8Array(4);b[0]=255*d[0];b[1]=255*d[1];b[2]=255*d[2];b[3]=255*(3<d.length?d[3]:1);var d={},e=a.getVertexAttr(),c;for(c in e)d[c]=e[c];d[f.VertexAttrConstants.COLOR]={size:4,data:b};b={};for(c in a.indices)b[c]=a.indices[c];b[f.VertexAttrConstants.COLOR]=new Uint32Array(b[f.VertexAttrConstants.POSITION].length);return a=new g(d,b,a.componentOffsets,a.primitiveType)};
c.addNormals=function(a){var b=a.getVertexAttr();a=a.indices;for(var d=h.Vec3Compact.subtract,e=new Float32Array(a.position.length/3*3),c=b.position.data,m=0,g=a.position,k=new Uint32Array(g.length),l=0;l<g.length;l+=3){d(c,3*g[l],c,3*g[l+2],r,0);d(c,3*g[l],c,3*g[l+1],t,0);n.vec3.cross(t,t,r);n.vec3.normalize(t,t);var q=m/3;e[m++]=t[0];e[m++]=t[1];e[m++]=t[2];k[l]=q;k[l+1]=q;k[l+2]=q}b[f.VertexAttrConstants.NORMAL]={size:3,data:e,offsetIdx:0,strideIdx:3};a[f.VertexAttrConstants.NORMAL]=k};c.cgToGIS=
function(a,b){void 0===b&&(b=a);var d=a.getVertexAttr();a=d.position.data;var d=d.normal.data,e=b.getVertexAttr(),c=e.position.data,e=e.normal.data;if(d)for(var f=0;f<d.length;f+=3){var m=d[f+1];e[f+1]=-d[f+2];e[f+2]=m}if(a)for(f=0;f<a.length;f+=3)m=a[f+1],c[f+1]=-a[f+2],c[f+2]=m;return b};c.makeOrthoBasisDirUp=q;c.makeOrthoBasisDirUpFallback=x})(q||(q={}));var u=.99619469809,t=l.vec3f32.create(),r=l.vec3f32.create();return q})},"esri/core/libs/gl-matrix-2/vec3f32":function(){define(["require","exports",
"./factories/vec3f32"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.vec3f32=n})},"esri/core/libs/gl-matrix-2/factories/vec3f32":function(){define(["require","exports"],function(p,c){function n(){return new Float32Array(3)}function l(d,b,a){var e=new Float32Array(3);e[0]=d;e[1]=b;e[2]=a;return e}function k(){return l(1,1,1)}function d(){return l(1,0,0)}function h(){return l(0,1,0)}function g(){return l(0,0,1)}Object.defineProperty(c,"__esModule",{value:!0});c.create=n;c.clone=
function(d){var b=new Float32Array(3);b[0]=d[0];b[1]=d[1];b[2]=d[2];return b};c.fromValues=l;c.createView=function(d,b){return new Float32Array(d,b,3)};c.zeros=function(){return n()};c.ones=k;c.unitX=d;c.unitY=h;c.unitZ=g;c.ZEROS=n();c.ONES=k();c.UNIT_X=d();c.UNIT_Y=h();c.UNIT_Z=g()})},"esri/views/3d/support/geometryUtils":function(){define("require exports ./geometryUtils/axisAngle ./geometryUtils/boundedPlane ./geometryUtils/frustum ./geometryUtils/lineSegment ./geometryUtils/plane ./geometryUtils/ray ./geometryUtils/sphere ./geometryUtils/triangle ./geometryUtils/vector".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a){Object.defineProperty(c,"__esModule",{value:!0});c.plane=h;c.boundedPlane=l;c.triangle=b;c.lineSegment=d;c.ray=g;c.sphere=f;c.frustum=k;c.vector=a;c.axisAngle=n})},"esri/views/3d/support/geometryUtils/axisAngle":function(){define(["require","exports","../../../../core/libs/gl-matrix-2/vec3","../stack","./vector"],function(p,c,n,l,k){function d(d){void 0===d&&(d=c.UP);return[d[0],d[1],d[2],d[3]]}function h(c,f,b,a,e){void 0===e&&(e=d());e[0]=c;e[1]=f;e[2]=b;e[3]=a;return e}
Object.defineProperty(c,"__esModule",{value:!0});c.create=d;c.wrap=function(d,c,b,a){return h(d,c,b,a,l.sv4d.get())};c.wrapAxisAngle=function(d,c){return h(d[0],d[1],d[2],c,l.sv4d.get())};c.copy=function(c,f){void 0===f&&(f=d());return h(c[0],c[1],c[2],c[3],f)};c.fromValues=h;c.fromAxisAndAngle=function(c,f,b){void 0===b&&(b=d());n.vec3.copy(b,c);b[3]=f;return b};c.fromPoints=function(c,f,b){void 0===b&&(b=d());n.vec3.cross(b,c,f);n.vec3.normalize(b,b);b[3]=k.angle(c,f);return b};c.UP=[0,0,1,0]})},
"esri/views/3d/support/stack":function(){define(["require","exports","../../../core/VectorStack"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.sv2d=n.VectorStack.createVec2f64();c.sv3d=n.VectorStack.createVec3f64();c.sv4d=n.VectorStack.createVec4f64();c.sm3d=n.VectorStack.createMat3f64();c.sm4d=n.VectorStack.createMat4f64();c.sq4d=n.VectorStack.createQuatf64()})},"esri/core/VectorStack":function(){define("require exports ./nextTick ./libs/gl-matrix-2/mat3f64 ./libs/gl-matrix-2/mat4f64 ./libs/gl-matrix-2/quatf64 ./libs/gl-matrix-2/vec2f64 ./libs/gl-matrix-2/vec3f64 ./libs/gl-matrix-2/vec4f64".split(" "),
function(p,c,n,l,k,d,h,g,f){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function a(a,b,d){var e=this;this.itemByteSize=a;this.itemCreate=b;this.buffers=[];this.items=[];this.itemsPtr=this.itemsPerBuffer=0;this.itemsPerBuffer=Math.ceil(d/this.itemByteSize);this.tickHandle=n.before(function(){return e.reset()})}a.prototype.destroy=function(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=null);this.itemsPtr=0;this.buffers=this.items=null};a.prototype.get=function(){0===
this.itemsPtr&&n(function(){});for(var a=Math.floor(this.itemsPtr/this.itemsPerBuffer);this.buffers.length<=a;){for(var b=new ArrayBuffer(this.itemsPerBuffer*this.itemByteSize),d=0;d<this.itemsPerBuffer;++d)this.items.push(this.itemCreate(b,d*this.itemByteSize));this.buffers.push(b)}return this.items[this.itemsPtr++]};a.prototype.reset=function(){for(var a=2*(Math.floor(this.itemsPtr/this.itemsPerBuffer)+1);this.buffers.length>a;)this.buffers.pop(),this.items.length=this.buffers.length*this.itemsPerBuffer;
this.itemsPtr=0};a.createVec2f64=function(d){void 0===d&&(d=b);return new a(16,h.vec2f64.createView,d)};a.createVec3f64=function(d){void 0===d&&(d=b);return new a(24,g.vec3f64.createView,d)};a.createVec4f64=function(d){void 0===d&&(d=b);return new a(32,f.vec4f64.createView,d)};a.createMat3f64=function(d){void 0===d&&(d=b);return new a(72,l.mat3f64.createView,d)};a.createMat4f64=function(d){void 0===d&&(d=b);return new a(128,k.mat4f64.createView,d)};a.createQuatf64=function(e){void 0===e&&(e=b);return new a(32,
d.quatf64.createView,e)};Object.defineProperty(a.prototype,"test",{get:function(){return{size:this.buffers.length*this.itemsPerBuffer*this.itemByteSize}},enumerable:!0,configurable:!0});return a}();c.VectorStack=p;var b=4096})},"esri/core/libs/gl-matrix-2/mat3f64":function(){define(["require","exports","./factories/mat3f64"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.mat3f64=n})},"esri/core/libs/gl-matrix-2/factories/mat3f64":function(){define(["require","exports"],function(p,
c){Object.defineProperty(c,"__esModule",{value:!0});c.create=function(){return[1,0,0,0,1,0,0,0,1]};c.clone=function(c){return[c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8]]};c.fromValues=function(c,l,k,d,h,g,f,b,a){return[c,l,k,d,h,g,f,b,a]};c.createView=function(c,l){return new Float64Array(c,l,9)}})},"esri/core/libs/gl-matrix-2/quatf64":function(){define(["require","exports","./factories/quatf64"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.quatf64=n})},"esri/core/libs/gl-matrix-2/factories/quatf64":function(){define(["require",
"exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});c.create=function(){return[0,0,0,1]};c.clone=function(c){return[c[0],c[1],c[2],c[3]]};c.fromValues=function(c,l,k,d){return[c,l,k,d]};c.createView=function(c,l){return new Float64Array(c,l,4)}})},"esri/core/libs/gl-matrix-2/vec2f64":function(){define(["require","exports","./factories/vec2f64"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.vec2f64=n})},"esri/core/libs/gl-matrix-2/factories/vec2f64":function(){define(["require",
"exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});c.create=function(){return[0,0]};c.clone=function(c){return[c[0],c[1]]};c.fromValues=function(c,l){return[c,l]};c.fromArray=function(c){for(var l=[0,0],k=Math.min(2,c.length),d=0;d<k;++d)l[d]=c[d];return l};c.createView=function(c,l){return new Float64Array(c,l,2)};c.zeros=function(){return[0,0]};c.ones=function(){return[1,1]};c.unitX=function(){return[1,0]};c.unitY=function(){return[0,1]};c.ZEROS=[0,0];c.ONES=[1,1];c.UNIT_X=
[1,0];c.UNIT_Y=[0,1]})},"esri/views/3d/support/geometryUtils/vector":function(){define(["require","exports","../../../../core/libs/gl-matrix-2/vec3","../mathUtils"],function(p,c,n,l){function k(d,c){return n.vec3.dot(d,c)/n.vec3.length(d)}Object.defineProperty(c,"__esModule",{value:!0});c.projectPoint=function(d,c,g){c=k(d,c);return n.vec3.scale(g,d,c)};c.projectPointSignedLength=k;c.angle=function(d,c){d=n.vec3.dot(d,c)/(n.vec3.length(d)*n.vec3.length(c));return-l.acos(d)}})},"esri/views/3d/support/geometryUtils/boundedPlane":function(){define("require exports ../../../../core/compilerUtils ../../../../core/Logger ../../../../core/ObjectStack ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../mathUtils ../stack ./lineSegment ./plane ./ray ./vector".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u){function t(a){void 0===a&&(a=c.UP);return{plane:m.create(a.plane),origin:f.vec3f64.clone(a.origin),basis1:f.vec3f64.clone(a.basis1),basis2:f.vec3f64.clone(a.basis2)}}function r(a,b){void 0===b&&(b=t());return x(a.origin,a.basis1,a.basis2,b)}function x(a,b,d,e){void 0===e&&(e=t());g.vec3.copy(e.origin,a);g.vec3.copy(e.basis1,b);g.vec3.copy(e.basis2,d);m.fromVectorsAndPoint(d,b,a,e.plane);a=e;1E-6<Math.abs(g.vec3.dot(a.basis1,a.basis2)/(g.vec3.length(a.basis1)*
g.vec3.length(a.basis2)))&&K.warn("fromValues()","Provided basis vectors are not perpendicular");1E-6<Math.abs(g.vec3.dot(a.basis1,a.plane))&&K.warn("fromValues()","Basis vectors and plane normal are not perpendicular");1E-6<Math.abs(-g.vec3.dot(a.plane,a.origin)-a.plane[3])&&K.warn("fromValues()","Plane offset is not consistent with plane origin");return e}function w(b,d,e){b!==e&&r(b,e);b=g.vec3.scale(a.sv3d.get(),b.plane,d);g.vec3.add(e.origin,e.origin,b);e.plane[3]-=d;return e}function v(a,b){void 0===
b&&(b=t());var d=(a[2]-a[0])/2,e=(a[3]-a[1])/2;g.vec3.set(b.origin,a[0]+d,a[1]+e,0);g.vec3.set(b.basis1,d,0,0);g.vec3.set(b.basis2,0,e,0);m.fromValues(0,0,1,0,b.plane);return b}function y(a,b,d){return m.intersectRay(a.plane,b,d)?E(a,d):!1}function z(d,e,c){var f=M.get(),h=M.get();I(d,e,f,h);for(var h=Number.POSITIVE_INFINITY,k=0,l=O;k<l.length;k++){var q=G(d,l[k],T.get()),r=a.sv3d.get();m.intersectLineSegment(f,q,r)&&(q=b.directionFromTo(a.sv3d.get(),e.origin,r),q=Math.abs(b.acos(g.vec3.dot(e.direction,
q))),q<h&&(h=q,g.vec3.copy(c,r)))}return h===Number.POSITIVE_INFINITY?A(d,e,c):c}function A(b,d,e){if(y(b,d,e))return e;var c=M.get(),f=M.get();I(b,d,c,f);for(var h=Number.POSITIVE_INFINITY,k=0,l=O;k<l.length;k++){var r=G(b,l[k],T.get()),t=a.sv3d.get();m.intersectLineSegmentClamp(c,r,t)&&(r=q.distance2(d,t),m.isPointInside(f,t)&&r<h&&(h=r,g.vec3.copy(e,t)))}D(b,d.origin)<h&&g.vec3.copy(e,d.origin);return e}function B(b,d,e){var c=b.origin,f=b.basis1,m=b.basis2;d=g.vec3.subtract(a.sv3d.get(),d,c);
f=u.projectPointSignedLength(f,d)/g.vec3.length(f);m=u.projectPointSignedLength(m,d)/g.vec3.length(m);b=u.projectPointSignedLength(b.plane,d);return g.vec3.set(e,f,m,b)}function D(b,d){d=B(b,d,a.sv3d.get());var e=b.basis2;b=g.vec3.length(b.basis1);e=g.vec3.length(e);b=Math.max(Math.abs(d[0])-b,0);e=Math.max(Math.abs(d[1])-e,0);d=d[2];return b*b+e*e+d*d}function C(a,b){var d=-a.plane[3];return u.projectPointSignedLength(a.plane,b)-d}function E(b,d){var e=g.vec3.subtract(a.sv3d.get(),d,b.origin);d=
g.vec3.squaredLength(b.basis1);var c=g.vec3.squaredLength(b.basis2),f=g.vec3.dot(b.basis1,e);b=g.vec3.dot(b.basis2,e);return 0>-f-d&&0>f-d&&0>-b-c&&0>b-c}function H(a,b){var d=T.get();g.vec3.copy(d.origin,a.origin);g.vec3.copy(d.vector,b);return d}function G(b,d,e){var c=b.basis1,f=b.basis2;b=b.origin;var m=g.vec3.scale(a.sv3d.get(),c,d.origin[0]),h=g.vec3.scale(a.sv3d.get(),f,d.origin[1]);g.vec3.add(e.origin,m,h);g.vec3.add(e.origin,e.origin,b);c=g.vec3.scale(a.sv3d.get(),c,d.direction[0]);d=g.vec3.scale(a.sv3d.get(),
f,d.direction[1]);g.vec3.scale(e.vector,g.vec3.add(c,c,d),2);return e}function I(a,b,d,e){a=a.plane;m.fromVectorsAndPoint(a,b.direction,b.origin,d);m.fromVectorsAndPoint(d,a,b.origin,e)}Object.defineProperty(c,"__esModule",{value:!0});var K=l.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");p=function(){return function(){this.plane=m.create();this.origin=f.vec3f64.create();this.basis1=f.vec3f64.create();this.basis2=f.vec3f64.create()}}();c.BoundedPlaneClass=p;c.create=t;c.wrap=function(a,
b,d){var e=S.get();e.origin=a;e.basis1=b;e.basis2=d;e.plane=m.fromVectorsAndPoint(d,b,a,m.wrap(0,0,0,0));return e};c.copy=r;c.fromValues=x;c.elevate=w;c.setExtent=function(a,b,d){v(b,d);w(d,C(a,a.origin),d);return d};c.fromAABoundingRect=v;c.intersectRay=y;c.intersectRayClosestSilhouette=function(b,d,e){if(y(b,d,e))return e;b=z(b,d,a.sv3d.get());g.vec3.add(e,d.origin,g.vec3.scale(a.sv3d.get(),d.direction,g.vec3.distance(d.origin,b)/g.vec3.length(d.direction)));return e};c.closestPointOnSilhouette=
z;c.closestPoint=A;c.projectPoint=function(b,d,c){var f=m.projectPoint(b.plane,d,a.sv3d.get());d=e.projectPointClamp(H(b,b.basis1),f,-1,1,a.sv3d.get());f=e.projectPointClamp(H(b,b.basis2),f,-1,1,a.sv3d.get());g.vec3.subtract(c,g.vec3.add(a.sv3d.get(),d,f),b.origin);return c};c.projectPointLocal=B;c.distance2=D;c.distance=function(a,b){return Math.sqrt(D(a,b))};c.distanceToSilhouette=function(a,b){for(var d=Number.NEGATIVE_INFINITY,c=0,f=O;c<f.length;c++){var m=G(a,f[c],T.get()),m=e.distance2(m,b);
m>d&&(d=m)}return Math.sqrt(d)};c.extrusionContainsPoint=function(a,b){return m.isPointInside(a.plane,b)&&E(a,b)};c.axisAt=function(a,b,d,e){switch(d){case 0:g.vec3.copy(e,a.basis1);g.vec3.normalize(e,e);break;case 1:g.vec3.copy(e,a.basis2);g.vec3.normalize(e,e);break;case 2:g.vec3.copy(e,a.plane);break;default:n.neverReached(d)}return e};c.altitudeAt=C;c.setAltitudeAt=function(a,b,d,e){var c=C(a,b);a=g.vec3.scale(N,a.plane,d-c);g.vec3.add(e,b,a);return e};c.transform=function(a,b,e){a!==e&&r(a,e);
d.mat4.invert(V,b);d.mat4.transpose(V,V);g.vec3.transformMat4(e.basis1,a.basis1,V);g.vec3.transformMat4(e.basis2,a.basis2,V);g.vec3.transformMat4(e.plane,a.plane,V);g.vec3.transformMat4(e.origin,a.origin,b);m.setOffsetFromPoint(e.plane,e.origin,e.plane);return e};c.UP={plane:m.create(),origin:f.vec3f64.fromValues(0,0,0),basis1:f.vec3f64.fromValues(1,0,0),basis2:f.vec3f64.fromValues(0,1,0)};var M=new k.ObjectStack(m.create),T=new k.ObjectStack(e.create),N=f.vec3f64.create(),S=new k.ObjectStack(function(){return{origin:null,
basis1:null,basis2:null,plane:null}}),O=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],V=h.mat4f64.create()})},"esri/core/ObjectStack":function(){define(["require","exports","./nextTick"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(d){var c=this;this.allocator=d;this.items=[];this.itemsPtr=0;this.tickHandle=n.before(function(){return c.reset()});this.grow()}c.prototype.destroy=
function(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=null);this.items=null};c.prototype.get=function(){0===this.itemsPtr&&n(function(){});this.itemsPtr===this.items.length&&this.grow();return this.items[this.itemsPtr++]};c.prototype.reset=function(){this.items.length=Math.min(Math.min(3*Math.max(8,this.itemsPtr),this.itemsPtr+3*l),this.items.length);this.itemsPtr=0};c.prototype.grow=function(){for(var d=0;d<Math.max(8,Math.min(this.items.length,l));d++)this.items.push(this.allocator())};
return c}();c.ObjectStack=p;var l=1024;c.default=p})},"esri/views/3d/support/geometryUtils/lineSegment":function(){define("require exports ../../../../core/mathUtils ../../../../core/ObjectStack ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../stack".split(" "),function(p,c,n,l,k,d,h){function g(a){return a?{origin:d.vec3f64.clone(a.origin),vector:d.vec3f64.clone(a.vector)}:{origin:d.vec3f64.create(),vector:d.vec3f64.create()}}function f(a,b){var d=u.get();d.origin=
a;d.vector=b;return d}function b(a,b,d){void 0===d&&(d=g());k.vec3.copy(d.origin,a);k.vec3.copy(d.vector,b);return d}function a(a,b){b=k.vec3.subtract(h.sv3d.get(),b,a.origin);var d=k.vec3.dot(a.vector,b),e=k.vec3.dot(a.vector,a.vector),d=n.clamp(d/e,0,1);a=k.vec3.subtract(h.sv3d.get(),k.vec3.scale(h.sv3d.get(),a.vector,d),b);return k.vec3.dot(a,a)}function e(a,b,d,e,c){var f=a.vector,m=a.origin;b=k.vec3.subtract(h.sv3d.get(),b,m);m=k.vec3.length(f);b=k.vec3.dot(f,b)/m;k.vec3.scale(c,f,n.clamp(b,
d,e));return k.vec3.add(c,c,a.origin)}function m(a,b,d,e){var c=a.origin,f=k.vec3.add(h.sv3d.get(),c,a.vector);a=b.origin;var m=k.vec3.add(h.sv3d.get(),a,b.vector),g=h.sv3d.get();b=h.sv3d.get();g[0]=c[0]-a[0];g[1]=c[1]-a[1];g[2]=c[2]-a[2];b[0]=m[0]-a[0];b[1]=m[1]-a[1];b[2]=m[2]-a[2];if(1E-6>Math.abs(b[0])&&1E-6>Math.abs(b[1])&&1E-6>Math.abs(b[2]))return!1;m=h.sv3d.get();m[0]=f[0]-c[0];m[1]=f[1]-c[1];m[2]=f[2]-c[2];if(1E-6>Math.abs(m[0])&&1E-6>Math.abs(m[1])&&1E-6>Math.abs(m[2]))return!1;var f=g[0]*
b[0]+g[1]*b[1]+g[2]*b[2],l=b[0]*m[0]+b[1]*m[1]+b[2]*m[2],q=b[0]*b[0]+b[1]*b[1]+b[2]*b[2],r=(m[0]*m[0]+m[1]*m[1]+m[2]*m[2])*q-l*l;if(1E-6>Math.abs(r))return!1;g=(f*l-(g[0]*m[0]+g[1]*m[1]+g[2]*m[2])*q)/r;f=(f+l*g)/q;d&&(g=n.clamp(g,0,1),f=n.clamp(f,0,1));d=h.sv3d.get();l=h.sv3d.get();d[0]=c[0]+g*m[0];d[1]=c[1]+g*m[1];d[2]=c[2]+g*m[2];l[0]=a[0]+f*b[0];l[1]=a[1]+f*b[1];l[2]=a[2]+f*b[2];e.tA=g;e.tB=f;e.pA=d;e.pB=l;e.distance2=k.vec3.squaredDistance(d,l);return!0}Object.defineProperty(c,"__esModule",{value:!0});
c.create=g;c.wrap=f;c.copy=function(a,d){void 0===d&&(d=g());return b(a.origin,a.vector,d)};c.fromValues=b;c.fromPoints=function(a,b,d){void 0===d&&(d=g());k.vec3.copy(d.origin,a);k.vec3.subtract(d.vector,b,a);return d};c.distance2=a;c.distance=function(b,d){return Math.sqrt(a(b,d))};c.projectPoint=function(a,b,d){return e(a,b,0,1,d)};c.projectPointClamp=e;c.closestRayDistance2=function(a,b){if(m(a,f(b.origin,b.direction),!1,q)){b=q.tA;var d=q.pB,e=q.distance2;if(0<=b&&1>=b)return e;if(0>b)return k.vec3.squaredDistance(a.origin,
d);if(1<b)return k.vec3.squaredDistance(k.vec3.add(h.sv3d.get(),a.origin,a.vector),d)}return null};c.closestLineSegmentPoint=function(a,b,d){return m(a,b,!0,q)?(k.vec3.copy(d,q.pA),!0):!1};c.closestLineSegmentDistance2=function(a,b){return m(a,b,!0,q)?q.distance2:null};var q={tA:0,tB:0,pA:d.vec3f64.create(),pB:d.vec3f64.create(),distance2:0},u=new l.ObjectStack(function(){return{origin:null,vector:null}})})},"esri/views/3d/support/geometryUtils/plane":function(){define(["require","exports","../../../../core/mathUtils",
"../../../../core/libs/gl-matrix-2/vec3","../stack"],function(p,c,n,l,k){function d(a){void 0===a&&(a=c.UP);return[a[0],a[1],a[2],a[3]]}function h(a,b){void 0===b&&(b=d());return g(a[0],a[1],a[2],a[3],b)}function g(a,b,e,c,f){void 0===f&&(f=d());f[0]=a;f[1]=b;f[2]=e;f[3]=c;return f}function f(a,e,c){void 0===c&&(c=d());l.vec3.copy(c,e);e=l.vec3.dot(e,e);1E-5<Math.abs(e-1)&&1E-12<e&&l.vec3.scale(c,c,1/Math.sqrt(e));b(c,a,c);return c}function b(a,b,d){a!==d&&h(a,d);d[3]=-l.vec3.dot(d,b);return d}function a(a,
b,e,c){void 0===c&&(c=d());a=l.vec3.cross(k.sv3d.get(),b,a);return f(e,a,c)}function e(a,b,d){a=l.vec3.scale(k.sv3d.get(),a,l.vec3.dot(a,b));l.vec3.subtract(d,b,a);return d}function m(a,b){return l.vec3.dot(a,b)+a[3]}function q(a,b,d,e,c,f){var m=l.vec3.dot(a,d);if(0===m)return!1;a=-(l.vec3.dot(a,b)+a[3])/m;c&&(a=e?Math.max(0,a):n.clamp(a,0,1));if(0>a||!e&&1<a)return!1;l.vec3.add(f,b,l.vec3.scale(f,d,a));return!0}Object.defineProperty(c,"__esModule",{value:!0});c.create=d;c.wrap=function(a,b,d,e){return g(a,
b,d,e,k.sv4d.get())};c.copy=h;c.fromValues=g;c.fromNormalAndOffset=function(a,b,e){void 0===e&&(e=d());l.vec3.copy(e,a);e[3]=b;return e};c.fromPositionAndNormal=f;c.fromPoints=function(b,e,c,f){void 0===f&&(f=d());return a(l.vec3.subtract(k.sv3d.get(),b,e),l.vec3.subtract(k.sv3d.get(),c,e),b,f)};c.setOffsetFromPoint=b;c.negate=function(a,b){b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b};c.fromVectorsAndPoint=a;c.intersectRay=function(a,b,d){return q(a,b.origin,b.direction,!0,!1,d)};c.intersectLineSegment=
function(a,b,d){return q(a,b.origin,b.vector,!1,!1,d)};c.intersectLineSegmentClamp=function(a,b,d){return q(a,b.origin,b.vector,!1,!0,d)};c.isSphereFullyInside=function(a,b){var d=b.radius;return 0<=m(a,b.center)-d};c.isSphereFullyOutside=function(a,b){var d=b.radius;return 0>m(a,b.center)+d};c.isPointInside=function(a,b){return 0<=m(a,b)};c.isPointOutside=function(a,b){return 0>m(a,b)};c.isAABBFullyInside=function(a,b){var d=b[0],e=b[1],c=b[2],f=b[3],m=b[4];b=b[5];return 0<=a[0]*(0<a[0]?d:f)+a[1]*
(0<a[1]?e:m)+a[2]*(0<a[2]?c:b)+a[3]};c.clip=function(a,b){var d=l.vec3.dot(a,b.ray.direction);a=-m(a,b.ray.origin);if(0>a&&0<=d)return!1;if(-1E-6<d&&1E-6>d)return 0<a;if((0>a||0>d)&&!(0>a&&0>d))return!0;a/=d;0<d?a<b.c1&&(b.c1=a):a>b.c0&&(b.c0=a);return b.c0<=b.c1};c.projectPoint=function(a,b,d){var c=l.vec3.scale(k.sv3d.get(),a,-a[3]);b=l.vec3.subtract(k.sv3d.get(),b,c);a=e(a,b,k.sv3d.get());l.vec3.add(d,a,c);return d};c.projectVector=e;c.distance=function(a,b){return Math.abs(m(a,b))};c.signedDistance=
m;c.UP=[0,0,1,0]})},"esri/views/3d/support/geometryUtils/ray":function(){define("require exports ../../../../core/ObjectStack ../../../../core/screenUtils ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../stack".split(" "),function(p,c,n,l,k,d,h,g){function f(a){return a?{origin:h.vec3f64.clone(a.origin),direction:h.vec3f64.clone(a.direction)}:{origin:h.vec3f64.create(),direction:h.vec3f64.create()}}function b(a,b,e){void 0===
e&&(e=f());d.vec3.copy(e.origin,a);d.vec3.copy(e.direction,b);return e}function a(a,b,e){void 0===e&&(e=f());var c=l.castRenderScreenPointArray3(k.vec2.copy(g.sv3d.get(),b));c[2]=0;a.unprojectPoint(c,e.origin);b=l.castRenderScreenPointArray3(k.vec2.copy(g.sv3d.get(),b));b[2]=1;a=a.unprojectPoint(b,g.sv3d.get());d.vec3.subtract(e.direction,a,e.origin);return e}function e(a,b,e){void 0===e&&(e=f());d.vec3.copy(e.origin,a.eye);b=d.vec3.set(g.sv3d.get(),b[0],b[1],1);a=a.unprojectPoint(b,g.sv3d.get());
d.vec3.subtract(e.direction,a,e.origin);return e}function m(a,b){a=d.vec3.cross(g.sv3d.get(),d.vec3.normalize(g.sv3d.get(),a.direction),d.vec3.subtract(g.sv3d.get(),b,a.origin));return d.vec3.dot(a,a)}function q(){return{origin:null,direction:null}}Object.defineProperty(c,"__esModule",{value:!0});c.create=f;c.wrap=function(a,b){var d=u.get();d.origin=a;d.direction=b;return d};c.copy=function(a,d){void 0===d&&(d=f());return b(a.origin,a.direction,d)};c.fromPoints=function(a,b,e){void 0===e&&(e=f());
d.vec3.copy(e.origin,a);d.vec3.subtract(e.direction,b,a);return e};c.fromValues=b;c.fromScreen=function(b,d,e){void 0===e&&(e=f());return a(b,b.screenToRender(d,l.castRenderScreenPointArray3(g.sv3d.get())),e)};c.fromRender=a;c.fromScreenAtEye=function(a,b,d){void 0===d&&(d=f());return e(a,a.screenToRender(b,l.castRenderScreenPointArray3(g.sv3d.get())),d)};c.fromRenderAtEye=e;c.distance2=m;c.distance=function(a,b){return Math.sqrt(m(a,b))};c.closestPoint=function(a,b,e){b=d.vec3.dot(a.direction,d.vec3.subtract(e,
b,a.origin));d.vec3.add(e,a.origin,d.vec3.scale(e,a.direction,b));return e};c.createWrapper=q;var u=new n.ObjectStack(q)})},"esri/views/3d/support/geometryUtils/frustum":function(){define("require exports ../../../../core/ObjectStack ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4 ../../../../core/libs/gl-matrix-2/vec4f64 ../stack ./clipRay ./plane".split(" "),function(p,c,n,l,k,d,h,g,f,
b,a){function e(b){if(b){var e=b.planes;b=b.points;return{planes:[a.create(e[0]),a.create(e[1]),a.create(e[2]),a.create(e[3]),a.create(e[4]),a.create(e[5])],points:[d.vec3f64.clone(b[0]),d.vec3f64.clone(b[1]),d.vec3f64.clone(b[2]),d.vec3f64.clone(b[3]),d.vec3f64.clone(b[4]),d.vec3f64.clone(b[5]),d.vec3f64.clone(b[6]),d.vec3f64.clone(b[7])]}}return{planes:[a.create(),a.create(),a.create(),a.create(),a.create(),a.create()],points:[d.vec3f64.create(),d.vec3f64.create(),d.vec3f64.create(),d.vec3f64.create(),
d.vec3f64.create(),d.vec3f64.create(),d.vec3f64.create(),d.vec3f64.create()]}}function m(b,d,c){void 0===c&&(c=e());for(var f=0;6>f;f++)a.copy(b[f],c.planes[f]);for(f=0;8>f;f++)k.vec3.copy(c.points[f],d[f]);return c}function q(b){var d=b.planes;b=b.points;a.fromPoints(b[4],b[0],b[3],d[0]);a.fromPoints(b[1],b[5],b[6],d[1]);a.fromPoints(b[4],b[5],b[1],d[2]);a.fromPoints(b[3],b[2],b[6],d[3]);a.fromPoints(b[0],b[1],b[2],d[4]);a.fromPoints(b[5],b[4],b[7],d[5])}function u(b,d){for(var e=0;6>e;e++)if(!a.clip(b[e],
d))return!1;return!0}Object.defineProperty(c,"__esModule",{value:!0});c.create=e;c.copy=function(a,b){void 0===b&&(b=e());return m(a.planes,a.points,b)};c.fromValues=m;c.fromMatrix=function(a,b,d){void 0===d&&(d=e());var c=d.points;a=l.mat4.multiply(f.sm4d.get(),b,a);l.mat4.invert(a,a);for(b=0;8>b;++b){var m=h.vec4.transformMat4(f.sv4d.get(),t[b],a);k.vec3.set(c[b],m[0]/m[3],m[1]/m[3],m[2]/m[3])}q(d);return d};c.recomputePlanes=q;c.intersectsSphere=function(b,d){for(var e=0;6>e;e++)if(a.isSphereFullyInside(b[e],
d))return!1;return!0};c.intersectsRay=function(a,d){return u(a,b.fromRay(d,r.get()))};c.intersectsLineSegment=function(a,d,e){return u(a,b.fromLineSegmentAndDirection(d,e,r.get()))};c.intersectsPoint=function(b,d){for(var e=0;6>e;e++)if(0<a.signedDistance(b[e],d))return!1;return!0};c.intersectsAABB=function(b,d){for(var e=0;6>e;e++)if(a.isAABBFullyInside(b[e],d))return!1;return!0};c.planePointIndices={bottom:[5,1,0,4],near:[0,1,2,3],far:[5,4,7,6],right:[1,5,6,2],left:[4,0,3,7],top:[7,3,2,6]};var t=
[g.vec4f64.fromValues(-1,-1,-1,1),g.vec4f64.fromValues(1,-1,-1,1),g.vec4f64.fromValues(1,1,-1,1),g.vec4f64.fromValues(-1,1,-1,1),g.vec4f64.fromValues(-1,-1,1,1),g.vec4f64.fromValues(1,-1,1,1),g.vec4f64.fromValues(1,1,1,1),g.vec4f64.fromValues(-1,1,1,1)],r=new n.ObjectStack(b.create)})},"esri/views/3d/support/geometryUtils/clipRay":function(){define("require exports ../../../../core/ObjectStack ../../../../core/libs/gl-matrix-2/vec3 ../stack ./ray".split(" "),function(p,c,n,l,k,d){function h(a){return a?
{ray:d.create(a.ray),c0:a.c0,c1:a.c1}:{ray:d.create(),c0:0,c1:Number.MAX_VALUE}}function g(a,b,c,f){void 0===f&&(f=h());d.copy(a,f.ray);f.c0=b;f.c1=c;return f}function f(a,b,c){void 0===c&&(c=h());var e=l.vec3.length(a.vector);d.fromValues(a.origin,b,c.ray);c.c0=0;c.c1=e;return c}Object.defineProperty(c,"__esModule",{value:!0});c.create=h;c.wrap=function(a,d,c){var e=b.get();e.ray=a;e.c0=d;e.c1=c;return e};c.copy=function(a,b){void 0===b&&(b=h());return g(a.ray,a.c0,a.c1,b)};c.fromValues=g;c.fromRay=
function(a,b){void 0===b&&(b=h());d.copy(a,b.ray);b.c0=0;b.c1=Number.MAX_VALUE;return b};c.fromLineSegment=function(a,b){void 0===b&&(b=h());var d=l.vec3.normalize(k.sv3d.get(),a.vector);return f(a,d,b)};c.fromLineSegmentAndDirection=f;var b=new n.ObjectStack(function(){return{c0:0,c1:0,ray:null}})})},"esri/views/3d/support/geometryUtils/sphere":function(){define("require exports ../../../../core/compilerUtils ../../../../core/Logger ../../../../core/ObjectStack ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../geometryUtils ../mathUtils ../stack ./ray".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e){function m(a){return a?{radius:a.radius,center:g.vec3f64.clone(a.center)}:{radius:1,center:g.vec3f64.create()}}function q(a,b){void 0===b&&(b=m());return u(a.radius,a.center,b)}function u(a,b,d){void 0===d&&(d=m());h.vec3.copy(d.center,b);d.radius=a;return d}function t(b,d,e){var c=h.vec3.subtract(a.sv3d.get(),d.origin,b.center),f=h.vec3.dot(d.direction,d.direction),m=2*h.vec3.dot(d.direction,c);b=h.vec3.dot(c,c)-b.radius*b.radius;b=m*m-4*f*b;if(0>b)return!1;c=Math.sqrt(b);
b=(-m-c)/(2*f);f=(-m+c)/(2*f);if(0>b||f<b&&0<f)b=f;if(0>b)return!1;e&&h.vec3.add(e,d.origin,h.vec3.scale(a.sv3d.get(),d.direction,b));return!0}function r(b,e,c){var m=a.sv3d.get(),g=a.sm4d.get();h.vec3.cross(m,e.origin,e.direction);h.vec3.cross(c,m,e.origin);h.vec3.scale(c,c,1/h.vec3.length(c)*b.radius);b=w(b,e.origin);e=f.vector.angle(e.origin,c);d.mat4.identity(g);d.mat4.rotate(g,g,e+b,m);h.vec3.transformMat4(c,c,g);return c}function x(b,d,e){d=h.vec3.subtract(a.sv3d.get(),d,b.center);d=h.vec3.scale(a.sv3d.get(),
d,b.radius/h.vec3.length(d));return h.vec3.add(e,d,b.center)}function w(d,e){e=h.vec3.subtract(a.sv3d.get(),e,d.center);e=h.vec3.length(e);return b.acos(d.radius/(d.radius+Math.abs(d.radius-e)))}function v(a,d,e,c){a=h.vec3.subtract(A,d,a.center);switch(e){case 0:return a=b.cartesianToSpherical(a,A),a=a[2],h.vec3.set(c,-Math.sin(a),Math.cos(a),0);case 1:return a=b.cartesianToSpherical(a,A),e=a[1],a=a[2],d=Math.sin(e),h.vec3.set(c,-d*Math.cos(a),-d*Math.sin(a),Math.cos(e));case 2:return h.vec3.normalize(c,
a);default:n.neverReached(e)}}function y(a,b){b=h.vec3.subtract(E,b,a.center);return h.vec3.length(b)-a.radius}Object.defineProperty(c,"__esModule",{value:!0});var z=l.getLogger("esri.views.3d.support.geometryUtils.sphere");c.create=m;c.wrap=function(a,b){var d=B.get();d.radius=a;d.center=b||C;return d};c.copy=q;c.fromValues=u;c.elevate=function(a,b,d){a!==d&&h.vec3.copy(d.center,a.center);d.radius=a.radius+b;return d};c.setExtent=function(a,b,d){z.error("sphere.setExtent is not yet supported");return a===
d?d:q(a,d)};c.intersectRay=t;c.intersectScreen=function(a,b,d,c){b=e.fromScreenAtEye(b,d,D);return t(a,b,c)};c.intersectsRay=function(a,b){return t(a,b,null)};c.intersectRayClosestSilhouette=function(b,d,e){if(t(b,d,e))return e;b=r(b,d,a.sv3d.get());h.vec3.add(e,d.origin,h.vec3.scale(a.sv3d.get(),d.direction,h.vec3.distance(d.origin,b)/h.vec3.length(d.direction)));return e};c.closestPointOnSilhouette=r;c.closestPoint=function(a,b,d){if(t(a,b,d))return d;e.closestPoint(b,a.center,d);return x(a,d,d)};
c.projectPoint=x;c.distanceToSilhouette=function(b,d){d=h.vec3.subtract(a.sv3d.get(),d,b.center);d=h.vec3.squaredLength(d);return Math.sqrt(Math.abs(d-b.radius*b.radius))};c.angleToSilhouette=w;var A=g.vec3f64.create();c.axisAt=v;c.altitudeAt=y;c.setAltitudeAt=function(a,b,d,e){var c=y(a,b);a=v(a,b,2,E);d=h.vec3.scale(E,a,d-c);h.vec3.add(e,b,d);return e};var B=new k.ObjectStack(function(){return{center:null,radius:0}}),D=e.create(),C=g.vec3f64.create(),E=g.vec3f64.create();Object.freeze(C)})},"esri/views/3d/support/geometryUtils/triangle":function(){define("require exports ../../../../core/ObjectStack ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../stack ./lineSegment".split(" "),
function(p,c,n,l,k,d,h,g){function f(a){return a?{p0:d.vec3f64.clone(a.p0),p1:d.vec3f64.clone(a.p1),p2:d.vec3f64.clone(a.p2)}:{p0:d.vec3f64.create(),p1:d.vec3f64.create(),p2:d.vec3f64.create()}}function b(a,b,d,e){void 0===e&&(e=f());k.vec3.copy(e.p0,a);k.vec3.copy(e.p1,b);k.vec3.copy(e.p2,d);return e}function a(a,b,d){var e=l.vec2.distance(a,b);b=l.vec2.distance(b,d);a=l.vec2.distance(d,a);d=(e+b+a)/2;e=d*(d-e)*(d-b)*(d-a);return 0>=e?0:Math.sqrt(e)}Object.defineProperty(c,"__esModule",{value:!0});
c.create=f;c.wrap=function(a,b,d){var e=m.get();e.p0=a;e.p1=b;e.p2=d;return e};c.copy=function(a,d){void 0===d&&(d=f());return b(a.p0,a.p1,a.p2,d)};c.fromValues=b;c.distance2=function(a,b){var d=a.p0,c=a.p1;a=a.p2;var f=k.vec3.subtract(h.sv3d.get(),c,d),m=k.vec3.subtract(h.sv3d.get(),a,c),l=k.vec3.subtract(h.sv3d.get(),d,a),q=k.vec3.subtract(h.sv3d.get(),b,d),u=k.vec3.subtract(h.sv3d.get(),b,c),n=k.vec3.subtract(h.sv3d.get(),b,a),B=k.vec3.cross(f,f,l),D=k.vec3.dot(k.vec3.cross(h.sv3d.get(),f,B),q),
u=k.vec3.dot(k.vec3.cross(h.sv3d.get(),m,B),u),n=k.vec3.dot(k.vec3.cross(h.sv3d.get(),l,B),n);if(0<D&&0<u&&0<n)return b=k.vec3.dot(B,q),b*b/k.vec3.dot(B,B);d=g.distance2(g.fromValues(d,f,e.get()),b);c=g.distance2(g.fromValues(c,m,e.get()),b);b=g.distance2(g.fromValues(a,l,e.get()),b);return Math.min(d,c,b)};c.intersectRay=function(a,b,d){var e=b.direction;b=b.origin;var c=a.p0,f=a.p1,m=a.p2,h=f[0]-c[0],g=f[1]-c[1],l=f[2]-c[2],f=m[0]-c[0];a=m[1]-c[1];var m=m[2]-c[2],q=e[1]*m-a*e[2],t=e[2]*f-m*e[0],
u=e[0]*a-f*e[1],n=h*q+g*t+l*u;if(-1E-5<n&&1E-5>n)return!1;var n=1/n,p=b[0]-c[0],G=b[1]-c[1],c=b[2]-c[2],q=n*(p*q+G*t+c*u);if(0>q||1<q)return!1;t=G*l-g*c;l=c*h-l*p;h=p*g-h*G;g=n*(e[0]*t+e[1]*l+e[2]*h);if(0>g||1<q+g)return!1;d&&(k.vec3.scale(d,e,n*(f*t+a*l+m*h)),k.vec3.add(d,b,d));return!0};c.areaPoints2d=a;c.area2d=function(b){return a(b.p0,b.p1,b.p2)};var e=new n.ObjectStack(g.create),m=new n.ObjectStack(function(){return{p0:null,p1:null,p2:null}})})},"esri/views/3d/webgl-engine/lib/GeometryData":function(){define(["require",
"exports","./ComponentUtils","./geometryDataUtils","./Util"],function(p,c,n,l,k){return function(){function d(c,g,f,b){void 0===g&&(g=d.DefaultIndices);void 0===f&&(f=d.DefaultOffsets);void 0===b&&(b="triangle");this.preinterleaved=!1;var a={},e;for(e in c){var m=c[e],h=m.size;a[e]={data:m.data,size:h,offsetIdx:0,strideIdx:h}}if(g===d.DefaultIndices){g=k.getFirstObjectValue(a);c=l.generateDefaultIndexArray(g.data.length/g.size);g={};for(var u in a)g[u]=c}this._id=l.getNewId();this._vertexAttributes=
a;this._indices=g;this._componentOffsets=n.createOffsets(f);this._primitiveType=b}Object.defineProperty(d.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"vertexAttributes",{get:function(){return this._vertexAttributes},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"indices",{get:function(){return this._indices},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"componentOffsets",{get:function(){return this._componentOffsets},
enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"indexCount",{get:function(){return k.getFirstObjectValue(this._indices).length},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"primitiveType",{get:function(){return this._primitiveType},enumerable:!0,configurable:!0});d.prototype.getVertexAttr=function(){return this.vertexAttributes};d.prototype.toRenderData=function(){return{id:this._id.toString(),preinterleaved:!1,indices:this._indices,vertexAttr:this._vertexAttributes}};
d.prototype.getIndices=function(d){return this._indices[d]};d.prototype.getAttribute=function(d){return this._vertexAttributes[d]};d.prototype.estimateGpuMemoryUsage=function(){var d=0;this._indices[k.VertexAttrConstants.POSITION]&&(d+=12*this._indices[k.VertexAttrConstants.POSITION].length);this._indices[k.VertexAttrConstants.NORMAL]&&(d+=12*this._indices[k.VertexAttrConstants.NORMAL].length);this._indices[k.VertexAttrConstants.UV0]&&(d+=8*this._indices[k.VertexAttrConstants.UV0].length);this._indices[k.VertexAttrConstants.COLOR]&&
(d+=4*this._indices[k.VertexAttrConstants.COLOR].length);return d};d.DefaultIndices={};d.DefaultOffsets=new Uint32Array(0);return d}()})},"esri/views/3d/webgl-engine/lib/ComponentUtils":function(){define(["require","exports","../../../../core/arrayUtils","../../../../core/maybe"],function(p,c,n,l){function k(a,b){if(null!=a){var d=a.isVisibleBit,e=a.data,c=8*e.BYTES_PER_ELEMENT;return b<e.length*c?q(d,e,b,c):!a.isVisibleBit}return!0}function d(a){return l.isSome(a.component)?a.component:-1}function h(a,
b,d,e,c){k(b,e)&&g(a,b,d,d[e],d[e+1]-1,c)}function g(a,b,d,e,c,f){d=(b=0<a.length?a[a.length-1]:null)?b.range[1]:-1;var m=b?b.options:null;d>=e||(d+1===e&&m===f?b.range[1]=c:a.push({range:[e,c],options:f}))}function f(a){void 0===a&&(a=!0);return{isVisibleBit:!a,data:new Uint32Array(0)}}function b(a,b){return e(a,b,!0)}function a(a,b){return e(a,b,!1)}function e(a,b,d){var e=!1;a=a||t;e=a.isVisibleBit;a=a.data;b=u(b);var c=8*a.BYTES_PER_ELEMENT,f=a.length*c;d=d===e;if(0===a.length||0===b)e=!d;else if(f<
b&&!d)e=!0;else{for(var m=r[c],f=r[0],h=0;h<a.length-1;h++)if(e=!d&&a[h]!==m||d&&a[h]!==f)return e;e=a.length-1;b=r[(b-1)%c+1];e=!d&&(a[e]&b)!==b||d&&(a[e]&b)!==f}return e}function m(a){return 0<a.length}function q(a,b,d,e){var c=d/e|0;return 0!==(b[c]&1<<d-c*e)===a}function u(a){return Math.max(0,a.length-1)}Object.defineProperty(c,"__esModule",{value:!0});c.updateVisibility=function(a,b,d,e){if(d<u(b)){null==a&&(a=f());var c=a.isVisibleBit,m=a.data,h=8*m.BYTES_PER_ELEMENT,g=d/h|0,k=d-h*g;b=(u(b)-
1)/h|0;var l=m;e=e===c;d<l.length*h||!e||(d=Math.max(g+1,Math.ceil(1.5*l.length)),d=Math.min(d,b+1),m=new Uint32Array(d),m.set(l));g<m.length&&(m[g]=m[g]&~(1<<k)|(e?1:0)<<k);a.data=m}return a};c.getVisibility=k;c.hideAllComponents=function(a){if(null==a)a=f(!1);else{a.isVisibleBit=!0;for(var b=0;b<a.data.length;b++)a.data[b]=0}return a};c.unhideAllComponents=function(a){var b;if(null!=a)for(b=a,b.isVisibleBit=!1,a=0;a<b.data.length;a++)b.data[a]=0;return b};c.generateVisibleIndexRanges=function(a,
b){var d;if(a)if(m(b))if(0===a.data.length)d=[],b=[[b[0],b[b.length-1]-1]],d=a.isVisibleBit?d:b;else{d=[];for(var e=a.isVisibleBit,c=a.data,f=8*c.BYTES_PER_ELEMENT,h=c.length*f,g=u(b),k=!1,l=0;l<h&&l<g;l++){var r=q(e,c,l,f);if(r!==k){var t=b[l];r?d.push([t,0]):(k=d[d.length-1],k[1]=t-1);k=r}}a=!a.isVisibleBit;g>h&&a&&!k?d.push([b[h],b[g]-1]):k&&(k=d[d.length-1],k[1]=b[a?g:Math.min(g,h)]-1)}else d=[],d=a.isVisibleBit?d:null;else d=null;return d};c.addHighlight=function(a,b,e,c){a=a||[];b={component:b,
options:e,id:c};a.push(b);e=d(b);for(c=a.length-1;0<c&&e<d(a[c-1]);)b=[a[c],a[c-1]],a[c-1]=b[0],a[c]=b[1],--c;return a};c.removeHighlight=function(a,b){if(!a)return a;a=a.filter(function(a){return a.id!==b});return 0===a.length?null:a};c.generateHighlightedIndexRanges=function(b,d,e){if(!d)return null;if(!m(e))return b&&b.isVisibleBit?null:d.map(function(a){return{range:null,options:a.options}});for(var c=e[0],f=e[e.length-1]-1,k=[],q=!a(b,e),r=0;r<d.length;++r){var t=d[r].options,v=d[r].component;
if(l.isSome(v))h(k,b,e,v,t);else if(q)g(k,b,e,c,f,t);else for(v=0;v<u(e);++v)h(k,b,e,v,t)}return 0<k.length?k:null};c.hasHighlights=function(b,d,e){if(!d)return!1;if(!m(e))return b&&b.isVisibleBit?!1:0<d.length;b=!a(b,e);for(var c=0;c<d.length;c++)if(l.isSome(d[c].component)||b||0<u(e))return!0;return!1};c.defaultVisibilities=f;c.isAllVisible=function(b,d){return!a(b,d)};c.isAllHidden=function(a,d){return!b(a,d)};c.hasVisible=b;c.hasHidden=a;var t=f();c.createOffsets=function(a){return Array.isArray(a)?
new Uint32Array(a):a};c.hasComponent=function(a,b){return b<u(a)};c.hasComponents=m;var r=[];for(p=0;65>p;p++)r.push(Math.pow(2,p)-1);c.componentCount=u;c.componentFind=function(a,b){a=n.binaryIndexOf(a,b,!0);return 0<=a?a:null}})},"esri/views/3d/webgl-engine/lib/geometryDataUtils":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});var n=1,l=null;c.generateDefaultIndexArray=function(d){if(d>n||null==l){for(;d>n;)n*=2;l=new Uint32Array(n);for(var c=
0;c<n;c++)l[c]=c}return new Uint32Array(l.buffer,0,d)};var k=0;c.getNewId=function(){return k++}})},"esri/views/3d/webgl-engine/lib/Util":function(){define("require exports ../../../../core/mathUtils ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec2f64 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4 ../../../../core/libs/gl-matrix-2/vec4f64".split(" "),function(p,c,n,l,k,d,h,g,f){function b(a,b){if(!a)throw b=
b||"assert",a=Error(b),a.stack&&console.log(a.stack),new t(b);}function a(a){for(var b in a)return b}function e(a,b){a[12]=b[0];a[13]=b[1];a[14]=b[2]}function m(a,b){void 0===b&&(b=0);for(var d=0,e=0;4>e;e++)d+=a[b+e]*x[e];return d}function q(a){return a-Math.floor(a)}Object.defineProperty(c,"__esModule",{value:!0});var u=f.vec4f64.create(),t=function(){function a(a){this.message=a}a.prototype.toString=function(){return"AssertException: "+this.message};return a}();c.AssertException=t;c.VertexAttrConstants=
{POSITION:"position",NORMAL:"normal",NORMALCOMPRESSED:"normalCompressed",UV0:"uv0",AUXPOS1:"auxpos1",AUXPOS2:"auxpos2",COLOR:"color",SYMBOLCOLOR:"symbolColor",SIZE:"size",REGION:"region",COMPONENTINDEX:"componentIndex",TANGENT:"aTangent"};c.assert=b;c.verify=function(a,b){a||console.warn("Verify failed: "+(b||"")+"\n"+Error("verify").stack)};c.encodeInt16=function(a){return n.clamp(Math.round(32767*a),-32767,32767)};c.encodeNormal=function(a,b){var d=Math.abs(a[0]),e=Math.abs(a[1]),c=1/(d+e+Math.abs(a[2])),
f=Math.min(a[2]*c,0);b[0]=(0>a[0]?-1:1)*(d*c-f);b[1]=(0>a[1]?-1:1)*(e*c-f)};c.fallbackIfUndefined=function(a,b){return void 0===a?b:a};c.hex2rgb=function(a){a=Math.floor(a);return[(a>>16&255)/255,(a>>8&255)/255,(a&255)/255]};c.rgb2hex=function(a){var b=n.clamp(Math.round(255*a[0]),0,255),d=n.clamp(Math.round(255*a[1]),0,255);a=n.clamp(Math.round(255*a[2]),0,255);return"0x"+((b<<16)+(d<<8)+a).toString(16)};c.dec2hex=function(a){a=a.toString(16);return"00000000".substr(0,8-a.length)+a};c.rayTriangle3D=
function(a,b,d,e,c,f,m,g,k){void 0===k&&(k=h.vec3f64.create());var l=e[m]-d[f],q=e[m+1]-d[f+1],r=e[m+2]-d[f+2];e=c[g]-d[f];m=c[g+1]-d[f+1];c=c[g+2]-d[f+2];var t=b[1]*c-m*b[2],u=b[2]*e-c*b[0],y=b[0]*m-e*b[1];g=l*t+q*u+r*y;if(-1E-5<g&&1E-5>g)return!1;g=1/g;var x=a[0]-d[f],v=a[1]-d[f+1];a=a[2]-d[f+2];k[1]=g*(x*t+v*u+a*y);if(0>k[1]||1<k[1])return!1;d=v*r-q*a;a=a*l-r*x;l=x*q-l*v;k[2]=g*(b[0]*d+b[1]*a+b[2]*l);if(0>k[2]||1<k[1]+k[2])return!1;k[0]=g*(e*d+m*a+c*l);return!0};c.rayBoxTest=function(a,b,d,e){var c,
f=(d[0]-a[0])/b[0],m=(e[0]-a[0])/b[0];f>m&&(c=f,f=m,m=c);var h=(d[1]-a[1])/b[1],g=(e[1]-a[1])/b[1];h>g&&(c=h,h=g,g=c);if(f>g||h>m)return!1;h>f&&(f=h);g<m&&(m=g);d=(d[2]-a[2])/b[2];a=(e[2]-a[2])/b[2];d>a&&(c=d,d=a,a=c);if(f>a||d>m)return!1;a<m&&(m=a);return 0>m?!1:!0};c.rayRay2D=function(a,b,e,c,f,m){void 0===m&&(m=d.vec2f64.create());var h=(c[f]-e[f])*(b[0]-a[0])-(c[0]-e[0])*(b[f]-a[f]);if(0===h)return!1;e=((c[0]-e[0])*(a[f]-e[f])-(c[f]-e[f])*(a[0]-e[0]))/h;m[0]=a[0]+e*(b[0]-a[0]);m[1]=a[f]+e*(b[f]-
a[f]);return!0};c.project=function(a,d,e,c,f){f||(f=a);u[0]=a[0];u[1]=a[1];u[2]=a[2];u[3]=1;g.vec4.transformMat4(u,u,d);2<f.length&&(f[2]=-u[2]);g.vec4.transformMat4(u,u,e);b(0!==u[3]);f[0]=u[0]/u[3];f[1]=u[1]/u[3];f[2]=u[2]/u[3];f[0]=(.5*f[0]+.5)*c[2]+c[0];f[1]=(.5*f[1]+.5)*c[3]+c[1]};c.getFirstObjectKey=a;c.getFirstObjectValue=function(b){return b[a(b)]};c.objectEmpty=function(a){for(var b in a)return!1;return!0};c.logWithBase=function(a,b){return Math.log(a)/Math.log(b)};c.setMatrixTranslation=
e;c.setMatrixTranslation3=function(a,b,d,e){a[12]=b;a[13]=d;a[14]=e};c.getMatrixTranslation=function(a,b){void 0===b&&(b=h.vec3f64.create());b[0]=a[12];b[1]=a[13];b[2]=a[14];return b};c.createTranslationMatrix=function(a,b){a=l.mat4.identity(a);e(a,b);return a};c.isTranslationMatrix=function(a){return 1===a[0]&&0===a[1]&&0===a[2]&&0===a[3]&&0===a[4]&&1===a[5]&&0===a[6]&&0===a[7]&&0===a[8]&&0===a[9]&&1===a[10]&&0===a[11]&&1===a[15]};c.fovx2fovy=function(a,b,d){return 2*Math.atan(d*Math.tan(.5*a)/b)};
c.fovy2fovx=function(a,b,d){return 2*Math.atan(b*Math.tan(.5*a)/d)};c.fovx2fovd=function(a,b,d){return 2*Math.atan(Math.sqrt(b*b+d*d)*Math.tan(.5*a)/b)};c.fovy2fovd=function(a,b,d){return 2*Math.atan(Math.sqrt(b*b+d*d)*Math.tan(.5*a)/d)};c.fovd2fovx=function(a,b,d){return 2*Math.atan(b*Math.tan(.5*a)/Math.sqrt(b*b+d*d))};c.fovd2fovy=function(a,b,d){return 2*Math.atan(d*Math.tan(.5*a)/Math.sqrt(b*b+d*d))};c.packFloatRGBA=function(a,b,d){void 0===d&&(d=0);a=n.clamp(a,0,w);for(var e=0;4>e;e++)b[d+e]=
Math.floor(256*q(a*r[e]))};c.unpackFloatRGBA=m;var r=[1,256,65536,16777216],x=[1/256,1/65536,1/16777216,1/4294967296],w=m(new Uint8ClampedArray([255,255,255,255]));c.inverseProjectionInfo=function(a,b,d,e,c){0===a[11]?(e[0]=2/(b*a[0]),e[1]=2/(d*a[5]),e[2]=(1+a[12])/a[0],e[3]=(1+a[13])/a[5],k.vec2.set(c,0,1)):(e[0]=-2/(b*a[0]),e[1]=-2/(d*a[5]),e[2]=(1-a[8])/a[0],e[3]=(1-a[9])/a[5],k.vec2.set(c,1,0))}})},"esri/views/3d/webgl-engine/shaders/SimpleAtmospherePrograms":function(){define(["require","exports",
"../lib/DefaultVertexAttributeLocations","./sources/resolver","../../../webgl/programUtils"],function(p,c,n,l,k){Object.defineProperty(c,"__esModule",{value:!0});c.colorPass={name:"simple-atmosphere-color",shaders:function(d){return{vertexShader:k.glslifyDefineMap({PANORAMIC:d.panoramic})+l.resolveIncludes("environment/simpleAtmosphere.vert"),fragmentShader:k.glslifyDefineMap({PANORAMIC:d.panoramic})+l.resolveIncludes("environment/simpleAtmosphere.frag")}},attributes:n.Default3D};c.fadePass={name:"simple-atmosphere-fade",
shaders:{vertexShader:l.resolveIncludes("environment/simpleAtmosphereFade.vert"),fragmentShader:l.resolveIncludes("environment/simpleAtmosphereFade.frag")},attributes:n.Default3D}})},"esri/views/3d/webgl-engine/lib/DefaultVertexAttributeLocations":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});c.Default3D={position:0,normal:1,normalCompressed:1,uv0:2,color:3,instanceColor:3,size:4,aTangent:4,auxpos1:5,symbolColor:5,componentIndex:5,auxpos2:6,
featureAttribute:6,instanceFeatureAttribute:6,region:7,model:8,modelNormal:12,modelOriginHi:11,modelOriginLo:15}})},"esri/views/3d/webgl-engine/shaders/sources/resolver":function(){define(["require","exports","./shaderRepository","../../../../webgl/ShaderCompiler"],function(p,c,n,l){Object.defineProperty(c,"__esModule",{value:!0});var k=new l(function(d){var c=n;d.split("/").forEach(function(d){c&&(c=c[d])});return c});c.resolveIncludes=function(d){return k.resolveIncludes(d)}})},"esri/views/3d/webgl-engine/shaders/sources/shaderRepository":function(){define(["require",
"exports"],function(p,c){return{edgeRenderer:{"adjustProjectedPosition.glsl":"uniform vec2 uDepthBias;\nuniform vec2 uViewportDimInv;\nbool isNaN(float val) {\n  return ( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 ) ? false : true;\n}\nvec2 calculateProjectedBiasXY(vec4 projPos, vec3 worldNormal) {\n  float offsetXY \x3d uDepthBias.x;\n  float offsetZ  \x3d uDepthBias.y;\n  vec4 projNormal \x3d uProj * uView * vec4(worldNormal, 0.0);\n  return offsetXY * projPos.w * 2.0 * uViewportDimInv * normalize(projNormal.xyz).xy;\n}\nfloat calculateProjectedBiasZ(vec4 projPos) {\n  float offsetZ \x3d uDepthBias.y;\n  return sqrt(projPos.z) * offsetZ;\n}\nvec4 adjustProjectedPosition(vec4 projPos, vec3 worldNormal, float lineWidth) {\n  vec2 offsetXY \x3d calculateProjectedBiasXY(projPos, worldNormal);\n  if (!isNaN(offsetXY.x) \x26\x26 !isNaN(offsetXY.y)) {\n    projPos.xy +\x3d offsetXY;\n  }\n  projPos.z +\x3d calculateProjectedBiasZ(projPos);\n  return projPos;\n}",
"edgeRenderer.frag":"#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\nvarying vec4 vColor;\nvarying float vRadius;\nvarying vec3 vPosition;\nvarying vec3 vWorldPosition;\nvarying float vLineLengthPixels;\nvarying float vSizeFalloffFactor;\nvarying float vLineIndex;\n#define COVERAGE_TEST_THRESHOLD 0.01\n#include \x3cedgeRenderer/lineOffset.glsl\x3e\nvec2 lineWithCapsDistance(float radius, vec2 position, float lineLength) {\n  float lineOffset \x3d calculateLineOffset();\n  float positionX \x3d position.x - lineOffset;\n  if (radius \x3c 1.0) {\n    float coverageX \x3d clamp(min(radius, positionX + 0.5) - max(-radius, positionX - 0.5), 0.0, 1.0);\n    float coverageY \x3d clamp(min(lineLength, position.y + 0.5) - max(0.0, position.y - 0.5), 0.0, 1.0);\n    float coverage \x3d min(coverageX, coverageY);\n    return vec2(0.5 - coverage, 0.0);\n  }\n  else {\n    float positionOnCap \x3d position.y - clamp(position.y, 0.0, lineLength);\n    vec2 lineToPosition \x3d vec2(positionX, positionOnCap);\n    return vec2(length(lineToPosition) - radius, positionOnCap / radius);\n  }\n}\nvoid main() {\n  float radius \x3d vRadius * calculateLinePressure();\n  vec2 distance \x3d lineWithCapsDistance(radius, vPosition.xy, vLineLengthPixels);\n  float coverage \x3d clamp(0.5 - distance.x, 0.0, 1.0);\n#ifdef ANTIALIASING\n  const float coverageLimit \x3d COVERAGE_TEST_THRESHOLD;\n#else\n  float coverageLimit \x3d radius \x3c\x3d 0.5 ? COVERAGE_TEST_THRESHOLD : 0.75;\n#endif\n  if (coverage \x3c coverageLimit) {\n    discard;\n  }\n  discardBySlice(vWorldPosition);\n  float alpha \x3d vColor.a * coverage;\n  gl_FragColor \x3d vec4(vColor.rgb, alpha);\n}",
"edgeRenderer.vert":"#include \x3cutil/vsPrecision.glsl\x3e\nuniform mat4 uProj;\nuniform mat4 uView;\nuniform mat4 uModel;\nuniform vec3 uCameraPosition;\nuniform vec2 uPixelToNDC;\nuniform vec2 uNDCToPixel;\nuniform float uPixelRatio;\nattribute vec3 aPosition0;\nattribute vec3 aPosition1;\nattribute float aVariantOffset;\nattribute float aVariantStroke;\nattribute float aVariantExtension;\n#ifdef SILHOUETTE\nattribute vec3 aNormalA;\nattribute vec3 aNormalB;\n#else\nattribute vec3 aNormal;\n#endif\nattribute vec2 aSideness;\nattribute vec2 aPackedAttributes;\nstruct UnpackedAttributes {\nvec2 sideness;\nvec2 sidenessNorm;\nfloat lineWidthPixels;\nfloat extensionLengthPixels;\n#if (MODE \x3d\x3d MODE_UBER)\nfloat type;\n#endif\n};\nvarying vec4 vColor;\nvarying vec3 vPosition;\nvarying vec3 vWorldPosition;\nvarying float vRadius;\nvarying float vLineLengthPixels;\nvarying float vSizeFalloffFactor;\n#include \x3cedgeRenderer/adjustProjectedPosition.glsl\x3e\n#include \x3cedgeRenderer/styleOutputs.glsl\x3e\n#include \x3cedgeRenderer/lineAmplitude.glsl\x3e\n#include \x3cedgeRenderer/util.glsl\x3e\nvec4 calculateGeometricOutputs(vec4 viewPosV0, vec4 viewPosV1, vec4 worldPosV0, vec4 worldPosV1, vec3 worldNormal, UnpackedAttributes unpackedAttributes) {\n  vec2 sideness \x3d unpackedAttributes.sideness;\n  vec2 sidenessNorm \x3d unpackedAttributes.sidenessNorm;\n  vWorldPosition \x3d mix(worldPosV0, worldPosV1, sidenessNorm.y).xyz;\n  vec4 viewPos \x3d mix(viewPosV0, viewPosV1, sidenessNorm.y);\n  vec4 projPosV0 \x3d uProj * viewPosV0;\n  vec4 projPosV1 \x3d uProj * viewPosV1;\n  vec4 projPos \x3d uProj * viewPos;\n  vec3 screenSpaceLineNDC \x3d (projPosV1.xyz / projPosV1.w - projPosV0.xyz / projPosV0.w);\n  vec2 screenSpaceLinePixels \x3d screenSpaceLineNDC.xy * uNDCToPixel;\n  float lineLengthPixels \x3d length(screenSpaceLinePixels);\n  float dzPerPixel \x3d screenSpaceLineNDC.z / lineLengthPixels;\n  vec2 screenSpaceDirection \x3d screenSpaceLinePixels / lineLengthPixels;\n  vec2 perpendicularScreenSpaceDirection \x3d vec2(screenSpaceDirection.y, -screenSpaceDirection.x) * sideness.x;\n  float falloffFactor \x3d distanceBasedPerspectiveFactor(-viewPos.z) * uPixelRatio;\n  float lineWidthPixels \x3d unpackedAttributes.lineWidthPixels * falloffFactor;\n  float extensionLengthPixels \x3d calculateExtensionLength(unpackedAttributes.extensionLengthPixels, lineLengthPixels) * falloffFactor;\n  float lineAmplitudePixels \x3d calculateLineAmplitude(unpackedAttributes) * uPixelRatio;\n  vSizeFalloffFactor \x3d falloffFactor;\n  float lineWidthAndAmplitudePixels \x3d lineWidthPixels + lineAmplitudePixels + lineAmplitudePixels;\n  float extendedLineLengthPixels \x3d lineLengthPixels + extensionLengthPixels + extensionLengthPixels;\n#ifdef ANTIALIASING\n  const float aaPaddingPixels \x3d 1.0;\n  float halfAAPaddedLineWidthAndAmplitudePixels \x3d lineWidthAndAmplitudePixels * 0.5 + aaPaddingPixels;\n  float aaPaddedRoundedCapSizePixels \x3d lineWidthPixels * 0.5 + aaPaddingPixels;\n  float aaPaddedLineLengthPixels \x3d extendedLineLengthPixels + aaPaddingPixels + aaPaddingPixels;\n  float halfAAPaddedLineLengthPixels \x3d aaPaddedLineLengthPixels * 0.5;\n#else\n  float halfAAPaddedLineWidthAndAmplitudePixels \x3d max(lineWidthAndAmplitudePixels, 1.0) * 0.5;\n  float aaPaddedRoundedCapSizePixels \x3d max(lineWidthPixels, 1.0) * 0.5;\n  float halfAAPaddedLineLengthPixels \x3d max(extendedLineLengthPixels, 1.0) * 0.5;\n#endif\n  vec2 halfAAPaddedLineWidthAndAmplitudeNDC \x3d halfAAPaddedLineWidthAndAmplitudePixels * uPixelToNDC;\n  vec2 aaPaddedRoundedCapSizeNDC \x3d aaPaddedRoundedCapSizePixels * uPixelToNDC;\n  vec2 extensionLengthNDC \x3d extensionLengthPixels * uPixelToNDC;\n  vec2 ndcOffset \x3d (\n      screenSpaceDirection * sideness.y * (aaPaddedRoundedCapSizeNDC + extensionLengthNDC)\n    + perpendicularScreenSpaceDirection * halfAAPaddedLineWidthAndAmplitudeNDC\n  );\n  projPos.xy +\x3d ndcOffset * projPos.w;\n  projPos.z +\x3d (dzPerPixel * (aaPaddedRoundedCapSizePixels + extensionLengthPixels)) * sideness.y * projPos.w;\n  projPos \x3d adjustProjectedPosition(projPos, worldNormal, 1.0 + max((lineWidthAndAmplitudePixels - 1.0) * 0.5, 0.0));\n  float aaPaddedLineWithCapsLengthPixels \x3d extendedLineLengthPixels + aaPaddedRoundedCapSizePixels + aaPaddedRoundedCapSizePixels;\n  float pixelPositionAlongLine \x3d aaPaddedLineWithCapsLengthPixels * sidenessNorm.y - aaPaddedRoundedCapSizePixels;\n  vPosition \x3d vec3(\n    halfAAPaddedLineWidthAndAmplitudePixels * sideness.x,\n    pixelPositionAlongLine,\n    pixelPositionAlongLine / extendedLineLengthPixels\n  );\n  vRadius \x3d lineWidthPixels * 0.5;\n  vLineLengthPixels \x3d extendedLineLengthPixels;\n#ifdef SILHOUETTE\n  gl_Position \x3d isSilhouetteEdge(viewPosV0, aNormalA, aNormalB) ? projPos : vec4(10.0, 10.0, 10.0, 1.0);\n#else\n  gl_Position \x3d projPos;\n#endif\n#if (MODE \x3d\x3d MODE_UBER)\n  if (unpackedAttributes.type \x3c\x3d 0.0 \x26\x26 lineLengthPixels \x3c\x3d 3.0) {\n    gl_Position \x3d vec4(10.0, 10.0, 10.0, 1.0);\n  }\n#elif (MODE \x3d\x3d MODE_SKETCH)\n  if (lineLengthPixels \x3c\x3d 3.0) {\n    gl_Position \x3d vec4(10.0, 10.0, 10.0, 1.0);\n  }\n#endif\n  return projPos;\n}\n#if (MODE \x3d\x3d MODE_UBER)\nUnpackedAttributes unpackAttributes(ComponentData component) {\n  vec2 sidenessNorm \x3d aSideness;\n  vec2 sideness \x3d sidenessNorm * 2.0 - 1.0;\n  float fType \x3d component.type;\n  float extensionLengthPixels \x3d component.extensionLength;\n  float lineWidth \x3d component.lineWidth;\n  if (fType \x3c\x3d 0.0) {\n    extensionLengthPixels *\x3d aVariantExtension * 2.0 - 1.0;\n  }\n  return UnpackedAttributes(sideness, sidenessNorm, lineWidth, extensionLengthPixels, fType);\n}\n#else\nUnpackedAttributes unpackAttributes(ComponentData component) {\n  vec2 sidenessNorm \x3d aSideness;\n  vec2 sideness \x3d sidenessNorm * 2.0 - 1.0;\n  float extensionLengthPixels \x3d component.extensionLength;\n#if (MODE \x3d\x3d MODE_SKETCH)\n  extensionLengthPixels *\x3d aVariantExtension * 2.0 - 1.0;\n#endif\n  float lineWidth \x3d component.lineWidth;\n  return UnpackedAttributes(sideness, sidenessNorm, lineWidth, extensionLengthPixels);\n}\n#endif\nvoid main() {\n  ComponentData component \x3d readComponentData();\n  UnpackedAttributes unpackedAttributes \x3d unpackAttributes(component);\n  vec4 worldPosV0 \x3d uModel * vec4(aPosition0, 1.0);\n  vec4 worldPosV1 \x3d uModel * vec4(aPosition1, 1.0);\n  vec4 viewPosV0 \x3d uView * worldPosV0;\n  vec4 viewPosV1 \x3d uView * worldPosV1;\n#ifdef SILHOUETTE\n  vec3 worldNormal \x3d silhouetteWorldNormal(aNormalA, aNormalB);\n#else\n  vec3 worldNormal \x3d modelToWorldNormal(aNormal);\n#endif\n  vec4 projPos \x3d calculateGeometricOutputs(viewPosV0, viewPosV1, worldPosV0, worldPosV1, worldNormal, unpackedAttributes);\n  vColor \x3d component.color;\n  calculateStyleOutputs(viewPosV0, viewPosV1, worldPosV0, worldPosV1, projPos, worldNormal, unpackedAttributes);\n}",
"lineAmplitude.glsl":"#if (MODE \x3d\x3d MODE_UBER || MODE \x3d\x3d MODE_SOLID)\n  float calculateLineAmplitudeSolid() {\n    return 0.0;\n  }\n#endif\n#if (MODE \x3d\x3d MODE_SOLID)\n  float calculateLineAmplitude(UnpackedAttributes unpackedAttributes) {\n    return calculateLineAmplitudeSolid();\n  }\n#endif\n#if (MODE \x3d\x3d MODE_UBER || MODE \x3d\x3d MODE_SKETCH)\n  uniform float uStrokesAmplitude;\n  float calculateLineAmplitudeSketch() {\n    return uStrokesAmplitude;\n  }\n#endif\n#if (MODE \x3d\x3d MODE_SKETCH)\n  float calculateLineAmplitude(UnpackedAttributes unpackedAttributes) {\n    return calculateLineAmplitudeSketch();\n  }\n#endif\n#if (MODE \x3d\x3d MODE_UBER)\n  float calculateLineAmplitude(UnpackedAttributes unpackedAttributes) {\n    float type \x3d unpackedAttributes.type;\n    if (type \x3c\x3d 0.0) {\n      return calculateLineAmplitudeSketch();\n    }\n    else {\n      return calculateLineAmplitudeSolid();\n    }\n  }\n#endif",
"lineOffset.glsl":"#include \x3cutil/encoding.glsl\x3e\n#if (MODE \x3d\x3d MODE_UBER || MODE \x3d\x3d MODE_SKETCH)\n  uniform sampler2D uStrokesTexture;\n  uniform float uStrokesNormalizationScale;\n  varying vec2 vStrokeUV;\n  float calculateLineOffsetSketch() {\n    float offsetNorm \x3d rgba2float(texture2D(uStrokesTexture, vStrokeUV));\n    return (offsetNorm - 0.5) * uStrokesNormalizationScale;\n  }\n  float calculateLinePressureSketch() {\n    return rgba2float(texture2D(uStrokesTexture, vStrokeUV + vec2(0.0, 0.5)));\n  }\n#endif\n#if (MODE \x3d\x3d MODE_SKETCH)\n  float calculateLineOffset() {\n    return calculateLineOffsetSketch();\n  }\n  float calculateLinePressure() {\n    return calculateLinePressureSketch();\n  }\n#endif\n#if (MODE \x3d\x3d MODE_UBER || MODE \x3d\x3d MODE_SOLID)\n  float calculateLineOffsetSolid() {\n    return 0.0;\n  }\n  float calculateLinePressureSolid() {\n    return 1.0;\n  }\n#endif\n#if (MODE \x3d\x3d MODE_SOLID)\n  float calculateLineOffset() {\n    return calculateLineOffsetSolid();\n  }\n  float calculateLinePressure() {\n    return calculateLinePressureSolid();\n  }\n#endif\n#if (MODE \x3d\x3d MODE_UBER)\n  varying float vType;\n  float calculateLineOffset() {\n    if (vType \x3c\x3d 0.0) {\n      return calculateLineOffsetSketch();\n    }\n    else {\n      return calculateLineOffsetSolid();\n    }\n  }\n  float calculateLinePressure() {\n    if (vType \x3c\x3d 0.0) {\n      return calculateLinePressureSketch();\n    }\n    else {\n      return calculateLinePressureSolid();\n    }\n  }\n#endif",
"styleOutputs.glsl":"#if (MODE \x3d\x3d MODE_UBER || MODE \x3d\x3d MODE_SKETCH)\n  uniform vec2 uStrokesTextureScale;\n  uniform float uStrokesLog2Resolution;\n  uniform float uStrokeVariants;\n  varying vec2 vStrokeUV;\n  varying float vLineIndex;\n  void calculateStyleOutputsSketch(float lineLength, UnpackedAttributes unpackedAttributes) {\n    vec2 sidenessNorm \x3d unpackedAttributes.sidenessNorm;\n    float lineIndex \x3d clamp(ceil(log2(lineLength)), 0.0, uStrokesLog2Resolution);\n    vStrokeUV \x3d vec2(exp2(lineIndex) * sidenessNorm.y, lineIndex * uStrokeVariants + aVariantStroke + 0.5) * uStrokesTextureScale;\n    vStrokeUV.x +\x3d aVariantOffset;\n    vLineIndex \x3d lineIndex;\n  }\n#endif\n#if (MODE \x3d\x3d MODE_SOLID)\n  void calculateStyleOutputs(vec4 viewPosV0, vec4 viewPosV1, vec4 worldPosV0, vec4 worldPosV1, vec4 projPos, vec3 worldNormal, UnpackedAttributes unpackedAttributes) {\n  }\n#elif (MODE \x3d\x3d MODE_SKETCH)\n  void calculateStyleOutputs(vec4 viewPosV0, vec4 viewPosV1, vec4 worldPosV0, vec4 worldPosV1, vec4 projPos, vec3 worldNormal, UnpackedAttributes unpackedAttributes) {\n    calculateStyleOutputsSketch(vLineLengthPixels, unpackedAttributes);\n  }\n#elif (MODE \x3d\x3d MODE_UBER)\n  varying float vType;\n  void calculateStyleOutputs(vec4 viewPosV0, vec4 viewPosV1, vec4 worldPosV0, vec4 worldPosV1, vec4 projPos, vec3 worldNormal, UnpackedAttributes unpackedAttributes) {\n    vType \x3d unpackedAttributes.type;\n    if (unpackedAttributes.type \x3c\x3d 0.0) {\n      calculateStyleOutputsSketch(vLineLengthPixels, unpackedAttributes);\n    }\n  }\n#endif",
"util.glsl":"uniform float uDistanceFalloffFactor;\nfloat distanceBasedPerspectiveFactor(float distance) {\n  return clamp(sqrt(uDistanceFalloffFactor / distance), 0.0, 1.0);\n}\nuniform sampler2D uComponentDataTex;\nuniform vec2 uComponentDataTexInvDim;\nattribute float aComponentIndex;\n#define COMPONENT_COLOR_FIELD_OFFSET 0.0\n#define COMPONENT_OTHER_FIELDS_OFFSET 1.0\n#define COMPONENT_FIELD_COUNT 2.0\n#define LINE_WIDTH_FRACTION_FACTOR 8.0\n#define EXTENSION_LENGTH_OFFSET 128.0\n#define COMPONENT_TEX_WIDTH 4096.0\nvec2 componentTextureCoords(float componentIndex, float fieldOffset) {\n  float fieldIndex \x3d COMPONENT_FIELD_COUNT * componentIndex + fieldOffset;\n  float rowIndex \x3d floor(fieldIndex / COMPONENT_TEX_WIDTH);\n  float colIndex \x3d mod(fieldIndex, COMPONENT_TEX_WIDTH);\n  vec2 linearIndex \x3d vec2(\n    (colIndex + 0.5) / COMPONENT_TEX_WIDTH,\n    (rowIndex + 0.5) * uComponentDataTexInvDim.y\n  );\n  return linearIndex;\n}\nstruct ComponentData {\n  vec4 color;\n  float lineWidth;\n  float extensionLength;\n  float type;\n};\nComponentData readComponentData() {\n  vec2 colorIndex \x3d componentTextureCoords(aComponentIndex, COMPONENT_COLOR_FIELD_OFFSET);\n  vec2 otherIndex \x3d componentTextureCoords(aComponentIndex, COMPONENT_OTHER_FIELDS_OFFSET);\n  vec4 colorValue \x3d texture2D(uComponentDataTex, colorIndex);\n  vec4 otherValue \x3d texture2D(uComponentDataTex, otherIndex);\n  return ComponentData(\n    vec4(colorValue.rgb, colorValue.a * otherValue.w),\n    otherValue.x * (255.0 / LINE_WIDTH_FRACTION_FACTOR),\n    otherValue.y * 255.0 - EXTENSION_LENGTH_OFFSET,\n    -(otherValue.z * 255.0) + 0.5\n  );\n}\nvec3 modelToWorldNormal(vec3 normal) {\n  return (uModel * vec4(normal, 0.0)).xyz;\n}\nvec3 silhouetteWorldNormal(vec3 normalA, vec3 normalB) {\n  return modelToWorldNormal(normalize(normalA + normalB));\n}\nfloat calculateExtensionLength(float extensionLength, float lineLength) {\n  return extensionLength / (log2(max(1.0, 256.0 / lineLength)) * 0.2 + 1.0);\n}\n#ifdef SILHOUETTE\nbool isSilhouetteEdge(vec4 viewPos, vec3 normalA, vec3 normalB) {\n  vec3 viewNormalA \x3d (uView * uModel * vec4(normalA, 0.0)).xyz;\n  vec3 viewNormalB \x3d (uView * uModel * vec4(normalB, 0.0)).xyz;\n  vec3 viewDir \x3d -viewPos.xyz;\n  float faceAVisible \x3d dot(viewDir, viewNormalA);\n  float faceBVisible \x3d dot(viewDir, viewNormalB);\n  return faceAVisible * faceBVisible \x3c 0.0;\n}\n#endif"},
environment:{"realisticAtmosphere.frag":"#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/encoding.glsl\x3e\n#include \x3cutil/color.glsl\x3e\nuniform vec3 v3LightDir;\nuniform vec3 v3InvWavelength;\nuniform vec3 v3InvWavelengthScaled;\nconst float fKrESun \x3d 0.075;\nconst float fKmESun \x3d 0.015;\nuniform vec4 v4Radii;\n#define fInnerRadius v4Radii[0]\n#define fInnerRadius2 v4Radii[1]\n#define fOuterRadius v4Radii[2]\n#define fOuterRadius2 v4Radii[3]\nuniform vec4 v4AtmosParams1;\nuniform vec4 v4AtmosParams2;\n#define fScale v4AtmosParams1.x\n#define v2ScaleDepth vec2(v4AtmosParams1.y,v4AtmosParams2.y)\n#define v2ScaleOverScaleDepth vec2(v4AtmosParams1.z,v4AtmosParams2.z)\n#define v2OneOverScaleDepth vec2(v4AtmosParams1.w,v4AtmosParams2.w)\n#ifndef HAZE\nuniform vec4 v4AtmosParams3;\nuniform float fInnerFadeDistance;\nuniform float fAltitudeFade;\n#define fg v4AtmosParams2.x\n#define fg2 v4AtmosParams3.x\n#define fMiePhaseCoefficients v4AtmosParams3.y\n#define fLowerAlphaBlendBound v4AtmosParams3.z\n#define fOneOverOuterRadiusMinusAlphaBlendBound v4AtmosParams3.w\n#endif\nuniform vec3 v3CameraPos;\nuniform vec2 nearFar;\nuniform vec4 v4SphereComp;\n#define fCameraHeight v4SphereComp[0]\n#define fCameraHeight2 v4SphereComp[1]\n#define fC v4SphereComp[2]\n#define fCSur v4SphereComp[3]\n#ifdef HAZE\nconst float fExposure \x3d 1.5;\n#else\nconst float fExposure \x3d 2.0;\n#endif\n#ifdef HAZE\nuniform sampler2D tDepth;\n#endif\nuniform float showTest;\nvarying vec3 v3EyeDir;\nvarying vec3 v3WorldRay;\nvarying vec2 vtc;\nconst float fSamples \x3d 5.0;\nconst int maxSamples \x3d 5;\n#ifdef HAZE\n  const float fOneOverGamma \x3d 1.0;\n#else\n  const float fOneOverGamma \x3d 0.454545;\n#endif\nconst vec3 v3OneOverGamma \x3d vec3(fOneOverGamma);\nvec3 expTM(vec3 inputColor,float exposure){\n    return pow(1.0 - exp(inputColor * -exposure), v3OneOverGamma);\n}\n#ifndef HAZE\nvec3 reinhardTM(vec3 inputColor, float exposure){\n  vec3 intermediate \x3d inputColor *exposure;\n  intermediate /\x3d (1.0+intermediate);\n  return pow(intermediate, v3OneOverGamma);\n}\n#endif\nfloat scale(float fCos){\n  float x \x3d 1.0 - fCos;\n  return exp(-0.00287 + x*(0.459 + x*(3.83 + x*(-6.80 + x*5.25))));\n}\nvoid main() {\n  vec3 cameraPosition \x3d v3CameraPos;\n  vec3 test \x3d vec3(0.0,0.0,0.0);\n  vec3 worldSpaceRay \x3d normalize(v3WorldRay);\n  float B \x3d 2.0 * dot(cameraPosition, worldSpaceRay);\n  float det \x3d B*B - 4.0 * fC;\n  float detSur \x3d B*B - 4.0 * fCSur;\n  float fMinRayStart \x3d 0.0;\n#ifndef HAZE\n  float fSurfaceBlend \x3d 0.0;\n  vec4 surfaceColor \x3d vec4(0.0);\n  if (detSur \x3e\x3d 0.0) {\n    float nearSurfaceT \x3d max(0.0, 0.5 *(-B - sqrt(detSur)));\n    float farSurfaceT \x3d max(0.0, 0.5 *(-B + sqrt(detSur)));\n    if (nearSurfaceT \x3d\x3d 0.0) {\n      fMinRayStart \x3d farSurfaceT;\n    }\n    vec3 vPos \x3d cameraPosition + worldSpaceRay * nearSurfaceT;\n    float fLightAngle \x3d dot(v3LightDir, normalize(vPos));\n    float fBrightness \x3d max(0.0, (smoothstep(-1.0, 0.8, 2.0 * fLightAngle)));\n    surfaceColor \x3d vec4(fBrightness, fBrightness, fBrightness, 1.0 - fAltitudeFade);\n    float fRelDist \x3d (farSurfaceT - nearSurfaceT) / fInnerFadeDistance;\n    if (fRelDist \x3e 1.0) {\n      gl_FragColor \x3d surfaceColor;\n      return;\n    }\n    fSurfaceBlend \x3d smoothstep(0.0, 1.0, fRelDist * fRelDist);\n  }\n#endif\n  if (det \x3e\x3d 0.0) {\n#ifdef HAZE\n    float depthSample \x3d texture2D(tDepth, vtc).r;\n    float zNear \x3d nearFar[0];\n    float zFar \x3d nearFar[1];\n    float zNorm \x3d 2.0 * depthSample - 1.0;\n    float linDepth \x3d 2.0 * zNear * zFar /\n      (zFar + zNear - zNorm * (zFar - zNear));\n    float rayEndT;\n    float altitudeAlpha \x3d 1.0;\n    if (depthSample \x3c 1.0 \x26\x26 depthSample \x3e 0.0) {\n      vec3 cameraSpaceRay \x3d normalize(v3EyeDir);\n      cameraSpaceRay /\x3d cameraSpaceRay.z;\n      cameraSpaceRay *\x3d linDepth;\n      float cameraSpaceRayLength \x3d length(cameraSpaceRay);\n      vec3 v3World \x3d cameraPosition + worldSpaceRay * cameraSpaceRayLength;\n      float v3WorldRadius2 \x3d dot(v3World, v3World);\n      float transitionStart \x3d fInnerRadius + 20000.0;\n      float transitionHeight \x3d 25000.0;\n      float transitionEnd \x3d transitionStart + transitionHeight;\n      float edge0 \x3d transitionStart * transitionStart;\n      float edge1 \x3d transitionEnd * transitionEnd;\n      altitudeAlpha \x3d 1.0 - clamp((v3WorldRadius2 - edge0) / (edge1 - edge0), 0.0, 1.0);\n      rayEndT \x3d cameraSpaceRayLength;\n      if (altitudeAlpha \x3e 0.0 \x26\x26 detSur \x3e 0.0) {\n        float nearSurfaceT \x3d 0.5 *(-B - sqrt(detSur));\n        float interp \x3d clamp(((fCameraHeight - fInnerRadius) - 2000000.0) / 6000000.0, 0.0, 1.0);\n        rayEndT \x3d mix(cameraSpaceRayLength, nearSurfaceT, interp);\n      }\n    }\n#endif\n    float rayStartT \x3d 0.5 *(-B - sqrt(det));\n#ifdef HAZE\n    float nearT \x3d abs(rayStartT);\n    float farT \x3d abs(rayEndT);\n#else\n    float rayEndT \x3d 0.5 *(-B + sqrt(det));\n#endif\n    float fDistance;\n    if (rayStartT \x3c fMinRayStart)\n    {\n      rayStartT \x3d fMinRayStart;\n#ifndef HAZE\n      fDistance \x3d fScale * min(0.0, fInnerRadius - fCameraHeight);\n#endif\n    }\n#ifndef HAZE\n    else\n    {\n      fDistance \x3d -1.0;\n    }\n#endif\n    vec3 v3Start \x3d cameraPosition + worldSpaceRay * rayStartT;\n#ifdef HAZE\n    vec3 v3End \x3d cameraPosition + worldSpaceRay * rayEndT;\n    float fEndLength \x3d length(v3End);\n    float fAltitudeEnd \x3d fEndLength - fInnerRadius;\n    float fAltitudeStart \x3d length(v3Start) - fInnerRadius;\n    if (fAltitudeStart \x3c 0.0) {\n      fAltitudeStart \x3d -fAltitudeStart;\n      fAltitudeEnd \x3d -fAltitudeEnd;\n    }\n    float fLightAngle \x3d dot(v3LightDir, v3End) / fEndLength;\n    if (nearT \x3e farT)\n    {\n      if (fAltitudeStart \x3c fAltitudeEnd)\n      {\n        v3End \x3d cameraPosition + worldSpaceRay * rayStartT;\n        v3Start \x3d cameraPosition + worldSpaceRay * rayEndT;\n        worldSpaceRay *\x3d -1.0;\n        float fTmp \x3d fAltitudeStart;\n        fAltitudeStart \x3d fAltitudeEnd;\n        fAltitudeEnd \x3d fTmp;\n      }\n      else if (fAltitudeStart \x3d\x3d fAltitudeEnd)\n      {\n        fAltitudeStart +\x3d 1.0;\n      }\n    }\n    float fCameraDepth;\n    float fCameraDepthBlue;\n    if (fAltitudeStart \x3e fOuterRadius - fInnerRadius)\n    {\n      fDistance \x3d fInnerRadius - fOuterRadius;\n    } else\n    {\n      fDistance \x3d fAltitudeEnd - fAltitudeStart;\n    }\n#endif\n    vec2 v2OpticalStartDepth \x3d exp(fDistance * v2OneOverScaleDepth);\n    float fRayLength \x3d rayEndT - rayStartT;\n    float fSampleLength \x3d fRayLength / fSamples;\n    float fScaledLength \x3d fSampleLength * fScale;\n    vec3 v3SampleRay \x3d worldSpaceRay * fSampleLength;\n    vec3 v3SamplePoint \x3d v3Start + v3SampleRay * 0.5;\n#ifdef HAZE\n    float fCameraAngle \x3d dot(-worldSpaceRay, v3End) / length(v3End);\n    float fScaleCameraAngle \x3d scale(fCameraAngle);\n    vec2 v2CameraOffset \x3d fScaleCameraAngle*v2OpticalStartDepth;\n    float scaledValues \x3d scale(fLightAngle) + fScaleCameraAngle;\n    vec2 v2ScaledValuesDepth \x3d scaledValues * v2ScaleDepth;\n#else\n    float fCameraAngle \x3d dot(worldSpaceRay, v3Start / length(v3Start));\n    float angleMultiplier \x3d fCameraAngle\x3e0.0?fCameraAngle:0.0;\n    float fScaleCameraAngle \x3d scale(fCameraAngle);\n    vec2 v2CameraOffset \x3d fScaleCameraAngle*v2OpticalStartDepth * v2ScaleDepth;\n#endif\n    vec3 v3FrontColor \x3d vec3(0.0, 0.0, 0.0);\n    vec3 v3FrontColorBlue \x3d vec3(0.0, 0.0, 0.0);\n    vec3 v3Attenuate\x3d vec3(0.0, 0.0, 0.0);\n    vec3 v3AttenuateBlue \x3d vec3(0.0, 0.0, 0.0);\n    for(int i\x3d0; i\x3cmaxSamples; i++) {\n      float fHeight \x3d length(v3SamplePoint);\n      float fAltitude \x3d abs(fHeight - fInnerRadius);\n      vec2 v2Depth \x3d exp(-fAltitude * v2ScaleOverScaleDepth);\n#ifdef HAZE\n      vec2 v2Scatter \x3d v2Depth*v2ScaledValuesDepth-v2CameraOffset;\n#else\n      float fLightAngle \x3d dot(v3LightDir, v3SamplePoint) / fHeight;\n      float fCameraAngle \x3d dot(worldSpaceRay, v3SamplePoint) / fHeight;\n      float fTempScaledValues \x3d scale(fLightAngle) - scale(fCameraAngle);\n      vec2 v2Scatter \x3d v2CameraOffset + fTempScaledValues*v2Depth* v2ScaleDepth;\n#endif\n      v3Attenuate \x3d exp(-v2Scatter.x * v3InvWavelengthScaled);\n      v3AttenuateBlue \x3d exp(-v2Scatter.y * v3InvWavelengthScaled);\n      v3FrontColor +\x3d v3Attenuate * v2Depth.x;\n      v3FrontColorBlue +\x3d v3AttenuateBlue * v2Depth.y;\n      v3SamplePoint +\x3d v3SampleRay;\n    }\n    float fCos \x3d clamp(dot(v3LightDir, -worldSpaceRay ),-0.9999999,1.0);\n    float fOnePlusCos2 \x3d fCos*fCos + 1.0;\n#ifdef HAZE\n    vec3 colorCoefficients \x3d (fScaledLength* 0.75 * fOnePlusCos2)*(fKrESun*v3InvWavelength+fKmESun);\n    vec3 v3Color \x3d colorCoefficients *v3FrontColor;\n    vec3 v3ColorBlue \x3d colorCoefficients *v3FrontColorBlue;\n#else\n    vec3 v3RayleighCoefficients \x3d (fScaledLength*0.75 * fOnePlusCos2*fKrESun)*v3InvWavelength;\n    float fMieCoefficients \x3d fScaledLength*fKmESun * fMiePhaseCoefficients * fOnePlusCos2 / pow(1.0 + fg2 - 2.0*fg*fCos, 1.5);\n    vec3 v3Color \x3d v3RayleighCoefficients * v3FrontColor + fMieCoefficients * v3FrontColor;\n    vec3 v3ColorBlue \x3d v3RayleighCoefficients * v3FrontColorBlue + fMieCoefficients * v3FrontColorBlue;\n#endif\n    vec3 ldrBlue \x3d expTM(v3ColorBlue,2.0*fExposure);\n    vec3 ldrRed \x3d expTM(v3Color,fExposure);\n    vec3 LDR \x3d mix(ldrBlue,ldrRed,0.2);\n#ifdef HAZE\n    LDR *\x3d (1.0-fCameraAngle);\n    vec3 hsv \x3d rgb2hsv(LDR);\n    hsv.y \x3d clamp(hsv.y*1.5,0.0,1.0);\n    LDR \x3d hsv2rgb(hsv);\n    vec3 finalColor \x3d LDR;\n#else\n    vec3 ldrReinhard \x3d reinhardTM(v3Color,fExposure);\n    LDR +\x3d angleMultiplier*ldrReinhard;\n    float side \x3d (rayEndT+rayStartT)*0.5;\n    float atmoHeight \x3d sqrt(fCameraHeight2 - side*side);\n    float h2 \x3d clamp(1.0-(atmoHeight-fLowerAlphaBlendBound)/(fOuterRadius-fLowerAlphaBlendBound),0.0,1.0);\n    vec3 finalColor \x3d LDR*h2;\n    vec3 hsv \x3d rgb2hsv(finalColor);\n    hsv.y \x3d clamp(hsv.y*1.5,0.0,1.0);\n    finalColor \x3d hsv2rgb(hsv);\n#endif\n#ifndef HAZE\n    float atmosStrength \x3d clamp((length(ldrRed)-0.05)*1.05,0.0,1.0);\n    gl_FragColor \x3d vec4(finalColor, atmosStrength*clamp(1.0-(atmoHeight-fInnerRadius)/(fOuterRadius-fInnerRadius),0.0,1.0));\n    if (fSurfaceBlend \x3e 0.0) {\n      gl_FragColor \x3d mix(gl_FragColor, surfaceColor, fSurfaceBlend);\n    }\n#else\n    gl_FragColor \x3d vec4(finalColor, 1.0) * altitudeAlpha;\n#endif\n    if(showTest\x3e0.0){\n      gl_FragColor \x3d vec4(test,1.0);\n    }\n  } else {\n    gl_FragColor \x3d vec4(0.0);\n  }\n}",
"realisticAtmosphere.vert":"#include \x3cutil/vsPrecision.glsl\x3e\nuniform vec2 halfSizeNearPlane;\nuniform vec3 v3CameraUp;\nuniform vec3 v3CameraRight;\nuniform vec3 v3CameraDir;\nuniform vec2 v2CameraCenterOffset;\nattribute vec3 position;\nattribute vec2 uv0;\nvarying vec3 v3WorldRay;\nvarying vec2 vtc;\n#ifdef HAZE\nvarying vec3 v3EyeDir;\n#endif\nvoid main(void) {\n  vec3 v3Pos \x3d position;\n  vtc \x3d uv0;\n  vec2 rayvtc \x3d uv0 - v2CameraCenterOffset;\n#ifdef HAZE\n  v3EyeDir \x3d vec3((2.0*halfSizeNearPlane *rayvtc)-halfSizeNearPlane,-1.0);\n#else\n  vec3 v3EyeDir \x3d vec3((2.0*halfSizeNearPlane *rayvtc)-halfSizeNearPlane,-1.0);\n#endif\n  v3WorldRay \x3d v3EyeDir.z*v3CameraDir + v3EyeDir.y*v3CameraUp + v3EyeDir.x*v3CameraRight;\n  gl_Position \x3d vec4(v3Pos, 1.0);\n}",
"simpleAtmosphere.frag":"#include \x3cutil/fsPrecision.glsl\x3e\nuniform sampler2D tex;\nvarying vec2 vtc;\nvarying float falloff;\n#ifndef PANORAMIC\nuniform float altitudeFade;\nvarying float innerFactor;\n#endif\nvoid main() {\n  vec4 texColor \x3d texture2D(tex, vtc);\n#ifdef PANORAMIC\n  gl_FragColor \x3d texColor * falloff;\n#else\n  vec4 atmosphereColor \x3d texColor * falloff;\n  vec4 innerColor \x3d vec4(texColor.rgb * falloff, 1.0 - altitudeFade);\n  gl_FragColor \x3d mix(atmosphereColor, innerColor, smoothstep(0.0, 1.0, innerFactor));\n#endif\n}",
"simpleAtmosphere.vert":"#include \x3cutil/vsPrecision.glsl\x3e\nuniform mat4 proj;\nuniform mat4 view;\n#ifndef PANORAMIC\nconst float TWICEPI \x3d 2.0*3.14159265;\nconst float ATMOSPHERE_RIM_SEGMENTS \x3d 128.0;\nuniform vec3 silCircleCenter;\nuniform vec3 silCircleV1;\nuniform vec3 silCircleV2;\nuniform vec2 texV;\nuniform float innerScale;\nvarying float innerFactor;\n#endif\nuniform vec3 lightDirection;\nattribute vec3 position;\nvarying vec2 vtc;\nvarying float falloff;\nvoid main(void) {\n#ifdef PANORAMIC\n  vec3 pos \x3d position;\n  float ndotl \x3d lightDirection.z;\n  vtc \x3d vec2(0.0, position.z+0.05);\n#else\n  innerFactor \x3d clamp(-position.z, 0.0, 1.0);\n  float scale \x3d position.y * (1.0 + innerFactor * innerScale);\n  float phi \x3d position.x * (TWICEPI / ATMOSPHERE_RIM_SEGMENTS) + 1.0;\n  vec3 pos \x3d  (silCircleCenter + sin(phi) * silCircleV1 + cos(phi) * silCircleV2) * scale;\n  float ndotl \x3d dot(normalize(position.y \x3e 0.0 ? pos: silCircleCenter), lightDirection);\n  vtc.x \x3d position.x / ATMOSPHERE_RIM_SEGMENTS;\n  vtc.y \x3d texV.x * (1.0 - position.z) + texV.y * position.z;\n#endif\n  falloff \x3d max(0.0, smoothstep(-1.0, 0.8, 2.0 * ndotl));\n  gl_Position \x3d proj * view * vec4(pos, 1.0);\n  gl_Position.z \x3d gl_Position.w;\n}",
"simpleAtmosphereFade.frag":"#include \x3cutil/fsPrecision.glsl\x3e\nvarying vec4 color;\nvoid main() {\n  gl_FragColor \x3d color;\n}","simpleAtmosphereFade.vert":"#include \x3cutil/vsPrecision.glsl\x3e\nattribute vec2 position;\nuniform vec3 lightDirection;\nuniform vec3 cameraPosition;\nuniform float undergroundFadeAlpha;\nvarying vec4 color;\nvoid main(void) {\n  float ndotl \x3d dot(normalize(cameraPosition), lightDirection);\n  float lighting \x3d max(0.0, smoothstep(-1.0, 0.8, 2.0 * ndotl));\n  color \x3d vec4(vec3(lighting), undergroundFadeAlpha);\n  gl_Position \x3d vec4(position.xy, 1.0, 1.0);\n}",
"stars.frag":"#include \x3cutil/fsPrecision.glsl\x3e\nvarying vec4 vcolor;\nvarying float vsize;\nvoid main() {\n  float cap \x3d 0.7;\n  float scale \x3d 1.0/cap;\n  float helper \x3d clamp(length(abs(gl_PointCoord-vec2(0.5))),0.0,cap);\n  float alpha \x3d clamp((cap-helper)*scale,0.0,1.0);\n  float intensity \x3d alpha*alpha*alpha;\n  if (vsize \x3c 3.0)\n    intensity *\x3d 0.5;\n  gl_FragColor \x3d vec4(1.0,1.0,1.0,intensity);\n  gl_FragColor.xyz *\x3d vcolor.xyz;\n}","stars.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cutil/alignPixel.glsl\x3e\nuniform mat4 proj;\nuniform mat4 view;\nuniform mat4 model;\nuniform vec4 viewport;\nuniform float pixelRatio;\nattribute vec3 position;\nattribute vec4 color;\nattribute float size;\nvarying vec4 vcolor;\nvarying float vsize;\nvoid main(void) {\n  vec4 posProj \x3d proj * view * model*vec4(position*1.0e25,1.0);\n  gl_Position \x3d alignToPixelCenter(posProj, viewport.zw);\n  gl_Position.z \x3d gl_Position.w;\n  vcolor \x3d color / 1.2;\n  vsize \x3d size * 5.0 * pixelRatio;\n  gl_PointSize \x3d vsize;\n}"},
materials:{checkerBoard:{"checkerBoard.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\nuniform vec2 size;\nuniform vec4 color1;\nuniform vec4 color2;\nvarying vec2 vUV;\nvoid main() {\n  vec2 uvScaled \x3d vUV / (2.0 * size);\n  vec2 uv \x3d fract(uvScaled - 0.25);\n  vec2 ab \x3d clamp((abs(uv - 0.5) - 0.25) / fwidth(uvScaled), -0.5, 0.5);\n  float fade \x3d smoothstep(0.25, 0.5, max(fwidth(uvScaled.x), fwidth(uvScaled.y)));\n  float t \x3d mix(abs(ab.x + ab.y), 0.5, fade);\n  gl_FragColor \x3d mix(color2, color1, t);\n}",
"checkerBoard.vert":"#include \x3cutil/vsPrecision.glsl\x3e\nuniform mat4 proj;\nuniform mat4 view;\nuniform mat4 model;\nattribute vec3 position;\nattribute vec2 uv0;\nvarying vec2 vUV;\nvoid main(void) {\n  vUV \x3d uv0;\n  gl_Position \x3d proj * view * vec4((model * vec4(position, 1.0)).xyz, 1.0);\n}"},color:{"color.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\nuniform vec4 eColor;\n#ifdef VERTEX_COLORS\nvarying vec4 vColor;\n#endif\nvarying vec3 vpos;\nvoid main() {\n  discardBySlice(vpos);\n#ifdef VERTEX_COLORS\n  gl_FragColor \x3d vColor * eColor;\n#else\n  gl_FragColor \x3d eColor;\n#endif\n  gl_FragColor \x3d highlightSlice(gl_FragColor, vpos);\n}",
"color.vert":"#include \x3cutil/vsPrecision.glsl\x3e\nuniform mat4 proj;\nuniform mat4 view;\nuniform mat4 model;\nattribute vec3 position;\n#ifdef VERTEX_COLORS\nattribute vec4 color;\nvarying vec4 vColor;\n#endif\nvarying vec3 vpos;\nvoid main(void) {\n#ifdef VERTEX_COLORS\n  vColor \x3d color * 0.003921568627451;\n#endif\n  vpos \x3d (model * vec4(position, 1.0)).xyz;\n  gl_Position \x3d proj * view * vec4(vpos, 1.0);\n}"},defaultMaterial:{"colorMixMode.glsl":"#include \x3cutil/color.glsl\x3e\nvec4 decodeSymbolColor(vec4 symbolColor, out int colorMixMode) {\n  float symbolAlpha \x3d 0.0;\n  const float maxTint \x3d 85.0;\n  const float maxReplace \x3d 170.0;\n  const float scaleAlpha \x3d 3.0;\n  if (symbolColor.a \x3e maxReplace) {\n    colorMixMode \x3d 1;\n    symbolAlpha \x3d scaleAlpha * (symbolColor.a - maxReplace);\n  } else if (symbolColor.a \x3e maxTint) {\n    colorMixMode \x3d 3;\n    symbolAlpha \x3d scaleAlpha * (symbolColor.a - maxTint);\n  } else if (symbolColor.a \x3e 0.0) {\n    colorMixMode \x3d 0;\n    symbolAlpha \x3d scaleAlpha * symbolColor.a;\n  } else {\n    colorMixMode \x3d 1;\n    symbolAlpha \x3d 0.0;\n  }\n  return vec4(symbolColor.r, symbolColor.g, symbolColor.b, symbolAlpha);\n}\nvec3 mixExternalColor(vec3 internalColor, vec3 textureColor, vec3 externalColor, int mode) {\n  vec3 internalMixed \x3d internalColor * textureColor;\n  vec3 allMixed \x3d internalMixed * externalColor;\n  if (mode \x3d\x3d 1 ) {\n    return allMixed;\n  }\n  else if (mode \x3d\x3d 2  ) {\n    return internalMixed;\n  }\n  else if (mode \x3d\x3d 3  ) {\n    return externalColor;\n  }\n  else {\n    vec3 hsvIn \x3d rgb2hsv(internalMixed);\n    vec3 hsvTint \x3d rgb2hsv(externalColor);\n    vec3 hsvOut \x3d vec3(hsvTint.x, hsvTint.y, hsvIn.z * hsvTint.z);\n    return hsv2rgb(hsvOut);\n  }\n}\nfloat mixExternalOpacity(float internalOpacity, float textureOpacity, float externalOpacity, int mode) {\n  float internalMixed \x3d internalOpacity * textureOpacity;\n  float allMixed \x3d internalMixed * externalOpacity;\n  if (mode \x3d\x3d 2  ) {\n    return internalMixed;\n  }\n  else if (mode \x3d\x3d 3  ) {\n    return externalOpacity;\n  }\n  else {\n    return allMixed;\n  }\n}",
"colorPass.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\n#include \x3cutil/sceneLighting.glsl\x3e\n#include \x3cmaterials/defaultMaterial/texturingInputs.glsl\x3e\n#define FRAGMENT_SHADER\n#include \x3cmaterials/defaultMaterial/vertexTangents.glsl\x3e\n#include \x3cmaterials/defaultMaterial/textureNormals.glsl\x3e\nuniform vec3 camPos;\nuniform vec3 localOrigin;\nuniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 specular;\nuniform float opacity;\nuniform float layerOpacity;\n#if defined(SYMBOLVERTEXCOLORS) || defined(COMPONENTCOLORS)\nvarying mediump float colorMixMode;\n#else\nuniform int colorMixMode;\n#endif\n#ifdef RECEIVE_SHADOWS\nuniform sampler2D depthTex;\nuniform int shadowMapNum;\nuniform vec4 shadowMapDistance;\nuniform mat4 shadowMapMatrix[4];\nuniform float depthHalfPixelSz;\n#endif\n#ifdef RECEIVE_SSAO\nuniform sampler2D ssaoTex;\nuniform vec4 viewportPixelSz;\n#endif\nvarying vec3 vpos;\nvarying vec3 localvpos;\n#if (NORMALS \x3d\x3d NORMALS_COMPRESSED) || (NORMALS \x3d\x3d NORMALS_DEFAULT)\n  varying vec3 vnormal;\n#endif\n#if defined(VERTEXCOLORS)\nvarying vec4 vcolor;\n#endif\nvarying vec4 vcolorExt;\n#ifdef RECEIVE_SHADOWS\nvarying float linearDepth;\n#include \x3cutil/shadow.glsl\x3e\n#endif\n#ifdef TREE_RENDERING\n  uniform mat4 view;\n#endif\n#ifdef USE_PBR\n    uniform float roughnessFactor;\n    uniform float metalnessFactor;\n    uniform vec3 emissionFactor;\n  #ifdef PBR_TEX_METALLNESS_ROUGHNESS\n    uniform sampler2D texMetallicRoughness;\n  #endif\n  #ifdef PBR_TEX_EMISSION\n    uniform sampler2D texEmission;\n  #endif\n  #ifdef PBR_TEX_OCCLUSION\n    uniform sampler2D texOcclusion;\n  #endif\n#endif\n#ifdef TEXTURING\n#include \x3cmaterials/defaultMaterial/texturing.glsl\x3e\n#endif\n#include \x3cmaterials/defaultMaterial/colorMixMode.glsl\x3e\nvoid main() {\n  discardBySlice(vpos);\n#if defined(TEXTURING) \x26\x26 defined(TEXTURE_COLOR)\n  vec4 texColor \x3d textureLookup(tex, vtc);\n  #if defined(TEXTURE_ALPHA_PREMULTIPLIED)\n    texColor.rgb /\x3d texColor.a;\n  #endif\n  discardOrAdjustTextureAlpha(texColor);\n#else\n  vec4 texColor \x3d vec4(1.0);\n#endif\n  vec3 viewDir \x3d vpos - camPos;\n#ifdef GROUND_NORMAL_SHADING\n  #if VIEWING_MODE \x3d\x3d VIEWING_MODE_GLOBAL\n    vec3 normal \x3d normalize(vpos + localOrigin);\n  #else\n    vec3 normal \x3d vec3(0.0, 0.0, 1.0);\n  #endif\n#else\n  #if (NORMALS \x3d\x3d NORMALS_SCREEN_DERIVATIVE)\n    vec3 normal \x3d normalize(cross(dFdx(localvpos),dFdy(localvpos)));\n  #else\n    #ifdef DOUBLESIDED\n      vec3 normal \x3d dot(vnormal, viewDir)\x3e0.0 ? -vnormal : vnormal;\n    #elif defined(WINDINGORDERDOUBLESIDED)\n      vec3 normal \x3d gl_FrontFacing ? vnormal : -vnormal;\n    #else\n      vec3 normal \x3d vnormal;\n    #endif\n    normal \x3d normalize(normal);\n  #endif\n#endif\n#ifdef USE_PBR\n    float roughness \x3d roughnessFactor;\n    float metalness \x3d metalnessFactor;\n  #ifdef PBR_TEX_METALLNESS_ROUGHNESS\n    vec3 metalicRoughness \x3d texture2D(texMetallicRoughness, vtc).rgb;\n    roughness *\x3d metalicRoughness.g ;\n    metalness *\x3d metalicRoughness.b ;\n  #endif\n    vec3 emission \x3d emissionFactor;\n  #ifdef PBR_TEX_EMISSION\n    emission *\x3d texture2D(texEmission, vtc).rgb;\n  #endif\n    float bakedOcclusion \x3d 1.0;\n  #ifdef PBR_TEX_OCCLUSION\n    bakedOcclusion *\x3d texture2D(texOcclusion, vtc).r;\n  #endif\n#endif\n#ifdef RECEIVE_SSAO\n  float ssao \x3d texture2D(ssaoTex, (gl_FragCoord.xy - viewportPixelSz.xy) * viewportPixelSz.zw).a;\n  ssao \x3d viewportPixelSz.z \x3c 0.0 ? 1.0 : ssao;\n#else\n  float ssao \x3d 1.0;\n#endif\n#ifdef USE_PBR\n  ssao *\x3d bakedOcclusion;\n#endif\n  float additionalAmbientScale;\n  vec3 additionalLight \x3d sceneLightingAdditionalLightGlobal(vpos + localOrigin, ssao, additionalAmbientScale);\n  float shadow \x3d 0.0;\n#ifdef RECEIVE_SHADOWS\n  shadow \x3d evalShadow(vpos, linearDepth, depthTex, shadowMapNum, shadowMapDistance, shadowMapMatrix, depthHalfPixelSz);\n#elif VIEWING_MODE \x3d\x3d VIEWING_MODE_GLOBAL\n  shadow \x3d lightingGlobalFactor * (1.0 - additionalAmbientScale);\n#endif\n  vec3 matColor \x3d max(ambient, diffuse);\n#if defined(VERTEXCOLORS)\n  vec3 albedo_ \x3d mixExternalColor(vcolor.rgb * matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));\n  float opacity_ \x3d layerOpacity * mixExternalOpacity(vcolor.a * opacity, texColor.a, vcolorExt.a, int(colorMixMode));\n#else\n  vec3 albedo_ \x3d mixExternalColor(matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));\n  float opacity_ \x3d layerOpacity * mixExternalOpacity(opacity, texColor.a, vcolorExt.a, int(colorMixMode));\n#endif\n  #if defined(TEXTURE_NORMALS)\n    #ifdef VERTEX_TANGENTS\n      mat3 tangentSpace \x3d computeTangentSpace(normal);\n    #else\n      mat3 tangentSpace \x3d computeTangentSpace(normal, vpos, vtc);\n    #endif\n    vec3 shadingNormal \x3d computeTextureNormal(tangentSpace);\n  #else\n    vec3 shadingNormal \x3d normal;\n  #endif\n  #ifdef TREE_RENDERING\n    shadingNormal \x3d normalize(vnormal);\n    albedo_ *\x3d 1.2;\n    vec3 viewForward \x3d - vec3(view[0][2], view[1][2], view[2][2]);\n    float alignmentLightView \x3d clamp(dot(-viewForward, lightingMainDirection), 0.0, 1.0);\n    float transmittance \x3d 1.0 - clamp(dot(-viewForward, shadingNormal), 0.0, 1.0);\n    float treeRadialFalloff \x3d vcolor.r;\n    float backLightFactor \x3d 0.5 * treeRadialFalloff * alignmentLightView * transmittance * (1.0 - shadow);\n    additionalLight +\x3d backLightFactor * lightingMainIntensity;\n  #endif\n  #ifdef USE_PBR\n    vec3 normalGround \x3d normalize(vpos + localOrigin);\n    vec3 shadedColor \x3d evaluateSceneLightingPBR(shadingNormal, albedo_, shadow, 1.0 - ssao, additionalLight, viewDir, normalGround, roughness, metalness, emission);\n  #else\n    vec3 shadedColor \x3d evaluateSceneLighting(shadingNormal, albedo_, shadow, 1.0 - ssao, additionalLight);\n  #endif\n  gl_FragColor \x3d highlightSlice(vec4(shadedColor, opacity_), vpos);\n}",
"colorPass.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cmaterials/defaultMaterial/commonInputs.glsl\x3e\n#define VERTEX_SHADER\n#include \x3cmaterials/defaultMaterial/vertexTangents.glsl\x3e\n#ifdef INSTANCEDCOLOR\nattribute vec4 instanceColor;\n#endif\nattribute vec3 position;\n#if (NORMALS \x3d\x3d NORMALS_COMPRESSED)\n  attribute vec2 normalCompressed;\n  varying vec3 vnormal;\n#elif (NORMALS \x3d\x3d NORMALS_DEFAULT)\n  attribute vec3 normal;\n  varying vec3 vnormal;\n#endif\nvarying vec3 vpos;\nvarying vec3 localvpos;\n#ifdef TEXTURE_COORDINATES\n    attribute vec2 uv0;\n    varying vec2 vtc;\n  #ifdef TEXTURE_ATLAS\n    attribute vec4 region;\n    varying vec4 regionV;\n  #endif\n#endif\n#ifdef COMPONENTCOLORS\n#include \x3cmaterials/defaultMaterial/componentColors.glsl\x3e\n#endif\n#ifdef RECEIVE_SHADOWS\nvarying float linearDepth;\n#endif\n#ifdef VERTEXCOLORS\nattribute vec4 color;\n#endif\n#ifdef SYMBOLVERTEXCOLORS\nattribute vec4 symbolColor;\n#endif\n#if defined(VERTEXCOLORS)\nvarying vec4 vcolor;\n#endif\nuniform vec4 externalColor;\nvarying vec4 vcolorExt;\n#if defined(SYMBOLVERTEXCOLORS) || defined(COMPONENTCOLORS)\nvarying mediump float colorMixMode;\n#endif\n#include \x3cutil/visualVariables.glsl\x3e\n#if defined(VV_SIZE) || defined(VV_COLOR)\nattribute vec4 instanceFeatureAttribute;\n#endif\n#include \x3cmaterials/defaultMaterial/colorMixMode.glsl\x3e\n#include \x3cmaterials/defaultMaterial/commonFunctions.glsl\x3e\n#include \x3cmaterials/defaultMaterial/constants.glsl\x3e\n#include \x3cmaterials/defaultMaterial/localCenter.glsl\x3e\n#include \x3cmaterials/defaultMaterial/localNormal.glsl\x3e\nvoid main() {\n#ifdef VERTEXCOLORS\n  vcolor \x3d color * 0.003921568627451;\n#endif\n  vcolorExt \x3d externalColor;\n#ifdef INSTANCEDCOLOR\n  vcolorExt *\x3d instanceColor;\n#endif\n#ifdef VV_COLOR\n  vcolorExt *\x3d vvGetColor(instanceFeatureAttribute, vvColorValues, vvColorColors);\n#endif\n#ifdef SYMBOLVERTEXCOLORS\n  int symbolColorMixMode;\n  vcolorExt *\x3d decodeSymbolColor(symbolColor, symbolColorMixMode) * 0.003921568627451;\n  colorMixMode \x3d float(symbolColorMixMode) + 0.5;\n#endif\n#ifdef COMPONENTCOLORS\n  int symbolColorMixMode;\n  vcolorExt *\x3d decodeSymbolColor(readComponentColor() * 255.0, symbolColorMixMode) * 0.003921568627451;\n  colorMixMode \x3d float(symbolColorMixMode) + 0.5;\n#endif\n  if (vcolorExt.a \x3c SYMBOL_ALPHA_CUTOFF) {\n    gl_Position \x3d vec4(1e38, 1e38, 1e38, 1.0);\n  }\n  else {\n    vpos \x3d calculateVPos();\n    localvpos \x3d vpos - view[3].xyz;\n#ifdef INSTANCED_DOUBLE_PRECISION\n  #if (NORMALS \x3d\x3d NORMALS_COMPRESSED) || (NORMALS \x3d\x3d NORMALS_DEFAULT)\n    vnormal \x3d normalize(modelNormal * localNormal().xyz);\n  #endif\n  vec3 originDelta \x3d dpAdd(viewOriginHi, viewOriginLo, -modelOriginHi, -modelOriginLo);\n  #ifdef IOS_SAFARI_FIX\n    originDelta \x3d originDelta - fract(originDelta * 1000000.0) * (1.0 / 1000000.0);\n  #endif\n  vpos -\x3d originDelta;\n#else\n  #if (NORMALS \x3d\x3d NORMALS_COMPRESSED) || (NORMALS \x3d\x3d NORMALS_DEFAULT)\n    vnormal \x3d normalize((modelNormal * localNormal()).xyz);\n  #endif\n#endif\n    #ifdef VERTICAL_OFFSET\n      vpos +\x3d calculateVerticalOffset(vpos, localOrigin);\n    #endif\n    #if defined(VERTEX_TANGENTS)\n      transformVertexTangent(mat3(modelNormal));\n    #endif\n    gl_Position \x3d proj * view * vec4(vpos, 1.0);\n  }\n#ifdef RECEIVE_SHADOWS\n  linearDepth \x3d gl_Position.w;\n#endif\n#ifdef TEXTURING\n  #ifndef FLIPV\n    vtc \x3d uv0;\n  #else\n    vtc \x3d vec2(uv0.x, 1.0-uv0.y);\n  #endif\n  #ifdef TEXTURE_ATLAS\n    regionV \x3d region;\n  #endif\n#endif\n}",
"commonFunctions.glsl":"#include \x3cmaterials/defaultMaterial/localPosition.glsl\x3e\n#include \x3cutil/doublePrecision.glsl\x3e\nvec3 calculateVPos() {\n#ifdef INSTANCED_DOUBLE_PRECISION\n  return model * localPosition().xyz;\n#else\n  return (model * localPosition()).xyz;\n#endif\n}\n#ifdef VERTICAL_OFFSET\n#ifdef SCREEN_SIZE_PERSPECTIVE\n#include \x3cutil/screenSizePerspective.glsl\x3e\n#endif\nvec3 calculateVerticalOffset(vec3 worldPos, vec3 localOrigin) {\n  float viewDistance \x3d length((view * vec4(worldPos, 1.0)).xyz);\n#if VIEWING_MODE \x3d\x3d VIEWING_MODE_GLOBAL\n  vec3 worldNormal \x3d normalize(worldPos + localOrigin);\n#else\n  vec3 worldNormal \x3d vec3(0.0, 0.0, 1.0);\n#endif\n#ifdef SCREEN_SIZE_PERSPECTIVE\n  float cosAngle \x3d dot(worldNormal, normalize(worldPos - camPos));\n  float verticalOffsetScreenHeight \x3d screenSizePerspectiveScaleFloat(verticalOffset.x, abs(cosAngle), viewDistance, screenSizePerspectiveAlignment);\n#else\n  float verticalOffsetScreenHeight \x3d verticalOffset.x;\n#endif\n  float worldOffset \x3d clamp(verticalOffsetScreenHeight * verticalOffset.y * viewDistance, verticalOffset.z, verticalOffset.w);\n  return worldNormal * worldOffset;\n}\n#endif",
"commonInputs.glsl":"uniform mat4 proj;\nuniform mat4 view;\n#ifdef INSTANCED_DOUBLE_PRECISION\nuniform vec3 viewOriginHi;\nuniform vec3 viewOriginLo;\n#endif\nuniform vec3 camPos;\nuniform vec3 localOrigin;\n#ifdef INSTANCED\n#ifdef INSTANCED_DOUBLE_PRECISION\nattribute vec3 modelOriginHi;\nattribute vec3 modelOriginLo;\nattribute mat3 model;\nattribute mat3 modelNormal;\n#else\nattribute mat4 model;\nattribute mat4 modelNormal;\n#endif\n#else\nuniform mat4 model;\nuniform mat4 modelNormal;\n#endif\n#ifdef VERTICAL_OFFSET\nuniform vec4 verticalOffset;\n#ifdef SCREEN_SIZE_PERSPECTIVE\nuniform vec4 screenSizePerspectiveAlignment;\n#endif\n#endif",
"componentColors.glsl":"uniform sampler2D uComponentColorTex;\nuniform vec2 uComponentColorTexInvDim;\nattribute float componentIndex;\nvec4 readComponentColor() {\n  float normalizedIndex \x3d (componentIndex + 0.5) * uComponentColorTexInvDim.x;\n  vec2 indexCoord \x3d vec2(\n    mod(normalizedIndex, 1.0),\n    (floor(normalizedIndex) + 0.5) * uComponentColorTexInvDim.y\n  );\n  vec4 componentColor \x3d texture2D(uComponentColorTex, indexCoord);\n  return vec4( componentColor.r, componentColor.g, componentColor.b - mod(componentColor.b*255.0, 2.0)/255.0, componentColor.a);\n}\nbool readComponentCastShadowsFlag(){\n  float normalizedIndex \x3d (componentIndex + 0.5) * uComponentColorTexInvDim.x;\n  vec2 indexCoord \x3d vec2(\n    mod(normalizedIndex, 1.0),\n    (floor(normalizedIndex) + 0.5) * uComponentColorTexInvDim.y\n  );\n  if( mod(texture2D(uComponentColorTex, indexCoord).b*255.0, 2.0) \x3c 1.0 )\n      return false;\n  return true;\n}",
"constants.glsl":"#define SYMBOL_ALPHA_CUTOFF 0.001","depthPass.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/encoding.glsl\x3e\n#include \x3cutil/depth.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\nvarying float depth;\nvarying vec3 vpos;\n#if defined(TEXTURING)\n  #include \x3cmaterials/defaultMaterial/texturingInputs.glsl\x3e\n  #include \x3cmaterials/defaultMaterial/texturing.glsl\x3e\n#endif\nvoid main() {\n  discardBySlice(vpos);\n  #if defined(TEXTURING)\n    vec4 texColor \x3d textureLookup(tex, vtc);\n    discardOrAdjustTextureAlpha(texColor);\n  #endif\n  #ifndef BIAS_SHADOWMAP\n    gl_FragColor \x3d float2rgba(depth);\n  #else\n    gl_FragColor \x3d float2rgba(calcFragDepth(depth));\n  #endif\n}",
"depthPass.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cmaterials/defaultMaterial/commonInputs.glsl\x3e\nuniform vec2 nearFar;\nattribute vec3 position;\nvarying float depth;\nvarying vec3 vpos;\n#ifdef TEXTURING\nattribute vec2 uv0;\nvarying vec2 vtc;\n#ifdef TEXTURE_ATLAS\nattribute vec4 region;\nvarying vec4 regionV;\n#endif\n#endif\n#include \x3cutil/visualVariables.glsl\x3e\n#if defined(VV_CUSTOM_MODEL_MATRIX)\nattribute vec4 instanceFeatureAttribute;\n#endif\n#include \x3cmaterials/defaultMaterial/commonFunctions.glsl\x3e\n#include \x3cmaterials/defaultMaterial/localCenter.glsl\x3e\n#if defined(COMPONENTCOLORS)\n#include \x3cmaterials/defaultMaterial/componentColors.glsl\x3e\n#endif\nvoid main(void) {\n  vpos \x3d calculateVPos();\n#if defined(COMPONENTCOLORS)\n  if( !readComponentCastShadowsFlag() ){\n    gl_Position \x3d vec4(1e38, 1e38, 1e38, 1.0);\n  }else\n  {\n#endif\n#ifdef INSTANCED_DOUBLE_PRECISION\n  vec3 originDelta \x3d dpAdd(viewOriginHi, viewOriginLo, -modelOriginHi, -modelOriginLo);\n#ifdef IOS_SAFARI_FIX\n  originDelta \x3d originDelta - fract(originDelta * 1000000.0) * (1.0 / 1000000.0);\n#endif\n  vpos -\x3d originDelta;\n#endif\n  #ifdef VERTICAL_OFFSET\n    vpos +\x3d calculateVerticalOffset(vpos, localOrigin);\n  #endif\n  vec4 eye \x3d view * vec4(vpos, 1.0);\n  gl_Position \x3d proj * eye;\n  depth \x3d (-eye.z - nearFar[0]) / (nearFar[1] - nearFar[0]) ;\n#if defined(COMPONENTCOLORS)\n  }\n#endif\n#ifdef TEXTURING\n#ifndef FLIPV\n  vtc \x3d uv0;\n#else\n  vtc \x3d vec2(uv0.x, 1.0-uv0.y);\n#endif\n#ifdef TEXTURE_ATLAS\n  regionV \x3d region;\n#endif\n#endif\n}",
"highlightPass.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\n#include \x3cutil/highlight.glsl\x3e\nvarying vec3 vpos;\nuniform sampler2D depthTex;\nuniform vec4 highlightViewportPixelSz;\n#if defined(TEXTURING)\n  #include \x3cmaterials/defaultMaterial/texturingInputs.glsl\x3e\n  #include \x3cmaterials/defaultMaterial/texturing.glsl\x3e\n#endif\nvoid main() {\n  discardBySlice(vpos);\n  #if defined(TEXTURING)\n    vec4 texColor \x3d textureLookup(tex, vtc);\n    discardOrAdjustTextureAlpha(texColor);\n  #endif\n  gl_FragColor \x3d highlightData(gl_FragCoord, depthTex, highlightViewportPixelSz);\n}",
"highlightPass.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cmaterials/defaultMaterial/commonInputs.glsl\x3e\nattribute vec3 position;\nvarying vec3 vpos;\n#ifdef TEXTURING\nattribute vec2 uv0;\nvarying vec2 vtc;\n#ifdef TEXTURE_ATLAS\nattribute vec4 region;\nvarying vec4 regionV;\n#endif\n#endif\n#include \x3cutil/visualVariables.glsl\x3e\n#if defined(VV_CUSTOM_MODEL_MATRIX)\nattribute vec4 instanceFeatureAttribute;\n#endif\n#include \x3cmaterials/defaultMaterial/commonFunctions.glsl\x3e\n#include \x3cmaterials/defaultMaterial/localCenter.glsl\x3e\nvoid main(void) {\n  vpos \x3d calculateVPos();\n#ifdef INSTANCED_DOUBLE_PRECISION\n  vec3 originDelta \x3d dpAdd(viewOriginHi, viewOriginLo, -modelOriginHi, -modelOriginLo);\n#ifdef IOS_SAFARI_FIX\n  originDelta \x3d originDelta - fract(originDelta * 1000000.0) * (1.0 / 1000000.0);\n#endif\n  vpos -\x3d originDelta;\n#endif\n  #ifdef VERTICAL_OFFSET\n    vpos +\x3d calculateVerticalOffset(vpos, localOrigin);\n  #endif\n  gl_Position \x3d proj * view * vec4(vpos, 1.0);\n#ifdef TEXTURING\n#ifndef FLIPV\n  vtc \x3d uv0;\n#else\n  vtc \x3d vec2(uv0.x, 1.0-uv0.y);\n#endif\n#ifdef TEXTURE_ATLAS\n  regionV \x3d region;\n#endif\n#endif\n}",
"localCenter.glsl":"#ifdef VV_CUSTOM_MODEL_MATRIX\n# ifdef VERTICAL_OFFSET\nvec4 localCenter() { return vvTransformPosition(vec3(0.0), instanceFeatureAttribute); }\n# endif\n#else\n# ifdef VERTICAL_OFFSET\nvec4 localCenter() { return vec4(vec3(0.0), 1.0); }\n# endif\n#endif","localNormal.glsl":"#include \x3cutil/normalEncoding.glsl\x3e\n#ifdef VV_CUSTOM_MODEL_MATRIX\n  # if (NORMALS \x3d\x3d NORMALS_COMPRESSED)\n    vec4 localNormal() { return vvTransformNormal(decodeNormal(normalCompressed), instanceFeatureAttribute); }\n  # elif (NORMALS \x3d\x3d NORMALS_DEFAULT)\n    vec4 localNormal() { return vvTransformNormal(normal, instanceFeatureAttribute); }\n  # endif\n#else\n  # if (NORMALS \x3d\x3d NORMALS_COMPRESSED)\n    vec4 localNormal() { return vec4(decodeNormal(normalCompressed), 1.0); }\n  # elif (NORMALS \x3d\x3d NORMALS_DEFAULT)\n    vec4 localNormal() { return vec4(normal, 1.0); }\n  # endif\n#endif",
"localPosition.glsl":"#ifdef VV_CUSTOM_MODEL_MATRIX\nvec4 localPosition() { return vvTransformPosition(position, instanceFeatureAttribute); }\n#else\nvec4 localPosition() { return vec4(position, 1.0); }\n#endif","normalPass.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\n#if (NORMALS \x3d\x3d NORMALS_COMPRESSED) || (NORMALS \x3d\x3d NORMALS_DEFAULT)\n  varying vec3 vnormal;\n#endif\nvarying vec3 vpos;\nvarying vec3 vPositionView;\n#if defined(TEXTURING)\n  #include \x3cmaterials/defaultMaterial/texturingInputs.glsl\x3e\n  #include \x3cmaterials/defaultMaterial/texturing.glsl\x3e\n#endif\nvoid main() {\n  discardBySlice(vpos);\n  #if defined(TEXTURING)\n    vec4 texColor \x3d textureLookup(tex, vtc);\n    discardOrAdjustTextureAlpha(texColor);\n  #endif\n#if (NORMALS \x3d\x3d NORMALS_SCREEN_DERIVATIVE)\n  vec3 normal \x3d normalize(cross(dFdx(vPositionView),dFdy(vPositionView)));\n#else\n  vec3 normal \x3d normalize(vnormal);\n  if (gl_FrontFacing \x3d\x3d false) normal \x3d -normal;\n#endif\n  #ifndef ALPHA_ZERO\n    gl_FragColor \x3d vec4(vec3(.5) + .5 * normal, 1.0);\n  #else\n    gl_FragColor \x3d vec4(vec3(.5) + .5 * normal, 0.0);\n  #endif\n}",
"normalPass.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cmaterials/defaultMaterial/commonInputs.glsl\x3e\nuniform mat4 viewNormal;\nattribute vec3 position;\n#if (NORMALS \x3d\x3d NORMALS_COMPRESSED)\n  attribute vec2 normalCompressed;\n  varying vec3 vnormal;\n#elif (NORMALS \x3d\x3d NORMALS_DEFAULT)\n  attribute vec3 normal;\n  varying vec3 vnormal;\n#endif\n#ifdef TEXTURING\nattribute vec2 uv0;\nvarying vec2 vtc;\n#ifdef TEXTURE_ATLAS\nattribute vec4 region;\nvarying vec4 regionV;\n#endif\n#endif\nvarying vec3 vpos;\nvarying vec3 vPositionView;\n#include \x3cutil/visualVariables.glsl\x3e\n#if defined(VV_CUSTOM_MODEL_MATRIX)\nattribute vec4 instanceFeatureAttribute;\n#endif\n#include \x3cmaterials/defaultMaterial/commonFunctions.glsl\x3e\n#include \x3cmaterials/defaultMaterial/localCenter.glsl\x3e\n#include \x3cmaterials/defaultMaterial/localNormal.glsl\x3e\nvoid main(void) {\n  vpos \x3d calculateVPos();\n#ifdef INSTANCED_DOUBLE_PRECISION\n  #if (NORMALS \x3d\x3d NORMALS_COMPRESSED) || (NORMALS \x3d\x3d NORMALS_DEFAULT)\n    vnormal \x3d normalize((viewNormal * vec4(modelNormal * localNormal().xyz, 1.0)).xyz);\n  #endif\n  vec3 originDelta \x3d dpAdd(viewOriginHi, viewOriginLo, -modelOriginHi, -modelOriginLo);\n  #ifdef IOS_SAFARI_FIX\n    originDelta \x3d originDelta - fract(originDelta * 1000000.0) * (1.0 / 1000000.0);\n  #endif\n  vpos -\x3d originDelta;\n#else\n  #if (NORMALS \x3d\x3d NORMALS_COMPRESSED) || (NORMALS \x3d\x3d NORMALS_DEFAULT)\n    vnormal \x3d normalize((viewNormal * modelNormal * localNormal()).xyz);\n  #endif\n#endif\n  #ifdef VERTICAL_OFFSET\n    vpos +\x3d calculateVerticalOffset(vpos, localOrigin);\n  #endif\n  vPositionView \x3d (view * vec4(vpos, 1.0)).xyz;\n  gl_Position \x3d proj * vec4(vPositionView, 1.0);\n#ifdef TEXTURING\n#ifndef FLIPV\n  vtc \x3d uv0;\n#else\n  vtc \x3d vec2(uv0.x, 1.0-uv0.y);\n#endif\n#ifdef TEXTURE_ATLAS\n  regionV \x3d region;\n#endif\n#endif\n}",
"textureNormals.glsl":"#if defined(TEXTURE_NORMALS)\n  uniform sampler2D texNormal;\n  vec3 computeTextureNormal(mat3 tangentSpace) {\n    vec3 rawNormal \x3d texture2D(texNormal, vtc).rgb * 2.0 - 1.0;\n    return tangentSpace * rawNormal;\n  }\n#endif","texturing.glsl":"float calcMipMapLevel(const vec2 ddx, const vec2 ddy) {\n  float deltaMaxSqr \x3d max(dot(ddx, ddx), dot(ddy, ddy));\n  return max(0.0, 0.5 * log2(deltaMaxSqr));\n}\nvec4 textureAtlasLookup(sampler2D tex, vec2 uv, vec4 region, vec2 texSize) {\n  vec2 atlasScale \x3d region.zw - region.xy;\n  vec2 uvAtlas \x3d fract(uv) * atlasScale + region.xy;\n  vec4 texColor;\n  vec2 dUVdx \x3d dFdx(uv) * atlasScale;\n  vec2 dUVdy \x3d dFdy(uv) * atlasScale;\n#ifdef GL_EXT_shader_texture_lod\n  return texture2DGradEXT(tex, uvAtlas, dUVdx, dUVdy);\n#else\n  vec2 dUVdxAuto \x3d dFdx(uvAtlas);\n  vec2 dUVdyAuto \x3d dFdy(uvAtlas);\n  float mipMapLevel \x3d calcMipMapLevel(dUVdx * texSize, dUVdy * texSize);\n  float autoMipMapLevel \x3d calcMipMapLevel(dUVdxAuto * texSize, dUVdyAuto * texSize);\n  return texture2D(tex, uvAtlas, mipMapLevel - autoMipMapLevel);\n#endif\n}\nvec4 textureLookup(sampler2D tex, vec2 uv) {\n#ifdef TEXTURE_ATLAS\n  return textureAtlasLookup(tex, uv, regionV, texSize);\n#else\n  return texture2D(tex, uv);\n#endif\n}\nvoid discardOrAdjustTextureAlpha(inout vec4 texColor) {\n  #if defined(TEXTURE_ALPHA_MODE_MASK)\n    if (texColor.a \x3c textureAlphaCutoff) {\n      discard;\n    } else {\n      texColor.a \x3d 1.0;\n    }\n  #elif defined(TEXTURE_ALPHA_MODE_MASK_BLEND)\n    if (texColor.a \x3c textureAlphaCutoff) {\n      discard;\n    }\n  #elif defined(TEXTURE_ALPHA_MODE_OPAQUE)\n    texColor.a \x3d 1.0;\n  #else\n  #endif\n}",
"texturingInputs.glsl":"#ifdef TEXTURING\n  uniform sampler2D tex;\n  uniform vec2 texSize;\n  #if defined(TEXTURE_ALPHA_MODE_MASK) || defined(TEXTURE_ALPHA_MODE_MASK_BLEND)\n  uniform float textureAlphaCutoff;\n  #endif\n  #ifdef TEXTURE_ATLAS\n  varying vec4 regionV;\n  #endif\n#endif\n#if defined(TEXTURING) || defined(TEXTURE_COORDINATES)\nvarying vec2 vtc;\n#endif","vertexTangents.glsl":"#if defined(VERTEX_SHADER)\n  #if defined(VERTEX_TANGENTS)\n    attribute vec4 aTangent;\n    varying vec4 vTangent;\n    void transformVertexTangent(mat3 modelTransformForNormals) {\n      vTangent.xyz \x3d modelTransformForNormals * aTangent.xyz;\n      vTangent.w \x3d aTangent.w;\n    }\n  #endif\n#elif defined(FRAGMENT_SHADER)\n  #if defined(VERTEX_TANGENTS)\n    varying vec4 vTangent;\n    #if defined(WINDINGORDERDOUBLESIDED)\n      mat3 computeTangentSpace(vec3 normal) {\n        float tangentHeadedness \x3d gl_FrontFacing ? vTangent.w : -vTangent.w;\n        vec3 tangent \x3d normalize(gl_FrontFacing ? vTangent.xyz : -vTangent.xyz);\n        vec3 bitangent \x3d cross(normal, tangent) * tangentHeadedness;\n        return mat3(tangent, bitangent, normal);\n      }\n    #else\n      mat3 computeTangentSpace(vec3 normal) {\n        float tangentHeadedness \x3d vTangent.w;\n        vec3 tangent \x3d normalize(vTangent.xyz);\n        vec3 bitangent \x3d cross(normal, tangent) * tangentHeadedness;\n        return mat3(tangent, bitangent, normal);\n      }\n    #endif\n  #else\n    mat3 computeTangentSpace(vec3 normal, vec3 pos, vec2 st) {\n      vec3 Q1 \x3d dFdx(pos);\n      vec3 Q2 \x3d dFdy(pos);\n      vec2 stx \x3d dFdx(st);\n      vec2 sty \x3d dFdy(st);\n      vec3 T \x3d (sty.t * Q1 - stx.t * Q2) / (stx.s * sty.t - sty.s * stx.t);\n      T \x3d normalize(T - normal * dot(normal, T));\n      vec3 B \x3d normalize(cross(normal, T));\n      float det \x3d sty.t * stx.s - stx.t * sty.s;\n      if(det \x3e 0.0){\n        T *\x3d -1.0;\n      }\n      return mat3(T, B, normal);\n    }\n  #endif\n#endif"},
hud:{"colorPass.frag":"#include \x3cmaterials/hud/hudHeader.glsl\x3e\nvoid main() {\n#include \x3cmaterials/hud/hudMain.glsl\x3e\n}","highlightPass.frag":"#include \x3cmaterials/hud/hudHeader.glsl\x3e\n#include \x3cutil/highlight.glsl\x3e\nuniform sampler2D depthTex;\nuniform vec4 highlightViewportPixelSz;\nvoid main() {\n#include \x3cmaterials/hud/hudMain.glsl\x3e\n#ifdef BINARY_HIGHLIGHT_OCCLUSION\n  if (voccluded \x3d\x3d 1.0) {\n    gl_FragColor \x3d vec4(1.0, 1.0, 0.0, 1.0);\n  } else {\n    gl_FragColor \x3d vec4(1.0, 0.0, 1.0, 1.0);\n  }\n#else\n  gl_FragColor \x3d highlightData(gl_FragCoord, depthTex, highlightViewportPixelSz);\n#endif\n}",
"hud.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cutil/alignPixel.glsl\x3e\n#include \x3cutil/hud.glsl\x3e\n#include \x3cutil/visualVariables.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\nuniform vec2 screenOffset;\nuniform vec2 anchorPos;\nuniform vec2 textureCoordinateScaleFactor;\n#ifdef SCREEN_SIZE_PERSPECTIVE\nuniform vec4 screenSizePerspective;\n#endif\n#ifdef DEBUG_DRAW_BORDER\nvarying vec4 debugBorderCoords;\n#endif\nattribute vec2 uv0;\nattribute vec4 color;\nattribute vec2 size;\nattribute vec4 auxpos2;\nvarying vec4 vcolor;\nvarying vec2 vtc;\nvarying vec2 vsize;\n#ifdef BINARY_HIGHLIGHT_OCCLUSION\nvarying float voccluded;\n#endif\nvoid main(void) {\n  ProjectHUDAux projectAux;\n  vec4 posProj \x3d projectPositionHUD(projectAux);\n  if (rejectBySlice(projectAux.posModel)) {\n    gl_Position \x3d vec4(1e038, 1e038, 1e038, 1.0);\n    return;\n  }\n  vec2 inputSize;\n#ifdef SCREEN_SIZE_PERSPECTIVE\n  inputSize \x3d screenSizePerspectiveScaleVec2(size, projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspective);\n  vec2 screenOffsetScaled \x3d screenSizePerspectiveScaleVec2(screenOffset, projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspectiveAlignment);\n#else\n  inputSize \x3d size;\n  vec2 screenOffsetScaled \x3d screenOffset;\n#endif\n#ifdef VV_SIZE\n  inputSize *\x3d vvGetScale(auxpos2).xx;\n#endif\n  vec2 combinedSize \x3d inputSize * pixelRatio;\n  vec4 quadOffset \x3d vec4(0.0);\n#if defined(OCCL_TEST) || defined(BINARY_HIGHLIGHT_OCCLUSION)\n  bool visible \x3d testVisibilityHUD(posProj);\n#endif\n#ifdef BINARY_HIGHLIGHT_OCCLUSION\nvoccluded \x3d visible ? 0.0 : 1.0;\n#endif\n#ifdef OCCL_TEST\n  if (visible) {\n#endif\n    vec2 uv01 \x3d floor(uv0);\n    vec2 uv \x3d uv0 - uv01;\n    quadOffset.xy \x3d ((uv01 - anchorPos) * 2.0 * combinedSize + screenOffsetScaled) / viewport.zw * posProj.w;\n#ifdef SIGNED_DISTANCE_FIELD\n    posProj \x3d alignToPixelOrigin(posProj, viewport.zw) + quadOffset;\n#else\n    posProj +\x3d quadOffset;\n    if (inputSize.x \x3d\x3d size.x) {\n      posProj \x3d alignToPixelOrigin(posProj, viewport.zw);\n    }\n#endif\n    gl_Position \x3d posProj;\n    vtc \x3d uv * textureCoordinateScaleFactor;\n#ifdef DEBUG_DRAW_BORDER\n    debugBorderCoords \x3d vec4(uv01, 1.5 / combinedSize);\n#endif\n    vsize \x3d inputSize;\n#ifdef OCCL_TEST\n  } else {\n    vtc \x3d vec2(.0);\n#ifdef DEBUG_DRAW_BORDER\n    debugBorderCoords \x3d vec4(0.5, 0.5, 1.5 / combinedSize);\n#endif\n  }\n#endif\n  gl_Position \x3d posProj;\n#ifdef VV_COLOR\n  vcolor \x3d vvGetColor(auxpos2, vvColorValues, vvColorColors);\n#else\n  vcolor \x3d color / 255.0;\n#endif\n}",
"hudHeader.glsl":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/encoding.glsl\x3e\n#include \x3cutil/color.glsl\x3e\nuniform sampler2D tex;\nuniform vec4 overrideColor;\nuniform vec4 outlineColor;\nuniform float outlineSize;\nvarying vec4 vcolor;\nvarying vec2 vtc;\nvarying vec2 vsize;\n#ifdef BINARY_HIGHLIGHT_OCCLUSION\nvarying float voccluded;\n#endif\n#ifdef DEBUG_DRAW_BORDER\nvarying vec4 debugBorderCoords;\n#endif","hudMain.glsl":"#ifdef SIGNED_DISTANCE_FIELD\n  vec4 color \x3d vec4(0.0, 0.0, 0.0, 0.0);\n  vec4 fillPixelColor \x3d overrideColor * vcolor;\n  const float txSize \x3d 128.0;\n  const float texelSize \x3d 1.0 / txSize;\n  vec2 scaleFactor \x3d (vsize - txSize) * texelSize;\n  vec2 samplePos \x3d vtc + (vec2(1.0, -1.0) * texelSize) * scaleFactor;\n  float d \x3d rgba2float(texture2D(tex, samplePos)) - 0.5;\n  float dist \x3d d * vsize.x;\n  fillPixelColor.a *\x3d clamp(0.5 - dist, 0.0, 1.0);\n  if (outlineSize \x3e 0.25) {\n    vec4 outlinePixelColor \x3d outlineColor;\n    float clampedOutlineSize \x3d min(outlineSize, 0.5*vsize.x);\n    outlinePixelColor.a *\x3d clamp(0.5 - (abs(dist) - 0.5*clampedOutlineSize), 0.0, 1.0);\n    float compositeAlpha \x3d outlinePixelColor.a + fillPixelColor.a * (1.0 - outlinePixelColor.a);\n    vec3 compositeColor \x3d vec3(outlinePixelColor) * outlinePixelColor.a +\n      vec3(fillPixelColor) * fillPixelColor.a * (1.0 - outlinePixelColor.a);\n    gl_FragColor \x3d vec4(compositeColor, compositeAlpha);\n  }\n  else {\n    gl_FragColor \x3d premultiplyAlpha(fillPixelColor);\n  }\n#else\n  gl_FragColor \x3d texture2D(tex, vtc, -0.5) * premultiplyAlpha(overrideColor * vcolor);\n#endif\n#ifdef DEBUG_DRAW_BORDER\n   float isBorder \x3d float(any(lessThan(debugBorderCoords.xy, debugBorderCoords.zw)) || any(greaterThan(debugBorderCoords.xy, 1.0 - debugBorderCoords.zw)));\n   gl_FragColor \x3d mix(gl_FragColor, vec4(1.0, 0.0, 1.0, 1.0), isBorder);\n#endif\n  if (gl_FragColor.a \x3c 0.1) {\n    discard;\n  }",
"occlusionTest.frag":"#include \x3cutil/fsPrecision.glsl\x3e\nuniform vec4 color;\nvoid main() {\n  gl_FragColor \x3d color;\n}","occlusionTest.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cutil/alignPixel.glsl\x3e\n#include \x3cutil/hud.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\nvoid main(void) {\n  vec4 posProjCenter;\n  if (dot(position, position) \x3e 0.0) {\n    ProjectHUDAux projectAux;\n    vec4 posProj \x3d projectPositionHUD(projectAux);\n    posProjCenter \x3d alignToPixelCenter(posProj, viewport.zw);\n    vec3 vpos \x3d projectAux.posModel;\n    if (rejectBySlice(vpos)) {\n      posProjCenter \x3d vec4(1e038, 1e038, 1e038, 1.0);\n    }\n  }\n  else {\n    posProjCenter \x3d vec4(1e038, 1e038, 1e038, 1.0);\n  }\n  gl_Position \x3d posProjCenter;\n  gl_PointSize \x3d 1.0;\n}"},
lineCallout:{"lineCallout.frag":"#include \x3cutil/fsPrecision.glsl\x3e\nuniform vec4 color;\nuniform vec4 borderColor;\nvarying vec4 coverageSampling;\nvarying vec2 lineSizes;\nvoid main() {\n  vec2 coverage \x3d min(1.0 - clamp(abs(coverageSampling.xy) - coverageSampling.zw, 0.0, 1.0), lineSizes);\n  float borderAlpha \x3d color.a * borderColor.a * coverage.y;\n  float colorAlpha \x3d color.a * coverage.x;\n  float finalAlpha \x3d mix(borderAlpha, 1.0, colorAlpha);\n#ifdef DEPTH_HUD\n  if (finalAlpha \x3c 0.01) {\n    discard;\n  }\n#else\n  vec3 finalRgb \x3d mix(borderColor.rgb * borderAlpha, color.rgb, colorAlpha);\n  gl_FragColor \x3d vec4(finalRgb, finalAlpha);\n#endif\n}",
"lineCallout.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cutil/alignPixel.glsl\x3e\n#include \x3cutil/hud.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\nattribute vec2 uv0;\nuniform float lineSize;\nuniform vec2 pixelToNDC;\nuniform float borderSize;\nuniform vec2 screenOffset;\nvarying vec4 coverageSampling;\nvarying vec2 lineSizes;\nvoid main(void) {\n  ProjectHUDAux projectAux;\n  vec4 endPoint \x3d projectPositionHUD(projectAux);\n  vec3 vpos \x3d projectAux.posModel;\n  if (rejectBySlice(vpos)) {\n    gl_Position \x3d vec4(1e38, 1e38, 1e38, 1.0);\n    return;\n  }\n#ifdef OCCL_TEST\n  if (!testVisibilityHUD(endPoint)) {\n    gl_Position \x3d vec4(1e38, 1e38, 1e38, 1.0);\n    return;\n  }\n#endif\n#ifdef SCREEN_SIZE_PERSPECTIVE\n  vec4 perspectiveFactor \x3d screenSizePerspectiveScaleFactor(projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspectiveAlignment);\n  vec2 screenOffsetScaled \x3d applyScreenSizePerspectiveScaleFactorVec2(screenOffset, perspectiveFactor);\n#else\n  vec2 screenOffsetScaled \x3d screenOffset;\n#endif\n  vec3 posView \x3d (view * (model * vec4(position, 1.0))).xyz;\n  applyHUDViewDependentPolygonOffset(auxpos1.w, projectAux.absCosAngle, posView);\n  vec4 startPoint \x3d proj * vec4(posView, 1.0);\n  vec2 screenOffsetNorm \x3d screenOffsetScaled * 2.0 / viewport.zw;\n  startPoint.xy +\x3d screenOffsetNorm * startPoint.w;\n  endPoint.xy +\x3d screenOffsetNorm * endPoint.w;\n  vec4 startAligned \x3d alignToPixelOrigin(startPoint, viewport.zw);\n  vec4 endAligned \x3d alignToPixelOrigin(endPoint, viewport.zw);\n#ifdef DEPTH_HUD\n#ifdef DEPTH_HUD_ALIGN_START\n  endAligned \x3d vec4(endAligned.xy / endAligned.w * startAligned.w, startAligned.zw);\n#else\n  startAligned \x3d vec4(startAligned.xy / startAligned.w * endAligned.w, endAligned.zw);\n#endif\n#endif\n  vec4 projectedPosition \x3d mix(startAligned, endAligned, uv0.y);\n  vec2 screenSpaceDirection \x3d normalize(endAligned.xy / endAligned.w - startAligned.xy / startAligned.w);\n  vec2 perpendicularScreenSpaceDirection \x3d vec2(screenSpaceDirection.y, -screenSpaceDirection.x);\n#ifdef SCREEN_SIZE_PERSPECTIVE\n  float lineSizeScaled \x3d applyScreenSizePerspectiveScaleFactorFloat(lineSize, perspectiveFactor);\n  float borderSizeScaled \x3d applyScreenSizePerspectiveScaleFactorFloat(borderSize, perspectiveFactor);\n#else\n  float lineSizeScaled \x3d lineSize;\n  float borderSizeScaled \x3d borderSize;\n#endif\n  float halfPixelSize \x3d lineSizeScaled * 0.5;\n  float halfWholePixelSize \x3d floor(lineSizeScaled) * 0.5;\n  float halfPixelSizeInt \x3d floor(halfWholePixelSize);\n  float subpixelOffset \x3d -fract(lineSizeScaled) * float(halfWholePixelSize \x3e 0.0);\n  float pixelOffset \x3d -halfPixelSizeInt + subpixelOffset;\n  float padding \x3d 1.0 + borderSizeScaled;\n  vec2 ndcOffset \x3d (pixelOffset - padding + uv0.x * (lineSizeScaled + padding + padding)) * pixelToNDC;\n  projectedPosition.xy +\x3d perpendicularScreenSpaceDirection * ndcOffset * projectedPosition.w;\n  float edgeDirection \x3d (uv0.x * 2.0 - 1.0);\n  float halfBorderSize \x3d 0.5 * borderSizeScaled;\n  float halfPixelSizeAndBorder \x3d halfPixelSize + halfBorderSize;\n  float outerEdgeCoverageSampler \x3d edgeDirection * (halfPixelSizeAndBorder + halfBorderSize + 1.0);\n  float isOneSided \x3d float(lineSizeScaled \x3c 2.0 \x26\x26 borderSize \x3c 2.0);\n  coverageSampling \x3d vec4(\n    outerEdgeCoverageSampler,\n    outerEdgeCoverageSampler - halfPixelSizeAndBorder * isOneSided,\n    halfPixelSize - 0.5,\n    halfBorderSize - 0.5 + halfPixelSizeAndBorder * (1.0 - isOneSided)\n  );\n  lineSizes \x3d vec2(lineSizeScaled, borderSizeScaled);\n  gl_Position \x3d projectedPosition;\n}"},
measurementArrow:{"measurementArrow.frag":"#include \x3cutil/fsPrecision.glsl\x3e\nuniform float outlineSize;\nuniform vec4 outlineColor;\nuniform float stripeLength;\nuniform vec4 stripeEvenColor;\nuniform vec4 stripeOddColor;\nvarying vec2 vtc;\nvarying float vlength;\nvarying float vradius;\n#define INV_SQRT2 (1.0 / sqrt(2.0))\nvec4 arrowColor(vec2 tc, float len) {\n  float d \x3d INV_SQRT2 * (tc.x - abs(tc.y));\n  d \x3d min(d, INV_SQRT2 * (len - tc.x - abs(tc.y)));\n  d \x3d min(d, 1.0 - abs(tc.y));\n  if (d \x3c 0.0) {\n    return vec4(0.0);\n  } else if (d \x3c outlineSize) {\n    return outlineColor;\n  } else {\n    return fract(0.5 / stripeLength * tc.x * vradius) \x3e\x3d 0.5 ? stripeOddColor : stripeEvenColor;\n  }\n}\nvoid main(void) {\n  vec2 ntc \x3d vec2(vtc.x / vradius, vtc.y);\n  vec4 color \x3d arrowColor(ntc, vlength / vradius);\n  if (color.a \x3d\x3d 0.0) {\n    discard;\n  }\n  gl_FragColor \x3d color;\n}",
"measurementArrow.vert":"#include \x3cutil/vsPrecision.glsl\x3e\nuniform mat4 proj;\nuniform mat4 view;\nuniform mat4 model;\nuniform float width;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv0;\nattribute float auxpos1;\nvarying vec2 vtc;\nvarying float vlength;\nvarying float vradius;\nvoid main(void) {\n  vec3 bitangent \x3d normal;\n  vtc \x3d uv0;\n  vlength \x3d auxpos1;\n  vradius \x3d 0.5 * width;\n  vec4 pos \x3d view * vec4((model * vec4(position + vradius * bitangent * uv0.y, 1.0)).xyz, 1.0);\n  gl_Position \x3d proj * pos;\n}"},
nativeLine:{"colorPass.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\nuniform vec4 constantColor;\nvarying vec3 vpos;\n#ifdef VERTEXCOLORS\nvarying vec4 vcolor;\n#endif\nvoid main() {\n  discardBySlice(vpos);\n#ifdef VERTEXCOLORS\n  gl_FragColor \x3d highlightSlice(vcolor, vpos);\n#else\n  gl_FragColor \x3d highlightSlice(constantColor, vpos);\n#endif\n}","highlightPass.frag":"#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\n#include \x3cutil/highlight.glsl\x3e\nvarying vec3 vpos;\nuniform sampler2D depthTex;\nuniform vec4 highlightViewportPixelSz;\nvoid main() {\n  discardBySlice(vpos);\n  gl_FragColor \x3d highlightData(gl_FragCoord, depthTex, highlightViewportPixelSz);\n}",
"nativeLine.vert":"#include \x3cutil/vsPrecision.glsl\x3e\nuniform mat4 proj;\nuniform mat4 view;\nuniform mat4 model;\nattribute vec3 position;\n#ifdef VERTEXCOLORS\nattribute vec4 color;\n#endif\nvarying vec3 vpos;\n#ifdef VERTEXCOLORS\nvarying vec4 vcolor;\n#endif\nvoid main(void) {\n  vpos \x3d (model * vec4(position, 1.0)).xyz;\n  #ifdef VERTEXCOLORS\n    vcolor \x3d color * 0.003921568627451;\n  #endif\n  gl_Position \x3d proj * view * vec4(vpos, 1.0);\n}"},pathMaterial:{"colorMixMode.glsl":"#include \x3cutil/color.glsl\x3e\nvec4 decodeSymbolColor(vec4 symbolColor, out int colorMixMode) {\n  float symbolAlpha \x3d 0.0;\n  const float maxTint \x3d 85.0;\n  const float maxReplace \x3d 170.0;\n  const float scaleAlpha \x3d 3.0;\n  if (symbolColor.a \x3d\x3d 0.0) {\n    colorMixMode \x3d 1;\n    symbolAlpha \x3d 0.0;\n  }\n  else if (symbolColor.a \x3c\x3d maxTint) {\n    colorMixMode \x3d 0;\n    symbolAlpha \x3d scaleAlpha * symbolColor.a;\n  }\n  else if (symbolColor.a \x3c\x3d maxReplace) {\n    colorMixMode \x3d 3;\n    symbolAlpha \x3d scaleAlpha * (symbolColor.a - maxTint);\n  }\n  else {\n    colorMixMode \x3d 1;\n    symbolAlpha \x3d scaleAlpha * (symbolColor.a - maxReplace);\n  }\n  return vec4(symbolColor.rgb, symbolAlpha);\n}\nvec3 mixExternalColor(vec3 internalColor, vec3 textureColor, vec3 externalColor, int mode) {\n  vec3 internalMixed \x3d internalColor * textureColor;\n  vec3 allMixed \x3d internalMixed * externalColor;\n  if (mode \x3d\x3d 1 ) {\n    return allMixed;\n  }\n  else if (mode \x3d\x3d 2  ) {\n    return internalMixed;\n  }\n  else if (mode \x3d\x3d 3  ) {\n    return externalColor;\n  }\n  else {\n    vec3 hsvIn \x3d rgb2hsv(internalMixed);\n    vec3 hsvTint \x3d rgb2hsv(externalColor);\n    vec3 hsvOut \x3d vec3(hsvTint.x, hsvTint.y, hsvIn.z * hsvTint.z);\n    return hsv2rgb(hsvOut);\n  }\n}\nfloat mixExternalOpacity(float internalOpacity, float textureOpacity, float externalOpacity, int mode) {\n  float internalMixed \x3d internalOpacity * textureOpacity;\n  float allMixed \x3d internalMixed * externalOpacity;\n  if (mode \x3d\x3d 2  ) {\n    return internalMixed;\n  }\n  else if (mode \x3d\x3d 3  ) {\n    return externalOpacity;\n  }\n  else {\n    return allMixed;\n  }\n}",
"colorPass.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\n#include \x3cutil/sceneLighting.glsl\x3e\nuniform vec3 camPos;\nuniform vec3 localOrigin;\nuniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 specular;\nuniform float opacity;\nuniform float layerOpacity;\n#if defined(SYMBOLVERTEXCOLORS) || defined(COMPONENTCOLORS)\nvarying mediump float colorMixMode;\n#else\nuniform int colorMixMode;\n#endif\n#ifdef RECEIVE_SHADOWS\nuniform sampler2D depthTex;\nuniform int shadowMapNum;\nuniform vec4 shadowMapDistance;\nuniform mat4 shadowMapMatrix[4];\nuniform float depthHalfPixelSz;\n#endif\n#ifdef RECEIVE_SSAO\nuniform sampler2D ssaoTex;\nuniform vec4 viewportPixelSz;\n#endif\nvarying vec3 vpos;\nvarying vec3 vnormal;\nvarying vec4 vcolor;\nvarying vec4 vcolorExt;\n#ifdef RECEIVE_SHADOWS\nvarying float linearDepth;\n#include \x3cutil/shadow.glsl\x3e\n#endif\n#include \x3cmaterials/pathMaterial/colorMixMode.glsl\x3e\nvoid main() {\n  discardBySlice(vpos);\n  vec4 texColor \x3d vec4(1.0);\n  vec3 viewDir \x3d vpos - camPos;\n#ifdef GROUND_NORMAL_SHADING\n#if VIEWING_MODE \x3d\x3d VIEWING_MODE_GLOBAL\n  vec3 normal \x3d normalize(vpos + localOrigin);\n#else\n  vec3 normal \x3d vec3(0.0, 0.0, 1.0);\n#endif\n#else\n#ifdef DOUBLESIDED\n  vec3 normal \x3d dot(vnormal, viewDir)\x3e0.0 ? -vnormal : vnormal;\n#elif defined(WINDINGORDERDOUBLESIDED)\n  vec3 normal \x3d gl_FrontFacing ? vnormal : -vnormal;\n#else\n  vec3 normal \x3d vnormal;\n#endif\n  normal \x3d normalize(normal);\n#endif\n#ifdef RECEIVE_SSAO\n  float ssao \x3d texture2D(ssaoTex, (gl_FragCoord.xy - viewportPixelSz.xy) * viewportPixelSz.zw).a;\n  ssao \x3d viewportPixelSz.z \x3c 0.0 ? 1.0 : ssao;\n#else\n  float ssao \x3d 1.0;\n#endif\n  float additionalAmbientScale;\n  vec3 additionalLight \x3d sceneLightingAdditionalLightGlobal(vpos + localOrigin, ssao, additionalAmbientScale);\n  float shadow \x3d 0.0;\n#ifdef RECEIVE_SHADOWS\n  shadow \x3d evalShadow(vpos, linearDepth, depthTex, shadowMapNum, shadowMapDistance, shadowMapMatrix, depthHalfPixelSz);\n#elif VIEWING_MODE \x3d\x3d VIEWING_MODE_GLOBAL\n  shadow \x3d lightingGlobalFactor * (1.0 - additionalAmbientScale);\n#endif\n  vec3 matColor \x3d max(ambient, diffuse);\n  vec3 albedo_ \x3d mixExternalColor(vcolor.rgb * matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));\n  float opacity_ \x3d layerOpacity * mixExternalOpacity(vcolor.a * opacity, texColor.a, vcolorExt.a, int(colorMixMode));\n  albedo_+\x3d 0.25 * specular;\n#ifdef TRANSPARENCY_DISCARD\n  if (opacity_ \x3c 0.001) {\n    discard;\n  }\n#endif\n  vec3 shadedColor \x3d evaluateSceneLighting(normal, albedo_, shadow, 1.0 - ssao, additionalLight);\n  gl_FragColor \x3d vec4(shadedColor, opacity_);\n  gl_FragColor \x3d highlightSlice(gl_FragColor, vpos);\n}",
"colorPass.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cmaterials/pathMaterial/commonInputs.glsl\x3e\n#ifdef COMPRESSED_NORMALS\nattribute vec2 normalCompressed;\n#else\nattribute vec3 normal;\n#endif\nvarying vec3 vpos;\nvarying vec3 vnormal;\n#ifdef COMPONENTCOLORS\nuniform sampler2D uComponentColorTex;\nuniform vec2 uComponentColorTexInvDim;\nattribute float componentIndex;\nvec4 readComponentColor() {\n  float normalizedIndex \x3d (componentIndex + 0.5) * uComponentColorTexInvDim.x;\n  vec2 indexCoord \x3d vec2(\n    mod(normalizedIndex, 1.0),\n    (floor(normalizedIndex) + 0.5) * uComponentColorTexInvDim.y\n  );\n  return texture2D(uComponentColorTex, indexCoord);\n}\n#endif\n#ifdef RECEIVE_SHADOWS\nvarying float linearDepth;\n#endif\n#ifdef SYMBOLVERTEXCOLORS\nattribute vec4 symbolColor;\n#endif\nuniform vec4 externalColor;\nvarying vec4 vcolor;\nvarying vec4 vcolorExt;\n#if defined(SYMBOLVERTEXCOLORS) || defined(COMPONENTCOLORS)\nvarying mediump float colorMixMode;\n#endif\n#include \x3cmaterials/pathMaterial/commonFunctions.glsl\x3e\n#include \x3cmaterials/pathMaterial/localNormal.glsl\x3e\n#include \x3cmaterials/pathMaterial/colorMixMode.glsl\x3e\nvoid main() {\n  vpos \x3d calculateVPos();\n  vnormal \x3d normalize((modelNormal * localNormal()).xyz);\n  gl_Position \x3d proj * view * vec4(vpos, 1.0);\n#ifdef RECEIVE_SHADOWS\n  linearDepth \x3d gl_Position.w;\n#endif\n  vcolorExt \x3d externalColor;\n  vcolor \x3d getColor();\n#ifdef SYMBOLVERTEXCOLORS\n  int symbolColorMixMode;\n  vcolorExt *\x3d decodeSymbolColor(symbolColor, symbolColorMixMode) * 0.003921568627451;\n  colorMixMode \x3d float(symbolColorMixMode) + 0.5;\n#endif\n#ifdef COMPONENTCOLORS\n  int symbolColorMixMode;\n  vcolorExt *\x3d decodeSymbolColor(readComponentColor() * 255.0, symbolColorMixMode) * 0.003921568627451;\n  colorMixMode \x3d float(symbolColorMixMode) + 0.5;\n#endif\n}",
"commonFunctions.glsl":"#include \x3cutil/doublePrecision.glsl\x3e\nattribute vec4 featureValue;\nbool isCapVertex() {\n  return featureValue.w \x3d\x3d 1.0;\n}\nuniform vec3 size;\n#if defined(VV_SIZE)\n  uniform vec3 vvSizeMinSize;\n  uniform vec3 vvSizeMaxSize;\n  uniform vec3 vvSizeOffset;\n  uniform vec3 vvSizeFactor;\n  vec3 getSize() {\n    float value \x3d featureValue.x;\n    return size*clamp(vvSizeOffset + value * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize).xzy;\n  }\n#else\n  vec3 getSize(){\n    return size;\n  }\n#endif\n#ifdef VV_OPACITY\n  #define VV_OPACITY_N 8\n  uniform float vvOpacityValues[VV_OPACITY_N];\n  uniform float vvOpacityOpacities[VV_OPACITY_N];\n  vec4 applyOpacity(vec4 color) {\n    float value \x3d featureValue.z;\n    if (value \x3c\x3d vvOpacityValues[0]) {\n      return vec4( color.xyz, vvOpacityOpacities[0]);\n    }\n    for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\n      if (vvOpacityValues[i] \x3e\x3d value) {\n        float f \x3d (value - vvOpacityValues[i-1]) / (vvOpacityValues[i] - vvOpacityValues[i-1]);\n        return vec4( color.xyz, mix(vvOpacityOpacities[i-1], vvOpacityOpacities[i], f));\n      }\n    }\n    return vec4( color.xyz, vvOpacityOpacities[VV_OPACITY_N - 1]);\n  }\n#else\n  vec4 applyOpacity(vec4 color){\n    return color;\n  }\n#endif\n#ifdef VV_COLOR\n  #define VV_COLOR_N 8\n  uniform float vvColorValues[VV_COLOR_N];\n  uniform vec4 vvColorColors[VV_COLOR_N];\n  vec4 getColor() {\n    float value \x3d featureValue.y;\n    if (value \x3c\x3d vvColorValues[0]) {\n      return applyOpacity(vvColorColors[0]);\n    }\n    for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\n      if (vvColorValues[i] \x3e\x3d value) {\n        float f \x3d (value - vvColorValues[i-1]) / (vvColorValues[i] - vvColorValues[i-1]);\n        return applyOpacity(mix(vvColorColors[i-1], vvColorColors[i], f));\n      }\n    }\n    return applyOpacity(vvColorColors[VV_COLOR_N - 1]);\n  }\n#else\n  vec4 getColor(){\n    return applyOpacity(vec4(1, 1, 1, 1));\n  }\n#endif\nvec3 calculateVPos() {\n  vec3 size \x3d getSize();\n  vec3 origin \x3d position;\n  vec3 profileRightAxis \x3d pathGeometryInfo[0].xyz;\n  vec3 profileUpAxis \x3d pathGeometryInfo[1].xyz;\n  vec3 offset \x3d profileRightAxis * size.x + profileUpAxis * size.y;\n  if(!isCapVertex()) {\n    vec3 rotationRightAxis \x3d pathGeometryInfo[2].xyz;\n    float maxDistance \x3d length(rotationRightAxis);\n    rotationRightAxis \x3d normalize(rotationRightAxis);\n    float rx \x3d dot(offset, rotationRightAxis);\n    if( abs(rx) \x3e maxDistance ) {\n      vec3 rotationUpAxis \x3d offset - rx*rotationRightAxis;\n      offset \x3d rotationRightAxis * maxDistance * sign(rx) + rotationUpAxis;\n    }\n  } else {\n    vec3 profilePlaneOffset \x3d pathGeometryInfo[2].xyz*size.x;\n    offset +\x3d profilePlaneOffset;\n  }\n  vec4 localPosition \x3d vec4(origin + offset, 1.0);\n  return (model * localPosition).xyz;\n}",
"commonInputs.glsl":"uniform mat4 proj;\nuniform mat4 view;\nuniform vec3 camPos;\nuniform vec3 localOrigin;\nuniform mat4 model;\nuniform mat4 modelNormal;\nattribute vec3 position;\nattribute mat3 pathGeometryInfo;","depthPass.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/encoding.glsl\x3e\n#include \x3cutil/depth.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\nvarying float depth;\nvarying vec3 vpos;\nvoid main() {\n  discardBySlice(vpos);\n#ifndef BIAS_SHADOWMAP\n  gl_FragColor \x3d float2rgba(depth);\n#else\n  gl_FragColor \x3d float2rgba(calcFragDepth(depth));\n#endif\n}",
"depthPass.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cmaterials/pathMaterial/commonInputs.glsl\x3e\nuniform vec2 nearFar;\nvarying float depth;\nvarying vec3 vpos;\n#include \x3cmaterials/pathMaterial/commonFunctions.glsl\x3e\nvoid main(void) {\n  vpos \x3d calculateVPos();\n  vec4 eye \x3d view * vec4(vpos, 1.0);\n  gl_Position \x3d proj * eye;\n  depth \x3d (-eye.z - nearFar[0]) / (nearFar[1] - nearFar[0]) ;\n}","highlightPass.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\n#include \x3cutil/highlight.glsl\x3e\nvarying vec3 vpos;\nuniform sampler2D depthTex;\nuniform vec4 highlightViewportPixelSz;\nvoid main() {\n  discardBySlice(vpos);\n  gl_FragColor \x3d highlightData(gl_FragCoord, depthTex, highlightViewportPixelSz);\n}",
"highlightPass.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cmaterials/pathMaterial/commonInputs.glsl\x3e\nvarying vec3 vpos;\n#include \x3cmaterials/pathMaterial/commonFunctions.glsl\x3e\nvoid main(void) {\n  vpos \x3d calculateVPos();\n  gl_Position \x3d proj * view * vec4(vpos, 1.0);\n}","localNormal.glsl":"#include \x3cutil/normalEncoding.glsl\x3e\n# ifdef COMPRESSED_NORMALS\nvec4 localNormal() { return vec4(decodeNormal(normalCompressed), 1.0); }\n# else\nvec4 localNormal() { return vec4(normal, 1.0); }\n# endif",
"normalPass.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\nvarying vec3 vnormal;\nvarying vec3 vpos;\nvoid main() {\n  discardBySlice(vpos);\n  vec3 normal \x3d normalize(vnormal);\n  if (gl_FrontFacing \x3d\x3d false) normal \x3d -normal;\n#ifndef ALPHA_ZERO\n  gl_FragColor \x3d vec4(vec3(.5) + .5 * normal, 1.0);\n#else\n  gl_FragColor \x3d vec4(vec3(.5) + .5 * normal, 0.0);\n#endif\n}","normalPass.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cmaterials/pathMaterial/commonInputs.glsl\x3e\nuniform mat4 viewNormal;\n#ifdef COMPRESSED_NORMALS\nattribute vec2 normalCompressed;\n#else\nattribute vec3 normal;\n#endif\nvarying vec3 vnormal;\nvarying vec3 vpos;\n#include \x3cmaterials/pathMaterial/commonFunctions.glsl\x3e\n#include \x3cmaterials/pathMaterial/localNormal.glsl\x3e\nvoid main(void) {\n  vpos \x3d calculateVPos();\n  vnormal \x3d normalize((viewNormal * modelNormal * localNormal()).xyz);\n  gl_Position \x3d proj * view * vec4(vpos, 1.0);\n}",
"texturing.glsl":"float calcMipMapLevel(const vec2 ddx, const vec2 ddy) {\n  float deltaMaxSqr \x3d max(dot(ddx, ddx), dot(ddy, ddy));\n  return max(0.0, 0.5 * log2(deltaMaxSqr));\n}\nvec4 textureAtlasLookup(sampler2D tex, vec2 uv, vec4 region, vec2 texSize) {\n  vec2 atlasScale \x3d region.zw - region.xy;\n  vec2 uvAtlas \x3d fract(uv) * atlasScale + region.xy;\n  vec2 dUVdx \x3d dFdx(uv) * atlasScale;\n  vec2 dUVdy \x3d dFdy(uv) * atlasScale;\n#ifdef GL_EXT_shader_texture_lod\n  return texture2DGradEXT(tex, uvAtlas, dUVdx, dUVdy);\n#else\n  vec2 dUVdxAuto \x3d dFdx(uvAtlas);\n  vec2 dUVdyAuto \x3d dFdy(uvAtlas);\n  float mipMapLevel \x3d calcMipMapLevel(dUVdx * texSize, dUVdy * texSize);\n  float autoMipMapLevel \x3d calcMipMapLevel(dUVdxAuto * texSize, dUVdyAuto * texSize);\n  return texture2D(tex, uvAtlas, mipMapLevel - autoMipMapLevel);\n#endif\n}\nvec4 textureLookup(sampler2D tex, vec2 uv) {\n#ifdef TEXTURE_ATLAS\n  return textureAtlasLookup(tex, uv, regionV, texSize);\n#else\n  return texture2D(tex, uv);\n#endif\n}"},
ribbonLine:{"colorPass.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\nuniform vec4 symbolColor;\nvarying vec4 vColor;\nvarying vec2 vtc;\nvarying vec3 vpos;\n#ifdef STIPPLE\nuniform float stippleLengthDoubleInv;\n#endif\nvoid main() {\n  discardBySlice(vpos);\n#ifdef STIPPLE\n  if (fract(vtc.x * stippleLengthDoubleInv) \x3e 0.5) {\n    discard;\n  }\n#endif\n  gl_FragColor \x3d highlightSlice(symbolColor * vColor, vpos);\n}",
"highlightPass.frag":"#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\nvarying vec2 vtc;\nvarying vec3 vpos;\n#ifdef STIPPLE\nuniform float stippleLengthDoubleInv;\n#endif\nvoid main() {\n  discardBySlice(vpos);\n#ifdef STIPPLE\n  if (fract(vtc.x * stippleLengthDoubleInv) \x3e 0.5) {\n    discard;\n  }\n#endif\n  gl_FragColor \x3d vec4(1.0, 1.0, 1.0, 1.0);\n}","inputs.glsl":"uniform float symbolLineWidth;\n#ifdef VV_SIZE\n  attribute float sizeFeatureAttribute;\n  uniform vec3 vvSizeMinSize;\n  uniform vec3 vvSizeMaxSize;\n  uniform vec3 vvSizeOffset;\n  uniform vec3 vvSizeFactor;\n  float getSize() {\n    float value \x3d sizeFeatureAttribute;\n    return symbolLineWidth * clamp(vvSizeOffset + value * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize).x;\n  }\n#else\n  attribute float size;\n  float getSize(){\n    return symbolLineWidth * size;\n  }\n#endif\n#ifdef VV_OPACITY\n  attribute float opacityFeatureAttribute;\n  #define VV_OPACITY_N 8\n  uniform float vvOpacityValues[VV_OPACITY_N];\n  uniform float vvOpacityOpacities[VV_OPACITY_N];\n  float interpolateOpacity( float value ){\n    if (value \x3c\x3d vvOpacityValues[0]) {\n      return vvOpacityOpacities[0];\n    }\n    for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\n      if (vvOpacityValues[i] \x3e\x3d value) {\n        float f \x3d (value - vvOpacityValues[i-1]) / (vvOpacityValues[i] - vvOpacityValues[i-1]);\n        return mix(vvOpacityOpacities[i-1], vvOpacityOpacities[i], f);\n      }\n    }\n    return vvOpacityOpacities[VV_OPACITY_N - 1];\n  }\n  vec4 applyOpacity( vec4 color ){\n    return vec4(color.xyz, interpolateOpacity(opacityFeatureAttribute));\n  }\n#else\n  vec4 applyOpacity( vec4 color ){\n    return color;\n  }\n#endif\n#ifdef VV_COLOR\n  attribute float colorFeatureAttribute;\n  #define VV_COLOR_N 8\n  uniform float vvColorValues[VV_COLOR_N];\n  uniform vec4 vvColorColors[VV_COLOR_N];\n  vec4 interpolateColor( float value ) {\n    if (value \x3c\x3d vvColorValues[0]) {\n      return vvColorColors[0];\n    }\n    for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\n      if (vvColorValues[i] \x3e\x3d value) {\n        float f \x3d (value - vvColorValues[i-1]) / (vvColorValues[i] - vvColorValues[i-1]);\n        return mix(vvColorColors[i-1], vvColorColors[i], f);\n      }\n    }\n    return vvColorColors[VV_COLOR_N - 1];\n  }\n  vec4 getColor(){\n    return applyOpacity(interpolateColor(colorFeatureAttribute));\n  }\n#else\n  attribute vec4 color;\n  vec4 getColor(){\n    return applyOpacity(color);\n  }\n#endif",
"ribbonLine.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cmaterials/ribbonLine/inputs.glsl\x3e\nconst float PI \x3d 3.1415926535897932384626433832795;\nuniform mat4 proj;\nuniform mat4 view;\nuniform mat4 model;\nuniform float nearPlane;\nuniform float pixelRatio;\nattribute vec3 position;\nattribute float subdivisionFactor;\nattribute vec2 uv0;\nvarying vec2 vtc;\nvarying vec4 vColor;\nvarying vec3 vpos;\nuniform float miterLimit;\nattribute vec3 auxpos1;\nattribute vec3 auxpos2;\nuniform vec2 screenSize;\nvec4 toScreenCoords(vec3 vertex) {\n  vec4 vClipSpace \x3d proj * view * vec4((model * vec4(vertex, 1.0)).xyz, 1.0);\n  vClipSpace.xy *\x3d screenSize;\n  return vClipSpace/abs(vClipSpace.w);\n}\n#define PERPENDICULAR(v) vec2(v.y, -v.x);\n#define ISOUTSIDE (left.x * right.y - left.y * right.x)*uv0.y \x3e 0.0\nfloat interp(float ncp, vec4 a, vec4 b) {\n  return (-ncp - a.z) / (b.z - a.z);\n}\nvec2 rotate(vec2 v, float a) {\n\tfloat s \x3d sin(a);\n\tfloat c \x3d cos(a);\n\tmat2 m \x3d mat2(c, -s, s, c);\n\treturn m * v;\n}\nvoid clipAndTransform(inout vec4 pos, inout vec4 prev, inout vec4 next, in bool isStartVertex) {\n  float vnp \x3d nearPlane*0.99;\n  if(pos.z \x3e -nearPlane) {\n    if (!isStartVertex) {\n      if(prev.z \x3c -nearPlane) {\n        pos \x3d mix(prev, pos, interp(vnp, prev, pos));\n        next \x3d pos;\n      } else {\n        pos \x3d vec4(0.0, 0.0, 0.0, 1.0);\n      }\n    }\n    if(isStartVertex) {\n      if(next.z \x3c -nearPlane) {\n        pos \x3d mix(pos, next, interp(vnp, pos, next));\n        prev \x3d pos;\n      } else {\n        pos \x3d vec4(0.0, 0.0, 0.0, 1.0);\n      }\n    }\n  } else {\n    if (prev.z \x3e -nearPlane) {\n      prev \x3d mix(pos, prev, interp(vnp, pos, prev));\n    }\n    if (next.z \x3e -nearPlane) {\n      next \x3d mix(next, pos, interp(vnp, next, pos));\n    }\n  }\n  pos\x3d proj * pos;\n  pos.xy *\x3d screenSize;\n  pos /\x3d pos.w;\n  next \x3d proj * next;\n  next.xy *\x3d screenSize;\n  next /\x3d next.w;\n  prev \x3d proj * prev;\n  prev.xy *\x3d screenSize;\n  prev /\x3d prev.w;\n}\nvoid main(void) {\n  vpos \x3d (model * vec4(position, 1.0)).xyz;\n  if (uv0.y \x3d\x3d 0.0) {\n    gl_Position \x3d vec4(1e038, 1e038, 1e038, 1.0);\n  }\n  else {\n    bool isStartVertex \x3d abs(abs(uv0.y)-3.0) \x3d\x3d 1.0;\n    bool isJoin \x3d abs(uv0.y)-3.0 \x3c 0.0;\n    float lineWidth \x3d getSize() * pixelRatio;\n    vec4 pos  \x3d view * vec4((model * vec4(position.xyz, 1.0)).xyz, 1.0);\n    vec4 prev \x3d view * vec4((model * vec4(auxpos1.xyz, 1.0)).xyz, 1.0);\n    vec4 next \x3d view * vec4((model * vec4(auxpos2.xyz, 1.0)).xyz, 1.0);\n    clipAndTransform(pos, prev, next, isStartVertex);\n    vec2 left \x3d (pos - prev).xy;\n    vec2 right \x3d (next - pos).xy;\n    float leftLen \x3d length(left);\n    left \x3d (leftLen \x3e 0.001) ? left/leftLen : vec2(0.0, 0.0);\n    float rightLen \x3d length(right);\n    right \x3d (rightLen \x3e 0.001) ? right/rightLen : vec2(0.0, 0.0);\n    vec2 capDisplacementDir \x3d vec2(0, 0);\n    vec2 joinDisplacementDir \x3d vec2(0, 0);\n    float displacementLen \x3d lineWidth;\n    if( isJoin ){\n      bool isOutside \x3d ISOUTSIDE;\n      joinDisplacementDir \x3d normalize(left + right);\n      joinDisplacementDir \x3d PERPENDICULAR(joinDisplacementDir);\n      if (leftLen \x3e 0.001 \x26\x26 rightLen \x3e 0.001) {\n        float nDotSeg \x3d dot(joinDisplacementDir, left);\n        displacementLen /\x3d length(nDotSeg*left - joinDisplacementDir);\n        if (!isOutside) {\n          displacementLen \x3d min(displacementLen, min(leftLen, rightLen)/abs(nDotSeg));\n        }\n      }\n      if (isOutside \x26\x26 (displacementLen \x3e miterLimit*lineWidth)) {\n#ifdef JOIN_ROUND\n        vec2 startDir;\n        vec2 endDir;\n        if (leftLen \x3c 0.001) {\n          startDir \x3d right;\n        }\n        else{\n          startDir \x3d left;\n        }\n        startDir \x3d normalize(startDir);\n        startDir \x3d PERPENDICULAR(startDir);\n        if (rightLen \x3c 0.001) {\n          endDir \x3d left;\n        }\n        else{\n          endDir \x3d right;\n        }\n        endDir \x3d normalize(endDir);\n        endDir \x3d PERPENDICULAR(endDir);\n        float rotationAngle \x3d acos(clamp(dot(startDir, endDir), -1.0, 1.0));\n        joinDisplacementDir \x3d rotate( startDir, -sign(uv0.y)*subdivisionFactor*rotationAngle );\n        displacementLen \x3d lineWidth;\n#else\n        if (leftLen \x3c 0.001) {\n          joinDisplacementDir \x3d right;\n        }\n        else if (rightLen \x3c 0.001) {\n          joinDisplacementDir \x3d left;\n        }\n        else {\n          joinDisplacementDir \x3d isStartVertex ? right : left;\n        }\n        joinDisplacementDir \x3d normalize(joinDisplacementDir);\n        joinDisplacementDir \x3d PERPENDICULAR(joinDisplacementDir);\n        displacementLen \x3d lineWidth;\n#endif\n      }\n    } else {\n      if (leftLen \x3c 0.001) {\n        joinDisplacementDir \x3d right;\n      }\n      else if (rightLen \x3c 0.001) {\n        joinDisplacementDir \x3d left;\n      }\n      else {\n        joinDisplacementDir \x3d isStartVertex ? right : left;\n      }\n      joinDisplacementDir \x3d normalize(joinDisplacementDir);\n      joinDisplacementDir \x3d PERPENDICULAR(joinDisplacementDir);\n      displacementLen \x3d lineWidth;\n      capDisplacementDir \x3d isStartVertex ? -right : left;\n  #ifdef CAP_ROUND\n      float angle \x3d subdivisionFactor*PI*0.5;\n      joinDisplacementDir *\x3d cos(angle);\n      capDisplacementDir *\x3d sin(angle);\n  #else\n      capDisplacementDir *\x3d subdivisionFactor;\n  #endif\n    }\n    pos.xy +\x3d joinDisplacementDir * sign(uv0.y) * displacementLen;\n    pos.xy +\x3d capDisplacementDir * displacementLen;\n    pos.xy /\x3d screenSize;\n    vtc \x3d uv0;\n    vColor \x3d getColor();\n    gl_Position \x3d pos;\n  }\n}"},
slicePlane:{"slicePlane.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\nuniform vec4 backgroundColor;\nuniform vec4 gridColor;\nuniform float ratio;\nuniform float gridWidth;\nvarying vec2 vUV;\nvoid main() {\n  const float LINE_WIDTH \x3d 1.0;\n  vec2 uvScaled \x3d vUV * gridWidth;\n  vec2 gridUV \x3d (fract(uvScaled + 0.5) - 0.5) / (LINE_WIDTH * fwidth(uvScaled));\n  vec2 grid \x3d (1.0 - step(0.5, gridUV)) * step(-0.5, gridUV);\n  grid.x *\x3d step(0.5, uvScaled.x) * step(uvScaled.x, gridWidth - 0.5);\n  grid.y *\x3d step(0.5, uvScaled.y) * step(uvScaled.y, gridWidth - 0.5);\n  float gridFade \x3d max(grid.x, grid.y);\n  float gridAlpha \x3d gridColor.a * gridFade;\n  gl_FragColor \x3d\n    vec4(backgroundColor.rgb * backgroundColor.a, backgroundColor.a) * (1.0 - gridAlpha) +\n    vec4(gridColor.rgb, 1.0) * gridAlpha;\n}",
"slicePlane.vert":"#include \x3cutil/vsPrecision.glsl\x3e\nuniform mat4 proj;\nuniform mat4 view;\nuniform mat4 model;\nattribute vec3 position;\nattribute vec2 uv0;\nvarying vec2 vUV;\nvoid main(void) {\n  vUV \x3d uv0;\n  gl_Position \x3d proj * view * vec4((model * vec4(position, 1.0)).xyz, 1.0);\n}"},water:{"colorPass.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\nuniform sampler2D texWaveNormal;\nuniform sampler2D texWavePerturbation;\n#include \x3cmaterials/water/waterDistortion.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\n#ifdef RECEIVE_SHADOWS\nuniform sampler2D depthTex;\nuniform int shadowMapNum;\nuniform vec4 shadowMapDistance;\nuniform mat4 shadowMapMatrix[4];\nuniform float depthHalfPixelSz;\nvarying float linearDepth;\n#include \x3cutil/shadow.glsl\x3e\n#endif\n#include \x3cmaterials/water/waterSurface.glsl\x3e\nuniform vec4 waterColor;\nuniform vec3 lightingMainDirection;\nuniform int shadowsEnabled;\nuniform vec3 camPos;\nuniform float timeElapsed;\nvarying vec2 uvOut;\nvarying vec3 posOut;\nvarying vec3 normalOut;\nvarying mat3 tbnMatrix;\nvoid main() {\n  discardBySlice(posOut);\n  vec3 localUp \x3d normalOut;\n  vec2 uv \x3d uvOut;\n  vec3 tangentNormal \x3d getSurfaceNormal(uv, timeElapsed);\n  vec3 n \x3d normalize(tbnMatrix * tangentNormal);\n  vec3 v \x3d -normalize(posOut - camPos);\n  vec3 l \x3d normalize(-lightingMainDirection);\n  float shadow \x3d 1.0;\n#ifdef RECEIVE_SHADOWS\n  if(shadowsEnabled \x3d\x3d 1) {\n    shadow \x3d 1.0 - evalShadow(posOut, linearDepth, depthTex, shadowMapNum, shadowMapDistance, shadowMapMatrix, depthHalfPixelSz);\n  }\n#endif\n  vec4 final \x3d vec4(getSeaColor(n, v, l, waterColor.rgb, localUp, shadow), waterColor.w);\n  gl_FragColor \x3d vec4(pow(final.rgb, vec3( 1.0 / 2.2)), final.w);\n  gl_FragColor \x3d highlightSlice(gl_FragColor, posOut);\n}",
"colorPass.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cmaterials/water/normalsUtils.glsl\x3e\nuniform mat4 proj;\nuniform mat4 view;\nuniform mat4 model;\nuniform vec3 localOrigin;\nattribute vec3 position;\nattribute vec2 uv0;\n#include \x3cmaterials/defaultMaterial/commonFunctions.glsl\x3e\nvarying vec2 uvOut;\nvarying vec3 posOut;\nvarying vec3 normalOut;\nvarying mat3 tbnMatrix;\n#ifdef RECEIVE_SHADOWS\nvarying float linearDepth;\n#endif\nvoid main(void) {\n  uvOut \x3d uv0;\n  posOut \x3d calculateVPos();\n  normalOut \x3d getLocalUp(posOut, localOrigin);\n  tbnMatrix \x3d getTBNMatrix(normalOut);\n  gl_Position \x3d proj * view * vec4(posOut.xyz, 1.0);\n  #ifdef RECEIVE_SHADOWS\n    linearDepth \x3d gl_Position.w;\n  #endif\n}",
"drapedColorPass.frag":"#include \x3cutil/fsPrecision.glsl\x3e\nuniform vec4 waterColor;\nvoid main() {\n  gl_FragColor \x3d waterColor;\n}","drapedColorPass.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cmaterials/water/normalsUtils.glsl\x3e\nuniform mat4 proj;\nuniform mat4 view;\nuniform mat4 model;\nuniform vec3 localOrigin;\nattribute vec3 position;\n#include \x3cmaterials/defaultMaterial/commonFunctions.glsl\x3e\nvarying vec3 posOut;\nvoid main(void) {\n  posOut \x3d calculateVPos();\n  gl_Position \x3d proj * view * vec4(posOut.xyz, 1.0);\n}",
"normalPass.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\nuniform sampler2D texWaveNormal;\nuniform sampler2D texWavePerturbation;\n#include \x3cmaterials/water/waterDistortion.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\nuniform float timeElapsed;\nvarying vec2 uvOut;\nvarying vec3 posOut;\nvoid main() {\n  discardBySlice(posOut);\n  vec2 uv \x3d uvOut;\n  vec3 tangentNormal \x3d getSurfaceNormal(uv, timeElapsed);\n  tangentNormal \x3d normalize(tangentNormal);\n  gl_FragColor \x3d vec4((tangentNormal + vec3(1.0)) * 0.5, 0.0);\n}",
"normalPass.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cmaterials/water/normalsUtils.glsl\x3e\nuniform mat4 proj;\nuniform mat4 view;\nuniform mat4 model;\nuniform vec3 localOrigin;\nattribute vec3 position;\nattribute vec2 uv0;\n#include \x3cmaterials/defaultMaterial/commonFunctions.glsl\x3e\nvarying vec3 posOut;\nvarying vec2 uvOut;\nvoid main(void) {\n  uvOut \x3d uv0;\n  posOut \x3d calculateVPos();\n  gl_Position \x3d proj * view * vec4(posOut.xyz, 1.0);\n}","normalsUtils.glsl":"vec3 getLocalUp(in vec3 pos, in vec3 origin) {\n  #if VIEWING_MODE \x3d\x3d VIEWING_MODE_GLOBAL\n    return normalize(pos + origin);\n  #else\n    return vec3(0.0, 0.0, 1.0);\n  #endif\n}\nmat3 getTBNMatrix(in vec3 n) {\n  #if VIEWING_MODE \x3d\x3d VIEWING_MODE_GLOBAL\n    vec3 t \x3d normalize(cross(vec3(0.0, 0.0, 1.0), n));\n    vec3 b \x3d normalize(cross(n, t));\n    return mat3(t, b, n);\n  #else\n    vec3 t \x3d vec3(1.0, 0.0, 0.0);\n    vec3 b \x3d normalize(cross(n, t));\n    return mat3(t, b, n);\n  #endif\n}",
"waterDistortion.glsl":"uniform vec3 octaveTextureRepeat;\nuniform vec4 waveParams;\nuniform vec2 waveDirection;\nconst vec2  FLOW_JUMP \x3d vec2(6.0/25.0, 5.0/24.0);\nvec2 textureDenormalized2D(sampler2D _tex, vec2 _uv) {\n  return 2.0 * texture2D(_tex, _uv).rg - 1.0;\n}\nfloat sampleNoiseTexture(vec2 _uv) {\n  return texture2D(texWavePerturbation, _uv).b;\n}\nvec3 textureDenormalized3D(sampler2D _tex, vec2 _uv) {\n  return 2.0 * texture2D(_tex, _uv).rgb - 1.0;\n}\nfloat computeProgress(vec2 uv, float time) {\n  return fract(time);\n}\nfloat computeWeight(vec2 uv, float time) {\n  float progress \x3d computeProgress(uv, time);\n  return 1.0 - abs(1.0 - 2.0 * progress);\n}\nvec3 computeUVPerturbedWeigth(sampler2D texFlow, vec2 uv, vec2 _waveDir, float time, float phaseOffset) {\n  float flowStrength \x3d waveParams[2];\n  float flowOffset \x3d waveParams[3];\n  vec2 flowVector \x3d textureDenormalized2D(texFlow, uv) * flowStrength;\n  float progress \x3d computeProgress(uv, time + phaseOffset);\n  float weight \x3d computeWeight(uv, time + phaseOffset);\n  vec2 result \x3d uv;\n  result -\x3d flowVector * (progress + flowOffset);\n  result +\x3d phaseOffset;\n  result +\x3d (time - progress) * FLOW_JUMP;\n  return vec3(result, weight);\n}\nconst float TIME_NOISE_TEXTURE_REPEAT \x3d 0.3737;\nconst float TIME_NOISE_STRENGTH \x3d 7.77;\nvec3 getWaveLayer(sampler2D _texNormal, sampler2D _dudv, vec2 _uv, vec2 _waveDir, float time) {\n  float waveStrength \x3d waveParams[0];\n  vec2 waveMovement \x3d time * waveDirection;\n  float timeNoise \x3d sampleNoiseTexture(_uv * TIME_NOISE_TEXTURE_REPEAT) * TIME_NOISE_STRENGTH;\n  vec3 uv_A \x3d computeUVPerturbedWeigth(_dudv, _uv + waveMovement, _waveDir, time + timeNoise, 0.0);\n  vec3 uv_B \x3d computeUVPerturbedWeigth(_dudv, _uv + waveMovement, _waveDir, time + timeNoise, 0.5);\n  vec3 normal_A \x3d textureDenormalized3D(_texNormal, uv_A.xy) * uv_A.z;\n  vec3 normal_B \x3d textureDenormalized3D(_texNormal, uv_B.xy) * uv_B.z;\n  vec3 mixNormal \x3d normalize(normal_A + normal_B);\n  mixNormal.xy *\x3d waveStrength;\n  mixNormal.z \x3d sqrt(1.0 - dot(mixNormal.xy, mixNormal.xy));\n  return mixNormal;\n}\nvec3 getSurfaceNormal(vec2 _uv, float _time) {\n  float waveTextureRepeat \x3d waveParams[1];\n  return getWaveLayer(texWaveNormal, texWavePerturbation, _uv * waveTextureRepeat, waveDirection, _time);\n}",
"waterSurface.glsl":"#ifdef OVERLAY\n  const vec3 skyZenitColor \x3d vec3(0, 0.6, 0.9);\n  const vec3 skyColor \x3d vec3(0.72, 0.92, 1.0);\n  float f0Sky \x3d 0.02;\n  float f0maxSky \x3d 1.0;\n  float expSky \x3d 5.0;\n  float roughness \x3d 0.06;\n  float f0maxSpec \x3d 0.1;\n#else\n  uniform vec3 skyColor;\n  uniform vec3 skyZenitColor;\n  uniform float f0Sky;\n  uniform float f0maxSky;\n  uniform float expSky;\n  uniform float roughness;\n  uniform float f0maxSpec;\n#endif\nuniform vec3 lightIntensity;\n#include \x3cutil/pbrUtils.glsl\x3e\nPBRShading shadingInfo;\nvec3 getSkyColor(in float cosTheta, in vec3 horizon, in vec3 zenit) {\n  float exponent \x3d pow((1.0 - cosTheta), expSky);\n  return horizon * exponent + zenit * (1.0 -  exponent);\n}\nvec3 getSeaColor(in vec3 n, in vec3 v, in vec3 l, vec3 color,  in vec3 localUp, in float shadow) {\n  vec3 seaWaterColor \x3d pow(color.rgb, vec3(2.2));\n  vec3 h \x3d normalize(l + v);\n  shadingInfo.NdotL \x3d clamp(dot(n, l), 0.0, 1.0);\n  shadingInfo.NdotV \x3d clamp(dot(n, v), 0.001, 1.0);\n  shadingInfo.VdotN \x3d clamp(dot(v, n), 0.001, 1.0);\n  shadingInfo.NdotH \x3d clamp(dot(n, h), 0.0, 1.0);\n  shadingInfo.VdotH \x3d clamp(dot(v, h), 0.0, 1.0);\n  shadingInfo.LdotH \x3d clamp(dot(l, h), 0.0, 1.0);\n  float upDotV \x3d max(dot(localUp,v), 0.0);\n  vec3 skyHorizon \x3d  pow(skyColor, vec3(2.2));\n  vec3 skyZenit \x3d  pow(skyZenitColor, vec3(2.2));\n  vec3 reflectedSkyColor \x3d getSkyColor(upDotV, skyHorizon, skyZenit );\n  float upDotL \x3d max(dot(localUp,l),0.0);\n  reflectedSkyColor *\x3d 0.1 + upDotL * 0.9;\n  float shadowModifier \x3d clamp(shadow, 0.8, 1.0);\n  vec3 reflSky \x3d fresnelReflection(shadingInfo.VdotN, vec3(f0Sky), f0maxSky) * reflectedSkyColor * shadowModifier;\n  vec3 reflSea \x3d seaWaterColor * mix(reflectedSkyColor, upDotL * lightIntensity, 2.0 / 3.0) * shadowModifier;\n  vec3 specular \x3d vec3(0.0);\n  if(upDotV \x3e 0.0 \x26\x26 upDotL \x3e 0.0) {\n    vec3 specularSun \x3d calculateSpecularReflectanceWater(shadingInfo, roughness, vec3(0.02), f0maxSpec);\n    vec3 incidentLight \x3d lightIntensity * shadow;\n    specular \x3d shadingInfo.NdotL * incidentLight * specularSun;\n  }\n  return tonemapACES(reflSky + reflSea + specular);\n}"}},
misc:{"blendLayers.frag":"#include \x3cutil/fsPrecision.glsl\x3e\nvarying vec2 uv;\nuniform sampler2D tex;\nuniform float opacity;\nvoid main() {\n  vec4 color \x3d texture2D(tex, uv);\n  gl_FragColor \x3d vec4(color.xyz, 1.0) * color.a * opacity;\n}","blendLayers.vert":"#include \x3cutil/vsPrecision.glsl\x3e\nattribute vec3 position;\nattribute vec2 uv0;\nuniform float scale;\nuniform vec2 offset;\nvarying vec2 uv;\nvoid main(void) {\n  gl_Position \x3d vec4(position, 1.0);\n  uv \x3d uv0 * scale + offset;;\n}",
"texOnly.frag":"#include \x3cutil/fsPrecision.glsl\x3e\nuniform sampler2D tex;\nuniform vec4 color;\nvarying vec2 vtc;\nvoid main() {\n  vec4 texColor \x3d texture2D(tex, vtc);\n  gl_FragColor \x3d texColor * color;\n}","texOnly.vert":"#include \x3cutil/vsPrecision.glsl\x3e\nattribute vec3 position;\nattribute vec2 uv0;\nvarying vec2 vtc;\nvoid main(void) {\n  gl_Position \x3d vec4(position, 1.0);\n  vtc \x3d uv0;\n}"},pointRenderer:{"pointRenderer.frag":"#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/encoding.glsl\x3e\n#ifdef DEPTH_PASS\nvarying float depth;\n#else\nvarying vec3 vColor;\n#endif\nvoid main(void) {\n  vec2 vOffset \x3d gl_PointCoord - vec2(0.5, 0.5);\n  float r2 \x3d dot(vOffset, vOffset);\n  if (r2 \x3e 0.25) {\n    discard;\n  }\n#ifdef DEPTH_PASS\n  gl_FragColor \x3d float2rgba(depth);\n#else\n  gl_FragColor \x3d vec4(vColor, 1.0);\n#endif\n}",
"pointRenderer.vert":"#include \x3cutil/slice.glsl\x3e\n#include \x3cutil/vsPrecision.glsl\x3e\nattribute vec3 aPosition;\nattribute vec3 aColor;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform vec2 uScreenMinMaxSize;\nuniform vec2 uPointScale;\nuniform vec3 uClipMin;\nuniform vec3 uClipMax;\n#ifdef DEPTH_PASS\nuniform vec2 nearFar;\nvarying float depth;\n#else\nvarying vec3 vColor;\n#endif\nvoid main(void) {\n  if (aPosition.x \x3c uClipMin.x || aPosition.y \x3c uClipMin.y || aPosition.z \x3c uClipMin.z ||\n      aPosition.x \x3e uClipMax.x || aPosition.y \x3e uClipMax.y || aPosition.z \x3e uClipMax.z) {\n    gl_Position \x3d vec4(0.0,0.0,0.0,2.0);\n    gl_PointSize \x3d 0.0;\n    return;\n  }\n  if (rejectBySlice(aPosition)) {\n    gl_Position \x3d vec4(0.0,0.0,0.0,2.0);\n    gl_PointSize \x3d 0.0;\n    return;\n  }\n  vec4 camera \x3d uModelViewMatrix * vec4(aPosition, 1.0);\n  float pointSize \x3d uPointScale.x;\n  vec4 position \x3d uProjectionMatrix * camera;\n#ifdef DRAW_SCREEN_SIZE\n    float clampedScreenSize \x3d pointSize;\n#else\n    float pointRadius \x3d 0.5 * pointSize;\n    vec4 cameraOffset \x3d camera + vec4(0.0, pointRadius, 0.0, 0.0);\n    vec4 positionOffset \x3d uProjectionMatrix * cameraOffset;\n    float radius \x3d abs(positionOffset.y - position.y);\n    float viewHeight \x3d uPointScale.y;\n    float screenPointSize \x3d (radius / position.w) * viewHeight;\n    float clampedScreenSize \x3d clamp(screenPointSize, uScreenMinMaxSize.x, uScreenMinMaxSize.y);\n    camera.xyz -\x3d normalize(camera.xyz) * pointRadius * clampedScreenSize / screenPointSize;\n    position \x3d uProjectionMatrix * camera;\n#endif\n  gl_PointSize \x3d clampedScreenSize;\n  gl_Position \x3d position;\n#ifdef DEPTH_PASS\n  depth \x3d (-camera.z - nearFar[0]) / (nearFar[1] - nearFar[0]);\n#else\n  vColor \x3d aColor;\n#endif\n}"},
renderer:{highlight:{"apply.frag":"#include \x3cutil/fsPrecision.glsl\x3e\nuniform sampler2D tex;\nuniform sampler2D origin;\nuniform vec4 color;\nuniform float outlineSize;\nuniform float blurSize;\nuniform vec4 opacities;\nvarying vec2 uv;\nvoid main() {\n  #if defined(GRID_OPTIMIZATION) \x26\x26 defined(GRID_DEBUG)\n    gl_FragColor \x3d vec4(uv, 0.0, 1.0);\n  #else\n    vec4 blurredHighlightValue \x3d texture2D(tex, uv);\n    float highlightIntensity \x3d blurredHighlightValue.a;\n    if (highlightIntensity \x3d\x3d 0.0) {\n      discard;\n    }\n    vec4 origin_color \x3d texture2D(origin, uv);\n    float outlineIntensity;\n    float fillIntensity;\n    if (blurredHighlightValue.g \x3e blurredHighlightValue.b) {\n      outlineIntensity \x3d color.w * opacities[1];\n      fillIntensity \x3d color.w * opacities[3];\n    }\n    else {\n      outlineIntensity \x3d color.w * opacities[0];\n      fillIntensity \x3d color.w * opacities[2];\n    }\n    float inner \x3d 1.0 - outlineSize / 9.0;\n    float outer \x3d 1.0 - (outlineSize + blurSize) / 9.0;\n    float outlineFactor \x3d smoothstep(outer, inner, highlightIntensity);\n    float fillFactor \x3d any(notEqual(origin_color, vec4(0.0, 0.0, 0.0, 0.0))) ? 1.0 : 0.0;\n    float intensity \x3d outlineIntensity * outlineFactor * (1.0 - fillFactor) + fillIntensity * fillFactor;\n    gl_FragColor \x3d vec4(color.xyz, intensity);\n  #endif\n}",
"apply.vert":"#include \x3cutil/vsPrecision.glsl\x3e\nattribute vec2 position;\nvarying vec2 uv;\n#ifdef GRID_OPTIMIZATION\n  attribute vec2 uv0;\n  uniform sampler2D coverageTex;\n#endif\nvoid main() {\n  #ifdef GRID_OPTIMIZATION\n    #ifdef GRID_DEBUG\n      vec4 cov \x3d texture2D(coverageTex, uv0);\n      if (cov.r \x3d\x3d 0.0 || cov.g \x3d\x3d 1.0 || cov.b \x3d\x3d 1.0) {\n        gl_Position \x3d vec4(0.0);\n        return;\n      }\n      gl_Position \x3d vec4(position, .0, 1.0);\n      uv \x3d uv0;\n      return;\n    #else\n      vec4 cov \x3d texture2D(coverageTex, uv0);\n      if (cov.r \x3d\x3d 0.0) {\n        gl_Position \x3d vec4(0.0);\n        return;\n      }\n    #endif\n  #endif\n  gl_Position \x3d vec4(position, .0, 1.0);\n  uv \x3d position.xy * .5 + vec2(.5);\n}",
"blur.frag":"#include \x3cutil/fsPrecision.glsl\x3e\nuniform sampler2D tex;\n#ifdef GRID_OPTIMIZATION\n  uniform vec2 blurSize;\n  varying vec3 blurCoordinate;\n#else\n  varying vec2 blurCoordinates[GAUSSIAN_SAMPLES];\n#endif\nvoid main() {\n  #ifdef GRID_OPTIMIZATION\n    vec2 uv \x3d blurCoordinate.xy;\n    vec4 center \x3d texture2D(tex, uv);\n    if (blurCoordinate.z \x3d\x3d 1.0) {\n      gl_FragColor \x3d center;\n    }\n    else {\n      vec4 sum \x3d vec4(0.0);\n      #if GAUSSIAN_SAMPLES \x3d\x3d 3\n        sum +\x3d center * 0.204164;\n        sum +\x3d texture2D(tex, uv + blurSize * 1.407333) * 0.304005;\n        sum +\x3d texture2D(tex, uv - blurSize * 1.407333) * 0.304005;\n      #elif GAUSSIAN_SAMPLES \x3d\x3d 5\n        sum +\x3d center * 0.204164;\n        sum +\x3d texture2D(tex, uv + blurSize * 1.407333) * 0.304005;\n        sum +\x3d texture2D(tex, uv - blurSize * 1.407333) * 0.304005;\n        sum +\x3d texture2D(tex, uv + blurSize * 3.294215) * 0.093913;\n        sum +\x3d texture2D(tex, uv - blurSize * 3.294215) * 0.093913;\n      #elif GAUSSIAN_SAMPLES \x3d\x3d 7\n        sum +\x3d center * 0.204164;\n        sum +\x3d texture2D(tex, uv + blurSize * 1.407333) * 0.304005;\n        sum +\x3d texture2D(tex, uv - blurSize * 1.407333) * 0.304005;\n        sum +\x3d texture2D(tex, uv + blurSize * 3.294215) * 0.093913;\n        sum +\x3d texture2D(tex, uv - blurSize * 3.294215) * 0.093913;\n        sum +\x3d texture2D(tex, uv + blurSize * 5.1) * 0.03;\n        sum +\x3d texture2D(tex, uv - blurSize * 5.1) * 0.03;\n      #elif GAUSSIAN_SAMPLES \x3d\x3d 9\n        sum +\x3d center * 0.154164;\n        sum +\x3d texture2D(tex, uv + blurSize * 1.5) * 0.204005;\n        sum +\x3d texture2D(tex, uv - blurSize * 1.5) * 0.204005;\n        sum +\x3d texture2D(tex, uv + blurSize * 3.5) * 0.123913;\n        sum +\x3d texture2D(tex, uv - blurSize * 3.5) * 0.123913;\n        sum +\x3d texture2D(tex, uv + blurSize * 5.5) * 0.123913;\n        sum +\x3d texture2D(tex, uv - blurSize * 5.5) * 0.123913;\n        sum +\x3d texture2D(tex, uv + blurSize * 7.5) * 0.05;\n        sum +\x3d texture2D(tex, uv - blurSize * 7.5) * 0.05;\n      #endif\n      gl_FragColor \x3d sum;\n    }\n  #else\n    vec4 sum \x3d vec4(0.0);\n    #if GAUSSIAN_SAMPLES \x3d\x3d 3\n      sum +\x3d texture2D(tex, blurCoordinates[0]) * 0.204164;\n      sum +\x3d texture2D(tex, blurCoordinates[1]) * 0.304005;\n      sum +\x3d texture2D(tex, blurCoordinates[2]) * 0.304005;\n    #elif GAUSSIAN_SAMPLES \x3d\x3d 5\n      sum +\x3d texture2D(tex, blurCoordinates[0]) * 0.204164;\n      sum +\x3d texture2D(tex, blurCoordinates[1]) * 0.304005;\n      sum +\x3d texture2D(tex, blurCoordinates[2]) * 0.304005;\n      sum +\x3d texture2D(tex, blurCoordinates[3]) * 0.093913;\n      sum +\x3d texture2D(tex, blurCoordinates[4]) * 0.093913;\n    #elif GAUSSIAN_SAMPLES \x3d\x3d 7\n      sum +\x3d texture2D(tex, blurCoordinates[0]) * 0.204164;\n      sum +\x3d texture2D(tex, blurCoordinates[1]) * 0.304005;\n      sum +\x3d texture2D(tex, blurCoordinates[2]) * 0.304005;\n      sum +\x3d texture2D(tex, blurCoordinates[3]) * 0.093913;\n      sum +\x3d texture2D(tex, blurCoordinates[4]) * 0.093913;\n      sum +\x3d texture2D(tex, blurCoordinates[5]) * 0.03;\n      sum +\x3d texture2D(tex, blurCoordinates[6]) * 0.03;\n    #elif GAUSSIAN_SAMPLES \x3d\x3d 9\n      sum +\x3d texture2D(tex, blurCoordinates[0]) * 0.154164;\n      sum +\x3d texture2D(tex, blurCoordinates[1]) * 0.204005;\n      sum +\x3d texture2D(tex, blurCoordinates[2]) * 0.204005;\n      sum +\x3d texture2D(tex, blurCoordinates[3]) * 0.123913;\n      sum +\x3d texture2D(tex, blurCoordinates[4]) * 0.123913;\n      sum +\x3d texture2D(tex, blurCoordinates[5]) * 0.09;\n      sum +\x3d texture2D(tex, blurCoordinates[6]) * 0.09;\n      sum +\x3d texture2D(tex, blurCoordinates[7]) * 0.05;\n      sum +\x3d texture2D(tex, blurCoordinates[8]) * 0.05;\n    #endif\n    gl_FragColor \x3d sum;\n  #endif\n}",
"blur.vert":"#include \x3cutil/vsPrecision.glsl\x3e\nattribute vec2 position;\nattribute vec2 uv0;\n#ifdef GRID_OPTIMIZATION\n  uniform sampler2D coverageTex;\n  varying vec3 blurCoordinate;\n#else\n  uniform vec2 blurSize;\n  varying vec2 blurCoordinates[GAUSSIAN_SAMPLES];\n#endif\nvoid main() {\n  gl_Position \x3d vec4(position, 0.0, 1.0);\n  #ifdef GRID_OPTIMIZATION\n    vec4 cov \x3d texture2D(coverageTex, uv0);\n    if (cov.r \x3d\x3d 0.0) {\n      gl_Position \x3d vec4(0.0);\n    }\n    blurCoordinate \x3d vec3(gl_Position.xy * .5 + vec2(.5), max(cov.g, cov.b));\n  #else\n    vec2 uv \x3d position.xy * .5 + vec2(.5);\n    #if GAUSSIAN_SAMPLES \x3d\x3d 3\n      blurCoordinates[0] \x3d uv;\n      blurCoordinates[1] \x3d uv + blurSize * 1.407333;\n      blurCoordinates[2] \x3d uv - blurSize * 1.407333;\n    #elif GAUSSIAN_SAMPLES \x3d\x3d 5\n      blurCoordinates[0] \x3d uv;\n      blurCoordinates[1] \x3d uv + blurSize * 1.407333;\n      blurCoordinates[2] \x3d uv - blurSize * 1.407333;\n      blurCoordinates[3] \x3d uv + blurSize * 3.294215;\n      blurCoordinates[4] \x3d uv - blurSize * 3.294215;\n    #elif GAUSSIAN_SAMPLES \x3d\x3d 7\n      blurCoordinates[0] \x3d uv;\n      blurCoordinates[1] \x3d uv + blurSize * 1.407333;\n      blurCoordinates[2] \x3d uv - blurSize * 1.407333;\n      blurCoordinates[3] \x3d uv + blurSize * 3.294215;\n      blurCoordinates[4] \x3d uv - blurSize * 3.294215;\n      blurCoordinates[5] \x3d uv + blurSize * 5.1;\n      blurCoordinates[6] \x3d uv - blurSize * 5.1;\n    #elif GAUSSIAN_SAMPLES \x3d\x3d 9\n      blurCoordinates[0] \x3d uv;\n      blurCoordinates[1] \x3d uv + blurSize * 1.407333;\n      blurCoordinates[2] \x3d uv - blurSize * 1.407333;\n      blurCoordinates[3] \x3d uv + blurSize * 3.294215;\n      blurCoordinates[4] \x3d uv - blurSize * 3.294215;\n      blurCoordinates[5] \x3d uv + blurSize * 5.1;\n      blurCoordinates[6] \x3d uv - blurSize * 5.1;\n      blurCoordinates[7] \x3d uv + blurSize * 7.1;\n      blurCoordinates[8] \x3d uv - blurSize * 7.1;\n    #endif\n  #endif\n}",
"downsample.frag":"#include \x3cutil/fsPrecision.glsl\x3e\nuniform sampler2D tex;\nuniform vec2 invFramebufferDim;\nvoid main() {\n  vec2 coord \x3d gl_FragCoord.xy * invFramebufferDim;\n  vec4 value \x3d texture2D(tex, coord);\n  float mx \x3d floor(max(value.g, value.b));\n  gl_FragColor \x3d vec4(ceil(value.r), mx, mx, 1.0);\n}","downsample.vert":"#include \x3cutil/vsPrecision.glsl\x3e\nattribute vec2 position;\nvoid main() {\n  gl_Position \x3d vec4(vec2(1.0) - position * 2.0, .0, 1.0);\n}"},
laserLine:{"laserLine.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/depth.glsl\x3e\nuniform sampler2D depthMap;\nuniform vec2 nearFar;\nuniform vec4 projInfo;\nuniform vec2 zScale;\nuniform float maxPixelDistance;\nuniform vec4 focusPlane;\nuniform vec4 focusSphere;\nuniform vec4 segmentPlane;\nuniform vec3 segmentStart;\nuniform vec3 segmentEnd;\nuniform vec3 glowColor;\nuniform float glowWidth;\nuniform vec3 innerColor;\nuniform float innerWidth;\nuniform float globalAlpha;\nvarying vec2 uv;\n#define INFINITY 100000.0\nvec3 reconstructPosition(vec2 fragCoord, float depth) {\n  return vec3((fragCoord * projInfo.xy + projInfo.zw) * (zScale.x * depth + zScale.y), depth);\n}\nfloat planeDistancePixels(vec4 plane, vec3 pos) {\n  float dist \x3d dot(plane.xyz, pos) + plane.w;\n  float width \x3d fwidth(dist);\n  dist /\x3d min(width, maxPixelDistance);\n  return abs(dist);\n}\nfloat sphereDistancePixels(vec4 sphere, vec3 pos) {\n  float dist \x3d distance(sphere.xyz, pos) - sphere.w;\n  float width \x3d fwidth(dist);\n  dist /\x3d min(width, maxPixelDistance);\n  return abs(dist);\n}\nvec4 blendPremultiplied(vec4 source, vec4 dest) {\n  float oneMinusSourceAlpha \x3d 1.0 - source.a;\n  return vec4(\n    source.rgb + dest.rgb * oneMinusSourceAlpha,\n    source.a + dest.a * oneMinusSourceAlpha\n  );\n}\nvec4 premultipliedColor(vec3 rgb, float alpha) {\n  return vec4(rgb * alpha, alpha);\n}\nvec4 laserLineProfile(float dist) {\n  if (dist \x3e glowWidth) {\n    return vec4(0.0);\n  }\n  float innerAlpha \x3d (1.0 - smoothstep(0.0, innerWidth, dist));\n  float glowAlpha \x3d pow(max(0.0, 1.0 - dist / glowWidth), 8.0);\n  return blendPremultiplied(\n    premultipliedColor(innerColor, innerAlpha),\n    premultipliedColor(glowColor, glowAlpha)\n  );\n}\nvoid main() {\n  float depth \x3d linearDepth(depthMap, uv, nearFar);\n  if (-depth \x3d\x3d nearFar[0]) {\n    discard;\n  }\n  vec3 pos \x3d reconstructPosition(gl_FragCoord.xy, depth);\n  float ddepth \x3d fwidth(depth);\n  float depthDiscontinuityAlpha \x3d 1.0 - smoothstep(0.0, 0.01, -ddepth / depth);\n  vec3 normal \x3d normalize(cross(dFdx(pos), dFdy(pos)));\n  float focusPlaneDistance \x3d planeDistancePixels(focusPlane, pos);\n  float focusSphereDistance \x3d sphereDistancePixels(focusSphere, pos);\n  float segmentDistance \x3d INFINITY;\n  float segmentLength \x3d length(segmentEnd - segmentStart);\n  vec3 segmentDir \x3d (segmentEnd - segmentStart) / segmentLength;\n  float t \x3d dot(segmentDir, pos - segmentStart);\n  if (segmentLength \x3e 0.0 \x26\x26 t \x3e\x3d 0.0 \x26\x26 t \x3c\x3d segmentLength) {\n    segmentDistance \x3d planeDistancePixels(segmentPlane, pos);\n  }\n  vec4 focusPlaneColor \x3d laserLineProfile(focusPlaneDistance);\n  vec4 focusSphereColor \x3d laserLineProfile(focusSphereDistance);\n  vec4 segmentColor \x3d laserLineProfile(segmentDistance);\n  float focusPlaneAlpha \x3d 1.0 - smoothstep(0.995, 0.999, abs(dot(normal, focusPlane.xyz)));\n  float focusSphereAlpha \x3d 1.0 - smoothstep(0.995, 0.999, abs(dot(normal, normalize(pos - focusSphere.xyz))));\n  float segmentAlpha \x3d 1.0 - smoothstep(0.995, 0.999, abs(dot(normal, segmentPlane.xyz)));\n  vec4 color \x3d max(\n    focusPlaneColor * focusPlaneAlpha,\n    max(\n      focusSphereColor * focusSphereAlpha,\n      segmentColor * segmentAlpha\n    )\n  );\n  gl_FragColor \x3d color * globalAlpha * depthDiscontinuityAlpha;\n}"},
offscreen:{"composite.frag":"#include \x3cutil/fsPrecision.glsl\x3e\nuniform sampler2D tex;\nvarying vec2 vtc;\nvoid main() {\n  gl_FragColor \x3d texture2D(tex, vtc);\n}","compositeOccluded.frag":"#include \x3cutil/fsPrecision.glsl\x3e\nuniform sampler2D occludedColorMap;\nuniform float opacity;\nvarying vec2 vtc;\nvoid main() {\n  vec4 occludedColor \x3d texture2D(occludedColorMap, vtc);\n  gl_FragColor \x3d occludedColor * opacity;\n}","compositeTransparentToHUDVisibility.frag":"#include \x3cutil/fsPrecision.glsl\x3e\nuniform sampler2D tex;\nvarying vec2 vtc;\nvoid main() {\n  gl_FragColor \x3d vec4(1.0 - texture2D(tex, vtc).a);\n}",
"offscreen.vert":"#include \x3cutil/vsPrecision.glsl\x3e\nattribute vec2 position;\nvarying vec2 vtc;\nvoid main(void) {\n  gl_Position \x3d vec4(position.xy, 0.0, 1.0);\n  vtc \x3d position.xy * 0.5 + 0.5;\n}"},ssao:{"blur.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/depth.glsl\x3e\n#ifndef RADIUS\n#define RADIUS 4\n#endif\nuniform sampler2D normalMap;\nuniform sampler2D depthMap;\nuniform sampler2D tex;\nuniform vec2 blurSize;\nuniform float g_BlurFalloff;\nuniform float projScale;\nuniform vec2 nearFar;\nuniform vec2 zScale;\nvarying vec2 uv;\nfloat BlurFunction(vec2 uv, float r, float center_d, inout float w_total, float sharpness) {\n  float c \x3d texture2D(tex, uv).r;\n  float d \x3d linearDepth(depthMap, uv, nearFar);\n  float ddiff \x3d d - center_d;\n  float w \x3d exp(-r*r*g_BlurFalloff - ddiff*ddiff*sharpness);\n  w_total +\x3d w;\n  return w*c;\n}\nvoid main(void) {\n  float b \x3d 0.0;\n  float w_total \x3d 0.0;\n  float center_d \x3d linearDepth(depthMap, uv, nearFar);\n  float sharpness \x3d -0.05 * projScale/(center_d*zScale.x+zScale.y);\n  for (int r \x3d -RADIUS; r \x3c\x3d RADIUS; ++r) {\n    float rf \x3d float(r);\n    vec2 uvOffset \x3d uv + rf*blurSize;\n    b +\x3d BlurFunction(uvOffset, rf, center_d, w_total, sharpness);\n  }\n  gl_FragColor \x3d vec4(b/w_total);\n}",
"ssao.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/depth.glsl\x3e\n#ifndef SAMPLES\n#define SAMPLES 4\n#endif\nuniform mat4 projMatrixInv;\nuniform sampler2D normalMap;\nuniform sampler2D depthMap;\nuniform float intensity;\nuniform float projScale;\nuniform float radius;\nuniform vec2 nearFar;\nuniform vec4 projInfo;\nuniform vec2 screenDimensions;\nuniform vec3 pSphere[SAMPLES];\nuniform vec2 rnmScale;\nuniform sampler2D rnm;\nuniform vec2 zScale;\nvarying vec2  uv;\nvarying vec4  camPos;\nfloat fallOffFunction(float vv, float vn, float bias) {\n  float radius2 \x3d radius * radius;\n  float f \x3d max(radius2 - vv, 0.0); return f * f * f * max(vn-bias, 0.0);\n}\nfloat aoValueFromPositionsAndNormal(vec3 C, vec3 n_C, vec3 Q) {\n  vec3 v \x3d Q - C;\n  float vv \x3d dot(v, v);\n  float vn \x3d dot(normalize(v), n_C);\n  return fallOffFunction(vv, vn, 0.1);\n}\nvec3 reconstructCSPosition(vec2 S, float z) {\n  return vec3(( (S.xy) * projInfo.xy + projInfo.zw)*(z*zScale.x+zScale.y), z);\n}\nvoid main(void) {\n  vec3 fres \x3d normalize((texture2D(rnm, uv * rnmScale).xyz * 2.0) - vec3(1.0));\n  float currentPixelDepth \x3d linearDepth(depthMap, uv, nearFar);\n  if (-currentPixelDepth\x3enearFar.y || -currentPixelDepth\x3cnearFar.x) {\n    gl_FragColor \x3d vec4(0.0);\n    return;\n  }\n  vec3 currentPixelPos \x3d reconstructCSPosition(gl_FragCoord.xy,currentPixelDepth);\n  vec4 norm4 \x3d texture2D(normalMap, uv);\n  vec3 norm \x3d vec3(-1.0) + 2.0 * norm4.xyz;\n  bool isTerrain \x3d norm4.w\x3c0.5;\n  float sum \x3d .0;\n  vec4 occluderFragment;\n  vec3 ray;\n  vec3 tapPixelPos;\n  float ps \x3d projScale/(2.0*currentPixelPos.z*zScale.x+zScale.y);\n  for(int i \x3d 0; i \x3c SAMPLES; ++i) {\n    vec2 unitOffset \x3d reflect(pSphere[i], fres).xy;\n    vec2 offset \x3d vec2(-unitOffset*radius*ps);\n    if ( abs(offset.x)\x3c2.0 || abs(offset.y)\x3c2.0) continue;\n    vec2 tc \x3d vec2(gl_FragCoord.xy + offset);\n    if (tc.x \x3c 0.0 || tc.y \x3c 0.0 || tc.x \x3e screenDimensions.x || tc.y \x3e screenDimensions.y) continue;\n    vec2 tcTap \x3d tc/screenDimensions;\n    float occluderFragmentDepth \x3d linearDepth(depthMap, tcTap, nearFar);\n    if (isTerrain) {\n      bool isTerrainTap \x3d texture2D(normalMap, tcTap).w\x3c0.5;\n      if (isTerrainTap) {\n        continue;\n      }\n    }\n    tapPixelPos \x3d reconstructCSPosition(tc, occluderFragmentDepth);\n    sum+\x3d aoValueFromPositionsAndNormal(currentPixelPos, norm, tapPixelPos);\n  }\n  float A \x3d max(1.0-sum*intensity/float(SAMPLES),0.0);\n  A \x3d (pow(A, 0.2) + 1.2 * A*A*A*A) / 2.2;\n  gl_FragColor \x3d vec4(A);\n}"}},
terrainRenderer:{"colorPass.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/sceneLighting.glsl\x3e\n#include \x3cutil/screenSizePerspective.glsl\x3e\n#include \x3cutil/shadow.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\n#include \x3cterrainRenderer/overlay.glsl\x3e\nuniform vec3 camPos;\nuniform vec3 lightDirection;\nuniform vec3 viewDirection;\nuniform sampler2D depthTex;\nuniform int shadowMapNum;\nuniform vec4 shadowMapDistance;\nuniform mat4 shadowMapMatrix[4];\nuniform float depthHalfPixelSz;\nuniform sampler2D ssaoTex;\nuniform vec4 viewportPixelSz;\nuniform sampler2D tex;\nuniform float opacity;\n#if defined(WIREFRAME_TEXTURE) || defined(TILE_BORDERS)\nstruct WireframeSettings {\n  float width;\n  float falloff;\n  float subdivision;\n  vec4 color;\n  float wireOpacity;\n  float surfaceOpacity;\n};\nuniform WireframeSettings wireframe;\n#endif\nvarying vec3 vnormal;\nvarying vec3 vpos;\nvarying vec2 vtc;\n#if defined(WIREFRAME_TEXTURE) || defined(TILE_BORDERS)\nvarying vec2 vuv;\n#endif\n#ifdef ATMOSPHERE\nvarying vec3 wnormal;\nvarying vec3 wlight;\n#endif\n#ifdef SCREEN_SIZE_PERSPECTIVE\nuniform vec4 screenSizePerspective;\nvarying float screenSizeDistanceToCamera;\nvarying float screenSizeCosAngle;\n#endif\nconst vec3 ambient \x3d vec3(0.2,0.2,0.2);\nconst vec3 diffuse \x3d vec3(0.8,0.8,0.8);\nconst float diffuseHardness \x3d 2.5;\nconst float sliceOpacity \x3d 0.2;\n#ifdef OVERLAY\nuniform sampler2D ovInnerColorTex;\nuniform sampler2D ovOuterColorTex;\nuniform sampler2D ovInnerWaterTex;\nuniform sampler2D ovOuterWaterTex;\nuniform float overlayOpacity;\nvarying vec4 vtcOverlay;\nvarying vec3 tbnTangent;\nvarying vec3 tbnBiTangent;\n#endif\n#ifdef RECEIVE_SHADOWS\nvarying float linearDepth;\n#endif\nfloat lum(vec3 c) {\n  float max \x3d max(max(c.r, c.g), c.b);\n  float min \x3d min(min(c.r, c.g), c.b);\n  return (min + max) * 0.5;\n}\n#ifdef ATMOSPHERE\nvec3 atmosphere(vec3 lightPos, vec3 normal, vec3 view) {\n  vec3 surfaceColor   \x3d vec3(0.0);\n  vec3 fuzzySpecColor \x3d vec3(1.0);\n  vec3 subColor       \x3d vec3(0.0);\n  float rollOff       \x3d 1.0;\n  vec3 Ln \x3d normalize(lightPos);\n  vec3 Nn \x3d normalize(normal);\n  vec3 Hn \x3d normalize(view + Ln);\n  float ldn \x3d dot(Ln, Nn);\n  float diffComp \x3d max(0.0, ldn);\n  float vdn \x3d clamp(1.0 - dot(view, Nn), 0.0, 1.0);\n  float ndv \x3d dot(view, Ln);\n  vec3 diffContrib \x3d surfaceColor * diffComp;\n  float subLamb \x3d max(0.0, smoothstep(-rollOff, 1.0, ldn) - smoothstep(0.0, 1.0, ldn));\n  vec3 subContrib \x3d subLamb * subColor;\n  vec3 vecColor \x3d vec3(vdn);\n  vec3 diffuseContrib \x3d (subContrib + diffContrib);\n  vec3 specularContrib \x3d (vecColor * fuzzySpecColor);\n  return (diffContrib + specularContrib) * rollOff;\n}\n#endif\nconst float GAMMA_EXP \x3d 0.4545454545;\nvoid main() {\n  vec3 a \x3d ambient;\n  float shadow \x3d 0.0;\n#ifdef RECEIVE_SHADOWS\n  shadow \x3d evalShadow(vpos, linearDepth, depthTex, shadowMapNum, shadowMapDistance, shadowMapMatrix, depthHalfPixelSz);\n#endif\n  float vndl \x3d dot(normalize(vnormal), lightDirection);\n  float k \x3d smoothstep(0.0, 1.0, clamp(vndl*diffuseHardness, 0.0, 1.0));\n  vec3 d \x3d (1.0 - shadow/1.8) * diffuse * k;\n  float ssao \x3d viewportPixelSz.w \x3c .0 ? 1.0 : texture2D(ssaoTex, (gl_FragCoord.xy - viewportPixelSz.xy) * viewportPixelSz.zw).a;\n  vec4 tileColor \x3d texture2D(tex, vtc) * opacity;\n#ifdef OVERLAY\n  vec4 overlayColor  \x3d overlayOpacity * getOverlayColor(ovInnerColorTex, ovOuterColorTex, vtcOverlay);\n  tileColor \x3d tileColor * (1.0 - overlayColor.a) + overlayColor;\n#endif\n  if (rejectBySlice(vpos)) {\n    tileColor *\x3d sliceOpacity;\n  }\n  vec3 atm \x3d vec3(0.0);\n#ifdef ATMOSPHERE\n  float ndotl \x3d max(0.0, min(1.0, vndl));\n  atm \x3d atmosphere(wlight, wnormal, -viewDirection);\n  atm *\x3d max(0.0, min(1.0, (1.0-lum(tileColor.rgb)*1.5)));\n  atm *\x3d max(0.0, min(1.0, ndotl*2.0));\n  atm *\x3d tileColor.a;\n#endif\n  vec3 albedo \x3d atm + tileColor.rgb;\n  vec3 normal \x3d normalize(vnormal);\n  float additionalAmbientScale \x3d smoothstep(0.0, 1.0, clamp(vndl*2.5, 0.0, 1.0));\n  vec3 additionalLight \x3d ssao * lightingMainIntensity * additionalAmbientScale * ambientBoostFactor * lightingGlobalFactor;\n  gl_FragColor \x3d vec4(evaluateSceneLighting(normal, albedo, shadow, 1.0 - ssao, additionalLight), tileColor.a);\n#ifdef OVERLAY\n  vec4 overlayWaterMask \x3d getOverlayColor(ovInnerWaterTex, ovOuterWaterTex, vtcOverlay);\n  float waterNormalLength \x3d length(overlayWaterMask);\n  if (waterNormalLength \x3e 0.95) {\n    mat3 tbnMatrix \x3d mat3(tbnTangent, tbnBiTangent, vnormal);\n    vec4 waterColor \x3d overlayOpacity * getOverlayWaterColor(tileColor, overlayWaterMask, overlayColor, vpos, shadow, vnormal, camPos, tbnMatrix);\n    vec4 groundColor \x3d vec4(pow(gl_FragColor.rgb, vec3(2.2)), gl_FragColor.w);\n    waterColor \x3d mix(groundColor, waterColor, waterColor.a);\n    gl_FragColor \x3d vec4(pow(waterColor.rgb, vec3( GAMMA_EXP )), waterColor.a);\n  }\n#endif\n#ifdef SCREEN_SIZE_PERSPECTIVE\n  float perspectiveScale \x3d screenSizePerspectiveScaleFloat(1.0, screenSizeCosAngle, screenSizeDistanceToCamera, screenSizePerspective);\n  if (perspectiveScale \x3c\x3d 0.25) {\n    gl_FragColor \x3d mix(gl_FragColor, vec4(1.0, 0.0, 0.0, 1.0), perspectiveScale * 4.0);\n  }\n  else if (perspectiveScale \x3c\x3d 0.5) {\n    gl_FragColor \x3d mix(gl_FragColor, vec4(0.0, 0.0, 1.0, 1.0), (perspectiveScale - 0.25) * 4.0);\n  }\n  else if (perspectiveScale \x3e\x3d 0.99) {\n    gl_FragColor \x3d mix(gl_FragColor, vec4(0.0, 1.0, 0.0, 1.0), 0.2);\n  }\n  else {\n    gl_FragColor \x3d mix(gl_FragColor, vec4(1.0, 0.0, 1.0, 1.0), (perspectiveScale - 0.5) * 2.0);\n  }\n#endif\n#if defined(WIREFRAME_TEXTURE) || defined(TILE_BORDERS)\n  vec2 vuvScaled \x3d vuv * wireframe.subdivision;\n  vec2 vuvMod \x3d fract(vuvScaled);\n  vec2 dVuv \x3d fwidth(vuvScaled);\n  dVuv \x3d max(vec2(0.00001), dVuv);\n  vec2 edgeFactors \x3d smoothstep((wireframe.width - wireframe.falloff) * dVuv,\n                                wireframe.width * dVuv, min(vuvMod, 1.0 - vuvMod));\n  float edgeFactor \x3d 1.0 - min(edgeFactors.x, edgeFactors.y);\n#ifdef WIREFRAME_TEXTURE\n  vec3 wireframeColor \x3d mix(gl_FragColor.rgb, wireframe.color.rgb, edgeFactor * wireframe.color.a);\n  float wireframeAlpha \x3d mix(wireframe.surfaceOpacity, wireframe.wireOpacity, edgeFactor);\n  gl_FragColor \x3d vec4(wireframeColor * wireframeAlpha, wireframeAlpha * gl_FragColor.a);\n#endif\n#ifdef TILE_BORDERS\n  dVuv \x3d fwidth(vuv);\n  edgeFactors \x3d smoothstep((wireframe.width - wireframe.falloff) * dVuv,\n                            wireframe.width * dVuv, min(vuv, 1.0 - vuv));\n  edgeFactor \x3d 1.0 - min(edgeFactors.x, edgeFactors.y);\n  gl_FragColor \x3d mix(gl_FragColor, vec4(1.0, 0.0, 0.0, 1.0), edgeFactor);\n#endif\n#endif\n  gl_FragColor \x3d highlightSlice(gl_FragColor, vpos);\n}",
"colorPass.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cterrainRenderer/skirts.glsl\x3e\n#include \x3cmaterials/water/normalsUtils.glsl\x3e\nuniform mat4 proj;\nuniform mat4 view;\nuniform vec3 origin;\nuniform vec4 texOffsetAndScale;\nuniform mat4 viewNormal;\nuniform float skirtScale;\nattribute vec3 position;\nattribute vec2 uv0;\nvarying vec3 vnormal;\nvarying vec3 vpos;\nvarying vec2 vtc;\n#ifdef RECEIVE_SHADOWS\nvarying float linearDepth;\n#endif\n#if defined(WIREFRAME_TEXTURE) || defined(TILE_BORDERS)\nvarying vec2 vuv;\n#endif\n#ifdef ATMOSPHERE\nuniform vec3 lightDirection;\nvarying vec3 wnormal;\nvarying vec3 wlight;\n#endif\n#ifdef OVERLAY\nuniform vec4 overlayTexOffset;\nuniform vec4 overlayTexScale;\nvarying vec4 vtcOverlay;\nvarying vec3 tbnTangent;\nvarying vec3 tbnBiTangent;\n#endif\n#ifdef SCREEN_SIZE_PERSPECTIVE\nuniform vec4 screenSizePerspective;\nvarying float screenSizeDistanceToCamera;\nvarying float screenSizeCosAngle;\n#endif\nvoid main(void) {\n  vpos \x3d position;\n  vnormal \x3d getLocalUp(vpos, origin);\n  vec2 uv \x3d uv0;\n  vpos \x3d applySkirts(uv, vpos, vnormal, skirtScale);\n#ifdef ATMOSPHERE\n  wnormal \x3d (viewNormal * vec4(normalize(vpos+origin), 1.0)).xyz;\n  wlight \x3d (view  * vec4(lightDirection, 1.0)).xyz;\n#endif\n#if defined(WIREFRAME_TEXTURE) || defined(TILE_BORDERS)\n  vuv \x3d uv;\n#endif\n#ifdef SCREEN_SIZE_PERSPECTIVE\n  vec3 viewPos \x3d (view * vec4(vpos, 1.0)).xyz;\n  screenSizeDistanceToCamera \x3d length(viewPos);\n  vec3 viewSpaceNormal \x3d (viewNormal * vec4(normalize(vpos + origin), 1.0)).xyz;\n  screenSizeCosAngle \x3d abs(viewSpaceNormal.z);\n#endif\n  gl_Position \x3d proj * view * vec4(vpos, 1.0);\n#ifdef RECEIVE_SHADOWS\n  linearDepth \x3d gl_Position.w;\n#endif\n  vtc \x3d uv * texOffsetAndScale.zw + texOffsetAndScale.xy;\n#ifdef OVERLAY\n  vtcOverlay \x3d vec4(uv, uv) * overlayTexScale + overlayTexOffset;\n  #if VIEWING_MODE \x3d\x3d VIEWING_MODE_GLOBAL\n    tbnTangent \x3d normalize(cross(vec3(0.0, 0.0, 1.0), vnormal));\n    tbnBiTangent \x3d normalize(cross(vnormal, tbnTangent));\n  #else\n    tbnTangent \x3d vec3(1.0, 0.0, 0.0);\n    tbnBiTangent \x3d normalize(cross(vnormal, tbnTangent));\n  #endif\n#endif\n}",
"depthPass.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/encoding.glsl\x3e\n#include \x3cutil/depth.glsl\x3e\nvarying float depth;\nvarying vec3 vpos;\nvoid main() {\n#ifndef BIAS_SHADOWMAP\n  gl_FragColor \x3d float2rgba(depth);\n#else\n  gl_FragColor \x3d float2rgba(calcFragDepth(depth));\n#endif\n}","depthPass.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cterrainRenderer/skirts.glsl\x3e\nuniform vec3 origin;\nuniform mat4 proj;\nuniform mat4 view;\nuniform vec2 nearFar;\nuniform float skirtScale;\nattribute vec3 position;\nattribute vec2 uv0;\nvarying float depth;\nvarying vec3 vpos;\nvoid main(void) {\n#if VIEWING_MODE \x3d\x3d VIEWING_MODE_GLOBAL\n  vec3 normal \x3d normalize(position + origin);\n#else\n  vec3 normal \x3d vec3(0.0, 0.0, 1.0);\n#endif\n  vec2 uv \x3d uv0;\n  vpos \x3d applySkirts(uv, position, normal.xyz, skirtScale);\n  vec4 eye \x3d view * vec4(vpos, 1.0);\n  gl_Position \x3d proj * eye;\n  depth \x3d (-eye.z - nearFar[0]) / (nearFar[1] - nearFar[0]) ;\n}",
"highlightPass.frag":"#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/highlight.glsl\x3e\n#include \x3cterrainRenderer/overlay.glsl\x3e\nuniform sampler2D ovInnerColorTex;\nuniform sampler2D ovOuterColorTex;\nuniform float overlayOpacity;\nuniform sampler2D depthTex;\nuniform vec4 highlightViewportPixelSz;\nvarying vec4 vtcOverlay;\nvoid main() {\n  vec4 overlayColor \x3d getOverlayColor(ovInnerColorTex, ovOuterColorTex, vtcOverlay) * overlayOpacity;\n  if (overlayColor.a \x3d\x3d 0.0) {\n    gl_FragColor \x3d vec4(0.0);\n    return;\n  }\n  gl_FragColor \x3d highlightData(gl_FragCoord, depthTex, highlightViewportPixelSz);\n}",
"highlightPass.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cterrainRenderer/skirts.glsl\x3e\nuniform vec3 origin;\nuniform mat4 proj;\nuniform mat4 view;\nuniform vec4 overlayTexScale;\nuniform vec4 overlayTexOffset;\nuniform float skirtScale;\nattribute vec3 position;\nattribute vec2 uv0;\nvarying vec3 vpos;\nvarying vec4 vtcOverlay;\nvoid main() {\n  #if VIEWING_MODE \x3d\x3d VIEWING_MODE_GLOBAL\n    vec3 vnormal \x3d normalize(position + origin);\n  #else\n    vec3 vnormal \x3d vec3(0.0, 0.0, 1.0);\n  #endif\n  vec2 uv \x3d uv0;\n  vpos \x3d applySkirts(uv, position, vnormal, skirtScale);\n  vtcOverlay \x3d vec4(uv, uv) * overlayTexScale + overlayTexOffset;\n  gl_Position \x3d proj * view * vec4(vpos, 1.0);\n}",
"normalPass.frag":"#include \x3cutil/fsPrecision.glsl\x3e\nvarying vec3 vnormal;\nvarying vec3 vpos;\nvoid main() {\n  vec3 normal \x3d normalize(vnormal);\n  if (gl_FrontFacing \x3d\x3d false) normal \x3d -normal;\n#ifndef ALPHA_ZERO\n  gl_FragColor \x3d vec4(vec3(.5) + .5 * normal, 1.0);\n#else\n  gl_FragColor \x3d vec4(vec3(.5) + .5 * normal, 0.0);\n#endif\n}","normalPass.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cterrainRenderer/skirts.glsl\x3e\nuniform vec3 origin;\nuniform mat4 proj;\nuniform mat4 view;\nuniform mat4 viewNormal;\nuniform float skirtScale;\nattribute vec3 position;\nattribute vec2 uv0;\nvarying vec3 vnormal;\nvarying vec3 vpos;\nvoid main(void) {\n#if VIEWING_MODE \x3d\x3d VIEWING_MODE_GLOBAL\n  vec4 normal \x3d vec4(normalize(position + origin), 1.0);\n#else\n  vec4 normal \x3d vec4(0.0, 0.0, 1.0, 1.0);\n#endif\n  vec2 uv \x3d uv0;\n  vpos \x3d applySkirts(uv, position, normal.xyz, skirtScale);\n  gl_Position \x3d proj * view * vec4(vpos, 1.0);\n  vnormal \x3d normalize((viewNormal * normal).xyz);\n}",
"overlay.glsl":"#include \x3cmaterials/water/waterSurface.glsl\x3e\n#include \x3cutil/color.glsl\x3e\nvec4 getOverlayColor(sampler2D ov0Tex, sampler2D ov1Tex, vec4 texCoords) {\n  vec4 color \x3d vec4(0.0);\n  vec4 color0 \x3d texture2D(ov0Tex, texCoords.xy);\n  vec4 color1 \x3d texture2D(ov1Tex, texCoords.zw);\n  if ((texCoords.x \x3e 0.0) \x26\x26 (texCoords.x \x3c 1.0) \x26\x26 (texCoords.y \x3e 0.0) \x26\x26 (texCoords.y \x3c 1.0)) {\n    color \x3d color0;\n  } else if ((texCoords.z \x3e 0.0) \x26\x26 (texCoords.z \x3c 1.0) \x26\x26 (texCoords.w \x3e 0.0) \x26\x26 (texCoords.w \x3c 1.0)) {\n    color \x3d color1;\n  }\n  return color;\n}\n#ifdef OVERLAY\nvec4 getOverlayWaterColor( in vec4 tileColor, vec4 maskInput, vec4 colorInput,\n                     vec3 vpos, float shadow, vec3 localUp, vec3 eye, mat3 tbn) {\n  vec3 n \x3d normalize(tbn *  (2.0 * maskInput.rgb - vec3(1.0)));\n  vec3 v \x3d -normalize(vpos - eye);\n  vec3 l \x3d normalize(-lightingMainDirection);\n  vec3 final \x3d getSeaColor(n, v, l, colorInput.rgb, localUp, 1.0 - shadow);\n  return premultiplyAlpha(vec4(final, colorInput.w));\n}\n#endif",
"skirts.glsl":"vec3 applySkirts(inout vec2 uv, vec3 vpos, vec3 vnormal, float skirtScale) {\n  float skirtLength \x3d 0.0;\n  if (uv.x \x3e\x3d 2.0) {\n    skirtLength \x3d uv.y * skirtScale;\n    vec2 x \x3d vec2(uv.x) - vec2(3.5, 4.5);\n    uv \x3d clamp(vec2(1.5) - abs(x), vec2(0.0), vec2(1.0));\n  }\n  return vpos - vnormal * skirtLength;\n}"},util:{"alignPixel.glsl":"vec4 alignToPixelCenter(vec4 clipCoord, vec2 widthHeight) {\n  vec2 xy \x3d vec2(.500123) + .5 * clipCoord.xy / clipCoord.w;\n  vec2 pixelSz \x3d vec2(1.0) / widthHeight;\n  vec2 ij \x3d (floor(xy * widthHeight) + vec2(0.5)) * pixelSz;\n  vec2 result \x3d (ij * 2.0 - vec2(1.0)) * clipCoord.w;\n  return vec4(result, clipCoord.zw);\n}\nvec4 alignToPixelOrigin(vec4 clipCoord, vec2 widthHeight) {\n  vec2 xy \x3d vec2(.5) + .5 * clipCoord.xy / clipCoord.w;\n  vec2 pixelSz \x3d vec2(1.0) / widthHeight;\n  vec2 ij \x3d floor((xy + .5 * pixelSz) * widthHeight) * pixelSz;\n  vec2 result \x3d (ij * 2.0 - vec2(1.0)) * clipCoord.w;\n  return vec4(result, clipCoord.zw);\n}",
"color.glsl":"vec4 premultiplyAlpha(vec4 v) {\n  return vec4(v.rgb * v.a, v.a);\n}\nvec3 rgb2hsv(vec3 c) {\n  vec4 K \x3d vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n  vec4 p \x3d mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n  vec4 q \x3d mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n  float d \x3d q.x - min(q.w, q.y);\n  float e \x3d 1.0e-10;\n  return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\nvec3 hsv2rgb(vec3 c) {\n  vec4 K \x3d vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n  vec3 p \x3d abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n  return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}",
"depth.glsl":"#include \x3cutil/encoding.glsl\x3e\nfloat linearDepth(sampler2D depthTex, vec2 uv, vec2 nearFar) {\n  return -(rgba2float(texture2D(depthTex, uv)) * (nearFar[1] - nearFar[0]) + nearFar[0]);\n}\nfloat calcFragDepth(const in float depth) {\n  const float SLOPE_SCALE \x3d 2.0;\n  const float BIAS \x3d 2.0 * .000015259;\n  float m \x3d max(abs(dFdx(depth)), abs(dFdy(depth)));\n  float result \x3d depth + SLOPE_SCALE * m + BIAS;\n  return clamp(result, .0, .999999);\n}","doublePrecision.glsl":"vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {\n  vec3 t1 \x3d hiA + hiB;\n  vec3 e \x3d t1 - hiA;\n  vec3 t2 \x3d ((hiB - e) + (hiA - (t1 - e))) + loA + loB;\n  return t1 + t2;\n}",
"enableExtensions.glsl":"#define EXTENSIONS_ENABLED\n#extension GL_OES_standard_derivatives : enable\n#extension GL_EXT_shader_texture_lod : enable","encoding.glsl":"const float MAX_RGBA_FLOAT \x3d\n  255.0 / 256.0 +\n  255.0 / 256.0 / 256.0 +\n  255.0 / 256.0 / 256.0 / 256.0 +\n  255.0 / 256.0 / 256.0 / 256.0 / 256.0;\nconst vec4 fixedPointFactors \x3d vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);\nvec4 float2rgba(const float value) {\n  float valueInValidDomain \x3d clamp(value, 0.0, MAX_RGBA_FLOAT);\n  vec4 fixedPointU8 \x3d floor(fract(valueInValidDomain * fixedPointFactors) * 256.0);\n  const float toU8AsFloat \x3d 1.0 / 255.0;\n  return fixedPointU8 * toU8AsFloat;\n}\nconst vec4 rgba2float_factors \x3d vec4(\n  255.0 / (256.0),\n  255.0 / (256.0 * 256.0),\n  255.0 / (256.0 * 256.0 * 256.0),\n  255.0 / (256.0 * 256.0 * 256.0 * 256.0)\n);\nfloat rgba2float(vec4 rgba) {\n  return dot(rgba, rgba2float_factors);\n}",
"fsPrecision.glsl":"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\nprecision highp sampler2D;\n#else\nprecision mediump float;\nprecision mediump sampler2D;\n#endif","highlight.glsl":"vec4 highlightData(vec4 fragCoord, sampler2D depthTex, vec4 viewportPixelSize) {\n  float sceneDepth \x3d texture2D(depthTex, (fragCoord.xy - viewportPixelSize.xy) * viewportPixelSize.zw).r;\n  if (fragCoord.z \x3e sceneDepth + 5e-7) {\n    return vec4(1.0, 1.0, 0.0, 1.0);\n  }\n  else {\n    return vec4(1.0, 0.0, 1.0, 1.0);\n  }\n}",
"hud.glsl":"#include \x3cutil/screenSizePerspective.glsl\x3e\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec4 auxpos1;\nuniform mat4 proj;\nuniform mat4 view;\nuniform mat4 viewNormal;\nuniform mat4 model;\nuniform mat4 modelNormal;\nuniform vec4 viewport;\nuniform vec3 camPos;\nuniform float polygonOffset;\nuniform float cameraGroundRelative;\nuniform float pixelRatio;\nuniform float perDistancePixelRatio;\n#ifdef VERTICAL_OFFSET\nuniform vec4 verticalOffset;\n#endif\n#ifdef SCREEN_SIZE_PERSPECTIVE\nuniform vec4 screenSizePerspectiveAlignment;\n#endif\nuniform sampler2D hudVisibilityTexture;\nconst float SMALL_OFFSET_ANGLE \x3d 0.984807753012208;\nstruct ProjectHUDAux {\n  vec3 posModel;\n  vec3 posView;\n  vec3 vnormal;\n  float distanceToCamera;\n  float absCosAngle;\n};\nfloat applyHUDViewDependentPolygonOffset(float pointGroundDistance, float absCosAngle, inout vec3 posView) {\n  float pointGroundSign \x3d sign(pointGroundDistance);\n  if (pointGroundSign \x3d\x3d 0.0) {\n    pointGroundSign \x3d cameraGroundRelative;\n  }\n  float groundRelative \x3d cameraGroundRelative * pointGroundSign;\n  if (polygonOffset \x3e .0) {\n    float cosAlpha \x3d clamp(absCosAngle, 0.01, 1.0);\n    float tanAlpha \x3d sqrt(1.0 - cosAlpha * cosAlpha) / cosAlpha;\n    float factor \x3d (1.0 - tanAlpha / viewport[2]);\n    if (groundRelative \x3e 0.0) {\n      posView *\x3d factor;\n    }\n    else {\n      posView /\x3d factor;\n    }\n  }\n  return groundRelative;\n}\nvoid applyHUDVerticalGroundOffset(vec3 normalModel, inout vec3 posModel, inout vec3 posView) {\n  float distanceToCamera \x3d length(posView);\n  float pixelOffset \x3d distanceToCamera * perDistancePixelRatio * 0.5;\n  vec3 modelOffset \x3d normalModel * cameraGroundRelative * pixelOffset;\n  vec3 viewOffset \x3d (viewNormal * vec4(modelOffset, 1.0)).xyz;\n  posModel +\x3d modelOffset;\n  posView +\x3d viewOffset;\n}\nvec4 projectPositionHUD(out ProjectHUDAux aux) {\n  vec3 centerOffset \x3d auxpos1.xyz;\n  float pointGroundDistance \x3d auxpos1.w;\n  aux.posModel \x3d (model * vec4(position, 1.0)).xyz;\n  aux.posView \x3d (view * vec4(aux.posModel, 1.0)).xyz;\n  aux.vnormal \x3d (modelNormal * vec4(normal, 1.0)).xyz;\n  applyHUDVerticalGroundOffset(aux.vnormal, aux.posModel, aux.posView);\n  aux.distanceToCamera \x3d length(aux.posView);\n  vec3 viewDirObjSpace \x3d normalize(camPos - aux.posModel);\n  float cosAngle \x3d dot(aux.vnormal, viewDirObjSpace);\n  aux.absCosAngle \x3d abs(cosAngle);\n#ifdef SCREEN_SIZE_PERSPECTIVE\n#if defined(VERTICAL_OFFSET) || defined(CENTER_OFFSET_UNITS_SCREEN)\n  vec4 perspectiveFactor \x3d screenSizePerspectiveScaleFactor(aux.absCosAngle, aux.distanceToCamera, screenSizePerspectiveAlignment);\n#endif\n#endif\n#ifdef VERTICAL_OFFSET\n#ifdef SCREEN_SIZE_PERSPECTIVE\n  float verticalOffsetScreenHeight \x3d applyScreenSizePerspectiveScaleFactorFloat(verticalOffset.x, perspectiveFactor);\n#else\n  float verticalOffsetScreenHeight \x3d verticalOffset.x;\n#endif\n  float worldOffset \x3d clamp(verticalOffsetScreenHeight * verticalOffset.y * aux.distanceToCamera, verticalOffset.z, verticalOffset.w);\n  vec3 modelOffset \x3d aux.vnormal * worldOffset;\n  aux.posModel +\x3d modelOffset;\n  vec3 viewOffset \x3d (viewNormal * vec4(modelOffset, 1.0)).xyz;\n  aux.posView +\x3d viewOffset;\n  pointGroundDistance +\x3d worldOffset;\n#endif\n  float groundRelative \x3d applyHUDViewDependentPolygonOffset(pointGroundDistance, aux.absCosAngle, aux.posView);\n#ifndef CENTER_OFFSET_UNITS_SCREEN\n  aux.posView +\x3d vec3(centerOffset.x, centerOffset.y, 0.0);\n  if (centerOffset.z !\x3d 0.0) {\n    aux.posView -\x3d normalize(aux.posView) * centerOffset.z;\n  }\n#endif\n  vec4 posProj \x3d proj * vec4(aux.posView, 1.0);\n#ifdef CENTER_OFFSET_UNITS_SCREEN\n#ifdef SCREEN_SIZE_PERSPECTIVE\n  float centerOffsetY \x3d applyScreenSizePerspectiveScaleFactorFloat(centerOffset.y, perspectiveFactor);\n#else\n  float centerOffsetY \x3d centerOffset.y;\n#endif\n  posProj.xy +\x3d vec2(centerOffset.x, centerOffsetY) * pixelRatio * 2.0 / viewport.zw * posProj.w;\n#endif\n  posProj.z -\x3d groundRelative * polygonOffset * posProj.w;\n  return posProj;\n}\nuniform float uRenderTransparentlyOccludedHUD;\nbool testVisibilityHUD(vec4 posProj) {\n  vec4 posProjCenter \x3d alignToPixelCenter(posProj, viewport.zw);\n  vec4 occlusionPixel \x3d texture2D(hudVisibilityTexture, .5 + .5 * posProjCenter.xy / posProjCenter.w);\n  if (uRenderTransparentlyOccludedHUD \x3e 0.5) {\n    return occlusionPixel.r * occlusionPixel.g \x3e 0.0 \x26\x26 occlusionPixel.g * uRenderTransparentlyOccludedHUD \x3c 1.0;\n  }\n  else {\n    return occlusionPixel.r * occlusionPixel.g \x3e 0.0 \x26\x26 occlusionPixel.g \x3d\x3d 1.0;\n  }\n}",
"normalEncoding.glsl":"vec3 decodeNormal(vec2 f) {\n    float z \x3d 1.0 - abs(f.x) - abs(f.y);\n    return vec3(f + sign(f) * min(z, 0.0), z);\n}","pbrUtils.glsl":"struct PBRShading\n{\n    float NdotL;\n    float NdotV;\n    float NdotH;\n    float VdotH;\n    float LdotH;\n    float VdotN;\n};\nconst float PI_W \x3d 3.14159265;\n#ifdef OVERLAY\n  float dtrExponent \x3d 2.0;\n#else\n  uniform float dtrExponent;\n#endif\nvec3 fresnelReflection(float VdotH, vec3 f0, float f0Max) {\n    return f0 + (f0Max - f0) * pow(1.0 - VdotH, 5.0);\n}\nfloat normalDistributionWater(float NdotH, float roughness)\n{\n  float r2 \x3d roughness * roughness;\n  float NdotH2 \x3d NdotH * NdotH;\n  float denom \x3d pow((NdotH2 * (r2 - 1.0) + 1.0), dtrExponent) * PI_W;\n  return r2 / denom;\n}\nfloat geometricOcclusionKelemen(float LoH)\n{\n    return 0.25 / (LoH * LoH);\n}\nvec3 calculateSpecularReflectanceWater(in PBRShading props, float roughness, vec3 F0, float F0Max)\n{\n  vec3  F \x3d fresnelReflection(props.VdotH, F0, F0Max);\n  float D \x3d normalDistributionWater(props.NdotH, roughness);\n  float V \x3d geometricOcclusionKelemen(props.LdotH);\n  return (D * V) * F;\n}\nvec3 tonemapACES(const vec3 x) {\n  return (x * (2.51 * x + 0.03)) / (x * (2.43 * x + 0.59) + 0.14);\n}",
"quad.vert":"#include \x3cutil/vsPrecision.glsl\x3e\nattribute vec2 position;\nvarying vec2 uv;\nvoid main(void) {\n  gl_Position \x3d vec4(position.x, position.y, .0, 1.0);\n  uv \x3d position * .5 + vec2(.5);\n}","sceneLighting.glsl":"uniform vec3 lightingMainDirection;\nuniform vec3 lightingMainIntensity;\n#ifndef SH_ORDER\n  #ifdef USE_PBR\n    #define SH_ORDER 0\n  #else\n    #define SH_ORDER 2\n  #endif\n#endif\n#if SH_ORDER \x3d\x3d 0\n  uniform vec3 lightingAmbientSH0;\n#elif SH_ORDER \x3d\x3d 1\n  uniform vec4 lightingAmbientSH_R;\n  uniform vec4 lightingAmbientSH_G;\n  uniform vec4 lightingAmbientSH_B;\n#elif SH_ORDER \x3d\x3d 2\n  uniform vec3 lightingAmbientSH0;\n  uniform vec4 lightingAmbientSH_R1;\n  uniform vec4 lightingAmbientSH_G1;\n  uniform vec4 lightingAmbientSH_B1;\n  uniform vec4 lightingAmbientSH_R2;\n  uniform vec4 lightingAmbientSH_G2;\n  uniform vec4 lightingAmbientSH_B2;\n#endif\nuniform float lightingFixedFactor;\nuniform float lightingGlobalFactor;\nuniform float ambientBoostFactor;\nuniform vec3 groundColor;\nconst float GAMMA \x3d 2.1;\nconst float PI \x3d 3.14159;\nconst float halfPI \x3d 1.57079;\nconst float invPI \x3d 0.318309;\nconst float skyIlluminationAngle \x3d 1.57079;\n#ifdef USE_PBR\n  #ifdef USE_PBR_CLEAR_COATING\n    uniform float clearCoating;\n    uniform float clearCoatRoughness;\n  #endif\n#endif\nconst vec3 clearCoatingFresnel \x3d vec3(0.04);\nstruct PBRShadingInfo\n{\n    float NdotL;\n    float NdotV;\n    float NdotH;\n    float VdotH;\n    float LdotH;\n    float NdotNG;\n    float RdotNG;\n    vec3 diffuseColor;\n    vec3 ambientSky;\n    vec3 ambientGround;\n    float ssao;\n    vec3 groundColor;\n    vec3 albedoLinear;\n    vec3 f0;\n    vec3 f90;\n    vec3 f0_ClearCoating;\n    vec3 f90_ClearCoating;\n    float roughnessClearCoating;\n    float coating;\n    float metalness;\n    float roughness;\n    float refraction;\n};\nvec3 calculateAmbientComponent(vec3 normal, float ssao)\n{\n  #if SH_ORDER \x3d\x3d 0\n    vec3 ambientLight \x3d 0.282095 * lightingAmbientSH0;\n  #elif SH_ORDER \x3d\x3d 1\n    vec4 sh0 \x3d vec4(\n      0.282095,\n      0.488603 * normal.x,\n      0.488603 * normal.z,\n      0.488603 * normal.y\n    );\n    vec3 ambientLight \x3d vec3(\n      dot(lightingAmbientSH_R, sh0),\n      dot(lightingAmbientSH_G, sh0),\n      dot(lightingAmbientSH_B, sh0)\n    );\n  #elif SH_ORDER \x3d\x3d 2\n    vec3 ambientLight \x3d 0.282095 * lightingAmbientSH0;\n    vec4 sh1 \x3d vec4(\n      0.488603 * normal.x,\n      0.488603 * normal.z,\n      0.488603 * normal.y,\n      1.092548 * normal.x * normal.y\n    );\n    vec4 sh2 \x3d vec4(\n      1.092548 * normal.y * normal.z,\n      0.315392 * (3.0 * normal.z * normal.z - 1.0),\n      1.092548 * normal.x * normal.z,\n      0.546274 * (normal.x * normal.x - normal.y * normal.y)\n    );\n    ambientLight +\x3d vec3(\n      dot(lightingAmbientSH_R1, sh1),\n      dot(lightingAmbientSH_G1, sh1),\n      dot(lightingAmbientSH_B1, sh1)\n    );\n    ambientLight +\x3d vec3(\n      dot(lightingAmbientSH_R2, sh2),\n      dot(lightingAmbientSH_G2, sh2),\n      dot(lightingAmbientSH_B2, sh2)\n    );\n  #endif\n  ambientLight *\x3d (1.0 - ssao);\n  return ambientLight;\n}\nvec3 evaluateSceneLighting(vec3 normal, vec3 albedo, float shadow, float ssao, vec3 additionalLight) {\n  #if defined(TREE_RENDERING)\n    float minDot \x3d -0.5;\n    float dotRange \x3d 1.0 - minDot;\n    float dotNormalization \x3d 0.66;\n    float dotVal \x3d dotNormalization * (clamp(-dot(normal, lightingMainDirection), 1.0 - dotRange, 1.0) - minDot) * (1.0 / dotRange);\n  #else\n    float dotVal \x3d clamp(-dot(normal, lightingMainDirection), 0.0, 1.0);\n  #endif\n  dotVal \x3d mix(dotVal, 1.0, lightingFixedFactor);\n  vec3 mainLight \x3d (1.0 - shadow) * lightingMainIntensity * dotVal;\n  vec3 ambientLight \x3d calculateAmbientComponent(normal, ssao);\n  vec3 albedoGammaC \x3d pow(albedo, vec3(GAMMA));\n  vec3 totalLight \x3d mainLight + ambientLight + additionalLight;\n  totalLight \x3d min(totalLight, vec3(PI, PI, PI));\n  vec3 outColor \x3d vec3((albedoGammaC / PI) * (totalLight));\n  outColor \x3d pow(outColor, vec3(1.0/GAMMA));\n  return outColor;\n}\nvec3 sceneLightingAdditionalLightGlobal(vec3 worldPos, float ssao, out float additionalAmbientScale) {\n#if VIEWING_MODE \x3d\x3d VIEWING_MODE_GLOBAL\n    float vndl \x3d -dot(normalize(worldPos), lightingMainDirection);\n#else\n    float vndl \x3d -dot(vec3(0.0, 0.0, 1.0), lightingMainDirection);\n#endif\n  additionalAmbientScale \x3d smoothstep(0.0, 1.0, clamp(vndl * 2.5, 0.0, 1.0));\n  return ssao * lightingMainIntensity * additionalAmbientScale * ambientBoostFactor * lightingGlobalFactor;\n}\n#ifdef USE_PBR\n  vec3 fresnelReflection(float angle, vec3 f0, vec3 f90) {\n      return f0 + (f90 - f0) * pow(1.0 - angle, 5.0);\n  }\n  vec3 calculateDiffuseReflectanceFactor(PBRShadingInfo inputs)\n  {\n    return (1.0 - inputs.metalness) * inputs.albedoLinear * invPI;\n  }\n  float normalDistribution(float NdotH, float roughness)\n  {\n    float r2 \x3d roughness * roughness;\n    float NdotH2 \x3d NdotH * NdotH;\n    float denom \x3d (NdotH2 * (r2 - 1.0) + 1.0) * (NdotH2 * (r2 - 1.0) + 1.0) * PI;\n    return r2 / denom;\n  }\n  float geometricOcclusion(float NdotV, float NdotL, float roughness)\n  {\n      float a2 \x3d roughness * roughness;\n      float GGXL \x3d NdotV * sqrt((-NdotL * a2 + NdotL) * NdotL + a2);\n      float GGXV \x3d NdotL * sqrt((-NdotV * a2 + NdotV) * NdotV + a2);\n      return 0.5 / (GGXV + GGXL);\n  }\n  float geometricOcclusionKelemen(float LoH)\n  {\n      return 0.25 / (LoH * LoH);\n  }\n  vec3 calculateSpecularReflectanceFactor(PBRShadingInfo inputs, float roughness, vec3 f0, vec3 f90)\n  {\n    vec3  F \x3d fresnelReflection(inputs.VdotH, f0, f90);\n    float D \x3d normalDistribution(inputs.NdotH, roughness);\n    float V \x3d geometricOcclusion(inputs.NdotV, inputs.NdotL, roughness);\n    return (D * V) * F;\n  }\n  vec3 brdfPBR(PBRShadingInfo inputs)\n  {\n    vec3 diffuseComponent  \x3d calculateDiffuseReflectanceFactor(inputs);\n    vec3 specularComponent   \x3d calculateSpecularReflectanceFactor(inputs, inputs.roughness, inputs.f0, inputs.f90);\n    #ifdef USE_PBR_CLEAR_COATING\n      vec3  Fc \x3d fresnelReflection(inputs.LdotH, inputs.f0_ClearCoating, , inputs.f90_ClearCoating) * inputs.coating;\n      float Dc \x3d normalDistribution(inputs.NdotH, inputs.roughnessClearCoating);\n      float Vc \x3d geometricOcclusionKelemen(inputs.LdotH);\n      vec3 specularComponentCoating \x3d  (Dc * Vc) * Fc;\n      return (1.0 - inputs.ssao) * (diffuseComponent * (1.0-Fc) + specularComponent * (1.0-Fc) * (1.0-Fc) + specularComponentCoating);\n    #else\n      return (1.0 - inputs.ssao) * (diffuseComponent + specularComponent);\n    #endif\n  }\n  vec3 calculateGroundComponent(PBRShadingInfo inputs)\n  {\n    return inputs.groundColor * inputs.ambientSky;\n  }\n  vec2 prefilteredDFG_Analytical(PBRShadingInfo inputs) {\n      const vec4 c0 \x3d vec4(-1.0, -0.0275, -0.572,  0.022);\n      const vec4 c1 \x3d vec4( 1.0,  0.0425,  1.040, -0.040);\n      vec4 r \x3d inputs.roughness * c0 + c1;\n      float a004 \x3d min(r.x * r.x, exp2(-9.28 * inputs.NdotV)) * r.x + r.y;\n      return vec2(-1.04, 1.04) * a004 + r.zw;\n  }\n      vec3 evaluateIrradianceIntegral(float firstAngle, float secondAngle, PBRShadingInfo inputs)\n      {\n        float firstAngleClamped \x3d clamp(firstAngle, 0.0, halfPI);\n        float secondAngleClamped \x3d clamp(secondAngle, 0.0, halfPI);\n        float ground \x3d sin(firstAngleClamped) - sin(0.0) + sin(halfPI) - sin(secondAngleClamped);\n        float sky \x3d sin(secondAngleClamped) - sin(firstAngleClamped);\n        return ground * inputs.ambientGround + sky * inputs.ambientSky;\n      }\n      vec3 evaluateDiffuseIllumination_Analytical(PBRShadingInfo inputs)\n      {\n        float theta \x3d acos(max(min(inputs.NdotNG, 1.0), -1.0));\n        float firstAngle \x3d halfPI + theta - skyIlluminationAngle;\n        float secondAngle \x3d halfPI + theta + skyIlluminationAngle;\n        vec3 LeftIntegral \x3d evaluateIrradianceIntegral(halfPI - secondAngle, halfPI - firstAngle, inputs);\n        vec3 RightIntegral \x3d evaluateIrradianceIntegral(firstAngle - halfPI, secondAngle - halfPI, inputs);\n        vec3 ambientDiffuseLight \x3d (1.0 - inputs.ssao) * (LeftIntegral + RightIntegral) / 2.0;\n        return ambientDiffuseLight;\n      }\n      float integratedRadiance(float theta, float roughness)\n      {\n        float r4 \x3d pow(roughness, 4.0);\n        float r2 \x3d pow(roughness, 2.0);\n        float cosT2 \x3d cos(theta) * cos(theta);\n        float denom_1 \x3d (cosT2 * (2.0 * r4 - 4.0 * r2 + 2.0) + 2.0 * r2 - 2.0);\n        float denom_2 \x3d (2.0 * r4 - 2.0 * r2);\n        float integral \x3d 2.0 * r2 * (1.0 / denom_1 - 1.0 / denom_2);\n        return integral;\n      }\n      vec3 evaluateRadianceIntegral(float firstAngle, float secondAngle, PBRShadingInfo inputs, float roughness)\n      {\n        float firstAngleClamped \x3d clamp(firstAngle, 0.0, halfPI);\n        float secondAngleClamped \x3d clamp(secondAngle, 0.0, halfPI);\n        float ro \x3d roughness;\n        float ground \x3d integratedRadiance(firstAngleClamped, ro) - integratedRadiance(0.0, ro) + integratedRadiance(halfPI, ro) - integratedRadiance(secondAngleClamped, ro);\n        float sky \x3d integratedRadiance(secondAngleClamped, ro) - integratedRadiance(firstAngleClamped, ro);\n        return ground * inputs.ambientGround + sky * inputs.ambientSky;\n      }\n      vec3 evaluateSpecularIllumination_Analytical(PBRShadingInfo inputs, float RdotNG, float roughness)\n      {\n        float theta \x3d acos(max(min(RdotNG, 1.0), -1.0));\n        float firstPoint \x3d - halfPI + theta + skyIlluminationAngle;\n        float secondPoint \x3d - halfPI + theta - skyIlluminationAngle;\n        vec3 LeftIntegral \x3d evaluateRadianceIntegral(halfPI - firstPoint, halfPI - secondPoint, inputs, roughness);\n        vec3 RightIntegral \x3d evaluateRadianceIntegral(secondPoint - halfPI, firstPoint - halfPI, inputs, roughness);\n        vec3 enviromentSpecularLight \x3d (1.0 - inputs.ssao) * (LeftIntegral + RightIntegral) / 2.0;\n        return enviromentSpecularLight;\n      }\n  vec3 evaluateEnviromentIllumination(PBRShadingInfo inputs) {\n      vec3 indirectDiffuse \x3d evaluateDiffuseIllumination_Analytical(inputs);\n      vec3 indirectSpecular \x3d evaluateSpecularIllumination_Analytical(inputs, inputs.RdotNG, inputs.roughness);\n      vec3 diffuseComponent \x3d inputs.diffuseColor * indirectDiffuse * invPI;\n      vec2 dfg \x3d prefilteredDFG_Analytical(inputs);\n      vec3 specularColor \x3d inputs.f0 * dfg.x + 1.0 * dfg.y;\n      vec3 specularComponent \x3d specularColor * indirectSpecular;\n      #ifdef USE_PBR_CLEAR_COATING\n        vec3 Fc \x3d fresnelReflection(inputs.NdotV, inputs.f0_ClearCoating) * inputs.coating;\n        diffuseComponent  *\x3d 1.0 - Fc;\n        specularComponent *\x3d (1.0 - Fc) * (1.0 - Fc);\n        specularComponent +\x3d evaluateSpecularIllumination_Analytical(inputs, inputs.RdotNG, inputs.roughnessClearCoating) * Fc;\n      #endif\n      return (diffuseComponent + specularComponent);\n  }\n  vec3 evaluateSceneLightingPBR(vec3 normal, vec3 albedo, float shadow, float ssao, vec3 additionalLight, vec3 viewDir, vec3 normalGround, float _roughness, float _metalness, vec3 _emission)\n  {\n    vec3 viewDirection \x3d - normalize(viewDir);\n    vec3 mainLightDirection \x3d -lightingMainDirection;\n    vec3 h \x3d normalize(viewDirection + mainLightDirection);\n    PBRShadingInfo inputs;\n    inputs.NdotL \x3d clamp(dot(normal, mainLightDirection), 0.001, 1.0);\n    inputs.NdotV \x3d clamp(abs(dot(normal, viewDirection)), 0.001, 1.0);\n    inputs.NdotH \x3d clamp(dot(normal, h), 0.0, 1.0);\n    inputs.VdotH \x3d clamp(dot(viewDirection, h), 0.0, 1.0);\n    inputs.LdotH \x3d clamp(dot(mainLightDirection, h), 0.0, 1.0);\n    inputs.NdotNG \x3d clamp(dot(normal, normalize(normalGround)), -1.0, 1.0);\n    vec3 reflectedView \x3d normalize(reflect(viewDirection, normal));\n    inputs.refraction \x3d dot(viewDirection, normal);\n    inputs.RdotNG \x3d clamp(dot(reflectedView, normalize(normalGround)), -1.0, 1.0);\n    inputs.albedoLinear \x3d pow(albedo, vec3(GAMMA));\n    inputs.groundColor \x3d pow(vec3(0.5, 0.5, 0.5), vec3(GAMMA));\n    inputs.ssao \x3d ssao;\n    inputs.roughness \x3d clamp(_roughness * _roughness, 0.001, 0.99);\n    inputs.metalness \x3d _metalness;\n    inputs.f0 \x3d vec3(0.04) * (1.0 - inputs.metalness) + inputs.albedoLinear * inputs.metalness;\n    inputs.f90 \x3d vec3(clamp(dot(inputs.f0, vec3(50.0 * 0.33)), 0.0, 1.0));\n    inputs.diffuseColor \x3d inputs.albedoLinear * (vec3(1.0) - inputs.f0) * (1.0 - inputs.metalness);\n    #ifdef USE_PBR_CLEAR_COATING\n      inputs.f0_ClearCoating \x3d clearCoatingFresnel;\n      inputs.f90_ClearCoating \x3d vec3(clamp(dot(inputs.f0_ClearCoating, vec3(50.0 * 0.33)), 0.0, 1.0));\n      float clearCoatRoughnessLinear \x3d mix(0.089, 0.6, clearCoatRoughness);\n      inputs.roughnessClearCoating \x3d clearCoatRoughnessLinear * clearCoatRoughnessLinear;\n      inputs.coating \x3d clearCoating;\n    #endif\n    inputs.ambientSky    \x3d calculateAmbientComponent(normal, ssao) * 1.2 - 0.2;\n    inputs.ambientGround \x3d calculateGroundComponent(inputs);\n    inputs.NdotL \x3d mix(inputs.NdotL, 1.0, lightingFixedFactor);\n    vec3 enviromentComponent \x3d evaluateEnviromentIllumination(inputs);\n    vec3 additionalLightComponents \x3d inputs.albedoLinear * (additionalLight) * invPI;\n    vec3 reflectanceFactor \x3d brdfPBR(inputs);\n    vec3 incidentLight  \x3d  inputs.NdotL * (1.0 - shadow) * lightingMainIntensity;\n    vec3 outColorLinear \x3d  incidentLight * reflectanceFactor + enviromentComponent + additionalLightComponents + pow(_emission, vec3(GAMMA));\n    vec3 outColor \x3d pow(outColorLinear, vec3(1.0/GAMMA));\n    return outColor;\n  }\n#endif",
"screenSizePerspective.glsl":"float screenSizePerspectiveMinSize(float size, vec4 factor) {\n  float nonZeroSize \x3d 1.0 - step(size, 0.0);\n  return (\n    factor.z * (\n      1.0 +\n      nonZeroSize *\n      2.0 * factor.w / (\n        size + (1.0 - nonZeroSize)\n      )\n    )\n  );\n}\nfloat screenSizePerspectiveViewAngleDependentFactor(float absCosAngle) {\n  return absCosAngle * absCosAngle * absCosAngle;\n}\nvec4 screenSizePerspectiveScaleFactor(float absCosAngle, float distanceToCamera, vec4 params) {\n  return vec4(min(params.x / (distanceToCamera - params.y), 1.0), screenSizePerspectiveViewAngleDependentFactor(absCosAngle), params.z, params.w);\n}\nfloat applyScreenSizePerspectiveScaleFactorFloat(float size, vec4 factor) {\n  return max(mix(size * factor.x, size, factor.y), screenSizePerspectiveMinSize(size, factor));\n}\nfloat screenSizePerspectiveScaleFloat(float size, float absCosAngle, float distanceToCamera, vec4 params) {\n  return applyScreenSizePerspectiveScaleFactorFloat(size, screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params));\n}\nvec2 applyScreenSizePerspectiveScaleFactorVec2(vec2 size, vec4 factor) {\n  return mix(size * clamp(factor.x, screenSizePerspectiveMinSize(size.y, factor) / size.y, 1.0), size, factor.y);\n}\nvec2 screenSizePerspectiveScaleVec2(vec2 size, float absCosAngle, float distanceToCamera, vec4 params) {\n  return applyScreenSizePerspectiveScaleFactorVec2(size, screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params));\n}",
"shadow.glsl":"#include \x3cutil/encoding.glsl\x3e\nfloat evalShadow(const in vec3 vpos, const in float depth, const in sampler2D depthTex, const int num, const in vec4 distance, in mat4 matrix[4], const in float halfPxSz) {\n  int i \x3d depth \x3c distance[1] ? 0 : depth \x3c distance[2] ? 1 : depth \x3c distance[3] ? 2 : 3;\n  if (i \x3e\x3d num) { return .0; }\n  mat4 mat \x3d i \x3d\x3d 0 ? matrix[0] : i \x3d\x3d 1 ? matrix[1] : i \x3d\x3d 2 ? matrix[2] : matrix[3];\n  vec4 lv \x3d mat * vec4(vpos, 1.0);\n  lv.xy /\x3d lv.w;\n  vec3 lvpos \x3d .5 * lv.xyz + vec3(.5);\n  if (lvpos.z \x3e\x3d 1.0) { return .0; }\n  if (lvpos.x \x3c .0 || lvpos.x \x3e 1.0 || lvpos.y \x3c .0 || lvpos.y \x3e 1.0) { return .0; }\n  vec2 uv \x3d vec2(float(i - 2 * (i / 2)) *.5, float(i / 2) * .5) + .5 * lvpos.xy;\n  float texSize \x3d .5 / halfPxSz;\n  vec2 st \x3d fract((vec2(halfPxSz) + uv) * texSize);\n  float s00 \x3d rgba2float(texture2D(depthTex, uv + vec2(-halfPxSz, -halfPxSz))) \x3c lvpos.z ? 1.0 : .0;\n  float s10 \x3d rgba2float(texture2D(depthTex, uv + vec2(halfPxSz, -halfPxSz))) \x3c lvpos.z ? 1.0 : .0;\n  float s11 \x3d rgba2float(texture2D(depthTex, uv + vec2(halfPxSz, halfPxSz))) \x3c lvpos.z ? 1.0 : .0;\n  float s01 \x3d rgba2float(texture2D(depthTex, uv + vec2(-halfPxSz, halfPxSz))) \x3c lvpos.z ? 1.0 : .0;\n  return mix(mix(s00, s10, st.x), mix(s01, s11, st.x), st.y);\n}",
"slice.glsl":"#ifdef SLICE\nuniform vec3 slicePlaneOrigin;\nuniform vec3 slicePlaneBasis1;\nuniform vec3 slicePlaneBasis2;\nstruct SliceFactors {\n  float front;\n  float side0;\n  float side1;\n  float side2;\n  float side3;\n};\nSliceFactors calculateSliceFactors(vec3 pos) {\n  vec3 rel \x3d pos - slicePlaneOrigin;\n  vec3 slicePlaneNormal \x3d -cross(slicePlaneBasis1, slicePlaneBasis2);\n  float slicePlaneW \x3d -dot(slicePlaneNormal, slicePlaneOrigin);\n  float basis1Len2 \x3d dot(slicePlaneBasis1, slicePlaneBasis1);\n  float basis2Len2 \x3d dot(slicePlaneBasis2, slicePlaneBasis2);\n  float basis1Dot \x3d dot(slicePlaneBasis1, rel);\n  float basis2Dot \x3d dot(slicePlaneBasis2, rel);\n  return SliceFactors(\n    dot(slicePlaneNormal, pos) + slicePlaneW,\n    -basis1Dot - basis1Len2,\n    basis1Dot - basis1Len2,\n    -basis2Dot - basis2Len2,\n    basis2Dot - basis2Len2\n  );\n}\nbool sliceByFactors(SliceFactors factors) {\n  return factors.front \x3c 0.0\n    \x26\x26 factors.side0 \x3c 0.0\n    \x26\x26 factors.side1 \x3c 0.0\n    \x26\x26 factors.side2 \x3c 0.0\n    \x26\x26 factors.side3 \x3c 0.0;\n}\nbool sliceByPlane(vec3 pos) {\n  return sliceByFactors(calculateSliceFactors(pos));\n}\n#ifdef EXTENSIONS_ENABLED\nvec4 applySliceHighlight(vec4 color, vec3 pos) {\n  SliceFactors factors \x3d calculateSliceFactors(pos);\n  if (sliceByFactors(factors)) {\n    return color;\n  }\n  const float HIGHLIGHT_WIDTH \x3d 1.0;\n  const vec4 HIGHLIGHT_COLOR \x3d vec4(0.0, 0.0, 0.0, 0.3);\n  factors.front /\x3d (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.front);\n  factors.side0 /\x3d (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side0);\n  factors.side1 /\x3d (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side1);\n  factors.side2 /\x3d (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side2);\n  factors.side3 /\x3d (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side3);\n  float highlightFactor \x3d (1.0 - step(0.5, factors.front))\n    * (1.0 - step(0.5, factors.side0))\n    * (1.0 - step(0.5, factors.side1))\n    * (1.0 - step(0.5, factors.side2))\n    * (1.0 - step(0.5, factors.side3));\n  return mix(color, vec4(HIGHLIGHT_COLOR.rgb, color.a), highlightFactor * HIGHLIGHT_COLOR.a);\n}\n#else\n#endif\n#define rejectBySlice(_pos_) sliceByPlane(_pos_)\n#define discardBySlice(_pos_) { if (sliceByPlane(_pos_)) discard; }\n#ifdef SLICE_HIGHLIGHT_DISABLED\n#define highlightSlice(_color_, _pos_) (_color_)\n#else\n#define highlightSlice(_color_, _pos_) applySliceHighlight(_color_, _pos_)\n#endif\n#else\n#define rejectBySlice(_pos_) false\n#define discardBySlice(_pos_) {}\n#define highlightSlice(_color_, _pos_) (_color_)\n#endif",
"visualVariables.glsl":"#if defined(VV_SIZE)\n  #define VV_CUSTOM_MODEL_MATRIX\n#endif\n#if defined(VV_SIZE)\n  uniform vec3 vvSizeMinSize;\n  uniform vec3 vvSizeMaxSize;\n  uniform vec3 vvSizeOffset;\n  uniform vec3 vvSizeFactor;\n#elif defined(VV_CUSTOM_MODEL_MATRIX)\n  uniform vec3 vvSizeValue;\n#endif\n#ifdef VV_CUSTOM_MODEL_MATRIX\n  uniform mat3 vvSymbolRotationMatrix;\n#endif\n#ifdef VV_CUSTOM_MODEL_MATRIX\n  uniform vec3 vvSymbolAnchor;\n#endif\n#ifdef VV_COLOR\n  #define VV_COLOR_N 8\n  uniform float vvColorValues[VV_COLOR_N];\n  uniform vec4 vvColorColors[VV_COLOR_N];\n#endif\n#if defined(VV_SIZE)\n  vec3 vvGetScale(vec4 featureAttribute) {\n    return clamp(vvSizeOffset + featureAttribute.x * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize);\n  }\n#elif defined(VV_CUSTOM_MODEL_MATRIX)\n  vec3 vvGetScale(vec4 featureAttribute) {\n    return vvSizeValue;\n  }\n#endif\n#ifdef VV_CUSTOM_MODEL_MATRIX\n  vec4 vvTransformPosition(vec3 position, vec4 featureAttribute) {\n    return vec4(vvSymbolRotationMatrix * (vvGetScale(featureAttribute) * (position + vvSymbolAnchor)), 1.0);\n  }\n  vec4 vvTransformNormal(vec3 normal, vec4 featureAttribute) {\n    return vec4(vvSymbolRotationMatrix * normal / vvGetScale(featureAttribute), 1.0);\n  }\n#endif\n#ifdef VV_COLOR\n  vec4 vvGetColor(vec4 featureAttribute, float values[VV_COLOR_N], vec4 colors[VV_COLOR_N]) {\n    float value \x3d featureAttribute.y;\n    if (value \x3c\x3d values[0]) {\n      return colors[0];\n    }\n    for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\n      if (values[i] \x3e\x3d value) {\n        float f \x3d (value - values[i-1]) / (values[i] - values[i-1]);\n        return mix(colors[i-1], colors[i], f);\n      }\n    }\n    return colors[VV_COLOR_N - 1];\n  }\n#endif",
"vsPrecision.glsl":"precision highp float;\nprecision highp sampler2D;"}}})},"esri/views/webgl/ShaderCompiler":function(){define(["require","exports"],function(p,c){return function(){function c(c){this.readFile=c}c.prototype.resolveIncludes=function(c){return this.resolve(c)};c.prototype.resolve=function(c,k){var d=this;void 0===k&&(k=new Map);if(k.has(c))return k.get(c);var h=this.read(c);if(!h)throw Error("cannot find shader file "+c);for(var g=/^[^\S\n]*#include\s+<(\S+)>[^\S\n]?/gm,f=g.exec(h),
b=[];null!=f;)b.push({path:f[1],start:f.index,length:f[0].length}),f=g.exec(h);var a=0,e="";b.forEach(function(b){e+=h.slice(a,b.start);e+=k.has(b.path)?"":d.resolve(b.path,k);a=b.start+b.length});e+=h.slice(a);k.set(c,e);return e};c.prototype.read=function(c){return this.readFile(c)};return c}()})},"esri/views/webgl/programUtils":function(){define(["require","exports","./Program"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.glslifyDefineMap=function(c){var k="",d;for(d in c){var h=
c[d];if("boolean"===typeof h)h&&(k+="#define "+d+"\n");else if("number"===typeof h)k+="#define "+d+" "+h.toFixed()+"\n";else if("object"===typeof h){var g=h.options,f=0,b;for(b in g)k+="#define "+g[b]+" "+(f++).toFixed()+"\n";k+="#define "+d+" "+g[h.value]+"\n"}}return k};c.createProgram=function(c,k,d,h){d=d||{};h=h||"";d="function"===typeof k.shaders?k.shaders(d):k.shaders;return new n(c,h+d.vertexShader,h+d.fragmentShader,k.attributes)}})},"esri/views/webgl/Program":function(){define(["require",
"exports","../../core/has","./ShaderTranspiler"],function(p,c,n,l){return function(){function c(d,h,g,f,b){void 0===b&&(b={});this._glName=this._context=null;this._locations={};this._id=void 0;this._initialized=!1;this._fShader=this._vShader=null;this._defines={};this._nameToUniformLocation={};this._nameToAttribLocation={};this._nameToUniform1={};this._nameToUniform1v={};this._nameToUniform2={};this._nameToUniform3={};this._nameToUniform4={};this._nameToUniformMatrix3={};this._nameToUniformMatrix4=
{};d||console.error("RenderingContext isn't initialized!");0===h.length&&console.error("Shaders source should not be empty!");this._context=d;this._vertexShaderSource=h;this._fragmentShaderSource=g;if(Array.isArray(b))for(h=0;h<b.length;h++)this._defines[b[h]]="1";else this._defines=b;this._id=c._nextId++;this._locations=f;n("esri-webgl-debug")&&d.instanceCounter.incrementCount(3)}Object.defineProperty(c.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0});c.prototype.getDefine=function(d){return this._defines[d]};c.prototype.dispose=function(){if(this._context){var d=this._context.gl;this._vShader&&(d.deleteShader(this._vShader),this._vShader=null);this._fShader&&(d.deleteShader(this._fShader),this._fShader=null);this._glName&&(d.deleteProgram(this._glName),
this._glName=null);n("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(3);this._context=null}};c.prototype.initialize=function(){if(!this._initialized){this._vShader=this._loadShader(35633);this._fShader=this._loadShader(35632);this._vShader&&this._fShader||console.error("Error loading shaders!");var d=this._context.gl,c=d.createProgram();d.attachShader(c,this._vShader);d.attachShader(c,this._fShader);for(var g in this._locations)d.bindAttribLocation(c,this._locations[g],g);d.linkProgram(c);
d.getProgramParameter(c,d.LINK_STATUS)||console.error("Could not initialize shader\nVALIDATE_STATUS: "+d.getProgramParameter(c,d.VALIDATE_STATUS)+", gl error ["+d.getError()+"]infoLog: "+d.getProgramInfoLog(c));this._glName=c;this._initialized=!0}};c.prototype.getUniformLocation=function(d){this.initialize();void 0===this._nameToUniformLocation[d]&&(this._nameToUniformLocation[d]=this._context.gl.getUniformLocation(this._glName,d));return this._nameToUniformLocation[d]};c.prototype.hasUniform=function(d){return null!==
this.getUniformLocation(d)};c.prototype.getAttribLocation=function(d){this.initialize();void 0===this._nameToAttribLocation[d]&&(this._nameToAttribLocation[d]=this._context.gl.getAttribLocation(this._glName,d));return this._nameToAttribLocation[d]};c.prototype.setUniform1i=function(d,c){var h=this._nameToUniform1[d];if(void 0===h||c!==h)this._context.bindProgram(this),this._context.gl.uniform1i(this.getUniformLocation(d),c),this._nameToUniform1[d]=c};c.prototype.setUniform1iv=function(d,h){var g=
this._nameToUniform1v[d];void 0!==g&&c._arraysEqual(h,g)||(this._context.bindProgram(this),this._context.gl.uniform1iv(this.getUniformLocation(d),h),void 0===g?this._nameToUniform1v[d]=c._arrayCopy(h):c._arrayAssign(h,g))};c.prototype.setUniform1f=function(d,c){var h=this._nameToUniform1[d];if(void 0===h||c!==h)this._context.bindProgram(this),this._context.gl.uniform1f(this.getUniformLocation(d),c),this._nameToUniform1[d]=c};c.prototype.setUniform1fv=function(d,h){var g=this._nameToUniform1v[d];void 0!==
g&&c._arraysEqual(h,g)||(this._context.bindProgram(this),this._context.gl.uniform1fv(this.getUniformLocation(d),h),void 0===g?this._nameToUniform1v[d]=c._arrayCopy(h):c._arrayAssign(h,g))};c.prototype.setUniform2f=function(d,c,g){var f=this._nameToUniform2[d];if(void 0===f||c!==f[0]||g!==f[1])this._context.bindProgram(this),this._context.gl.uniform2f(this.getUniformLocation(d),c,g),void 0===f?this._nameToUniform2[d]=[c,g]:(f[0]=c,f[1]=g)};c.prototype.setUniform2fv=function(d,h){var g=this._nameToUniform2[d];
void 0!==g&&c._arraysEqual(h,g)||(this._context.bindProgram(this),this._context.gl.uniform2fv(this.getUniformLocation(d),h),void 0===g?this._nameToUniform2[d]=c._arrayCopy(h):c._arrayAssign(h,g))};c.prototype.setUniform3f=function(d,c,g,f){var b=this._nameToUniform3[d];if(void 0===b||c!==b[0]||g!==b[1]||f!==b[2])this._context.bindProgram(this),this._context.gl.uniform3f(this.getUniformLocation(d),c,g,f),void 0===b?this._nameToUniform3[d]=[c,g,f]:(b[0]=c,b[1]=g,b[2]=f)};c.prototype.setUniform3fv=function(d,
h){var g=this._nameToUniform3[d];void 0!==g&&c._arraysEqual(h,g)||(this._context.bindProgram(this),this._context.gl.uniform3fv(this.getUniformLocation(d),h),void 0===g?this._nameToUniform3[d]=c._arrayCopy(h):c._arrayAssign(h,g))};c.prototype.setUniform4f=function(d,c,g,f,b){var a=this._nameToUniform4[d];if(void 0===a||c!==a[0]||g!==a[1]||f!==a[2]||b!==a[3])this._context.bindProgram(this),this._context.gl.uniform4f(this.getUniformLocation(d),c,g,f,b),void 0===a?this._nameToUniform4[d]=[c,g,f,b]:(a[0]=
c,a[1]=g,a[2]=f,a[3]=b)};c.prototype.setUniform4fv=function(d,h){var g=this._nameToUniform4[d];void 0!==g&&c._arraysEqual(h,g)||(this._context.bindProgram(this),this._context.gl.uniform4fv(this.getUniformLocation(d),h),void 0===g?this._nameToUniform4[d]=c._arrayCopy(h):c._arrayAssign(h,g))};c.prototype.setUniformMatrix3fv=function(d,h,g){void 0===g&&(g=!1);var f=this._nameToUniformMatrix3[d];void 0!==f&&(9===f.length?c._matrix3Equal(f,h):c._arraysEqual(h,f))||(this._context.bindProgram(this),this._context.gl.uniformMatrix3fv(this.getUniformLocation(d),
g,h),void 0===f?this._nameToUniformMatrix3[d]=c._arrayCopy(h):c._arrayAssign(h,f))};c.prototype.setUniformMatrix4fv=function(d,h,g){void 0===g&&(g=!1);var f=this._nameToUniformMatrix4[d];void 0!==f&&(16===f.length?c._matrix4Equal(f,h):c._arraysEqual(h,f))||(this._context.bindProgram(this),this._context.gl.uniformMatrix4fv(this.getUniformLocation(d),g,h),void 0===f?this._nameToUniformMatrix4[d]=c._arrayCopy(h):c._arrayAssign(h,f))};c._padToThree=function(d){var c=d.toString();1E3>d&&(c=("  "+d).slice(-3));
return c};c.prototype._addLineNumbers=function(d){var h=2;return d.replace(/\n/g,function(){return"\n"+c._padToThree(h++)+":"})};c.prototype._loadShader=function(d){var c=35633===d,g=c?this._vertexShaderSource:this._fragmentShaderSource,f;f="";for(var b in this._defines)f+="#define "+b+" "+this._defines[b]+"\n";f+=g;"webgl2"===this._context.contextVersion&&(f=l.transpileShader(f,c?"vertex":"fragment"));c=this._context.gl;d=c.createShader(d);c.shaderSource(d,f);c.compileShader(d);c.getShaderParameter(d,
c.COMPILE_STATUS)||(console.error(c.getShaderInfoLog(d)),console.error(this._addLineNumbers(f)),"webgl2"===this._context.contextVersion&&(console.log("Shader source before transpilation:"),console.log(g)));return d};c._matrix4Equal=function(d,c){return d[0]===c[0]&&d[1]===c[1]&&d[2]===c[2]&&d[3]===c[3]&&d[4]===c[4]&&d[5]===c[5]&&d[6]===c[6]&&d[7]===c[7]&&d[8]===c[8]&&d[9]===c[9]&&d[10]===c[10]&&d[11]===c[11]&&d[12]===c[12]&&d[13]===c[13]&&d[14]===c[14]&&d[15]===c[15]};c._matrix3Equal=function(d,c){return d[0]===
c[0]&&d[1]===c[1]&&d[2]===c[2]&&d[3]===c[3]&&d[4]===c[4]&&d[5]===c[5]&&d[6]===c[6]&&d[7]===c[7]&&d[8]===c[8]};c._arraysEqual=function(d,c){if(d.length!==c.length)return!1;for(var g=0;g<d.length;++g)if(d[g]!==c[g])return!1;return!0};c._arrayCopy=function(d){for(var c=[],g=0;g<d.length;++g)c.push(d[g]);return c};c._arrayAssign=function(d,c){for(var g=0;g<d.length;++g)c[g]=d[g]};c._nextId=0;return c}()})},"esri/views/webgl/ShaderTranspiler":function(){define(["require","exports","./reservedWordsGLSL3",
"./lib/glsl-tokenizer/string"],function(p,c,n,l){function k(d){return d.map(function(b){return"eof"!==b.type?b.data:""}).join("")}function d(c,b,a,e){e=e||a;for(var f=0;f<c.length;f++){var g=c[f];if("ident"===g.type&&g.data===a)return e in b?b[e]++:b[e]=0,d(c,b,e+"_"+b[e],e)}return a}function h(d,b,a){void 0===a&&(a="afterVersion");var e={data:"\n",type:"whitespace"},c=function(a){return a<d.length?/[^\r\n]$/.test(d[a].data):!1},f=function(b){for(var d=-1,e=0,c=-1,f=0;f<b.length;f++){var m=b[f];"preprocessor"===
m.type&&(m.data.match(/\#(if|ifdef|ifndef)\s+.+/)?++e:m.data.match(/\#endif\s*.*/)&&--e);("afterVersion"===a||"afterPrecision"===a)&&"preprocessor"===m.type&&/^#version/.test(m.data)&&(c=Math.max(c,f));if("afterPrecision"===a&&"keyword"===m.type&&"precision"===m.data){a:{for(m=f;m<b.length;m++){var g=b[m];if("operator"===g.type&&";"===g.data)break a}m=null}if(null===m)throw Error("precision statement not followed by any semicolons!");c=Math.max(c,m)}d<c&&0===e&&(d=f)}return d+1}(d);c(f-1)&&d.splice(f++,
0,e);for(var g=0;g<b.length;g++){var h=b[g];d.splice(f++,0,h)}c(f-1)&&c(f)&&d.splice(f,0,e)}Object.defineProperty(c,"__esModule",{value:!0});var g=["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"];c.transpileShader=function(c,b){c=l(c);var a;a:{a="100";var e="300 es";void 0===a&&(a="100");void 0===e&&(e="300 es");for(var f=/^\s*\#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/,q=0;q<c.length;q++){var u=c[q];if("preprocessor"===u.type){var t=f.exec(u.data);
if(t){f=t[1].replace(/\s\s+/g," ");if(f===e){a=f;break a}if(f===a){u.data="#version "+e;break a}throw Error("unknown glsl version: "+f);}}}c.splice(0,0,{type:"preprocessor",data:"#version "+e},{type:"whitespace",data:"\n"});a=null}if("300 es"===a)throw Error("shader is already glsl 300 es");f=u=null;q={};t={};for(a=0;a<c.length;++a)switch(e=c[a],e.type){case "keyword":"vertex"===b&&"attribute"===e.data?e.data="in":"varying"===e.data&&(e.data="vertex"===b?"out":"in");break;case "builtin":/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(e.data.trim())&&
(e.data=e.data.replace(/(2D|Cube|EXT)/g,""));if("fragment"===b&&"gl_FragColor"===e.data){if(!u){var u=d(c,q,"fragColor"),r=void 0;void 0===r&&(r="lowp");h(c,[{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:r},{type:"whitespace",data:" "},{type:"keyword",data:"vec4"},{type:"whitespace",data:" "},{type:"ident",data:u},{type:"operator",data:";"}],"afterPrecision")}e.data=u}else"fragment"===b&&"gl_FragDepthEXT"===e.data&&(f||(f=d(c,q,"gl_FragDepth")),e.data=f);break;case "ident":if(0<=
n.indexOf(e.data)){if(r="vertex"===b)a:{for(r=a-1;0<=r;r--){var x=c[r];if("whitespace"!==x.type&&"block-comment"!==x.type)if("keyword"===x.type){if("attribute"===x.data||"in"===x.data){r=!0;break a}}else break}r=!1}if(r)throw Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");e.data in t||(t[e.data]=d(c,q,e.data));e.data=t[e.data]}}for(a=c.length-1;0<=a;--a)e=c[a],"preprocessor"===e.type&&((b=e.data.match(/\#extension\s+(.*)\:/))&&b[1]&&0<=g.indexOf(b[1].trim())&&
(b=c[a+1],c.splice(a,b&&"whitespace"===b.type?2:1)),(b=e.data.match(/\#ifdef\s+(.*)/))&&b[1]&&0<=g.indexOf(b[1].trim())&&(e.data="#if 1"),(b=e.data.match(/\#ifndef\s+(.*)/))&&b[1]&&0<=g.indexOf(b[1].trim())&&(e.data="#if 0"));return k(c)}})},"esri/views/webgl/reservedWordsGLSL3":function(){define(["require","exports"],function(p,c){return"layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uint uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" ")})},
"esri/views/webgl/lib/glsl-tokenizer/string":function(){define(["./index"],function(p){"use strict;";return function(c){var n=p(),l=[],l=l.concat(n(c));return l=l.concat(n(null))}})},"esri/views/webgl/lib/glsl-tokenizer/index":function(){define(["./lib/literals","./lib/operators","./lib/builtins"],function(p,c,n){"use strict;";var l="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ");return function(){function k(a){a.length&&x.push({type:l[q],
data:a,position:y,line:w,column:v})}function d(){r=r.length?[]:r;if("/"===t&&"*"===u)return y=m+e-1,q=0,t=u,e+1;if("/"===t&&"/"===u)return y=m+e-1,q=1,t=u,e+1;if("#"===u)return q=2,y=m+e,e;if(/\s/.test(u))return q=9,y=m+e,e;z=/\d/.test(u);A=/[^\w_]/.test(u);y=m+e;q=z?4:A?3:9999;return e}function h(){if(("\r"===u||"\n"===u)&&"\\"!==t)return k(r.join("")),q=999,e;r.push(u);t=u;return e+1}function g(){if("."===t&&/\d/.test(u))return q=5,e;if("/"===t&&"*"===u)return q=0,e;if("/"===t&&"/"===u)return q=
1,e;if("."===u&&r.length){for(;f(r););q=5;return e}if(";"===u||")"===u||"("===u){if(r.length)for(;f(r););k(u);q=999;return e+1}var a=2===r.length&&"\x3d"!==u;if(/[\w_\d\s]/.test(u)||a){for(;f(r););q=999;return e}r.push(u);t=u;return e+1}function f(a){var b=0,d,e;do{d=c.indexOf(a.slice(0,a.length+b).join(""));e=c[d];if(-1===d){if(0<b--+a.length)continue;e=a.slice(0,1).join("")}k(e);y+=e.length;r=r.slice(e.length);return r.length}while(1)}function b(){if("."===u||/[eE]/.test(u))return r.push(u),q=5,
t=u,e+1;if("x"===u&&1===r.length&&"0"===r[0])return q=11,r.push(u),t=u,e+1;if(/[^\d]/.test(u))return k(r.join("")),q=999,e;r.push(u);t=u;return e+1}function a(){"f"===u&&(r.push(u),t=u,e+=1);if(/[eE]/.test(u)||"-"===u&&/[eE]/.test(t))return r.push(u),t=u,e+1;if(/[^\d]/.test(u))return k(r.join("")),q=999,e;r.push(u);t=u;return e+1}var e=0,m=0,q=999,u,t,r=[],x=[],w=1,v=0,y=0,z=!1,A=!1,B="",D;return function(c){x=[];if(null!==c){c=c.replace?c.replace(/\r\n/g,"\n"):c;e=0;B+=c;for(D=B.length;u=B[e],e<
D;){c=e;switch(q){case 0:"/"===u&&"*"===t?(r.push(u),k(r.join("")),q=999):(r.push(u),t=u);e+=1;break;case 1:e=h();break;case 2:e=h();break;case 3:e=g();break;case 4:e=b();break;case 11:/[^a-fA-F0-9]/.test(u)?(k(r.join("")),q=999):(r.push(u),t=u,e+=1);break;case 5:e=a();break;case 9999:if(/[^\d\w_]/.test(u)){var f=r.join("");q=-1<p.indexOf(f)?8:-1<n.indexOf(f)?7:6;k(r.join(""));q=999}else r.push(u),t=u,e+=1;break;case 9:/[^\s]/g.test(u)?(k(r.join("")),q=999):(r.push(u),t=u,e+=1);break;case 999:e=d()}if(c!==
e)switch(B[c]){case "\n":v=0;++w;break;default:++v}}m+=e;B=B.slice(e);return x}r.length&&k(r.join(""));q=10;k("(eof)");return x}}})},"esri/views/webgl/lib/glsl-tokenizer/lib/literals":function(){define([],function(){return"precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")})},
"esri/views/webgl/lib/glsl-tokenizer/lib/operators":function(){define([],function(){"use strict;";return"\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")})},"esri/views/webgl/lib/glsl-tokenizer/lib/builtins":function(){define([],function(){return"abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")})},
"esri/views/webgl/BufferObject":function(){define(["require","exports","../../core/has","../../core/typedArrayUtil"],function(p,c,n,l){return function(){function c(d,h,g,f,b){this._glName=this._context=null;this._bufferType=void 0;this._usage=35044;this._size=-1;this._indexType=void 0;this._context=d;this._bufferType=h;this._usage=g;this._id=c._nextId++;this._glName=this._context.gl.createBuffer();n("esri-webgl-debug")&&d.instanceCounter.incrementCount(1);f&&this.setData(f,b)}c.createIndex=function(d,
h,g,f){return new c(d,34963,h,g,f)};c.createVertex=function(d,h,g){return new c(d,34962,h,g)};Object.defineProperty(c.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"usage",{get:function(){return this._usage},enumerable:!0,
configurable:!0});Object.defineProperty(c.prototype,"bufferType",{get:function(){return this._bufferType},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"indexType",{get:function(){return this._indexType},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"byteSize",{get:function(){return 34962===this._bufferType?this._size:5125===this._indexType?4*this._size:2*this._size},enumerable:!0,configurable:!0});c.prototype.dispose=function(){this._context&&(this._glName&&
(this._context.gl.deleteBuffer(this._glName),this._glName=null),n("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(1),this._context=null)};c.prototype.setData=function(d,c){if(d){if("number"===typeof d){if(0>d&&console.error("Buffer size cannot be negative!"),34963===this._bufferType&&c)switch(this._indexType=c,this._size=d,c){case 5123:d*=2;break;case 5125:d*=4}}else c=d.byteLength,l.isUint16Array(d)&&(c/=2,this._indexType=5123),l.isUint32Array(d)&&(c/=4,this._indexType=5125),this._size=
c;c=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);this._context.gl.bufferData(this._bufferType,d,this._usage);this._context.bindVAO(c)}};c.prototype.setSubData=function(d,c,g,f){void 0===c&&(c=0);void 0===g&&(g=0);if(d){(0>c||c>=this._size)&&console.error("offset is out of range!");var b=c,a=g,e=f,m=d.byteLength;l.isUint16Array(d)&&(m/=2,b*=2,a*=2,e*=2);l.isUint32Array(d)&&(m/=4,b*=4,a*=4,e*=4);void 0===f&&(f=m-1);g>=f&&console.error("end must be bigger than start!");
c+g-f>this._size&&console.error("An attempt to write beyond the end of the buffer!");c=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);g=this._context.gl;d=ArrayBuffer.isView(d)?d.buffer:d;g.bufferSubData(this._bufferType,b,d.slice(a,e));this._context.bindVAO(c)}};c._nextId=0;return c}()})},"esri/views/webgl/renderState":function(){define(["require","exports","../../core/tsSupport/assignHelper"],function(p,c,n){function l(a){return y.intern(a)}function k(a){return z.intern(a)}
function d(a){return A.intern(a)}function h(a){return B.intern(a)}function g(a){return D.intern(a)}function f(a){return C.intern(a)}function b(a){return E.intern(a)}function a(a){return H.intern(a)}function e(a){return"["+a.join(",")+"]"}function m(a){return a?e([a.srcRgb,a.srcAlpha,a.dstRgb,a.dstAlpha,a.opRgb,a.opAlpha,a.color.r,a.color.g,a.color.b,a.color.a]):null}function q(a){return a?e([a.face,a.mode]):null}function u(a){return a?e([a.factor,a.units]):null}function t(a){return a?e([a.func]):
null}function r(a){return a?e([a.function.func,a.function.ref,a.function.mask,a.operation.fail,a.operation.zFail,a.operation.zPass]):null}function x(a){return a?e([a.zNear,a.zFar]):null}function w(a){return a?e([a.r,a.g,a.b,a.a]):null}function v(a){return a?e([a.mask]):null}Object.defineProperty(c,"__esModule",{value:!0});c.simpleBlendingParams=function(a,b,d,e){void 0===d&&(d=32774);void 0===e&&(e=[0,0,0,0]);return{srcRgb:a,srcAlpha:a,dstRgb:b,dstAlpha:b,opRgb:d,opAlpha:d,color:{r:e[0],g:e[1],b:e[2],
a:e[3]}}};c.separateBlendingParams=function(a,b,d,e,c,f,m){void 0===c&&(c=32774);void 0===f&&(f=32774);void 0===m&&(m=[0,0,0,0]);return{srcRgb:a,srcAlpha:b,dstRgb:d,dstAlpha:e,opRgb:c,opAlpha:f,color:{r:m[0],g:m[1],b:m[2],a:m[3]}}};c.backFaceCullingParams={face:1029,mode:2305};c.defaultDepthWriteParams={zNear:0,zFar:1};c.defaultColorWriteParams={r:!0,g:!0,b:!0,a:!0};c.makeBlending=l;c.makeCulling=k;c.makePolygonOffset=d;c.makeDepthTest=h;c.makeStencilTest=g;c.makeDepthWrite=f;c.makeColorWrite=b;c.makeStencilWrite=
a;c.makePipelineState=function(a){return G.intern(a)};p=function(){function a(a,b){this.makeKey=a;this.makeRef=b;this.interns=new Map}a.prototype.intern=function(a){if(!a)return null;var b=this.makeKey(a),d=this.interns;d.has(b)||d.set(b,this.makeRef(a));return d.get(b)};return a}();var y=new p(m,function(a){return n({__tag:"Blending"},a)}),z=new p(q,function(a){return n({__tag:"Culling"},a)}),A=new p(u,function(a){return n({__tag:"PolygonOffset"},a)}),B=new p(t,function(a){return n({__tag:"DepthTest"},
a)}),D=new p(r,function(a){return n({__tag:"StencilTest"},a)}),C=new p(x,function(a){return n({__tag:"DepthWrite"},a)}),E=new p(w,function(a){return n({__tag:"ColorWrite"},a)}),H=new p(v,function(a){return n({__tag:"StencilWrite"},a)}),G=new p(function(a){return a?e([m(a.blending),q(a.culling),u(a.polygonOffset),t(a.depthTest),r(a.stencilTest),x(a.depthWrite),w(a.colorWrite),v(a.stencilWrite)]):null},function(e){return{blending:l(e.blending),culling:k(e.culling),polygonOffset:d(e.polygonOffset),depthTest:h(e.depthTest),
stencilTest:g(e.stencilTest),depthWrite:f(e.depthWrite),colorWrite:b(e.colorWrite),stencilWrite:a(e.stencilWrite)}});p=function(){function a(a){this._stencilWriteInvalid=this._colorWriteInvalid=this._depthWriteInvalid=this._stencilTestInvalid=this._depthTestInvalid=this._polygonOffsetInvalid=this._cullingInvalid=this._blendingInvalid=this._pipelineInvalid=!0;this._stateSetters=a}a.prototype.setPipeline=function(a){if(this._pipelineInvalid||a!==this._pipeline)this.setBlending(a.blending),this.setCulling(a.culling),
this.setPolygonOffset(a.polygonOffset),this.setDepthTest(a.depthTest),this.setStencilTest(a.stencilTest),this.setDepthWrite(a.depthWrite),this.setColorWrite(a.colorWrite),this.setStencilWrite(a.stencilWrite),this._pipeline=a;this._pipelineInvalid=!1};a.prototype.invalidateBlending=function(){this._pipelineInvalid=this._blendingInvalid=!0};a.prototype.invalidateCulling=function(){this._pipelineInvalid=this._cullingInvalid=!0};a.prototype.invalidatePolygonOffset=function(){this._pipelineInvalid=this._polygonOffsetInvalid=
!0};a.prototype.invalidateDepthTest=function(){this._pipelineInvalid=this._depthTestInvalid=!0};a.prototype.invalidateStencilTest=function(){this._pipelineInvalid=this._stencilTestInvalid=!0};a.prototype.invalidateDepthWrite=function(){this._pipelineInvalid=this._depthWriteInvalid=!0};a.prototype.invalidateColorWrite=function(){this._pipelineInvalid=this._colorWriteInvalid=!0};a.prototype.invalidateStencilWrite=function(){this._pipelineInvalid=this._stencilTestInvalid=!0};a.prototype.setBlending=
function(a){this._blending=this.setSubState(a,this._blending,this._blendingInvalid,this._stateSetters.setBlending);this._blendingInvalid=!1};a.prototype.setCulling=function(a){this._culling=this.setSubState(a,this._culling,this._cullingInvalid,this._stateSetters.setCulling);this._cullingInvalid=!1};a.prototype.setPolygonOffset=function(a){this._polygonOffset=this.setSubState(a,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset);this._polygonOffsetInvalid=!1};a.prototype.setDepthTest=
function(a){this._depthTest=this.setSubState(a,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest);this._depthTestInvalid=!1};a.prototype.setStencilTest=function(a){this._stencilTest=this.setSubState(a,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest);this._stencilTestInvalid=!1};a.prototype.setDepthWrite=function(a){this._depthWrite=this.setSubState(a,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite);this._depthWriteInvalid=
!1};a.prototype.setColorWrite=function(a){this._colorWrite=this.setSubState(a,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite);this._colorWriteInvalid=!1};a.prototype.setStencilWrite=function(a){this._stencilWrite=this.setSubState(a,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite);this._stencilTestInvalid=!1};a.prototype.setSubState=function(a,b,d,e){if(d||a!==b)e(a),this._pipelineInvalid=!0;return a};return a}();c.StateTracker=p})},"esri/views/webgl/Texture":function(){define(["require",
"exports","../../core/has"],function(p,c,n){return function(){function c(k,d,h){this._glName=this._context=null;this._id=-1;this._desc=void 0;this._wrapModeDirty=this._samplingModeDirty=!1;this._boundToUnits=new Set;this._context=k;this._desc={pixelFormat:d.pixelFormat,internalFormat:d.internalFormat,dataType:d.dataType,target:d.target?d.target:3553,samplingMode:d.samplingMode?d.samplingMode:9729,wrapMode:d.wrapMode?d.wrapMode:10497,maxAnisotropy:d.maxAnisotropy,flipped:void 0!==d.flipped?d.flipped:
!1,hasMipmap:void 0!==d.hasMipmap?d.hasMipmap:!1,unpackAlignment:d.unpackAlignment?d.unpackAlignment:4,width:d.width,height:d.height,preMultiplyAlpha:void 0!==d.preMultiplyAlpha?d.preMultiplyAlpha:!1,textureCoordinateScaleFactor:d.textureCoordinateScaleFactor||null};this._id=++c._nextId;n("esri-webgl-debug")&&k.instanceCounter.incrementCount(0);this.setData(h)}Object.defineProperty(c.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});c.prototype.dispose=function(){var c=this;if(this._context&&this._context.gl){if(this._glName){var d=this._context.gl;this._boundToUnits.forEach(function(d){c._context.bindTexture(null,d)});d.deleteTexture(this._glName);this._glName=null}n("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(0);
this._context=null}};c.prototype.resize=function(c,d){var h=this._desc;if(h.width!==c||h.height!==d)h.width=c,h.height=d,this.setData(null)};c.prototype.setData=function(k){var d=this._context.gl;this._glName||(this._glName=d.createTexture());void 0===k&&(k=null);null===k&&(this._desc.width=this._desc.width||4,this._desc.height=this._desc.height||4);var h=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var g=this._desc;c._validateTexture(g);d.pixelStorei(d.UNPACK_ALIGNMENT,g.unpackAlignment);
d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,g.flipped?1:0);d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,g.preMultiplyAlpha?1:0);var f=g.pixelFormat,b=g.internalFormat?g.internalFormat:f;if(k instanceof ImageData||k instanceof HTMLImageElement||k instanceof HTMLCanvasElement||k instanceof HTMLVideoElement)g.width&&g.height&&console.assert(k.width===g.width&&k.height===g.height),d.texImage2D(d.TEXTURE_2D,0,b,f,g.dataType,k),g.hasMipmap&&this.generateMipmap(),void 0===this._desc.width&&(this._desc.width=k.width),
void 0===this._desc.height&&(this._desc.height=k.height);else{null!=g.width&&null!=g.height||console.error("Width and height must be specified!");d.DEPTH24_STENCIL8&&b===d.DEPTH_STENCIL&&(b=d.DEPTH24_STENCIL8);var a=g.width,e=g.height;if(null!=k&&"type"in k&&"compressed"===k.type){f=Math.round(Math.log(Math.max(a,e))/Math.LN2)+1;g.hasMipmap=g.hasMipmap&&f===k.levels.length;for(var m=0;;++m){d.compressedTexImage2D(d.TEXTURE_2D,m,b,a,e,0,k.levels[Math.min(m,k.levels.length-1)]);if(1===a&&1===e||!g.hasMipmap)break;
a=Math.max(1,a>>1);e=Math.max(1,e>>1)}}else if(k)d.texImage2D(d.TEXTURE_2D,0,b,a,e,0,f,g.dataType,k),g.hasMipmap&&this.generateMipmap();else for(m=0;;++m){d.texImage2D(d.TEXTURE_2D,m,b,a,e,0,f,g.dataType,null);if(1===a&&1===e||!g.hasMipmap)break;a=Math.max(1,a>>1);e=Math.max(1,e>>1)}}c._applySamplingMode(d,this._desc);c._applyWrapMode(d,this._desc);c._applyAnisotropicFilteringParameters(this._context,this._desc);this._context.bindTexture(h,0)};c.prototype.updateData=function(c,d,h,g,f,b){b||console.error("An attempt to use uninitialized data!");
this._glName||console.error("An attempt to update uninitialized texture!");var a=this._context.gl,e=this._desc,m=this._context.getBoundTexture(0);this._context.bindTexture(this,0);(0>d||0>h||g>e.width||f>e.height||d+g>e.width||h+f>e.height)&&console.error("An attempt to update out of bounds of the texture!");a.pixelStorei(a.UNPACK_ALIGNMENT,e.unpackAlignment);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,e.flipped?1:0);a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.preMultiplyAlpha?1:0);b instanceof ImageData||
b instanceof HTMLImageElement||b instanceof HTMLCanvasElement||b instanceof HTMLVideoElement?(console.assert(b.width===g&&b.height===f),a.texSubImage2D(a.TEXTURE_2D,c,d,h,e.pixelFormat,e.dataType,b)):a.texSubImage2D(a.TEXTURE_2D,c,d,h,g,f,e.pixelFormat,e.dataType,b);this._context.bindTexture(m,0)};c.prototype.generateMipmap=function(){var k=this._desc;k.hasMipmap||(k.hasMipmap=!0,c._validateTexture(k));9729===k.samplingMode?(this._samplingModeDirty=!0,k.samplingMode=9985):9728===k.samplingMode&&(this._samplingModeDirty=
!0,k.samplingMode=9984);k=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var d=this._context.gl;d.generateMipmap(d.TEXTURE_2D);this._context.bindTexture(k,0)};c.prototype.setSamplingMode=function(k){k!==this._desc.samplingMode&&(this._desc.samplingMode=k,c._validateTexture(this._desc),this._samplingModeDirty=!0)};c.prototype.setWrapMode=function(k){k!==this._desc.wrapMode&&(this._desc.wrapMode=k,c._validateTexture(this._desc),this._wrapModeDirty=!0)};c.prototype.applyChanges=function(){var k=
this._context.gl,d=this._desc;this._samplingModeDirty&&(c._applySamplingMode(k,d),this._samplingModeDirty=!1);this._wrapModeDirty&&(c._applyWrapMode(k,d),this._wrapModeDirty=!1)};c.prototype.setBoundToUnit=function(c,d){d?this._boundToUnits.add(c):this._boundToUnits.delete(c)};c._isPowerOfTwo=function(c){return 0===(c&c-1)};c._validateTexture=function(k){(0>k.width||0>k.height)&&console.error("Negative dimension parameters are not allowed!");c._isPowerOfTwo(k.width)&&c._isPowerOfTwo(k.height)||("number"===
typeof k.wrapMode?33071!==k.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"):33071===k.wrapMode.s&&33071===k.wrapMode.t||console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),k.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))};c._applySamplingMode=function(c,d){var h=d.samplingMode,g=d.samplingMode;if(9985===h||9987===h)h=9729,d.hasMipmap||(g=9729);else if(9984===h||9986===h)h=9728,d.hasMipmap||(g=9728);
c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,h);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,g)};c._applyWrapMode=function(c,d){"number"===typeof d.wrapMode?(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,d.wrapMode),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,d.wrapMode)):(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,d.wrapMode.s),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,d.wrapMode.t))};c._applyAnisotropicFilteringParameters=function(c,d){if(null!=d.maxAnisotropy){var h=c.capabilities.textureFilterAnisotropic;
h&&(c=c.gl,c.texParameterf(c.TEXTURE_2D,h.TEXTURE_MAX_ANISOTROPY,d.maxAnisotropy))}};c._nextId=0;return c}()})},"esri/views/webgl/Util":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../core/compilerUtils"],function(p,c,n,l){function k(d){return d[0].stride}function d(d){switch(d){case 5126:return 4;case 5124:return 4;case 5125:return 4;case 5122:return 2;case 5123:return 2;case 5120:return 1;case 5121:return 1;default:throw Error("Unknown data type");}}function h(d){switch(d){case 6406:case 6409:return 1;
case 6410:return 2;case 6407:return 3;case 6408:return 4;case 34041:return 4;case 33325:return 2;case 33326:return 4;case 35898:return 4;case 33327:return 4;case 33328:return 8;case 34842:return 8;case 34836:return 16;case 33189:return 2;case 34041:return 4;case 32854:return 2;case 36168:return 1;default:l.neverReached(d)}return 0}function g(d){if(!d)return 0;if("colorAttachment"in d)return d.glName?g(d.colorAttachment)+g(d.depthStencilAttachment):0;if("descriptor"in d)return d.glName?g(d.descriptor):
0;var b=d.internalFormat||"pixelFormat"in d&&d.pixelFormat;if(!b)return 0;var a="hasMipmap"in d&&d.hasMipmap?1.3:1;d=d.width*d.height;return h(b)*d*a}Object.defineProperty(c,"__esModule",{value:!0});c.vertexCount=function(d,b){return d.vertexBuffers[b].size/k(d.layout[b])};c.getStride=k;c.getBytesPerElement=d;c.addDescriptor=function(c,b,a,e,m,g){var f=d(e);if(0<c.length){var h=c[0].stride,k=h+f*a;c.forEach(function(a){return a.stride=k});c.push({name:b,count:a,type:e,offset:h,stride:k,normalized:m,
divisor:g})}else c.push({name:b,count:a,type:e,offset:0,stride:f*a,normalized:m,divisor:g})};c.assertCompatibleVertexAttributeLocations=function(d,b){(d=d.locations===b.locations)||console.error("VertexAttributeLocations are incompatible");return d};c.hasAttribute=function(d,b){for(var a=0;a<d.length;a++)if(d[a].name===b)return!0;return!1};c.findAttribute=function(d,b){for(var a=0;a<d.length;a++)if(d[a].name===b)return d[a];return null};c.copyFramebufferToTexture=function(d,b,a,e,c){void 0===c&&(c=
0);var f=d.getBoundFramebufferObject(),m=d.getBoundTexture(0);d.bindFramebuffer(b);d.bindTexture(a,0);d.gl.copyTexImage2D(d.gl.TEXTURE_2D,c,a.descriptor.pixelFormat,e[0],e[1],e[2],e[3],0);d.gl.flush();d.bindFramebuffer(f);d.bindTexture(m,0)};c.setBaseInstanceOffset=function(d,b){var a={},e;for(e in d)a[e]=d[e].map(function(a){return a.divisor?n({},a,{baseInstance:b}):a});return a};c.bindVertexBufferLayout=function(d,b,a,e,c){var f=d.gl,m=d.capabilities.instancing;d.bindBuffer(a);for(d=0;d<e.length;d++){a=
e[d];var g=b[a.name],h=(c?c:0+a.baseInstance?a.baseInstance:0)*a.stride;void 0===g&&console.error("There is no location for vertex attribute '"+a.name+"' defined.");a.baseInstance&&!a.divisor&&console.error("Vertex attribute '"+a.name+"' uses baseInstanceOffset without divisor.");if(4>=a.count)f.vertexAttribPointer(g,a.count,a.type,a.normalized,a.stride,a.offset+h),f.enableVertexAttribArray(g),a.divisor&&0<a.divisor&&m&&m.vertexAttribDivisor(g,a.divisor);else if(9===a.count)for(var k=0;3>k;k++)f.vertexAttribPointer(g+
k,3,a.type,a.normalized,a.stride,a.offset+12*k+h),f.enableVertexAttribArray(g+k),a.divisor&&0<a.divisor&&m&&m.vertexAttribDivisor(g+k,a.divisor);else if(16===a.count)for(k=0;4>k;k++)f.vertexAttribPointer(g+k,4,a.type,a.normalized,a.stride,a.offset+16*k+h),f.enableVertexAttribArray(g+k),a.divisor&&0<a.divisor&&m&&m.vertexAttribDivisor(g+k,a.divisor);else console.error("Unsupported vertex attribute element count: "+a.count)}};c.unbindVertexBufferLayout=function(d,b,a,e){var c=d.gl,f=d.capabilities.instancing;
d.bindBuffer(a);for(a=0;a<e.length;a++){var g=e[a],h=b[g.name];if(4>=g.count)c.disableVertexAttribArray(h),g.divisor&&0<g.divisor&&f&&f.vertexAttribDivisor(h,0);else if(9===g.count)for(var k=0;3>k;k++)c.disableVertexAttribArray(h+k),g.divisor&&0<g.divisor&&f&&f.vertexAttribDivisor(h+k,0);else if(16===g.count)for(k=0;4>k;k++)c.disableVertexAttribArray(h+k),g.divisor&&0<g.divisor&&f&&f.vertexAttribDivisor(h+k,0);else console.error("Unsupported vertex attribute element count: "+g.count)}d.unbindBuffer(34962)};
c.getBytesPerElementFormat=h;c.getGpuMemoryUsage=g})},"esri/views/webgl/VertexArrayObject":function(){define(["require","exports","../../core/has","./Util"],function(p,c,n,l){return function(){function c(d,h,g,f,b){this._locations=this._layout=this._glName=this._context=null;this._indexBuffer=this._buffers=void 0;this._initialized=!1;this._context=d;this._layout=g;this._buffers=f;this._locations=h;b&&(this._indexBuffer=b);this._id=c._nextId++;n("esri-webgl-debug")&&d.instanceCounter.incrementCount(2)}
Object.defineProperty(c.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"vertexBuffers",{get:function(){return this._buffers},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"indexBuffer",{get:function(){return this._indexBuffer},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"size",{get:function(){var d=
this;return Object.keys(this._buffers).reduce(function(c,g){return c+d._buffers[g].size},this._indexBuffer?this._indexBuffer.size:0)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0});c.prototype.dispose=function(d){void 0===d&&(d=!0);if(this._context){var c=this._context.capabilities.vao;
c&&this._glName&&(c.deleteVertexArray(this._glName),this._glName=null);this._context.getBoundVAO()===this&&this._context.bindVAO(null);if(d){for(var g in this._buffers)this._buffers[g].dispose(),delete this._buffers[g];this._indexBuffer&&(this._indexBuffer.dispose(),this._indexBuffer=null)}n("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(2);this._context=null}};c.prototype.initialize=function(){if(!this._initialized){var d=this._context.capabilities.vao;if(d){var c=d.createVertexArray();
d.bindVertexArray(c);this._bindLayout();d.bindVertexArray(null);this._glName=c}this._initialized=!0}};c.prototype.bind=function(){this.initialize();var d=this._context.capabilities.vao;d?d.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())};c.prototype._bindLayout=function(){var d=this._buffers,c=!!this._context.capabilities.vao,g=this._layout,f=this._indexBuffer;d||console.error("Vertex buffer dictionary is empty!");var b=this._context.gl,a;for(a in d){var e=d[a];e||console.error("Vertex buffer is uninitialized!");
var m=g[a];m||console.error("Vertex element descriptor is empty!");l.bindVertexBufferLayout(this._context,this._locations,e,m)}f&&(c?b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,f.glName):this._context.bindBuffer(f))};c.prototype.unbind=function(){this.initialize();var d=this._context.capabilities.vao;d?d.bindVertexArray(null):this._unbindLayout()};c.prototype._unbindLayout=function(){var d=this._buffers,c=this._layout;d||console.error("Vertex buffer dictionary is empty!");for(var g in d){var f=d[g];f||console.error("Vertex buffer is uninitialized!");
l.unbindVertexBufferLayout(this._context,this._locations,f,c[g])}(d=this._indexBuffer)&&this._context.unbindBuffer(d.bufferType)};c._nextId=0;return c}()})},"esri/views/3d/environment/RealisticAtmosphere":function(){define("require exports ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/Handles ../../../core/watchUtils ../../../core/libs/gl-matrix-2/vec2 ../../../core/libs/gl-matrix-2/vec2f64 ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../core/libs/gl-matrix-2/vec4 ../../../core/libs/gl-matrix-2/vec4f64 ./atmosphereUtils ../support/earthUtils ../support/buffer/glUtil ../support/buffer/InterleavedLayout ../webgl-engine/shaders/RealisticAtmospherePrograms ../../webgl/BufferObject ../../webgl/programUtils ../../webgl/renderState ../../webgl/Util ../../webgl/VertexArrayObject".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z){p=function(){function c(a){this.needsRender=!1;this.didRender=!0;this.slot=13;this._hazeSlot=14;this._renderData={texDepth:g.vec2f64.create(),v3CameraPos:b.vec3f64.create(),v3CameraUp:b.vec3f64.create(),v3CameraRight:b.vec3f64.create(),v3CameraDir:b.vec3f64.create(),halfSizeNearPlane:g.vec2f64.create(),v2CameraCenterOffset:g.vec2f64.create(),v4SphereComp:e.vec4f64.create(),v4AtmosParams1:e.vec4f64.create(),v4AtmosParams2:e.vec4f64.create(),v4AtmosParams3:e.vec4f64.create(),
v3InvWavelength:B,v3InvWavelengthScaled:D,v4Radii:e.vec4f64.create(),fScale:0,fScaleDepth:C,fLowerAlphaBlendBound:0,fScaleOverScaleDepth:0,fOneOverScaleDepth:0,fScaleDepthBlue:E,fOneOverScaleDepthBlue:G,fScaleOverScaleDepthBlue:0,g:I,g2:I*I,fMiePhaseCoefficients:K,showTest:0,nearFar:g.vec2f64.create(),fCameraHeight:0,fCameraHeight2:0,fC:0,fCSur:0,fInnerFadeDistance:0,fAltitudeFade:0};this._lowerElevationBoundRadius=0;this._earthRadius=q.earthRadius;this.view=a;this._updateRadius(q.earthRadius)}c.prototype.destroy=
function(){this._handles&&(this._handles.destroy(),this._handles=null);this._hazeProgram&&(this._hazeProgram.dispose(),this._hazeProgram=null);this._skyProgram&&(this._skyProgram.dispose(),this._skyProgram=null);this._vao&&(this._vao.dispose(),this._vao=null)};c.prototype.when=function(a){return l(this,void 0,void 0,function(){return n(this,function(b){a();return[2]})})};c.prototype.initializeRenderContext=function(a){var b=this;a=a.rctx;this._handles=new k;this._updateElevation({spatialReference:this.view.basemapTerrain.spatialReference,
tile:this.view.basemapTerrain.rootTiles[0],extent:this.view.basemapTerrain.rootTiles[0].extent});this._handles.add(d.on(this.view,"basemapTerrain","elevation-change",function(a){return b._updateElevation(a)},function(){return b._updateElevation()}));this._handles.add(d.on(this.view,"basemapTerrain","elevation-bounds-change",function(){return b._updateVisibleElevationBounds()},function(){return b._updateVisibleElevationBounds()}));this._hazeProgram=w.createProgram(a,r.program,{haze:!0});this._skyProgram=
w.createProgram(a,r.program);this._hazePipelineState=v.makePipelineState({blending:v.separateBlendingParams(1,0,769,1),colorWrite:v.defaultColorWriteParams});this._skyPipelineState=v.makePipelineState({blending:v.separateBlendingParams(770,1,771,771),depthTest:{func:515},colorWrite:v.defaultColorWriteParams});this._vao=this._createVertexArrayObject(a)};c.prototype.uninitializeRenderContext=function(a){this.destroy()};c.prototype.render=function(a){if(a.slot!==this._hazeSlot&&a.slot!==this.slot||0!==
a.pass)return!1;this._update(a.camera);a.slot===this.slot&&this._renderSky(a);a.slot===this._hazeSlot&&this._renderHaze(a);this.needsRender=!1;return!0};c.prototype._renderSky=function(a){var b=a.rctx,d=this._skyProgram;b.bindProgram(d);b.setPipelineState(this._skyPipelineState);d.setUniform4fv("v4AtmosParams3",this._renderData.v4AtmosParams3);this._renderCommon(d,a)};c.prototype._renderHaze=function(a){var b=this,d=a.rctx,e=a.offscreenRenderingHelper,c=this._hazeProgram;d.bindProgram(c);d.setPipelineState(this._hazePipelineState);
e.renderDepthDetached(function(){d.bindTexture(e.depthTexture,0);c.setUniform1i("tDepth",0);b._renderCommon(c,a)})};c.prototype._renderCommon=function(a,b){var d=b.rctx;a.setUniform3fv("v3InvWavelength",this._renderData.v3InvWavelength);a.setUniform3fv("v3InvWavelengthScaled",this._renderData.v3InvWavelengthScaled);a.setUniform3fv("v3LightDir",b.lightingData.direction);a.setUniform4fv("v4SphereComp",this._renderData.v4SphereComp);a.setUniform3fv("v3CameraPos",this._renderData.v3CameraPos);a.setUniform3fv("v3CameraUp",
this._renderData.v3CameraUp);a.setUniform3fv("v3CameraRight",this._renderData.v3CameraRight);a.setUniform3fv("v3CameraDir",this._renderData.v3CameraDir);a.setUniform2fv("nearFar",this._renderData.nearFar);a.setUniform2fv("halfSizeNearPlane",this._renderData.halfSizeNearPlane);a.setUniform2fv("v2CameraCenterOffset",this._renderData.v2CameraCenterOffset);a.setUniform4fv("v4Radii",this._renderData.v4Radii);a.setUniform4fv("v4AtmosParams1",this._renderData.v4AtmosParams1);a.setUniform4fv("v4AtmosParams2",
this._renderData.v4AtmosParams2);a.setUniform1f("showTest",this._renderData.showTest);a.setUniform1f("fInnerFadeDistance",this._renderData.fInnerFadeDistance);a.setUniform1f("fAltitudeFade",this._renderData.fAltitudeFade);d.bindVAO(this._vao);y.assertCompatibleVertexAttributeLocations(this._vao,a);d.drawArrays(5,0,4)};c.prototype._createVertexArrayObject=function(a){var b=M.createBuffer(4);b.position.setVec(0,[-1,-1,1]);b.position.setVec(1,[1,-1,1]);b.position.setVec(2,[-1,1,1]);b.position.setVec(3,
[1,1,1]);b.uv0.setVec(0,[0,0]);b.uv0.setVec(1,[1,0]);b.uv0.setVec(2,[0,1]);b.uv0.setVec(3,[1,1]);return new z(a,r.program.attributes,{geometry:u.glLayout(M)},{geometry:x.createVertex(a,35044,b.buffer)})};c.prototype._adjustRadiusForTesselation=function(a){return a*Math.cos(Math.PI/Math.pow(2,4)/16)};c.prototype._updateElevation=function(a){a=a?a.tile:this.view.basemapTerrain.rootTiles[0];0===a.lij[0]&&(a=this._adjustRadiusForTesselation(q.earthRadius+a.elevationBounds[0]),a!==this._lowerElevationBoundRadius&&
(this._lowerElevationBoundRadius=a,this._earthRadius=-1,this._updateVisibleElevationBounds()))};c.prototype._updateVisibleElevationBounds=function(){var a=this._adjustRadiusForTesselation(q.earthRadius+this.view.basemapTerrain.getElevationBounds()[0]);(0>this._earthRadius||a<this._earthRadius)&&this._updateRadius(a)};c.prototype._updateRadius=function(b){this._earthRadius=b;var d=b*b,e=b/10*10.25,c=e*e,f=1/(e-b),g=f/C,h=f/E,k=.3*(e-b)+b,l=1/(e-k),q=this._renderData;a.vec4.set(q.v4AtmosParams1,f,C,
g,H);a.vec4.set(q.v4AtmosParams2,I,E,h,G);a.vec4.set(q.v4AtmosParams3,I*I,K,k,l);a.vec4.set(q.v4Radii,b,d,e,c);q.fScale=f;q.fLowerAlphaBlendBound=k;q.fScaleOverScaleDepth=g;q.fScaleOverScaleDepthBlue=h;d=m.INNER_ATMOSPHERE_DEPTH;q.fInnerFadeDistance=2*Math.sqrt((2*b-d)*d)};c.prototype._update=function(a){a&&(f.vec3.negate(this._renderData.v3CameraDir,a.viewForward),f.vec3.copy(this._renderData.v3CameraUp,a.viewUp),f.vec3.copy(this._renderData.v3CameraRight,a.viewRight),this._renderData.fCameraHeight=
f.vec3.length(a.eye),this._renderData.fCameraHeight2=this._renderData.fCameraHeight*this._renderData.fCameraHeight,this._renderData.fC=this._renderData.fCameraHeight2-this._renderData.v4Radii[3],this._renderData.fCSur=this._renderData.fCameraHeight2-this._renderData.v4Radii[1],this._renderData.v4SphereComp=e.vec4f64.fromValues(this._renderData.fCameraHeight,this._renderData.fCameraHeight2,this._renderData.fC,this._renderData.fCSur),f.vec3.copy(this._renderData.v3CameraPos,a.eye),h.vec2.set(this._renderData.halfSizeNearPlane,
Math.tan(a.fovX/2)/(a.width/a.fullWidth),Math.tan(a.fovY/2)/(a.height/a.fullHeight)),h.vec2.set(this._renderData.v2CameraCenterOffset,(a.padding[3]+a.width/2)/a.fullWidth-.5,(a.padding[2]+a.height/2)/a.fullHeight-.5),h.vec2.set(this._renderData.nearFar,a.near,a.far),this._renderData.fAltitudeFade=m.computeInnerAltitudeFade(this._renderData.fCameraHeight-this._earthRadius))};c.isSupported=function(a){return a.rctx.capabilities.depthTexture};return c}();c=.02*Math.PI;var A=.004*Math.PI,B=b.vec3f64.fromValues(1/
Math.pow(.65,4),1/Math.pow(.57,4),1/Math.pow(.475,4)),D=b.vec3f64.clone(B);f.vec3.scale(D,D,c);f.vec3.add(D,D,b.vec3f64.fromValues(A,A,A));var C=.25,E=.05,H=1/C,G=1/E,I=-.99999,K=(1-I*I)/(2+I*I)*1.5,M=t.newLayout().vec3f("position").vec2f("uv0");return p})},"esri/views/3d/environment/atmosphereUtils":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});c.computeInnerAltitudeFade=function(c){return Math.min(1,Math.max(0,(c-1E5)/9E5))};c.INNER_ATMOSPHERE_DEPTH=
1E4})},"esri/views/3d/webgl-engine/shaders/RealisticAtmospherePrograms":function(){define(["require","exports","../lib/DefaultVertexAttributeLocations","./sources/resolver","../../../webgl/programUtils"],function(p,c,n,l,k){Object.defineProperty(c,"__esModule",{value:!0});c.program={name:"realistic-atmosphere-color",shaders:function(d){return{vertexShader:k.glslifyDefineMap({HAZE:d.haze})+l.resolveIncludes("environment/realisticAtmosphere.vert"),fragmentShader:k.glslifyDefineMap({HAZE:d.haze})+l.resolveIncludes("environment/realisticAtmosphere.frag")}},
attributes:n.Default3D}})},"esri/views/3d/environment/SimpleAtmosphere":function(){define("require exports ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/mathUtils ../../../core/promiseUtils ../../../core/watchUtils ../../../core/libs/gl-matrix-2/mat4 ../../../core/libs/gl-matrix-2/mat4f64 ../../../core/libs/gl-matrix-2/vec2 ../../../core/libs/gl-matrix-2/vec2f64 ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ./atmosphereUtils ./resources/SimpleAtmosphereTexture ../support/earthUtils ../support/imageUtils ../support/mathUtils ../support/buffer/glUtil ../support/buffer/InterleavedLayout ../webgl-engine/lib/glUtil3D ../webgl-engine/lib/Util ../webgl-engine/shaders/SimpleAtmospherePrograms ../../webgl/BufferObject ../../webgl/programUtils ../../webgl/renderState ../../webgl/Texture ../../webgl/Util ../../webgl/VertexArrayObject".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z,A,B,D,C,E,H,G){function I(a,b,d,c,f){var m=e.vec3.length(a),g=c*Math.sqrt(m*m-c*c)/m,h=f.silCircleV1,k=f.silCircleV2;e.vec3.scale(f.silCircleCenter,a,Math.sqrt(c*c-g*g)/m);e.vec3.cross(h,a,b);1>e.vec3.squaredLength(h)&&e.vec3.cross(h,a,d);e.vec3.scale(h,h,g/e.vec3.length(h));e.vec3.cross(k,h,a);e.vec3.scale(k,k,g/e.vec3.length(k));return g}function K(a,b,d,c){e.vec3.add(Q,c.silCircleCenter,c.silCircleV2);e.vec3.scale(J,Q,S);g.mat4.lookAt(V,b,Q,
d);z.project(Q,V,a.projectionMatrix,a.viewport);z.project(J,V,a.projectionMatrix,a.viewport);return e.vec3.distance(Q,J)/a.height}var M=-q.INNER_ATMOSPHERE_DEPTH,T=(t.earthRadius+M)/t.earthRadius,N=(t.earthRadius+0)/t.earthRadius,S=(t.earthRadius+3E5)/t.earthRadius,O=x.makePiecewiseLinearFunction([[50,.1015625],[500,.21875],[5E3,.51171875],[5E4,.4140625]]);p=function(){function c(b){this.needsRender=!1;this.didRender=!0;this.slot=13;this._renderData={texV:a.vec2f64.create(),silCircleCenter:m.vec3f64.create(),
silCircleV1:m.vec3f64.create(),silCircleV2:m.vec3f64.create(),altitudeFade:0,innerScale:0,undergroundFadeAlpha:0};this._fadeVaoCount=0;this._readyResolver=d.createResolver();this._readyController=d.createAbortController();this.view=b}c.prototype.when=function(a){return l(this,void 0,void 0,function(){return n(this,function(b){switch(b.label){case 0:return[4,this._readyResolver.promise];case 1:return b.sent(),a(),[2]}})})};c.prototype.initializeRenderContext=function(a){var b=this,d=a.rctx;this._cameraChangeHandle=
h.init(this.view,"state.camera",function(){return b.needsRender=!0},!0);this._program=D.createProgram(d,A.colorPass);this._fadeProgram=D.createProgram(d,A.fadePass);this._vao=this._createRibbon(d);this._vaoCount=H.vertexCount(this._vao,"geometry");this._fadeVao=y.createQuadVAO(d);this._fadeVaoCount=H.vertexCount(this._fadeVao,"geometry");r.requestImage(u,this._readyController).then(function(a){b._texture=new E(d,{pixelFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!0},a);b.needsRender=
!0;b._readyController=null;b._readyResolver.resolve()});this._pipelineState=C.makePipelineState({blending:C.separateBlendingParams(770,1,771,771),depthTest:{func:515},colorWrite:C.defaultColorWriteParams})};c.prototype.uninitializeRenderContext=function(a){this.destroy()};c.prototype.destroy=function(){this._readyResolver.reject();this._cameraChangeHandle&&(this._cameraChangeHandle.remove(),this._cameraChangeHandle=null);this._texture&&(this._texture.dispose(),this._texture=null);this._program&&(this._program.dispose(),
this._program=null);this._fadeProgram&&(this._fadeProgram.dispose(),this._fadeProgram=null);this._fadeVao&&(this._fadeVao.dispose(),this._fadeVao=null);this._readyController&&(this._readyController.abort(),this._readyController=null)};c.prototype.render=function(a){if(a.slot!==this.slot||0!==a.pass||null==this._texture)return!1;this._update(a.camera);var b=a.rctx;b.setPipelineState(this._pipelineState);if(1>this._renderData.undergroundFadeAlpha){var d=this._program;b.bindProgram(d);d.setUniformMatrix4fv("proj",
a.camera.projectionMatrix);d.setUniformMatrix4fv("view",a.camera.viewMatrix);d.setUniform3fv("silCircleCenter",this._renderData.silCircleCenter);d.setUniform3fv("silCircleV1",this._renderData.silCircleV1);d.setUniform3fv("silCircleV2",this._renderData.silCircleV2);d.setUniform2fv("texV",this._renderData.texV);b.bindTexture(this._texture,0);d.setUniform1i("tex",0);d.setUniform3fv("lightDirection",a.lightingData.direction);d.setUniform1f("altitudeFade",this._renderData.altitudeFade);d.setUniform1f("innerScale",
this._renderData.innerScale);b.bindVAO(this._vao);b.drawArrays(4,0,this._vaoCount)}0<this._renderData.undergroundFadeAlpha&&(d=this._fadeProgram,b.bindProgram(d),d.setUniform1f("undergroundFadeAlpha",this._renderData.undergroundFadeAlpha),d.setUniform3fv("lightDirection",a.lightingData.direction),d.setUniform3fv("cameraPosition",a.camera.eye),b.bindVAO(this._fadeVao),b.drawArrays(5,0,this._fadeVaoCount));this.needsRender=!1;return!0};c.prototype._update=function(a){var d=m.vec3f64.create(),c=t.earthRadius,
f=e.vec3.length(a.eye),g=f-c;this._renderData.undergroundFadeAlpha=0>g?Math.min(-g/5E3,1):0;var h=c+M,l=c+Math.max(50,g);this._renderData.innerScale=l*l/(Math.sqrt(l*l-c*c)*Math.sqrt(l*l-h*h)+c*h)-1;this._renderData.altitudeFade=q.computeInnerAltitudeFade(g);e.vec3.scale(d,a.eye,(c+50)/f);I(d,a.center,a.up,c,this._renderData);d=K(a,d,a.up,this._renderData);f=O(g);h=.001953125;l=0+d*f*1;50<g&&(I(a.eye,a.center,a.up,c,this._renderData),a=K(a,a.eye,a.up,this._renderData),a=k.clamp((a-1.5)/(d-1.5),0,
1),h=0+.001953125*a,l=0+1*x.lerp(1,d*f,a));b.vec2.set(this._renderData.texV,h,l)};c.prototype._createRibbon=function(a){var b=new Float32Array(1155),d=new Uint32Array(1920);b[0]=0;b[1]=0;b[2]=-1;for(var e=0;128>e;e++){var c=9*e+3;b[c+0]=e;b[c+1]=T;b[c+2]=-1;b[c+3]=e;b[c+4]=N;b[c+5]=0;b[c+6]=e;b[c+7]=S;b[c+8]=1;var c=3*e+1,f=127===e?1:c+3,m=15*e;d[m+0]=c;d[m+1]=c+1;d[m+2]=f+1;d[m+3]=f+1;d[m+4]=f;d[m+5]=c;d[m+6]=c+1;d[m+7]=c+2;d[m+8]=f+2;d[m+9]=f+2;d[m+10]=f+1;d[m+11]=c+1;d[m+12]=c;d[m+13]=f;d[m+14]=
0}c=P.createBuffer(d.length);f=c.position;for(e=0;e<d.length;++e)m=3*d[e],f.set(e,0,b[m]),f.set(e,1,b[m+1]),f.set(e,2,b[m+2]);return new G(a,A.colorPass.attributes,{geometry:w.glLayout(P)},{geometry:B.createVertex(a,35044,c.buffer)})};return c}();var V=f.mat4f64.create(),Q=m.vec3f64.create(),J=m.vec3f64.create(),P=v.newLayout().vec3f("position");return p})},"esri/views/3d/webgl-engine/lib/glUtil3D":function(){define("require exports ./DefaultVertexAttributeLocations ./DefaultVertexBufferLayouts ../../../webgl/BufferObject ../../../webgl/Texture ../../../webgl/VertexArrayObject".split(" "),
function(p,c,n,l,k,d,h){Object.defineProperty(c,"__esModule",{value:!0});c.createQuadVAO=function(d,c){void 0===c&&(c=l.Pos2);var b=null;switch(c){case l.Pos3Tex:b=new Float32Array([-1,-1,0,0,0,1,-1,0,1,0,-1,1,0,0,1,1,1,0,1,1]);break;case l.Pos3:b=new Float32Array([-1,-1,0,1,-1,0,-1,1,0,1,1,0]);break;case l.Pos2Tex:b=new Float32Array([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]);break;default:b=new Float32Array([-1,-1,1,-1,-1,1,1,1])}return new h(d,n.Default3D,{geometry:c},{geometry:k.createVertex(d,35044,
b)})};c.createEmptyTexture=function(c,f){void 0===f&&(f=4);return new d(c,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,width:f,height:f})};c.createColorTexture=function(c,f,b){void 0===b&&(b=4);for(var a=new Uint8Array(b*b*4),e=0;e<a.length;e+=4)a[e+0]=255*f[0],a[e+1]=255*f[1],a[e+2]=255*f[2],a[e+3]=255*f[3];return new d(c,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,width:b,height:b},a)}})},"esri/views/3d/webgl-engine/lib/DefaultVertexBufferLayouts":function(){define(["require",
"exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});c.Pos3=[{name:"position",count:3,type:5126,offset:0,stride:12,normalized:!1}];c.Pos3Tex=[{name:"position",count:3,type:5126,offset:0,stride:20,normalized:!1},{name:"uv0",count:2,type:5126,offset:12,stride:20,normalized:!1}];c.Pos3NormalTex=[{name:"position",count:3,type:5126,offset:0,stride:32,normalized:!1},{name:"normal",count:3,type:5126,offset:12,stride:32,normalized:!1},{name:"uv0",count:2,type:5126,offset:24,stride:32,
normalized:!1}];c.Pos3Col=[{name:"position",count:3,type:5126,offset:0,stride:16,normalized:!1},{name:"color",count:4,type:5121,offset:12,stride:16,normalized:!1}];c.Pos2=[{name:"position",count:2,type:5126,offset:0,stride:8,normalized:!1}];c.Pos2Tex=[{name:"position",count:2,type:5126,offset:0,stride:16,normalized:!1},{name:"uv0",count:2,type:5126,offset:8,stride:16,normalized:!1}]})},"esri/views/3d/environment/Stars":function(){define("require exports ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../request ../../../core/asyncUtils ../../../core/Error ../../../core/Logger ../../../core/promiseUtils ../../../core/watchUtils ../../../core/libs/gl-matrix-2/mat4 ../../../core/libs/gl-matrix-2/mat4f64 ../support/buffer/glUtil ../support/buffer/InterleavedLayout ../webgl-engine/shaders/StarsPrograms ../../webgl/BufferObject ../../webgl/programUtils ../../webgl/renderState ../../webgl/Util ../../webgl/VertexArrayObject".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v){var y=g.getLogger("esri.views.3d.environment.Stars");c=function(){function c(a){this.slot=13;this.numBinaryFloats=2;this.numBinaryUInt8=1;this.bytesPerStar=9;this.needsRender=!1;this.didRender=!0;this._loadDataController=f.createAbortController();this._numStars=0;this._modelMatrix=e.mat4f64.create();this.view=a;this._loadDataPromise=this._loadBrightStarCatalogue()}c.prototype.destroy=function(){this._loadDataController&&(this._loadDataController.abort(),
this._loadDataController=null);this._dateHandle&&(this._dateHandle.remove(),this._dateHandle=null);this._program&&(this._program.dispose(),this._program=null);this._vao&&(this._vao.dispose(),this._vao=null)};c.prototype.initializeRenderContext=function(a){var d=this,e=a.rctx;this._program=r.createProgram(e,u.program);this._pipelineState=x.makePipelineState({blending:x.separateBlendingParams(770,1,771,771),depthTest:{func:515},colorWrite:x.defaultColorWriteParams});this._dateHandle=b.init(this.view,
"environment.lighting.date",function(a){return d._update(a)});this._loadDataPromise.then(function(){d._numStars=d._starData.byteLength/d.bytesPerStar;var a=new Float32Array(d._starData,0,d._numStars*d.numBinaryFloats),b=new Uint8Array(d._starData,d._numStars*d.numBinaryFloats*4,d._numStars*d.numBinaryUInt8);d._vao=d._createVertexArrayObject(e,a,b);d.needsRender=!0})};c.prototype.uninitializeRenderContext=function(a){this.destroy()};c.prototype.render=function(a){if(a.slot!==this.slot||0!==a.pass||
null==this._starData)return!1;var b=a.rctx,d=this._program;b.bindProgram(d);a=a.camera;d.setUniformMatrix4fv("view",a.viewMatrix);d.setUniformMatrix4fv("proj",a.projectionMatrix);d.setUniform4fv("viewport",a.fullViewport);d.setUniformMatrix4fv("model",this._modelMatrix);d.setUniform1f("pixelRatio",a.pixelRatio);b.setPipelineState(this._pipelineState);b.bindVAO(this._vao);w.assertCompatibleVertexAttributeLocations(this._vao,d);b.drawArrays(0,0,this._numStars);this.needsRender=!1;return!0};c.prototype._computeDayDuration=
function(a){var b=new Date(a.getFullYear(),0,1,11,58,56),d=new Date(a.getFullYear()+1,0,1,11,58,55);return(+a-+b)/(+d-+b)};c.prototype._update=function(b){if(b){var d=b.getHours()/12,e=b.getMinutes()/60*(2/24),c=b.getSeconds()/60*(2/1440),d=(d+e+c-.9972222)%2;b=2*this._computeDayDuration(b);e=this._modelMatrix;a.mat4.copy(e,B);a.mat4.rotateZ(e,e,-b*Math.PI);a.mat4.multiply(e,A,e);a.mat4.rotateZ(e,e,-d*Math.PI);this.needsRender=!0}};c.prototype._hexToRGB=function(a){return[parseInt(a.substring(0,2),
16),parseInt(a.substring(2,4),16),parseInt(a.substring(4,6),16)]};c.prototype._unpackUint8Attributes=function(a){return 192<=a?[2.9,a-192]:160<=a?[2.5,a-160]:128<=a?[2,a-128]:96<=a?[1.5,a-96]:64<=a?[1,a-64]:32<=a?[.7,a-32]:[.4,a]};c.prototype._createVertexArrayObject=function(a,b,d){for(var e=D.createBuffer(this._numStars),c=e.position,f=e.color,g=e.size,h=0;h<this._numStars;h++){var k=b[2*h+0],l=b[2*h+1];c.set(h,0,-Math.cos(k)*Math.sin(l));c.set(h,1,-Math.sin(k)*Math.sin(l));c.set(h,2,-Math.cos(l));
k=this._unpackUint8Attributes(d[h]);l=this._hexToRGB(z[k[1]]);f.set(h,0,255*l[0]);f.set(h,1,255*l[1]);f.set(h,2,255*l[2]);f.set(h,3,255);g.set(h,k[0])}return new v(a,u.program.attributes,{geometry:m.glLayout(D)},{geometry:t.createVertex(a,35044,e.buffer)})};c.prototype._verifyStartData=function(a){if(!a)throw new h("stars:no-data-received","Failed to create stars because star catalogue is missing");a=a.byteLength/this.bytesPerStar;if(0!==a%1||5E4<a||5E3>a)throw new h("stars:invalid-data","Failed to create stars because star catalogue data is invalid");
};c.prototype._loadBrightStarCatalogue=function(){return l(this,void 0,void 0,function(){var a,b,e;return n(this,function(c){switch(c.label){case 0:return C?(this._starData=C,[2]):[4,d.result(k(p.toUrl("./resources/stars.wsv"),{responseType:"array-buffer",signal:this._loadDataController.signal}))];case 1:a=c.sent();this._loadDataController=null;if(!1===a.ok){if(f.isAbortError(a.error))throw a.error;y.error("loadBrightStarCatalogue",a.error.message);return[2]}b=a.value;e=b.data;try{this._verifyStartData(e)}catch(M){throw y.error("loadBrightStarCatalogue",
M),M;}this._starData=C=e;return[2]}})})};return c}();var z="9bb2ff;9eb5ff;aabfff;bbccff;ccd8ff ;dae2ff;e4e9ff;eeefff;f8f6ff;fff9fb;fff5ef;fff1e5;ffeddb;ffe9d2;ffe6ca;ffe3c3;ffe0bb;ffddb4;ffdaad;ffd6a5;ffd29c;ffcc8f;ffc178;ffa94b;ff7b00".split(";"),A=e.mat4f64.fromValues(1,0,0,0,0,.9174771405229186,.39778850739794974,0,0,-.39778850739794974,.9174771405229186,0,0,0,0,1),B=e.mat4f64.fromValues(1,0,0,0,0,.9174771405229186,-.39778850739794974,0,0,.39778850739794974,.9174771405229186,0,0,0,0,1),D=q.newLayout().vec3f("position").vec4u8("color").f32("size"),
C=null;return c})},"esri/views/3d/webgl-engine/shaders/StarsPrograms":function(){define(["require","exports","../lib/DefaultVertexAttributeLocations","./sources/resolver"],function(p,c,n,l){Object.defineProperty(c,"__esModule",{value:!0});c.program={name:"stars",shaders:{vertexShader:l.resolveIncludes("environment/stars.vert"),fragmentShader:l.resolveIncludes("environment/stars.frag")},attributes:n.Default3D}})},"esri/views/3d/support/sunUtils":function(){define("require exports ../../../core/mathUtils ../../../core/libs/gl-matrix-2/mat4 ../../../core/libs/gl-matrix-2/mat4f64 ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../lib/SunCalc ./mathUtils".split(" "),
function(p,c,n,l,k,d,h,g,f){function b(a,b,d,e){for(var c=[],f=0;f<d.length;f++)c[f]=(e[f]-d[f])*a/b+d[f];return c}Object.defineProperty(c,"__esModule",{value:!0});c.settings={local:{altitude:1500,ambientAtNight:.1,ambientAtNoon:.45,ambientAtTwilight:.2,diffuseAtNoon:.65,diffuseAtTwilight:.7},global:{altitude:8E5,ambient:.015,diffuse:.75},planarDirection:{localAltitude:1E4,globalAltitude:1E6,globalAngles:{azimuth:1.3*Math.PI,altitude:.6*Math.PI}}};c.computeColorAndIntensity=function(a,e){var k,l,
q,u,v=e[2],y=m;d.vec3.set(y.ambient.color,1,1,1);y.ambient.intensity=c.settings.global.ambient;d.vec3.set(y.diffuse.color,1,1,1);y.diffuse.intensity=c.settings.global.diffuse;v=(Math.abs(v)-c.settings.local.altitude)/(c.settings.global.altitude-c.settings.local.altitude);v=n.clamp(v,0,1);y.globalFactor=v;e=g.getTimes(a,e[1],e[0]);if(1>v){q=a.valueOf();var z,A;e.polarException===g.POLAR_EXCEPTION.MIDNIGHT_SUN?(z=q-36E5*(a.getHours()+48)-6E4*a.getMinutes(),A=z+432E6):e.polarException===g.POLAR_EXCEPTION.POLAR_NIGHT?
(z=q-2,A=q-1):(z=e.sunrise.valueOf(),A=e.sunset.valueOf());var B=A-z;u=z+B/2;l=B/4;k=u-l;l=u+l;var p=.06*B,B=z-p/2;z+=p/2;var C=A-p/2,E=A+p/2;A=c.settings.local;var H=[.01,A.ambientAtNight],G=[.8,.8,1],I=[.01,.01,.01],K=[A.diffuseAtTwilight,A.ambientAtTwilight],M=[1,.75,.75],T=[.8,.8,1],N=[.9*A.diffuseAtNoon,A.ambientAtNoon],S=[1,.98,.98],O=[.98,.98,1],V=[A.diffuseAtNoon,A.ambientAtNoon],Q=[1,1,1],J=[1,1,1];A=[0,0];var P=[0,0,0],p=[0,0,0];q<B||q>E?(A=H,P=I,p=G):q<z?(p=z-B,A=b(q-B,p,H,K),P=b(q-B,p,
I,M),p=b(q-B,p,G,T)):q<k?(p=k-z,A=b(q-z,p,K,N),P=b(q-z,p,M,S),p=b(q-z,p,T,O)):q<u?(p=u-k,A=b(q-k,p,N,V),P=b(q-k,p,S,Q),p=b(q-k,p,O,J)):q<l?(p=l-u,A=b(q-u,p,V,N),P=b(q-u,p,Q,S),p=b(q-u,p,J,O)):q<C?(p=C-l,A=b(q-l,p,N,K),P=b(q-l,p,S,M),p=b(q-l,p,O,T)):q<E&&(p=E-C,A=b(q-C,p,K,H),P=b(q-C,p,M,I),p=b(q-C,p,T,G));q=A[0];u=h.vec3f64.fromValues(P[0],P[1],P[2]);k=A[1];l=h.vec3f64.fromValues(p[0],p[1],p[2]);d.vec3.lerp(y.ambient.color,l,y.ambient.color,v);y.ambient.intensity=f.lerp(k,y.ambient.intensity,v);d.vec3.lerp(y.diffuse.color,
u,y.diffuse.color,v);y.diffuse.intensity=f.lerp(q,y.diffuse.intensity,v)}v=a.valueOf();e.polarException===g.POLAR_EXCEPTION.MIDNIGHT_SUN?(a=v-36E5*(a.getHours()+48)-6E4*a.getMinutes(),e=a+432E6):e.polarException===g.POLAR_EXCEPTION.POLAR_NIGHT?(a=v-2,e=v-1):(a=e.sunrise.valueOf(),e=e.sunset.valueOf());a=1-n.clamp(Math.abs(v-(a+(e-a)/2))/432E5,0,1);y.noonFactor=a;return y};c.computeDirection=function(b,f,m,k){k||(k=h.vec3f64.create());var q=e,r=l.mat4.identity(a);if("global"===m)g.getPosition(b,0,
0,q),d.vec3.set(k,0,0,-1),l.mat4.rotateX(r,r,-q.azimuth),l.mat4.rotateY(r,r,-q.altitude);else{var t=c.settings.planarDirection;m=t.globalAngles;t=(Math.abs(f[2])-t.localAltitude)/(t.globalAltitude-t.localAltitude);t=n.clamp(t,0,1);1>t?(g.getPosition(b,f[1],f[0],q),q.azimuth=(1-t)*q.azimuth+t*m.azimuth,q.altitude=(1-t)*q.altitude+t*m.altitude):(q.azimuth=m.azimuth,q.altitude=m.altitude);d.vec3.set(k,0,-1,0);l.mat4.rotateZ(r,r,-q.azimuth);l.mat4.rotateX(r,r,-q.altitude)}d.vec3.transformMat4(k,k,r);
return k};c.computeShadowsEnabled=function(a,b){return"global"===b?!0:Math.abs(a[2])<c.settings.planarDirection.localAltitude};var a=k.mat4f64.create(),e={azimuth:0,altitude:0},m={ambient:{color:h.vec3f64.create(),intensity:0},diffuse:{color:h.vec3f64.create(),intensity:0,direction:h.vec3f64.create()},globalFactor:0,noonFactor:0}})},"esri/views/3d/lib/SunCalc":function(){define([],function(){function p(a){return new Date(864E5*(a+.5-2440588))}function c(b,d){return u(a(b)*e(w)-m(d)*a(w),e(b))}function n(b,
d){return q(a(d)*e(w)+e(d)*a(w)*a(b))}function l(b,d,c){return u(a(b),e(b)*a(d)-m(c)*e(d))}function k(b,d,c){return q(a(d)*a(c)+e(d)*e(c)*e(b))}function d(b){return r*(1.9148*a(b)+.02*a(2*b)+3E-4*a(3*b))}function h(a,e){a=r*(357.5291+.98560028*a);var f=d(a);a=a+f+102.9372*r+b;e||(e={dec:0,ra:0});e.dec=n(a,0);e.ra=c(a,0);return e}function g(b,d,e){return 2451545+b+.0053*a(d)-.0069*a(2*e)}function f(b){var d=r*(134.963+13.064993*b),f=r*(93.272+13.22935*b);b=r*(218.316+13.176396*b)+6.289*r*a(d);f=5.128*
r*a(f);d=385001-20905*e(d);return{ra:c(b,f),dec:n(b,f),dist:d}}var b=Math.PI,a=Math.sin,e=Math.cos,m=Math.tan,q=Math.asin,u=Math.atan2,t=Math.acos,r=b/180,x={dec:0,ra:0},w=23.4397*r,v={POLAR_EXCEPTION:{NORMAL:0,MIDNIGHT_SUN:1,POLAR_NIGHT:2},getPosition:function(a,b,d,e){d=r*-d;b*=r;var c=a.valueOf()/864E5-.5+2440588-2451545;a=h(c,x);d=r*(280.16+360.9856235*c)-d-a.ra;e||(e={azimuth:0,altitude:0});e.azimuth=l(d,b,a.dec);e.altitude=k(d,b,a.dec);return e}},y=[[-.83,"sunrise","sunset"]];v.addTime=function(a,
b,d){y.push([a,b,d])};v.getTimes=function(c,f,m){function h(d){var c=l,f=z;d=t((a(d)-a(c)*a(f))/(e(c)*e(f)));return g(9E-4+(d+k)/(2*b)+q,u,x)}var k=r*-m,l=r*f,q=Math.round(c.valueOf()/864E5-.5+2440588-2451545-9E-4-k/(2*b));c=9E-4+(0+k)/(2*b)+q;var u=r*(357.5291+.98560028*c);f=d(u);var x=u+f+102.9372*r+b,z=n(x,0);c=g(c,u,x);f={solarNoon:p(c),nadir:p(c-.5),polarException:v.POLAR_EXCEPTION.NORMAL};var w,A,B,S;m=0;for(w=y.length;m<w;m+=1)A=y[m],B=h(A[0]*r),S=c-(B-c),f[A[1]]=p(S),f[A[2]]=p(B);f.polarException=
function(b){b=(a(b)-a(l)*a(z))/(e(l)*e(z));return-1>b?v.POLAR_EXCEPTION.MIDNIGHT_SUN:1<b?v.POLAR_EXCEPTION.POLAR_NIGHT:v.POLAR_EXCEPTION.NORMAL}(y[0][0]*r);return f};v.getMoonPosition=function(a,b,d){d=r*-d;b*=r;var e=a.valueOf()/864E5-.5+2440588-2451545;a=f(e);d=r*(280.16+360.9856235*e)-d-a.ra;e=k(d,b,a.dec);e+=.017*r/m(e+10.26*r/(e+5.1*r));return{azimuth:l(d,b,a.dec),altitude:e,distance:a.dist}};v.getMoonFraction=function(b){var d=b.valueOf()/864E5-.5+2440588-2451545;b=h(d);d=f(d);b=t(a(b.dec)*
a(d.dec)+e(b.dec)*e(d.dec)*e(b.ra-d.ra));b=u(149598E3*a(b),d.dist-149598E3*e(b));return(1+e(b))/2};return v})},"esri/views/3d/webgl-engine/lighting/Lightsources":function(){define(["require","exports","../../../../core/libs/gl-matrix-2/vec3f64"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});p=function(){return function(c,k,d){void 0===c&&(c=n.vec3f64.create());void 0===k&&(k=n.vec3f64.fromValues(.57735,.57735,.57735));void 0===d&&(d=!0);this.intensity=c;this.direction=k;this.castShadows=
d}}();c.MainLight=p;p=function(){return function(c,k){void 0===c&&(c=n.vec3f64.create());void 0===k&&(k=n.vec3f64.fromValues(.57735,.57735,.57735));this.intensity=n.vec3f64.create();this.direction=n.vec3f64.create();this.intensity=c;this.direction=k}}();c.FillLight=p;p=function(){return function(c){void 0===c&&(c=n.vec3f64.create());this.intensity=c}}();c.AmbientLight=p;p=function(){return function(){this.sh={r:[0],g:[0],b:[0]}}}();c.SphericalHarmonicsLight=p})},"esri/views/3d/input/SceneInputManager":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/Handles ../../../core/accessorSupport/decorators ./handlers/DoubleClickZoom ./handlers/DragRotate ./handlers/DragZoom ./handlers/GamepadNavigation ./handlers/KeyboardNavigation ./handlers/MouseWheelZoom ./handlers/PinchAndPanNavigation ./handlers/PointerDownCancelAnimation ./handlers/SingleKeyResetHeading ./handlers/SingleKeyResetTilt ./handlers/TwoFingerTilt ../../input/BrowserEventSource ../../input/InputManager ../../input/ViewEvents ../../input/handlers/PreventContextMenu".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z){p=function(c){function k(){var a=null!==c&&c.apply(this,arguments)||this;a._handles=new d;return a}n(k,c);k.prototype.initialize=function(){this.viewEvents=new y.ViewEvents(this.view)};k.prototype.destroy=function(){this._handles&&(this._handles.removeAll(),this._handles=null);this.disconnect()};Object.defineProperty(k.prototype,"primaryDragAction",{get:function(){return this._get("primaryDragAction")},set:function(a){"pan"!==a&&"rotate"!==a||
a===this._get("primaryDragAction")||(this._set("primaryDragAction",a),this._updateMode())},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"mode",{get:function(){return this._get("mode")},set:function(a){"default"!==a&&"pro"!==a||a===this._get("mode")||(this._set("mode",a),this._updateMode())},enumerable:!0,configurable:!0});k.prototype.disconnect=function(){this.viewEvents.disconnect();this._inputManager&&(this._inputManager.destroy(),this._inputManager=null);this._source&&(this._source.destroy(),
this._source=null)};k.prototype.connect=function(){var d=this.view;this._source=new w.BrowserEventSource(this.view.surface,d.input);var c=new v.InputManager(this._source);this._inputManager=c;c.installHandlers("prevent-context-menu",[new z.PreventContextMenu]);this._modeDragPan=new q.PinchAndPanNavigation(d,"primary");this._modeDragRotate=new f.DragRotate(d,"secondary","center");this._modeDragZoom=new b.DragZoom(d,"tertiary");c.installHandlers("navigation",[new u.PointerDownCancelAnimation(d),new g.DoubleClickZoom(d),
new a.GamepadNavigation(d),new e.KeyboardNavigation(d,{left:"ArrowLeft",right:"ArrowRight",forward:"ArrowUp",backward:"ArrowDown",up:"u",down:"j",headingLeft:"a",headingRight:"d",tiltUp:"w",tiltDown:"s"}),new m.MouseWheelZoom(d),new r.SingleKeyResetTilt(d,"p"),new t.SingleKeyResetHeading(d,"n"),new f.DragRotate(d,"primary","eye",["b"]),new f.DragRotate(d,"secondary","center",["b"]),new q.PinchAndPanNavigation(d,"tertiary",["b"]),this._modeDragRotate,this._modeDragZoom,this._modeDragPan,new x.TwoFingerTilt(d)]);
this.viewEvents.connect(c);this._updateMode()};k.prototype._updateMode=function(){var a=this.primaryDragAction,a=A.get(this.mode).get(a);this._modeDragPan&&(this._modeDragPan.pointerAction=a.pan);this._modeDragRotate&&(this._modeDragRotate.pointerAction=a.rotate);this._modeDragZoom&&(this._modeDragZoom.pointerAction=a.zoom)};Object.defineProperty(k.prototype,"debug",{get:function(){return{inputManager:this._inputManager}},enumerable:!0,configurable:!0});l([h.property()],k.prototype,"view",void 0);
l([h.property({value:"pan"})],k.prototype,"primaryDragAction",null);l([h.property({value:"default"})],k.prototype,"mode",null);l([h.property({readOnly:!0,aliasOf:"_inputManager.hasPendingInputs"})],k.prototype,"hasPendingInputs",void 0);l([h.property({readOnly:!0,aliasOf:"_inputManager.latestPointerType"})],k.prototype,"latestPointerType",void 0);l([h.property()],k.prototype,"_inputManager",void 0);return k=l([h.subclass("esri.views.3d.input.SceneInputManager")],k)}(h.declared(k));var A=new Map;c=
new Map;k=new Map;c.set("pan",{pan:"primary",rotate:"secondary",zoom:"tertiary"});c.set("rotate",{pan:"secondary",rotate:"primary",zoom:"tertiary"});k.set("pan",{pan:"primary",rotate:"tertiary",zoom:"secondary"});k.set("rotate",{pan:"tertiary",rotate:"primary",zoom:"secondary"});A.set("default",c);A.set("pro",k);return p})},"esri/views/3d/input/handlers/DoubleClickZoom":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/screenUtils ../../state/controllers/global/ZoomStepController ../../state/controllers/local/ZoomStepController ../../../input/InputHandler ../../../input/handlers/support".split(" "),
function(p,c,n,l,k,d,h,g){Object.defineProperty(c,"__esModule",{value:!0});p=function(c){function b(a,b){var d=c.call(this,!0)||this;d.view=a;d.registerIncoming("double-click",b,function(a){return d.handleDoubleClick(a)});return d}n(b,c);b.prototype.handleDoubleClick=function(a){var b=a.data;if(g.eventMatchesPointerAction(b,"primary")){var c=this.view.state.isGlobal?new k.ZoomStepController(this.view,"animation"):new d.ZoomStepController(this.view,"animation");this.view.state.switchCameraController(c);
c.zoomStep(Math.log(.5)/Math.log(.6),l.createScreenPointArray(b.x,b.y));a.stopPropagation()}};return b}(h.InputHandler);c.DoubleClickZoom=p})},"esri/views/3d/state/controllers/global/ZoomStepController":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../camera/constraintUtils ../PointToPointAnimationController ../../utils/navigationUtils ../../../support/geometryUtils ../../../webgl-engine/lib/Camera ../../../../animation/easing".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a){Object.defineProperty(c,"__esModule",{value:!0});p=function(e){function c(a,d){var c=e.call(this,a.state,a.sceneIntersectionHelper,"interaction"===d?null:void 0)||this;c.view=a;c.mode=d;c.zoomLocation=k.vec3f64.create();c.tmpCamera=new b;c.tmpViewDir=k.vec3f64.create();c.targetOnSphere=k.vec3f64.create();c.tmpCenter=k.vec3f64.create();c.constraintOptions={selection:7,interactionType:1,interactionFactor:null,interactionStartCamera:new b,interactionDirection:null,tiltMode:0};
c.sphere=f.sphere.create();return c}n(c,e);Object.defineProperty(c.prototype,"isInteractive",{get:function(){return"interaction"===this.mode},enumerable:!0,configurable:!0});c.prototype.zoomStep=function(a,b){if(this.active){var d=this.view.state,e=this.constraintOptions.interactionStartCamera;this.animation.finished?e.copyFrom(d.camera):this.animation.cameraAt(1,e);e=!1;0<a&&this.intersectionHelper.intersectScreen(b,this.zoomLocation)&&(e=!0);this.tmpCamera.copyFrom(d.camera);e?this.intersectionHelper.intersectRay(this.tmpCamera.ray,
this.tmpCenter)&&(this.tmpCamera.center=this.tmpCenter):this.intersectionHelper.intersectRay(this.tmpCamera.ray,this.zoomLocation)?this.tmpCamera.center=this.zoomLocation:l.vec3.copy(this.zoomLocation,this.tmpCamera.center);this.updateCamera(this.tmpCamera,Math.pow(.6,a),this.zoomLocation,b);this.begin(this.tmpCamera)}};c.prototype.animationSettings=function(){return{apex:null,duration:.6,easing:a.outExpo}};c.prototype.updateCamera=function(a,b,e,c){this.sphere.radius=l.vec3.length(e);l.vec3.subtract(this.tmpViewDir,
a.center,a.eye);var m=l.vec3.length(this.tmpViewDir),h=m*b;1>=b&&4>h&&(h=4,b=h/m);1E-6>Math.abs(m-h)||(m=l.vec3.length(a.center),this.sphere.radius!==m&&l.vec3.scale(a.center,a.center,(this.sphere.radius+b*(m-this.sphere.radius))/m),l.vec3.scale(this.tmpViewDir,this.tmpViewDir,-b),l.vec3.add(a.eye,a.center,this.tmpViewDir),d.applyAll(this.view,a,this.constraintOptions),1E-12<l.vec3.squaredDistance(e,a.center)&&f.sphere.intersectScreen(this.sphere,a,c,this.targetOnSphere)&&g.panToPosition(this.sphere,
a,e,this.targetOnSphere,this.view.camera.heading,this.view.camera.tilt,!0),d.applySurfaceCollision(this.view,a))};return c}(h.PointToPointAnimationController);c.ZoomStepController=p})},"esri/views/3d/camera/constraintUtils":function(){define("require exports ../../../core/libs/gl-matrix-2/vec2 ./constraintUtils/altitude ./constraintUtils/common ./constraintUtils/distance ./constraintUtils/surfaceCollision ./constraintUtils/tilt ../../animation/easing ./constraintUtils/tilt ./constraintUtils/altitude ./constraintUtils/distance ./constraintUtils/surfaceCollision".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m){Object.defineProperty(c,"__esModule",{value:!0});c.applyTilt=b.apply;c.tiltError=b.error;c.applyAltitude=a.apply;c.altitudeError=a.error;c.applyDistance=e.apply;c.distanceError=e.error;c.applySurfaceCollision=m.apply;c.applyAll=function(a,b,d,e){void 0===d&&(d=u);void 0===e&&(e=b);var c=!1;e!==b&&e.copyFrom(b);e.markViewDirty();e.computeUp(a.state.mode);for(b=0;b<t;b++){for(var f=0,m=0,g=q;m<g.length;m++){var l=g[m];if(k.hasConstraintType(d.selection,l.type)){var r=
Math.abs(l.error(a,e,d));l.apply(a,e,d)&&(c=!0,f+=r)}}if(0===f)break}b=k.hasConstraintType(d.selection,8);a:switch(d.interactionType){case 4:d=1;break a;case 5:d=a.state.isGlobal?2:1;break a;default:d=0}b&&h.apply(a,e,d)&&(c=!0);c&&e.computeUp(a.state.mode);return c};c.pixelDistanceToInteractionFactor=function(a,b){a="number"===typeof a?a:n.vec2.distance(a,b);return f.inOutCubic(Math.min(1,a/150))};var q=[{type:1,error:function(a,b,d){return g.error(a,b,d)*b.distance},apply:g.apply},{type:2,error:l.error,
apply:l.apply},{type:4,error:d.error,apply:d.apply}],u={selection:15,interactionType:0,interactionFactor:0,interactionStartCamera:null,interactionDirection:null,tiltMode:0},t=5})},"esri/views/3d/camera/constraintUtils/altitude":function(){define("require exports ../../../../core/mathUtils ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ./common ../../support/geometryUtils ../../support/intersectionUtils ../../support/mathUtils".split(" "),function(p,c,n,l,k,d,h,g,
f){function b(a,c,f){void 0===f&&(f=d.defaultApplyOptions);var m;m=a.state.constraints.altitude;m=a.state.isGlobal&&m?2===f.interactionType&&d.hasConstraintType(f.selection,1)?!1:!0:!1;if(!m)return 0;var g=a.state.constraints.altitude;m=e;m.min=g.min;m.max=g.max;var h=f.interactionType;if(0!==h){var g=m.min,k=m.max,l=f.interactionStartCamera;f=f.interactionFactor;var h=2===h||1===h,q=b(a,l),l=0===q?0:a.renderCoordsHelper.getAltitude(l.eye);m.min=g;m.max=k;d.adjustRangeForInteraction(q,l,h,f,.05*l,
m)}a=a.renderCoordsHelper.getAltitude(c.eye);a=n.clamp(a,m.min,m.max)-a;return 1E-6>=Math.abs(a)?0:a}function a(a,b,d,e){a.renderCoordsHelper.worldUpAtPosition(b.eye,e);l.vec3.scale(e,e,d);return e}Object.defineProperty(c,"__esModule",{value:!0});c.apply=function(e,c,k,n){void 0===k&&(k=d.defaultApplyOptions);void 0===n&&(n=c);n!==c&&n.copyFrom(c);var r=b(e,c,k);if(0===r)return!1;var t=e.renderCoordsHelper,x=t.getAltitude(c.eye)+r;e=d.interactionDirectionTowardsConstraintMinimization(e,c,k.interactionDirection,
a(e,c,f.sign(r),q),m);k=l.vec3.copy(u,c.viewForward);t.intersectInfiniteManifold(h.ray.wrap(c.eye,e),x,n.eye)||t.setAltitude(x,n.eye);g.closestPointOnRay(c.eye,k,c.center,c.center);n.markViewDirty();return!0};c.error=b;var e={min:0,max:0},m=k.vec3f64.create(),q=k.vec3f64.create(),u=k.vec3f64.create()})},"esri/views/3d/camera/constraintUtils/common":function(){define(["require","exports","../../../../core/libs/gl-matrix-2/vec3","../../support/mathUtils"],function(p,c,n,l){Object.defineProperty(c,"__esModule",
{value:!0});c.hasConstraintType=function(c,d){return 0!==(c&d)};c.adjustRangeForInteraction=function(c,d,h,g,f,b){0!==c&&(h?(b.min=Math.min(b.min,d),b.max=Math.max(b.max,d)):null!=g?(b.min-=Math.max(0,(d-b.min)*(1-g)),b.max+=Math.max(0,(d-b.max)*(1-g))):f&&(b.min-=Math.max(0,d-b.min-f),b.max+=Math.max(0,d-b.max-f)))};c.defaultApplyOptions={selection:0,interactionType:0,interactionFactor:0,interactionStartCamera:null,interactionDirection:null,tiltMode:0};c.interactionDirectionTowardsConstraintMinimization=
function(c,d,h,g,f){h||(h=d.viewForward);n.vec3.copy(f,h);n.vec3.scale(f,f,l.sign(n.vec3.dot(h,g)));return f}})},"esri/views/3d/support/intersectionUtils":function(){define(["require","exports","../../../core/libs/gl-matrix-2/vec2f64","../../../core/libs/gl-matrix-2/vec3","../../../core/libs/gl-matrix-2/vec3f64"],function(p,c,n,l,k){function d(b,a,d,c){var e=f;b?(d&&c&&(e.len=l.vec3.distance(a,d)),l.vec3.copy(e.dir,b)):c?(e.len=l.vec3.distance(a,d),l.vec3.subtract(e.dir,d,a),l.vec3.scale(e.dir,e.dir,
1/e.len)):(l.vec3.subtract(e.dir,d,a),l.vec3.normalize(e.dir,e.dir));return e}function h(b,a){return-l.vec3.dot(a,b)-b[3]}function g(b,a,d,c){c.clip[0]=0;c.clip[1]=d?c.len:Number.MAX_VALUE;for(d=0;d<b.length;d++){var e;var f=b[d],m=a;e=c;var g=l.vec3.dot(f,e.dir),f=h(f,m);0>f&&0<=g?e=!1:-1E-6<g&&1E-6>g?e=0<f:!(0>f||0>g)||0>f&&0>g?(f/=g,0<g?f<e.clip[1]&&(e.clip[1]=f):f>e.clip[0]&&(e.clip[0]=f),e=e.clip[0]<=e.clip[1]):e=!0;if(!e)return!1}return!0}Object.defineProperty(c,"__esModule",{value:!0});c.planeSphere=
function(b,a,d){return b[0]*a[0]+b[1]*a[1]+b[2]*a[2]+b[3]<d};c.frustumSphere=function(b,a,d){var e=a[0],c=a[1];a=a[2];return b[0][0]*e+b[0][1]*c+b[0][2]*a+b[0][3]>d||b[1][0]*e+b[1][1]*c+b[1][2]*a+b[1][3]>d||b[2][0]*e+b[2][1]*c+b[2][2]*a+b[2][3]>d||b[3][0]*e+b[3][1]*c+b[3][2]*a+b[3][3]>d||b[4][0]*e+b[4][1]*c+b[4][2]*a+b[4][3]>d||b[5][0]*e+b[5][1]*c+b[5][2]*a+b[5][3]>d?!1:!0};c.frustumRay=function(b,a,e,c){e=d(c,a,e,!1);return g(b,a,null,e)};c.frustumPoint=function(b,a){for(var d=0;6>d;d++)if(0>h(b[d],
a))return!1;return!0};c.frustumLineSegment=function(b,a,e,c){c=d(c,a,e,!0);return g(b,a,e,c)};c.closestPointOnRay=function(b,a,d,c){d=l.vec3.dot(a,l.vec3.subtract(c,d,b));l.vec3.add(c,b,l.vec3.scale(c,a,d));return c};var f={dir:k.vec3f64.create(),len:0,clip:n.vec2f64.create()}})},"esri/views/3d/camera/constraintUtils/distance":function(){define("require exports ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ./common ../../support/geometryUtils ../../support/mathUtils".split(" "),
function(p,c,n,l,k,d,h){function g(a,b,d){void 0===d&&(d=k.defaultApplyOptions);if(!a.state.isLocal)return 0;var e=a.state.constraints.distance;if(!a.pointsOfInterest.surfaceOrigin.renderLocation||Infinity===e)return 0;f.min=0;f.max=e;var e=f,c=d.interactionType;if(0!==c){var m=e.min,h=e.max,l=d.interactionStartCamera;d=d.interactionFactor;var c=1===c||4===c,q=g(a,l),l=0===q?0:n.vec3.distance(l.eye,a.pointsOfInterest.surfaceOrigin.renderLocation);e.min=m;e.max=h;k.adjustRangeForInteraction(q,l,c,
d,.05*l,e)}a=n.vec3.distance(b.eye,a.pointsOfInterest.surfaceOrigin.renderLocation);a=f.max-a;return-1E-6<=a?0:a}Object.defineProperty(c,"__esModule",{value:!0});c.error=g;c.apply=function(c,f,l,r){void 0===l&&(l=k.defaultApplyOptions);void 0===r&&(r=f);r!==f&&r.copyFrom(f);var q=g(c,f,l);if(0===q)return!1;var t=c.pointsOfInterest.surfaceOrigin,q=n.vec3.distance(f.eye,c.pointsOfInterest.surfaceOrigin.renderLocation)+q,u=n.vec3.copy(b,f.eye);l=k.interactionDirectionTowardsConstraintMinimization(c,
f,l.interactionDirection,h.directionFromTo(m,f.eye,c.pointsOfInterest.surfaceOrigin.renderLocation),e);return d.sphere.intersectRay(d.sphere.wrap(q,t.renderLocation),d.ray.wrap(f.eye,l),r.eye)?(f=n.vec3.subtract(a,r.eye,u),n.vec3.add(r.center,r.center,f),r.markViewDirty(),f=c.renderCoordsHelper.getAltitude(r.center),c.renderCoordsHelper.intersectInfiniteManifold(r.ray,f,r.center),r.markViewDirty(),!0):!1};var f={min:0,max:0},b=l.vec3f64.create(),a=l.vec3f64.create(),e=l.vec3f64.create(),m=l.vec3f64.create()})},
"esri/views/3d/camera/constraintUtils/surfaceCollision":function(){define(["require","exports","../../../../core/libs/gl-matrix-2/vec3","../../../../core/libs/gl-matrix-2/vec3f64","../intersectionUtils"],function(p,c,n,l,k){Object.defineProperty(c,"__esModule",{value:!0});c.apply=function(c,g,f,b){void 0===f&&(f=0);void 0===b&&(b=g);var a=c.state.constraints;g!==b&&b.copyFrom(g);if(!a.collision.enabled)return!1;var e=k.surfaceElevationBelowEye(c,g);g=c.renderCoordsHelper.getAltitude(g.eye);a=e+a.collision.elevationMargin;
if(g>=a)return!1;e=n.vec3.length(b.eye);n.vec3.subtract(d,b.center,b.eye);c.renderCoordsHelper.setAltitude(a,b.eye);1===f?n.vec3.add(b.center,b.eye,d):2===f&&n.vec3.scale(b.center,b.center,(e-g+a)/e);b.markViewDirty();return!0};var d=l.vec3f64.create()})},"esri/views/3d/camera/intersectionUtils":function(){define("require exports ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../geometry/Point ../../../geometry/support/aaBoundingRect ../support/earthUtils ../webgl-engine/lib/Intersector".split(" "),
function(p,c,n,l,k,d,h,g){function f(a,b){return a.renderCoordsHelper.fromRenderCoords(b,u,a.basemapTerrain.spatialReference)?a.basemapTerrain.getElevation(u)||0:0}function b(a,b,d){if(!a.state.isGlobal)return!1;var e=f(a,b);a=a.stateManager.constraintsManager.nearFarHeuristic.compute(b,d,a.dataExtent,e,r).far;a*=a;return n.vec3.squaredDistance(b,d)>a}function a(a,d,c){void 0===c&&(c=l.vec3f64.create());var f=e[a.viewingMode];f||(f=new g(a.viewingMode),f.enable.backfacesTerrain=!a.state.isGlobal,
f.enable.invisibleTerrain=!0,e[a.viewingMode]=f);var m=a.state.isGlobal;return a.sceneIntersectionHelper.intersectRay(d,c,null,f)&&!b(a,d.origin,c)?!0:!a.renderCoordsHelper.intersectManifold(d,0,c)||b(a,d.origin,c)?m?(a=c,c=n.vec3.dot(d.origin,d.origin)-h.earthRadius*h.earthRadius,n.vec3.scale(a,d.direction,(0<c?Math.sqrt(c)/3:1)/n.vec3.length(d.direction)),n.vec3.add(a,a,d.origin),!0):!1:!0}Object.defineProperty(c,"__esModule",{value:!0});c.eyeWithinExtent=function(a,b,e,c){return a.renderCoordsHelper.fromRenderCoords(b.eye,
m,c)&&d.containsPoint(e,m)};c.surfaceElevationBelowEye=function(a,b){return f(a,b.eye)};c.cameraOnContentAlongViewDirection=function(b,d,e,c){var f=b.state.camera.clone();d&&(f.eye=d);e&&(f.center=e);c&&(f.up=c);a(b,f.ray,q)||n.vec3.copy(q,f.center);e=b.state.constraints;c=e.minimumPoiDistance;n.vec3.squaredDistance(f.eye,q)<c&&(d=e.collision.enabled,n.vec3.copy(t,f.viewForward),n.vec3.scale(t,t,c),d?n.vec3.subtract(f.eye,q,t):n.vec3.add(q,f.eye,t),b=b.renderCoordsHelper,c=b.getAltitude(f.eye),e=
e.collision.elevationMargin,d&&c<e&&(n.vec3.subtract(t,q,f.eye),b.setAltitude(e,f.eye),n.vec3.add(q,f.eye,t)));f.center=q;return f};var e={},m=l.vec3f64.create(),q=l.vec3f64.create(),u=new k,t=l.vec3f64.create(),r={near:0,far:0}})},"esri/views/3d/webgl-engine/lib/Intersector":function(){define("require exports ../../../../core/has ../../../../core/now ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../support/geometryUtils ./intersectorUtils".split(" "),
function(p,c,n,l,k,d,h,g,f){var b=k.mat4f64.create();return function(){function a(a){this.enable=new f.EnableIntersectorOptions;this.results=new f.IntersectorResults;this.transform=new f.IntersectorTransform;this.performanceInfo={queryDuration:0,numObjectsTested:0};this._ray={origin:h.vec3f64.create(),direction:h.vec3f64.create()};this._rayEndPoint=h.vec3f64.create();this._rayStartPointTransformed=h.vec3f64.create();this._rayEndPointTransformed=h.vec3f64.create();this.viewingMode=a||"global"}Object.defineProperty(a.prototype,
"ray",{get:function(){return this._ray},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"rayBeginPoint",{get:function(){return this._ray.origin},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"rayEndPoint",{get:function(){return this._rayEndPoint},enumerable:!0,configurable:!0});a.prototype.intersect=function(a,b,c,f,h,k,l,n,v){var e=this;if(void 0===v||!0===v)this._numObjectsTested=0,g.ray.fromPoints(b,c,this._ray),this.results.init(this._ray);this.point=f;this.camera=
h;this.enable.selectionMode=l;this.filterPredicate=n;this.tolerance=null==k?1E-5:k;d.vec3.add(this._rayEndPoint,this._ray.origin,this._ray.direction);if(a&&0<a.length)for(b=0;b<a.length;b++)if(c=a[b],f=c.getSpatialQueryAccelerator?c.getSpatialQueryAccelerator():void 0)c=function(a){e.intersectObject(a)},f.forEachAlongRay(this._ray.origin,this._ray.direction,c),l&&f.forEachDegenerateObject(c);else for(f=0,c=c.getObjects();f<c.length;f++)this.intersectObject(c[f]);this.sortResults()};a.prototype.intersectObject=
function(a){var e=this;this._numObjectsTested++;for(var c=a.id,g=a.getGeometryRecords(),h=a.objectTransformation,k,l=function(m){m=g[m];var l=m.geometry,q=m.material,r=m.instanceParameters;if(r.hidden)return"continue";k=l.id;n.transform.setAndInvalidateLazyTransforms(h,m.getShaderTransformation());d.vec3.transformMat4(n._rayStartPointTransformed,n._ray.origin,n.transform.inverse);d.vec3.transformMat4(n._rayEndPointTransformed,n._rayEndPoint,n.transform.inverse);var t=n.transform.transform;q.intersect(l,
r,n.transform.transform,n,n._rayStartPointTransformed,n._rayEndPointTransformed,function(d,m,g,h,l,q){0<=d&&(null==e.filterPredicate||e.filterPredicate(e._ray.origin,e._rayEndPoint,d))&&(l?(null==e.results.hud.dist||d<e.results.hud.dist)&&e.results.hud.set(a,c,d,m,b,h,q,k,g):(l=function(b){return b.set(a,c,d,m,t,h,null,k,g)},(null==e.results.min.drapedLayerOrder||h>=e.results.min.drapedLayerOrder)&&(null==e.results.min.dist||d<e.results.min.dist)&&l(e.results.min),(null==e.results.max.drapedLayerOrder||
h<e.results.max.drapedLayerOrder)&&(null==e.results.max.dist||d>e.results.max.dist)&&l(e.results.max),e.enable.storeAll&&(q=new f.IntersectorResult(e._ray),l(q),e.results.all.push(q))))},m.shaderTransformation)},n=this,v=0;v<g.length;v++)l(v)};a.prototype.sortResults=function(){this.results.all.sort(function(a,b){return a.dist!==b.dist?a.dist-b.dist:a.drapedLayerOrder!==b.drapedLayerOrder?(void 0!==a.drapedLayerOrder?a.drapedLayerOrder:Number.MAX_VALUE)-(void 0!==b.drapedLayerOrder?b.drapedLayerOrder:
Number.MAX_VALUE):(void 0!==b.drapedLayerGraphicOrder?b.drapedLayerGraphicOrder:Number.MIN_VALUE)-(void 0!==a.drapedLayerGraphicOrder?a.drapedLayerGraphicOrder:Number.MIN_VALUE)})};a.DEFAULT_TOLERANCE=1E-5;return a}()})},"esri/views/3d/webgl-engine/lib/intersectorUtils":function(){define("require exports ../../../../Graphic ../../../../core/maybe ../../../../core/libs/gl-matrix-2/mat3 ../../../../core/libs/gl-matrix-2/mat3f64 ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4 ../../../../core/libs/gl-matrix-2/vec4f64 ../../support/geometryUtils ../../support/geometryUtils/boundedPlane ./Object3D".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u){function t(a,b){return l.isNone(a)||null==a.layerUid?null:l.isSome(b.graphicsView)&&a.layerUid===b.graphicsView.mockLayerId?b.graphics:b.map.findLayerByUid(a.layerUid)}function r(a,b,d){if(l.isNone(a))return null;var e=t(a,b);return l.isNone(e)?null:e===b.graphics?l.isSome(b.graphicsView)?l.expect(b.graphicsView.getGraphicFromGraphicUid(a.graphicUid)):null:(b=b.allLayerViews.find(function(a){return a.layer===e}))?x(b,a,d):null}function x(a,b,d){return!a||a.suspended?
null:l.isSome(d)&&"getGraphicFromStageObject"in a?a.getGraphicFromStageObject(d.obj,d.triangleNr):"getGraphicFromGraphicUid"in a&&null!=b.graphicUid?a.getGraphicFromGraphicUid(b.graphicUid):null}Object.defineProperty(c,"__esModule",{value:!0});c.sliceFilterPredicate=function(a){return function(b,d,e){f.vec3.lerp(y,b,d,e);return!q.extrusionContainsPoint(a,y)}};p=function(){return function(){this.selectOpaqueTerrainOnly=this.hud=!0;this.invisibleTerrain=!1;this.storeAll=this.storeTerrainResults=this.backfacesTerrain=
!0}}();c.EnableIntersectorOptions=p;p=function(){function a(){this._transform=g.mat4f64.create();this._transformInverse=new w({value:this._transform},h.mat4.invert,g.mat4f64.create);this._transformInverseTranspose=new w(this._transformInverse,h.mat4.transpose,g.mat4f64.create);this._transformTranspose=new w({value:this._transform},h.mat4.transpose,g.mat4f64.create);this._transformInverseRotation=new w({value:this._transform},k.mat3.normalFromMat4Legacy,d.mat3f64.create)}a.prototype.invalidateLazyTransforms=
function(){this._transformInverse.invalidate();this._transformInverseTranspose.invalidate();this._transformTranspose.invalidate();this._transformInverseRotation.invalidate()};Object.defineProperty(a.prototype,"transform",{get:function(){return this._transform},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"inverse",{get:function(){return this._transformInverse.value},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"inverseTranspose",{get:function(){return this._transformInverseTranspose.value},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"inverseRotation",{get:function(){return this._transformInverseRotation.value},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"transpose",{get:function(){return this._transformTranspose.value},enumerable:!0,configurable:!0});a.prototype.setTransformMatrix=function(a){h.mat4.copy(this._transform,a)};a.prototype.multiplyTransform=function(a){h.mat4.multiply(this._transform,this._transform,a)};a.prototype.set=function(a){h.mat4.copy(this._transform,
a);this.invalidateLazyTransforms()};a.prototype.setAndInvalidateLazyTransforms=function(a,b){this.setTransformMatrix(a);this.multiplyTransform(b);this.invalidateLazyTransforms()};return a}();c.IntersectorTransform=p;var w=function(){function a(a,b,d){this.original=a;this.update=b;this.dirty=!0;this.transform=d()}a.prototype.invalidate=function(){this.dirty=!0};Object.defineProperty(a.prototype,"value",{get:function(){this.dirty&&(this.update(this.transform,this.original.value),this.dirty=!1);return this.transform},
enumerable:!0,configurable:!0});return a}();p=function(){function a(){this.min=new v;this.max=new v;this.hud=new v;this.terrain=new v}a.prototype.init=function(a){this.min.init(a);this.max.init(a);this.hud.init(a);this.terrain.init(a);this.all=[]};return a}();c.IntersectorResults=p;var v=function(){function d(a){this.normal=b.vec3f64.create();this.transformation=g.mat4f64.create();this._ray=m.ray.create();this.init(a)}Object.defineProperty(d.prototype,"ray",{get:function(){return this._ray},enumerable:!0,
configurable:!0});Object.defineProperty(d.prototype,"hasIntersectionPoint",{get:function(){return null!=this.dist},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"distanceInRenderSpace",{get:function(){if(null!=this.dist)return f.vec3.scale(z,this.ray.direction,this.dist),f.vec3.length(z)},enumerable:!0,configurable:!0});d.prototype.getIntersectionPoint=function(a){if(!this.hasIntersectionPoint)return!1;f.vec3.scale(z,this.ray.direction,this.dist);f.vec3.add(a,this.ray.origin,z);
return!0};d.prototype.getTransformedNormal=function(b){f.vec3.copy(A,this.normal);A[3]=0;a.vec4.transformMat4(A,A,this.transformation);f.vec3.copy(b,A);f.vec3.normalize(b,b);return b};d.prototype.set=function(a,d,e,c,m,g,k,l,q,r){a instanceof u&&(a={type:"stage",obj:a});this.dist=e;f.vec3.copy(this.normal,c);h.mat4.copy(this.transformation,m);this.target=a;this.name=d;this.drapedLayerOrder=g;this.center=k?b.vec3f64.clone(k):null;this.geometryId=l;this.triangleNr=q;this.drapedLayerGraphicOrder=r};
d.prototype.copyFrom=function(a){m.ray.copy(a._ray,this._ray);this.dist=a.dist;this.target=a.target;this.name=a.name;this.drapedLayerOrder=a.drapedLayerOrder;this.center=a.center?b.vec3f64.clone(a.center):null;this.geometryId=a.geometryId;this.triangleNr=a.triangleNr;this.intersector=a.intersector;this.drapedLayerGraphicOrder=a.drapedLayerGraphicOrder;f.vec3.copy(this.normal,a.normal);h.mat4.copy(this.transformation,a.transformation)};d.prototype.init=function(a){this.drapedLayerGraphicOrder=this.drapedLayerOrder=
this.name=this.target=this.dist=void 0;this.triangleNr=this.geometryId=this.center=null;this.intersector="Stage";a?m.ray.copy(a,this._ray):this._ray=m.ray.create()};d.prototype.toOwner=function(a){if(!this.target)return null;switch(this.target.type){case "stage":var b=this.target.obj.getMetadata();return t(b,a);case "external":switch(this.intersector){case "PointRenderer":return b=this.target.metadata.layerUid,null!=b?a.map.findLayerByUid(b):null;case "LodRenderer":case "DrapedRenderer":return t(this.target.metadata,
a);case "TerrainRenderer":return a.map&&a.map.ground}}return null};d.prototype.toGraphic=function(a){if(!this.target)return null;switch(this.target.type){case "stage":var b=this.target.obj,d=this.triangleNr,e=b.getMetadata();return r(e,a,{obj:b,triangleNr:d});case "external":switch(this.intersector){case "PointRenderer":return d=this.target,b=a.computeMapPointFromVec3d(d.point),b=new n(b),d=d.metadata.layerUid,null!=d&&(a=a.map.findLayerByUid(d),b.layer=a,b.sourceLayer=a),b;case "LodRenderer":case "DrapedRenderer":return r(this.target.metadata,
a,null)}}return null};return d}();c.IntersectorResult=v;c.TERRAIN_ID="terrain";var y=b.vec3f64.create(),z=b.vec3f64.create(),A=e.vec4f64.create()})},"esri/core/libs/gl-matrix-2/mat3":function(){define(["require","exports","./math/mat3"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.mat3=n})},"esri/core/libs/gl-matrix-2/math/mat3":function(){define(["require","exports","./common"],function(p,c,n){function l(d,c,g){var f=c[0],b=c[1],a=c[2],e=c[3],m=c[4],h=c[5],k=c[6],l=c[7];c=c[8];
var r=g[0],n=g[1],w=g[2],v=g[3],y=g[4],z=g[5],A=g[6],B=g[7];g=g[8];d[0]=r*f+n*e+w*k;d[1]=r*b+n*m+w*l;d[2]=r*a+n*h+w*c;d[3]=v*f+y*e+z*k;d[4]=v*b+y*m+z*l;d[5]=v*a+y*h+z*c;d[6]=A*f+B*e+g*k;d[7]=A*b+B*m+g*l;d[8]=A*a+B*h+g*c;return d}function k(d,c,g){d[0]=c[0]-g[0];d[1]=c[1]-g[1];d[2]=c[2]-g[2];d[3]=c[3]-g[3];d[4]=c[4]-g[4];d[5]=c[5]-g[5];d[6]=c[6]-g[6];d[7]=c[7]-g[7];d[8]=c[8]-g[8];return d}Object.defineProperty(c,"__esModule",{value:!0});c.fromMat4=function(d,c){d[0]=c[0];d[1]=c[1];d[2]=c[2];d[3]=c[4];
d[4]=c[5];d[5]=c[6];d[6]=c[8];d[7]=c[9];d[8]=c[10];return d};c.copy=function(d,c){d[0]=c[0];d[1]=c[1];d[2]=c[2];d[3]=c[3];d[4]=c[4];d[5]=c[5];d[6]=c[6];d[7]=c[7];d[8]=c[8];return d};c.set=function(d,c,g,f,b,a,e,m,k,l){d[0]=c;d[1]=g;d[2]=f;d[3]=b;d[4]=a;d[5]=e;d[6]=m;d[7]=k;d[8]=l;return d};c.identity=function(d){d[0]=1;d[1]=0;d[2]=0;d[3]=0;d[4]=1;d[5]=0;d[6]=0;d[7]=0;d[8]=1;return d};c.transpose=function(d,c){if(d===c){var g=c[1],f=c[2],b=c[5];d[1]=c[3];d[2]=c[6];d[3]=g;d[5]=c[7];d[6]=f;d[7]=b}else d[0]=
c[0],d[1]=c[3],d[2]=c[6],d[3]=c[1],d[4]=c[4],d[5]=c[7],d[6]=c[2],d[7]=c[5],d[8]=c[8];return d};c.invert=function(d,c){var g=c[0],f=c[1],b=c[2],a=c[3],e=c[4],m=c[5],h=c[6],k=c[7];c=c[8];var l=c*e-m*k,r=-c*a+m*h,n=k*a-e*h,w=g*l+f*r+b*n;if(!w)return null;w=1/w;d[0]=l*w;d[1]=(-c*f+b*k)*w;d[2]=(m*f-b*e)*w;d[3]=r*w;d[4]=(c*g-b*h)*w;d[5]=(-m*g+b*a)*w;d[6]=n*w;d[7]=(-k*g+f*h)*w;d[8]=(e*g-f*a)*w;return d};c.adjoint=function(d,c){var g=c[0],f=c[1],b=c[2],a=c[3],e=c[4],m=c[5],h=c[6],k=c[7];c=c[8];d[0]=e*c-m*
k;d[1]=b*k-f*c;d[2]=f*m-b*e;d[3]=m*h-a*c;d[4]=g*c-b*h;d[5]=b*a-g*m;d[6]=a*k-e*h;d[7]=f*h-g*k;d[8]=g*e-f*a;return d};c.determinant=function(d){var c=d[3],g=d[4],f=d[5],b=d[6],a=d[7],e=d[8];return d[0]*(e*g-f*a)+d[1]*(-e*c+f*b)+d[2]*(a*c-g*b)};c.multiply=l;c.translate=function(d,c,g){var f=c[0],b=c[1],a=c[2],e=c[3],m=c[4],h=c[5],k=c[6],l=c[7];c=c[8];var r=g[0];g=g[1];d[0]=f;d[1]=b;d[2]=a;d[3]=e;d[4]=m;d[5]=h;d[6]=r*f+g*e+k;d[7]=r*b+g*m+l;d[8]=r*a+g*h+c;return d};c.rotate=function(d,c,g){var f=c[0],
b=c[1],a=c[2],e=c[3],m=c[4],h=c[5],k=c[6],l=c[7];c=c[8];var r=Math.sin(g);g=Math.cos(g);d[0]=g*f+r*e;d[1]=g*b+r*m;d[2]=g*a+r*h;d[3]=g*e-r*f;d[4]=g*m-r*b;d[5]=g*h-r*a;d[6]=k;d[7]=l;d[8]=c;return d};c.scale=function(d,c,g){var f=g[0],b=g[1];g=g[2];d[0]=f*c[0];d[1]=f*c[1];d[2]=f*c[2];d[3]=b*c[3];d[4]=b*c[4];d[5]=b*c[5];d[6]=g*c[6];d[7]=g*c[7];d[8]=g*c[8];return d};c.fromTranslation=function(d,c){d[0]=1;d[1]=0;d[2]=0;d[3]=0;d[4]=1;d[5]=0;d[6]=c[0];d[7]=c[1];d[8]=1;return d};c.fromRotation=function(d,
c){var g=Math.sin(c);c=Math.cos(c);d[0]=c;d[1]=g;d[2]=0;d[3]=-g;d[4]=c;d[5]=0;d[6]=0;d[7]=0;d[8]=1;return d};c.fromScaling=function(d,c){d[0]=c[0];d[1]=0;d[2]=0;d[3]=0;d[4]=c[1];d[5]=0;d[6]=0;d[7]=0;d[8]=1;return d};c.fromMat2d=function(d,c){d[0]=c[0];d[1]=c[1];d[2]=0;d[3]=c[2];d[4]=c[3];d[5]=0;d[6]=c[4];d[7]=c[5];d[8]=1;return d};c.fromQuat=function(d,c){var g=c[0],f=c[1],b=c[2];c=c[3];var a=g+g,e=f+f,m=b+b,g=g*a,h=f*a,f=f*e,k=b*a,l=b*e,b=b*m,a=c*a,e=c*e;c*=m;d[0]=1-f-b;d[3]=h-c;d[6]=k+e;d[1]=h+
c;d[4]=1-g-b;d[7]=l-a;d[2]=k-e;d[5]=l+a;d[8]=1-g-f;return d};c.normalFromMat4Legacy=function(d,c){var g=c[0],f=c[1],b=c[2],a=c[4],e=c[5],m=c[6],h=c[8],k=c[9];c=c[10];var l=c*e-m*k,r=-c*a+m*h,n=k*a-e*h,w=g*l+f*r+b*n;if(!w)return null;w=1/w;d[0]=l*w;d[1]=(-c*f+b*k)*w;d[2]=(m*f-b*e)*w;d[3]=r*w;d[4]=(c*g-b*h)*w;d[5]=(-m*g+b*a)*w;d[6]=n*w;d[7]=(-k*g+f*h)*w;d[8]=(e*g-f*a)*w;return d};c.normalFromMat4=function(d,c){var g=c[0],f=c[1],b=c[2],a=c[3],e=c[4],m=c[5],h=c[6],k=c[7],l=c[8],r=c[9],n=c[10],w=c[11],
v=c[12],y=c[13],z=c[14];c=c[15];var A=g*m-f*e,B=g*h-b*e,p=g*k-a*e,C=f*h-b*m,E=f*k-a*m,H=b*k-a*h,G=l*y-r*v,I=l*z-n*v,l=l*c-w*v,K=r*z-n*y,r=r*c-w*y,n=n*c-w*z,w=A*n-B*r+p*K+C*l-E*I+H*G;if(!w)return null;w=1/w;d[0]=(m*n-h*r+k*K)*w;d[1]=(h*l-e*n-k*I)*w;d[2]=(e*r-m*l+k*G)*w;d[3]=(b*r-f*n-a*K)*w;d[4]=(g*n-b*l+a*I)*w;d[5]=(f*l-g*r-a*G)*w;d[6]=(y*H-z*E+c*C)*w;d[7]=(z*p-v*H-c*B)*w;d[8]=(v*E-y*p+c*A)*w;return d};c.projection=function(d,c,g){d[0]=2/c;d[1]=0;d[2]=0;d[3]=0;d[4]=-2/g;d[5]=0;d[6]=-1;d[7]=1;d[8]=
1;return d};c.str=function(d){return"mat3("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+", "+d[4]+", "+d[5]+", "+d[6]+", "+d[7]+", "+d[8]+")"};c.frob=function(d){return Math.sqrt(Math.pow(d[0],2)+Math.pow(d[1],2)+Math.pow(d[2],2)+Math.pow(d[3],2)+Math.pow(d[4],2)+Math.pow(d[5],2)+Math.pow(d[6],2)+Math.pow(d[7],2)+Math.pow(d[8],2))};c.add=function(d,c,g){d[0]=c[0]+g[0];d[1]=c[1]+g[1];d[2]=c[2]+g[2];d[3]=c[3]+g[3];d[4]=c[4]+g[4];d[5]=c[5]+g[5];d[6]=c[6]+g[6];d[7]=c[7]+g[7];d[8]=c[8]+g[8];return d};c.subtract=
k;c.multiplyScalar=function(d,c,g){d[0]=c[0]*g;d[1]=c[1]*g;d[2]=c[2]*g;d[3]=c[3]*g;d[4]=c[4]*g;d[5]=c[5]*g;d[6]=c[6]*g;d[7]=c[7]*g;d[8]=c[8]*g;return d};c.multiplyScalarAndAdd=function(d,c,g,f){d[0]=c[0]+g[0]*f;d[1]=c[1]+g[1]*f;d[2]=c[2]+g[2]*f;d[3]=c[3]+g[3]*f;d[4]=c[4]+g[4]*f;d[5]=c[5]+g[5]*f;d[6]=c[6]+g[6]*f;d[7]=c[7]+g[7]*f;d[8]=c[8]+g[8]*f;return d};c.exactEquals=function(d,c){return d[0]===c[0]&&d[1]===c[1]&&d[2]===c[2]&&d[3]===c[3]&&d[4]===c[4]&&d[5]===c[5]&&d[6]===c[6]&&d[7]===c[7]&&d[8]===
c[8]};c.equals=function(d,c){var g=d[0],f=d[1],b=d[2],a=d[3],e=d[4],m=d[5],h=d[6],k=d[7];d=d[8];var l=c[0],r=c[1],x=c[2],w=c[3],v=c[4],y=c[5],z=c[6],A=c[7];c=c[8];return Math.abs(g-l)<=n.EPSILON*Math.max(1,Math.abs(g),Math.abs(l))&&Math.abs(f-r)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(r))&&Math.abs(b-x)<=n.EPSILON*Math.max(1,Math.abs(b),Math.abs(x))&&Math.abs(a-w)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(e-v)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(v))&&Math.abs(m-y)<=n.EPSILON*
Math.max(1,Math.abs(m),Math.abs(y))&&Math.abs(h-z)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(z))&&Math.abs(k-A)<=n.EPSILON*Math.max(1,Math.abs(k),Math.abs(A))&&Math.abs(d-c)<=n.EPSILON*Math.max(1,Math.abs(d),Math.abs(c))};c.mul=l;c.sub=k})},"esri/views/3d/webgl-engine/lib/Object3D":function(){define("require exports ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../support/mathUtils ./ComponentUtils ./GeometryRecord ./HighlightUtils ./IdGen ./ModelContentType ./Util".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m){var q=m.assert,u=l.mat4f64.create();p=function(){function c(a){void 0===a&&(a={});this._objectTransformation=l.mat4f64.create();this._bvObjectSpace=new t;this._bvWorldSpace=new t;this._bvDirty=!0;this._hasVolatileTransformation=!1;this._allComponentsVisibleDirty=this._allComponentsHiddenDirty=!0;this.id=c._idGen.gen(a.idHint);this.name=a.name;this.castShadow=null!=a.castShadow?a.castShadow:!0;this.metadata=a.metadata;this.objectTransformation=l.mat4f64.create();
this._initializeGeometryRecords(a.geometries,a.materials,a.transformations,a.origins)}Object.defineProperty(c.prototype,"objectTransformation",{get:function(){return this._objectTransformation},set:function(a){n.mat4.copy(this._objectTransformation,a);this._invalidateBoundingVolume();this._notifyDirty("objTransformation")},enumerable:!0,configurable:!0});c.prototype._initializeGeometryRecords=function(a,b,d,e){if(Array.isArray(a)){q(b.length===a.length,"Object3D: materials don't match geometries");
q(d.length===a.length,"Object3D: transformations don't match geometries");this.geometryRecords=Array(a.length);this.geometries=a.slice();for(var c=0;c<a.length;c++)this.geometryRecords[c]=new f(a[c],b[c],l.mat4f64.clone(d[c]),{},e&&e[c]);this._hasVolatileTransformation=!1}else this.geometryRecords=[],this.geometries=[]};Object.defineProperty(c.prototype,"parentLayer",{get:function(){return this._parentLayer},set:function(a){q(null==this._parentLayer||null==a,"Object3D can only be added to a single Layer");
this._parentLayer=a},enumerable:!0,configurable:!0});c.prototype.getNumGeometryRecords=function(){return this.geometryRecords.length};c.prototype.getFirstGeometryIndex=function(a){a=this.geometries.indexOf(a);q(-1<a,"Object3D.getFirstGeometryIndex: geometry not found");return a};c.prototype.findGeometryRecords=function(a){for(var b=[],d=0;d<this.geometries.length;d++)this.geometries[d]===a&&b.push(this.geometryRecords[d]);return b};c.prototype.getGeometryRecord=function(a){q(0<=a&&a<this.geometryRecords.length,
"Object3d.getGeometryDataByIndex: index out of range");return this.geometryRecords[a]};c.prototype.getGeometryRecords=function(){return this.geometryRecords};c.prototype.addGeometry=function(a,b,d,e,c,m){void 0===d&&(d=u);this.geometries.push(a);a=new f(a,b,l.mat4f64.clone(d),e||{},c,m);this.geometryRecords.push(a);this._hasVolatileTransformation=this.geometryRecords.some(function(a){return!!a.shaderTransformation});this._notifyDirty("objGeometryAdded",a);this._invalidateBoundingVolume();this._allComponentsVisibleDirty=
this._allComponentsHiddenDirty=!0;return a};c.prototype.hasGeometry=function(a){return-1<this.geometries.indexOf(a)};c.prototype.removeGeometry=function(a){var b=this.geometryRecords.splice(a,1)[0];this._hasVolatileTransformation=this.geometryRecords.some(function(a){return!!a.shaderTransformation});this.geometries.splice(a,1);this._notifyDirty("objGeometryRemoved",b);this._invalidateBoundingVolume();this._allComponentsVisibleDirty=this._allComponentsHiddenDirty=!0;return b};c.prototype.removeAllGeometries=
function(){for(;0<this.getNumGeometryRecords();)this.removeGeometry(0)};c.prototype.geometryVertexAttrsUpdated=function(a){this._notifyDirty("vertexAttrsUpdated",this.geometryRecords[a]);this._invalidateBoundingVolume()};c.prototype.areAllComponentsHidden=function(){if(this._allComponentsHiddenDirty){this._allComponentsHiddenDirty=!1;this._allComponentsHidden=!0;for(var a=0,b=this.geometryRecords;a<b.length;a++){var d=b[a];if(!g.isAllHidden(d.instanceParameters.componentVisibilities,d.geometry.data.componentOffsets)){this._allComponentsHidden=
!1;break}}}return this._allComponentsHidden};c.prototype.areAllComponentsVisible=function(){if(this._allComponentsVisibleDirty){this._allComponentsVisibleDirty=!1;this._allComponentsVisible=!0;for(var a=0,b=this.geometryRecords;a<b.length;a++){var d=b[a];if(!g.isAllVisible(d.instanceParameters.componentVisibilities,d.geometry.data.componentOffsets)){this._allComponentsVisible=!1;break}}}return this._allComponentsVisible};c.prototype.hasComponents=function(){for(var a=!1,b=0;b<this.geometries.length&&
!(a=g.hasComponents(this.geometries[b].data.componentOffsets));b++);return a};c.prototype.setComponentVisibility=function(a,b,d){b=g.updateVisibility(a.instanceParameters.componentVisibilities,a.geometry.data.componentOffsets,b,d);a.instanceParameters.componentVisibilities=b;this._notifyDirty("visibilityChanged",a);this._allComponentsVisibleDirty=this._allComponentsHiddenDirty=!0};c.prototype.setHidden=function(a,b){a.instanceParameters.hidden=!!b;this._notifyDirty("visibilityChanged",a)};c.prototype.isHidden=
function(a){return!!a.instanceParameters.hidden};c.prototype.getComponentVisibility=function(a,b){return g.getVisibility(a.instanceParameters.componentVisibilities,b)};c.prototype.hideAllComponents=function(){if(this._allComponentsHiddenDirty||!this._allComponentsHidden){for(var a=0,b=this.geometryRecords;a<b.length;a++){var d=b[a],e=g.hideAllComponents(d.instanceParameters.componentVisibilities);d.instanceParameters.componentVisibilities=e}this._notifyDirty("visibilityChanged");this._allComponentsVisibleDirty=
this._allComponentsHiddenDirty=!1;this._allComponentsHidden=!0;this._allComponentsVisible=!1}};c.prototype.unhideAllComponents=function(){if(this._allComponentsVisibleDirty||!this._allComponentsVisible){for(var a=0,b=this.geometryRecords;a<b.length;a++){var d=b[a],e=g.unhideAllComponents(d.instanceParameters.componentVisibilities);d.instanceParameters.componentVisibilities=e}this._notifyDirty("visibilityChanged");this._allComponentsHidden=this._allComponentsVisibleDirty=this._allComponentsHiddenDirty=
!1;this._allComponentsVisible=!0}};c.prototype._setComponentHighlight=function(a,b,d,e){b=g.addHighlight(a.instanceParameters.componentHighlights,b,d,e);a.instanceParameters.componentHighlights=b};c.prototype.setComponentHighlight=function(a,d,e){var c=b.generateHighlightId();this._setComponentHighlight(a,d,e,c);this._notifyDirty("componentHighlightChanged");return c};c.prototype.highlightAllComponents=function(a){for(var d=b.generateHighlightId(),e=0,c=this.geometryRecords;e<c.length;e++)this._setComponentHighlight(c[e],
null,a,d);this._notifyDirty("componentHighlightChanged");return d};c.prototype.removeHighlights=function(a){for(var b=0,d=this.geometryRecords;b<d.length;b++){var e=d[b].instanceParameters,c=g.removeHighlight(e.componentHighlights,a);e.componentHighlights=c}this._notifyDirty("componentHighlightChanged")};c.prototype.getComponentFromTriangleNr=function(a,b){q(0<=a&&a<this.geometryRecords.length,"Object3d.getComponentFromTriangleNr: index out of range");return g.componentFind(this.geometryRecords[a].geometry.data.componentOffsets,
3*b)};c.prototype.setGeometryTransformation=function(a,b){q(0<=a&&a<this.geometryRecords.length,"Object3d.setGeometryTransformation: index out of range");var d=this.geometryRecords[a];b=new f(d.geometry,d.material,l.mat4f64.clone(b),d.instanceParameters);this.geometryRecords[a]=b;this._notifyDirty("objGeometryReplaced",[d,b]);this._invalidateBoundingVolume()};c.prototype.getCombinedStaticTransformation=function(a,b){b=b||l.mat4f64.create();n.mat4.multiply(b,this.objectTransformation,a.getStaticTransformation());
return b};c.prototype.getCombinedShaderTransformation=function(a,b){b=b||l.mat4f64.create();n.mat4.multiply(b,this.objectTransformation,a.getShaderTransformation());return b};c.prototype.hasVolativeTransformation=function(){return this._hasVolatileTransformation};c.prototype.getCastShadow=function(){return this.castShadow};c.prototype.setCastShadow=function(a){this.castShadow=a};c.prototype.getMetadata=function(){return this.metadata};c.prototype.getName=function(){return this.name};c.prototype.getBBMin=
function(a){this._validateBoundingVolume();return a?this._bvObjectSpace.bbMin:this._bvWorldSpace.bbMin};c.prototype.getBBMax=function(a){this._validateBoundingVolume();return a?this._bvObjectSpace.bbMax:this._bvWorldSpace.bbMax};c.prototype.getCenter=function(a){this._validateBoundingVolume();return a?this._bvObjectSpace.center:this._bvWorldSpace.center};c.prototype.getBSRadius=function(a){this._validateBoundingVolume();return a?this._bvObjectSpace.bsRadius:this._bvWorldSpace.bsRadius};c.prototype._validateBoundingVolume=
function(){if(this._bvDirty||this._hasVolatileTransformation){this._bvObjectSpace.init();this._bvWorldSpace.init();for(var a=0;a<this.geometryRecords.length;++a){var b=this.geometries[a],e=this.geometryRecords[a],b=b.boundingInfo;this._calculateTransformedBoundingVolume(b,this._bvObjectSpace,e.getShaderTransformation());this._calculateTransformedBoundingVolume(b,this._bvWorldSpace,this.getCombinedShaderTransformation(e))}k.vec3.lerp(this._bvObjectSpace.center,this._bvObjectSpace.bbMin,this._bvObjectSpace.bbMax,
.5);k.vec3.lerp(this._bvWorldSpace.center,this._bvWorldSpace.bbMin,this._bvWorldSpace.bbMax,.5);for(var e=d.vec3f64.create(),c=d.vec3f64.create(),f=h.maxScale(this.objectTransformation),a=0;a<this.geometryRecords.length;++a){var b=this.geometries[a],m=this.geometryRecords[a].getShaderTransformation(),g=h.maxScale(m),b=b.boundingInfo;k.vec3.transformMat4(e,b.getCenter(),m);m=k.vec3.distance(e,this._bvObjectSpace.center);b=b.getBSRadius()*g;this._bvObjectSpace.bsRadius=Math.max(this._bvObjectSpace.bsRadius,
m+b);k.vec3.transformMat4(c,e,this.objectTransformation);g=k.vec3.distance(c,this._bvWorldSpace.center);this._bvWorldSpace.bsRadius=Math.max(this._bvWorldSpace.bsRadius,g+b*f)}this._bvDirty=!1}};c.prototype._calculateTransformedBoundingVolume=function(a,b,e){var c=a.getBBMin();a=a.getBBMax();var f=d.vec3f64.clone(c),m=d.vec3f64.clone(a);k.vec3.transformMat4(f,f,e);k.vec3.transformMat4(m,m,e);for(var g=0;3>g;++g)b.bbMin[g]=Math.min(b.bbMin[g],f[g],m[g]),b.bbMax[g]=Math.max(b.bbMax[g],f[g],m[g]);for(g=
0;3>g;++g){k.vec3.copy(f,c);k.vec3.copy(m,a);f[g]=a[g];m[g]=c[g];k.vec3.transformMat4(f,f,e);k.vec3.transformMat4(m,m,e);for(var h=0;3>h;++h)b.bbMin[h]=Math.min(b.bbMin[h],f[h],m[h]),b.bbMax[h]=Math.max(b.bbMax[h],f[h],m[h])}};c.prototype._invalidateBoundingVolume=function(){this._bvDirty=!0;this._parentLayer&&this._parentLayer.notifyObjectBBChanged(this,{center:this._bvWorldSpace.center,radius:this._bvWorldSpace.bsRadius})};c.prototype._notifyDirty=function(a,b,d,c){this._parentLayer&&(d=d||e.OBJECT,
this._parentLayer.notifyDirty(a,b,d,c||this))};c._idGen=new a;return c}();var t=function(){function a(){this.bbMin=d.vec3f64.create();this.bbMax=d.vec3f64.create();this.center=d.vec3f64.create();this.bsRadius=0}a.prototype.init=function(){k.vec3.set(this.bbMin,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);k.vec3.set(this.bbMax,-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);k.vec3.set(this.center,0,0,0);this.bsRadius=0};a.prototype.getCenter=function(){return this.center};a.prototype.getBSRadius=
function(){return this.bsRadius};return a}();return p})},"esri/views/3d/webgl-engine/lib/GeometryRecord":function(){define(["require","exports","./IdGen"],function(p,c,n){return function(){function c(k,d,h,g,f,b){this.id=c._idGen.gen(k.id);this.geometry=k;this.material=d;this.transformation=h;this.instanceParameters=g;this.origin=f;this.shaderTransformation=b}c.prototype.getStaticTransformation=function(){return this.transformation};c.prototype.getShaderTransformation=function(){return this.shaderTransformation?
this.shaderTransformation(this.transformation):this.transformation};c._idGen=new n;return c}()})},"esri/views/3d/webgl-engine/lib/IdGen":function(){define(["require","exports"],function(p,c){return function(){function c(){this._count=0}c.prototype.gen=function(c){null==c&&(c="a");return c+"_"+this._count++};return c}()})},"esri/views/3d/webgl-engine/lib/HighlightUtils":function(){define(["require","exports","./IdGen"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});var l=new n;c.generateHighlightId=
function(){return l.gen("highlight")}})},"esri/views/3d/webgl-engine/lib/ModelContentType":function(){define(["require","exports"],function(p,c){return function(){function c(){}c.LAYER="layers";c.OBJECT="objects";c.GEOMETRY="geometries";c.MATERIAL="materials";c.TEXTURE="textures";return c}()})},"esri/views/3d/camera/constraintUtils/tilt":function(){define("require exports ../../../../core/compilerUtils ../../../../core/mathUtils ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ./common ../../state/utils/viewUtils ../../support/earthUtils ../../support/geometryUtils ../../support/mathUtils".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m){function q(a,b,d,e,c){void 0===d&&(d=f.defaultApplyOptions);void 0===e&&(e=b);void 0===c&&(c=!0);b!==e&&e.copyFrom(b);B.eyeCenterDistance=0;B.requiresTwoSteps=!1;var m=u(a,b,d,void 0,B);if(0===m)return!1;k.mat4.identity(w);k.mat4.rotate(w,w,-m,b.viewRight);switch(d.tiltMode){case 1:h.vec3.transformMat4(x,b.viewForward,w);h.vec3.scale(x,x,B.eyeCenterDistance);h.vec3.add(e.center,b.eye,x);break;case 0:h.vec3.subtract(x,b.center,b.eye);h.vec3.transformMat4(x,x,w);
h.vec3.subtract(e.eye,b.center,x);break;default:n.neverReached(d.tiltMode)}h.vec3.transformMat4(e.up,e.up,w);e.markViewDirty();return B.requiresTwoSteps&&c?q(a,e,d,e,!1):!0}function u(d,c,g,k,q){void 0===g&&(g=f.defaultApplyOptions);void 0===k&&(k=f.defaultApplyOptions);if(!d.state.constraints.tilt)return 0;var x=d.state.constraints.tilt(c.distance,z);var w=g;if(0!==w.interactionType){var B=w.interactionStartCamera,p=w.interactionFactor,C=x.min,D=x.max,G=u(d,B,f.defaultApplyOptions,w),E=0===G?0:b.viewAngle(d.renderCoordsHelper,
B.center,B.eye);x.min=C;x.max=D;2===w.interactionType?(f.hasConstraintType(w.selection,2)&&r(d,B,x),f.adjustRangeForInteraction(G,E,!0,p,y,x)):f.adjustRangeForInteraction(G,E,!1,p,y,x)}2===k.interactionType&&f.hasConstraintType(k.selection,2)&&r(d,k.interactionStartCamera,x);if(1===g.tiltMode||1===k.tiltMode){a:{q&&(q.requiresTwoSteps=!1);switch(d.viewingMode){case "global":g=A;w=d.pointsOfInterest.centerOnSurfaceFrequent.estimatedSurfaceAltitude;k=w+a.earthRadius;w=d.renderCoordsHelper.intersectManifold(c.ray,
w,v);g.eyeCenterDistance=c.distance;w?(g.eyeCenterDistance=h.vec3.distance(c.eye,v),g.tiltAtCenter=b.viewAngle(d.renderCoordsHelper,v,c.eye)):d.state.isLocal?g.tiltAtCenter=b.viewAngle(d.renderCoordsHelper,c.center,c.eye):(e.sphere.closestPointOnSilhouette(e.sphere.wrap(k),c.ray,v),g.eyeCenterDistance=h.vec3.distance(c.eye,v),g.tiltAtCenter=m.acos(-h.vec3.dot(c.viewForward,h.vec3.normalize(v,v))));g.radius=k;g.eyeRadius=h.vec3.length(c.eye);g.constraints=d.state.constraints;g.centerIsOnSurface=w;
c=l.clamp(g.tiltAtCenter,x.min,x.max);if(1E-9<Math.abs(g.tiltAtCenter-c)){if(g.centerIsOnSurface){c=g.constraints;d=k=g.tiltAtCenter;x=c.clampTilt(g.eyeCenterDistance,k);w=t(g,x);if(c.clampTilt(w,k)!==x)for(k=0;10>k&&1E-9<Math.abs(x-d);)w=(d+x)/2,B=t(g,w),B=c.clampTilt(B,w),1E-9<Math.abs(B-w)?d=w:x=w,k++;c=x;x=c;d=m.asin(g.radius/g.eyeRadius*Math.sin(g.tiltAtCenter));x=m.asin(g.radius/g.eyeRadius*Math.sin(x));d=g.eyeRadius>g.radius?d-x:x-d}else c=g.constraints.clampTilt(g.eyeCenterDistance,g.tiltAtCenter),
q&&c<Math.PI/2&&(q.requiresTwoSteps=!0,c=Math.PI/2-1E-5),d=g.tiltAtCenter-Math.PI/2-(c-Math.PI/2);q&&(q.eyeCenterDistance=t(g,c));q=d}else q=0;break a;case "local":k=b.viewAngle(d.renderCoordsHelper,c.center,c.eye);g=l.clamp(k,x.min,x.max);x=k-g;1E-9<Math.abs(x)?(q&&(k=d.pointsOfInterest.centerOnSurfaceFrequent.estimatedSurfaceAltitude,d=d.renderCoordsHelper.getAltitude(c.eye)-k,g=Math.cos(g),q.eyeCenterDistance=1E-4<Math.abs(g)?d/g:c.distance),q=x):q=0;break a;default:n.neverReached(d.viewingMode)}q=
void 0}return q}q=b.viewAngle(d.renderCoordsHelper,c.center,c.eye);c=l.clamp(q,x.min,x.max);q-=c;q=1E-9<Math.abs(q)?q:0;return q}function t(a,b){if(!a.centerIsOnSurface)return a.eyeCenterDistance;b=Math.PI-l.clamp(b,0,Math.PI);var d=m.asin(a.radius/a.eyeRadius*Math.sin(b)),e=Math.sin(Math.PI-b-d)/Math.sin(b);return a.eyeRadius<a.radius&&1<e?Math.sin(Math.PI-b-(Math.PI-d))/Math.sin(b)*a.eyeRadius:e*a.eyeRadius}function r(b,d,e){if(!b.state.isLocal){var c=b.state.constraints;if(c.altitude){b=h.vec3.squaredLength(d.center);
var f=Math.sqrt(b);d=d.distance;var g=c.altitude.min+a.earthRadius,c=c.altitude.max+a.earthRadius,g=(g*g-d*d-b)/(-2*f*d);e.min=Math.max(e.min,Math.min(Math.PI-m.acos((c*c-d*d-b)/(-2*f*d)),e.max));e.max=Math.min(e.max,Math.PI-m.acos(g))}}}Object.defineProperty(c,"__esModule",{value:!0});c.apply=q;c.error=u;var x=g.vec3f64.create(),w=d.mat4f64.create(),v=g.vec3f64.create(),y=m.deg2rad(5),z={min:0,max:0},A={constraints:null,radius:0,eyeRadius:0,centerIsOnSurface:!0,eyeCenterDistance:0,tiltAtCenter:0},
B={eyeCenterDistance:0,requiresTwoSteps:!1}})},"esri/views/3d/state/utils/viewUtils":function(){define(["require","exports","../../../../core/libs/gl-matrix-2/vec3","../../../../core/libs/gl-matrix-2/vec3f64","../../support/mathUtils"],function(p,c,n,l,k){Object.defineProperty(c,"__esModule",{value:!0});c.viewAngle=function(c,f,b){c.worldUpAtPosition(f,d);n.vec3.subtract(h,b,f);c=n.vec3.length(h);return 0===c?0:k.acos(n.vec3.dot(h,d)/c)};var d=l.vec3f64.create(),h=l.vec3f64.create()})},"esri/views/animation/easing":function(){define(["require",
"exports"],function(p,c){function n(d){return d}function l(d){var c=2*(d-Math.sqrt((d-1)*d)),g=c/2/d;return function(f){return f<g?d*f*f:c*f-c+1}}function k(d,c){return function(g){return g<c?c*d(g/c):1-d((1-g)/(1-c))*(1-c)}}Object.defineProperty(c,"__esModule",{value:!0});c.linear=n;c.inQuad=function(d){return d*d};c.outQuad=function(d){return 1-c.inQuad(1-d)};c.inOutQuad=function(d){return.5>d?c.inQuad(2*d)/2:(c.outQuad(2*(d-.5))+1)/2};c.inCubic=function(d){return d*d*d};c.outCubic=function(d){return 1-
c.inCubic(1-d)};c.inOutCubic=function(d){return.5>d?c.inCubic(2*d)/2:(c.outCubic(2*(d-.5))+1)/2};c.inQuart=function(d){return d*d*d*d};c.outQuart=function(d){return 1-c.inQuart(1-d)};c.inOutQuart=function(d){return.5>d?c.inQuart(2*d)/2:(c.outQuart(2*(d-.5))+1)/2};c.inQuint=function(d){return d*d*d*d*d};c.outQuint=function(d){return 1-c.inQuint(1-d)};c.inOutQuint=function(d){return.5>d?c.inQuint(2*d)/2:(c.outQuint(2*(d-.5))+1)/2};c.inSine=function(d){return-Math.cos(d*Math.PI/2)+1};c.outSine=function(d){return 1-
c.inSine(1-d)};c.inOutSine=function(d){return.5>d?c.inSine(2*d)/2:(c.outSine(2*(d-.5))+1)/2};c.inExpo=function(d){return Math.pow(2,10*(d-1))};c.outExpo=function(d){return 1-c.inExpo(1-d)};c.inOutExpo=function(d){return.5>d?c.inExpo(2*d)/2:(c.outExpo(2*(d-.5))+1)/2};c.inCirc=function(d){return-(Math.sqrt(1-d*d)-1)};c.outCirc=function(d){return 1-c.inCirc(1-d)};c.inOutCirc=function(d){return.5>d?c.inCirc(2*d)/2:(c.outCirc(2*(d-.5))+1)/2};c.inCoastQuad=k(l(1),1);c.outCoastQuad=k(l(1),0);c.inOutCoastQuad=
k(l(1),.5);c.inCoastCubic=k(l(2),1);c.outCoastCubic=k(l(2),0);c.inOutCoastCubic=k(l(2),.5);c.inCoastQuart=k(l(3),1);c.outCoastQuart=k(l(3),0);c.inOutCoastQuart=k(l(3),.5);c.inCoastQuint=k(l(4),1);c.outCoastQuint=k(l(4),0);c.inOutCoastQuint=k(l(4),.5);c.named={linear:n,"in-quad":c.inQuad,"out-quad":c.outQuad,"in-out-quad":c.inOutQuad,"in-coast-quad":c.inCoastQuad,"out-coast-quad":c.outCoastQuad,"in-out-coast-quad":c.inOutCoastQuad,"in-cubic":c.inCubic,"out-cubic":c.outCubic,"in-out-cubic":c.inOutCubic,
"in-coast-cubic":c.inCoastCubic,"out-coast-cubic":c.outCoastCubic,"in-out-coast-cubic":c.inOutCoastCubic,"in-quart":c.inQuart,"out-quart":c.outQuart,"in-out-quart":c.inOutQuart,"in-coast-quart":c.inCoastQuart,"out-coast-quart":c.outCoastQuart,"in-out-coast-quart":c.inOutCoastQuart,"in-quint":c.inQuint,"out-quint":c.outQuint,"in-out-quint":c.inOutQuint,"in-coast-quint":c.inCoastQuint,"out-coast-quint":c.outCoastQuint,"in-out-coast-quint":c.inOutCoastQuint,"in-sine":c.inSine,"out-sine":c.outSine,"in-out-sine":c.inOutSine,
"in-expo":c.inExpo,"out-expo":c.outExpo,"in-out-expo":c.inOutExpo,"in-circ":c.inCirc,"out-circ":c.outCirc,"in-out-circ":c.inOutCirc}})},"esri/views/3d/state/controllers/PointToPointAnimationController":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/libs/gl-matrix-2/vec3f64 ../../animation/pointToPoint/Animation ./AnimationController ../../webgl-engine/lib/Camera".split(" "),function(p,c,n,l,k,d,h){Object.defineProperty(c,"__esModule",{value:!0});p=function(b){function a(a,
d,c){c=b.call(this,c)||this;c.viewState=a;c.intersectionHelper=d;c.hasTarget=!1;c.animation=new k.default(c.viewState.mode);return c}n(a,b);a.prototype.begin=function(a,b){this.hasTarget=!0;b=this.animationSettings(b);g.copyFrom(this.viewState.camera);this.intersectionHelper.intersectRay(g.ray,f)&&(g.center=f);this.animation.update(g,a,b);this.animation.finished&&this.finish()};a.prototype.finish=function(){this.animation.currentTime=this.animation.time;b.prototype.finish.call(this)};Object.defineProperty(a.prototype,
"steppingFinished",{get:function(){return this.hasTarget&&this.animation.finished},enumerable:!0,configurable:!0});a.prototype.stepController=function(a,d){b.prototype.stepController.call(this,a,d);this.hasTarget&&this.animation.step(a,d)};a.prototype.onControllerEnd=function(a){this.hasTarget&&(this.animation.cameraAt(this.animation.currentTime/this.animation.time,a),this.animation.currentTime=this.animation.time);b.prototype.onControllerEnd.call(this,a)};a.prototype.animationSettings=function(a){void 0===
a&&(a={});return{apex:{maximumDistance:this.viewState.constraints.clampAltitude(Infinity)/6,ascensionFactor:void 0,descensionFactor:void 0},speedFactor:a.speedFactor,duration:a.duration,maxDuration:a.maxDuration,easing:a.easing}};return a}(d.AnimationController);c.PointToPointAnimationController=p;var g=new h,f=l.vec3f64.create()})},"esri/views/3d/animation/pointToPoint/Animation":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ./Camera ../../webgl-engine/lib/Camera ../../../animation/pointToPoint/Animation".split(" "),
function(p,c,n,l,k,d,h,g){Object.defineProperty(c,"__esModule",{value:!0});var f=k.vec3f64.create();p=function(){function b(a){this.currentTime=0;this.animation=new g.Animation(function(){return new d.default(a)});this._current=new d.default(a)}Object.defineProperty(b.prototype,"finished",{get:function(){return this.currentTime>=this.animation.time},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"time",{get:function(){return this.animation.time},enumerable:!0,configurable:!0});
b.prototype.update=function(a,b,d){var e=this.animation.definition.source,c=this.animation.definition.target,m=l.vec3.subtract(f,b.center,a.center),g=l.vec3.length(m);1E-5<=g?(m[0]/=g,m[1]/=g,m[2]/=g):(m[0]=0,m[1]=1,m[0]=0);l.vec3.copy(e.lookAtDirection,m);l.vec3.copy(c.lookAtDirection,m);e.copyFromRenderCamera(a);c.copyFromRenderCamera(b);this._current.copyFrom(e);this.animation.update(e,c,d);this.currentTime=0;a.almostEquals(b,5E-4,!0)&&(this.currentTime=this.animation.time)};b.prototype.cameraAt=
function(a,b){this.animation.cameraAt(a,this._current);b=b||new h;this._current.copyToRenderCamera(b);return b};b.prototype.step=function(a,b){this.finished||(this.currentTime+=a,this.currentTime>=this.time&&(this.currentTime=this.time));return this.cameraAt(this.currentTime/this.time,b)};return b}();c.Animation=p;c.default=p})},"esri/views/3d/animation/pointToPoint/Camera":function(){define("require exports ../../../../core/libs/gl-matrix-2/mat3 ../../../../core/libs/gl-matrix-2/mat3f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../support/mathUtils".split(" "),
function(p,c,n,l,k,d,h){Object.defineProperty(c,"__esModule",{value:!0});var g=h.angle,f=h.lerp,b=h.slerp,a=d.vec3f64.create(),e=d.vec3f64.create(),m=d.vec3f64.create(),q=d.vec3f64.create(),u=d.vec3f64.create(),t=d.vec3f64.create(),r=d.vec3f64.fromValues(0,0,1),x=d.vec3f64.fromValues(0,1,0),w=d.vec3f64.fromValues(1,0,0),v=l.mat3f64.create();p=function(){function c(a){void 0===a&&(a="global");this.viewingMode=a;this.center=d.vec3f64.create();this.distance=this.yaw=this.pitch=0;this.lookAtDirection=
d.vec3f64.clone(x)}c.prototype.pixelsPerPanAtZoom=function(a){return this.size/2/(this._zoomToPanScale*a)};c.prototype.zoomAtPixelsPerPan=function(a){return this.size/2/(this._zoomToPanScale*a)};c.prototype.pixelsPerRotateAtZoom=function(a){return this.size/2/Math.max(Math.cos(Math.abs(this.pitch)),.5)};c.prototype.compareTo=function(a,b){b||(b={pan:0,rotate:0,sourceZoom:0,targetZoom:0});if("global"===this.viewingMode){var d=k.vec3.length(this.center),e=k.vec3.length(a.center),d=(d+e)/2;b.pan=g(this.center,
a.center)*d}else b.pan=k.vec3.distance(this.center,a.center);d=Math.abs(a.yaw-this.yaw);d>=Math.PI&&(d=2*Math.PI-d);b.rotate=Math.max(d,Math.abs(a.pitch-this.pitch));b.sourceZoom=this.distance;b.targetZoom=a.distance;return b};c.prototype.interpolate=function(a,d,e){"global"===this.viewingMode?b(a.center,d.center,e.pan,this.center):k.vec3.lerp(this.center,a.center,d.center,e.pan);this.distance=f(a.distance,d.distance,e.zoom);this.pitch=f(a.pitch,d.pitch,e.rotate);a=a.yaw;d=d.yaw;Math.abs(d-a)>=Math.PI&&
(a+=2*(a<d?1:-1)*Math.PI);this.yaw=f(a,d,e.rotate)};c.prototype.copyFrom=function(a){k.vec3.copy(this.center,a.center);this.pitch=a.pitch;this.yaw=a.yaw;this.distance=a.distance;k.vec3.copy(this.lookAtDirection,a.lookAtDirection);this.size=a.size;this.copyFromCommon(a);this.viewingMode=a.viewingMode};c.prototype.copyFromRenderCamera=function(a){var b=this._lookAtOrientation(a.center,v);k.vec3.copy(this.center,a.center);k.vec3.subtract(q,a.center,a.eye);k.vec3.transformMat3(q,q,b);k.vec3.transformMat3(u,
a.up,b);this.distance=k.vec3.length(q);q[0]/=this.distance;q[1]/=this.distance;q[2]/=this.distance;this.pitch=this._eyeUpToPitch(q,u);this.yaw=this._eyeUpToYaw(q,u);this.size=Math.sqrt(a.width*a.width+a.height*a.height);this.copyFromCommon(a)};c.prototype.copyFromCommon=function(a){this.fov=a.fov;this._zoomToPanScale=Math.atan(.5*this.fov)};c.prototype.copyToRenderCamera=function(a){var b=this._lookAtOrientation(this.center,v);n.mat3.transpose(b,b);this._axisAngleVec3(w,this.pitch-Math.PI/2,x,q);
this._axisAngleVec3(r,this.yaw,q);this._axisAngleVec3(w,this.pitch-Math.PI/2,r,u);this._axisAngleVec3(r,this.yaw,u);k.vec3.scale(q,q,this.distance);k.vec3.transformMat3(q,q,b);k.vec3.transformMat3(u,u,b);a.center=this.center;a.eye=k.vec3.subtract(q,this.center,q);a.up=u};c.prototype._axisAngleVec3=function(b,d,c,f){void 0===f&&(f=c);var g=Math.cos(d);d=Math.sin(d);k.vec3.scale(a,c,g);k.vec3.cross(e,b,c);k.vec3.scale(e,e,d);k.vec3.scale(m,b,(1-g)*k.vec3.dot(b,c));return k.vec3.add(f,k.vec3.add(f,a,
e),m)};c.prototype._lookAtOrientation=function(b,d){this._upAtLookAt(b,m);k.vec3.cross(a,this.lookAtDirection,m);k.vec3.normalize(a,a);0===a[0]&&0===a[1]&&0===a[2]&&k.vec3.copy(a,w);k.vec3.cross(e,m,a);k.vec3.normalize(e,e);d||(d=l.mat3f64.create());d[0]=a[0];d[1]=e[0];d[2]=m[0];d[3]=a[1];d[4]=e[1];d[5]=m[1];d[6]=a[2];d[7]=e[2];d[8]=m[2];return d};c.prototype._upAtLookAt=function(a,b){return"local"===this.viewingMode?k.vec3.copy(b,r):k.vec3.normalize(b,a)};c.prototype._eyeUpToPitch=function(a,b){return Math.PI-
g(r,a)};c.prototype._eyeUpToYaw=function(a,b){.5>Math.abs(b[2])?(k.vec3.copy(t,b),0<a[2]&&k.vec3.scale(t,t,-1)):k.vec3.copy(t,a);k.vec3.cross(e,t,r);k.vec3.normalize(e,e);return g(w,e,r)};return c}();c.default=p})},"esri/views/3d/webgl-engine/lib/Camera":function(){define("require exports ../../../../core/screenUtils ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4 ../../../../core/libs/gl-matrix-2/vec4f64 ../../support/geometryUtils ../../support/mathUtils ../../support/geometryUtils/vector ./Util".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m){function q(a,b){var d=b[0]-a[0],e=b[1]-a[1],c=b[2]-a[2];a=b[3]-a[3];return d*d+e*e+c*c+a*a}function u(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]}function t(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]}p=function(){function c(a,d,c){void 0===a&&(a=h.vec3f64.create());void 0===d&&(d=h.vec3f64.create());void 0===c&&(c=h.vec3f64.fromValues(0,0,1));this._viewUp=h.vec3f64.create();this._viewForward=h.vec3f64.create();this._viewRight=h.vec3f64.create();
this._ray=b.ray.createWrapper();this._viewport=f.vec4f64.fromValues(0,0,1,1);this._padding=f.vec4f64.fromValues(0,0,0,0);this._fov=55/180*Math.PI;this._near=1;this._far=1E3;this._viewDirty=!0;this._viewMatrix=k.mat4f64.create();this._projectionDirty=!0;this._projectionMatrix=k.mat4f64.create();this._viewProjectionDirty=!0;this._viewProjectionMatrix=k.mat4f64.create();this._viewInverseTransposeMatrixDirty=!0;this._viewInverseTransposeMatrix=k.mat4f64.create();this._frustumDirty=!0;this._frustum=b.frustum.create();
this._fullViewport=null;this.pixelRatio=1;this.relativeElevation=0;this._eye=h.vec3f64.clone(a);this._center=h.vec3f64.clone(d);this._up=h.vec3f64.clone(c);this._padding=f.vec4f64.create()}Object.defineProperty(c.prototype,"eye",{get:function(){return this._eye},set:function(a){this._compareAndSetView(a,this._eye)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"center",{get:function(){return this._center},set:function(a){this._compareAndSetView(a,this._center)},enumerable:!0,configurable:!0});
Object.defineProperty(c.prototype,"ray",{get:function(){this._ray.origin=this.eye;this._ray.direction||(this._ray.direction=h.vec3f64.create());d.vec3.subtract(this._ray.direction,this.center,this.eye);return this._ray},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"up",{get:function(){return this._up},set:function(a){this._compareAndSetView(a,this._up)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"viewMatrix",{get:function(){this._ensureViewClean();return this._viewMatrix},
set:function(a){l.mat4.copy(this._viewMatrix,a);this._viewDirty=!1;this._frustumDirty=this._viewProjectionDirty=this._viewInverseTransposeMatrixDirty=!0},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"viewForward",{get:function(){this._ensureViewClean();return this._viewForward},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"viewUp",{get:function(){this._ensureViewClean();return this._viewUp},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"viewRight",{get:function(){this._ensureViewClean();return this._viewRight},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"near",{get:function(){return this._near},set:function(a){this._near!==a&&(this._near=a,this._frustumDirty=this._viewProjectionDirty=this._projectionDirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"far",{get:function(){return this._far},set:function(a){this._far!==a&&(this._far=a,this._frustumDirty=this._viewProjectionDirty=this._projectionDirty=
!0)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"viewport",{get:function(){return this._viewport},set:function(a){this.x=a[0];this.y=a[1];this.width=a[2];this.height=a[3]},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"x",{get:function(){return this._viewport[0]},set:function(a){a+=this._padding[3];this._viewport[0]!==a&&(this._viewport[0]=a,this._frustumDirty=this._viewProjectionDirty=this._projectionDirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"y",{get:function(){return this._viewport[1]},set:function(a){a+=this._padding[2];this._viewport[1]!==a&&(this._viewport[1]=a,this._frustumDirty=this._viewProjectionDirty=this._projectionDirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"width",{get:function(){return this._viewport[2]},set:function(a){this._viewport[2]!==a&&(this._viewport[2]=a,this._frustumDirty=this._viewProjectionDirty=this._projectionDirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"height",{get:function(){return this._viewport[3]},set:function(a){this._viewport[3]!==a&&(this._viewport[3]=a,this._frustumDirty=this._viewProjectionDirty=this._projectionDirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"fullWidth",{get:function(){return this._viewport[2]+this._padding[1]+this._padding[3]},set:function(a){this.width=a-(this._padding[1]+this._padding[3])},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"fullHeight",{get:function(){return this._viewport[3]+
this._padding[0]+this._padding[2]},set:function(a){this.height=a-(this._padding[0]+this._padding[2])},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"fullViewport",{get:function(){this._fullViewport||(this._fullViewport=f.vec4f64.create());this._fullViewport[0]=this._viewport[0]-this._padding[3];this._fullViewport[1]=this._viewport[1]-this._padding[2];this._fullViewport[2]=this.fullWidth;this._fullViewport[3]=this.fullHeight;return this._fullViewport},enumerable:!0,configurable:!0});
Object.defineProperty(c.prototype,"aspect",{get:function(){return this.width/this.height},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"padding",{get:function(){return this._padding},set:function(a){if(this._padding[0]!==a[0]||this._padding[1]!==a[1]||this._padding[2]!==a[2]||this._padding[3]!==a[3])this._viewport[0]+=a[3]-this._padding[3],this._viewport[1]+=a[2]-this._padding[2],this._viewport[2]-=a[1]+a[3]-(this._padding[1]+this._padding[3]),this._viewport[3]-=a[0]+a[2]-(this._padding[0]+
this._padding[2]),g.vec4.copy(this._padding,a),this._frustumDirty=this._viewProjectionDirty=this._projectionDirty=!0},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"viewProjectionMatrix",{get:function(){this._viewProjectionDirty&&(l.mat4.multiply(this._viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),this._viewProjectionDirty=!1);return this._viewProjectionMatrix},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"projectionMatrix",{get:function(){if(this._projectionDirty){var a=
this.width,b=this.height,d=this.near*Math.tan(this.fovY/2),c=d*this.aspect;l.mat4.frustum(this._projectionMatrix,-c*(1+2*this._padding[3]/a),c*(1+2*this._padding[1]/a),-d*(1+2*this._padding[2]/b),d*(1+2*this._padding[0]/b),this.near,this.far);this._projectionDirty=!1}return this._projectionMatrix},set:function(a){l.mat4.copy(this._projectionMatrix,a);this._projectionDirty=!1;this._frustumDirty=this._viewProjectionDirty=!0},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"fov",{get:function(){return this._fov},
set:function(a){this._fov=a;this._frustumDirty=this._viewProjectionDirty=this._projectionDirty=!0},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"fovX",{get:function(){return m.fovd2fovx(this._fov,this.width,this.height)},set:function(a){this._fov=m.fovx2fovd(a,this.width,this.height);this._frustumDirty=this._viewProjectionDirty=this._projectionDirty=!0},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"fovY",{get:function(){return m.fovd2fovy(this._fov,this.width,
this.height)},set:function(a){this._fov=m.fovy2fovd(a,this.width,this.height);this._frustumDirty=this._viewProjectionDirty=this._projectionDirty=!0},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"distance",{get:function(){return d.vec3.distance(this._center,this._eye)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"frustum",{get:function(){this._recomputeFrustum();return this._frustum},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"viewInverseTransposeMatrix",
{get:function(){if(this._viewInverseTransposeMatrixDirty||this._viewDirty)this._viewInverseTransposeMatrix||(this._viewInverseTransposeMatrix=k.mat4f64.create()),l.mat4.invert(this._viewInverseTransposeMatrix,this.viewMatrix),l.mat4.transpose(this._viewInverseTransposeMatrix,this._viewInverseTransposeMatrix),this._viewInverseTransposeMatrixDirty=!1;return this._viewInverseTransposeMatrix},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"perRenderPixelRatio",{get:function(){return Math.tan(this.fovX/
2)/(this.width/2)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"perScreenPixelRatio",{get:function(){return this.perRenderPixelRatio*this.pixelRatio},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"aboveGround",{get:function(){return 0<=this.relativeElevation},enumerable:!0,configurable:!0});c.prototype.copyFrom=function(a){d.vec3.copy(this._eye,a._eye);d.vec3.copy(this._center,a._center);d.vec3.copy(this._up,a._up);g.vec4.copy(this._viewport,a._viewport);
g.vec4.copy(this._padding,a._padding);this._near=a._near;this._far=a._far;this._fov=a._fov;this.relativeElevation=a.relativeElevation;this._viewDirty=a._viewDirty;this._viewDirty||(l.mat4.copy(this._viewMatrix,a._viewMatrix),d.vec3.copy(this._viewRight,a._viewRight),d.vec3.copy(this._viewUp,a._viewUp),d.vec3.copy(this._viewForward,a._viewForward));a._projectionDirty?this._projectionDirty=!0:(l.mat4.copy(this._projectionMatrix,a._projectionMatrix),this._projectionDirty=!1);this._viewProjectionDirty=
!0;this._frustumDirty=a._frustumDirty;this._frustumDirty||(b.frustum.copy(a._frustum,this._frustum),this._frustumDirty=!1);a._viewInverseTransposeMatrixDirty?this._viewInverseTransposeMatrixDirty=!0:(this._viewInverseTransposeMatrix?l.mat4.copy(this._viewInverseTransposeMatrix,a._viewInverseTransposeMatrix):this._viewInverseTransposeMatrix=k.mat4f64.clone(a._viewInverseTransposeMatrix),this._viewInverseTransposeMatrixDirty=!1);a._fullViewport?this._fullViewport?g.vec4.copy(this._fullViewport,a._fullViewport):
this._fullViewport=f.vec4f64.clone(a._fullViewport):this._fullViewport=null;this.pixelRatio=a.pixelRatio;return this};c.prototype.copyViewFrom=function(a){this.eye=a.eye;this.center=a.center;this.up=a.up};c.prototype.clone=function(){var a=new c;a.copyFrom(this);return a};c.prototype.equals=function(a){return u(this._eye,a._eye)&&u(this._center,a._center)&&u(this._up,a._up)&&t(this._viewport,a._viewport)&&t(this._padding,a._padding)&&this._near===a._near&&this._far===a._far&&this._fov===a._fov&&this.pixelRatio===
a.pixelRatio};c.prototype.almostEquals=function(b,c,e){void 0===e&&(e=!1);c=d.vec3.distance(this._eye,this._center)*(c||5E-4);c*=c;e?(a.directionFromTo(w,b._eye,b._center),a.directionFromTo(v,this._eye,this._center),e=1E-10):(d.vec3.copy(w,b._center),d.vec3.copy(v,this._center),e=c);return d.vec3.squaredDistance(b._eye,this._eye)<c&&d.vec3.squaredDistance(w,v)<e&&.001>Math.abs(b._fov-this._fov)&&.5>q(b._padding,this._padding)&&.5>q(b._viewport,this._viewport)&&this.pixelRatio===b.pixelRatio};c.prototype.markViewDirty=
function(){this._viewProjectionDirty=this._frustumDirty=this._viewDirty=!0};c.prototype.computeRenderPixelSizeAt=function(a){return this.computeRenderPixelSizeAtDist(this.viewDirectionDistance(a))};c.prototype.computeRenderPixelSizeAtDist=function(a){return a*this.perRenderPixelRatio};c.prototype.computeScreenPixelSizeAt=function(a){return this.computeScreenPixelSizeAtDist(this.viewDirectionDistance(a))};c.prototype.viewDirectionDistance=function(a){return Math.abs(e.projectPointSignedLength(this.viewForward,
d.vec3.subtract(w,a,this._eye)))};c.prototype.computeScreenPixelSizeAtDist=function(a){return a*this.perScreenPixelRatio};c.prototype.computeDistanceFromRadius=function(a,b){return a/Math.tan(Math.min(this.fovX,this.fovY)/(2*(b||1)))};c.prototype.getScreenCenter=function(a){void 0===a&&(a=n.createScreenPointArray());a[0]=(this.padding[3]+this.width/2)/this.pixelRatio;a[1]=(this.padding[0]+this.height/2)/this.pixelRatio;return a};c.prototype.getRenderCenter=function(a){a||(a=n.createRenderScreenPointArray3());
a[0]=this.padding[3]+this.width/2;a[1]=this.padding[2]+this.height/2;2<a.length&&(a[2]=.5);return a};c.prototype.setGLViewport=function(a){var b=this.viewport,d=this.padding;a.setViewport(b[0]-d[3],b[1]-d[2],b[2]+d[1]+d[3],b[3]+d[0]+d[2])};c.prototype.applyProjection=function(b,c,e){void 0===e&&(e=!1);b!==r&&d.vec3.copy(r,b);r[3]=1;e&&(c[2]=-r[2]);g.vec4.transformMat4(r,r,this.projectionMatrix);d.vec3.scale(r,r,1/Math.abs(r[3]));b=this.fullViewport;c[0]=a.lerp(0,b[0]+b[2],.5+.5*r[0]);c[1]=a.lerp(0,
b[1]+b[3],.5+.5*r[1]);e||(c[2]=.5*(r[2]+1));return c};c.prototype.projectPoint=function(b,c){r[0]=b[0];r[1]=b[1];r[2]=b[2];r[3]=1;g.vec4.transformMat4(r,r,this.viewProjectionMatrix);if(0===r[3])return null;d.vec3.scale(r,r,1/Math.abs(r[3]));b=this.fullViewport;"x"in c?(c.x=a.lerp(0,b[0]+b[2],.5+.5*r[0]),c.y=a.lerp(0,b[1]+b[3],.5+.5*r[1])):(c[0]=a.lerp(0,b[0]+b[2],.5+.5*r[0]),c[1]=a.lerp(0,b[1]+b[3],.5+.5*r[1]),2<c.length&&(c[2]=.5*(r[2]+1)));return c};c.prototype.unprojectPoint=function(a,b){l.mat4.multiply(x,
this.projectionMatrix,this.viewMatrix);if(!l.mat4.invert(x,x))return null;var d=this.fullViewport;r[0]=2*(a[0]-d[0])/d[2]-1;r[1]=2*(a[1]-d[1])/d[3]-1;r[2]=2*a[2]-1;r[3]=1;g.vec4.transformMat4(r,r,x);if(0===r[3])return null;b[0]=r[0]/r[3];b[1]=r[1]/r[3];b[2]=r[2]/r[3];return b};c.prototype.computeUp=function(a){"global"===a?this.computeUpGlobal():this.computeUpLocal()};c.prototype.screenToRender=function(a,b){var d=this.fullHeight-a[1]*this.pixelRatio;b[0]=a[0]*this.pixelRatio;b[1]=d;return b};c.prototype.renderToScreen=
function(a,b){var d=(this.fullHeight-a[1])/this.pixelRatio;b[0]=a[0]/this.pixelRatio;b[1]=d;return b};c.prototype.computeUpGlobal=function(){d.vec3.subtract(w,this.center,this.eye);var a=d.vec3.length(this.center);1>a?(d.vec3.set(this.up,0,0,1),this.markViewDirty()):Math.abs(d.vec3.dot(w,this.center))>.9999*d.vec3.length(w)*a||(d.vec3.cross(this.up,w,this.center),d.vec3.cross(this.up,this.up,w),d.vec3.normalize(this.up,this.up),this.markViewDirty())};c.prototype.computeUpLocal=function(){a.directionFromTo(w,
this.eye,this.center);.9999>=Math.abs(w[2])&&(d.vec3.scale(w,w,w[2]),d.vec3.set(this.up,-w[0],-w[1],1-w[2]),d.vec3.normalize(this.up,this.up),this.markViewDirty())};c.prototype._compareAndSetView=function(a,b){u(a,b)||(d.vec3.copy(b,a),this._viewProjectionDirty=this._frustumDirty=this._viewDirty=!0)};c.prototype._recomputeFrustum=function(){this._frustumDirty&&(b.frustum.fromMatrix(this.viewMatrix,this.projectionMatrix,this._frustum),this._frustumDirty=!1)};c.prototype._ensureViewClean=function(){this._viewDirty&&
(l.mat4.lookAt(this._viewMatrix,this._eye,this._center,this._up),d.vec3.set(this._viewForward,-this._viewMatrix[2],-this._viewMatrix[6],-this._viewMatrix[10]),d.vec3.set(this._viewUp,this._viewMatrix[1],this._viewMatrix[5],this._viewMatrix[9]),d.vec3.set(this._viewRight,this._viewMatrix[0],this._viewMatrix[4],this._viewMatrix[8]),this._viewDirty=!1,this._viewInverseTransposeMatrixDirty=!0)};return c}();var r=f.vec4f64.create(),x=k.mat4f64.create(),w=h.vec3f64.create(),v=h.vec3f64.create();return p})},
"esri/views/animation/pointToPoint/Animation":function(){define("require exports ../easing ./Definition ./Settings ./apex/Path".split(" "),function(p,c,n,l,k,d){Object.defineProperty(c,"__esModule",{value:!0});var h={zoom:0,pan:0,rotate:0};p=function(){function c(c){this.createCamera=c;this.time=0;this.definition=new l.Definition(c);this.path=new d.Path}c.prototype.update=function(d,b,a){this.definition.update(d,b,a);this.path.update(this.definition,a);this.time=this._applyTimeSettings(this.path.time,
a);this.settings=a};c.prototype.cameraAt=function(d,b){b=b||this.createCamera();d=Math.min(Math.max(0,d),1);d=this.settings.easing?this.normalizedEasing(this.settings.easing,d,1E3*this.time):1<=this.time?this.normalizedEasing(n.inOutCoastQuad,d):this.normalizedEasing(n.outExpo,d);d=this.path.interpolateComponentsAt(d,h);b.interpolate(this.definition.source,this.definition.target,d);return b};c.prototype.normalizedEasing=function(d,b,a){a=d(0);var c=d(1);return(d(b)-a)/(c-a)};c.prototype._applyTimeSettings=
function(d,b){var a=null!=b.speedFactor?b.speedFactor:1;null!=b.duration?d=b.duration:null!=b.speedFactor&&(d/=a);return d=Math.min(Math.max(null!=b.minDuration?b.minDuration:k.defaultSettings.minDuration/a,d),null!=b.maxDuration?b.maxDuration:k.defaultSettings.maxDuration/a)};return c}();c.Animation=p;c.default=p})},"esri/views/animation/pointToPoint/Definition":function(){define(["require","exports","./Settings"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(c){this.createCamera=
c;this.compared={sourceZoom:0,targetZoom:0,pan:0,rotate:0};this.settings={desiredScreenFlow:n.defaultSettings.desiredScreenFlow};this.source=c();this.target=c()}c.prototype.clone=function(){var k=new c(this.createCamera);k.copyFrom(this);return k};c.prototype.copyFrom=function(c){this.update(c.source,c.target,c.settings)};c.prototype.update=function(c,d,h){this.source!==c&&this.source.copyFrom(c);this.target!==d&&this.target.copyFrom(d);this.compared=this.source.compareTo(this.target,this.compared);
this.settings.desiredScreenFlow=null!=h.desiredScreenFlow?h.desiredScreenFlow:n.defaultSettings.desiredScreenFlow;this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size;this.halfWindowSize=this.target.size/2};c.prototype.halfWindowPanAtZoom=function(c){c=this.target.pixelsPerPanAtZoom(c);return this.halfWindowSize/c};Object.defineProperty(c.prototype,"hasZoom",{get:function(){return 1E-5<Math.abs(this.compared.sourceZoom-this.compared.targetZoom)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"hasPan",{get:function(){return 1E-9<this.compared.pan},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"hasRotate",{get:function(){return 1E-9<this.compared.rotate},enumerable:!0,configurable:!0});return c}();c.Definition=p;c.default=p})},"esri/views/animation/pointToPoint/Settings":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});c.defaultSettings={desiredScreenFlow:2,minDuration:.5,maxDuration:8}})},"esri/views/animation/pointToPoint/apex/Path":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../easing ../Path ../Segment ./planning".split(" "),
function(p,c,n,l,k,d,h){Object.defineProperty(c,"__esModule",{value:!0});p=function(c){function f(b,a){var e=c.call(this)||this;e._preallocSegments=[new d.default,new d.default,new d.default];e.update(b,a);return e}n(f,c);f.prototype.update=function(b,a){if(b){this.definition?this.definition.copyFrom(b):this.definition=b.clone();var d=null;a&&a.apex&&(d=h.optimalDistance(b,a.apex));this.segments.length=0;this._descensionSegment=this._ascensionSegment=null;null==d?this._updateWithoutApex():this._updateWithApex(d,
a.apex)}};f.prototype.segmentInterpolateComponentsAt=function(b,a,d){d=b.interpolateComponentsAt(a,d);b===this._ascensionSegment?d.zoom=l.outQuad(d.zoom):b===this._descensionSegment&&(d.zoom=l.inQuad(d.zoom));return d};f.prototype._updateWithApex=function(b,a){var d=this._preallocSegments,c=d[0],f=d[1],d=d[2],g=null!=a.ascensionFactor?a.ascensionFactor:.5;a=Math.min(1-g,null!=a.ascensionFactor?a.descensionFactor:.5);var h=1-g-a;c.definition?c.definition.copyFrom(this.definition):c.definition=this.definition.clone();
c.definition.compared.targetZoom=b;c.definition.compared.pan=this.definition.compared.pan*g;c.definition.compared.rotate=this.definition.compared.rotate*g;c.update();this._ascensionSegment=c;this.segments.push(c);0<h&&(f.definition?f.definition.copyFrom(this.definition):f.definition=this.definition.clone(),f.definition.copyFrom(this.definition),f.definition.compared.sourceZoom=b,f.definition.compared.targetZoom=b,f.definition.compared.pan=this.definition.compared.pan*h,f.definition.compared.rotate=
this.definition.compared.rotate*h,f.update(),this.segments.push(f));d.definition?d.definition.copyFrom(this.definition):d.definition=this.definition.clone();d.definition.compared.sourceZoom=b;d.definition.compared.pan=this.definition.compared.pan*a;d.definition.compared.rotate=this.definition.compared.rotate*a;d.update();this._descensionSegment=d;this.segments.push(d)};f.prototype._updateWithoutApex=function(){var b=this._preallocSegments[0];b.update(this.definition);this.segments.push(b)};return f}(k.default);
c.Path=p;c.default=p})},"esri/views/animation/pointToPoint/Path":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(){this.segments=[]}Object.defineProperty(c.prototype,"time",{get:function(){return this.segments.reduce(function(c,k){return c+k.time},0)},enumerable:!0,configurable:!0});c.prototype.interpolateComponentsAt=function(c,k){c=Math.min(Math.max(c,0),1);c*=this.time;for(var d=0,h=0,g=this.definition,f=0;f<this.segments.length;f++){var b=
this.segments[f],a=b.definition;if(c<=b.time||f===this.segments.length-1)return k=this.segmentInterpolateComponentsAt(b,c/b.time,k),k.pan=g.hasPan?(d+a.compared.pan*k.pan)/g.compared.pan:1,k.rotate=g.hasRotate?(h+a.compared.rotate*k.rotate)/g.compared.rotate:1,c=k.zoom*(a.compared.targetZoom-a.compared.sourceZoom)+a.compared.sourceZoom,d=this.segments[0].definition.compared.sourceZoom,h=this.segments[this.segments.length-1].definition.compared.targetZoom,k.zoom=g.hasZoom?(c-d)/(h-d):1,k;c-=b.time;
d+=a.compared.pan;h+=a.compared.rotate}};c.prototype.segmentInterpolateComponentsAt=function(c,k,d){return c.interpolateComponentsAt(k,d)};return c}();c.Path=p;c.default=p})},"esri/views/animation/pointToPoint/Segment":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(c){c&&this.update(c)}c.prototype.update=function(c){c&&(this.definition?this.definition.copyFrom(c):this.definition=c.clone());this._updatePrecomputedVariables();
this._updatePixelFlow()};c.prototype._updatePrecomputedVariables=function(){var c=this.definition,k=c.compared,d=k.sourceZoom,h=k.targetZoom;this._zoomSign=d>h?1:-1;this._panPixelsAtSource=k.pan*c.source.pixelsPerPanAtZoom(d);c=(c.source.pixelsPerRotateAtZoom(d)+c.target.pixelsPerRotateAtZoom(h))/2;this._rotatePixels=k.rotate*c};c.prototype._updatePixelFlow=function(){var c=this.definition.compared.sourceZoom,k=this.definition.compared.targetZoom,d=this.definition,h=d.hasZoom,g=d.hasPan,d=d.hasRotate,
f=0,b=0;h&&(g&&(f=(k/c-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),d&&(b=Math.log(c/k)/Math.LN2*this._zoomSign*this.definition.halfWindowSize/this._rotatePixels));this._rotatePixelFlow=this._panPixelFlow=this._zoomPixelFlow=0;c=this.definition.desiredPixelFlow;h&&g&&d?(k=f+b+f*b,this._zoomPixelFlow=f*b/k*c,this._panPixelFlow=b/k*c,this._rotatePixelFlow=f/k*c):h&&g?(k=1+f,this._zoomPixelFlow=f/k*c,this._panPixelFlow=1/k*c):h&&d?(k=1+b,this._zoomPixelFlow=
b/k*c,this._rotatePixelFlow=1/k*c):g&&d?(f=this._panPixelsAtSource/this._rotatePixels,k=1+f,this._panPixelFlow=f/k*c,this._rotatePixelFlow=1/k*c):g?this._panPixelFlow=c:h?this._zoomPixelFlow=c:d&&(this._rotatePixelFlow=c);this.time=d?this.rotateTime:h?this.zoomTime:g?this.panTime:0};Object.defineProperty(c.prototype,"zoomTime",{get:function(){return this.definition.hasZoom?Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2*this._zoomSign*this.definition.halfWindowSize/
this._zoomPixelFlow:0},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"panTime",{get:function(){if(this.definition.hasPan){if(this.definition.hasZoom){var c=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2;return Math.log(this._zoomPixelFlow/this._panPixelFlow*this._panPixelsAtSource*c+1)/(c*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}return 0},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"rotateTime",{get:function(){return this.definition.hasRotate?
this._rotatePixels/this._rotatePixelFlow:0},enumerable:!0,configurable:!0});c.prototype._interpolateComponentsZoom=function(c){if(0===c||1===c)return c;if(this.definition.hasZoom){var k=this.definition.compared.sourceZoom,d=this.definition.compared.targetZoom;return(k*Math.pow(k/d,-c)-k)/(d-k)}return c};c.prototype._interpolateComponentsPan=function(c){if(0===c||1===c)return c;if(this.definition.hasPan&&this.definition.hasZoom){var k=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;
return 1/this._panPixelsAtSource*this._panPixelFlow*(Math.pow(2,k*c*this.time)-1)/(k*Math.LN2)}return c};c.prototype._interpolateComponentsRotate=function(c){return c};c.prototype.interpolateComponentsAt=function(c,k){c=Math.min(Math.max(c,0),1);var d=this._interpolateComponentsZoom(c),h=this._interpolateComponentsPan(c);c=this._interpolateComponentsRotate(c);k?(k.zoom=d,k.pan=h,k.rotate=c):k={zoom:d,pan:h,rotate:c};return k};return c}();c.Segment=p;c.default=p})},"esri/views/animation/pointToPoint/apex/planning":function(){define(["require",
"exports","./functions"],function(p,c,n){function l(c,d){var h=Math.max(c.compared.sourceZoom,c.compared.targetZoom);c=c.source.zoomAtPixelsPerPan(c.desiredPixelFlow/c.compared.pan)/2;return c<h?null!=d.maximumDistance?h+(d.maximumDistance-h)/2:1.5*h:d.maximumDistance?Math.min(d.maximumDistance,c):c}Object.defineProperty(c,"__esModule",{value:!0});c.optimalDistance=function(c,d){var h=l(c,d),g={ascensionFactor:null!=d.ascensionFactor?d.ascensionFactor:.5,descensionFactor:null!=d.descensionFactor?
d.descensionFactor:.5},f=0===g.ascensionFactor,b=0===g.descensionFactor,a=f?n.tAscensionZoomOnly:n.tAscensionZoomPan,e=f?n.dtAscensionZoomOnly:n.dtAscensionZoomPan,m=f?n.ddtAscensionZoomOnly:n.ddtAscensionZoomPan,k=b?n.tDescensionZoomOnly:n.tDescensionZoomPan,u=b?n.dtDescensionZoomOnly:n.dtDescensionZoomPan,t=b?n.ddtDescensionZoomOnly:n.ddtDescensionZoomPan,f=function(b){return a(c,g,b)+n.tPanion(c,g,b)+k(c,g,b)},b=function(a){return e(c,g,a)+n.dtPanion(c,g,a)+u(c,g,a)},r=function(a){return m(c,g,
a)+n.ddtPanion(c,g,a)+t(c,g,a)},x=f(h),w=n.tBaseLine(c),v=d.maximumIterations||20,y=null!=d.maximumDistance?d.maximumDistance:Infinity;for(d=0;d<v;d++){var z=(b(h)+1E-6)/r(h);if(isNaN(z)||h>=y&&0>z){if(!isFinite(y))return null;h=y;x=f(h);break}h-=z;if(h<c.compared.sourceZoom||h<c.compared.targetZoom)return null;z=f(h);if(.005>=Math.abs(z-x)/x)break;x=z}return x>.7*w||h<c.compared.sourceZoom||h<c.compared.targetZoom?null:h}})},"esri/views/animation/pointToPoint/apex/functions":function(){define(["require",
"exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});c.tAscensionZoomPan=function(c,l,k){var d=c.halfWindowPanAtZoom(k-c.compared.sourceZoom);return-c.halfWindowSize*(l.ascensionFactor*Math.LN2*c.compared.pan+d)*Math.log(c.compared.sourceZoom/k)/(c.desiredPixelFlow*Math.LN2*d)};c.dtAscensionZoomPan=function(c,l,k){var d=1/k,h=Math.log(c.compared.sourceZoom*d),g=1/c.desiredPixelFlow,f=1/Math.LN2;k-=c.compared.sourceZoom;var b=1/k;l=(l.ascensionFactor*Math.LN2*c.compared.pan+c.halfWindowPanAtZoom(k))/
c.halfWindowPanAtZoom(1);return c.halfWindowSize*d*g*f*b*l-c.halfWindowSize*h*g*f*b+c.halfWindowSize*h*g*f*l/(k*k)};c.ddtAscensionZoomPan=function(c,l,k){var d=k-c.compared.sourceZoom,h=1/d,g=1/k,f=Math.log(c.compared.sourceZoom*g);l=(l.ascensionFactor*Math.LN2*c.compared.pan+c.halfWindowPanAtZoom(d))/c.halfWindowPanAtZoom(1);return c.halfWindowSize*h*(-2*h*g*l+2*h*f+2*g-2*f*l/(d*d)-l/(k*k))/(c.desiredPixelFlow*Math.LN2)};c.tAscensionZoomOnly=function(c,l,k){return-c.halfWindowSize*Math.log(c.compared.sourceZoom/
k)/(c.desiredPixelFlow*Math.LN2)};c.dtAscensionZoomOnly=function(c,l,k){return c.halfWindowSize/(k*c.desiredPixelFlow*Math.LN2)};c.ddtAscensionZoomOnly=function(c,l,k){return-c.halfWindowSize/(k*k*c.desiredPixelFlow*Math.LN2)};c.tPanion=function(c,l,k){return-c.compared.pan*c.halfWindowSize*(l.ascensionFactor+l.descensionFactor-1)/(c.desiredPixelFlow*c.halfWindowPanAtZoom(k))};c.dtPanion=function(c,l,k){return c.compared.pan*c.halfWindowSize*(l.ascensionFactor+l.descensionFactor-1)/(c.desiredPixelFlow*
c.halfWindowPanAtZoom(k*k))};c.ddtPanion=function(c,l,k){return-2*c.compared.pan*c.halfWindowSize*(l.ascensionFactor+l.descensionFactor-1)/(c.desiredPixelFlow*c.halfWindowPanAtZoom(k*k*k))};c.tDescensionZoomPan=function(c,l,k){return c.halfWindowSize*(-c.halfWindowPanAtZoom(k)-l.descensionFactor*Math.LN2*c.compared.pan+c.halfWindowPanAtZoom(c.compared.targetZoom))*Math.log(k/c.compared.targetZoom)/(c.desiredPixelFlow*Math.LN2*c.halfWindowPanAtZoom(-k+c.compared.targetZoom))};c.dtDescensionZoomPan=
function(c,l,k){var d=Math.log(k/c.compared.targetZoom),h=1/c.desiredPixelFlow,g=1/Math.LN2,f=-k+c.compared.targetZoom,b=1/f;l=(-c.halfWindowPanAtZoom(k)-l.descensionFactor*Math.LN2*c.compared.pan+c.halfWindowPanAtZoom(c.compared.targetZoom))/c.halfWindowPanAtZoom(1);return-c.halfWindowSize*d*h*g*b+c.halfWindowSize*d*h*g*l/(f*f)+c.halfWindowSize*h*g*b*l/k};c.ddtDescensionZoomPan=function(c,l,k){var d=k-c.compared.targetZoom,h=1/d,g=1/k,f=Math.log(k/c.compared.targetZoom);l=(c.halfWindowPanAtZoom(k)+
l.descensionFactor*Math.LN2*c.compared.pan-c.halfWindowPanAtZoom(c.compared.targetZoom))/c.halfWindowPanAtZoom(1);return c.halfWindowSize*h*(-2*h*g*l-2*h*f+2*g+2*f*l/(d*d)-l/(k*k))/(c.desiredPixelFlow*Math.LN2)};c.tDescensionZoomOnly=function(c,l,k){return c.halfWindowSize*Math.log(k/c.compared.targetZoom)/(c.desiredPixelFlow*Math.LN2)};c.dtDescensionZoomOnly=function(c,l,k){return c.halfWindowSize/(k*c.desiredPixelFlow*Math.LN2)};c.ddtDescensionZoomOnly=function(c,l,k){return-c.halfWindowSize/(k*
k*c.desiredPixelFlow*Math.LN2)};c.tBaseLine=function(c){var l=Math.LN2*c.compared.pan,k=c.halfWindowPanAtZoom(c.compared.sourceZoom-c.compared.targetZoom),d=c.halfWindowSize*Math.log(c.compared.sourceZoom/c.compared.targetZoom)/(c.desiredPixelFlow*Math.LN2*k);return c.compared.sourceZoom<=c.compared.targetZoom?d*(l-k):d*(l+k)}})},"esri/views/3d/state/controllers/AnimationController":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/promiseUtils ../../../ViewAnimation ./CameraController".split(" "),
function(p,c,n,l,k,d){Object.defineProperty(c,"__esModule",{value:!0});p=function(c){function g(d){void 0===d&&(d=new k);var b=c.call(this)||this;b.viewAnimation=d;return b}n(g,c);Object.defineProperty(g.prototype,"canStop",{get:function(){return!0},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"asyncResult",{get:function(){return this._asyncResult},set:function(c){this._asyncResult&&this._asyncResult.reject(l.createAbortError());this._asyncResult=c;if(this.state===d.State.Finished||
this.state===d.State.Stopped)this._asyncResult=null,this.state===d.State.Finished?c.resolve():c.reject(l.createAbortError())},enumerable:!0,configurable:!0});g.prototype.onControllerStart=function(d){var b=this;c.prototype.onControllerStart.call(this,d);this.viewAnimation&&this.viewAnimation.when().catch(function(){}).then(function(){b.updateStateFromViewAnimation()})};g.prototype.updateStateFromViewAnimation=function(){!this.viewAnimation||this.state!==d.State.Ready&&this.state!==d.State.Running||
(this.viewAnimation.state===k.State.FINISHED?this.finish():this.viewAnimation.state===k.State.STOPPED&&(this.state=d.State.Stopped))};g.prototype.onControllerEnd=function(f){this.viewAnimation&&(this.viewAnimation.done||(this.state===d.State.Finished?this.viewAnimation.finish():this.state===d.State.Stopped&&this.viewAnimation.stop()));this._asyncResult&&(this.state===d.State.Finished?this._asyncResult.resolve():this._asyncResult.reject(l.createAbortError()));c.prototype.onControllerEnd.call(this,
f)};g.prototype.finish=function(){this.finishController()};return g}(d.CameraController);c.AnimationController=p})},"esri/views/3d/state/controllers/CameraController":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/Accessor ../../../../core/accessorSupport/decorators".split(" "),function(p,c,n,l,k,d){Object.defineProperty(c,"__esModule",{value:!0});var h;(function(d){d.Ready="ready";d.Rejected="rejected";
d.Running="running";d.Stopped="stopped";d.Finished="finished"})(h=c.State||(c.State={}));p=function(c){function f(){var b=null!==c&&c.apply(this,arguments)||this;b.state=h.Ready;return b}n(f,c);Object.defineProperty(f.prototype,"active",{get:function(){return this.state===h.Running},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"isInteractive",{get:function(){return!1},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"canStop",{get:function(){return!1},enumerable:!0,
configurable:!0});f.prototype.stopController=function(){return this.canStop?(this.state=h.Stopped,!0):!1};f.prototype.finishController=function(){this.state=h.Finished};f.prototype.onControllerStart=function(b){this.state=h.Running};f.prototype.onControllerEnd=function(b){};f.prototype.stepController=function(b,a){};Object.defineProperty(f.prototype,"steppingFinished",{get:function(){return!1},enumerable:!0,configurable:!0});l([d.property({readOnly:!0,dependsOn:["state"]})],f.prototype,"active",null);
l([d.property()],f.prototype,"state",void 0);return f=l([d.subclass("esri.views.3d.state.controllers.CameraController")],f)}(d.declared(k));c.CameraController=p})},"esri/views/3d/state/utils/navigationUtils":function(){define("require exports ../../../../core/mathUtils ../../../../core/screenUtils ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec2f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../support/earthUtils ../../support/geometryUtils ../../support/mathUtils ../../support/stack ../../support/geometryUtils/coordinateSystem ../../webgl-engine/lib/Camera".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t){function r(a,b,d){var c=q.sm4d.get();k.mat4.identity(c);k.mat4.rotate(c,c,d[3],d);f.vec3.subtract(a.eye,a.eye,b);f.vec3.transformMat4(a.eye,a.eye,c);f.vec3.add(a.eye,a.eye,b);f.vec3.subtract(a.center,a.center,b);f.vec3.transformMat4(a.center,a.center,c);f.vec3.add(a.center,a.center,b);f.vec3.transformMat4(a.up,a.up,c);a.markViewDirty()}function x(a,b){f.vec3.set(b,0,0,0);for(var d=0;d<a.length;d++)f.vec3.add(b,b,a[d]);f.vec3.scale(b,b,1/a.length)}function w(b,
d,c){return Math.sin(b/f.vec3.length(d))*(c+a.earthRadius)}function v(a,b,d,c){d=e.ray.fromScreenAtEye(b,d,pa);e.sphere.closestPointOnSilhouette(a,d,N);return e.sphere.intersectRay(a,d,c)?f.vec3.squaredDistance(N,d.origin)<f.vec3.squaredDistance(c,d.origin)?(f.vec3.copy(c,N),!1):!0:(f.vec3.subtract(S,b.eye,b.center),f.vec3.normalize(S,S),e.plane.fromNormalAndOffset(S,-f.vec3.dot(f.vec3.normalize(S,S),N),O),e.plane.intersectRay(O,d,c),!1)}function y(a,b,d,e,g,h){f.vec3.cross(qa,a,b);f.vec3.subtract(ga,
a,b);f.vec3.length(a)<=g||!e.aboveGround?(f.vec3.cross(d,ga,e.eye),a=f.vec3.dot(a,b)/(f.vec3.length(a)*f.vec3.length(b)),h=Math.cos(n.clamp(m.cyclicalPI.normalize(m.deg2rad(h)),0,c.TiltThresholdPanningSpeed)),b=-m.acos(a)-Math.max(0,f.vec3.length(b)-g)/(h*g)):(f.vec3.subtract(V,e.eye,e.center),f.vec3.cross(d,ga,V),b=-f.vec3.length(ga)/g);f.vec3.normalize(d,d);f.vec3.scale(d,d,f.vec3.length(qa));return b}function z(a,b,d,e){e=Math.cos(n.clamp(m.cyclicalPI.normalize(m.deg2rad(e)),0,c.TiltThresholdPanningSpeed));
b=b>d?-(b-d)/(e*d):b<-d?Math.PI-(b+d)/(e*d):m.acos(b/d);return((a>d?-(a-d)/(e*d):a<-d?Math.PI-(a+d)/(e*d):m.acos(a/d))-b)*d}function A(a,b,d,c,e,m,g,k,l,q){l=z(a[2],b[2],g.radius,l);b=q?z(a[0],b[0],g.radius,180):b[0]-a[0];a=Math.sin(k)*b-Math.cos(k)*l;k=Math.cos(k)*b+Math.sin(k)*l;f.vec3.normalize(ea,e);e=q?a/Math.sqrt(Math.abs(Math.pow(g.radius,2)-Math.pow(f.vec3.dot(d,ea),2))):a/g.radius;d=k/Math.sqrt(Math.abs(Math.pow(g.radius,2)-Math.pow(f.vec3.dot(d,c),2)));h.vec2.set(m,e,d)}function B(a,b,d,
c,e,m,g,h,k,l){f.vec3.cross(qa,a,b);u.coordinateSystemFromOneAxisAndNormalVector(m.up,m.eye,L,F,Y);u.coordinateSystemFromOneAxisAndNormalVector([0,0,1],m.eye,Q,J,P);f.vec3.copy(d,J);f.vec3.copy(c,Q);f.vec3.normalize(d,d);f.vec3.scale(d,d,f.vec3.length(qa));u.vectorCoordinates(a,f.vec3.normalize(F,F),f.vec3.normalize(Y,Y),f.vec3.normalize(L,L),X);u.vectorCoordinates(b,F,Y,L,R);A(X,R,a,Q,J,e,g,h,k,l)}function D(a,b,d,c,e,m,g){k.mat4.identity(ja);k.mat4.identity(ba);k.mat4.identity(ha);k.mat4.rotate(ja,
ja,e,c);k.mat4.rotate(ba,ba,g,m);k.mat4.multiply(ha,ja,ba);f.vec3.subtract(b,a,d);f.vec3.transformMat4(b,b,ha);f.vec3.add(b,b,d)}function C(a,b,d,c,e,m){k.mat4.identity(ja);k.mat4.identity(ba);k.mat4.identity(ha);k.mat4.rotate(ja,ja,c,d);k.mat4.rotate(ba,ba,m,e);k.mat4.multiply(ha,ja,ba);f.vec3.subtract(a.eye,a.eye,b);f.vec3.transformMat4(a.eye,a.eye,ha);f.vec3.add(a.eye,a.eye,b);f.vec3.subtract(a.center,a.center,b);f.vec3.transformMat4(a.center,a.center,ha);f.vec3.add(a.center,a.center,b);f.vec3.subtract(a.up,
a.up,b);f.vec3.transformMat4(a.up,a.up,ha);f.vec3.add(a.up,a.up,b);a.markViewDirty()}function E(a,b,d,e,f,m,g,h){void 0===g&&(g=c.PreservingHeadingThreshold.Pole);void 0===h&&(h=c.PreservingHeadingThreshold.Angle);a=Math.abs(a[2])<d*g||Math.abs(b)>d;return(Math.abs(e)>Math.PI-h||Math.abs(e)<h)&&a&&m.aboveGround&&f<c.PreservingHeadingThreshold.Tilt?!0:!1}function H(a,b,d,c,f,m){m?(e.axisAngle.fromPoints(d,c,da),r(b,a.center,da)):(d=y(d,c,na,b,a.radius,f),r(b,a.center,e.axisAngle.wrapAxisAngle(na,d)))}
function G(a,b,d,c,e,m,g){var h=g?20:1;f.vec3.copy(W,c);ma.copyFrom(b);for(var k,l=0;l<h&&1E-12<f.vec3.squaredDistance(d,W);l++)if(c=f.vec3.squaredDistance(d,W),B(d,W,J,Q,Z,ma,a,e,m,g),C(ma,a.center,Q,Z[1],J,Z[0]),D(W,W,a.center,Q,Z[1],J,Z[0]),k=f.vec3.squaredDistance(d,W),k<c||0===l)b.copyFrom(ma);else break}Object.defineProperty(c,"__esModule",{value:!0});c.Earth=e.sphere.fromValues(a.earthRadius,b.vec3f64.create());c.normalizeCoordinate=function(a,b,d){d[0]=b[0]/(a.fullWidth/a.pixelRatio);d[1]=
b[1]/(a.fullHeight/a.pixelRatio);return d};c.rotationFromPointsAroundAxis=function(a,b,d){var c=q.sv3d.get(),e=q.sv3d.get(),m=q.sv3d.get();f.vec3.copy(e,a);f.vec3.copy(m,b);a=f.vec3.dot(e,d);b=f.vec3.dot(m,d);f.vec3.scale(c,d,a);f.vec3.subtract(e,e,c);f.vec3.normalize(e,e);f.vec3.scale(c,d,b);f.vec3.subtract(m,m,c);f.vec3.normalize(m,m);a=f.vec3.dot(e,m);f.vec3.cross(c,d,e);d=f.vec3.dot(m,c);return Math.atan2(d,a)};c.normalizeRotationDelta=function(a){for(;a>Math.PI;)a-=2*Math.PI;for(;a<-Math.PI;)a+=
2*Math.PI;return a};c.applyRotation=r;c.intersectPlaneFromScreenPoint=function(a,b,d,c){return e.plane.intersectRay(a,e.ray.fromScreen(b,d,pa),c)};c.applyZoomToPoint=function(a,b,d,c){var e=q.sv3d.get();d=1-d;f.vec3.subtract(e,b,a.eye);var m=f.vec3.length(e),g=m*(1-d);0<=d&&g<c&&(g=c,d=-(g-m)/m);1E-6>Math.abs(m-g)||(f.vec3.scale(e,e,d),f.vec3.add(a.eye,a.eye,e),f.vec3.lerp(a.center,a.center,b,d))};c.applyZoomOnSphere=function(a,b,d){b.getScreenCenter(I);e.sphere.intersectScreen(a,b,I,b.center);b.markViewDirty();
a=b.distance;d*=a;1E-6>Math.abs(a-d)||(d=f.vec3.scale(q.sv3d.get(),b.viewForward,d),f.vec3.subtract(b.eye,b.center,d),b.markViewDirty())};var I=l.createScreenPointArray();c.centroidOnSphere=function(a,b,d){x(b,d);f.vec3.normalize(d,d);f.vec3.scale(d,d,a)};c.centroid=x;c.onSurfaceTiltToEyeTiltGlobal=w;c.offSurfaceTiltToEyeTiltGlobal=function(a,b,d){return w(Math.PI/2,b,d)+(a-Math.PI/2)};var K;(function(a){a[a.Vertical=0]="Vertical";a[a.Horizontal=1]="Horizontal"})(K=c.PanMode||(c.PanMode={}));c.VerticalPanTresholds=
{Elevation:3E4,Angle:m.deg2rad(8)};c.PreservingHeadingThreshold={Pole:.95,Angle:m.deg2rad(18),Tilt:45};c.TiltThresholdPanningSpeed=m.deg2rad(80);c.pickPointAndInitSphere=function(a,d,m,g){var h=b.vec3f64.create(),k=e.sphere.create(),l=!0;a.intersectScreen(m,h)?k.radius=f.vec3.length(h):(k.radius=d.aboveGround?Math.max(f.vec3.length(d.center),.9*c.Earth.radius):f.vec3.length(d.eye)-d.relativeElevation,g?v(k,d,m,h):l=e.sphere.intersectScreen(k,d,m,h));return{sphere:k,scenePickPoint:l?h:null}};c.decidePanMode=
function(a,b,d){var e=f.vec3.length(a.eye);if(Math.abs(e-c.Earth.radius)>c.VerticalPanTresholds.Elevation)return K.Horizontal;if(a.aboveGround===b.radius>e)return K.Vertical;f.vec3.subtract(M,a.eye,d);f.vec3.normalize(M,M);return Math.abs(.5*Math.PI-m.acos(f.vec3.dot(d,M)/f.vec3.length(d)))<c.VerticalPanTresholds.Angle?K.Vertical:K.Horizontal};var M=b.vec3f64.create();c.applyPanPlanar=function(a,b,d){f.vec3.subtract(T,d,b);f.vec3.subtract(a.eye,a.eye,T);f.vec3.subtract(a.center,a.center,T);a.markViewDirty()};
var T=b.vec3f64.create();c.sphereOrPlanePointFromScreenPoint=v;var N=b.vec3f64.create(),S=b.vec3f64.create(),O=e.plane.create();c.rotationAngleAndAxisDirectRotation=y;var V=b.vec3f64.create();c.lengthFromPoints=z;c.rotationAnglesHeadingPreserving=A;c.rotationAnglesAndAxesHeadingPreserving=B;c.rotatePointAroundTwoAxes=D;c.applyRotationWithTwoAxes=C;c.preserveHeadingThreshold=E;c.applyPanSphericalDirectRotation=H;c.applyPanSphericalPreserveHeading=G;c.panToPosition=function(a,b,d,e,g,h,k){E(d,f.vec3.dot(b.up,
d),a.radius,-m.cyclicalPI.normalize(m.deg2rad(g)),h,b,c.PreservingHeadingThreshold.Pole,c.PreservingHeadingThreshold.Angle)?G(a,b,d,e,-m.cyclicalPI.normalize(m.deg2rad(g)),h,k):H(a,b,d,e,h,k)};c.panMotionToRotationMatrix=function(a,b,d,c,e,g,h,l,r){if(E(a.center,f.vec3.dot(a.up,a.center),f.vec3.length(a.center),-m.cyclicalPI.normalize(m.deg2rad(g)),h,b))switch(a=-m.cyclicalPI.normalize(m.deg2rad(e)),u.coordinateSystemFromOneAxisAndNormalVector([0,0,1],b.eye,Q,J,P),e=d.translation[0]*c.pan,g=d.translation[1]*
c.pan,b=Math.max(Math.sqrt(Math.abs(1-Math.pow(f.vec3.dot(b.center,Q),2)/Math.pow(f.vec3.length(b.center),2))),.5),h=-Math.cos(a)*g+Math.sin(a)*e,k.mat4.rotate(l.pan.matrix,l.pan.matrix,(Math.sin(a)*g+Math.cos(a)*e)/b,Q),l.pan.enabled=!0,r.mode){case "pan":k.mat4.rotate(l.pan.matrix,l.pan.matrix,h,J);l.pan.enabled=!0;break;case "zoom":l.zoom=-d.translation[1]*c.zoom}else switch(a=b.eye,b=b.viewRight,a=f.vec3.cross(q.sv3d.get(),b,a),e=d.translation[0]*c.pan,0!==e&&(k.mat4.rotate(l.pan.matrix,l.pan.matrix,
-e,a),l.pan.enabled=!0),r.mode){case "pan":d=d.translation[1]*c.pan;0!==d&&(k.mat4.rotate(l.pan.matrix,l.pan.matrix,d,b),l.pan.enabled=!0);break;case "zoom":l.zoom=-d.translation[1]*c.zoom}};var Q=b.vec3f64.create(),J=b.vec3f64.create(),P=b.vec3f64.create(),L=b.vec3f64.create(),F=b.vec3f64.create(),Y=b.vec3f64.create(),X=b.vec3f64.create(),R=b.vec3f64.create(),Z=g.vec2f64.create(),da=e.axisAngle.create(),ja=d.mat4f64.create(),ba=d.mat4f64.create(),ha=d.mat4f64.create(),W=b.vec3f64.create(),ea=b.vec3f64.create(),
ga=b.vec3f64.create(),ma=new t,qa=b.vec3f64.create(),na=b.vec3f64.create(),pa={origin:b.vec3f64.create(),direction:b.vec3f64.create()}})},"esri/views/3d/support/geometryUtils/coordinateSystem":function(){define(["require","exports","../../../../core/libs/gl-matrix-2/mat4","../../../../core/libs/gl-matrix-2/vec3","../../../../core/libs/gl-matrix-2/vec3f64"],function(p,c,n,l,k){function d(a){return{operations:a,value:a.create()}}function h(a,b,d,c){return a.operations.setAltitudeAt(a.value,b,d,c)}Object.defineProperty(c,
"__esModule",{value:!0});c.create=function(a){var b=a.operations;return{operations:b,value:b.create(a.value)}};c.setExtent=function(a,b,d){a.operations.setExtent(a.value,b,d.value);return d};c.createFromOperations=d;c.fromValues=function(a,b,c){void 0===c&&(c=d(a));c.operations=a;a.copy(b,c.value);return c};c.wrap=function(a,b){f.operations=a;f.value=b;return f};c.normalAt=function(a,b,d){return a.operations.axisAt(a.value,b,2,d)};c.axisAt=function(a,b,d,c){return a.operations.axisAt(a.value,b,d,
c)};c.intersectRay=function(a,b,d){return a.operations.intersectRay(a.value,b,d)};c.intersectsRay=function(a,b){return a.operations.intersectRay(a.value,b,null)};c.closestPoint=function(a,b,d){return a.operations.closestPoint(a.value,b,d)};c.intersectRayClosestSilhouette=function(a,b,d){return a.operations.intersectRayClosestSilhouette(a.value,b,d)};c.closestPointOnSilhouette=function(a,b,d){return a.operations.closestPointOnSilhouette(a.value,b,d)};c.distanceToSilhouette=function(a,b){return a.operations.distanceToSilhouette(a.value,
b)};c.altitudeAt=function(a,b){return a.operations.altitudeAt(a.value,b)};c.setAltitudeAt=h;c.setAltitudeOfTransformation=function(a,b,d,c){b!==c&&n.mat4.copy(c,b);l.vec3.set(g,c[12],c[13],c[14]);h(a,g,d,g);c[12]=g[0];c[13]=g[1];c[14]=g[2];return c};c.elevate=function(a,b,d){return a.operations.elevate(a.value,b,d.value)};var g=k.vec3f64.create(),f={operations:null,value:null};c.vectorCoordinates=function(a,b,d,c,f){f[0]=l.vec3.dot(a,b);f[1]=l.vec3.dot(a,d);f[2]=l.vec3.dot(a,c);return f};c.coordinateSystemFromOneAxisAndNormalVector=
function(a,d,c,f,g){l.vec3.copy(c,a);l.vec3.copy(b,d);l.vec3.normalize(b,b);l.vec3.cross(f,b,c);l.vec3.cross(g,f,c)};var b=k.vec3f64.create()})},"esri/views/3d/state/controllers/local/ZoomStepController":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../camera/constraintUtils ../PointToPointAnimationController ../../../webgl-engine/lib/Camera ../../../../animation/easing".split(" "),
function(p,c,n,l,k,d,h,g,f){Object.defineProperty(c,"__esModule",{value:!0});p=function(b){function a(a,d){var c=b.call(this,a.state,a.sceneIntersectionHelper,"interaction"===d?null:void 0)||this;c.view=a;c.mode=d;c.zoomLocation=k.vec3f64.create();c.tmpCamera=new g;c.tmpRayDir=k.vec3f64.create();c.tmpCenter=k.vec3f64.create();c.constraintOptions={selection:15,interactionType:1,interactionFactor:null,interactionStartCamera:new g,interactionDirection:null,tiltMode:0};return c}n(a,b);Object.defineProperty(a.prototype,
"isInteractive",{get:function(){return"interaction"===this.mode},enumerable:!0,configurable:!0});a.prototype.zoomStep=function(a,b){if(this.active){var d=this.view.state,c=this.constraintOptions.interactionStartCamera;this.animation.finished?c.copyFrom(d.camera):this.animation.cameraAt(1,c);this.tmpCamera.copyFrom(d.camera);0<a?(this.intersectionHelper.intersectScreenFreePointFallback(b,this.zoomLocation),this.intersectionHelper.intersectRay(this.tmpCamera.ray,this.tmpCenter)&&(this.tmpCamera.center=
this.tmpCenter)):this.intersectionHelper.intersectRay(this.tmpCamera.ray,this.zoomLocation)?this.tmpCamera.center=this.zoomLocation:l.vec3.copy(this.zoomLocation,this.tmpCamera.center);this.updateCamera(this.tmpCamera,Math.pow(.6,a),this.zoomLocation,b);this.begin(this.tmpCamera)}};a.prototype.animationSettings=function(){return{apex:null,duration:.6,easing:f.outExpo}};a.prototype.updateCamera=function(a,b,c,f){l.vec3.subtract(this.tmpRayDir,c,a.eye);f=l.vec3.length(this.tmpRayDir);var e=f*b;1>=b&&
4>e&&(e=4,b=e/f);1E-6>Math.abs(f-e)||(l.vec3.scale(this.tmpRayDir,this.tmpRayDir,b),l.vec3.subtract(a.eye,c,this.tmpRayDir),l.vec3.lerp(a.center,a.center,c,1-b),d.applyAll(this.view,a,this.constraintOptions))};return a}(h.PointToPointAnimationController);c.ZoomStepController=p})},"esri/views/input/handlers/support":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});c.eventMatchesPointerAction=function(c,l){switch(l){case "primary":return"touch"===
c.pointerType||0===c.button;case "secondary":return"touch"!==c.pointerType&&2===c.button;case "tertiary":return"touch"!==c.pointerType&&1===c.button}};c.eventMatchesMousePointerAction=function(c,l){if("touch"===c.pointerType)return!1;switch(l){case "primary":return 0===c.button;case "secondary":return 2===c.button;case "tertiary":return 1===c.button}}})},"esri/views/3d/input/handlers/DragRotate":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/screenUtils ../../state/controllers/RotateController ../../../input/InputHandler ../../../input/handlers/support".split(" "),
function(p,c,n,l,k,d,h){Object.defineProperty(c,"__esModule",{value:!0});p=function(d){function c(b,a,c,f){var e=d.call(this,!0)||this;e.view=b;e.pointerAction=a;e.pivotPoint=c;e.registerIncoming("drag",f,function(a){return e.handleDrag(a)});return e}n(c,d);c.prototype.handleDrag=function(b){var a=b.data;if(!(1<a.pointers.size)&&h.eventMatchesMousePointerAction(b.data,this.pointerAction)){var d=l.createScreenPointArray(a.center.x,a.center.y);switch(a.action){case "start":this.cameraController&&(this.cameraController.end(),
this.cameraController=null);this.cameraController=new k.RotateController(this.view,this.view.sceneIntersectionHelper,this.pivotPoint);this.view.state.switchCameraController(this.cameraController);this.cameraController.begin(d);break;case "update":this.cameraController&&this.cameraController.update(d);break;case "end":this.cameraController&&(this.cameraController.end(),this.cameraController=null)}b.stopPropagation()}};return c}(d.InputHandler);c.DragRotate=p})},"esri/views/3d/state/controllers/RotateController":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/mathUtils ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec2f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../camera/constraintUtils ../Constraints ./InteractiveController ../utils/navigationUtils ../../support/mathUtils".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u){Object.defineProperty(c,"__esModule",{value:!0});p=function(c){function m(a,e,f){var m=c.call(this)||this;m.view=a;m.intersectionHelper=e;m.pivot=f;m.lastPoint=g.vec2f64.create();m.tmpWorldUp=b.vec3f64.create();m.tmpViewDir=b.vec3f64.create();m.tmpRotCurPoint=g.vec2f64.create();m.tmpTransf=d.mat4f64.create();m.tmpAxis=b.vec3f64.create();m.pivotPos=b.vec3f64.create();m.constraintOptions={selection:15,interactionType:2,interactionFactor:0,interactionStartCamera:null,
interactionDirection:null,tiltMode:0};m.rotScale="center"===f?3:1.5;return m}n(m,c);m.prototype.begin=function(a){if(this.active){switch(this.pivot){case "eye":f.vec3.copy(this.pivotPos,this.beginCamera.eye);this.constraintOptions.interactionType=3;this.constraintOptions.tiltMode=1;this.constraintOptions.selection=0;break;case "center":this.intersectionHelper.intersectRayFreePointFallback(this.beginCamera.ray,this.pivotPos)||f.vec3.copy(this.pivotPos,this.beginCamera.center),this.beginCamera.center=
this.pivotPos,this.constraintOptions.interactionType=2,this.constraintOptions.tiltMode=0,this.constraintOptions.selection=11}this.constraintOptions.interactionStartCamera=this.beginCamera;q.normalizeCoordinate(this.beginCamera,a,this.lastPoint)}};m.prototype.update=function(b){if(this.active){var d;switch(this.pivot){case "eye":d=this.currentCamera.center;break;case "center":this.currentCamera.center=this.pivotPos,d=this.currentCamera.eye}this.applyRotation(this.currentCamera,b,d,this.pivotPos);a.applyAll(this.view,
this.currentCamera,this.constraintOptions)}};m.prototype.end=function(){this.active&&this.finishController()};m.prototype.applyRotation=function(a,b,d,c){this.view.renderCoordsHelper.worldUpAtPosition(c,this.tmpWorldUp);q.normalizeCoordinate(a,b,this.tmpRotCurPoint);b=(this.lastPoint[1]-this.tmpRotCurPoint[1])*this.rotScale;var m=(this.tmpRotCurPoint[0]-this.lastPoint[0])*this.rotScale;f.vec3.subtract(this.tmpViewDir,d,c);var g=f.vec3.length(this.tmpViewDir),g=u.acos(f.vec3.dot(this.tmpViewDir,this.tmpWorldUp)/
g);if("eye"===this.pivot){var r=.5*Math.PI-g,t=.495*Math.PI;b=r-Math.max(-t,Math.min(t,r+-.5*b))}b=l.clamp(b+g,e.TiltDefault.min,e.TiltDefault.max)-g;k.mat4.identity(this.tmpTransf);f.vec3.cross(this.tmpAxis,a.up,this.tmpViewDir);"center"===this.pivot&&(m=-m);k.mat4.rotate(this.tmpTransf,this.tmpTransf,m,this.tmpWorldUp);k.mat4.rotate(this.tmpTransf,this.tmpTransf,b,this.tmpAxis);f.vec3.transformMat4(this.tmpViewDir,this.tmpViewDir,this.tmpTransf);f.vec3.add(d,c,this.tmpViewDir);f.vec3.transformMat4(a.up,
a.up,this.tmpTransf);h.vec2.copy(this.lastPoint,this.tmpRotCurPoint);a.markViewDirty()};return m}(m.InteractiveController);c.RotateController=p})},"esri/views/3d/state/controllers/InteractiveController":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","./CameraController","../../webgl-engine/lib/Camera"],function(p,c,n,l,k){Object.defineProperty(c,"__esModule",{value:!0});p=function(d){function c(){var c=null!==d&&d.apply(this,arguments)||this;c.beginCamera=new k;
c.currentCamera=new k;return c}n(c,d);Object.defineProperty(c.prototype,"isInteractive",{get:function(){return!0},enumerable:!0,configurable:!0});c.prototype.stepController=function(c,f){d.prototype.stepController.call(this,c,f);f.copyViewFrom(this.currentCamera);this.currentCamera.copyFrom(f)};c.prototype.onControllerStart=function(c){d.prototype.onControllerStart.call(this,c);this.beginCamera.copyFrom(c);this.currentCamera.copyFrom(c)};c.prototype.onControllerEnd=function(c){c.copyViewFrom(this.currentCamera);
d.prototype.onControllerEnd.call(this,c)};return c}(l.CameraController);c.InteractiveController=p})},"esri/views/3d/input/handlers/DragZoom":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/screenUtils ../../state/controllers/global/ZoomController ../../state/controllers/local/ZoomController ../../../input/InputHandler ../../../input/handlers/support".split(" "),function(p,c,n,l,k,d,h,g){Object.defineProperty(c,"__esModule",{value:!0});p=function(c){function b(a,
b,d){var e=c.call(this,!0)||this;e.view=a;e.pointerAction=b;e.registerIncoming("drag",d,function(a){return e.handleDrag(a)});return e}n(b,c);b.prototype.handleDrag=function(a){var b=a.data;if(!(1<b.pointers.size)&&g.eventMatchesMousePointerAction(a.data,this.pointerAction)){var c=l.createScreenPointArray(b.center.x,b.center.y);switch(b.action){case "start":this.cameraController&&(this.cameraController.end(),this.cameraController=null);this.cameraController=this.view.state.isGlobal?new k.ZoomController(this.view,
this.view.sceneIntersectionHelper):new d.ZoomController(this.view,this.view.sceneIntersectionHelper);this.view.state.switchCameraController(this.cameraController);this.cameraController.begin(c);break;case "update":this.cameraController&&this.cameraController.update(c);break;case "end":this.cameraController&&(this.cameraController.end(),this.cameraController=null)}a.stopPropagation()}};return b}(h.InputHandler);c.DragZoom=p})},"esri/views/3d/state/controllers/global/ZoomController":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/screenUtils ../../../../../core/libs/gl-matrix-2/vec2 ../../../../../core/libs/gl-matrix-2/vec2f64 ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../camera/constraintUtils ../InteractiveController ../../utils/navigationUtils ../../../support/geometryUtils".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e){Object.defineProperty(c,"__esModule",{value:!0});p=function(b){function c(a,c){var f=b.call(this)||this;f.view=a;f.intersectionHelper=c;f.pickPoint=g.vec3f64.create();f.tmpP0=d.vec2f64.create();f.panAxisAngle=e.axisAngle.create();f.tmpRayDir=g.vec3f64.create();f.targetOnSphere=g.vec3f64.create();f.dragBeginPoint=l.createScreenPointArray();f.normalizedAnchorPoint=d.vec2f64.create();f.constraintOptions={selection:7,interactionType:1,interactionFactor:0,interactionStartCamera:null,
interactionDirection:null,tiltMode:0};f.sphere=e.sphere.create();f.hasPickPoint=!1;return f}n(c,b);c.prototype.begin=function(b){this.active&&(k.vec2.copy(this.dragBeginPoint,b),a.normalizeCoordinate(this.beginCamera,b,this.normalizedAnchorPoint),b=a.pickPointAndInitSphere(this.intersectionHelper,this.beginCamera,b,!1),this.hasPickPoint=!!b.scenePickPoint,this.pickPoint=b.scenePickPoint,this.sphere=b.sphere,this.constraintOptions.interactionStartCamera=this.beginCamera)};c.prototype.update=function(b){if(this.active){this.currentCamera.eye=
this.beginCamera.eye;this.currentCamera.center=this.beginCamera.center;this.currentCamera.up=this.beginCamera.up;h.vec3.subtract(this.tmpRayDir,this.currentCamera.center,this.currentCamera.eye);var d=h.vec3.length(this.tmpRayDir);a.normalizeCoordinate(this.currentCamera,b,this.tmpP0);var c=12*(this.normalizedAnchorPoint[1]-this.tmpP0[1]),m=d*Math.pow(2,c),g=this.view.state.constraints.minimumPoiDistance;0>c&&m<g&&(m=g);1E-6>Math.abs(d-m)||(this.hasPickPoint&&m<d&&(c=1-(1-m/d)*(1-this.sphere.radius/
h.vec3.length(this.currentCamera.center)),h.vec3.scale(this.currentCamera.center,this.currentCamera.center,c)),h.vec3.scale(this.tmpRayDir,this.tmpRayDir,-m/d),h.vec3.add(this.currentCamera.eye,this.currentCamera.center,this.tmpRayDir),this.constraintOptions.interactionFactor=f.pixelDistanceToInteractionFactor(this.dragBeginPoint,b),f.applyAll(this.view,this.currentCamera,this.constraintOptions),this.hasPickPoint&&(a.sphereOrPlanePointFromScreenPoint(this.sphere,this.currentCamera,this.dragBeginPoint,
this.targetOnSphere),e.axisAngle.fromPoints(this.pickPoint,this.targetOnSphere,this.panAxisAngle),a.applyRotation(this.currentCamera,this.sphere.center,this.panAxisAngle)),f.applySurfaceCollision(this.view,this.currentCamera))}};c.prototype.end=function(){this.active&&this.finishController()};return c}(b.InteractiveController);c.ZoomController=p})},"esri/views/3d/state/controllers/local/ZoomController":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/screenUtils ../../../../../core/libs/gl-matrix-2/vec2 ../../../../../core/libs/gl-matrix-2/vec2f64 ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../camera/constraintUtils ../InteractiveController ../../utils/navigationUtils ../../../support/geometryUtils ../../../support/mathUtils".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m){Object.defineProperty(c,"__esModule",{value:!0});p=function(b){function c(a,c){var f=b.call(this)||this;f.view=a;f.intersectionHelper=c;f.tmpP=g.vec3f64.create();f.tmpN=g.vec3f64.create();f.tmpP0=d.vec2f64.create();f.tmpPoi=g.vec3f64.create();f.tmpRayDir=g.vec3f64.create();f.dragBeginPoint=l.createScreenPointArray();f.normalizedAnchorPoint=d.vec2f64.create();f.constraintOptions={selection:15,interactionType:1,interactionFactor:0,interactionStartCamera:null,interactionDirection:g.vec3f64.create(),
tiltMode:0};f.plane=e.plane.create();return f}n(c,b);c.prototype.begin=function(b){this.active&&(k.vec2.copy(this.dragBeginPoint,b),a.normalizeCoordinate(this.beginCamera,b,this.normalizedAnchorPoint),this.intersectionHelper.intersectScreenFreePointFallback(b,this.tmpP),h.vec3.subtract(this.tmpN,this.beginCamera.eye,this.beginCamera.center),h.vec3.normalize(this.tmpN,this.tmpN),0>this.tmpN[1]&&h.vec3.negate(this.tmpN,this.tmpN),e.plane.fromPositionAndNormal(this.tmpP,this.tmpN,this.plane),this.constraintOptions.interactionStartCamera=
this.beginCamera)};c.prototype.update=function(b){if(this.active){a.intersectPlaneFromScreenPoint(this.plane,this.currentCamera,this.dragBeginPoint,this.tmpPoi)||h.vec3.copy(this.tmpPoi,this.currentCamera.center);a.normalizeCoordinate(this.currentCamera,b,this.tmpP0);var d=4*(this.tmpP0[1]-this.normalizedAnchorPoint[1]);k.vec2.copy(this.normalizedAnchorPoint,this.tmpP0);h.vec3.subtract(this.tmpRayDir,this.tmpPoi,this.currentCamera.eye);var c=h.vec3.length(this.tmpRayDir),e=c*(1-d);h.vec3.copy(this.constraintOptions.interactionDirection,
this.tmpRayDir);h.vec3.scale(this.constraintOptions.interactionDirection,this.constraintOptions.interactionDirection,m.sign(d)/c);var g=this.view.state.constraints.minimumPoiDistance;0<=d&&e<g&&(e=g,d=-(e-c)/c);1E-6>Math.abs(c-e)||(h.vec3.scale(this.tmpRayDir,this.tmpRayDir,d),h.vec3.add(this.currentCamera.eye,this.currentCamera.eye,this.tmpRayDir),h.vec3.lerp(this.currentCamera.center,this.currentCamera.center,this.tmpPoi,d),this.currentCamera.center[2]=this.tmpPoi[2]>this.beginCamera.center[2]?
Math.max(this.beginCamera.center[2],this.currentCamera.center[2]):Math.min(this.beginCamera.center[2],this.currentCamera.center[2]),this.currentCamera.markViewDirty(),this.constraintOptions.interactionFactor=f.pixelDistanceToInteractionFactor(this.dragBeginPoint,b),f.applyAll(this.view,this.currentCamera,this.constraintOptions))}};c.prototype.end=function(){this.active&&this.finishController()};return c}(b.InteractiveController);c.ZoomController=p})},"esri/views/3d/input/handlers/GamepadNavigation":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/Handles ../../../../core/watchUtils ../../state/controllers/GamepadKeyboardController ../../../input/InputHandler".split(" "),
function(p,c,n,l,k,d,h){Object.defineProperty(c,"__esModule",{value:!0});p=function(c){function f(b,a){var d=c.call(this,!0)||this;d.view=b;d.watchHandles=new l;d.handle=d.registerIncoming("gamepad",function(a){return d.handleEventGamepad(a)});d.handle.pause();return d}n(f,c);f.prototype.onInstall=function(b){var a=this;c.prototype.onInstall.call(this,b);this.watchHandles.add([k.init(this.view.navigation.gamepad,"enabled",function(b){b?a.handle.resume():(a.handle.pause(),a.cameraControllerGamepad&&
(a.cameraControllerGamepad.finishController(),a.cameraControllerGamepad=null))}),this.view.navigation.gamepad.watch("device",function(b){a.cameraControllerGamepad&&b&&a.cameraControllerGamepad.gamepadDevice!==b&&(a.cameraControllerGamepad.finishController(),a.cameraControllerGamepad=null)})])};f.prototype.onUninstall=function(){this.watchHandles.removeAll();c.prototype.onUninstall.call(this)};f.prototype.handleEventGamepad=function(b){var a=this.view.navigation.gamepad.device;if(!a||b.data.device===
a)if((a=this.cameraControllerGamepad&&this.cameraControllerGamepad.active)||d.GamepadKeyboardController.activatesFor(this.view,b.data))a||(a=new d.GamepadKeyboardController(this.view,b.data.device),this.view.state.switchCameraController(a)&&(this.cameraControllerGamepad=a)),this.cameraControllerGamepad&&this.cameraControllerGamepad.active&&this.cameraControllerGamepad.gamepadDevice===b.data.device&&this.cameraControllerGamepad.handleEventGamepad(b.data)};return f}(h.InputHandler);c.GamepadNavigation=
p})},"esri/views/3d/state/controllers/GamepadKeyboardController":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/compilerUtils ../../../../core/mathUtils ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../camera/constraintUtils ../Constraints ./InteractiveController ../utils/navigationUtils ../utils/navigationUtils ../utils/viewUtils ../../support/cameraUtils ../../support/cameraUtilsInternal ../../support/earthUtils ../../support/geometryUtils ../../support/mathUtils ../../support/stack ../../webgl-engine/lib/Camera ../../../navigation/gamepadAndKeyboardUtils".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z,A){Object.defineProperty(c,"__esModule",{value:!0});p=function(c){function e(a,b,d){var e=c.call(this)||this;e.view=a;e.gamepadDevice=b;e.disableMovements=d;e.transformation={translation:[0,0,0],heading:0,tilt:0};e.keysButtonState=[0,0,0,0,0,0,0,0,0,0];e.tmpCamera=new z;e.constraintOptions={selection:15,interactionType:0,interactionStartCamera:new z,interactionFactor:0,interactionDirection:null,tiltMode:1};return e}n(e,c);e.prototype.handleEventGamepad=
function(a){var b=A.extractTransformation(a,this.view.navigation.gamepad,this.transformation);("end"===a.action||A.isZeroTransformation(b))&&this.finishController()};e.prototype.activateDirection=function(a){this.keysButtonState[a]=1;A.extractTransformationKeyboard(this.keysButtonState,this.transformation)};e.prototype.deactivateDirection=function(a){this.keysButtonState[a]=0;a=A.extractTransformationKeyboard(this.keysButtonState,this.transformation);A.isZeroTransformation(a)&&this.finishController()};
e.prototype.onControllerStart=function(a){this.filteredSurfaceElevation=this.view.pointsOfInterest.cameraOnSurface.location.z;this.headingStart=this.view.camera.heading;c.prototype.onControllerStart.call(this,a)};e.prototype.updateFilteredSurfaceElevation=function(a){this.filteredSurfaceElevation+=1*(this.view.pointsOfInterest.cameraOnSurface.location.z-this.filteredSurfaceElevation)*a};e.prototype.stepController=function(a,d){this.updateStartHeading();this.updateFilteredSurfaceElevation(a);this.currentCamera.copyViewFrom(d);
this.updateCameraCenter();this.constraintOptions.interactionStartCamera.copyFrom(this.currentCamera);this.calculateControlTransformation(a,this.currentCamera,K);this.applyDisabledMovementTypes(K);this.applyPan(K.pan);this.applyRotate(K.rotate);this.applyZoom(K.zoom);this.applyAscend(K.ascend);this.constraintOptions.interactionType=0;this.constraintOptions.selection=8;b.applyAll(this.view,this.currentCamera,this.constraintOptions);c.prototype.stepController.call(this,a,d)};e.prototype.updateStartHeading=
function(){0!==this.transformation.heading&&(this.headingStart=this.view.camera.heading)};e.prototype.applyRotate=function(a){if(a.enabled){var d=this.currentCamera,c=d.center,e=d.up,f=d.eye;g.vec3.subtract(c,c,f);g.vec3.transformMat4(c,c,a.matrix);g.vec3.add(c,c,f);g.vec3.transformMat4(e,e,a.matrix);d.markViewDirty();this.constraintOptions.interactionType=3;this.constraintOptions.selection=7;b.applyAll(this.view,d,this.constraintOptions)}};e.prototype.applyPan=function(a,d){void 0===d&&(d=this.currentCamera);
if(a.enabled){var c=d.center,e=d.eye,f=d.up;g.vec3.transformMat4(e,e,a.matrix);g.vec3.transformMat4(c,c,a.matrix);this.view.state.isGlobal&&g.vec3.transformMat4(f,f,a.matrix);d.markViewDirty();this.constraintOptions.interactionType=4;this.constraintOptions.selection=15;b.applyAll(this.view,d,this.constraintOptions)}};e.prototype.applyZoom=function(a){if(a){var d=this.currentCamera,c=d.eye,d=d.viewForward;g.vec3.add(c,c,g.vec3.scale(y.sv3d.get(),d,a));this.currentCamera.markViewDirty();g.vec3.copy(M,
d);g.vec3.negate(M,M);this.constraintOptions.interactionDirection=M;this.constraintOptions.interactionType=1;this.constraintOptions.selection=7;b.applyAll(this.view,this.currentCamera,this.constraintOptions);this.constraintOptions.interactionDirection=null}};e.prototype.applyAscend=function(a){if(a){var d=this.currentCamera,c=d.center,d=d.eye,e=this.view.renderCoordsHelper.worldUpAtPosition(d,y.sv3d.get());this.constraintOptions.interactionDirection=g.vec3.copy(M,e);this.view.state.isGlobal?(e=g.vec3.length(d),
a=(e+a)/e,g.vec3.scale(d,d,a),g.vec3.scale(c,c,a)):(a=g.vec3.scale(y.sv3d.get(),e,a),g.vec3.add(d,d,a),g.vec3.add(c,c,a));this.currentCamera.markViewDirty();this.updateCameraCenter();this.constraintOptions.interactionType=5;this.constraintOptions.selection=8;b.applyAll(this.view,this.currentCamera,this.constraintOptions)&&this.updateCameraCenter();this.constraintOptions.selection=7;b.applyAll(this.view,this.currentCamera,this.constraintOptions);this.constraintOptions.interactionDirection=null}};e.prototype.calculateControlTransformation=
function(a,b,c){c.zoom=0;c.ascend=0;c.pan.enabled=!1;d.mat4.identity(c.pan.matrix);c.rotate.enabled=!1;d.mat4.identity(c.rotate.matrix);a=this.computeVelocities(a);this.view.state.isLocal?this.calculateControlTransformationLocal(a,b,c):this.calculateControlTransformationGlobal(a,b,c)};e.prototype.updateCameraCenter=function(){var a=this.currentCamera;this.view.renderCoordsHelper.intersectManifoldClosestSilhouette(a.ray,this.view.pointsOfInterest.centerOnSurfaceFrequent.estimatedSurfaceAltitude,a.center);
this.currentCamera.markViewDirty()};e.prototype.calculateControlTransformationLocal=function(b,c,e){var f=c.viewRight,m=c.viewForward,h=this.transformation,q=this.view.navigation.gamepad,m=g.vec3.set(y.sv3d.get(),m[0],m[1],0);g.vec3.normalize(m,m);var r=h.translation[0]*b.pan;0!==r&&(r=g.vec3.scale(y.sv3d.get(),f,r),d.mat4.translate(e.pan.matrix,e.pan.matrix,r),e.pan.enabled=!0);switch(q.mode){case "pan":q=-h.translation[1]*b.pan;0!==q&&(q=g.vec3.scale(y.sv3d.get(),m,q),d.mat4.translate(e.pan.matrix,
e.pan.matrix,q),e.pan.enabled=!0);break;case "zoom":e.zoom=-h.translation[1]*b.zoom;break;default:l.neverReached(q.mode)}e.ascend=h.translation[2]*b.ascend;q=-h.heading*b.rotate;0!==q&&(d.mat4.rotate(e.rotate.matrix,e.rotate.matrix,q,this.view.renderCoordsHelper.worldUpAtPosition(c.eye,y.sv3d.get())),e.rotate.enabled=!0);b=h.tilt*b.rotate;c=u.viewAngle(this.view.renderCoordsHelper,c.center,c.eye);if(c=k.clamp(c+b,a.TiltDefault.min,a.TiltDefault.max)-c)d.mat4.rotate(e.rotate.matrix,e.rotate.matrix,
c,f),e.rotate.enabled=!0};e.prototype.calculateControlTransformationGlobal=function(a,b,c){var e=b.eye,f=b.viewRight,h=this.transformation,k=this.view.navigation.gamepad,e=g.vec3.cross(y.sv3d.get(),f,e);g.vec3.normalize(e,e);g.vec3.negate(e,e);m.panMotionToRotationMatrix(this.beginCamera,b,h,a,this.view.camera.heading,this.headingStart,this.view.camera.tilt,c,k);this.tmpCamera.copyFrom(this.currentCamera);this.applyPan(K.pan,this.tmpCamera);k=this.view.pointsOfInterest.centerOnSurfaceFrequent.estimatedSurfaceAltitude;
c.ascend=h.translation[2]*a.ascend;e=-h.heading*a.rotate;0!==e&&(d.mat4.rotate(c.rotate.matrix,c.rotate.matrix,e,this.tmpCamera.eye),c.rotate.enabled=!0);a=this.clampTiltDeltaGlobalToValidRange(h.tilt*a.rotate,b.ray,k);0!==a&&(d.mat4.rotate(c.rotate.matrix,c.rotate.matrix,a,this.tmpCamera.viewRight),c.rotate.enabled=!0)};e.prototype.clampTiltDeltaGlobalToValidRange=function(b,d,c){var e=q.onSurfaceTiltToEyeTiltGlobal(a.TiltDefault.min,d.origin,c),f=0,m=0,f=y.sv3d.get();this.view.renderCoordsHelper.intersectManifold(d,
c,f)?(f=u.viewAngle(this.view.renderCoordsHelper,f,d.origin),f=q.onSurfaceTiltToEyeTiltGlobal(f,d.origin,c),m=q.onSurfaceTiltToEyeTiltGlobal(a.TiltDefault.max,d.origin,c)):(w.sphere.closestPointOnSilhouette(w.sphere.wrap(c+x.earthRadius),d,f),f=v.acos(-g.vec3.dot(d.direction,g.vec3.normalize(f,f))),f=q.offSurfaceTiltToEyeTiltGlobal(f,d.origin,c),m=q.offSurfaceTiltToEyeTiltGlobal(a.TiltDefault.max,d.origin,c));return k.clamp(f+b,e,m)-f};e.prototype.getPointAbsoluteSurfaceElevation=function(a,b,d){var c=
this.view.renderCoordsHelper,e=c.getAltitude(a);b+=Math.abs(e-b);g.vec3.copy(d,a);c.setAltitude(b,d);return b};e.prototype.clampedDistanceToSurface=function(a,b){var d=this.view.renderCoordsHelper,c=this.view.state.camera,e=t.headingTiltToDirectionUp(this.view,b,0,D,T).direction,e=d.intersectManifoldClosestSilhouette(w.ray.wrap(b,e),a,y.sv3d.get()),e=g.vec3.distance(b,e);a=d.intersectManifoldClosestSilhouette(w.ray.wrap(b,v.directionFromTo(y.sv3d.get(),b,c.center)),a,y.sv3d.get());b=g.vec3.distance(b,
a);return Math.min(e,b)};e.prototype.computeHeadingRotateRadius=function(a){var b=this.view,d=b.renderCoordsHelper,c=b.state,b=c.isGlobal,c=d.intersectManifoldClosestSilhouette(c.camera.ray,this.filteredSurfaceElevation,y.sv3d.get());if(b)return b=g.vec3.subtract(y.sv3d.get(),a,c),d=g.vec3.length(b),g.vec3.scale(b,b,1/d),a=g.vec3.normalize(y.sv3d.get(),a),a=v.acos(g.vec3.dot(a,b)),d*Math.sin(Math.min(C,a));a=g.vec3.copy(y.sv3d.get(),a);d.setAltitude(this.filteredSurfaceElevation,a);return g.vec3.distance(c,
a)};e.prototype.minimumAscendVelocity=function(){return this.view.state.constraints.collision.enabled?0:H};e.prototype.computeVelocities=function(a){var b=this.filteredSurfaceElevation,d=b+x.earthRadius,c=this.view.state,e=c.camera,f=c.isGlobal,m=y.sv3d.get(),g=this.getPointAbsoluteSurfaceElevation(e.eye,b,m),h=this.clampedDistanceToSurface(b,m),l=e.width/2,q=E*e.width,c=E*e.width,e=h*Math.tan(.5*e.fovX)/l,r=e/d,d=e/this.computeHeadingRotateRadius(m),f=(f?r:e)*q*a,b=g-b,b=Math.max(this.minimumAscendVelocity()*
a,Math.pow(2,q*a/l)*b-b),h=Math.pow(2,q*a/l)*h-h;a*=k.clamp(d*c,G,I);return{pan:f,ascend:b,zoom:h,rotate:a}};e.prototype.applyDisabledMovementTypes=function(a){void 0===this.disableMovements||void 0!==this.disableMovements.mode&&this.view.state.mode!==this.disableMovements.mode||(a.zoom=this.disableMovements.zoom?0:a.zoom,a.ascend=this.disableMovements.ascend?0:a.ascend,a.pan.enabled=!this.disableMovements.pan,this.disableMovements.pan&&d.mat4.identity(a.pan.matrix),a.rotate.enabled=!this.disableMovements.rotate,
this.disableMovements.rotate&&d.mat4.identity(a.rotate.matrix))};e.activatesFor=function(a,b){a=A.extractTransformation(b,a.navigation.gamepad,B);return!("end"===b.action||A.isZeroTransformation(a))};return e}(e.InteractiveController);c.GamepadKeyboardController=p;var B={translation:[0,0,0],heading:0,tilt:0},D=80,C=v.deg2rad(D),E=.75,H=5,G=v.deg2rad(30),I=v.deg2rad(80),K={zoom:0,ascend:0,pan:{enabled:!1,matrix:h.mat4f64.create()},rotate:{enabled:!1,matrix:h.mat4f64.create()}},M=f.vec3f64.create(),
T=r.createDirectionUp()})},"esri/views/3d/support/cameraUtils":function(){define("require exports ../../../core/tsSupport/assignHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../Camera ../../../config ../../../core/Logger ../../../core/promiseUtils ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../geometry/Point ../../../geometry/SpatialReference ../../../geometry/support/scaleUtils ../camera/intersectionUtils ./cameraUtilsPlanar ./cameraUtilsSpherical ./earthUtils ./mathUtils ./projectionUtils ../webgl-engine/lib/Camera ../../support/spatialReferenceSupport".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z){function A(a){return"global"===a.viewingMode?r:t}function B(a,c,f){var g=a.renderSpatialReference,h=b.vec3.copy(F,c.viewForward),h=H(a,c.eye,h,c.up,Y);a=a.spatialReference||m.WGS84;v.vectorToVector(c.eye,g,P,a)||(a=m.WGS84,v.vectorToVector(c.eye,g,P,a));if(!f)return new d(new e(P,a),h.heading,h.tilt,w.rad2deg(c.fov));f.position.x=P[0];f.position.y=P[1];f.position.z=P[2];f.position.spatialReference=a;f.heading=h.heading;f.tilt=h.tilt;f.fov=w.rad2deg(c.fov);
return f}function D(a,b,d){var c=a.state.camera,e=c.fovX,c=c.width/2/c.pixelRatio;"global"===a.viewingMode&&null!=d&&(b*=Math.cos(w.deg2rad(d)));b/=a.renderCoordsHelper.unitInMeters;return c/(39.37*h.screenDPI/b)/Math.tan(e/2)}function C(a,b,d){var c=a.state.camera;b=39.37*h.screenDPI/(c.width/2/c.pixelRatio/(b*Math.tan(c.fovX/2)));"global"===a.viewingMode&&(b/=Math.cos(w.deg2rad(d)));return b*=a.renderCoordsHelper.unitInMeters}function E(a,b,d,c,e,f){if(Q(f)){var m=V(f.signal);T(a,c.heading,c.tilt,
b,d,e,m);m.resolver.promise.then(function(b){return f.resolver.resolve(O(a,b,c.fov))},function(a){return f.resolver.reject(a)})}else return b=T(a,c.heading,c.tilt,b,d,e),O(a,b,c.fov,f)}function H(a,b,d,c,e){return A(a).directionToHeadingTilt(b,d,c,e)}function G(a,b,d){return a.basemapTerrain&&a.renderCoordsHelper.fromRenderCoords(b,X,a.spatialReference)&&a.basemapTerrain.getElevation(X)>X.z-1}function I(a,b,d,c){return k(this,void 0,void 0,function(){var d;return l(this,function(e){switch(e.label){case 0:return a.renderCoordsHelper.fromRenderCoords(b,
X,a.spatialReference)?[4,a.elevationProvider.queryElevation(X,c)]:[2,!1];case 1:return d=e.sent(),[2,d>X.z-10]}})})}function K(d,c,f){return k(this,void 0,void 0,function(){var m,g;return l(this,function(h){switch(h.label){case 0:m=a.vec3f64.create();if(c)return[3,1];b.vec3.copy(m,d.state.camera.center);return[3,5];case 1:if(!(c instanceof e))return[3,4];v.pointToVector(c,m,d.renderSpatialReference);return null!=c.z||null==d.basemapTerrain?[3,3]:[4,d.elevationProvider.queryElevation(c,f)];case 2:return g=
h.sent(),null!=g&&d.renderCoordsHelper.setAltitude(g,m),[2,m];case 3:return[3,5];case 4:b.vec3.copy(m,c),h.label=5;case 5:return[2,m]}})})}function M(d,c){var f=a.vec3f64.create();c&&c instanceof e?(v.pointToVector(c,f,d.renderSpatialReference),null==c.z&&null!=d.basemapTerrain&&(c=d.elevationProvider.getElevation(c),null!=c&&d.renderCoordsHelper.setAltitude(c,f))):c?b.vec3.copy(f,c):b.vec3.copy(f,d.state.camera.center);return f}function T(a,b,d,c,f,m,g){var h=c&&c instanceof e?c:null;if(Q(g))K(a,
c,g.signal).then(function(c){N(a,b,d,h,c,f,m,g)},function(a){return g.resolver.reject(a)});else return c=M(a,c),N(a,b,d,h,c,f,m,g)}function N(b,d,c,e,f,g,h,k){e||(e=v.vectorToPoint(f,b.renderSpatialReference,b.spatialReference||m.WGS84));g=Math.max(g,b.state.constraints.minimumPoiDistance);var l=S(b,d,c,f,g,h),q=A(b).eyeForCenterWithHeadingTilt,r=q(f,g,l.heading,l.tilt);if(h===da.ADJUST&&"global"===b.viewingMode&&0<c){var t=function(){var a=g,m=g,l=b.state.constraints.tilt(m),m=A(b).eyeTiltToLookAtTilt(f,
m,c),m=Math.min(m,.5*Math.PI),l=l.min*(1-ja)+m*ja,a=A(b).lookAtTiltToEyeTilt(f,a,l);h=1>c-a?da.LOCKED:da.ADJUST;return N(b,d,a,e,f,g,h,k)};if(G(b,r.eye,r.tilt))return t();if(Q(k)){I(b,r.eye,r.tilt,k.signal).then(function(b){if(b)return t();k.resolver.resolve({eye:r.eye,up:r.up,center:a.vec3f64.clone(f),heading:r.heading,tilt:r.tilt})});return}}l=!k||Q(k)?{center:a.vec3f64.create(),eye:a.vec3f64.create(),up:a.vec3f64.create(),tilt:0,heading:0}:k;l.eye=r.eye;l.up=r.up;l.center=a.vec3f64.clone(f);l.heading=
r.heading;l.tilt=r.tilt;Q(k)&&k.resolver.resolve(l);return l}function S(a,b,d,c,e,f){var g=0;if(f=f===da.ADJUST)if(g=a.pointsOfInterest.centerOnSurfaceFrequent.distance,8<Math.log(e/g)/Math.LN2)f=!0;else{var h=a.renderSpatialReference,k=a.spatialReference||m.WGS84;f=v.vectorToPoint(c,h,k);h=v.vectorToPoint(a.pointsOfInterest.centerOnSurfaceFrequent.renderLocation,h,k);g*=Math.tan(.5*a.state.camera.fov);f=5<h.distance(f)/g}f?(b=0,f=a.state.constraints.tilt(e),f.max=Math.min(f.max,.5*Math.PI),f=f.min*
(1-ja)+f.max*ja,d=A(a).eyeTiltToLookAtTilt(c,e,d),g=Math.min(d,f)):g=A(a).eyeTiltToLookAtTilt(c,e,d);d=g=a.state.constraints.clampTilt(e,g);d=A(a).lookAtTiltToEyeTilt(c,e,d);return{heading:b,tilt:d}}function O(a,b,c,e){a=v.vectorToPoint(b.eye,a.renderSpatialReference,a.spatialReference||m.WGS84);return a?e?(e.position=a,e.heading=b.heading,e.tilt=b.tilt,e.fov=c,e):new d(a,b.heading,b.tilt,c):null}function V(a){return{resolver:f.createResolver(),signal:a}}function Q(a){return a&&"resolver"in a}Object.defineProperty(c,
"__esModule",{value:!0});var J=g.getLogger("esri.views.3d.support.cameraUtils"),P=a.vec3f64.create(),L=a.vec3f64.create(),F=a.vec3f64.create(),Y={heading:0,tilt:0},X=new e,R=new w.Cyclical(-2.0037508342788905E7,2.0037508342788905E7),Z=new w.Cyclical(-180,180),da;(function(a){a[a.LOCKED=0]="LOCKED";a[a.ADJUST=1]="ADJUST"})(da=c.OrientationMode||(c.OrientationMode={}));c.headingTiltToDirectionUp=function(a,b,d,c,e){return A(a).headingTiltToDirectionUp(b,d,c,e)};c.externalToInternal=function(d,c){var e=
d.renderSpatialReference,f=A(d).headingTiltToDirectionUp,m=a.vec3f64.create();if(!v.pointToVector(c.position,m,e))return null;e=f(m,c.heading,c.tilt);b.vec3.scale(e.direction,e.direction,d.state.camera.distance);b.vec3.add(e.direction,e.direction,m);d=u.cameraOnContentAlongViewDirection(d,m,e.direction,e.up);d.fov=w.deg2rad(c.fov);return d};c.internalToExternal=B;c.scaleToDistance=D;c.distanceToScale=C;c.fromCenterScale=function(a,b,d,c,e,f){d=D(a,d,b.latitude);return E(a,b,d,c,e,f)};c.fromCenterDistance=
E;c.directionToHeadingTilt=H;c.getObserverForPointAtDistance=T;c.fromExtent=function(a,b,d,c,f,g){var h,k=0;null!=b.zmax&&null!=b.zmin&&(h=(b.zmax+b.zmin)/2,k=b.zmax-b.zmin);var l,q;if("global"===a.viewingMode){if(!z.isSpatialReferenceSupported(b.spatialReference,"global"))return Q(g)&&g.resolver.reject(),null;var r=new e(b.xmin,b.ymin,b.spatialReference),t=new e(b.xmax,b.ymax,b.spatialReference),u=b.spatialReference.isGeographic?Z:R;b=new e(u.center(r.x,t.x),(t.y+r.y)/2,b.spatialReference);null!=
h&&(b.z=h);q=x.getGreatCircleSpanAt(b,r,t);l=q.lon;q=q.lat;u.diff(r.x,t.x)>u.range/2&&(l+=x.halfEarthCircumference);l=Math.min(l,x.halfEarthCircumference);q=Math.min(q,x.halfEarthCircumference)}else r=a.spatialReference||m.WGS84,l=b.xmax-b.xmin,q=b.ymax-b.ymin,b=new e({x:b.xmin+.5*l,y:b.ymin+.5*q,z:h,spatialReference:r});h=a.state.camera;k=Math.max(1/Math.tan(h.fovX/2)*l*.5,1/Math.tan(h.fovY/2)*q*.5,1/Math.tan(h.fov/2)*k*.5)/1;if(Q(g))l=V(g.signal),T(a,d,c,b,k,f,l),l.resolver.promise.then(function(b){return g.resolver.resolve(O(a,
b,a.camera.fov))},function(a){return g.resolver.reject(a)});else return d=T(a,d,c,b,k,f),O(a,d,a.camera.fov,g)};c.toExtent=function(a,b,d,c,e){b||(d||(d=a.state.camera),b=B(a,d,e));e=a.renderSpatialReference;var f;if(d)e=v.vectorToPoint(d.center,e,a.spatialReference||m.WGS84),f=d.distance;else{e=a.toMap(a.screenCenter);if(!e)return null;f=x.computeCartesianDistance(b.position,e)}d||(d=a.state.camera);b=2*f*Math.tan(d.fovX/2)*1;d=2*f*Math.tan(d.fovY/2)*1;return"global"===a.viewingMode?r.toExtent(a,
e,b,d,c):t.toExtent(a,e,b,d,c)};var ja=.7;c.observerToCamera=O;c.scaleToZoom=function(a,b){if(a=a.basemapTerrain&&a.basemapTerrain.tilingScheme)return a.levelAtScale(b);J.error("#scaleToZoom()","Cannot compute zoom from scale without a tiling scheme")};c.zoomToScale=function(a,b){if(a=a.basemapTerrain&&a.basemapTerrain.tilingScheme)return a.scaleAtLevel(b);J.error("#zoomToScale()","Cannot compute scale from zoom without a tiling scheme")};c.scaleToResolution=function(a,b){return a.spatialReference?
q.getResolutionForScale(b,a.spatialReference):void 0};c.computeScale=function(a,d,c){var e=a.renderSpatialReference;d||(d=a.state.camera);var f;f=m.WGS84;d instanceof y?(v.vectorToVector(d.center,e,L,f),f=L[1],d=d.distance):(f=d.position.latitude,v.pointToVector(d.position,P,e),v.pointToVector(c,L,e),d=b.vec3.distance(P,L));return C(a,d,f)};c.createAsyncContext=V;c.isAsyncContext=Q})},"esri/views/3d/support/cameraUtilsPlanar":function(){define("require exports ../../../core/libs/gl-matrix-2/mat4 ../../../core/libs/gl-matrix-2/mat4f64 ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../geometry/Extent ./cameraUtilsInternal ./mathUtils ./projectionUtils".split(" "),
function(p,c,n,l,k,d,h,g,f,b){function a(a,b,d,c){void 0===c&&(c=g.createDirectionUp());n.mat4.identity(q);a=c.direction;var h=c.up;n.mat4.rotateZ(q,q,-f.deg2rad(b));n.mat4.rotateX(q,q,f.deg2rad(d));k.vec3.transformMat4(a,m,q);k.vec3.scale(a,a,-1);k.vec3.transformMat4(h,e,q);return c}Object.defineProperty(c,"__esModule",{value:!0});var e=d.vec3f64.fromValues(0,1,0),m=d.vec3f64.fromValues(0,0,1),q=l.mat4f64.create(),u=d.vec3f64.create(),t=d.vec3f64.create();c.headingTiltToDirectionUp=a;c.directionToHeadingTilt=
function(a,b,d,c){return g.directionToHeadingTilt(b,d,c,m,e)};c.eyeForCenterWithHeadingTilt=function(b,c,e,f){var m=a(b,e,f),g=d.vec3f64.create();k.vec3.scale(g,m.direction,-c);k.vec3.add(g,g,b);return{up:m.up,eye:g,heading:e,tilt:f}};c.lookAtTiltToEyeTilt=function(a,b,d){return f.rad2deg(d)};c.eyeTiltToLookAtTilt=function(a,b,d){return f.deg2rad(d)};c.toExtent=function(a,d,c,e,f){var m=a.renderSpatialReference;a=a.map&&a.spatialReference||d.spatialReference;b.pointToVector(d,u,m);b.pointToVector(d,
t,m);u[0]-=c/2;t[0]+=c/2;u[1]-=e/2;t[1]+=e/2;b.vectorToVector(u,m,u,a);b.vectorToVector(t,m,t,a);f?(f.xmin=u[0],f.ymin=u[1],f.xmax=t[0],f.ymax=t[1],f.spatialReference=a):f=new h(u[0],u[1],t[0],t[1],a);return f}})},"esri/views/3d/support/cameraUtilsInternal":function(){define(["require","exports","../../../core/libs/gl-matrix-2/vec3","../../../core/libs/gl-matrix-2/vec3f64","./mathUtils"],function(p,c,n,l,k){Object.defineProperty(c,"__esModule",{value:!0});var d=l.vec3f64.create(),h=l.vec3f64.create();
c.createDirectionUp=function(){return{direction:l.vec3f64.create(),up:l.vec3f64.create()}};c.directionToHeadingTilt=function(c,f,b,a,e){var m=d;n.vec3.normalize(m,c);var g=n.vec3.dot(m,a),l=0<g,g=Math.abs(g);.99<g&&(g=Math.abs(n.vec3.dot(f,a)),.99>g?(n.vec3.copy(m,f),l&&n.vec3.scale(m,m,-1)):m=null);f=0;m&&(n.vec3.scale(h,a,n.vec3.dot(a,m)),n.vec3.subtract(m,m,h),f=n.vec3.dot(m,e)/(n.vec3.length(m)*n.vec3.length(e)),n.vec3.cross(h,m,e),f=(0<n.vec3.dot(h,a)?1:-1)*k.rad2deg(k.acos(f)));c=k.rad2deg(k.acos(-n.vec3.dot(a,
c)/n.vec3.length(c)));if(!b)return{heading:f,tilt:c};b.heading=f;b.tilt=c;return b}})},"esri/views/3d/support/cameraUtilsSpherical":function(){define("require exports ../../../core/libs/gl-matrix-2/mat4 ../../../core/libs/gl-matrix-2/mat4f64 ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../geometry/Extent ../../../geometry/SpatialReference ../../../geometry/support/webMercatorUtils ./cameraUtilsInternal ./earthUtils ./mathUtils".split(" "),function(p,c,n,l,k,d,h,
g,f,b,a,e){function m(a,d,c,f){void 0===f&&(f=b.createDirectionUp());k.vec3.cross(v,a,t);0===k.vec3.dot(v,v)&&k.vec3.cross(v,a,r);n.mat4.identity(w);n.mat4.rotate(w,w,-e.deg2rad(d),a);n.mat4.rotate(w,w,-e.deg2rad(c),v);d=f.up;c=f.direction;k.vec3.cross(d,v,a);k.vec3.normalize(d,d);k.vec3.transformMat4(d,d,w);k.vec3.normalize(c,a);k.vec3.negate(c,c);k.vec3.transformMat4(c,c,w);return f}function q(a){var b=a[1];a[1]=-a[2];a[2]=b}function u(a,b){b=m(b,a.heading,a.tilt);a.up=b.up;return a}Object.defineProperty(c,
"__esModule",{value:!0});var t=d.vec3f64.fromValues(0,0,1),r=k.vec3.normalize(d.vec3f64.create(),d.vec3f64.fromValues(1,1,1)),x=new e.Cyclical(-180,180),w=l.mat4f64.create(),v=d.vec3f64.create(),y=d.vec3f64.create();c.headingTiltToDirectionUp=m;c.directionToHeadingTilt=function(a,d,c,e){var f=v;k.vec3.normalize(f,a);k.vec3.cross(y,f,t);0===k.vec3.dot(y,y)&&k.vec3.cross(y,f,r);k.vec3.cross(y,y,f);return b.directionToHeadingTilt(d,c,e,f,y)};c.eyeForCenterWithHeadingTilt=function(a,b,c,f){var m={eye:d.vec3f64.create(),
up:null,tilt:f,heading:c},g=v;g[0]=a[0];g[1]=a[2];g[2]=-a[1];c=e.deg2rad(c);var h=e.deg2rad(f);f=Math.sin(c);c=Math.cos(c);var l=Math.sin(h),r=Math.cos(h),t=k.vec3.length(g);if(1E-8>Math.abs(h))h=b+t;else var y=t/l,n=e.asin(b/y),h=y*Math.sin(Math.PI-h-n);var y=l*b,r=r*b,n=c*y,x=h-r,w=x*x,A=b*b*l*l,l=c*c*A,A=f*f*A,z=g[1]*x,p=l*(l+w-g[1]*g[1]);if(0>p)return k.vec3.scale(m.eye,g,h/t),m.tilt=0,m;var B=Math.sqrt(p),p=l+w,z=0<c?-B+z:B+z;if(1E-8>Math.abs(p))return 1E-8>t?(m.eye[0]=0,m.eye[1]=0,m.eye[2]=
b):k.vec3.scale(m.eye,g,h/t),m.tilt=0,q(m.eye),u(m,a);m.eye[1]=z/p;p=m.eye[1]*m.eye[1];b=1-p;z=Math.sqrt(b);n=l*p+A-2*n*m.eye[1]*z*x+b*w;if(1E-8>Math.abs(n))return k.vec3.scale(m.eye,g,h/t),m.tilt=0,q(m.eye),u(m,a);m.eye[0]=(b*(h*g[0]-r*g[0])-y*z*(g[0]*m.eye[1]*c+g[2]*f))/n;m.eye[2]=(b*(h*g[2]-r*g[2])-y*z*(g[2]*m.eye[1]*c-g[0]*f))/n;k.vec3.scale(m.eye,m.eye,h);q(m.eye);return u(m,a)};c.lookAtTiltToEyeTilt=function(a,b,d){a=k.vec3.length(a);b=e.asin(b/(Math.sqrt(b*b+a*a-2*b*a*Math.cos(Math.PI-d))/
Math.sin(d)));return e.rad2deg(d-b)};c.eyeTiltToLookAtTilt=function(a,b,d){d=e.deg2rad(d);a=k.vec3.length(a);return e.asin(b/(a/Math.sin(d)))+d};c.toExtent=function(b,d,c,m,k){function l(a){var b=Math.PI/2;a=e.cyclical2PI.normalize(a,-b);a>b&&(a=Math.PI-a);return a}var q;q=d.latitude;d=d.longitude;var r=a.getLonDeltaForDistance(d,q,c)/2;c=d-r;d+=r;q=e.deg2rad(q);r=a.earthRadius;q=(1+Math.sin(q))/(1-Math.sin(q));var t=(q+1)*Math.tan(m/r/2);q=1.5*Math.PI-2*Math.atan(.5*(t+Math.sqrt(4*q+t*t)));m=q+m/
r;q=l(q);m=l(m);m<q&&(r=m,m=q,q=r);q=Math.max(e.rad2deg(q),-90);m=Math.min(e.rad2deg(m),90);d=x.monotonic(c,d);180<d-c&&(r=(d-c-180)/2,c+=r,d-=r);r=b.spatialReference&&b.spatialReference.isGeographic?b.spatialReference:g.WGS84;k?(k.xmin=c,k.ymin=q,k.xmax=d,k.ymax=m,k.spatialReference=r):k=new h(c,q,d,m,r);b.spatialReference&&b.spatialReference.isWebMercator&&f.geographicToWebMercator(k,!1,k);return k}})},"esri/views/navigation/gamepadAndKeyboardUtils":function(){define(["require","exports","../../core/libs/gl-matrix-2/vec3"],
function(p,c,n){function l(c){var d=c*c;0>c&&(d*=-1);return d}Object.defineProperty(c,"__esModule",{value:!0});c.quadraticAccentuation=l;c.resetTransformation=function(c){c.translation[0]=0;c.translation[1]=0;c.translation[2]=0;c.heading=0;c.tilt=0;return c};c.extractTransformation=function(c,d,h){var g=c.state;c=c.device;d="forward-down"===d.tiltDirection?1:-1;"standard"===c.deviceType?(h.translation[0]=l(g.axes[0]),h.translation[1]=l(g.axes[1]),h.translation[2]=l(g.buttons[7])-l(g.buttons[6]),h.heading=
l(g.axes[2]),h.tilt=l(g.axes[3])):"spacemouse"===c.deviceType&&(h.translation[0]=1.2*l(g.axes[0]),h.translation[1]=1.2*l(g.axes[1]),h.translation[2]=2*-l(g.axes[2]),h.heading=1.2*l(g.axes[5]),h.tilt=1.2*l(g.axes[3]));h.tilt*=d;n.vec3.scale(h.translation,h.translation,1);return h};c.extractTransformationKeyboard=function(c,d){d.translation[0]=c[1]-c[0];d.translation[1]=c[3]-c[2];d.translation[2]=c[4]-c[5];d.heading=c[7]-c[6];d.tilt=c[8]-c[9];return d};c.isZeroTransformation=function(c){return 0===
c.translation[0]&&0===c.translation[1]&&0===c.translation[2]&&0===c.heading&&0===c.tilt}})},"esri/views/3d/input/handlers/KeyboardNavigation":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../state/controllers/GamepadKeyboardController","../../../input/InputHandler"],function(p,c,n,l,k){Object.defineProperty(c,"__esModule",{value:!0});p=function(d){function c(c,f,b){var a,e=d.call(this,!0)||this;e.view=c;e.disableMovements={pan:!0,zoom:!0,ascend:!0,rotate:!1,
mode:"local"};e.keyToNumber=(a={},a[f.left]=0,a[f.right]=1,a[f.forward]=2,a[f.backward]=3,a[f.up]=4,a[f.down]=5,a[f.headingLeft]=6,a[f.headingRight]=7,a[f.tiltUp]=8,a[f.tiltDown]=9,a);e.registerIncoming("key-down",b,function(a){return e.handleKeyDown(a)});e.registerIncoming("key-up",b,function(a){return e.handleKeyUp(a)});e.registerIncoming("blur",b,function(){return e.handleBlur()});return e}n(c,d);c.prototype.handleKeyDown=function(d){var c=this.keyToNumber[d.data.key];null!=c&&(this.cameraControllerKeyboard&&
this.cameraControllerKeyboard.active||(this.cameraControllerKeyboard=new l.GamepadKeyboardController(this.view,void 0,this.disableMovements),this.view.state.switchCameraController(this.cameraControllerKeyboard)),this.cameraControllerKeyboard.active&&(this.cameraControllerKeyboard.activateDirection(c),d.stopPropagation()))};c.prototype.handleBlur=function(){this.cameraControllerKeyboard&&this.cameraControllerKeyboard.active&&(this.cameraControllerKeyboard.finishController(),this.cameraControllerKeyboard=
null)};c.prototype.handleKeyUp=function(d){var c=this.keyToNumber[d.data.key];null!=c&&this.cameraControllerKeyboard&&this.cameraControllerKeyboard.active&&(this.cameraControllerKeyboard.deactivateDirection(c),d.stopPropagation())};return c}(k.InputHandler);c.KeyboardNavigation=p})},"esri/views/3d/input/handlers/MouseWheelZoom":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/screenUtils ../../state/controllers/global/ZoomStepController ../../state/controllers/local/ZoomStepController ../../../input/InputHandler".split(" "),
function(p,c,n,l,k,d,h){Object.defineProperty(c,"__esModule",{value:!0});p=function(c){function f(b,a){var d=c.call(this,!0)||this;d.view=b;d.registerIncoming("mouse-wheel",a,function(a){return d.handleMouseWheel(a)});return d}n(f,c);f.prototype.handleMouseWheel=function(b){var a=b.data;this.cameraController&&this.cameraController.active||(this.cameraController=this.view.state.isGlobal?new k.ZoomStepController(this.view,"interaction"):new d.ZoomStepController(this.view,"interaction"),this.view.state.switchCameraController(this.cameraController));
this.cameraController.zoomStep(-1/60*a.deltaY,l.createScreenPointArray(a.x,a.y));b.stopPropagation()};return f}(h.InputHandler);c.MouseWheelZoom=p})},"esri/views/3d/input/handlers/PinchAndPanNavigation":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../state/controllers/global/PinchAndPanController ../../state/controllers/local/PinchAndPanController ../../../input/InputHandler ../../../input/handlers/support".split(" "),function(p,c,n,l,k,d,h){Object.defineProperty(c,
"__esModule",{value:!0});p=function(d){function c(b,a,c){var e=d.call(this,!0)||this;e.view=b;e.pointerAction=a;e.lastEndTimestamp=0;e.lastTimestamp=0;e.registerIncoming("drag",c,function(a){return e.handleDrag(a)});return e}n(c,d);c.prototype.handleDrag=function(b){if("mouse"!==b.data.pointerType||h.eventMatchesMousePointerAction(b.data,this.pointerAction)){var a=b.timestamp-this.lastEndTimestamp,a=this.momentum&&this.momentum.active&&40>a;switch(b.data.action){case "start":case "update":if(a)break;
this.controller&&this.controller.active?2<b.data.timestamp-this.lastTimestamp&&(this.controller.update(b.data),this.lastTimestamp=b.timestamp):this.startController(b);break;case "end":case "removed":this.endController(b,!0);break;case "added":this.endController(b,!1),this.startController(b)}b.stopPropagation()}};c.prototype.endController=function(b,a){this.controller&&this.controller.active&&(this.lastEndTimestamp=b.timestamp,b=this.controller.end(b.data),a&&b&&(this.momentum=b,this.view.state.switchCameraController(this.momentum)));
this.controller=null};c.prototype.startController=function(b){this.controller=this.createController();this.view.state.switchCameraController(this.controller);this.controller.begin(b.data);this.lastTimestamp=b.timestamp};c.prototype.createController=function(){return this.view.state.isGlobal?new l.PinchAndPanController(this.view,this.view.sceneIntersectionHelper):new k.PinchAndPanController(this.view,this.view.sceneIntersectionHelper)};return c}(d.InputHandler);c.PinchAndPanNavigation=p})},"esri/views/3d/state/controllers/global/PinchAndPanController":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/screenUtils ../../../../../core/libs/gl-matrix-2/mat4 ../../../../../core/libs/gl-matrix-2/mat4f64 ../../../../../core/libs/gl-matrix-2/vec2 ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../camera/constraintUtils ../../../input/util ../InteractiveController ../momentum/PanPlanarMomentumController ../momentum/PanSphericalMomentumController ../momentum/RotationMomentumController ../momentum/ZoomPlanarMomentumController ../momentum/ZoomSphericalMomentumController ../../utils/navigationUtils ../../utils/navigationUtils ../../../support/geometryUtils ../../../support/mathUtils ../../../webgl-engine/lib/Camera ../../../../navigation/PanPlanarMomentumEstimator ../../../../navigation/PanSphericalMomentumEstimator ../../../../navigation/RotationMomentumEstimator ../../../../navigation/ZoomMomentumEstimator".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z,A,B,D,C){Object.defineProperty(c,"__esModule",{value:!0});p=function(c){function e(b,e){var m=c.call(this)||this;m.view=b;m.intersectionHelper=e;m.smoothRotation=new a.ExponentialFalloff(.05);m.rotationAxis=f.vec3f64.create();m.panningPlane=v.plane.create();m.smoothScaling=new a.ExponentialFalloff(.05);m.zoomCenterScreen=l.createScreenPointArray();m.zoomMomentumEstimator=new C.ZoomMomentumEstimator;m.rotationMomentumEstimator=new D.RotationMomentumEstimator;
m.panSphericalMomentumEstimator=new B.PanSphericalMomentumEstimator;m.panPlanarMomentumEstimator=new A.PanPlanarMomentumEstimator;m.adjustedSphere=v.sphere.create();m.tmp3d=f.vec3f64.create();m.tmpMat=d.mat4f64.create();m.tmpAxisAngle=v.axisAngle.create();m.tmpScreenPointArray=l.createScreenPointArray();m.beginScreenPoint=l.createScreenPointArray();m.beginScenePoint=f.vec3f64.create();m.screenPickPoint=l.createScreenPointArray();m.panMode=w.PanMode.Horizontal;m.tmpInteractionDirection=f.vec3f64.create();
m.constraintOptions={selection:15,interactionType:0,interactionFactor:0,interactionStartCamera:new z,interactionDirection:null,tiltMode:0};return m}n(e,c);e.prototype.begin=function(a){if(this.active){this.beginHeading=-y.cyclicalPI.normalize(y.deg2rad(this.view.camera.heading));this.beginRadius=a.radius;this.pointerCount=a.pointers.size;this.beginAngle=a.angle;this.smoothRotation.reset();l.screenPointObjectToArray(a.center,this.screenPickPoint);h.vec2.copy(this.beginScreenPoint,this.screenPickPoint);
var b=x.pickPointAndInitSphere(this.intersectionHelper,this.beginCamera,this.screenPickPoint,!0);this.scenePickPoint=b.scenePickPoint;this.sphere=b.sphere;g.vec3.copy(this.beginScenePoint,this.scenePickPoint);this.panMode=x.decidePanMode(this.beginCamera,this.sphere,this.scenePickPoint);this.panMode===w.PanMode.Vertical&&(this.beginCamera.aboveGround?this.preparePlanarPanModeOverground(a):this.preparePlanarPanMode(a));this.constraintOptions.interactionStartCamera.copyFrom(this.beginCamera)}};e.prototype.preparePlanarPanModeOverground=
function(a){var b=g.vec3.negate(this.tmp3d,this.beginCamera.viewForward);v.plane.fromPositionAndNormal(this.scenePickPoint,b,this.panningPlane);var d=l.createScreenPointArray(this.screenPickPoint[0],0),b=f.vec3f64.create(),c=g.vec3.length(this.beginCamera.eye);this.adjustedSphere.radius=c<this.sphere.radius?c-100:this.sphere.radius;x.sphereOrPlanePointFromScreenPoint(this.adjustedSphere,this.beginCamera,d,b);d=l.createRenderScreenPointArray3();this.beginCamera.projectPoint(b,d);this.screenPickPoint[1]=
Math.min(this.screenPickPoint[1],.9*d[1]);this.intersectionHelper.intersectScreen(this.screenPickPoint,this.scenePickPoint)&&v.plane.fromPositionAndNormal(this.scenePickPoint,this.panningPlane,this.panningPlane);a=l.screenPointObjectToArray(a.center,this.tmpScreenPointArray);x.intersectPlaneFromScreenPoint(this.panningPlane,this.beginCamera,a,this.beginScenePoint)};e.prototype.preparePlanarPanMode=function(a){var b=g.vec3.negate(this.tmp3d,this.beginCamera.viewForward);v.plane.fromPositionAndNormal(this.scenePickPoint,
b,this.panningPlane);var d=v.sphere.angleToSilhouette(this.sphere,this.currentCamera.eye),b=v.axisAngle.fromPoints(this.currentCamera.eye,this.scenePickPoint,this.tmpAxisAngle),d=-b[3]-(this.currentCamera.aboveGround?.25:.025)*d;if(0<d){var c=k.mat4.identity(this.tmpMat);k.mat4.rotate(c,c,-d,b);g.vec3.subtract(this.scenePickPoint,this.scenePickPoint,this.sphere.center);g.vec3.transformMat4(this.scenePickPoint,this.scenePickPoint,c);g.vec3.add(this.scenePickPoint,this.scenePickPoint,this.sphere.center);
v.plane.setOffsetFromPoint(this.panningPlane,this.scenePickPoint,this.panningPlane);a=l.screenPointObjectToArray(a.center,this.tmpScreenPointArray);x.intersectPlaneFromScreenPoint(this.panningPlane,this.beginCamera,a,this.beginScenePoint)}};e.prototype.update=function(a){if(this.active){this.currentCamera.copyFrom(this.beginCamera);var b=1<a.pointers.size;this.panMode===w.PanMode.Horizontal?(b&&this.zoomSpherical(a),this.panningSpherical(a),b&&this.rotateSpherical(a)):(b&&this.zoomPlanar(a),this.panningPlanar(a),
b&&this.rotatePlanar(a));this.currentCamera.markViewDirty()}};e.prototype.end=function(a){a.pointers.size===this.pointerCount&&this.update(a);this.finishController();if(a=this.zoomMomentumEstimator.evaluateMomentum())return this.panMode===w.PanMode.Horizontal?new r.ZoomSphericalMomentumController(this.view,a,this.zoomCenterScreen,this.beginScenePoint,this.sphere.radius):new t.ZoomPlanarMomentumController(this.view,a,this.beginScenePoint);if(a=this.rotationMomentumEstimator.evaluateMomentum())return new u.RotationMomentumController(this.view,
a,this.sphere.center,this.rotationAxis);if(this.panMode===w.PanMode.Horizontal){if(a=this.panSphericalMomentumEstimator.evaluateMomentum())return new q.PanSphericalMomentumController(this.view,a)}else if(a=this.panPlanarMomentumEstimator.evaluateMomentum())return new m.PanPlanarMomentumController(this.view,a);return null};e.prototype.zoomSpherical=function(a){var d=this.beginRadius/a.radius;this.smoothScaling.gain=.001875*Math.min(Math.max(a.radius,40),120);this.smoothScaling.update(d);x.applyZoomOnSphere(this.sphere,
this.currentCamera,this.smoothScaling.value);l.screenPointObjectToArray(a.center,this.zoomCenterScreen);this.zoomMomentumEstimator.add(this.smoothScaling.value,.001*a.timestamp);this.constraintOptions.interactionType=1;this.constraintOptions.interactionFactor=b.pixelDistanceToInteractionFactor(a.radius-this.beginRadius);b.applyAll(this.view,this.currentCamera,this.constraintOptions)};e.prototype.panningSpherical=function(a){var d=l.screenPointObjectToArray(a.center,this.tmpScreenPointArray);x.sphereOrPlanePointFromScreenPoint(this.sphere,
this.currentCamera,d,this.tmp3d);x.preserveHeadingThreshold(this.beginScenePoint,g.vec3.dot(this.currentCamera.up,this.beginScenePoint),this.sphere.radius,this.beginHeading,this.view.camera.tilt,this.beginCamera)?(x.applyPanSphericalPreserveHeading(this.sphere,this.currentCamera,this.beginScenePoint,this.tmp3d,this.beginHeading,this.view.camera.tilt,!1),this.panSphericalMomentumEstimator.addMomentumPreserveHeading(d,this.tmp3d,.001*a.timestamp,this.beginCamera,this.sphere,this.beginHeading,this.view.camera.tilt)):
(x.applyPanSphericalDirectRotation(this.sphere,this.currentCamera,this.beginScenePoint,this.tmp3d,this.view.camera.tilt,!1),this.panSphericalMomentumEstimator.addMomentumDirectRotation(d,this.tmp3d,.001*a.timestamp,this.beginCamera,this.sphere.radius,this.view.camera.tilt));this.constraintOptions.interactionType=4;this.constraintOptions.interactionFactor=b.pixelDistanceToInteractionFactor(this.screenPickPoint,d);b.applyAll(this.view,this.currentCamera,this.constraintOptions)};e.prototype.rotateSpherical=
function(a){g.vec3.normalize(this.rotationAxis,this.scenePickPoint);this.currentCamera.aboveGround||g.vec3.negate(this.rotationAxis,this.rotationAxis);var d=this.smoothRotation.value,c=x.normalizeRotationDelta(a.angle-d),d=d+c;this.smoothRotation.gain=.00125*Math.min(Math.max(a.radius,40),120);this.smoothRotation.update(d);c=this.smoothRotation.value-this.beginAngle;this.rotationMomentumEstimator.add(c,.001*a.timestamp);x.applyRotation(this.currentCamera,this.sphere.center,v.axisAngle.wrapAxisAngle(this.rotationAxis,
c));this.constraintOptions.interactionType=2;this.constraintOptions.interactionFactor=b.pixelDistanceToInteractionFactor(a.radius*d);b.applyAll(this.view,this.currentCamera,this.constraintOptions)};e.prototype.panningPlanar=function(a){var d=l.screenPointObjectToArray(a.center,this.tmpScreenPointArray);x.intersectPlaneFromScreenPoint(this.panningPlane,this.currentCamera,d,this.tmp3d)&&(x.applyPanPlanar(this.currentCamera,this.beginScenePoint,this.tmp3d),this.panPlanarMomentumEstimator.add(d,this.tmp3d,
.001*a.timestamp),this.constraintOptions.interactionType=4,this.constraintOptions.interactionFactor=b.pixelDistanceToInteractionFactor(this.beginScreenPoint,d),this.constraintOptions.interactionDirection=this.view.renderCoordsHelper.worldUpAtPosition(this.currentCamera.eye,this.tmpInteractionDirection),b.applyAll(this.view,this.currentCamera,this.constraintOptions),this.constraintOptions.interactionDirection=null)};e.prototype.zoomPlanar=function(a){var d=this.beginRadius/a.radius;this.smoothScaling.gain=
.001875*Math.min(Math.max(a.radius,40),120);this.smoothScaling.update(d);this.zoomMomentumEstimator.add(this.smoothScaling.value,.001*a.timestamp);x.applyZoomToPoint(this.currentCamera,this.beginScenePoint,this.smoothScaling.value,this.view.state.constraints.minimumPoiDistance);this.constraintOptions.interactionType=1;this.constraintOptions.interactionFactor=b.pixelDistanceToInteractionFactor(a.radius-this.beginRadius);b.applyAll(this.view,this.currentCamera,this.constraintOptions)};e.prototype.rotatePlanar=
function(a){g.vec3.copy(this.rotationAxis,this.beginScenePoint);this.currentCamera.aboveGround||g.vec3.negate(this.rotationAxis,this.rotationAxis);var d=this.smoothRotation.value,c=a.angle-d,c=x.normalizeRotationDelta(c);this.smoothRotation.gain=.00125*Math.min(Math.max(a.radius,40),120);this.smoothRotation.update(d+c);d=this.smoothRotation.value-this.beginAngle;this.rotationMomentumEstimator.add(d,.001*a.timestamp);x.applyRotation(this.currentCamera,this.sphere.center,v.axisAngle.wrapAxisAngle(this.rotationAxis,
d));this.constraintOptions.interactionType=2;this.constraintOptions.interactionFactor=b.pixelDistanceToInteractionFactor(a.radius*d);b.applyAll(this.view,this.currentCamera,this.constraintOptions)};return e}(e.InteractiveController);c.PinchAndPanController=p})},"esri/views/3d/input/util":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(c){this._gain=c}c.prototype.reset=function(c){this._value=c};Object.defineProperty(c.prototype,
"gain",{set:function(c){this._gain=c},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"value",{get:function(){return void 0===this._value?0:this._value},enumerable:!0,configurable:!0});c.prototype.update=function(c){this._value=void 0===this._value?c:this._gain*c+(1-this._gain)*this._value};return c}();c.ExponentialFalloff=p})},"esri/views/3d/state/controllers/momentum/PanPlanarMomentumController":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ./MomentumController".split(" "),
function(p,c,n,l,k,d){Object.defineProperty(c,"__esModule",{value:!0});p=function(d){function c(c,b){c=d.call(this,c,4)||this;c.momentum=b;c.tmpPan=k.vec3f64.create();return c}n(c,d);c.prototype.momentumStep=function(d,b){d=this.momentum.value(d);l.vec3.scale(this.tmpPan,this.momentum.direction,d);l.vec3.subtract(b.eye,b.eye,this.tmpPan);l.vec3.subtract(b.center,b.center,this.tmpPan);b.markViewDirty();this.constraintOptions.interactionDirection=this.tmpPan};return c}(d.MomentumController);c.PanPlanarMomentumController=
p})},"esri/views/3d/state/controllers/momentum/MomentumController":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../camera/constraintUtils ../AnimationController ../../../webgl-engine/lib/Camera".split(" "),function(p,c,n,l,k,d){Object.defineProperty(c,"__esModule",{value:!0});p=function(c){function g(f,b){b=c.call(this)||this;b.view=f;b.beginCamera=new d;b.elapsedTimeSec=0;b.constraintOptions={selection:15,interactionType:4,interactionFactor:0,interactionStartCamera:new d,
interactionDirection:null,tiltMode:0};return b}n(g,c);Object.defineProperty(g.prototype,"steppingFinished",{get:function(){return this.momentum.isFinished(this.elapsedTimeSec)},enumerable:!0,configurable:!0});g.prototype.onControllerStart=function(d){this.beginCamera.copyFrom(d);this.constraintOptions.interactionStartCamera=this.beginCamera;c.prototype.onControllerStart.call(this,d)};g.prototype.stepController=function(d,b){b.copyViewFrom(this.beginCamera);this.elapsedTimeSec+=d;this.momentumStep(this.elapsedTimeSec,
b);l.applyAll(this.view,b,this.constraintOptions)};return g}(k.AnimationController);c.MomentumController=p})},"esri/views/3d/state/controllers/momentum/PanSphericalMomentumController":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ./MomentumController ../../utils/navigationUtils".split(" "),function(p,c,n,l,k,d,h){Object.defineProperty(c,"__esModule",{value:!0});var g=k.vec3f64.create(),
f=k.vec3f64.create();p=function(b){function a(a,d){a=b.call(this,a,4)||this;a.momentum=d;return a}n(a,b);a.prototype.momentumStep=function(a,b){var d=this.momentum.value1(a);a=this.momentum.value2(a);l.vec3.copy(f,b.eye);l.vec3.normalize(f,f);l.vec3.cross(this.momentum.axis2,f,this.momentum.axis1);h.applyRotationWithTwoAxes(b,g,this.momentum.axis1,d,this.momentum.axis2,a)};return a}(d.MomentumController);c.PanSphericalMomentumController=p})},"esri/views/3d/state/controllers/momentum/RotationMomentumController":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ./MomentumController ../../utils/navigationUtils ../../../support/geometryUtils".split(" "),
function(p,c,n,l,k,d,h,g){Object.defineProperty(c,"__esModule",{value:!0});p=function(d){function b(a,b,c,f){a=d.call(this,a,2)||this;a.momentum=b;a.axis=k.vec3f64.create();a.center=k.vec3f64.create();l.vec3.copy(a.axis,f);l.vec3.copy(a.center,c);return a}n(b,d);b.prototype.momentumStep=function(a,b){a=this.momentum.value(a);h.applyRotation(b,this.center,g.axisAngle.wrapAxisAngle(this.axis,a))};return b}(d.MomentumController);c.RotationMomentumController=p})},"esri/views/3d/state/controllers/momentum/ZoomPlanarMomentumController":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ./MomentumController ../../utils/navigationUtils ../../../support/mathUtils".split(" "),
function(p,c,n,l,k,d,h,g){Object.defineProperty(c,"__esModule",{value:!0});p=function(d){function b(a,b,c){a=d.call(this,a,1)||this;a.momentum=b;a.zoomCenter=k.vec3f64.create();l.vec3.copy(a.zoomCenter,c);a.constraintOptions.interactionDirection=k.vec3f64.create();return a}n(b,d);b.prototype.momentumStep=function(a,b){l.vec3.copy(this.constraintOptions.interactionDirection,b.eye);a=this.momentum.valueDelta(0,a);h.applyZoomToPoint(b,this.zoomCenter,a,this.view.state.constraints.minimumPoiDistance);
this.constraintOptions.interactionDirection=g.directionFromTo(this.constraintOptions.interactionDirection,b.eye,this.constraintOptions.interactionDirection)};return b}(d.MomentumController);c.ZoomPlanarMomentumController=p})},"esri/views/3d/state/controllers/momentum/ZoomSphericalMomentumController":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/screenUtils ../../../../../core/libs/gl-matrix-2/vec2 ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../camera/constraintUtils ./MomentumController ../../utils/navigationUtils ../../../support/geometryUtils".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a){Object.defineProperty(c,"__esModule",{value:!0});p=function(c){function e(b,e,f,m,g){b=c.call(this,b,1)||this;b.momentum=e;b.screenCenter=l.createScreenPointArray();b.sceneCenter=h.vec3f64.create();b.tmpSceneCenter=h.vec3f64.create();b.tmpZoomAxisAngle=a.axisAngle.create();b.sphere=a.sphere.create();k.vec2.copy(b.screenCenter,f);d.vec3.copy(b.sceneCenter,m);b.sphere.radius=g;return b}n(e,c);e.prototype.momentumStep=function(d,c){d=this.momentum.valueDelta(0,d);b.applyZoomOnSphere(this.sphere,
c,d);this.constraintOptions.interactionType=1;g.applyAll(this.view,c,this.constraintOptions);b.sphereOrPlanePointFromScreenPoint(this.sphere,c,this.screenCenter,this.tmpSceneCenter);a.axisAngle.fromPoints(this.sceneCenter,this.tmpSceneCenter,this.tmpZoomAxisAngle);b.applyRotation(c,this.sphere.center,this.tmpZoomAxisAngle);this.constraintOptions.interactionType=4};return e}(f.MomentumController);c.ZoomSphericalMomentumController=p})},"esri/views/navigation/PanPlanarMomentumEstimator":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/libs/gl-matrix-2/vec3 ../../core/libs/gl-matrix-2/vec3f64 ./FilteredFiniteDifference ./Momentum".split(" "),
function(p,c,n,l,k,d,h){Object.defineProperty(c,"__esModule",{value:!0});var g=function(d){function b(a,b,c,f,g){a=d.call(this,a,b,c)||this;a.sceneVelocity=f;a.direction=g;return a}n(b,d);b.prototype.value=function(a){return d.prototype.valueFromInitialVelocity.call(this,this.sceneVelocity,a)};return b}(h.Momentum);c.PanPlanarMomentum=g;p=function(){function c(b,a,c){void 0===b&&(b=300);void 0===a&&(a=12);void 0===c&&(c=.84);this.minimumInitialVelocity=b;this.stopVelocity=a;this.friction=c;this.time=
new d.FilteredFiniteDifference(.6);this.screen=[new d.FilteredFiniteDifference(.4),new d.FilteredFiniteDifference(.4)];this.scene=[new d.FilteredFiniteDifference(.6),new d.FilteredFiniteDifference(.6),new d.FilteredFiniteDifference(.6)];this.tmpDirection=k.vec3f64.create()}c.prototype.add=function(b,a,d){this.time.hasLastValue&&.015>this.time.computeDelta(d)||(this.screen[0].update(b[0]),this.screen[1].update(b[1]),this.scene[0].update(a[0]),this.scene[1].update(a[1]),this.scene[2].update(a[2]),this.time.update(d))};
c.prototype.reset=function(){this.screen[0].reset();this.screen[1].reset();this.scene[0].reset();this.scene[1].reset();this.scene[2].reset();this.time.reset()};c.prototype.evaluateMomentum=function(){if(!this.screen[0].hasFilteredDelta)return null;var b=this.screen[0].filteredDelta,a=this.screen[1].filteredDelta,b=Math.sqrt(b*b+a*a)/this.time.filteredDelta;return Math.abs(b)<this.minimumInitialVelocity?null:this.createMomentum(b,this.stopVelocity,this.friction)};c.prototype.createMomentum=function(b,
a,d){l.vec3.set(this.tmpDirection,this.scene[0].filteredDelta,this.scene[1].filteredDelta,this.scene[2].filteredDelta);var c=l.vec3.length(this.tmpDirection);0<c&&l.vec3.scale(this.tmpDirection,this.tmpDirection,1/c);return new g(b,a,d,c/this.time.filteredDelta,this.tmpDirection)};return c}();c.PanPlanarMomentumEstimator=p})},"esri/views/navigation/FilteredFiniteDifference":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(c){this.gain=
c}c.prototype.update=function(c){if(this.hasLastValue){var k=this.computeDelta(c);this.updateDelta(k)}this.lastValue=c};c.prototype.reset=function(){this.filteredDelta=this.lastValue=void 0};Object.defineProperty(c.prototype,"hasLastValue",{get:function(){return void 0!==this.lastValue},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"hasFilteredDelta",{get:function(){return void 0!==this.filteredDelta},enumerable:!0,configurable:!0});c.prototype.computeDelta=function(c){return c-
this.lastValue};c.prototype.updateDelta=function(c){this.filteredDelta=this.hasFilteredDelta?(1-this.gain)*this.filteredDelta+this.gain*c:c};return c}();c.FilteredFiniteDifference=p})},"esri/views/navigation/Momentum":function(){define(["require","exports","../../core/tsSupport/extendsHelper"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(c,d,h){this._initialVelocity=c;this._stopVelocity=d;this._friction=h;this._duration=Math.abs(Math.log(Math.abs(this._initialVelocity)/
this._stopVelocity)/Math.log(1-this._friction))}Object.defineProperty(c.prototype,"duration",{get:function(){return this._duration},enumerable:!0,configurable:!0});c.prototype.isFinished=function(c){return c>this.duration};Object.defineProperty(c.prototype,"friction",{get:function(){return this._friction},enumerable:!0,configurable:!0});c.prototype.value=function(c){return this.valueFromInitialVelocity(this._initialVelocity,c)};c.prototype.valueDelta=function(c,d){var h=this.value(c);return this.value(c+
d)-h};c.prototype.valueFromInitialVelocity=function(c,d){d=Math.min(d,this.duration);var h=1-this.friction;return c*(Math.pow(h,d)-1)/Math.log(h)};return c}();c.Momentum=p})},"esri/views/navigation/PanSphericalMomentumEstimator":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/libs/gl-matrix-2/vec2f64 ../../core/libs/gl-matrix-2/vec3 ../../core/libs/gl-matrix-2/vec3f64 ../3d/state/utils/navigationUtils ./FilteredFiniteDifference ./FilteredValue ./Momentum".split(" "),
function(p,c,n,l,k,d,h,g,f,b){Object.defineProperty(c,"__esModule",{value:!0});var a=function(a){function b(b,d,c,e,f,m,g){void 0===m&&(m=0);b=a.call(this,b,d,c)||this;b.angularVelocity1=e;b.axis1=f;b.angularVelocity2=m;b.axis2=g;return b}n(b,a);b.prototype.value1=function(b){return a.prototype.valueFromInitialVelocity.call(this,this.angularVelocity1,b)};b.prototype.value2=function(b){return a.prototype.valueFromInitialVelocity.call(this,this.angularVelocity2,b)};return b}(b.Momentum);c.PanSphericalMomentum=
a;p=function(){function b(a,b,c){void 0===a&&(a=300);void 0===b&&(b=12);void 0===c&&(c=.84);this.minimumInitialVelocity=a;this.stopVelocity=b;this.friction=c;this.tmpAxis1=d.vec3f64.create();this.tmpAxis2=d.vec3f64.create();this.tmpAngles=l.vec2f64.create();this.time=new g.FilteredFiniteDifference(.3);this.screen=[new g.FilteredFiniteDifference(.4),new g.FilteredFiniteDifference(.4)];this.angle1=new f.FilteredValue(.6);this.angle2=new f.FilteredValue(.6);this.axis1=d.vec3f64.create();this.axis2=d.vec3f64.create();
this.lastScene=d.vec3f64.create()}b.prototype.addMomentumDirectRotation=function(a,b,d,c,e,f){if(this.time.hasLastValue){if(.01>this.time.computeDelta(d))return;c=h.rotationAngleAndAxisDirectRotation(this.lastScene,b,this.tmpAxis2,c,e,f);this.angle2.update(0);1E-5>k.vec3.squaredLength(this.tmpAxis2)?c=0:k.vec3.normalize(this.axis1,this.tmpAxis2);this.angle1.update(c);k.vec3.copy(this.lastScene,b)}this.screen[0].update(a[0]);this.screen[1].update(a[1]);this.time.update(d)};b.prototype.addMomentumPreserveHeading=
function(a,b,d,c,e,f,g){if(this.time.hasLastValue){if(.01>this.time.computeDelta(d))return;h.rotationAnglesAndAxesHeadingPreserving(this.lastScene,b,this.tmpAxis2,this.tmpAxis1,this.tmpAngles,c,e,f,g,!1);1E-5>k.vec3.squaredLength(this.tmpAxis2)?(this.angle1.update(0),this.angle2.update(0)):(this.angle1.update(this.tmpAngles[1]),this.angle2.update(this.tmpAngles[0]),k.vec3.normalize(this.axis1,this.tmpAxis1),k.vec3.normalize(this.axis2,this.tmpAxis2));k.vec3.copy(this.lastScene,b)}this.screen[0].update(a[0]);
this.screen[1].update(a[1]);this.time.update(d)};b.prototype.reset=function(){this.screen[0].reset();this.screen[1].reset();this.angle1.reset();this.angle2.reset();this.time.reset()};b.prototype.evaluateMomentum=function(){if(!this.screen[0].hasFilteredDelta)return null;var a=this.screen[0].filteredDelta,b=this.screen[1].filteredDelta,a=Math.sqrt(a*a+b*b)/this.time.filteredDelta;return Math.abs(a)<this.minimumInitialVelocity?null:this.createMomentum(a,this.stopVelocity,this.friction)};b.prototype.createMomentum=
function(b,d,c){return new a(b,d,c,this.angle1.filteredValue/this.time.filteredDelta,this.axis1,this.angle2.filteredValue/this.time.filteredDelta,this.axis2)};return b}();c.PanSphericalMomentumEstimator=p})},"esri/views/navigation/FilteredValue":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(c){this.gain=c}c.prototype.update=function(c){this.filteredValue=this.hasFilteredValue?(1-this.gain)*this.filteredValue+this.gain*
c:c};c.prototype.reset=function(){this.filteredValue=void 0};Object.defineProperty(c.prototype,"hasFilteredValue",{get:function(){return void 0!==this.filteredValue},enumerable:!0,configurable:!0});return c}();c.FilteredValue=p})},"esri/views/navigation/RotationMomentumEstimator":function(){define(["require","exports","../../core/tsSupport/extendsHelper","./MomentumEstimator"],function(p,c,n,l){Object.defineProperty(c,"__esModule",{value:!0});p=function(c){function d(d,g,f,b){void 0===d&&(d=3);void 0===
g&&(g=.01);void 0===f&&(f=.95);void 0===b&&(b=12);return c.call(this,d,g,f,b)||this}n(d,c);d.prototype.add=function(d,g){if(this.value.hasLastValue){var f=this.value.lastValue;for(d-=f;d>Math.PI;)d-=2*Math.PI;for(;d<-Math.PI;)d+=2*Math.PI;d=f+d}c.prototype.add.call(this,d,g)};return d}(l.MomentumEstimator);c.RotationMomentumEstimator=p})},"esri/views/navigation/MomentumEstimator":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/mathUtils ./FilteredFiniteDifference ./Momentum".split(" "),
function(p,c,n,l,k,d){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(d,c,b,a){void 0===d&&(d=2.5);void 0===c&&(c=.01);void 0===b&&(b=.95);void 0===a&&(a=12);this.minimumInitialVelocity=d;this.stopVelocity=c;this.friction=b;this.maxVelocity=a;this.value=new k.FilteredFiniteDifference(.8);this.time=new k.FilteredFiniteDifference(.3)}c.prototype.add=function(d,c){if(this.time.hasLastValue){if(.01>this.time.computeDelta(c))return;if(this.value.hasFilteredDelta){var b=this.value.computeDelta(d);
0>this.value.filteredDelta*b&&this.value.reset()}}this.time.update(c);this.value.update(d)};c.prototype.reset=function(){this.value.reset();this.time.reset()};c.prototype.evaluateMomentum=function(){if(!this.value.hasFilteredDelta)return null;var d=this.value.filteredDelta/this.time.filteredDelta,d=l.clamp(d,-this.maxVelocity,this.maxVelocity);return Math.abs(d)<this.minimumInitialVelocity?null:this.createMomentum(d,this.stopVelocity,this.friction)};c.prototype.createMomentum=function(c,f,b){return new d.Momentum(c,
f,b)};return c}();c.MomentumEstimator=p})},"esri/views/navigation/ZoomMomentumEstimator":function(){define(["require","exports","../../core/tsSupport/extendsHelper","./Momentum","./MomentumEstimator"],function(p,c,n,l,k){Object.defineProperty(c,"__esModule",{value:!0});var d=function(d){function c(c,b,a){return d.call(this,c,b,a)||this}n(c,d);c.prototype.value=function(c){c=d.prototype.value.call(this,c);return Math.exp(c)};c.prototype.valueDelta=function(c,b){var a=d.prototype.value.call(this,c);
c=d.prototype.value.call(this,c+b);return Math.exp(c-a)};return c}(l.Momentum);c.ZoomMomentum=d;p=function(c){function g(d,b,a,e){void 0===d&&(d=2.5);void 0===b&&(b=.01);void 0===a&&(a=.95);void 0===e&&(e=12);return c.call(this,d,b,a,e)||this}n(g,c);g.prototype.add=function(d,b){c.prototype.add.call(this,Math.log(d),b)};g.prototype.createMomentum=function(c,b,a){return new d(c,b,a)};return g}(k.MomentumEstimator);c.ZoomMomentumEstimator=p})},"esri/views/3d/state/controllers/local/PinchAndPanController":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/screenUtils ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../camera/constraintUtils ../../../input/util ../InteractiveController ../momentum/PanPlanarMomentumController ../momentum/RotationMomentumController ../momentum/ZoomPlanarMomentumController ../../utils/navigationUtils ../../../support/geometryUtils ../../../support/mathUtils ../../../webgl-engine/lib/Camera ../../../../navigation/PanPlanarMomentumEstimator ../../../../navigation/RotationMomentumEstimator ../../../../navigation/ZoomMomentumEstimator".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w){Object.defineProperty(c,"__esModule",{value:!0});var v;(function(a){a[a.Vertical=0]="Vertical";a[a.Horizontal=1]="Horizontal"})(v=c.PanMode||(c.PanMode={}));var y=d.vec3f64.fromValues(0,0,1),z=16/180*Math.PI;p=function(c){function f(a,b){var e=c.call(this)||this;e.view=a;e.intersectionHelper=b;e.rotationValueSmooth=new g.ExponentialFalloff(.05);e.scalingValueSmooth=new g.ExponentialFalloff(.05);e.planeHorizontal=q.plane.create();e.planeVertical=q.plane.create();
e.rotationMomentumEstimator=new x.RotationMomentumEstimator;e.panMomentumEstimator=new r.PanPlanarMomentumEstimator(300,12,.9);e.zoomMomentumEstimator=new w.ZoomMomentumEstimator;e.beginCenter=d.vec3f64.create();e.tmpPoints=[];e.beginCenterScreen=l.createScreenPointArray();e.tmpCentroid3d=d.vec3f64.create();e.tmpCentroid2d=l.createScreenPointArray();e.tmp2d=l.createScreenPointArray();e.constraintOptions={selection:15,interactionType:0,interactionFactor:0,interactionStartCamera:new t,interactionDirection:null,
tiltMode:0};return e}n(f,c);f.prototype.begin=function(a){if(this.active){this.beginRadius=a.radius;this.pointerCount=a.pointers.size;this.beginAngle=a.angle;this.rotationValueSmooth.reset();this.scalingValueSmooth.reset();l.screenPointObjectToArray(a.center,this.beginCenterScreen);q.plane.fromNormalAndOffset(y,0,this.planeHorizontal);var b=d.vec3f64.create();this.intersectionHelper.intersectScreenFreePointFallback(this.beginCenterScreen,b);var c=d.vec3f64.create();k.vec3.negate(c,this.beginCamera.viewForward);
var e=d.vec3f64.create();k.vec3.copy(e,y);var f=k.vec3.dot(c,e);this.panMode=u.asin(0>f?-f:f)>=z?v.Horizontal:v.Vertical;q.plane.setOffsetFromPoint(this.planeHorizontal,b,this.planeHorizontal);this.beginCamera.aboveGround||q.plane.negate(this.planeHorizontal,this.planeHorizontal);this.panMode===v.Vertical?(k.vec3.scale(e,e,f),k.vec3.subtract(this.planeVertical,c,e),k.vec3.normalize(this.planeVertical,this.planeVertical),q.plane.setOffsetFromPoint(this.planeVertical,b,this.planeVertical),this.computePlanePoints(a.pointers,
this.planeVertical,this.beginCamera,this.tmpPoints)):this.computePlanePoints(a.pointers,this.planeHorizontal,this.beginCamera,this.tmpPoints);m.centroid(this.tmpPoints,this.beginCenter);this.constraintOptions.interactionStartCamera.copyFrom(this.beginCamera)}};f.prototype.update=function(a){if(this.active){this.currentCamera.copyFrom(this.beginCamera);var b=1<a.pointers.size,d=this.panMode===v.Horizontal?this.planeHorizontal:this.planeVertical,c=this.beginCenter;if(b){var e=this.beginRadius/a.radius,
f=.001875*Math.min(Math.max(a.radius,40),120);this.scalingValueSmooth.gain=f;this.scalingValueSmooth.update(e);m.applyZoomToPoint(this.currentCamera,c,this.scalingValueSmooth.value,this.view.state.constraints.minimumPoiDistance);this.zoomMomentumEstimator.add(this.scalingValueSmooth.value,.001*a.timestamp);this.constraintOptions.interactionType=1;this.constraintOptions.interactionFactor=h.pixelDistanceToInteractionFactor(Math.abs(a.radius-this.beginRadius));h.applyAll(this.view,this.currentCamera,
this.constraintOptions)}this.computePlanePoints(a.pointers,d,this.currentCamera,this.tmpPoints);m.centroid(this.tmpPoints,this.tmpCentroid3d);l.screenPointObjectToArray(a.center,this.tmpCentroid2d);m.applyPanPlanar(this.currentCamera,c,this.tmpCentroid3d);this.panMomentumEstimator.add(this.tmpCentroid2d,this.tmpCentroid3d,.001*a.timestamp);this.constraintOptions.interactionType=4;this.constraintOptions.interactionFactor=h.pixelDistanceToInteractionFactor(this.beginCenterScreen,this.tmpCentroid2d);
h.applyAll(this.view,this.currentCamera,this.constraintOptions);b&&(b=this.planeHorizontal,d=this.rotationValueSmooth.value,e=m.normalizeRotationDelta(a.angle-d),f=.00125*Math.min(Math.max(a.radius,40),120),this.rotationValueSmooth.gain=f,this.rotationValueSmooth.update(d+e),f=this.rotationValueSmooth.value-this.beginAngle,this.rotationMomentumEstimator.add(f,.001*a.timestamp),m.applyRotation(this.currentCamera,c,q.axisAngle.wrapAxisAngle(b,f)),this.constraintOptions.interactionType=2,this.constraintOptions.interactionFactor=
h.pixelDistanceToInteractionFactor(Math.abs(a.radius*f)),h.applyAll(this.view,this.currentCamera,this.constraintOptions));this.currentCamera.markViewDirty()}};f.prototype.end=function(d){d.pointers.size===this.pointerCount&&this.update(d);this.finishController();return(d=this.zoomMomentumEstimator.evaluateMomentum())?new e.ZoomPlanarMomentumController(this.view,d,this.beginCenter):(d=this.rotationMomentumEstimator.evaluateMomentum())?new a.RotationMomentumController(this.view,d,this.beginCenter,this.planeHorizontal):
(d=this.panMomentumEstimator.evaluateMomentum())?new b.PanPlanarMomentumController(this.view,d):null};f.prototype.computePlanePoints=function(a,b,c,e){e.length=a.size;var f=this.tmp2d,g=0;a.forEach(function(a){f[0]=a.x;f[1]=a.y;void 0===e[g]&&(e[g]=d.vec3f64.create());m.intersectPlaneFromScreenPoint(b,c,f,e[g]);g+=1});return e};return f}(f.InteractiveController);c.PinchAndPanController=p})},"esri/views/3d/input/handlers/PointerDownCancelAnimation":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper",
"../../../input/InputHandler"],function(p,c,n,l){Object.defineProperty(c,"__esModule",{value:!0});p=function(c){function d(d,g){var f=c.call(this,!0)||this;f.view=d;f.registerIncoming("pointer-down",g,function(b){return f.view.state.stopActiveCameraController()});return f}n(d,c);return d}(l.InputHandler);c.PointerDownCancelAnimation=p})},"esri/views/3d/input/handlers/SingleKeyResetHeading":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","./SingleKey"],function(p,
c,n,l){Object.defineProperty(c,"__esModule",{value:!0});p=function(c){function d(d,g,f){f=c.call(this,"esri.views.3d.input.handlers.SingleKeyResetHeading",g,f)||this;f.view=d;f.key=g;return f}n(d,c);d.prototype.activate=function(){this.view.goTo({heading:0})};return d}(l.SingleKey);c.SingleKeyResetHeading=p})},"esri/views/3d/input/handlers/SingleKey":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(p,c,n,l){Object.defineProperty(c,
"__esModule",{value:!0});p=function(c){function d(d,g,f){var b=c.call(this,!0)||this;b.key=g;b.registerIncoming("key-down",f,function(a){return b._handleKeyDown(a)});return b}n(d,c);d.prototype._handleKeyDown=function(d){d.data.key===this.key&&(this.activate(),d.stopPropagation())};return d}(l.InputHandler);c.SingleKey=p})},"esri/views/3d/input/handlers/SingleKeyResetTilt":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","./SingleKey"],function(p,c,n,l){Object.defineProperty(c,
"__esModule",{value:!0});p=function(c){function d(d,g,f){f=c.call(this,"esri.views.3d.input.handlers.SingleKeyResetTilt",g,f)||this;f.view=d;f.key=g;return f}n(d,c);d.prototype.activate=function(){this.view.goTo({tilt:0})};return d}(l.SingleKey);c.SingleKeyResetTilt=p})},"esri/views/3d/input/handlers/TwoFingerTilt":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/screenUtils ../../state/controllers/RotateController ../../../input/InputHandler".split(" "),
function(p,c,n,l,k,d){Object.defineProperty(c,"__esModule",{value:!0});p=function(d){function c(c,b){void 0===b&&(b=!1);var a=d.call(this,!0)||this;a.view=c;a.invert=b;a.registerIncoming("vertical-two-finger-drag",function(b){return a.handleTwoFinger(b)});return a}n(c,d);c.prototype.handleTwoFinger=function(d){var b=l.createScreenPointArray(0,d.data.delta*(this.invert?-1:1));switch(d.data.action){case "begin":this.cameraController&&(this.cameraController.end(),this.cameraController=null);this.cameraController=
new k.RotateController(this.view,this.view.sceneIntersectionHelper,"center");this.view.state.switchCameraController(this.cameraController);this.cameraController.begin(b);break;case "update":this.cameraController&&this.cameraController.update(b);break;case "end":this.cameraController&&(this.cameraController.end(),this.cameraController=null)}};return c}(d.InputHandler);c.TwoFingerTilt=p})},"esri/views/input/BrowserEventSource":function(){define("require exports ../../core/has ../../core/screenUtils ../../core/libs/pep/pep ./keys ./gamepad/GamepadSource".split(" "),
function(p,c,n,l,k,d,h){Object.defineProperty(c,"__esModule",{value:!0});var g=n("trident"),f=n("edge"),b=n("chrome"),a=n("ff"),e=n("safari");p=function(){function c(a,b){var d=this;this.input=b;this._active={};this._activePointerCaptures=new Set;this._keyDownState=new Set;this._eventId=1;this._element=a;k.applyLocal(a);a.getAttribute("tabindex")||a.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,
"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost};this._initialCssTouchAction=a.style.touchAction;a.style.touchAction="none";this._element.addEventListener("keydown",this._preventAltKeyDefault);this._gamepadSource=new h.GamepadSource(a,this.input);this._gamepadSource.onEvent=function(a){return d._callback("gamepad",
a)}}c.prototype.destroy=function(){var a=this;this.activeEvents=this._callback=null;this._activePointerCaptures.forEach(function(b){a._releasePointerCaptureSafe(b)});this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null);this._activePointerCaptures=null;this._element.style.touchAction=this._initialCssTouchAction;this._element.removeEventListener("keydown",this._preventAltKeyDefault)};Object.defineProperty(c.prototype,"onEventReceived",{set:function(a){this._callback=a},enumerable:!0,
configurable:!0});Object.defineProperty(c.prototype,"activeEvents",{set:function(a){var b=this,d;for(d in this._active)a&&a.has(d)||(this._element.removeEventListener(m[d],this._active[d]),delete this._active[d]);a&&a.forEach(function(a){if(!b._active[a]&&m[a]){var d=(b._eventHandlers[a]||b._handleDefault).bind(b,a);b._element.addEventListener(m[a],d);b._active[a]=d}});this._gamepadSource.pollingEnabled=a&&a.has("gamepad")},enumerable:!0,configurable:!0});c.prototype.setPointerCapture=function(a,
b){b?(this._element.setPointerCapture(a.pointerId),this._activePointerCaptures.add(a.pointerId)):(this._releasePointerCaptureSafe(a.pointerId),this._activePointerCaptures.delete(a.pointerId))};c.prototype._releasePointerCaptureSafe=function(a){try{this._element.hasPointerCapture&&!this._element.hasPointerCapture(a)||this._element.releasePointerCapture(a)}catch(t){}};c.prototype._updateNormalizedPointerLikeEvent=function(a,b){a=l.createScreenPointFromNativeEvent(this._element,a);c.test.disableSubpixelCoordinates&&
(a.x=Math.round(a.x),a.y=Math.round(a.y));b.x=a.x;b.y=a.y;return b};c.prototype._handleKey=function(a,b){var c=d.eventKey(b);c&&"key-up"===a&&this._keyDownState.delete(c);b={native:b,key:c,repeat:c&&this._keyDownState.has(c)};c&&"key-down"===a&&this._keyDownState.add(b.key);this._callback(a,b)};c.prototype._handlePointer=function(a,b){b=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0,pointerType:b.pointerType,button:b.button,buttons:b.buttons,eventId:this._eventId++});this._callback(a,
b)};c.prototype._handlePointerPreventDefault=function(a,b){var d=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0,pointerType:b.pointerType,button:b.button,buttons:b.buttons,eventId:this._eventId++});b.preventDefault();this._callback(a,d)};c.prototype._handleMouseWheel=function(d,c){c.preventDefault();var m=c.deltaY;switch(c.deltaMode){case 0:if(g||f)m=m/document.documentElement.clientHeight*600;break;case 1:m*=30;break;case 2:m*=900}g||f?m*=.7:b||e?m*=.6:a&&(m*=1.375);var h=Math.abs(m);
100<h&&(m=m/h*200/(1+Math.exp(-.02*(h-100))));c=this._updateNormalizedPointerLikeEvent(c,{native:c,x:0,y:0,deltaY:m});this._callback(d,c)};c.prototype._handlePointerCaptureLost=function(a,b){this._activePointerCaptures.delete(b.pointerId);this._handleDefault(a,b)};c.prototype._handleDefault=function(a,b){var d={native:b};b.preventDefault();this._callback(a,d)};c.prototype._preventAltKeyDefault=function(a){"Alt"===a.key&&a.preventDefault()};c.test={disableSubpixelCoordinates:!1};return c}();c.BrowserEventSource=
p;var m={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"}})},"esri/core/libs/pep/pep":function(){define(function(){function p(d,c){c=c||Object.create(null);var e=document.createEvent("Event");
e.initEvent(d,c.bubbles||!1,c.cancelable||!1);d=2;for(var f;d<b.length;d++)f=b[d],e[f]=c[f]||a[d];e.buttons=c.buttons||0;d=0;d=c.pressure&&e.buttons?c.pressure:e.buttons?.5:0;e.x=e.clientX;e.y=e.clientY;e.pointerId=c.pointerId||0;e.width=c.width||0;e.height=c.height||0;e.pressure=d;e.tiltX=c.tiltX||0;e.tiltY=c.tiltY||0;e.twist=c.twist||0;e.tangentialPressure=c.tangentialPressure||0;e.pointerType=c.pointerType||"";e.hwTimestamp=c.hwTimestamp||0;e.isPrimary=c.isPrimary||!1;return e}function c(){this.array=
[];this.size=0}function n(a,b,d,c){this.addCallback=a.bind(c);this.removeCallback=b.bind(c);this.changedCallback=d.bind(c);A&&(this.observer=new A(this.mutationWatcher.bind(this)))}function l(a){return"body /shadow-deep/ "+k(a)}function k(a){return'[touch-action\x3d"'+a+'"]'}function d(a){return"{ -ms-touch-action: "+a+"; touch-action: "+a+"; }"}function h(){if(E){D.forEach(function(a){String(a)===a?(C+=k(a)+d(a)+"\n",H&&(C+=l(a)+d(a)+"\n")):(C+=a.selectors.map(k)+d(a.rule)+"\n",H&&(C+=a.selectors.map(l)+
d(a.rule)+"\n"))});var a=document.createElement("style");a.textContent=C;document.head.appendChild(a)}}function g(a){if(!r.pointermap.has(a))throw a=Error("NotFoundError"),a.name="NotFoundError",a;}function f(a){for(var b=a.parentNode;b&&b!==a.ownerDocument;)b=b.parentNode;if(!b)throw a=Error("InvalidStateError"),a.name="InvalidStateError",a;}var b="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget pageX pageY".split(" "),a=[!1,!1,
null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0],e=window.Map&&window.Map.prototype.forEach?Map:c;c.prototype={set:function(a,b){if(void 0===b)return this.delete(a);this.has(a)||this.size++;this.array[a]=b},has:function(a){return void 0!==this.array[a]},delete:function(a){this.has(a)&&(delete this.array[a],this.size--)},get:function(a){return this.array[a]},clear:function(){this.size=this.array.length=0},forEach:function(a,b){return this.array.forEach(function(d,c){a.call(b,d,c,this)},this)}};var m="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget buttons pointerId width height pressure tiltX tiltY pointerType hwTimestamp isPrimary type target currentTarget which pageX pageY timeStamp".split(" "),
q=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],u={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},t="undefined"!==typeof SVGElementInstance,r={pointermap:new e,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(a,b){var d=b.events;d&&(d.forEach(function(a){b[a]&&(this.eventMap[a]=b[a].bind(b))},this),this.eventSources[a]=b,this.eventSourceList.push(b))},register:function(a){for(var b=
this.eventSourceList.length,d=0,c;d<b&&(c=this.eventSourceList[d]);d++)c.register.call(c,a)},unregister:function(a){for(var b=this.eventSourceList.length,d=0,c;d<b&&(c=this.eventSourceList[d]);d++)c.unregister.call(c,a)},contains:function(a,b){try{return a.contains(b)}catch(ja){return!1}},down:function(a){a.bubbles=!0;this.fireEvent("pointerdown",a)},move:function(a){a.bubbles=!0;this.fireEvent("pointermove",a)},up:function(a){a.bubbles=!0;this.fireEvent("pointerup",a)},enter:function(a){a.bubbles=
!1;this.fireEvent("pointerenter",a)},leave:function(a){a.bubbles=!1;this.fireEvent("pointerleave",a)},over:function(a){a.bubbles=!0;this.fireEvent("pointerover",a)},out:function(a){a.bubbles=!0;this.fireEvent("pointerout",a)},cancel:function(a){a.bubbles=!0;this.fireEvent("pointercancel",a)},leaveOut:function(a){this.out(a);this.propagate(a,this.leave,!1)},enterOver:function(a){this.over(a);this.propagate(a,this.enter,!0)},eventHandler:function(a){if(!a._handledByPE){var b=a.type;(b=this.eventMap&&
this.eventMap[b])&&b(a);a._handledByPE=!0}},listen:function(a,b){b.forEach(function(b){this.addEvent(a,b)},this)},unlisten:function(a,b){b.forEach(function(b){this.removeEvent(a,b)},this)},addEvent:function(a,b){a.addEventListener(b,this.boundHandler)},removeEvent:function(a,b){a.removeEventListener(b,this.boundHandler)},makeEvent:function(a,b){this.captureInfo[b.pointerId]&&(b.relatedTarget=null);a=new p(a,b);b.preventDefault&&(a.preventDefault=b.preventDefault);a._target=a._target||b.target;return a},
fireEvent:function(a,b){a=this.makeEvent(a,b);return this.dispatchEvent(a)},cloneEvent:function(a){for(var b=Object.create(null),d,c=0;c<m.length;c++)d=m[c],b[d]=a[d]||q[c],t&&("target"===d||"relatedTarget"===d)&&b[d]instanceof SVGElementInstance&&(b[d]=b[d].correspondingUseElement);a.preventDefault&&(b.preventDefault=function(){a.preventDefault()});return b},getTarget:function(a){var b=this.captureInfo[a.pointerId];if(!b)return a._target;if(a._target===b||!(a.type in u))return b},propagate:function(a,
b,d){for(var c=a.target,e=[];null!=c&&c!==document&&!c.contains(a.relatedTarget);)if(e.push(c),c=c.parentNode,!c)return;d&&e.reverse();e.forEach(function(d){a.target=d;b.call(this,a)},this)},setCapture:function(a,b,d){this.captureInfo[a]&&this.releaseCapture(a,d);this.captureInfo[a]=b;this.implicitRelease=this.releaseCapture.bind(this,a,d);document.addEventListener("pointerup",this.implicitRelease);document.addEventListener("pointercancel",this.implicitRelease);var c=new p("gotpointercapture");c.pointerId=
a;c._target=b;d||this.asyncDispatchEvent(c)},releaseCapture:function(a,b){var d=this.captureInfo[a];if(d){this.captureInfo[a]=void 0;document.removeEventListener("pointerup",this.implicitRelease);document.removeEventListener("pointercancel",this.implicitRelease);var c=new p("lostpointercapture");c.pointerId=a;c._target=d;b||this.asyncDispatchEvent(c)}},dispatchEvent:function(a){var b=this.getTarget(a);if(b)return b.dispatchEvent(a)},asyncDispatchEvent:function(a){requestAnimationFrame(this.dispatchEvent.bind(this,
a))}};r.boundHandler=r.eventHandler.bind(r);var x={shadow:function(a){if(a)return a.shadowRoot||a.webkitShadowRoot},canTarget:function(a){return a&&!!a.elementFromPoint},targetingShadow:function(a){a=this.shadow(a);if(this.canTarget(a))return a},olderShadow:function(a){var b=a.olderShadowRoot;!b&&(a=a.querySelector("shadow"))&&(b=a.olderShadowRoot);return b},allShadows:function(a){var b=[];for(a=this.shadow(a);a;)b.push(a),a=this.olderShadow(a);return b},searchRoot:function(a,b,d){if(a){var c=a.elementFromPoint(b,
d),e;for(e=this.targetingShadow(c);e;){if(a=e.elementFromPoint(b,d))return c=this.targetingShadow(a),this.searchRoot(c,b,d)||a;e=this.olderShadow(e)}return c}},owner:function(a){for(;a.parentNode;)a=a.parentNode;a.nodeType!==Node.DOCUMENT_NODE&&a.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(a=document);return a},findTarget:function(a){var b=a.clientX,d=a.clientY;a=this.owner(a.target);a.elementFromPoint(b,d)||(a=document);return this.searchRoot(a,b,d)}},w=Array.prototype.forEach.call.bind(Array.prototype.forEach),
v=Array.prototype.map.call.bind(Array.prototype.map),y=Array.prototype.slice.call.bind(Array.prototype.slice),z=Array.prototype.filter.call.bind(Array.prototype.filter),A=window.MutationObserver||window.WebKitMutationObserver,B={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};n.prototype={watchSubtree:function(a){this.observer&&x.canTarget(a)&&this.observer.observe(a,B)},enableOnSubtree:function(a){this.watchSubtree(a);a===document&&"complete"!==document.readyState?
this.installOnLoad():this.installNewSubtree(a)},installNewSubtree:function(a){w(this.findElements(a),this.addElement,this)},findElements:function(a){return a.querySelectorAll?a.querySelectorAll("[touch-action]"):[]},removeElement:function(a){this.removeCallback(a)},addElement:function(a){this.addCallback(a)},elementChanged:function(a,b){this.changedCallback(a,b)},concatLists:function(a,b){return a.concat(y(b))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===
document.readyState&&this.installNewSubtree(document)}.bind(this))},isElement:function(a){return a.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(a){var b=v(a,this.findElements,this);b.push(z(a,this.isElement));return b.reduce(this.concatLists,[])},mutationWatcher:function(a){a.forEach(this.mutationHandler,this)},mutationHandler:function(a){"childList"===a.type?(this.flattenMutationTree(a.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(a.removedNodes).forEach(this.removeElement,
this)):"attributes"===a.type&&this.elementChanged(a.target,a.oldValue)}};var D=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],C="",E=window.PointerEvent||window.MSPointerEvent,H=!window.ShadowDOMPolyfill&&document.head.createShadowRoot,G=r.pointermap,I=[1,4,2,8,16],K=!1;try{K=1===(new MouseEvent("test",{buttons:1})).buttons}catch(Z){}var M={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(a){r.listen(a,
this.events)},unregister:function(a){r.unlisten(a,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(a){var b=this.lastTouches,d=a.clientX;a=a.clientY;for(var c=0,e=b.length,f;c<e&&(f=b[c]);c++){var m=Math.abs(a-f.y);if(25>=Math.abs(d-f.x)&&25>=m)return!0}},prepareEvent:function(a){var b=r.cloneEvent(a),d=b.preventDefault;b.preventDefault=function(){a.preventDefault();d()};b.pointerId=this.POINTER_ID;b.isPrimary=!0;b.pointerType=this.POINTER_TYPE;return b},prepareButtonsForMove:function(a,
b){var d=G.get(this.POINTER_ID);a.buttons=0!==b.which&&d?d.buttons:0;b.buttons=a.buttons},mousedown:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=G.get(this.POINTER_ID),d=this.prepareEvent(a);K||(d.buttons=I[d.button],b&&(d.buttons|=b.buttons),a.buttons=d.buttons);G.set(this.POINTER_ID,a);b&&0!==b.buttons?r.move(d):r.down(d)}},mousemove:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);K||this.prepareButtonsForMove(b,a);b.button=-1;G.set(this.POINTER_ID,a);r.move(b)}},
mouseup:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=G.get(this.POINTER_ID),d=this.prepareEvent(a);if(!K){var c=I[d.button];d.buttons=b?b.buttons&~c:0;a.buttons=d.buttons}G.set(this.POINTER_ID,a);d.buttons&=~I[d.button];0===d.buttons?r.up(d):r.move(d)}},mouseover:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);K||this.prepareButtonsForMove(b,a);b.button=-1;G.set(this.POINTER_ID,a);r.enterOver(b)}},mouseout:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=
this.prepareEvent(a);K||this.prepareButtonsForMove(b,a);b.button=-1;r.leaveOut(b)}},cancel:function(a){a=this.prepareEvent(a);r.cancel(a);this.deactivateMouse()},deactivateMouse:function(){G.delete(this.POINTER_ID)}},T=r.captureInfo,N=x.findTarget.bind(x),S=x.allShadows.bind(x),O=r.pointermap,V,Q={events:["touchstart","touchmove","touchend","touchcancel"],register:function(a){V.enableOnSubtree(a)},unregister:function(){},elementAdded:function(a){var b=a.getAttribute("touch-action"),d=this.touchActionToScrollType(b);
d&&(a._scrollType=d,r.listen(a,this.events),S(a).forEach(function(a){a._scrollType=d;r.listen(a,this.events)},this))},elementRemoved:function(a){a._scrollType=void 0;r.unlisten(a,this.events);S(a).forEach(function(a){a._scrollType=void 0;r.unlisten(a,this.events)},this)},elementChanged:function(a,b){var d=a.getAttribute("touch-action"),c=this.touchActionToScrollType(d);b=this.touchActionToScrollType(b);c&&b?(a._scrollType=c,S(a).forEach(function(a){a._scrollType=c},this)):b?this.elementRemoved(a):
c&&this.elementAdded(a)},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(a){var b=this.scrollTypes;if("none"===a)return"none";if(a===b.XSCROLLER)return"X";if(a===b.YSCROLLER)return"Y";if(b.SCROLLER.exec(a))return"XY"},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(a){return this.firstTouch===a.identifier},setPrimaryTouch:function(a){if(0===O.size||1===O.size&&O.has(1))this.firstTouch=
a.identifier,this.firstXY={X:a.clientX,Y:a.clientY},this.scrolling=!1,this.cancelResetClickCount()},removePrimaryPointer:function(a){a.isPrimary&&(this.firstXY=this.firstTouch=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var a=function(){this.clickCount=0;this.resetId=null}.bind(this);this.resetId=setTimeout(a,200)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(a){var b=0;if("touchstart"===a||"touchmove"===a)b=
1;return b},touchToPointer:function(a){var b=this.currentTouchEvent,d=r.cloneEvent(a),c=d.pointerId=a.identifier+2;d.target=T[c]||N(d);d.bubbles=!0;d.cancelable=!0;d.detail=this.clickCount;d.button=0;d.buttons=this.typeToButtons(b.type);d.width=2*(a.radiusX||a.webkitRadiusX||0);d.height=2*(a.radiusY||a.webkitRadiusY||0);d.pressure=a.force||a.webkitForce||.5;d.isPrimary=this.isPrimaryTouch(a);d.pointerType=this.POINTER_TYPE;d.altKey=b.altKey;d.ctrlKey=b.ctrlKey;d.metaKey=b.metaKey;d.shiftKey=b.shiftKey;
var e=this;d.preventDefault=function(){e.scrolling=!1;e.firstXY=null;b.preventDefault()};return d},processTouches:function(a,b){var d=a.changedTouches;this.currentTouchEvent=a;a=0;for(var c;a<d.length;a++)c=d[a],b.call(this,this.touchToPointer(c))},shouldScroll:function(a){if(this.firstXY){var b;b=a.currentTarget._scrollType;if("none"===b)b=!1;else if("XY"===b)b=!0;else{a=a.changedTouches[0];var d="Y"===b?"X":"Y";b=Math.abs(a["client"+b]-this.firstXY[b])>=Math.abs(a["client"+d]-this.firstXY[d])}this.firstXY=
null;return b}},findTouch:function(a,b){for(var d=0,c=a.length,e;d<c&&(e=a[d]);d++)if(e.identifier===b)return!0},vacuumTouches:function(a){var b=a.touches;if(O.size>=b.length){var d=[];O.forEach(function(a,c){1===c||this.findTouch(b,c-2)||d.push(a.out)},this);d.forEach(this.cancelOut,this)}},touchstart:function(a){this.vacuumTouches(a);this.setPrimaryTouch(a.changedTouches[0]);this.dedupSynthMouse(a);this.scrolling||(this.clickCount++,this.processTouches(a,this.overDown))},overDown:function(a){O.set(a.pointerId,
{target:a.target,out:a,outTarget:a.target});r.enterOver(a);r.down(a)},touchmove:function(a){this.scrolling||(this.shouldScroll(a)?(this.scrolling=!0,this.touchcancel(a)):(a.preventDefault(),this.processTouches(a,this.moveOverOut)))},moveOverOut:function(a){var b=O.get(a.pointerId);if(b){var d=b.out,c=b.outTarget;r.move(a);d&&c!==a.target&&(d.relatedTarget=a.target,a.relatedTarget=c,d.target=c,a.target?(r.leaveOut(d),r.enterOver(a)):(a.target=c,a.relatedTarget=null,this.cancelOut(a)));b.out=a;b.outTarget=
a.target}},touchend:function(a){this.dedupSynthMouse(a);this.processTouches(a,this.upOut)},upOut:function(a){this.scrolling||(r.up(a),r.leaveOut(a));this.cleanUpPointer(a)},touchcancel:function(a){this.processTouches(a,this.cancelOut)},cancelOut:function(a){r.cancel(a);r.leaveOut(a);this.cleanUpPointer(a)},cleanUpPointer:function(a){O.delete(a.pointerId);this.removePrimaryPointer(a)},dedupSynthMouse:function(a){var b=M.lastTouches;a=a.changedTouches[0];this.isPrimaryTouch(a)&&(a={x:a.clientX,y:a.clientY},
b.push(a),b=function(a,b){b=a.indexOf(b);-1<b&&a.splice(b,1)}.bind(null,b,a),setTimeout(b,2500))}};V=new n(Q.elementAdded,Q.elementRemoved,Q.elementChanged,Q);var J=r.pointermap,P=window.MSPointerEvent&&"number"===typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,L={events:"MSPointerDown MSPointerMove MSPointerUp MSPointerOut MSPointerOver MSPointerCancel MSGotPointerCapture MSLostPointerCapture".split(" "),register:function(a){r.listen(a,this.events)},unregister:function(a){r.unlisten(a,this.events)},
POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(a){var b=a;P&&(b=r.cloneEvent(a),b.pointerType=this.POINTER_TYPES[a.pointerType]);return b},cleanup:function(a){J.delete(a)},MSPointerDown:function(a){J.set(a.pointerId,a);a=this.prepareEvent(a);r.down(a)},MSPointerMove:function(a){a=this.prepareEvent(a);r.move(a)},MSPointerUp:function(a){var b=this.prepareEvent(a);r.up(b);this.cleanup(a.pointerId)},MSPointerOut:function(a){a=this.prepareEvent(a);r.leaveOut(a)},MSPointerOver:function(a){a=
this.prepareEvent(a);r.enterOver(a)},MSPointerCancel:function(a){var b=this.prepareEvent(a);r.cancel(b);this.cleanup(a.pointerId)},MSLostPointerCapture:function(a){a=r.makeEvent("lostpointercapture",a);r.dispatchEvent(a)},MSGotPointerCapture:function(a){a=r.makeEvent("gotpointercapture",a);r.dispatchEvent(a)}},F,Y,X;window.navigator.msPointerEnabled?(F=function(a){g(a);f(this);0!==r.pointermap.get(a).buttons&&(r.setCapture(a,this,!0),this.msSetPointerCapture(a))},Y=function(a){g(a);r.releaseCapture(a,
!0);this.msReleasePointerCapture(a)}):(F=function(a){g(a);f(this);0!==r.pointermap.get(a).buttons&&r.setCapture(a,this)},Y=function(a){g(a);r.releaseCapture(a)});X=function(a){return!!r.captureInfo[a]};var R=window.PointerEvent||window.MSPointerEvent;return{dispatcher:r,Installer:n,PointerEvent:p,PointerMap:e,targetFinding:x,applyGlobal:function(){h();window.PointerEvent||(window.PointerEvent=p,window.navigator.msPointerEnabled?(Object.defineProperty(window.navigator,"maxTouchPoints",{value:window.navigator.msMaxTouchPoints,
enumerable:!0}),r.registerSource("ms",L)):(Object.defineProperty(window.navigator,"maxTouchPoints",{value:0,enumerable:!0}),r.registerSource("mouse",M),void 0!==window.ontouchstart&&r.registerSource("touch",Q)),r.register(document));window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:F},releasePointerCapture:{value:Y},hasPointerCapture:{value:X}})},applyLocal:function(a){R||(window.PointerEvent||(window.navigator.msPointerEnabled?
r.registerSource("ms",L):(r.registerSource("mouse",M),void 0!==window.ontouchstart&&r.registerSource("touch",Q)),r.register(document)),window.Element&&!Element.prototype.setPointerCapture&&(a.setPointerCapture=F.bind(a),a.releasePointerCapture=Y.bind(a),a.hasPointerCapture=X.bind(a)),a.getAttribute("touch-action")||a.setAttribute("touch-action","none"))}}})},"esri/views/input/keys":function(){define(["require","exports","../../core/events","../../core/has"],function(p,c,n,l){Object.defineProperty(c,
"__esModule",{value:!0});c.primaryKey="Meta";var k={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(p=48;58>p;p++)k[p]=String.fromCharCode(p);for(p=1;25>p;p++)k[111+p]="F"+p;for(p=65;91>p;p++)k[p]=[String.fromCharCode(p+32),String.fromCharCode(p)];c.eventKey=function(d){if(void 0!==d.key)return n.eventKey(d);var c=k[d.keyCode];return Array.isArray(c)?d.shiftKey?c[1]:c[0]:
c};c.isSystemModifier=function(d){switch(d){case "Ctrl":case "Alt":case "Shift":case "Meta":case "Primary":return!0}}})},"esri/views/input/gamepad/GamepadSource":function(){define("require exports ../../../core/tsSupport/assignHelper ../../../core/scheduling ./GamepadInputDevice ./GamepadState".split(" "),function(p,c,n,l,k,d){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(c,f){var b=this;this.element=c;this.input=f;this.handleGamepadConnectedEvent=function(a){b.handleGamepadConnected(a.gamepad)};
this.handleGamepadDisconnectedEvent=function(a){a=a.gamepad;var c=b.inputDevices[a.index];c&&(b.emitGamepadEvent(a,d.extractState(c),!1),b.inputDevices[a.index]=void 0,b.latestUpdate[a.index]=void 0,b.input.gamepad.devices.remove(c))};this.frameTask=null;this.latestUpdate=[];this.inputDevices=[];this.callback=null;if(this.supported="getGamepads"in window.navigator)this.forEachGamepad(function(a){return b.handleGamepadConnected(a)}),window.addEventListener("gamepadconnected",this.handleGamepadConnectedEvent),
window.addEventListener("gamepaddisconnected",this.handleGamepadDisconnectedEvent)}c.prototype.destroy=function(){this.pollingEnabled=!1;this.supported&&(window.removeEventListener("gamepadconnected",this.handleGamepadConnectedEvent),window.removeEventListener("gamepaddisconnected",this.handleGamepadDisconnectedEvent))};Object.defineProperty(c.prototype,"onEvent",{set:function(d){this.callback=d},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"pollingEnabled",{set:function(d){this.supported&&
(d?this.startPolling():this.stopPolling())},enumerable:!0,configurable:!0});c.prototype.handleGamepadConnected=function(d){var c=new k(d);"unknown"!==c.deviceType&&(this.inputDevices[d.index]=c,this.input.gamepad.devices.add(c))};c.prototype.startPolling=function(){var d=this;null==this.frameTask&&(this.frameTask=l.addFrameTask({update:function(){return d.readGamepadState()}}))};c.prototype.stopPolling=function(){null!=this.frameTask&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=
[])};c.prototype.readGamepadState=function(){var c=this,f=document.hasFocus(),b=this.element.contains(document.activeElement),a="document"===this.input.gamepad.enabledFocusMode&&!f||"view"===this.input.gamepad.enabledFocusMode&&!b;this.forEachGamepad(function(b){var e=c.inputDevices[b.index];if(e){var f=c.latestUpdate[b.index],e=d.extractState(e),g=a||d.stateIdle(e);f&&(f.timestamp===b.timestamp||!f.active&&g||d.stateEqual(f.state,e))||c.emitGamepadEvent(b,e,!g)}})};c.prototype.forEachGamepad=function(d){for(var c=
window.navigator.getGamepads(),b=0;b<c.length;b++){var a=c[b];this.validate(a)&&d(a)}};c.prototype.emitGamepadEvent=function(d,c,b){var a=this.latestUpdate[d.index];if((a=a&&a.active)||b)this.latestUpdate[d.index]={timestamp:d.timestamp,state:c,active:b},this.callback&&this.callback({device:this.inputDevices[d.index],state:c,action:!a&&b?"start":a&&b?"update":"end"})};c.prototype.validate=function(d){if(!d||!d.connected)return!1;for(var c=0;c<d.axes.length;c++)if(isNaN(d.axes[c]))return!1;return!0};
return c}();c.GamepadSource=p})},"esri/views/input/gamepad/GamepadState":function(){define(["require","exports","../../3d/support/mathUtils"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.extractState=function(c){var k=c.native;return{buttons:k.buttons.map(function(d){return d.pressed?d.value?d.value:1:0}),axes:k.axes.map(function(d){var h=c.axisThreshold,g=Math.abs(d);d=g<h?0:n.sign(d)*(g-h)/(1-h);return d})}};c.stateEqual=function(c,k){if(c.axes.length!==k.axes.length||c.buttons.length!==
k.buttons.length)return!1;for(var d=0;d<c.axes.length;d++)if(c.axes[d]!==k.axes[d])return!1;for(d=0;d<c.buttons.length;d++)if(c.buttons[d]!==k.buttons[d])return!1;return!0};c.stateIdle=function(c){for(var k=0;k<c.axes.length;k++)if(0!==c.axes[k])return!1;for(k=0;k<c.buttons.length;k++)if(0!==c.buttons[k])return!1;return!0}})},"esri/views/input/InputManager":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Logger ../../core/now ../../core/accessorSupport/decorators ./keys ./recognizers ./handlers/LatestPointerType".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a){Object.defineProperty(c,"__esModule",{value:!0});var e=d.getLogger("esri.views.input.InputManager");p=function(d){function c(a,b){a=d.call(this)||this;a._pointerCaptures=new Map;a._nameToGroup={};a._handlers=[];a._currentPropagation=null;a._sourceEvents=new Set;a._keyModifiers=new Set;a._activeKeyModifiers=new Set;a.primaryKey=f.primaryKey;a.latestPointerType="mouse";a._installRecognizers();return a}n(c,d);c.prototype.normalizeCtorArgs=function(a,d){this._browserEvents=
a;this._browserEvents.onEventReceived=this._onEventReceived.bind(this);this._recognizers=d;this._recognizers||(this._recognizers=b.defaults.map(function(a){return new a}));return{}};c.prototype.destroy=function(){for(var a=0,b=Object.keys(this._nameToGroup);a<b.length;a++)this.uninstallHandlers(b[a]);this._browserEvents=null};Object.defineProperty(c.prototype,"hasPendingInputs",{get:function(){return this._handlers.some(function(a){return a.handler.hasPendingInputs})},enumerable:!0,configurable:!0});
c.prototype.installHandlers=function(a,b){var d=this;if(this._nameToGroup[a])e.error("There is already an InputHandler group registered under the name `"+a+"`");else if(0===b.length)e.error("Can't register a group of zero handlers");else{var c={name:a,handlers:b.map(function(a,b){return{handler:a,active:!0,removed:!1,priorityIndex:0,eventCallback:null,uninstallCallback:null}})};this._nameToGroup[a]=c;a=function(a){var b=c.handlers[a];f._handlers.push(b);b.handler.onInstall({updateDependencies:function(){d.updateDependencies()},
emit:function(a,c,e,f){d._emitInputEvent(b.priorityIndex,a,c,e,f)},setPointerCapture:function(a,e){d._setPointerCapture(c,b,a,e)},setEventCallback:function(a){b.eventCallback=a},setUninstallCallback:function(a){b.uninstallCallback=a},refreshHasPendingInputs:function(){d.notifyChange("hasPendingInputs")}})};var f=this;for(b=c.handlers.length-1;0<=b;b--)a(b);this.updateDependencies()}};c.prototype.uninstallHandlers=function(a){var b=this._nameToGroup[a];b?(b.handlers.forEach(function(a){a.removed=!0;
a.uninstallCallback()}),delete this._nameToGroup[a],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):e.error("There is no InputHandler group registered under the name `"+a+"`")};c.prototype.hasHandlers=function(a){return void 0!==this._nameToGroup[a]};c.prototype.updateDependencies=function(){var a=new Set,b=new Set;this._handlersPriority=[];for(var d=this._handlers.length-1;0<=d;d--){var c=this._handlers[d];c.priorityIndex=d;this._handlersPriority.push(c)}this._handlersPriority=
this._sortHandlersPriority(this._handlersPriority);for(d=this._handlersPriority.length-1;0<=d;d--){c=this._handlersPriority[d];c.priorityIndex=d;var e=c.handler.hasSideEffects;if(!e)for(var m=0,g=c.handler.outgoingEventTypes;m<g.length;m++)if(a.has(g[m])){e=!0;break}if(e)for(m=0,g=c.handler.incomingEventMatches;m<g.length;m++){var h=g[m];a.add(h.eventType);for(var k=0,h=h.keyModifiers;k<h.length;k++){var l=h[k];f.isSystemModifier(l)||b.add(l)}}c.active=e}this._sourceEvents=a;this._keyModifiers=b;
0<this._pointerCaptures.size&&this._sourceEvents.add("pointer-capture-lost");0<this._keyModifiers.size&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up"));this._browserEvents&&(this._browserEvents.activeEvents=this._sourceEvents)};c.prototype._setLatestPointerType=function(a){this._set("latestPointerType",a)};c.prototype._onEventReceived=function(a,b){"pointer-capture-lost"===a&&this._pointerCaptures.delete(b.native.pointerId);this._updateKeyModifiers(a,b);this._emitInputEventFromSource(a,
b,b.native?b.native.timestamp:void 0)};c.prototype._updateKeyModifiers=function(a,b){var d=this;if(b){var c=!1,e=function(){if(!c){var a=new Set;d._activeKeyModifiers.forEach(function(b){a.add(b)});d._activeKeyModifiers=a;c=!0}},f=function(a,b){b&&!d._activeKeyModifiers.has(a)?(e(),d._activeKeyModifiers.add(a)):!b&&d._activeKeyModifiers.has(a)&&(e(),d._activeKeyModifiers.delete(a))};if("key-down"===a||"key-up"===a){var m=b.key;this._keyModifiers.has(m)&&f(m,"key-down"===a)}a=b.native;f("Alt",!(!a||
!a.altKey));f("Ctrl",!(!a||!a.ctrlKey));f("Shift",!(!a||!a.shiftKey));f("Meta",!(!a||!a.metaKey));f("Primary",this._activeKeyModifiers.has(this.primaryKey))}};c.prototype._installRecognizers=function(){var b=this;this._latestPointerTypeHandler=new a.LatestPointerType(function(a){return b._setLatestPointerType(a)});0<this._recognizers.length&&this.installHandlers("default",this._recognizers);this.installHandlers("input-manager-logic",[this._latestPointerTypeHandler])};c.prototype._setPointerCapture=
function(a,b,d,c){a=a.name+"-"+b.priorityIndex;b=this._pointerCaptures.get(d.pointerId)||new Set;this._pointerCaptures.set(d.pointerId,b);c?(b.add(a),1===b.size&&this._browserEvents&&this._browserEvents.setPointerCapture(d,!0)):b.has(a)&&(b.delete(a),0===b.size&&(this._pointerCaptures.delete(d.pointerId),this._browserEvents&&this._browserEvents.setPointerCapture(d,!1)))};c.prototype._garbageCollectRemovedHandlers=function(){this._handlers=this._handlers.filter(function(a){return!a.removed});this.updateDependencies()};
c.prototype._emitInputEventFromSource=function(a,b,d){this._emitInputEvent(0,a,b,d)};c.prototype._emitInputEvent=function(a,b,d,c,e){c=void 0!==c?c:this._currentPropagation?this._currentPropagation.timestamp:h();b=new m(b,d,c,e||this._activeKeyModifiers);this._currentPropagation?this._currentPropagation.addedEvents.push(b):this._doNewPropagation(a,b)};c.prototype._doNewPropagation=function(a,b){for(a=this._currentPropagation={events:[b],addedEvents:[],currentHandler:this._handlersPriority[a],needsHandlerGarbageCollect:!1,
timestamp:b.timestamp};a.currentHandler;){if(a.currentHandler.removed)a.needsHandlerGarbageCollect=!0;else{b=a.events;var d=[];a.addedEvents=[];for(var c=0;c<b.length;c++){var e=b[c];a.currentHandler.active&&a.currentHandler.eventCallback(e);e.shouldStopPropagation()||d.push(e)}a.events=d.concat(a.addedEvents)}a.currentHandler=this._handlersPriority[a.currentHandler.priorityIndex+1]}a.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers();this._currentPropagation=null};c.prototype._compareHandlerPriority=
function(a,b){if(a.handler.hasSideEffects!==b.handler.hasSideEffects)return a.handler.hasSideEffects?1:-1;for(var d=0,c=a.handler.incomingEventMatches;d<c.length;d++)for(var e=c[d],f=function(a){if(e.eventType!==a.eventType)return"continue";var b=e.keyModifiers.filter(function(b){return-1!==a.keyModifiers.indexOf(b)});if(b.length===e.keyModifiers.length!==(b.length===a.keyModifiers.length))return{value:e.keyModifiers.length>a.keyModifiers.length?-1:1}},m=0,g=b.handler.incomingEventMatches;m<g.length;m++){var h=
f(g[m]);if("object"===typeof h)return h.value}return a.priorityIndex>b.priorityIndex?-1:1};c.prototype._sortHandlersPriority=function(a){for(var b=[],d=0;d<a.length;d++){for(var c=a[d],e=0;e<b.length&&0<=this._compareHandlerPriority(c,b[e]);)e++;b.splice(e,0,c)}return b};Object.defineProperty(c.prototype,"debug",{get:function(){var a=this,b=function(b){var d=a._setPointerCapture;a._setPointerCapture=function(){};b();a._setPointerCapture=d};return{injectEvent:function(d,c){b(function(){a._onEventReceived(d,
c)})},disablePointerCapture:b}},enumerable:!0,configurable:!0});l([g.property({readOnly:!0})],c.prototype,"hasPendingInputs",null);l([g.property({readOnly:!0})],c.prototype,"latestPointerType",void 0);return c=l([g.subclass("esri.views.input.InputManager")],c)}(g.declared(k));c.InputManager=p;var m=function(){function a(a,b,d,c){this.type=a;this.data=b;this.timestamp=d;this.modifiers=c;this._stopPropagation=!1}a.prototype.stopPropagation=function(){this._stopPropagation=!0};a.prototype.shouldStopPropagation=
function(){return this._stopPropagation};return a}()})},"esri/views/input/recognizers":function(){define("require exports ./recognizers/Drag ./recognizers/PointerClickHoldAndDrag ./recognizers/SingleAndDoubleClick ./recognizers/VerticalTwoFingerDrag".split(" "),function(p,c,n,l,k,d){Object.defineProperty(c,"__esModule",{value:!0});c.defaults=[l.PointerClickHoldAndDrag,k.SingleAndDoubleClick,n.Drag,d.VerticalTwoFingerDrag]})},"esri/views/input/recognizers/Drag":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/screenUtils ../InputHandler ./support".split(" "),
function(p,c,n,l,k,d){function h(a){var b=[];a.forEach(function(a){b.push(l.createScreenPoint(a.event.x,a.event.y))});return d.fitCircleLSQ(b)}function g(a){var d=h(a),c=0;a.forEach(function(a){for(var e=b(a,d),e=e-a.lastAngle;e>Math.PI;)e-=2*Math.PI;for(;e<-Math.PI;)e+=2*Math.PI;e=a.lastAngle+e;a.lastAngle=e;c+=e-a.initialAngle});c/=a.size||1;return{angle:c,radius:d.radius,center:d.center}}function f(a){var b=new Map;a.forEach(function(a,d){return b.set(d,a.event)});return b}function b(a,b){a=a.event;
return Math.atan2(a.y-b.center.y,a.x-b.center.x)}Object.defineProperty(c,"__esModule",{value:!0});p=function(a){function d(){var b=a.call(this,!1)||this;b.startStateModifiers=new Set;b.activePointerMap=new Map;b.isDragging=!1;b.drag=b.registerOutgoing("drag");b.registerIncoming("pointer-drag",b.handlePointerDrag.bind(b));b.registerIncoming("pointer-up",b.handlePointerUpAndPointerLost.bind(b));b.registerIncoming("pointer-capture-lost",b.handlePointerUpAndPointerLost.bind(b));b.registerIncoming("pointer-cancel",
b.handlePointerUpAndPointerLost.bind(b));return b}n(d,a);d.prototype.createPayload=function(a,b,d,c){return{action:a,pointerType:this.pointerType,button:this.mouseButton,buttons:b.buttons,timestamp:c,pointers:f(this.activePointerMap),pointer:b,angle:d.angle,radius:d.radius,center:d.center}};d.prototype.addPointer=function(a){var d=a.native.pointerId,c=g(this.activePointerMap).angle;a={event:a,initialAngle:0,lastAngle:0};this.activePointerMap.set(d,a);d=b(a,h(this.activePointerMap));a.initialAngle=
d;a.lastAngle=d;this.updatePointerAngles(c)};d.prototype.updatePointer=function(a){if(!a||null!=a.x||null!=a.y){var b=this.activePointerMap.get(a.native.pointerId);b?b.event=a:this.addPointer(a)}};d.prototype.removePointer=function(a){var b=g(this.activePointerMap).angle;this.activePointerMap.delete(a);this.updatePointerAngles(b)};d.prototype.updatePointerAngles=function(a){var d=g(this.activePointerMap);this.activePointerMap.forEach(function(c){c.initialAngle=b(c,d)-a;c.lastAngle=b(c,d)-a})};d.prototype.emitEvent=
function(a,b,d){var c=g(this.activePointerMap);this.drag.emit(this.createPayload(a,b,c,d),void 0,this.startStateModifiers)};d.prototype.handlePointerUpAndPointerLost=function(a){var b=a.data.native.pointerId,d=a.timestamp;this.activePointerMap.get(b)&&(1===this.activePointerMap.size?(this.updatePointer(a.data),this.emitEvent("end",a.data,d),this.isDragging=!1,this.removePointer(b)):(this.removePointer(b),this.emitEvent("removed",a.data,a.timestamp)))};d.prototype.handlePointerDrag=function(a){var b=
a.data,d=b.currentEvent,c=a.timestamp;switch(b.action){case "start":case "update":this.isDragging?this.activePointerMap.has(d.native.pointerId)?(this.updatePointer(d),this.emitEvent("update",d,c)):(this.addPointer(d),this.emitEvent("added",d,c)):(this.updatePointer(d),this.pointerType=a.data.startEvent.pointerType,this.mouseButton=a.data.startEvent.button,this.startStateModifiers=a.modifiers,this.isDragging=!0,this.emitEvent("start",d,c))}};return d}(k.InputHandler);c.Drag=p;(function(a){a[a.Left=
0]="Left";a[a.Middle=1]="Middle";a[a.Right=2]="Right";a[a.Back=3]="Back";a[a.Forward=4]="Forward";a[a.Undefined=-1]="Undefined"})(c.Button||(c.Button={}))})},"esri/views/input/recognizers/support":function(){define(["require","exports","../../../core/screenUtils"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.manhattanDistance=function(c,k){return Math.abs(k.x-c.x)+Math.abs(k.y-c.y)};c.euclideanDistance=function(c,k){var d=k.x-c.x;c=k.y-c.y;return Math.sqrt(d*d+c*c)};c.fitCircleLSQ=
function(c,k){k?(k.radius=0,k.center.x=0,k.center.y=0):k={radius:0,center:n.createScreenPoint()};if(0===c.length)return k;if(1===c.length)return k.center.x=c[0].x,k.center.y=c[0].y,k;if(2===c.length){var d=c[0];c=c[1];var h=[c.x-d.x,c.y-d.y],g=h[0],h=h[1];k.radius=Math.sqrt(g*g+h*h)/2;k.center.x=(d.x+c.x)/2;k.center.y=(d.y+c.y)/2;return k}for(var f=0,b=0,a=0;a<c.length;a++)f+=c[a].x,b+=c[a].y;for(var f=f/c.length,b=b/c.length,e=c.map(function(a){return a.x-f}),m=c.map(function(a){return a.y-b}),l=
d=k=0,u=0,t=g=0,a=h=0;a<e.length;a++){var r=e[a],x=m[a],w=r*r,v=x*x;k+=w;d+=v;l+=r*x;u+=w*r;g+=v*x;t+=r*v;h+=x*w}a=k;e=l;m=d;u=.5*(u+t);g=.5*(g+h);h=a*m-l*e;t=(u*m-g*e)/h;g=(a*g-l*u)/h;h=n.createScreenPoint(t+f,g+b);return{radius:Math.sqrt(t*t+g*g+(k+d)/c.length),center:h}}})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/clock ../InputHandler ./support".split(" "),function(p,c,n,l,k,d){Object.defineProperty(c,
"__esModule",{value:!0});c.DefaultParameters={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilTouchDrag:6,holdDelay:500};p=function(h){function g(d,b,a,e,m){void 0===d&&(d=c.DefaultParameters.maximumClickDelay);void 0===b&&(b=c.DefaultParameters.movementUntilMouseDrag);void 0===a&&(a=c.DefaultParameters.movementUntilTouchDrag);void 0===e&&(e=c.DefaultParameters.holdDelay);void 0===m&&(m=l.default);var f=h.call(this,!1)||this;f.maximumClickDelay=d;f.movementUntilMouseDrag=b;f.movementUntilTouchDrag=
a;f.holdDelay=e;f._clock=m;f._pointerState=new Map;f._pointerDrag=f.registerOutgoing("pointer-drag");f._immediateClick=f.registerOutgoing("immediate-click");f._pointerHold=f.registerOutgoing("hold");f.registerIncoming("pointer-down",f._handlePointerDown.bind(f));f.registerIncoming("pointer-up",function(a){f._handlePointerLoss(a,"pointer-up")});f.registerIncoming("pointer-capture-lost",function(a){f._handlePointerLoss(a,"pointer-capture-lost")});f.registerIncoming("pointer-cancel",function(a){f._handlePointerLoss(a,
"pointer-cancel")});f._moveHandle=f.registerIncoming("pointer-move",f._handlePointerMove.bind(f));f._moveHandle.pause();return f}n(g,h);g.prototype.onUninstall=function(){this._pointerState.forEach(function(d){null!=d.holdTimeout&&(d.holdTimeout.remove(),d.holdTimeout=null)});h.prototype.onUninstall.call(this)};g.prototype._handlePointerDown=function(d){var b=this,a=d.data,c=a.native.pointerId,f=null;0===this._pointerState.size&&(f=this._clock.setTimeout(function(){var a=b._pointerState.get(c);a&&
(a.isDragging||(b._pointerHold.emit(a.previousEvent,void 0,d.modifiers),a.holdEmitted=!0),a.holdTimeout=null)},this.holdDelay));f={startEvent:a,previousEvent:a,startTimestamp:d.timestamp,isDragging:!1,downButton:a.native.button,holdTimeout:f,modifiers:new Set};this._pointerState.set(c,f);this.startCapturingPointer(a.native);this._moveHandle.resume();1<this._pointerState.size&&this.startDragging(d)};g.prototype._createPointerDragData=function(d,b,a){return{action:d,startEvent:b.startEvent,previousEvent:b.previousEvent,
currentEvent:a}};g.prototype._handlePointerMove=function(c){var b=c.data,a=this._pointerState.get(b.native.pointerId);a&&(a.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",a,b),void 0,a.modifiers):d.euclideanDistance(b,a.startEvent)>("touch"===b.native.pointerType?this.movementUntilTouchDrag:this.movementUntilMouseDrag)&&this.startDragging(c),a.previousEvent=b)};g.prototype.startDragging=function(d){var b=this,a=d.data,c=a.native.pointerId;this._pointerState.forEach(function(e){null!=
e.holdTimeout&&(e.holdTimeout.remove(),e.holdTimeout=null);e.isDragging||(e.modifiers=d.modifiers,e.isDragging=!0,c===e.startEvent.native.pointerId?b._pointerDrag.emit(b._createPointerDragData("start",e,a)):b._pointerDrag.emit(b._createPointerDragData("start",e,e.previousEvent),d.timestamp))})};g.prototype._handlePointerLoss=function(d,b){var a=d.data,c=a.native.pointerId,f=this._pointerState.get(c);f&&(null!=f.holdTimeout&&(f.holdTimeout.remove(),f.holdTimeout=null),f.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",
f,"pointer-up"===b?a:f.previousEvent),void 0,f.modifiers):"pointer-up"===b&&f.downButton===a.native.button&&d.timestamp-f.startTimestamp<=this.maximumClickDelay&&!f.holdEmitted&&this._immediateClick.emit(a),this._pointerState.delete(c),this.stopCapturingPointer(a.native),0===this._pointerState.size&&this._moveHandle.pause())};return g}(k.InputHandler);c.PointerClickHoldAndDrag=p})},"esri/core/clock":function(){define(["require","exports","./global"],function(p,c,n){function l(c){return{setTimeout:function(d,
h){var g=c.setTimeout(d,h);return{remove:function(){return c.clearTimeout(g)}}}}}Object.defineProperty(c,"__esModule",{value:!0});c.wrap=l;c.default=l(n)})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/clock ../../../core/iteratorUtils ../InputHandler ./support".split(" "),function(p,c,n,l,k,d,h){Object.defineProperty(c,"__esModule",{value:!0});c.DefaultParameters={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,
maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};p=function(d){function f(b,a,e,f,g){void 0===b&&(b=c.DefaultParameters.maximumDoubleClickDelay);void 0===a&&(a=c.DefaultParameters.maximumDoubleClickDistance);void 0===e&&(e=c.DefaultParameters.maximumDoubleTouchDelay);void 0===f&&(f=c.DefaultParameters.maximumDoubleTouchDistance);void 0===g&&(g=l.default);var m=d.call(this,!1)||this;m.maximumDoubleClickDelay=b;m.maximumDoubleClickDistance=a;m.maximumDoubleTouchDelay=e;m.maximumDoubleTouchDistance=
f;m._clock=g;m._pointerState=new Map;m._click=m.registerOutgoing("click");m._doubleClick=m.registerOutgoing("double-click");m.registerIncoming("immediate-click",m._handleImmediateClick.bind(m));m.registerIncoming("pointer-drag",m._handlePointerDrag.bind(m));m.registerIncoming("drag",m._handleDrag.bind(m));return m}n(f,d);f.prototype.onUninstall=function(){this._pointerState.forEach(function(b){null!=b.doubleClickTimeout&&(b.doubleClickTimeout.remove(),b.doubleClickTimeout=null)})};Object.defineProperty(f.prototype,
"hasPendingInputs",{get:function(){return!k.everyMap(this._pointerState,function(b){return null==b.doubleClickTimeout})},enumerable:!0,configurable:!0});f.prototype._pointerId=function(b){b=b.native;return"mouse"===b.pointerType?b.pointerId+":"+b.button:""+b.pointerType};f.prototype._handleImmediateClick=function(b){var a=b.data,d=this._pointerId(a),c=this._pointerState.get(d);if(c){var f="touch"===a.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;h.manhattanDistance(c.event.data,
a)>f?(this._clearDoubleClickTimeout(d,!0),this._startClick(b)):(this._clearDoubleClickTimeout(d,!1),this._doubleClick.emit(a,void 0,c.event.modifiers))}else this._startClick(b)};f.prototype._startClick=function(b){var a=this,d=this._pointerId(b.data);this._pointerState.set(d,{event:b,doubleClickTimeout:this._clock.setTimeout(function(){return a._doubleClickTimeoutExceeded(d)},"touch"===b.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)});this.refreshHasPendingInputs()};
f.prototype._handlePointerDrag=function(b){b=this._pointerId(b.data.currentEvent);this._clearDoubleClickTimeout(b,!0)};f.prototype._handleDrag=function(b){b=this._pointerId(b.data.pointer);this._clearDoubleClickTimeout(b,!0)};f.prototype._clearDoubleClickTimeout=function(b,a){var d=this._pointerState.get(b);d&&(d.doubleClickTimeout.remove(),d.doubleClickTimeout=null,a&&this._doubleClickTimeoutExceeded(b),this._pointerState.delete(b),this.refreshHasPendingInputs())};f.prototype._doubleClickTimeoutExceeded=
function(b){var a=this._pointerState.get(b);this._click.emit(a.event.data,void 0,a.event.modifiers);a.doubleClickTimeout=null;this._pointerState.delete(b);this.refreshHasPendingInputs()};return f}(d.InputHandler);c.SingleAndDoubleClick=p})},"esri/views/input/recognizers/VerticalTwoFingerDrag":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../DragEventSeparator","../InputHandler"],function(p,c,n,l,k){Object.defineProperty(c,"__esModule",{value:!0});p=function(d){function c(c,
f){void 0===c&&(c=20);void 0===f&&(f=40);var b=d.call(this,!1)||this;b._threshold=c;b._maxDelta=f;b.state="ready";b.emittedArtificalEnd2=!1;b._vertical=b.registerOutgoing("vertical-two-finger-drag");b._artificalDrag=b.registerOutgoing("drag");b.dragEventSeparator=new l.DragEventSeparator({start:function(a,d){return b.observeStart(a,d)},update:function(a,d,c){return b.observeUpdate(a,d,c)},end:function(a,d){return b.observeEnd(a,d)}});b.registerIncoming("drag",function(a){return b.dragEventSeparator.handle(a)});
return b}n(c,d);Object.defineProperty(c.prototype,"failed",{get:function(){return"failed"===this.state},enumerable:!0,configurable:!0});c.prototype.observeStart=function(d,c){1===d&&this.emittedArtificalEnd2&&(this.emittedArtificalEnd2=!1,this._artificalDrag.emit({action:"start",button:c.data.button,buttons:c.data.buttons,pointerType:c.data.pointerType,timestamp:c.data.timestamp,pointers:c.data.pointers,pointer:c.data.pointer,angle:c.data.angle,radius:c.data.radius,center:c.data.center,artifical:!0}),
c.stopPropagation());this.state=2===d?"ready":"failed"};c.prototype.observeUpdate=function(d,c,b){"failed"!==this.state&&2===d&&("active"===this.state?(this._vertical.emit({delta:c.data.center.y-this._thresholdReachedCenter.y,action:"update"}),c.stopPropagation()):this.checkMovementWithinLimits(c.data,b.data)?this.checkVerticalThresholdReached(c.data,b.data)&&(this.state="active",this.emittedArtificalEnd2=!0,this._thresholdReachedCenter=c.data.center,this._artificalDrag.emit({action:"end",button:c.data.button,
buttons:c.data.buttons,pointerType:c.data.pointerType,timestamp:c.data.timestamp,pointers:c.data.pointers,pointer:c.data.pointer,angle:c.data.angle,radius:c.data.radius,center:c.data.center,artifical:!0}),this._vertical.emit({delta:c.data.center.y-this._thresholdReachedCenter.y,action:"begin"}),c.stopPropagation()):this.state="failed")};c.prototype.observeEnd=function(d,c){"active"===this.state&&(this._vertical.emit({delta:c.data.center.y-this._thresholdReachedCenter.y,action:"end"}),this.state="ready",
c.stopPropagation())};c.prototype.checkMovementWithinLimits=function(d,c){var b=-Infinity,a=Infinity,e=-Infinity,f=Infinity;c.pointers.forEach(function(d){b=Math.max(b,d.x);a=Math.min(a,d.x);e=Math.max(e,d.y);f=Math.min(f,d.y)});var g=-Infinity,h=Infinity,k=-Infinity,l=Infinity;d.pointers.forEach(function(a){g=Math.max(g,a.x);h=Math.min(h,a.x);k=Math.max(k,a.y);l=Math.min(l,a.y)});return Math.abs(d.center.x-c.center.x)<this._threshold&&Math.abs(g-h-(b-a))<=this._maxDelta&&Math.abs(k-l-(e-f))<=this._maxDelta};
c.prototype.checkVerticalThresholdReached=function(d,c){var b=Math.abs(d.center.y-c.center.y);d.pointers.forEach(function(a,d){d=c.pointers.get(d);b=Math.min(b,Math.abs(a.y-d.y))});return b>=this._threshold};return c}(k.InputHandler);c.VerticalTwoFingerDrag=p})},"esri/views/input/DragEventSeparator":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(c){this.callbacks=c;this.currentCount=0;this.callbacks.condition||(this.callbacks.condition=
function(){return!0})}c.prototype.handle=function(c){var k=c.data,d=k.pointers.size;switch(k.action){case "start":this.currentCount=d;this.emitStart(c);break;case "added":this.emitEnd(this.previousEvent);this.currentCount=d;this.emitStart(c);break;case "update":this.emitUpdate(c);break;case "removed":this.startEvent&&this.emitEnd(this.previousEvent);this.currentCount=d;this.emitStart(c);break;case "end":this.emitEnd(c),this.currentCount=0}this.previousEvent=c};c.prototype.emitStart=function(c){this.startEvent=
c;this.callbacks.condition(this.currentCount,c)&&this.callbacks.start(this.currentCount,c,this.startEvent)};c.prototype.emitUpdate=function(c){this.callbacks.condition(this.currentCount,c)&&this.callbacks.update(this.currentCount,c,this.startEvent)};c.prototype.emitEnd=function(c){this.callbacks.condition(this.currentCount,c)&&this.callbacks.end(this.currentCount,c,this.startEvent);this.startEvent=null};return c}();c.DragEventSeparator=p})},"esri/views/input/handlers/LatestPointerType":function(){define(["require",
"exports","../../../core/tsSupport/extendsHelper","../InputHandler"],function(p,c,n,l){Object.defineProperty(c,"__esModule",{value:!0});p=function(c){function d(d){var g=c.call(this,!0)||this;g._onChange=d;g._value="mouse";g.registerIncoming("pointer-down",function(d){g._setValue("touch"===d.data.native.pointerType?"touch":"mouse")});g._moveHandler=g.registerIncoming("pointer-move",function(d){g._setValue("touch"===d.data.native.pointerType?"touch":"mouse")});g._moveHandler.pause();return g}n(d,c);
d.prototype._setValue=function(d){d!==this._value&&("touch"===d?this._moveHandler.resume():this._moveHandler.pause(),this._value=d,this._onChange(d))};return d}(l.InputHandler);c.LatestPointerType=p})},"esri/views/input/handlers/PreventContextMenu":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler"],function(p,c,n,l){Object.defineProperty(c,"__esModule",{value:!0});p=function(c){function d(){var d=c.call(this,!0)||this;d.registerIncoming("context-menu",
function(d){d.data.native.preventDefault()});return d}n(d,c);return d}(l.InputHandler);c.PreventContextMenu=p;c.default=p})},"esri/views/3d/layers/graphics/Deconflictor":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/decorateHelper ../../../../core/Accessor ../../../../core/Handles ../../../../core/PooledArray ../../../../core/watchUtils ../../../../core/accessorSupport/decorators ../../../../core/libs/gl-matrix-2/vec2f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4f64 ../../../../geometry/support/aaBoundingRect ./deconflictorDebug ../../support/debugFlags ../../support/earthUtils ../../support/geometryUtils ../../support/mathUtils ../../support/geometryUtils/sphere ../../webgl-engine/lib/screenSizePerspectiveUtils ../../webgl-engine/lib/Util ../../webgl-engine/materials/HUDMaterial ../../webgl-engine/materials/internal/MaterialUtil".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z,A,B,D){function C(a){var b,d,c,e;return l(this,function(f){switch(f.label){case 0:b=[];for(d in a)b.push(d);c=0;f.label=1;case 1:if(!(c<b.length))return[3,4];e=b[c];return[4,a[e]];case 2:f.sent(),f.label=3;case 3:return c++,[3,1];case 4:return[2]}})}Object.defineProperty(c,"__esModule",{value:!0});var E=q.vec4f64.create(),H=q.vec4f64.create(),G=q.vec4f64.create(),I=q.vec4f64.create(),K=w.sphere.create(),M=w.ray.create(),T=m.vec3f64.create(),N=u.create(),
S=u.create(),O=function(){return function(){this.posView=this.yMax=this.yMin=this.xMax=this.xMin=0;this.pooled=this.visible=this.culled=!1}}(),V=function(){return function(a,b,d){void 0===d&&(d={});this.graphics3DGraphic=a;this.slicePlaneEnabled=b;this.info=d}}(),Q=function(){return function(a,b){void 0===b&&(b=new Map);this.graphics3DCore=a;this.graphics=b}}();p=function(a){function d(){var b=null!==a&&a.apply(this,arguments)||this;b.handles=new h;b.dirty=!1;b.state=0;b.contexts=[];b.graphics=null;
b.iterators=null;b.accBinsNumX=15;b.accBinsNumY=20;b.accBinsSizeX=0;b.accBinsSizeY=0;b.accBins=null;b.accNumTests=0;b._iconMarginFactor=-.1;b.slicePlaneViewSpace=null;return b}n(d,a);Object.defineProperty(d.prototype,"iconMarginFactor",{get:function(){return this._iconMarginFactor},set:function(a){this._iconMarginFactor=a;this.setDirty()},enumerable:!0,configurable:!0});d.prototype.initialize=function(){var a=this,b,d;this.graphics=(b={},b[0]={active:{},visible:new g,remove:new g},b[1]={active:{},
visible:new g,remove:new g},b);this.iterators=(d={},d[0]={active:null,visible:null,remove:null,sort:null},d[1]={active:null,visible:null,remove:null,sort:null},d);this.handles.add([this.view.watch("state.camera",function(){a.updateSlicePlane();a.setDirtyUrgent()}),this.view.watch("map.ground.opacity",function(b,d){1!==b&&1!==d||a.setDirtyUrgent()}),f.init(this.view,"slicePlane",function(){return a.updateSlicePlane()})]);this.frameWorker=this.view.resourceController.scheduler.registerTask(12,function(b){return a.run(b)},
function(){return a.needsUpdate()})};d.prototype.updateSlicePlane=function(){var a=this.view&&this.view.slicePlane;a?(this.slicePlaneViewSpace||(this.slicePlaneViewSpace=w.boundedPlane.create()),w.boundedPlane.transform(a,this.view.state.camera.viewMatrix,this.slicePlaneViewSpace),this.slicePlaneChanged()):this.slicePlaneViewSpace&&(this.slicePlaneViewSpace=null,this.slicePlaneChanged())};d.prototype.slicePlaneChanged=function(){for(var a=0,b=this.contexts;a<b.length;a++)if(b[a].graphics3DCore.symbolCreationContext.slicePlaneEnabled){this.setDirty();
break}};d.prototype.destroy=function(){this.handles.destroy();this.handles=null;this.frameWorker&&(this.frameWorker.remove(),this.frameWorker=null);this.graphics[0].active=null;this.graphics[0].visible.clear();this.graphics[0].remove.clear();this.graphics[1].active=null;this.graphics[1].visible.clear();this.graphics[1].remove.clear();this.iterators=this.graphics=null};d.prototype.addGraphicsOwner=function(a){var b=this,d=this.findDeconflictionContext(a),c;-1!==d?c=this.contexts[d]:(c=new Q(a),this.contexts.push(c),
this.setDirtyUrgent());return{addGraphic:function(a){return b.addGraphic(c,a)},removeGraphic:function(a){return b.removeGraphic(c,a)},labelingInfoChange:function(){return b.globalLabelingInfoChanged(c)},visibilityInfoChange:function(){},featureReductionChange:function(){return b.globalFeatureReductionChanged(c)},slicePlaneEnabledChange:function(){return b.globalSlicePlaneEnabledChanged(c)},clear:function(){return c.graphics.forEach(function(a){return b.removeGraphic(c,a.graphics3DGraphic)})}}};d.prototype.removeGraphicsOwner=
function(a){var b=this;a=this.findDeconflictionContext(a);if(-1!==a){var d=this.contexts.splice(a,1)[0];d.graphics.forEach(function(a){return b.removeGraphic(d,a.graphics3DGraphic)});this.setDirtyUrgent()}};d.prototype.setInitialIconVisibilityFlag=function(a,b){a=!(this.graphicSupportsDeconfliction(b)&&this.isFeatureReductionEnabled(a));b.setVisibilityFlag(3,a,0)};d.prototype.setDirtyUrgent=function(){!this.dirty&&0<this.contexts.length&&(this.dirty=!0,this.notifyChange("updating"));this.frameWorker.priority=
2};d.prototype.setDirty=function(){!this.dirty&&0<this.contexts.length&&(this.dirty=!0,this.notifyChange("updating"),this.frameWorker.priority=12)};Object.defineProperty(d.prototype,"updating",{get:function(){return 0!==this.state||this.dirty},enumerable:!0,configurable:!0});d.prototype.needsUpdate=function(){return this.view.ready&&null!=this.view.state&&this.updating};d.prototype.run=function(a){switch(this.state){case 0:t.prepare(this.view),this.dirty=!1,this.camera=this.view.state.camera,this.initBins(this.camera.fullWidth,
this.camera.fullHeight),this.resetIterators(),a.madeProgress();case 1:if(this.state=1,!this.processActiveGraphics(0,a))break;case 3:if(this.state=3,!this.cleanVisibleGraphics(0,a))break;case 5:if(this.state=5,!this.sortVisibleGraphics(0,a))break;case 7:this.state=7;if(!this.deconflictVisibleGraphics(0,a))break;t.drawAccelerationStruct(this,this.graphics[0].visible);case 2:if(this.state=2,!this.processActiveGraphics(1,a))break;case 4:if(this.state=4,!this.cleanVisibleGraphics(1,a))break;case 6:if(this.state=
6,!this.sortVisibleGraphics(1,a))break;case 8:this.state=8;if(!this.deconflictVisibleGraphics(1,a))break;t.drawAccelerationStruct(this,this.graphics[1].visible);default:this.state=0,this.notifyChange("updating")}};d.prototype.findDeconflictionContext=function(a){for(var b=0;b<this.contexts.length;b++)if(this.contexts[b].graphics3DCore===a)return b;return-1};d.prototype.globalFeatureReductionChanged=function(a){var b=this.isFeatureReductionEnabled(a.graphics3DCore);b||this.clearVisibilityFlags(a);
this.modifyGraphics(a,b,0)};d.prototype.globalLabelingInfoChanged=function(a){var b=this.isLabelDeconflictionEnabled(a.graphics3DCore);this.modifyGraphics(a,b,1)};d.prototype.globalSlicePlaneEnabledChanged=function(a){var b=a.graphics3DCore.symbolCreationContext.slicePlaneEnabled;a.graphics.forEach(function(a){a.slicePlaneEnabled=b});this.setDirtyUrgent()};d.prototype.modifyGraphics=function(a,b,d){var c=this;b?a.graphics.forEach(function(a){return c.addToActiveGraphics(a,d)}):a.graphics.forEach(function(a){return c.removeFromActiveGraphics(a,
d)});this.setDirtyUrgent()};d.prototype.graphicSupportsDeconfliction=function(a){var b=a._graphics;if(!b||!b.length||a.isDraped())return!1;for(a=0;a<b.length;a++)if(this.graphics3DGraphicsLayerSupportsDeconfliction(b[a]))return!0;return!1};d.prototype.graphics3DGraphicsLayerSupportsDeconfliction=function(a){if(!a||"object3d"!==a.type)return!1;a=a.stageObject;return 1===(a?a.getNumGeometryRecords():0)&&a.getGeometryRecord(0).material instanceof B?!0:!1};d.prototype.addGraphic=function(a,b){var d=b.graphic.uid;
b=new V(b,a.graphics3DCore.symbolCreationContext.slicePlaneEnabled);a.graphics.set(d,b);this.isFeatureReductionEnabled(a.graphics3DCore)&&this.addToActiveGraphics(b,0);this.isLabelDeconflictionEnabled(a.graphics3DCore)&&this.addToActiveGraphics(b,1);this.setDirty()};d.prototype.removeGraphic=function(a,b){b=b.graphic.uid;var d=a.graphics.get(b);d&&(this.removeFromActiveGraphics(d,0),this.removeFromActiveGraphics(d,1),a.graphics.delete(b),this.setDirty())};d.prototype.addToActiveGraphics=function(a,
b){a.info[b]=new O;this.graphics[b].active[a.graphics3DGraphic.graphic.uid]=a};d.prototype.removeFromActiveGraphics=function(a,b){this.removeFromVisibleGraphics(a,b);this.clearGraphicVisibility(a,b);delete a.info[b];delete this.graphics[b].active[a.graphics3DGraphic.graphic.uid]};d.prototype.addToVisibleGraphics=function(a,b){var d=a.info[b];d&&!d.pooled&&(this.graphics[b].visible.push(a),d.pooled=!0)};d.prototype.removeFromVisibleGraphics=function(a,b){var d=a.info[b];d&&d.pooled&&(this.graphics[b].remove.push(a),
d.pooled=!1)};d.prototype.processActiveGraphics=function(a,b){for(var d=this.getOrCreateActiveGraphicsIterator(a),c="global"===this.view.viewingMode&&1===this.view.map.ground.opacity&&this.camera&&0<this.camera.relativeElevation;!b.done;){b.madeProgress();var e=d.next();if(e.done)return this.resetActiveGraphicsIterator(a),!0;var f=(e=e.value)&&e.info[a];f&&(this.collectGraphics3DGraphics(e,a,c),f.culled?this.removeFromVisibleGraphics(e,a):this.addToVisibleGraphics(e,a))}return!1};d.prototype.cleanVisibleGraphics=
function(a,b){for(var d=this.graphics[a],c=this.ensureRemoveGraphicsIterator(a,b);!b.done;){var e=c.next();b.madeProgress();if(e.done)return d.remove.clear(),this.resetRemoveGraphicsIterator(a),!0}return!1};d.prototype.sortVisibleGraphics=function(a,b){for(var d=this.ensureSortGraphicsIterator(a,function(b,d){return b.info[a]&&d.info[a]?d.info[a].posView-b.info[a].posView:Number.MAX_VALUE},b);!b.done;){var c=d.next();b.madeProgress();if(c.done)return this.resetSortGraphicsIterator(a),!0}return!1};
d.prototype.deconflictVisibleGraphics=function(a,b){for(var d=this.getOrCreateVisibleGraphicsIterator(a),c=1===a;!b.done;){b.madeProgress();var e=d.next();if(e.done)return this.resetVisibleGraphicsIterator(a),!0;var e=e.value,f=e.info[a];if(f&&!f.culled){var m=e.graphics3DGraphic,m=!(c&&!m.isVisible())&&!this.doesIntersectExistingPoly(e,a);(f.visible=m)&&this.addToBins(e,a);this.setGraphicVisibility(e,a,m);m&&t.drawPoly(f,m?"green":"red")}}return!1};d.prototype.resetIterators=function(){this.iterators[0].active=
null;this.iterators[0].visible=null;this.iterators[0].remove=null;this.iterators[0].sort=null;this.iterators[1].active=null;this.iterators[1].visible=null;this.iterators[1].remove=null;this.iterators[1].sort=null};d.prototype.getOrCreateActiveGraphicsIterator=function(a){var b=this.graphics[a];a=this.iterators[a];a.active||(a.active=C(b.active));return a.active};d.prototype.resetActiveGraphicsIterator=function(a){this.iterators[a].active=null};d.prototype.getOrCreateVisibleGraphicsIterator=function(a){var b=
this.graphics[a];a=this.iterators[a];a.visible||(a.visible=b.visible.iterableForEach());return a.visible};d.prototype.resetVisibleGraphicsIterator=function(a){this.iterators[a].visible=null};d.prototype.ensureRemoveGraphicsIterator=function(a,b){var d=this.graphics[a];a=this.iterators[a];a.remove||(a.remove=d.visible.iterableRemoveMany(d.remove.data,function(){return b.done}));return a.remove};d.prototype.resetRemoveGraphicsIterator=function(a){this.iterators[a].remove=null};d.prototype.ensureSortGraphicsIterator=
function(a,b,d){var c=this.graphics[a];a=this.iterators[a];a.sort||(a.sort=c.visible.iterableSort(b,function(){return d.done}));return a.sort};d.prototype.resetSortGraphicsIterator=function(a){this.iterators[a].sort=null};d.prototype.collectGraphics3DGraphics=function(a,b,d){var c=a.graphics3DGraphic;if(!c.destroyed){var f=1===b,g=f?c._labelGraphics:c._graphics,f=f?0:this.iconMarginFactor;b=a.info[b];if(c.isVisible(0,3)){for(var c=u.empty(N),h,k,l=0;l<g.length;l++){var q=g[l];if(this.graphics3DGraphicsLayerSupportsDeconfliction(q)){var t=
q.stageObject,n=t.getGeometryRecord(0),L=n.material,p=this.camera,B=n.geometry.data.getVertexAttr();if(d&&(K.radius=x.earthRadius,e.vec3.sub(M.direction,t.getCenter(),this.camera.eye),e.vec3.copy(M.origin,this.camera.eye),y.intersectRay(K,M,T))){var F=1-Math.abs(Math.tan(e.vec3.angle(t.getCenter(),M.direction)))/this.view.width,F=Math.pow(F,4),C=e.vec3.sqrDist(this.camera.eye,T),Y=e.vec3.sqrDist(this.camera.eye,t.getCenter());if(F*Y>C){b.culled=!0;return}}if(!k){k=t.getCenter();n=n.origin.vec3;D.transformToWorld(k,
n,E);D.transformToView(E,n,p.viewMatrix,H);L.applyVerticalOffsetTransformation(H,B[A.VertexAttrConstants.NORMAL].data,t.objectTransformation,p,J);if(a.slicePlaneEnabled&&this.slicePlaneViewSpace&&w.boundedPlane.extrusionContainsPoint(this.slicePlaneViewSpace,H)){b.culled=!0;return}t=B[A.VertexAttrConstants.AUXPOS1].data;B="screen"!==L.getParameters().centerOffsetUnits;D.transformToProjection(H,p.projectionMatrix,B?t:m.vec3f64.ZEROS,G);k=D.transformToNDC(G,I);B||(k[0]+=t[0]/p.fullWidth*2,k[1]+=t[1]/
p.fullHeight*2);if(-1>k[0]||-1>k[1]||-1>k[2]||1<=k[0]||1<=k[1])break;h=H[2];!r.DISABLE_DECONFLICTOR_VISIBILITY_OFFSET&&b.visible&&(h*=.7)}q=q.getScreenSize(P);q[0]*=p.pixelRatio;q[1]*=p.pixelRatio;z.applyPrecomputedScaleFactorVec2(q,J.factor,q);L=u.offset(L.calculateRelativeScreenBounds(q,J.factorAlignment.scale,S),v.lerp(0,p.fullWidth,.5+.5*k[0]),v.lerp(0,p.fullHeight,.5+.5*k[1]));0!==f&&(p=f*Math.min(u.width(L),u.height(L)),L[0]-=p,L[1]-=p,L[2]+=p,L[3]+=p);u.expand(c,L)}}null==h?b.culled=!0:(b.xMin=
c[0],b.yMin=c[1],b.xMax=c[2],b.yMax=c[3],b.posView=h,b.culled=!1)}else b.culled=!0}};d.prototype.doesIntersectExistingPoly=function(a,b){var d=a.graphics3DGraphic.graphic.uid;a=a.info[b];for(var c=Math.floor(a.xMin/this.accBinsSizeX);c<=Math.floor(a.xMax/this.accBinsSizeX);c++)if(!(0>c||c>=this.accBinsNumX))for(var e=Math.floor(a.yMin/this.accBinsSizeY);e<=Math.floor(a.yMax/this.accBinsSizeY);e++)if(!(0>e||e>=this.accBinsNumY))for(var f=this.accBins[c][e],m=0;m<f.length;m++){var g=f.data[m],h=g.info[b];
if(h&&h.visible&&g.graphics3DGraphic.graphic.uid!==d&&(this.accNumTests++,!(h.xMin>a.xMax||h.xMax<a.xMin||h.yMin>a.yMax||h.yMax<a.yMin)))return!0}return!1};d.prototype.initBins=function(a,b){if(null==this.accBins){this.accBins=[];for(var d=0;d<this.accBinsNumX;d++){this.accBins.push([]);for(var c=this.accBins[this.accBins.length-1],e=0;e<this.accBinsNumY;e++)c.push(new g)}}for(d=0;d<this.accBinsNumX;d++)for(e=0;e<this.accBinsNumY;e++)this.accBins[d][e].clear();this.accBinsSizeX=a/this.accBinsNumX;
this.accBinsSizeY=b/this.accBinsNumY;this.accNumTests=0};d.prototype.addToBins=function(a,b){b=a.info[b];for(var d=Math.floor(b.xMin/this.accBinsSizeX);d<=Math.floor(b.xMax/this.accBinsSizeX);d++)if(!(0>d||d>=this.accBinsNumX))for(var c=Math.floor(b.yMin/this.accBinsSizeY);c<=Math.floor(b.yMax/this.accBinsSizeY);c++)0>c||c>=this.accBinsNumY||this.accBins[d][c].push(a)};d.prototype.isFeatureReductionEnabled=function(a){a=a.layer;return!(!a||!a.featureReduction||"selection"!==a.featureReduction.type)};
d.prototype.isLabelDeconflictionEnabled=function(a){return a.labelsEnabled};d.prototype.clearVisibilityFlags=function(a){(a=a.graphics3DCore.graphics3DGraphics)&&a.forEach(function(a){return a.clearVisibilityFlag(3)})};d.prototype.setGraphicVisibility=function(a,b,d){a=a.graphics3DGraphic;a.destroyed||(a.setVisibilityFlag(3,d,b),1===b&&this.view.labeler.setLabelGraphicVisibility(a,d))};d.prototype.clearGraphicVisibility=function(a,b){a=a.graphics3DGraphic;a.destroyed||a.clearVisibilityFlag(3,b)};
k([b.property({constructOnly:!0})],d.prototype,"view",void 0);k([b.property({type:Boolean,readOnly:!0})],d.prototype,"updating",null);return d=k([b.subclass("esri.views.3d.layers.graphics.Deconflictor")],d)}(b.declared(d));c.Deconflictor=p;var J={factor:{scale:0,factor:0,minPixelSize:0,paddingPixels:0},factorAlignment:{scale:0,factor:0,minPixelSize:0,paddingPixels:0}},P=a.vec2f64.create()})},"esri/views/3d/layers/graphics/deconflictorDebug":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper",
"../../support/debugFlags"],function(p,c,n,l){function k(b,a,d,c,h){var e=g.height,m=f;m.beginPath();m.lineWidth=1;m.strokeStyle=h;m.moveTo(b,e-d);m.lineTo(a,e-d);m.stroke();m.lineTo(a,e-c);m.stroke();m.lineTo(a,e-d);m.stroke();m.lineTo(b,e-d);m.stroke();m.lineTo(b,e-d);m.stroke();m.closePath()}Object.defineProperty(c,"__esModule",{value:!0});var d=!1,h=!1,g,f;c.drawAccelerationStruct=function(b,a){if(h&&f){for(var d=f,c=0,g=0;g<b.accBinsNumX;g++)for(var l=0;l<b.accBinsNumY;l++){var t=b.accBins[g][b.accBinsNumY-
1-l],c=c+t.length,r=g*b.accBinsSizeX,n=(g+1)*b.accBinsSizeX,w=l*b.accBinsSizeY,v=(l+1)*b.accBinsSizeY;d.fillText(t.length.toFixed(),r+5,w+15);k(r,n,w,v,"blue")}d.fillText("total totalShownLabels: "+c,70,40);d.fillText("total visible labels: "+a.length,70,50);d.fillText("total numTests: "+b.accNumTests,70,30)}};c.prepare=function(b){d=l.DECONFLICTOR_SHOW_OUTLINES;h=l.DECONFLICTOR_SHOW_GRID;if(d||h){null==g&&(g=document.createElement("canvas"),g.setAttribute("id","canvas2d"),b.surface.parentElement.style.position=
"relative",b.surface.parentElement.appendChild(g));var a=b.height*b.pixelRatio;g.setAttribute("width",b.width*b.pixelRatio+"px");g.setAttribute("height",a+"px");g.setAttribute("style","position:absolute;left:0px;top:0px;display:block;pointer-events:none;width:"+b.width+"px;height:"+b.height+"px");f=g.getContext("2d");f.clearRect(0,0,b.width,b.height);f.font="12px Arial"}};c.drawPoly=function(b,a){d&&k(b.xMin,b.xMax,b.yMin,b.yMax,a)}})},"esri/views/3d/support/debugFlags":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),
function(p,c,n,l,k,d){return new (function(c){function g(){var d=null!==c&&c.apply(this,arguments)||this;d.SCENEVIEW_HITTEST_RETURN_INTERSECTOR=!1;d.SCENEVIEW_LOCKING_LOG=!1;d.HIGHLIGHTS_GRID_OPTIMIZATION_DISABLED=!1;d.HIGHLIGHTS_VISUALIZE_BLOCKS=!1;d.HIGHLIGHTS_PROFILE_TO_CONSOLE=!1;d.DECONFLICTOR_SHOW_OUTLINES=!1;d.DECONFLICTOR_SHOW_GRID=!1;d.LABELS_SHOW_BORDER=!1;d.OVERLAY_DRAW_TEST_TEXTURE=!1;d.OVERLAY_SHOW_CENTER=!1;d.TESTS_DISABLE_UPDATE_THROTTLE_THRESHOLDS=!1;d.DISABLE_DECONFLICTOR_VISIBILITY_OFFSET=
!1;d.DISABLE_ELEVATION_ALIGNERS_ITERATIVE_UPDATES=!1;d.DRAW_MESH_GEOMETRY_NORMALS=!1;d.FEATURE_TILE_FETCH_SHOW_TILES=!1;d.FEATURE_TILE_TREE_SHOW_TILES=!1;d.ENABLE_PROFILE_DEPTH_RANGE=!1;d.DISABLE_FAST_UPDATES=!1;d.LOD_INSTANCE_RENDERER_DISABLE_UPDATES=!1;d.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL=!1;return d}n(g,c);l([d.property()],g.prototype,"SCENEVIEW_HITTEST_RETURN_INTERSECTOR",void 0);l([d.property()],g.prototype,"SCENEVIEW_LOCKING_LOG",void 0);l([d.property()],g.prototype,"HIGHLIGHTS_GRID_OPTIMIZATION_DISABLED",
void 0);l([d.property()],g.prototype,"HIGHLIGHTS_VISUALIZE_BLOCKS",void 0);l([d.property()],g.prototype,"HIGHLIGHTS_PROFILE_TO_CONSOLE",void 0);l([d.property()],g.prototype,"DECONFLICTOR_SHOW_OUTLINES",void 0);l([d.property()],g.prototype,"DECONFLICTOR_SHOW_GRID",void 0);l([d.property()],g.prototype,"LABELS_SHOW_BORDER",void 0);l([d.property()],g.prototype,"OVERLAY_DRAW_TEST_TEXTURE",void 0);l([d.property()],g.prototype,"OVERLAY_SHOW_CENTER",void 0);l([d.property()],g.prototype,"TESTS_DISABLE_UPDATE_THROTTLE_THRESHOLDS",
void 0);l([d.property()],g.prototype,"DISABLE_DECONFLICTOR_VISIBILITY_OFFSET",void 0);l([d.property()],g.prototype,"DISABLE_ELEVATION_ALIGNERS_ITERATIVE_UPDATES",void 0);l([d.property()],g.prototype,"DRAW_MESH_GEOMETRY_NORMALS",void 0);l([d.property()],g.prototype,"FEATURE_TILE_FETCH_SHOW_TILES",void 0);l([d.property()],g.prototype,"FEATURE_TILE_TREE_SHOW_TILES",void 0);l([d.property()],g.prototype,"ENABLE_PROFILE_DEPTH_RANGE",void 0);l([d.property()],g.prototype,"DISABLE_FAST_UPDATES",void 0);l([d.property()],
g.prototype,"LOD_INSTANCE_RENDERER_DISABLE_UPDATES",void 0);l([d.property()],g.prototype,"LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL",void 0);return g=l([d.subclass("esri.views.3d.support.DebugFlags")],g)}(d.declared(k)))})},"esri/views/3d/webgl-engine/lib/screenSizePerspectiveUtils":function(){define(["require","exports","../../../../core/mathUtils","../../support/earthUtils","../../support/mathUtils"],function(p,c,n,l,k){function d(a){return Math.abs(a*a*a)}function h(a,b,c,e){void 0===e&&(e=m);var f=
c.parameters;c=c.paddingPixelsOverride;e.scale=Math.min(f.divisor/(b-f.offset),1);e.factor=d(a);e.minPixelSize=f.minPixelSize;e.paddingPixels=c;return e}function g(a,b){return 0===a?b.minPixelSize:b.minPixelSize*(1+2*b.paddingPixels/a)}function f(a,b){return Math.max(k.lerp(a*b.scale,a,b.factor),g(a,b))}function b(a,b,d){a=h(a,b,d);a.minPixelSize=0;a.paddingPixels=0;return f(1,a)}Object.defineProperty(c,"__esModule",{value:!0});c.getSettings=function(b){return new a(b,c.defaultDescription)};c.getLabelSettings=
function(b){var d=c.defaultDescription.curvatureDependent;return new a(b,{curvatureDependent:{min:{curvature:d.min.curvature,tiltAngle:d.min.tiltAngle,scaleFallOffFactor:e.curvatureDependent.min.scaleFallOffFactor},max:{curvature:d.max.curvature,tiltAngle:d.max.tiltAngle,scaleFallOffFactor:e.curvatureDependent.max.scaleFallOffFactor}},scaleStart:c.defaultDescription.scaleStart,scaleFallOffRange:c.defaultDescription.scaleFallOffRange,minPixelSize:e.minPixelSize})};c.perspectiveFactor=d;c.scaleFactor=
h;c.applyScaleFactor=f;c.applyScaleFactorVec2=function(a,b,d){void 0===d&&(d=[0,0]);var c=Math.min(Math.max(b.scale,g(a[1],b)/a[1]),1);d[0]=k.lerp(a[0]*c,a[0],b.factor);d[1]=k.lerp(a[1]*c,a[1],b.factor);return d};c.precomputeScale=b;c.precomputeScaleFactor=function(a,d,c,e){e.scale=b(a,d,c);e.factor=0;e.minPixelSize=c.parameters.minPixelSize;e.paddingPixels=c.paddingPixelsOverride;return e};c.applyPrecomputedScaleFactorVec2=function(a,b,d){void 0===d&&(d=[0,0]);b=Math.min(Math.max(b.scale,g(a[1],
b)/a[1]),1);d[0]=a[0]*b;d[1]=a[1]*b;return d};c.scale=function(a,b,d,c){return f(a,h(b,d,c))};var a=function(){function a(a,b,d,c){void 0===d&&(d={camera:{distance:0,fovY:0},divisor:0,offset:0,minPixelSize:0,paddingPixels:0});this.viewingMode=a;this.description=b;this.parameters=d;this._paddingPixelsOverride=c;"local"===this.viewingMode?(this.coverageCompensation=this.surfaceCoverageCompensationLocal,this.calculateCurvatureDependentParameters=this.calculateCurvatureDependentParametersLocal):(this.coverageCompensation=
this.surfaceCoverageCompensationGlobal,this.calculateCurvatureDependentParameters=this.calculateCurvatureDependentParametersGlobal)}Object.defineProperty(a.prototype,"paddingPixelsOverride",{get:function(){return this._paddingPixelsOverride||this.parameters.paddingPixels},enumerable:!0,configurable:!0});a.prototype.update=function(a){if(this.parameters&&this.parameters.camera.fovY===a.fovY&&this.parameters.camera.distance===a.distance)return!1;this.calculateParameters(a,this.parameters);return!0};
a.prototype.overridePadding=function(b){return b!==this.paddingPixelsOverride?new a(this.viewingMode,this.description,this.parameters,b):this};a.prototype.calculateParameters=function(a,b){var d=this.description,c=d.scaleStart,e=d.scaleFallOffRange,d=d.minPixelSize,f=a.fovY,m=a.distance,g=this.calculateCurvatureDependentParameters(a),h=this.coverageCompensation(a,g),k=g.tiltAngle,g=g.scaleFallOffFactor,m=Math.sin(k)*m,k=.5*Math.PI-k-f*(.5-c*h),c=m/Math.cos(k),e=(c-m/Math.cos(k+f*e*h)*g)/(1-g);b.camera.fovY=
a.fovY;b.camera.distance=a.distance;b.offset=e;b.divisor=c-e;b.minPixelSize=d;return b};a.prototype.calculateCurvatureDependentParametersLocal=function(a,b){void 0===b&&(b=q);b.tiltAngle=this.description.curvatureDependent.min.tiltAngle;b.scaleFallOffFactor=this.description.curvatureDependent.min.scaleFallOffFactor;return b};a.prototype.calculateCurvatureDependentParametersGlobal=function(a,b){void 0===b&&(b=q);var d=this.description.curvatureDependent;a=1+a.distance/l.earthRadius;var c=[d.min.curvature,
d.max.curvature],e=c[0];a=n.clamp((Math.sqrt(a*a-1)-e)/(c[1]-e),0,1);c=[d.min,d.max];d=c[0];c=c[1];b.tiltAngle=k.lerp(d.tiltAngle,c.tiltAngle,a);b.scaleFallOffFactor=k.lerp(d.scaleFallOffFactor,c.scaleFallOffFactor,a);return b};a.prototype.surfaceCoverageCompensationLocal=function(a,b){return(a.fovY-b.tiltAngle)/a.fovY};a.prototype.surfaceCoverageCompensationGlobal=function(a,b){var d=l.earthRadius*l.earthRadius;b=b.tiltAngle+.5*Math.PI;var c=a.fovY;a=a.distance;a=a*a+d-2*Math.cos(b)*a*l.earthRadius;
var e=Math.sqrt(a);return(Math.acos(Math.sqrt(a-d)/e)-Math.asin(l.earthRadius/(e/Math.sin(b)))+.5*c)/c};return a}();c.defaultDescription={curvatureDependent:{min:{curvature:k.deg2rad(10),tiltAngle:k.deg2rad(12),scaleFallOffFactor:.5},max:{curvature:k.deg2rad(70),tiltAngle:k.deg2rad(40),scaleFallOffFactor:.8}},scaleStart:.3,scaleFallOffRange:.65,minPixelSize:0};var e={curvatureDependent:{min:{scaleFallOffFactor:.7},max:{scaleFallOffFactor:.95}},minPixelSize:14};c.copyParameters=function(a,b){b.camera.distance=
a.camera.distance;b.camera.fovY=a.camera.fovY;b.divisor=a.divisor;b.offset=a.offset;b.minPixelSize=a.minPixelSize;return b};var m={scale:0,factor:0,minPixelSize:0,paddingPixels:0},q={tiltAngle:0,scaleFallOffFactor:0}})},"esri/views/3d/webgl-engine/materials/HUDMaterial":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/screenUtils ../../../../core/libs/gl-matrix-2/mat3 ../../../../core/libs/gl-matrix-2/mat3f64 ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec2f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/types/mat4 ../../../../geometry/support/aaBoundingRect ../../support/buffer/InterleavedLayout ../lib/ComponentUtils ../lib/GLMaterialTexture ../lib/Material ../lib/screenSizePerspectiveUtils ../lib/Util ./internal/bufferWriters ./internal/MaterialUtil ./renderers/MergedRenderer ../shaders/HUDPrograms ../../../webgl/renderState".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z,A,B,D){function C(a,b,d){a.setUniform1f("cameraGroundRelative",d.cameraAboveGround?1:-1);a.setUniform1f("polygonOffset",b.shaderPolygonOffset);a.setUniform4fv("viewport",d.viewport);a.setUniform1f("perDistancePixelRatio",Math.tan(d.fovY/2)/(d.viewport[2]/2));z.bindVerticalOffset(b.verticalOffset,d,a);a.setUniformMatrix4fv("viewNormal",d.viewInvTransp);b.screenSizePerspective&&(z.bindScreenSizePerspective(b.screenSizePerspective,a,"screenSizePerspective"),
z.bindScreenSizePerspective(b.screenSizePerspectiveAlignment||b.screenSizePerspective,a,"screenSizePerspectiveAlignment"))}function E(a,b,d,c){d.occlusionTest&&(b.setUniform1i("hudVisibilityTexture",1),a.bindTexture(c.hudVisibilityTexture,1),a.setActiveTexture(0));b.setUniform1f("uRenderTransparentlyOccludedHUD","occluded"===c.renderTransparentlyOccludedHUD?1:"notOccluded"===c.renderTransparentlyOccludedHUD?0:.75);a=c.pixelRatio||1;b.setUniform4fv("overrideColor",d.color);b.setUniform1f("pixelRatio",
a);d.textureIsSignedDistanceField&&(b.setUniform4fv("outlineColor",d.outlineColor),b.setUniform1f("outlineSize",d.outlineSize));d.vvSizeEnabled&&(b.setUniform3fv("vvSizeMinSize",d.vvSizeMinSize),b.setUniform3fv("vvSizeMaxSize",d.vvSizeMaxSize),b.setUniform3fv("vvSizeOffset",d.vvSizeOffset),b.setUniform3fv("vvSizeFactor",d.vvSizeFactor));d.vvColorEnabled&&(b.setUniform1fv("vvColorValues",d.vvColorValues),b.setUniform4fv("vvColorColors",d.vvColorColors));b.setUniform2f("screenOffset",2*d.screenOffset[0]*
a,2*d.screenOffset[1]*a);b.setUniform2fv("anchorPos",H(d))}function H(a,b){void 0===b&&(b=M);if(a.textureIsSignedDistanceField){var d=a.anchorPos;a=a.distanceFieldBoundingBox;var c=b;c[0]=d[0]*(a[2]-a[0])+a[0];c[1]=d[1]*(a[3]-a[1])+a[1]}else f.vec2.copy(b,a.anchorPos);return b}p=function(b){function d(a,d){d=b.call(this,d)||this;d.params=z.copyParameters(a,da);return d}n(d,b);d.prototype.dispose=function(){};d.prototype.setParameterValues=function(a){for(var b in a)"textureId"===b&&v.assert(!!this.params.textureId,
"Can only change texture of material that already has a texture"),this.params[b]=a[b];this.notifyDirty("matChanged")};d.prototype.getParameters=function(){return this.params};d.prototype.intersect=function(a,b,d,c,e,f,m,g,h){h?this.intersectDrapedRenderHudGeometry(a,b,d,c,e,f,m,g):this.intersectHudGeometry(a,b,d,c,e,f,m,g)};d.prototype.intersectDrapedRenderHudGeometry=function(b,d,c,e,f,m,g,h){d=b.getAttribute(v.VertexAttrConstants.POSITION);c=b.getAttribute(v.VertexAttrConstants.SIZE);e=this.params;
f=H(e);var k=1,l=1;h&&(l=h(F),k=l[0],l=l[5]);k*=b.pixelRatio;l*=b.pixelRatio;h=X*b.pixelRatio;for(var q=0;q<d.data.length/d.size;q++){var r=q*d.size;a.vec3.set(T,d.data[r],d.data[r+1],d.data[r+2]);r=q*c.size;R[0]=c.data[r]*k;R[1]=c.data[r+1]*l;var r=T[0],t=T[1],u=void 0;e.textureIsSignedDistanceField&&(u=e.outlineSize*b.pixelRatio/2);this._isInsideIconBoundaries(m,r,t,h,u,e,f)&&g()}};d.prototype.intersectHudGeometry=function(b,d,c,f,m,g,l,q){if(f.enable.selectionMode&&f.enable.hud&&!t.isAllHidden(d.componentVisibilities,
b.componentOffsets)){var r=b.data;b=this.params;m=d=1;k.mat3.fromMat4(Q,c);if(q){m=q(F);d=m[0];m=m[5];q=Q;g=q[0];var u=q[1],y=q[2],n=q[3],x=q[4],A=q[5],z=q[6],L=q[7],p=q[8],B=1/Math.sqrt(g*g+u*u+y*y),M=1/Math.sqrt(n*n+x*x+A*A),C=1/Math.sqrt(z*z+L*L+p*p);q[0]=g*B;q[1]=u*B;q[2]=y*B;q[3]=n*M;q[4]=x*M;q[5]=A*M;q[6]=z*C;q[7]=L*C;q[8]=p*C}q=r.getVertexAttr()[v.VertexAttrConstants.POSITION];g=r.getVertexAttr()[v.VertexAttrConstants.SIZE];u=r.getVertexAttr()[v.VertexAttrConstants.NORMAL];r=r.getVertexAttr()[v.VertexAttrConstants.AUXPOS1];
v.assert(3<=q.size);y=f.point;n=f.camera;x=H(b);d*=n.pixelRatio;m*=n.pixelRatio;A="screen"===this.params.centerOffsetUnits;for(z=0;z<q.data.length/q.size;z++)L=z*q.size,a.vec3.set(T,q.data[L],q.data[L+1],q.data[L+2]),a.vec3.transformMat4(T,T,c),L=z*g.size,R[0]=g.data[L]*d,R[1]=g.data[L+1]*m,a.vec3.transformMat4(T,T,n.viewMatrix),L=z*r.size,a.vec3.set(P,r.data[L+0],r.data[L+1],r.data[L+2]),A||(T[0]+=P[0],T[1]+=P[1],0!==P[2]&&(L=P[2],a.vec3.normalize(P,T),a.vec3.subtract(T,T,a.vec3.scale(P,P,L)))),
L=z*u.size,a.vec3.set(N,u.data[L],u.data[L+1],u.data[L+2]),this.applyVerticalOffsetTransformation(T,N,Q,n,K),n.applyProjection(T,S),-1<S[0]&&(L=Math.floor(S[0])+this.params.screenOffset[0],p=Math.floor(S[1])+this.params.screenOffset[1],A&&(L+=P[0],0!==P[1]&&(p+=w.applyScaleFactor(P[1],K.factorAlignment))),w.applyPrecomputedScaleFactorVec2(R,K.factor,R),B=Y*n.pixelRatio,M=void 0,b.textureIsSignedDistanceField&&(M=b.outlineSize*n.pixelRatio/2),this._isInsideIconBoundaries(y,L,p,B,M,b,x)&&(p=f.ray,a.vec3.transformMat4(V,
T,h.mat4.invert(J,n.viewMatrix)),S[0]=y[0],S[1]=y[1],n.unprojectPoint(S,T),L=e.vec3f64.create(),a.vec3.copy(L,p.direction),B=1/a.vec3.length(L),a.vec3.scale(L,L,B),p=a.vec3.distance(p.origin,T)*B,l(p,L,-1,1,!0,V)))}};d.prototype._isInsideIconBoundaries=function(a,b,d,c,e,f,m){b=b-c-(0<m[0]?R[0]*m[0]:0);var g=b+R[0]+2*c;d=d-c-(0<m[1]?R[1]*m[1]:0);c=d+R[1]+2*c;f.textureIsSignedDistanceField&&(f=f.distanceFieldBoundingBox,b+=R[0]*f[0],d+=R[1]*f[1],g-=R[0]*(1-f[2]),c-=R[1]*(1-f[3]),b-=e,g+=e,d-=e,c+=
e);return a[0]>b&&a[0]<g&&a[1]>d&&a[1]<c};d.prototype.createBufferWriter=function(){return new ba(this)};d.prototype.createRenderer=function(a,b){return new A(a,b,this)};d.prototype.normalAndViewAngle=function(b,d,c,e){void 0===e&&(e=L);a.vec3.transformMat3(e.normal,b,d);a.vec3.transformMat4(e.normal,e.normal,c.viewInverseTransposeMatrix);e.cosAngle=a.vec3.dot(O,Z);return e};d.prototype.updateScaleInfo=function(a,b,d){b=this.params;b.screenSizePerspective?a.factor=w.precomputeScaleFactor(L.cosAngle,
d,b.screenSizePerspective,a.factor):(a.factor.scale=1,a.factor.factor=0,a.factor.minPixelSize=0,a.factor.paddingPixels=0);b.screenSizePerspectiveAlignment?a.factorAlignment=w.precomputeScaleFactor(L.cosAngle,d,b.screenSizePerspectiveAlignment,a.factorAlignment):(a.factorAlignment.factor=a.factor.factor,a.factorAlignment.scale=a.factor.scale,a.factorAlignment.minPixelSize=a.factor.minPixelSize,a.factorAlignment.paddingPixels=a.factor.paddingPixels)};d.prototype.applyVerticalOffsetTransformation=function(b,
d,c,e,f,g){var h=this.params;m.isMat4(c)&&(c=k.mat3.fromMat4(Q,c));if(!h.verticalOffset||!h.verticalOffset.screenLength)return f&&(h.screenSizePerspective||h.screenSizePerspectiveAlignment)?(e=this.normalAndViewAngle(d,c,e),h=a.vec3.length(b),this.updateScaleInfo(f,e.cosAngle,h)):f&&(f.factor.scale=1,f.factorAlignment.scale=1),g?a.vec3.copy(g,b):b;d=this.normalAndViewAngle(d,c,e);c=a.vec3.length(b);e=z.verticalOffsetAtDistance(e,c,h.verticalOffset,d.cosAngle,h.screenSizePerspectiveAlignment||h.screenSizePerspective);
f&&this.updateScaleInfo(f,d.cosAngle,c);return a.vec3.add(g||b,b,a.vec3.scale(d.normal,d.normal,e))};d.prototype.getGLMaterials=function(){return{color:G,depthShadowMap:void 0,normal:void 0,depth:void 0,highlight:I}};d.prototype.calculateRelativeScreenBounds=function(a,b,d){void 0===d&&(d=q.create());var c=this.params,e=d;void 0===e&&(e=M);f.vec2.copy(e,c.anchorPos);e[0]*=-a[0];e[1]*=-a[1];e[0]+=c.screenOffset[0]*b;e[1]+=c.screenOffset[1]*b;d[2]=d[0]+a[0];d[3]=d[1]+a[1];return d};d.prototype.calculateAnchorPosForRendering=
function(a){return H(this.params,a)};d.shouldRenderVisibilityDuringRenderPass=function(a){return 0===a||4};return d}(x);var G=function(a){function b(b,d,c){b=a.call(this,b,d,c,b.getParameters().textureId)||this;b.isOcclusionSlot=!1;b.updateParameters();return b}n(b,a);b.prototype.selectSlot=function(){this.mainSlot=this.params.drawInSecondSlot?17:16};b.prototype.selectProgram=function(){var a=this.params;this.occlusionProgram=this.programRep.getProgram(B.occlusionPass,{verticalOffset:!!a.verticalOffset,
screenSizePerspective:!!a.screenSizePerspective,centerOffsetUnitsScreen:"screen"===a.centerOffsetUnits,slice:a.slicePlaneEnabled});this.renderProgram=this.programRep.getProgram(B.colorPass,{occlTest:a.occlusionTest,sdf:a.textureIsSignedDistanceField,vvSize:!!a.vvSizeEnabled,vvColor:!!a.vvColorEnabled,verticalOffset:!!a.verticalOffset,screenSizePerspective:!!a.screenSizePerspective,centerOffsetUnitsScreen:"screen"===a.centerOffsetUnits,debugDrawBorder:!!a.debugDrawBorder,slice:a.slicePlaneEnabled});
this.renderPipelineState=D.makePipelineState({blending:D.simpleBlendingParams(1,771),polygonOffset:a.polygonOffset&&ha,depthTest:{func:515},depthWrite:D.defaultDepthWriteParams,colorWrite:D.defaultColorWriteParams});this.occlusionPipelineState=D.makePipelineState({depthTest:{func:515},depthWrite:D.defaultDepthWriteParams,colorWrite:D.defaultColorWriteParams})};b.prototype.beginSlot=function(a){if(this.params.occlusionTest)return this.isOcclusionSlot=11===a,11===a||a===this.mainSlot;this.isOcclusionSlot=
!1;return a===this.mainSlot};b.prototype.getProgram=function(){return this.isOcclusionSlot?this.occlusionProgram:this.renderProgram};b.prototype.getPrograms=function(){return[this.occlusionProgram,this.renderProgram]};b.prototype.updateParameters=function(){this.params=z.copyParameters(this.material.getParameters());this.updateTexture(this.params.textureId);this.selectProgram();this.selectSlot()};b.prototype.bind=function(a,b){if(this.isOcclusionSlot){var d=this.occlusionProgram;a.bindProgram(d);
a.setPipelineState(this.occlusionPipelineState);C(d,this.params,b);d.setUniform4f("color",1,1,1,1);d.setUniform1f("pixelRatio",b.pixelRatio||1)}else d=this.renderProgram,a.bindProgram(d),a.setPipelineState(this.renderPipelineState),this.bindTexture(a,d),this.bindTextureScale(a,d),C(d,this.params,b),E(a,d,this.params,b)};b.prototype.bindView=function(a,b){a=b.origin;var d=this.getProgram();z.bindView(a,b.view,d);z.bindCamPos(a,b.viewInvTransp,d);this.params.slicePlaneEnabled&&z.bindSlicePlane(b.origin,
b.slicePlane,d)};b.prototype.bindInstance=function(a,b){a=this.getProgram();a.setUniformMatrix4fv("model",b.transformation);a.setUniformMatrix4fv("modelNormal",b.transformationNormal)};b.prototype.release=function(a){};b.prototype.getDrawMode=function(){return this.isOcclusionSlot?0:4};return b}(r),I=function(a){function b(b,d,c){b=a.call(this,b,d,c,b.getParameters().textureId)||this;b.updateParameters();return b}n(b,a);b.prototype.selectSlot=function(){this.mainSlot=this.params.drawInSecondSlot?
17:16};b.prototype.beginSlot=function(a){return a===this.mainSlot};b.prototype.getProgram=function(){return this.program};b.prototype.updateParameters=function(){this.params=z.copyParameters(this.material.getParameters());this.updateTexture(this.params.textureId);this.selectProgram();this.selectSlot()};b.prototype.selectProgram=function(){var a=this.params;this.program=this.programRep.getProgram(B.highlightPass,{occlTest:a.occlusionTest,sdf:a.textureIsSignedDistanceField,vvSize:!!a.vvSizeEnabled,
vvColor:!!a.vvColorEnabled,verticalOffset:!!a.verticalOffset,screenSizePerspective:!!a.screenSizePerspective,centerOffsetUnitsScreen:"screen"===a.centerOffsetUnits,binaryHighlightOcclusion:a.binaryHighlightOcclusion,slice:a.slicePlaneEnabled});this.pipelineState=D.makePipelineState({blending:D.separateBlendingParams(1,1,771,771),polygonOffset:a.polygonOffset&&ha,depthTest:{func:513},colorWrite:D.defaultColorWriteParams})};b.prototype.bind=function(a,b){var d=this.program;a.bindProgram(d);a.setPipelineState(this.pipelineState);
this.bindTexture(a,d);this.bindTextureScale(a,d);C(d,this.params,b);E(a,d,this.params,b);z.bindHighlightRendering(a,b,this.program)};b.prototype.bindView=function(a,b){a=b.origin;var d=this.getProgram();z.bindView(a,b.view,d);z.bindCamPos(a,b.viewInvTransp,d);this.params.slicePlaneEnabled&&z.bindSlicePlane(b.origin,b.slicePlane,d)};b.prototype.bindInstance=function(a,b){a=this.getProgram();a.setUniformMatrix4fv("model",b.transformation);a.setUniformMatrix4fv("modelNormal",b.transformationNormal)};
b.prototype.release=function(a){};b.prototype.getDrawMode=function(){return 4};return b}(r),K={factor:{scale:0,factor:0,minPixelSize:0,paddingPixels:0},factorAlignment:{scale:0,factor:0,minPixelSize:0,paddingPixels:0}},M=b.vec2f64.create(),T=e.vec3f64.create(),N=e.vec3f64.create(),S=l.createRenderScreenPointArray3(),O=e.vec3f64.create(),V=e.vec3f64.create(),Q=d.mat3f64.create(),J=g.mat4f64.create(),P=e.vec3f64.create(),L={normal:O,cosAngle:0},F=g.mat4f64.create();h.mat4.identity(F);var Y=1,X=2,R=
[0,0],Z=e.vec3f64.fromValues(0,0,1),da={texCoordScale:[1,1],occlusionTest:!0,binaryHighlightOcclusion:!0,drawInSecondSlot:!1,color:[1,1,1,1],outlineColor:[1,1,1,1],outlineSize:0,textureIsSignedDistanceField:!1,distanceFieldBoundingBox:null,vvSizeEnabled:!1,vvSizeMinSize:[1,1,1],vvSizeMaxSize:[100,100,100],vvSizeOffset:[0,0,0],vvSizeFactor:[1,1,1],vvColorEnabled:!1,vvColorValues:[0,0,0,0,0,0,0,0],vvColorColors:[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],screenOffset:[0,0],verticalOffset:null,
screenSizePerspective:null,screenSizePerspectiveAlignment:null,slicePlaneEnabled:!1,anchorPos:b.vec2f64.fromValues(.5,.5),shaderPolygonOffset:1E-5,polygonOffset:!1,textureId:null,centerOffsetUnits:"world",debugDrawBorder:!1},ja=u.newLayout().vec3f(v.VertexAttrConstants.POSITION).vec3f(v.VertexAttrConstants.NORMAL).vec2f(v.VertexAttrConstants.UV0).vec4u8(v.VertexAttrConstants.COLOR).vec2f(v.VertexAttrConstants.SIZE).vec4f(v.VertexAttrConstants.AUXPOS1).vec4f(v.VertexAttrConstants.AUXPOS2),ba=function(){function a(a){this.material=
a;this.vertexBufferLayout=ja}a.prototype.allocate=function(a){return this.vertexBufferLayout.createBuffer(a)};a.prototype.elementCount=function(a){return 6*a.indices[v.VertexAttrConstants.POSITION].length};a.prototype.write=function(a,b,d,c){y.writePosition(b.indices[v.VertexAttrConstants.POSITION],b.vertexAttr[v.VertexAttrConstants.POSITION].data,a.transformation,d.position,c,6);y.writeNormal(b.indices[v.VertexAttrConstants.NORMAL],b.vertexAttr[v.VertexAttrConstants.NORMAL].data,a.invTranspTransformation,
d.normal,c,6);a=b.vertexAttr[v.VertexAttrConstants.UV0].data;var e=void 0,f=void 0,m=void 0,g=void 0;null==a||4>a.length?(a=this.material.getParameters(),f=e=0,m=a.texCoordScale[0],g=a.texCoordScale[1]):(e=a[0],f=a[1],m=a[2],g=a[3]);var m=Math.min(1.99999,m+1),g=Math.min(1.99999,g+1),h=b.indices[v.VertexAttrConstants.POSITION].length,k=d.uv0;a=c;for(var l=0;l<h;++l)k.set(a,0,e),k.set(a,1,f),a+=1,k.set(a,0,m),k.set(a,1,f),a+=1,k.set(a,0,m),k.set(a,1,g),a+=1,k.set(a,0,m),k.set(a,1,g),a+=1,k.set(a,0,
e),k.set(a,1,g),a+=1,k.set(a,0,e),k.set(a,1,f),a+=1;y.writeColor(b.indices[v.VertexAttrConstants.COLOR],b.vertexAttr[v.VertexAttrConstants.COLOR].data,4,d.color,c,6);e=b.indices[v.VertexAttrConstants.SIZE];f=b.vertexAttr[v.VertexAttrConstants.SIZE].data;m=e.length;g=d.size;a=c;for(l=0;l<m;++l)for(var h=f[2*e[l]],k=f[2*e[l]+1],q=0;6>q;++q)g.set(a,0,h),g.set(a,1,k),a+=1;b.indices[v.VertexAttrConstants.AUXPOS1]&&b.vertexAttr[v.VertexAttrConstants.AUXPOS1]&&y.writeBufferVec4(b.indices[v.VertexAttrConstants.AUXPOS1],
b.vertexAttr[v.VertexAttrConstants.AUXPOS1].data,d.auxpos1,c,6);b.indices[v.VertexAttrConstants.AUXPOS2]&&b.vertexAttr[v.VertexAttrConstants.AUXPOS2]&&y.writeBufferVec4(b.indices[v.VertexAttrConstants.AUXPOS2],b.vertexAttr[v.VertexAttrConstants.AUXPOS2].data,d.auxpos2,c,6)};return a}(),ha={factor:0,units:-4};return p})},"esri/core/libs/gl-matrix-2/types/mat4":function(){define(["require","exports"],function(p,c){function n(c){return c instanceof Float32Array&&16<=c.length}function l(c){return Array.isArray(c)&&
16<=c.length}Object.defineProperty(c,"__esModule",{value:!0});c.isMat4f32=n;c.isMat4f64=l;c.isMat4=function(c){return n(c)||l(c)}})},"esri/views/3d/webgl-engine/lib/GLMaterialTexture":function(){define("require exports ../../../../core/tsSupport/extendsHelper ./DefaultTextureUnits ./GLMaterial ../materials/internal/MaterialUtil".split(" "),function(p,c,n,l,k,d){return function(c){function g(f,b,a,e,m,g,h,k,l){void 0===l&&(l=!1);f=c.call(this,f,b)||this;f.textureRep=a;f.textureId=e;f.initTransparent=
l;f.glTextureRef=d.acquireIfNotUndefined(f.textureId,a,f.initTransparent);m&&(f.glTextureRefNormal=d.acquireIfNotUndefined(m,a,f.initTransparent));g&&(f.glTextureRefEmission=d.acquireIfNotUndefined(g,a,f.initTransparent));h&&(f.glTextureRefOcclusion=d.acquireIfNotUndefined(h,a,f.initTransparent));k&&(f.glTextureRefRoughnessMetallness=d.acquireIfNotUndefined(k,a,f.initTransparent));return f}n(g,c);g.prototype.dispose=function(){d.releaseIfNotUndefined(this.textureId,this.textureRep)};g.prototype.updateTexture=
function(c){c!==this.textureId&&(d.releaseIfNotUndefined(this.textureId,this.textureRep),this.textureId=c,this.glTextureRef=d.acquireIfNotUndefined(this.textureId,this.textureRep,this.initTransparent))};g.prototype.bindTexture=function(d,b){null!=this.glTextureRef&&(b.setUniform1i("tex",l.DefaultTextureUnits.DIFFUSE),d.bindTexture(this.glTextureRef.getGLTexture(),l.DefaultTextureUnits.DIFFUSE));this.glTextureRefNormal&&(b.setUniform1i("texNormal",l.DefaultTextureUnits.NORMAL),d.bindTexture(this.glTextureRefNormal.getGLTexture(),
l.DefaultTextureUnits.NORMAL));this.glTextureRefEmission&&(b.setUniform1i("texEmission",l.DefaultTextureUnits.EMISSION),d.bindTexture(this.glTextureRefEmission.getGLTexture(),l.DefaultTextureUnits.EMISSION));this.glTextureRefOcclusion&&(b.setUniform1i("texOcclusion",l.DefaultTextureUnits.OCCLUSION),d.bindTexture(this.glTextureRefOcclusion.getGLTexture(),l.DefaultTextureUnits.OCCLUSION));this.glTextureRefRoughnessMetallness&&(b.setUniform1i("texMetallicRoughness",l.DefaultTextureUnits.METALLIC_ROUGHNESS),
d.bindTexture(this.glTextureRefRoughnessMetallness.getGLTexture(),l.DefaultTextureUnits.METALLIC_ROUGHNESS))};g.prototype.bindTextureSize=function(d,b){null!=this.glTextureRef&&(d=this.glTextureRef.getGLTexture(),b.setUniform2f("texSize",d.descriptor.width,d.descriptor.height))};g.prototype.bindTextureScale=function(d,b){(d=this.glTextureRef&&this.glTextureRef.getGLTexture())&&d.descriptor.textureCoordinateScaleFactor?b.setUniform2fv("textureCoordinateScaleFactor",d.descriptor.textureCoordinateScaleFactor):
b.setUniform2f("textureCoordinateScaleFactor",1,1)};return g}(k)})},"esri/views/3d/webgl-engine/lib/DefaultTextureUnits":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});c.DefaultTextureUnits={DIFFUSE:0,COMPONENT_COLOR:1,NORMAL:2,EMISSION:3,OCCLUSION:4,METALLIC_ROUGHNESS:5}})},"esri/views/3d/webgl-engine/lib/GLMaterial":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","./AutoDisposable"],function(p,c,n,l){return function(c){function d(d,
g){var f=c.call(this)||this;f.material=d;f.programRep=g;return f}n(d,c);d.prototype.isVisible=function(){return this.material.isVisible()};d.prototype.isVisibleInPass=function(d){return this.material.isVisibleInPass(d)};d.prototype.getPrograms=function(){return[this.getProgram()]};d.prototype.getDrawMode=function(){return 4};d.prototype.release=function(d,c){};d.prototype.updateAnimation=function(d){return this.material.animationSupported?(this.animate(d),!0):!1};return d}(l.AutoDisposable)})},"esri/views/3d/webgl-engine/lib/AutoDisposable":function(){define(["require",
"exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(){this._isDisposed=!1}c.prototype.dispose=function(){for(var c=this.__proto__.__managedDisposables__||[],k=c.length-1;0<=k;k--){var d=c[k];this[d]&&"function"===typeof this[d].dispose&&this[d].dispose();this[d]=null}this._isDisposed=!0};Object.defineProperty(c.prototype,"isDisposed",{get:function(){return this._isDisposed},enumerable:!0,configurable:!0});return c}();c.AutoDisposable=p;c.autoDispose=function(){return function(c,
l){c.__managedDisposables__=c.__managedDisposables__||[];c.__managedDisposables__.push(l)}}})},"esri/views/3d/webgl-engine/materials/internal/MaterialUtil":function(){define("require exports ../../../../../core/mathUtils ../../../../../core/libs/gl-matrix-2/mat4 ../../../../../core/libs/gl-matrix-2/mat4f32 ../../../../../core/libs/gl-matrix-2/mat4f64 ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../../../core/libs/gl-matrix-2/vec4 ../../../../../geometry/support/aaBoundingBox ../../lib/ComponentUtils ../../lib/doublePrecisionUtils ../../lib/screenSizePerspectiveUtils ../../lib/Util".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q){function u(a,d,c,e,f){var m=x(d,c,D);b.setMin(A,a.getBBMin());b.setMax(A,a.getBBMax());if(w(A,d,m,e)){var m=a.getPrimitiveIndices(),g=a.getIndices(),h=a.getPosition(),k=m?m.length:g.length/3;if(k>N&&(a=a.getChildren(),void 0!==a)){for(m=0;8>m;++m)void 0!==a[m]&&u(a[m],d,c,e,f);return}t(d,c,0,k,g,h,m,f)}}function t(a,b,d,c,e,f,m,g){if(m){var h=f.data,k=f.offsetIdx;f=f.strideIdx;var l=a[0],q=a[1];a=a[2];var t=b[0]-l,u=b[1]-q;for(b=b[2]-a;d<c;++d){var y=m[d],n=3*
y,v=k+f*e[n++],x=h[v++],w=h[v++],A=h[v],v=k+f*e[n++],z=h[v++],p=h[v++],L=h[v],v=k+f*e[n],n=h[v++],B=h[v++],z=z-x,p=p-w,L=L-A,n=n-x,B=B-w,v=h[v]-A,M=u*v-B*b,K=b*n-v*t,F=t*B-n*u,D=z*M+p*K+L*F;if(!(Math.abs(D)<=C)){x=l-x;w=q-w;A=a-A;M=x*M+w*K+A*F;if(0<D){if(0>M||M>D)continue}else if(0<M||M<D)continue;K=w*L-p*A;A=A*z-L*x;w=x*p-z*w;x=t*K+u*A+b*w;if(0<D){if(0>x||M+x>D)continue}else if(0<x||M+x<D)continue;A=(n*K+B*A+v*w)/D;0<=A&&(z=r(z,p,L,n,B,v,E),g(A,z,y))}}}else for(m=f.data,h=f.offsetIdx,k=f.strideIdx,
f=a[0],l=a[1],q=a[2],a=b[0]-f,t=b[1]-l,u=b[2]-q,b=d,d*=3;b<c;++b)if(B=h+k*e[d++],D=m[B++],w=m[B++],A=m[B],B=h+k*e[d++],y=m[B++],z=m[B++],p=m[B],B=h+k*e[d++],L=m[B++],n=m[B++],y-=D,z-=w,p-=A,L-=D,n-=w,B=m[B]-A,x=t*B-n*u,M=u*L-B*a,K=a*n-L*t,v=y*x+z*M+p*K,!(Math.abs(v)<=C)){D=f-D;w=l-w;A=q-A;x=D*x+w*M+A*K;if(0<v){if(0>x||x>v)continue}else if(0<x||x<v)continue;M=w*p-z*A;A=A*y-p*D;w=D*z-y*w;D=a*M+t*A+u*w;if(0<v){if(0>D||x+D>v)continue}else if(0<D||x+D<v)continue;A=(L*M+n*A+B*w)/v;0<=A&&(y=r(y,z,p,L,n,
B,E),g(A,y,b))}}function r(a,b,d,c,e,f,m){h.vec3.set(H,a,b,d);h.vec3.set(G,c,e,f);h.vec3.cross(m,H,G);h.vec3.normalize(m,m);return m}function x(a,b,d){return h.vec3.set(d,1/(b[0]-a[0]),1/(b[1]-a[1]),1/(b[2]-a[2]))}function w(a,b,d,c){var e=(a[0]-c-b[0])*d[0],f=(a[3]+c-b[0])*d[0],m=Math.min(e,f),e=Math.max(e,f),f=(a[1]-c-b[1])*d[1],g=(a[4]+c-b[1])*d[1],m=Math.max(m,Math.min(f,g)),e=Math.min(e,Math.max(f,g));if(m>e)return!1;f=(a[2]-c-b[2])*d[2];a=(a[5]+c-b[2])*d[2];m=Math.max(m,Math.min(f,a));e=Math.min(e,
Math.max(f,a));return m<=e}function v(a,b){b=b?v(b):{};for(var d in a){var c=a[d];c&&c.forEach&&(c=y(c));null==c&&d in b||(b[d]=c)}return b}function y(a){var b=[];a.forEach(function(a){return b.push(a)});return b}Object.defineProperty(c,"__esModule",{value:!0});var z=d.mat4f64.create(),A=b.create(),B=q.VertexAttrConstants;c.IDENTITY=d.mat4f64.create();c.intersectTriangleGeometry=function(d,c,e,f,m,g,h,k){c=c&&c.componentVisibilities;f=f.tolerance;if(1<d.componentCount)a:{e=x(m,g,D);k=d.componentCount;
var l=d.componentOffsets,r=d.getIndices(B.POSITION),y=d.getAttribute(B.POSITION),n=d.boundingInfo;if(n&&(b.setMin(A,n.getBBMin()),b.setMax(A,n.getBBMax()),!w(A,m,e,f)))break a;for(n=0;n<k;n++)if(!c||a.getVisibility(c,n)){if(d.getComponentAABB){var v=d.getComponentAABB(n,A);if(!w(v,m,e,f))continue}t(m,g,l[n]/3,l[n+1]/3,r,y,void 0,h)}}else if(!c||a.getVisibility(c,0))d.boundingInfo?(q.assert("triangle"===d.data.primitiveType),u(d.boundingInfo,m,g,f,h)):(c=d.getIndices(B.POSITION),d=d.getAttribute(B.POSITION),
t(m,g,0,c.length/3,c,d,void 0,h))};var D=g.vec3f64.create(),C=Math.pow(2,-52),E=g.vec3f64.create();c.intersectTriangles=t;var H=g.vec3f64.create(),G=g.vec3f64.create();c.computeNormal=r;c.intersectAabbInvDir=w;c.transformToWorld=function(a,b,d){return f.vec4.set(d,a[0]-b[0],a[1]-b[1],a[2]-b[2],1)};c.transformToView=function(a,b,d,c){l.mat4.translate(z,d,b);d=z;return f.vec4.transformMat4(c,a,d)};c.transformToProjection=function(a,b,d,c){c[0]=a[0]+d[0];c[1]=a[1]+d[1];c[2]=a[2]+d[2];c[3]=a[3];return f.vec4.transformMat4(c,
c,b)};c.transformToNDC=function(a,b){return f.vec4.scale(b,a,1/Math.abs(a[3]))};c.applyScreenSizePerspectiveScale=function(a,b,d,c,e){return m.scale(a,c,d,e)};c.verticalOffsetAtDistance=function(a,b,d,c,e){var f=(d.screenLength||0)*a.pixelRatio;e&&(f=m.scale(f,c,b,e));return n.clamp(f*Math.tan(.5*a.fovY)/(.5*a.fullHeight)*b,d.minWorldLength||0,null!=d.maxWorldLength?d.maxWorldLength:Infinity)};c.acquireIfNotUndefined=function(a,b,d){if(void 0!==a)return b.acquire(a,d)};c.releaseIfNotUndefined=function(a,
b){void 0!==a&&b.release(a)};var I=k.mat4f32.create();c.bindView=function(a,b,d){l.mat4.translate(I,b,a);d.setUniform3fv("localOrigin",a);d.setUniformMatrix4fv("view",I)};c.bindCamPos=function(a,b,d){d.setUniform3f("camPos",b[3]-a[0],b[7]-a[1],b[11]-a[2])};var K=g.vec3f64.create(),M=g.vec3f64.create();c.bindViewOriginDouble=function(a,b){e.encodeDoubleArraySplit(a,K,M,3);b.setUniform3fv("viewOriginHi",K);b.setUniform3fv("viewOriginLo",M)};var T=g.vec3f64.create();c.bindSlicePlane=function(a,b,d){h.vec3.subtract(T,
b.origin,a);d.setUniform3fv("slicePlaneOrigin",T);d.setUniform3fv("slicePlaneBasis1",b.basis1);d.setUniform3fv("slicePlaneBasis2",b.basis2)};c.bindVerticalOffset=function(a,b,d){if(a){var c=b.fovY,e=b.viewport[3],f=void 0;void 0===f&&(f=S);f.screenLength=a.screenLength;f.perDistance=Math.tan(.5*c)/(.5*e);f.minWorldLength=a.minWorldLength;f.maxWorldLength=a.maxWorldLength;a=f;d.setUniform4f("verticalOffset",a.screenLength*(b.pixelRatio||1),a.perDistance,a.minWorldLength,a.maxWorldLength)}};c.bindHighlightRendering=
function(a,b,d){a.bindTexture(b.highlightDepthTexture,5);d.setUniform1i("depthTex",5);d.setUniform4f("highlightViewportPixelSz",0,0,1/b.viewport[2],1/b.viewport[3])};c.bindScreenSizePerspective=function(a,b,d){void 0===d&&(d="screenSizePerspectiveAlignment");if(a){var c=a.parameters;b.setUniform4f(d,c.divisor,c.offset,c.minPixelSize,a.paddingPixelsOverride)}};c.copyParameters=v;c.updateParameters=function(a,b){var d=!1,c;for(c in b){var e=b[c];void 0!==e&&(d=!0,Array.isArray(e)?a[c]=e.slice():a[c]=
e)}return d};(function(a){function b(a){return(a.shadowMappingEnabled?1:0)|(a.ssaoEnabled?2:0)}a.create=function(a,d){for(var c=[],e=0;2>e;e++)for(var f=0;2>f;f++){var m=b({shadowMappingEnabled:1===e,ssaoEnabled:1===f}),g=b({shadowMappingEnabled:1===e,ssaoEnabled:1===f&&a.receiveSSAO});c[m]=c[g]||d({receiveShadows:1===e,receiveSSAO:1===f&&a.receiveSSAO})}return{programs:c.filter(function(a){return null!=a}),byParameter:c}};a.lookup=function(a,d){return a.byParameter[b(d)]};a.programs=function(a){return a.programs}})(c.BindParametersMap||
(c.BindParametersMap={}));c.intersectDrapedRenderLineGeometry=function(a,b,d,c,e,f,m,g,h){if(c.enable.selectionMode){b=a.getAttribute(B.POSITION).data;c=a.getAttribute(B.SIZE);d=f[0];f=f[1];a=(((c&&c.data[0])+m)/2+4)*a.pixelRatio;m=Number.MAX_VALUE;for(c=0;c<b.length-5;c+=3){var k=b[c],l=b[c+1];h=d-k;e=f-l;var k=b[c+3]-k,l=b[c+4]-l,q=n.clamp((k*h+l*e)/(k*k+l*l),0,1);h=k*q-h;e=l*q-e;e=h*h+e*e;e<m&&(m=e)}m<a*a&&g()}};c.colorMixModes={multiply:1,ignore:2,replace:3,tint:4};var N=1E3,S={screenLength:0,
perDistance:0,minWorldLength:0,maxWorldLength:0}})},"esri/core/libs/gl-matrix-2/mat4f32":function(){define(["require","exports","./factories/mat4f32"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.mat4f32=n})},"esri/core/libs/gl-matrix-2/factories/mat4f32":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});c.create=function(){var c=new Float32Array(16);c[0]=1;c[5]=1;c[10]=1;c[15]=1;return c};c.clone=function(c){var l=new Float32Array(16);
l[0]=c[0];l[1]=c[1];l[2]=c[2];l[3]=c[3];l[4]=c[4];l[5]=c[5];l[6]=c[6];l[7]=c[7];l[8]=c[8];l[9]=c[9];l[10]=c[10];l[11]=c[11];l[12]=c[12];l[13]=c[13];l[14]=c[14];l[15]=c[15];return l};c.fromValues=function(c,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x){var n=new Float32Array(16);n[0]=c;n[1]=l;n[2]=k;n[3]=d;n[4]=h;n[5]=g;n[6]=f;n[7]=b;n[8]=a;n[9]=e;n[10]=m;n[11]=q;n[12]=u;n[13]=t;n[14]=r;n[15]=x;return n};c.createView=function(c,l){return new Float32Array(c,l,16)}})},"esri/views/3d/webgl-engine/lib/doublePrecisionUtils":function(){define(["require",
"exports"],function(p,c){function n(d,c,g){for(var f=0;f<g;++f)c[2*f]=d[f],c[2*f+1]=d[f]-c[2*f]}Object.defineProperty(c,"__esModule",{value:!0});c.encodeDouble=function(d,c){k[0]=d;k[1]=d-k[0];c[0]=k[0];c[1]=k[1]};c.encodeDoubleArray=n;c.decodeDoubleArray=function(d,c,g){for(var f=0;f<g;++f)c[f]=d[2*f]+d[2*f+1]};c.encodeDoubleArraySplit=function(d,c,g,f){for(var b=0;b<f;++b)l[0]=d[b],n(l,k,1),c[b]=k[0],g[b]=k[1]};var l=new Float64Array(1),k=new Float32Array(2)})},"esri/views/3d/webgl-engine/lib/Material":function(){define(["require",
"exports","./IdGen","./ModelContentType"],function(p,c,n,l){return function(){function c(d){this.animationSupported=this.supportsEdges=!1;this._parentStage=null;this._visible=!0;this._renderOccluded=1;this._renderPriority=0;this.id=c._idGen.gen(d)}Object.defineProperty(c.prototype,"parentStage",{get:function(){return this._parentStage},enumerable:!0,configurable:!0});c.prototype.addParentStage=function(d){this._parentStage=d};c.prototype.removeParentStage=function(d){this._parentStage=null};Object.defineProperty(c.prototype,
"visible",{get:function(){return this._visible},set:function(d){d!==this._visible&&(this._visible=d,this.notifyDirty("matChanged"))},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"renderOccluded",{get:function(){return this._renderOccluded},set:function(d){d!==this._renderOccluded&&(this._renderOccluded=d,this.notifyDirty("matChanged"))},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"renderPriority",{get:function(){return this._renderPriority},set:function(d){d!==
this._renderPriority&&(this._renderPriority=d,this.notifyDirty("matChanged"))},enumerable:!0,configurable:!0});c.prototype.isVisibleInPass=function(d){return!0};c.prototype.isVisible=function(){return this._visible};c.prototype.notifyDirty=function(d){this.parentStage&&this.parentStage.notifyDirty(l.MATERIAL,this,d)};c._idGen=new n;return c}()})},"esri/views/3d/webgl-engine/materials/internal/bufferWriters":function(){define(["require","exports","../../../support/buffer/BufferView","../../lib/Util"],
function(p,c,n,l){function k(a,b,d,c,f){var e=d.typedBuffer;d=d.typedBufferStride;var m=a.length;c*=d;if(null==f||1===f)for(var g=0;g<m;++g){var h=2*a[g];e[c]=b[h];e[c+1]=b[h+1];c+=d}else for(g=0;g<m;++g)for(var h=2*a[g],k=0;k<f;++k)e[c]=b[h],e[c+1]=b[h+1],c+=d}function d(a,b,d,c,f){var e=d.typedBuffer;d=d.typedBufferStride;var m=a.length;c*=d;if(null==f||1===f)for(var g=0;g<m;++g){var h=3*a[g];e[c]=b[h];e[c+1]=b[h+1];e[c+2]=b[h+2];c+=d}else for(g=0;g<m;++g)for(var h=3*a[g],k=0;k<f;++k)e[c]=b[h],
e[c+1]=b[h+1],e[c+2]=b[h+2],c+=d}function h(a,b,d,c,f){var e=d.typedBuffer;d=d.typedBufferStride;var m=a.length;c*=d;if(null==f||1===f)for(var g=0;g<m;++g){var h=4*a[g];e[c]=b[h];e[c+1]=b[h+1];e[c+2]=b[h+2];e[c+3]=b[h+3];c+=d}else for(g=0;g<m;++g)for(var h=4*a[g],k=0;k<f;++k)e[c]=b[h],e[c+1]=b[h+1],e[c+2]=b[h+2],e[c+3]=b[h+3],c+=d}function g(a,b,c,f,g,h){if(c){var e=f.typedBuffer;f=f.typedBufferStride;var m=a.length;g*=f;if(null==h||1===h)for(var k=0;k<m;++k){var l=3*a[k],q=b[l],t=b[l+1],u=b[l+2];
e[g]=c[0]*q+c[4]*t+c[8]*u+c[12];e[g+1]=c[1]*q+c[5]*t+c[9]*u+c[13];e[g+2]=c[2]*q+c[6]*t+c[10]*u+c[14];g+=f}else for(k=0;k<m;++k)for(var l=3*a[k],q=b[l],t=b[l+1],u=b[l+2],l=c[0]*q+c[4]*t+c[8]*u+c[12],n=c[1]*q+c[5]*t+c[9]*u+c[13],q=c[2]*q+c[6]*t+c[10]*u+c[14],t=0;t<h;++t)e[g]=l,e[g+1]=n,e[g+2]=q,g+=f}else d(a,b,f,g,h)}function f(a,b,c,f,g,h){if(c){var e=f.typedBuffer;f=f.typedBufferStride;var m=a.length;g*=f;if(null==h||1===h)for(var k=0;k<m;++k){var l=3*a[k],q=b[l],t=b[l+1],u=b[l+2];e[g]=c[0]*q+c[4]*
t+c[8]*u;e[g+1]=c[1]*q+c[5]*t+c[9]*u;e[g+2]=c[2]*q+c[6]*t+c[10]*u;g+=f}else for(k=0;k<m;++k)for(var l=3*a[k],q=b[l],t=b[l+1],u=b[l+2],l=c[0]*q+c[4]*t+c[8]*u,n=c[1]*q+c[5]*t+c[9]*u,q=c[2]*q+c[6]*t+c[10]*u,t=0;t<h;++t)e[g]=l,e[g+1]=n,e[g+2]=q,g+=f}else d(a,b,f,g,h)}function b(a,b,d,c,f,g){var e=c.typedBuffer;c=c.typedBufferStride;var m=a.length;f*=c;if(null==g||1===g)if(4===d)for(d=0;d<m;++d){var h=4*a[d];e[f]=b[h];e[f+1]=b[h+1];e[f+2]=b[h+2];e[f+3]=b[h+3];f+=c}else{if(3===d)for(d=0;d<m;++d)h=3*a[d],
e[f]=b[h],e[f+1]=b[h+1],e[f+2]=b[h+2],e[f+3]=255,f+=c}else if(4===d)for(d=0;d<m;++d)for(var h=4*a[d],k=0;k<g;++k)e[f]=b[h],e[f+1]=b[h+1],e[f+2]=b[h+2],e[f+3]=b[h+3],f+=c;else if(3===d)for(d=0;d<m;++d)for(h=3*a[d],k=0;k<g;++k)e[f]=b[h],e[f+1]=b[h+1],e[f+2]=b[h+2],e[f+3]=255,f+=c}Object.defineProperty(c,"__esModule",{value:!0});c.writeBufferVec2=k;c.writeBufferVec3=d;c.writeBufferVec4=h;c.writeBufferMat3f=function(a,b,d,c){var e=d.typedBuffer;d=d.typedBufferStride;var f=a.length;c*=d;for(var g=0;g<
f;++g){for(var m=9*a[g],h=0;9>h;++h)e[c+h]=b[m+h];c+=d}};c.writeBufferMat4f=function(a,b,d,c){var e=d.typedBuffer;d=d.typedBufferStride;var f=a.length;c*=d;for(var g=0;g<f;++g){for(var m=16*a[g],h=0;16>h;++h)e[c+h]=b[m+h];c+=d}};c.writePosition=g;c.writeNormal=f;c.writeColor=b;c.writeMultipliedColor=function(a,b,d,c,f,g,h){var e=f.typedBuffer;f=f.typedBufferStride;var m=a.length;g*=f;if(null==h||1===h)if(4===d)for(d=0;d<m;++d){var k=4*a[d];e[g]=b[k]*c[0];e[g+1]=b[k+1]*c[1];e[g+2]=b[k+2]*c[2];e[g+
3]=b[k+3]*c[3];g+=f}else{if(3===d){var l=255*c[3];for(d=0;d<m;++d)k=3*a[d],e[g]=b[k]*c[0],e[g+1]=b[k+1]*c[1],e[g+2]=b[k+2]*c[2],e[g+3]=l,g+=f}}else if(4===d)for(d=0;d<m;++d)for(var k=4*a[d],q=0;q<h;++q)e[g]=b[k]*c[0],e[g+1]=b[k+1]*c[1],e[g+2]=b[k+2]*c[2],e[g+3]=b[k+3]*c[3],g+=f;else if(3===d)for(l=255*c[3],d=0;d<m;++d)for(k=3*a[d],q=0;q<h;++q)e[g]=b[k]*c[0],e[g+1]=b[k+1]*c[1],e[g+2]=b[k+2]*c[2],e[g+3]=l,g+=f};c.writeDefaultAttributes=function(a,d,c,q,u,t){var e=0;for(d=d.fieldNames;e<d.length;e++){var m=
d[e],w=a.vertexAttr[m],v=a.indices[m];if(w&&v)switch(m){case l.VertexAttrConstants.POSITION:l.assert(3===w.size);(m=u.getField(m,n.BufferViewVec3f))&&g(v,w.data,c,m,t);break;case l.VertexAttrConstants.NORMAL:l.assert(3===w.size);(m=u.getField(m,n.BufferViewVec3f))&&f(v,w.data,q,m,t);break;case l.VertexAttrConstants.UV0:l.assert(2===w.size);(m=u.getField(m,n.BufferViewVec2f))&&k(v,w.data,m,t);break;case l.VertexAttrConstants.REGION:l.assert(4===w.size);(m=u.getField(m,n.BufferViewVec4u16))&&h(v,w.data,
m,t);break;case l.VertexAttrConstants.COLOR:l.assert(3===w.size||4===w.size);(m=u.getField(m,n.BufferViewVec4u8))&&b(v,w.data,w.size,m,t);break;case l.VertexAttrConstants.SYMBOLCOLOR:l.assert(3===w.size||4===w.size);(m=u.getField(m,n.BufferViewVec4u8))&&b(v,w.data,w.size,m,t);break;case l.VertexAttrConstants.TANGENT:l.assert(4===w.size),(m=u.getField(m,n.BufferViewVec4f))&&h(v,w.data,m,t)}}}})},"esri/views/3d/webgl-engine/materials/renderers/MergedRenderer":function(){define("require exports ../../../../../core/libs/gl-matrix-2/mat4 ../../../../../core/libs/gl-matrix-2/mat4f64 ../../../support/buffer/glUtil ../../lib/DefaultVertexAttributeLocations ../../lib/Float32ArrayList ../../lib/IntervalUtilities ../../lib/Util ../WaterGLMaterial ./Instance ./utils ../../../../webgl/BufferObject ../../../../webgl/Util ../../../../webgl/VertexArrayObject".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u){function t(a,b,d,c){for(var e=new Map,f=b.vertexBufferLayout.stride/4,g=function(d,c){var g=d.origin,m=a.get(g.id),h=e.get(g.id);null==h&&(h={optimalCount:null==m?0:m.optimalCount,sparseCount:null==m?0:m.buffer.getSize(),toAdd:[],toRemove:[],origin:g.vec3},e.set(g.id,h));g=b.elementCount(d.data)*f;c?(h.optimalCount+=g,h.sparseCount+=g,h.toAdd.push(d)):(h.optimalCount-=g,h.toRemove.push(d))},m=0;m<d.length;m++){var h=d[m];g(h,!0)}for(d=0;d<c.length;d++)h=c[d],
g(h,!1);return e}p=function(){function c(a,b,c,f){void 0===f&&(f=d.Default3D);this._dataByOrigin=new Map;this._highlightCount=0;this._hasWater=!1;this._rctx=a;this._vertexAttributeLocations=f;this._material=c;this._materialRep=b;this._glMaterials=e.acquireMaterials(this._material,this._materialRep);this._bufferWriter=c.createBufferWriter()}c.prototype.dispose=function(){e.releaseMaterials(this._material,this._materialRep)};Object.defineProperty(c.prototype,"isEmpty",{get:function(){return 0===this._dataByOrigin.size},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"hasHighlights",{get:function(){return 0<this._highlightCount},enumerable:!0,configurable:!0});c.prototype.hasWater=function(){return this._hasWater};c.prototype.renderPriority=function(){return this._material.renderPriority};c.prototype.modify=function(a){var b=this,d=z;d.clear();this.updateGeometries(a.toUpdate,d);this.addAndRemoveGeometries(a.toAdd,a.toRemove,d);this.updateHighlightCount();d.forEach(function(a){return b.updateDisplayedIndexRanges(a)})};
c.prototype.addAndRemoveGeometries=function(a,b,d){var c=this,e=this._material,g=this._bufferWriter,m=g.vertexBufferLayout,h=m.stride/4,k=this._dataByOrigin,l=t(k,g,a,b);l.forEach(function(a,b){l.delete(b);var g=a.optimalCount,q=a.sparseCount,t=k.get(b);null==t&&(f.assert(0<g),t=c.createData(m,g,a.origin),k.set(b,t));if(0===g)t.vao.dispose(!0),t.vao=null,k.delete(b);else{var u=(b=g<a.sparseCount/2)?g:q,g=r,q=t.buffer.getSize(),y=t.buffer.getArray(),u=t.buffer.resize(u);b||u?c.removeAndRebuild(t,a.toRemove,
h,y,g):0<a.toRemove.length?(c.removeByErasing(t,a.toRemove,h,g),0<a.toAdd.length&&(g.end=q)):(g.begin=q,g.end=q,g.eraseEnd=0);b=x;f.setMatrixTranslation3(b,-a.origin[0],-a.origin[1],-a.origin[2]);c.append(t,e,a.toAdd,h,b,g);a=t.vao.vertexBuffers.geometry;g.eraseEnd>g.end&&(t.buffer.erase(g.end,g.eraseEnd),g.end=g.eraseEnd);a.byteSize!==t.buffer.getArray().buffer.byteLength?a.setData(t.buffer.getArray()):(y=g.begin,b=g.end,y<b&&(q=t.buffer.getArray(),y*=4,a.setSubData(q,y,y,4*b)));(g.updatedDisplayedIndexRange||
t.displayedIndexRanges)&&d.add(t)}})};c.prototype.updateGeometries=function(a,b){for(var d=this._bufferWriter,c=d.vertexBufferLayout.stride/4,g=0;g<a.length;g++){var m=a[g],h=m.updateType,m=m.renderGeometry,k=this._dataByOrigin.get(m.origin.id),l=k&&k.instances.get(m.uniqueName);if(!l)break;h&1&&(l.displayedIndexRange=e.generateRenderGeometryVisibleIndexRanges(m),b.add(k));h&17&&(l.highlightedIndexRanges=e.generateRenderGeometryHighlightRanges(m),k.highlightCount=null);h&6&&(h=k.buffer.getArray(),
k=k.vao,e.calculateTransformRelToOrigin(m,w,v),d.write({transformation:w,invTranspTransformation:v},m.data,d.vertexBufferLayout.createView(h.buffer),l.from),f.assert(l.from+d.elementCount(m.data)===l.to,"material VBO layout has changed"),k.vertexBuffers.geometry.setSubData(h,l.from*c*4,l.from*c*4,l.to*c*4))}};c.prototype.updateDisplayedIndexRanges=function(a){var b=a.instances;a.displayedIndexRanges=[];var d=!0;b.forEach(function(b){b.displayedIndexRange?(a.displayedIndexRanges.push.apply(a.displayedIndexRanges,
g.offsetIntervals(b.displayedIndexRange,b.from)),d=!1):a.displayedIndexRanges.push([b.from,b.to-1])});a.displayedIndexRanges=d?null:g.mergeIntervals(a.displayedIndexRanges)};c.prototype.updateHighlightCount=function(){var a=this;this._highlightCount=0;this._dataByOrigin.forEach(function(b){if(null==b.highlightCount){var d=0;b.instances.forEach(function(a){a.highlightedIndexRanges&&++d});b.highlightCount=d}a._highlightCount+=b.highlightCount})};c.prototype.updateAnimations=function(a){var d=this,c=
!1;this._hasWater=!1;this._glMaterials.forEach(function(e){e&&(c=e.updateAnimation(a)||c);e instanceof b.WaterGLMaterial&&(d._hasWater=!0)});return c};c.prototype.render=function(a,b,d,c){var e=this,f=this._rctx,g=this._glMaterials.get(b.pass),m=4===b.pass;2===b.pass&&null===a&&(a=20);if(!g||null!=a&&!g.beginSlot(a)||m&&0===this._highlightCount)return!1;g.bind(f,d);b=g.getProgram();b.setUniformMatrix4fv("model",y);b.hasUniform("modelNormal")&&b.setUniformMatrix4fv("modelNormal",y);var h=!1;this._dataByOrigin.forEach(function(a){m&&
0===a.highlightCount||(d.origin=a.origin,g.bindView(f,d),h=m?e.renderHighlightPass(g,a,c)||h:e.renderDefaultPass(g,a,c)||h)});g.release(f,d);return h};c.prototype.renderDefaultPass=function(a,b,d){var c=this._rctx,f=a.getProgram();a=a.getDrawMode();var g=b.displayedIndexRanges;if(g&&0===g.length)return!1;q.assertCompatibleVertexAttributeLocations(b.vao,f);c.bindVAO(b.vao);g?e.drawArraysFaceRange(c,g,0,a,d):e.drawArrays(c,a,0,q.vertexCount(b.vao,"geometry"),d);return!0};c.prototype.renderHighlightPass=
function(a,b,d){var c=this._rctx,f=a.getProgram(),g=a.getDrawMode();a=b.vao;q.assertCompatibleVertexAttributeLocations(a,f);c.bindVAO(a);var m=!1;b.instances.forEach(function(a){var b=a.highlightedIndexRanges;if(b&&0!==b.length)for(var f=0;f<b.length;f++){var h=b[f];e.drawArrays(c,g,h.range?h.range[0]+a.from:a.from,h.range?h.range[1]-h.range[0]+1:a.to-a.from,d);m=!0}});return m};c.prototype.createData=function(a,b,d){return{instances:new Map,vao:new u(this._rctx,this._vertexAttributeLocations,{geometry:k.glLayout(a)},
{geometry:m.createVertex(this._rctx,35044)}),buffer:new h(b),optimalCount:0,origin:d,highlightCount:0}};c.prototype.removeAndRebuild=function(a,b,d,c,e){for(var f=e.eraseEnd=0;f<b.length;f++){var g=b[f].uniqueName,m=a.instances.get(g);a.optimalCount-=(m.to-m.from)*d;a.instances.delete(g);e.eraseEnd=Math.max(e.eraseEnd,m.to*d)}var h=0,k=a.buffer.getArray();e.begin=0;e.end=0;var l=-1,q=-1,r=0;a.instances.forEach(function(a){var b=a.from*d,e=a.to*d,f=e-b;l!==q&&q!==b?(k.set(c.subarray(l,q),r),r+=q-l,
l=b):-1===l&&(l=b);q=e;a.from=h/d;h+=f;a.to=h/d});l!==q&&k.set(c.subarray(l,q),r);e.end=h};c.prototype.removeByErasing=function(a,b,d,c){c.begin=Infinity;c.end=-Infinity;c.eraseEnd=-Infinity;for(var e=-1,f=-1,g=0;g<b.length;g++){var m=b[g].uniqueName,h=a.instances.get(m),k=h.from*d,h=h.to*d;e!==f&&f!==k?(a.buffer.erase(e,f),e=k):-1===e&&(e=k);f=h;a.instances.delete(m);a.optimalCount-=h-k;k<c.begin&&(c.begin=k);h>c.end&&(c.end=h)}e!==f&&a.buffer.erase(e,f)};c.prototype.append=function(b,d,c,g,m,h){h.updatedDisplayedIndexRange=
!1;d=this._bufferWriter;for(var k=0;k<c.length;k++){var l=c[k],q=l.data;n.mat4.multiply(w,m,l.transformation);n.mat4.invert(v,w);n.mat4.transpose(v,v);var r=h.end;d.write({transformation:w,invTranspTransformation:v},q,d.vertexBufferLayout.createView(b.buffer.getArray().buffer),h.end/g);var q=d.elementCount(q)*g,t=r+q;f.assert(null==b.instances.get(l.uniqueName));var u=e.generateRenderGeometryVisibleIndexRanges(l),y=e.generateRenderGeometryHighlightRanges(l);y&&(b.highlightCount=null);r=new a(l.name,
r/g,t/g,u,y,void 0,void 0,l.idx);b.instances.set(l.uniqueName,r);u&&(h.updatedDisplayedIndexRange=!0);b.optimalCount+=q;h.end+=q}};return c}();var r={updatedDisplayedIndexRange:!1,begin:0,end:0,eraseEnd:0},x=l.mat4f64.create(),w=l.mat4f64.create(),v=l.mat4f64.create(),y=l.mat4f64.create(),z=new Set;return p})},"esri/views/3d/webgl-engine/lib/Float32ArrayList":function(){define(["require","exports","../../../../core/mathUtils"],function(p,c,n){return function(){function c(c){null==c?c=16:65536>c&&
(c=n.nextHighestPowerOfTwo(c));this.array=new Float32Array(c);this.size=0}c.prototype.resize=function(c,d){void 0===d&&(d=!1);this.size=c;var h;if(this.size>this.array.length){for(c=this.array.length||1;c<this.size;)c*=2;h=new Float32Array(c);d&&h.set(this.array);this.array=h;return!0}if(this.size<=this.array.length/2){c=this.array.length;for(h=2*this.size;c>=h;)c=Math.floor(c/2);h=new Float32Array(c);d&&h.set(this.array.subarray(0,c));this.array=h;return!0}return!1};c.prototype.append=function(c){var d=
this.size;this.resize(this.size+c.length,!0);this.array.set(c,d)};c.prototype.erase=function(c,d){for(;c<d;++c)this.array[c]=0};c.prototype.getArray=function(){return this.array};c.prototype.getSize=function(){return this.size};return c}()})},"esri/views/3d/webgl-engine/lib/IntervalUtilities":function(){define(["require","exports"],function(p,c){return function(){function c(){}c.copyIntervals=function(c){for(var k=[],d=0;d<c.length;d++){var h=c[d];k.push([h[0],h[1]])}return k};c.convertFaceToIndexRange=
function(c,k){for(var d=0;d<c.length;d++){var h=c[d];h[0]*=k;h[1]=h[1]*k+(k-1)}};c.sortIntervals=function(c){return c.sort(function(c,d){return c[0]===d[0]?c[1]>d[1]?1:c[1]<d[1]?-1:0:c[0]>d[0]?1:c[0]<d[0]?-1:0})};c.intersectIntervals=function(c,k){if(0>=c.length)return[];for(var d=[],h=0;h<c.length;h++){var g=c[h];g[1]<k[0]||g[0]>k[1]||(g=[g[0],g[1]],g[0]<k[0]&&(g[0]=k[0]),g[1]>k[1]&&(g[1]=k[1]),d.push(g))}return d};c.mergeIntervals=function(c){if(0>=c.length)return[];var k=[];c=this.sortIntervals(c);
k.push(c[0]);for(var d=1;d<c.length;d++){var h=k[k.length-1];h[1]+1<c[d][0]?k.push(c[d]):h[1]<c[d][1]&&(h[1]=c[d][1],k.pop(),k.push(h))}return k};c.invertIntervals=function(c,k){for(var d=[],h=0,g=0;g<c.length;g++){var f=c[g];f[0]>h&&d.push([h,f[0]-1]);h=f[1]+1}h<=k&&d.push([h,k]);return d};c.offsetIntervals=function(c,k){for(var d=[],h=0;h<c.length;h++){var g=c[h];d.push([g[0]+k,g[1]+k])}return d};return c}()})},"esri/views/3d/webgl-engine/materials/WaterGLMaterial":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/maybe ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../lib/GLMaterial ./internal/MaterialUtil ./internal/waterMaterialUtils ../shaders/WaterSurfacePrograms ../../../webgl/renderState".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a){Object.defineProperty(c,"__esModule",{value:!0});p=function(d){function c(a,b,c){a=d.call(this,a,b)||this;a._elapsedTime=0;a.updateParameters();return a}n(c,d);c.prototype.updateParameters=function(){this.params=g.copyParameters(this.material.getParameters());this.selectProgram()};c.prototype._selectPipelineState=function(){this.pipelineState=a.makePipelineState({blending:this.params.transparent&&a.separateBlendingParams(770,1,771,771),depthTest:{func:513},depthWrite:this.params.writeDepth&&
a.defaultDepthWriteParams,colorWrite:a.defaultColorWriteParams})};c.prototype.selectProgram=function(){this.program=this.programRep.getProgram(b.color,{slice:this.params.slicePlaneEnabled,receiveShadows:!0});this._selectPipelineState()};c.prototype.beginSlot=function(a){var b=5;this.params.transparent&&(b=this.params.writeDepth?7:10);return a===b};c.prototype.getProgram=function(){return this.program};c.prototype._initTextures=function(a){this.texturePaths=[this.params.waveTexture,this.params.perturbationTexture];
f.waterTextureRepo.initialize(a,this.texturePaths)};c.prototype._bindUniforms=function(a,b){b=this.program;var d=this.params;null!=d.polygonOffset&&(a.gl.enable(a.gl.POLYGON_OFFSET_FILL),a.gl.polygonOffset(d.polygonOffset.factor,d.polygonOffset.units));a.bindProgram(b);a.setPipelineState(this.pipelineState);f.waterTextureRepo.bindRepo(a);b.setUniform1i("texWaveNormal",0);b.setUniform1i("texWavePerturbation",1);b.setUniform1f("dtrExponent",d.dtrExponent);b.setUniform1f("roughness",d.roughness);b.setUniform1f("f0maxSpec",
d.f0maxSpec);b.setUniform4fv("waterColor",d.color);b.setUniform3fv("skyColor",d.sky.horizon);b.setUniform3fv("skyZenitColor",d.sky.zenit);b.setUniform1f("f0Sky",d.f0Sky);b.setUniform1f("f0maxSky",d.f0maxSky);b.setUniform1f("expSky",d.expSky);b.setUniform4f("waveParams",d.waveStrength,d.waveTextureRepeat,d.flowStrength,d.flowOffset);b.setUniform2f("waveDirection",d.waveDirection[0]*d.waveVelocity,d.waveDirection[1]*d.waveVelocity);b.setUniform1f("timeElapsed",.001*this._elapsedTime*d.animationSpeed)};
c.prototype.bind=function(a,b){f.waterTextureRepo.ready()?this._bindUniforms(a,b):f.waterTextureRepo.loading()||this._initTextures(a)};c.prototype.animate=function(a){l.isNone(this._startTime)&&(this._startTime=a);this._elapsedTime=this._startTime-a};c.prototype.release=function(a){null!=this.params.polygonOffset&&a.gl.disable(a.gl.POLYGON_OFFSET_FILL)};c.prototype.bindView=function(a,b){a=this.program;a.setUniform3fv("localOrigin",b.origin);g.bindView(b.origin,b.view,a);g.bindCamPos(b.origin,b.viewInvTransp,
a);var d=b.lightingData;k.vec3.set(e,d.diffuse[0],d.diffuse[1],d.diffuse[2]);a.setUniform3fv("lightIntensity",e);this.params.slicePlaneEnabled&&g.bindSlicePlane(b.origin,b.slicePlane,a);b.shadowMappingEnabled?(b.shadowMap.bind(a),b.shadowMap.bindView(a,b.origin),a.setUniform1i("shadowsEnabled",1)):a.setUniform1i("shadowsEnabled",0)};c.prototype.bindInstance=function(a,b){this.program.setUniformMatrix4fv("model",b.transformation)};c.prototype.getDrawMode=function(){return 4};return c}(h);c.WaterGLMaterial=
p;h=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}n(d,a);d.prototype.bind=function(a,b){a.bindProgram(this.program);a.setPipelineState(this.pipelineState);this.program.setUniform4fv("waterColor",this.params.color)};d.prototype.bindView=function(a,b){this.program.setUniform3fv("localOrigin",b.origin);g.bindView(b.origin,b.view,this.program)};d.prototype.beginSlot=function(a){return null==a};d.prototype.selectProgram=function(){this.program=this.programRep.getProgram(b.drapedColor,
{slice:this.params.slicePlaneEnabled,receiveShadows:!0});this._selectPipelineState()};return d}(p);c.WaterDrapedGLMaterial=h;p=function(d){function c(){return null!==d&&d.apply(this,arguments)||this}n(c,d);c.prototype.bind=function(a,b){if(f.waterTextureRepo.ready()){b=this.program;var d=this.params;a.bindProgram(b);a.setPipelineState(this.pipelineState);f.waterTextureRepo.bindRepo(a);b.setUniform1i("texWaveNormal",0);b.setUniform1i("texWavePerturbation",1);b.setUniform4f("waveParams",d.waveStrength,
d.waveTextureRepeat,d.flowStrength,d.flowOffset);b.setUniform2f("waveDirection",d.waveDirection[0]*d.waveVelocity,d.waveDirection[1]*d.waveVelocity);b.setUniform1f("timeElapsed",.001*this._elapsedTime*d.animationSpeed)}else f.waterTextureRepo.loading()||this._initTextures(a)};c.prototype.bindView=function(a,b){this.program.setUniform3fv("localOrigin",b.origin);g.bindView(b.origin,b.view,this.program)};c.prototype.beginSlot=function(a){return 20===a};c.prototype._selectPipelineState=function(){this.pipelineState=
a.makePipelineState({depthTest:{func:513},depthWrite:this.params.writeDepth&&a.defaultDepthWriteParams,colorWrite:a.defaultColorWriteParams})};c.prototype.selectProgram=function(){this.program=this.programRep.getProgram(b.drapedNormal,{slice:this.params.slicePlaneEnabled,receiveShadows:!0});this._selectPipelineState()};return c}(p);c.WaterNormalGLMaterial=p;var e=d.vec3f64.create()})},"esri/views/3d/webgl-engine/materials/internal/waterMaterialUtils":function(){define("require exports ../../../../../core/tsSupport/generatorHelper ../../../../../core/tsSupport/awaiterHelper ../../../../../arcade/languageUtils ../../../../../core/libs/gl-matrix-2/vec2f64 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../support/imageUtils ../../lib/Util ./waterMaterialData ../../../../webgl/Texture".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a){Object.defineProperty(c,"__esModule",{value:!0});c.waterParameterDefaultsLocal={f0Sky:.02,f0maxSky:1,expSky:5,waveTexture:b.waterNormals,perturbationTexture:b.waterDuDv,waveStrength:.06,waveTextureRepeat:32,waveDirection:d.vec2f64.fromValues(1,0),waveVelocity:.05,flowStrength:.015,flowOffset:-.5,animationSpeed:.35,color:[0,.35686,.4,1],sky:{horizon:h.vec3f64.fromValues(.72,.92,1),zenit:h.vec3f64.fromValues(0,.6,.9)},transparent:!1,writeDepth:!0,polygonOffset:null,slicePlaneEnabled:!1,
dtrExponent:2.2,roughness:.06,f0maxSpec:.1,isDraped:!1};c.wavePresets={"calm-small":{waveStrength:.005,perturbationStrength:.02,textureRepeat:12,waveVelocity:.01},"rippled-small":{waveStrength:.02,perturbationStrength:.09,textureRepeat:32,waveVelocity:.07},"slight-small":{waveStrength:.05,perturbationStrength:.07,textureRepeat:28,waveVelocity:.1},"moderate-small":{waveStrength:.075,perturbationStrength:.07,textureRepeat:24,waveVelocity:.1},"calm-medium":{waveStrength:.003125,perturbationStrength:.01,
textureRepeat:8,waveVelocity:.02},"rippled-medium":{waveStrength:.035,perturbationStrength:.015,textureRepeat:12,waveVelocity:.07},"slight-medium":{waveStrength:.06,perturbationStrength:.015,textureRepeat:8,waveVelocity:.12},"moderate-medium":{waveStrength:.09,perturbationStrength:.03,textureRepeat:4,waveVelocity:.12},"calm-large":{waveStrength:.01,perturbationStrength:0,textureRepeat:4,waveVelocity:.05},"rippled-large":{waveStrength:.025,perturbationStrength:.01,textureRepeat:8,waveVelocity:.11},
"slight-large":{waveStrength:.06,perturbationStrength:.02,textureRepeat:3,waveVelocity:.13},"moderate-large":{waveStrength:.14,perturbationStrength:.03,textureRepeat:2,waveVelocity:.15}};p=function(){function b(){this.loadingCount=0;this.data=[];this.loadingState=0}b.prototype.loadTexture=function(b,d,c){return l(this,void 0,void 0,function(){var e,m;return n(this,function(h){switch(h.label){case 0:this.loadingCount++,h.label=1;case 1:return h.trys.push([1,3,,4]),[4,g.requestImage(c)];case 2:return e=
h.sent(),f.assert(1<=e.width&&1<=e.height),this.data[d]=new a(b,this.getTextureProps(e.width,e.height,!0),e),[3,4];case 3:return m=h.sent(),console.warn("Failed to load texture for water material.",m),[3,4];case 4:return this.loadingCount--,[2]}})})};b.prototype.getTextureProps=function(a,b,d){void 0===d&&(d=!1);return{target:3553,pixelFormat:6408,dataType:5121,wrapMode:10497,samplingMode:9987,hasMipmap:d,maxAnisotropy:8,width:a,height:b}};b.prototype.ready=function(){return 2===this.loadingState?
!0:1===this.loadingState&&0===this.loadingCount?(this.loadingState=2,!0):!1};b.prototype.loading=function(){return 1===this.loadingState?!0:!1};b.prototype.initialize=function(a,b){for(var d in b)this.loadTexture(a,k.toNumber(d),b[d]);this.loadingState=1};b.prototype.bindRepo=function(a){for(var b in this.data)a.bindTexture(this.data[b],k.toNumber(b))};return b}();c.waterTextureRepo=new p})},"esri/arcade/languageUtils":function(){define("require exports dojo/number ../moment ./FunctionWrapper ./ImmutableArray ./ImmutablePathArray ./ImmutablePointArray ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/support/coordsUtils ../core/maybe".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t){function r(a,b,d){return""===b||null===b||void 0===b||b===d||b===d?a:a=a.split(b).join(d)}function x(a){return a instanceof J||a instanceof k||a instanceof P}function w(a){return v(a)||z(a)||D(a)||y(a)||null===a||a===c.voidOperation||"number"===typeof a?!0:!1}function v(a){return"string"===typeof a||a instanceof String}function y(a){return"boolean"===typeof a}function z(a){return"number"===typeof a}function A(a){return a instanceof Array}function B(a){return a instanceof
d}function D(a){return a instanceof Date}function C(a,b){if(!1===isNaN(a)){if(void 0===b||null===b||""===b)return a.toString();b=r(b,"\u2030","");b=r(b,"\u00a4","");return n.format(a,{pattern:b})}return a.toString()}function E(a,b){a=l(a);return void 0===b||null===b||""===b?a.format():a.format(H(b))}function H(a){return a.replace(/(LTS)|L|l/g,function(a){return"["+a+"]"})}function G(a,b,d){switch(d){case "\x3e":return a>b;case "\x3c":return a<b;case "\x3e\x3d":return a>=b;case "\x3c\x3d":return a<=
b}return!1}function I(a,b){if(a===b||null===a&&b===c.voidOperation||null===b&&a===c.voidOperation)return!0;if(D(a)&&D(b))return a.getTime()===b.getTime();if(a instanceof h||a instanceof g)return a.equalityTest(b);if(a instanceof e&&b instanceof e){var d=void 0,f=void 0,d=a.cache._arcadeCacheId,f=b.cache._arcadeCacheId;if(void 0!==d&&null!==d)return d===f}return void 0!==a&&void 0!==b&&null!==a&&null!==b&&"object"===typeof a&&"object"===typeof b&&(a._arcadeCacheId===b._arcadeCacheId&&void 0!==a._arcadeCacheId&&
null!==a._arcadeCacheId||a._underlyingGraphic===b._underlyingGraphic&&void 0!==a._underlyingGraphic&&null!==a._underlyingGraphic)?!0:!1}function K(a,c){if(v(a))return a;if(null===a)return"";if(z(a))return C(a,c);if(y(a))return a.toString();if(D(a))return E(a,c);if(a instanceof b)return JSON.stringify(a.toJSON());if(A(a)){c=[];for(var e=0;e<a.length;e++)c[e]=T(a[e]);return"["+c.join(",")+"]"}if(a instanceof d){c=[];for(e=0;e<a.length();e++)c[e]=T(a.get(e));return"["+c.join(",")+"]"}return null!==a&&
"object"===typeof a&&void 0!==a.castToText?a.castToText():x(a)?"object, Function":""}function M(a,c){if(v(a))return a;if(null===a)return"";if(z(a))return C(a,c);if(y(a))return a.toString();if(D(a))return E(a,c);if(a instanceof b)return a instanceof f?'{"xmin":'+a.xmin.toString()+',"ymin":'+a.ymin.toString()+","+(a.hasZ?'"zmin":'+a.zmin.toString()+",":"")+(a.hasM?'"mmin":'+a.mmin.toString()+",":"")+'"xmax":'+a.xmax.toString()+',"ymax":'+a.ymax.toString()+","+(a.hasZ?'"zmax":'+a.zmax.toString()+",":
"")+(a.hasM?'"mmax":'+a.mmax.toString()+",":"")+'"spatialReference":'+O(a.spatialReference)+"}":O(a.toJSON(),function(a,b){return a.key===b.key?0:"spatialReference"===a.key?1:"spatialReference"===b.key||a.key<b.key?-1:a.key>b.key?1:0});if(A(a)){c=[];for(var e=0;e<a.length;e++)c[e]=T(a[e]);return"["+c.join(",")+"]"}if(a instanceof d){c=[];for(e=0;e<a.length();e++)c[e]=T(a.get(e));return"["+c.join(",")+"]"}return null!==a&&"object"===typeof a&&void 0!==a.castToText?a.castToText():x(a)?"object, Function":
""}function T(a){return null===a?"null":y(a)||z(a)||v(a)?JSON.stringify(a):a instanceof b||a instanceof d||a instanceof Array?M(a):a instanceof Date?JSON.stringify(E(a,"")):null!==a&&"object"===typeof a&&void 0!==a.castToText?a.castToText():"null"}function N(a,b){return z(a)?a:null===a||""===a?0:D(a)?NaN:y(a)?a?1:0:A(a)||""===a||void 0===a?NaN:void 0!==b&&v(a)?(b=r(b,"\u2030",""),b=r(b,"\u00a4",""),n.parse(a,{pattern:b})):a===c.voidOperation?0:Number(a)}function S(a,b){var d;b.fields.some(function(b){b.name===
a&&(d=b.domain);return!!d});return d}function O(a,b){b||(b={});"function"===typeof b&&(b={cmp:b});var d="boolean"===typeof b.cycles?b.cycles:!1,c=b.cmp&&function(a){return function(b){return function(d,c){return a({key:d,value:b[d]},{key:c,value:b[c]})}}}(b.cmp),e=[];return function da(a){a&&a.toJSON&&"function"===typeof a.toJSON&&(a=a.toJSON());if(void 0!==a){if("number"===typeof a)return isFinite(a)?""+a:"null";if("object"!==typeof a)return JSON.stringify(a);var b,f;if(Array.isArray(a)){f="[";for(b=
0;b<a.length;b++)b&&(f+=","),f+=da(a[b])||"null";return f+"]"}if(null===a)return"null";if(-1!==e.indexOf(a)){if(d)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var g=e.push(a)-1,m=Object.keys(a).sort(c&&c(a));f="";for(b=0;b<m.length;b++){var h=m[b],k=da(a[h]);k&&(f&&(f+=","),f+=JSON.stringify(h)+":"+k)}e.splice(g,1);return"{"+f+"}"}}(a)}function V(a,b){if(b instanceof e)a.push(b.hasZ?b.hasM?[b.x,b.y,b.z,b.m]:[b.x,b.y,b.z]:[b.x,b.y]);else throw Error("Invalid Argument");
}Object.defineProperty(c,"__esModule",{value:!0});p=function(){return function(a){this.value=a}}();c.ReturnResultE=p;var Q=function(){return function(a){this.value=a}}();c.ImplicitResultE=Q;var J=function(){return function(a){this.fn=a}}();c.NativeFunctionE=J;var P=function(){return function(a){this.fn=a}}();c.SizzleFunctionE=P;c.NativeFunction=J;c.ImplicitResult=Q;c.ReturnResult=p;c.SizzleFunction=P;c.voidOperation={type:"VOID"};c.breakResult={type:"BREAK"};c.continueResult={type:"CONTINUE"};c.multiReplace=
r;c.isFunctionParameter=x;c.isSimpleType=w;c.defaultUndefined=function(a,b){return void 0===a?b:a};c.isString=v;c.isBoolean=y;c.isNumber=z;c.isArray=A;c.isFeatureSet=function(a){return!0===(a&&a.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===a.declaredRootClass)};c.isFeatureSetCollection=function(a){return!0===(a&&a.declaredRootClass&&"esri.arcade.featureSetCollection"===a.declaredRootClass)};c.isImmutableArray=B;c.isDate=D;c.pcCheck=function(a,b,d){if(a.length<b||a.length>d)throw Error("Function called with wrong number of Parameters");
};c.generateUUID=function(){var a=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var d=(a+16*Math.random())%16|0;a=Math.floor(a/16);return("x"===b?d:d&3|8).toString(16)})};c.formatNumber=C;c.formatDate=E;c.standardiseDateFormat=H;c.greaterThanLessThan=function(a,b,d){if(null===a){if(null===b||b===c.voidOperation)return G(null,null,d);if(z(b))return G(0,b,d);if(v(b)||y(b))return G(0,N(b),d);if(D(b))return G(0,b.getTime(),d)}if(a===c.voidOperation){if(null===
b||b===c.voidOperation)return G(null,null,d);if(z(b))return G(0,b,d);if(v(b)||y(b))return G(0,N(b),d);if(D(b))return G(0,b.getTime(),d)}else if(z(a)){if(z(b))return G(a,b,d);if(y(b))return G(a,N(b),d);if(null===b||b===c.voidOperation)return G(a,0,d);if(v(b))return G(a,N(b),d);if(D(b))return G(a,b.getTime(),d)}else if(v(a)){if(v(b))return G(K(a),K(b),d);if(D(b))return G(N(a),b.getTime(),d);if(z(b))return G(N(a),b,d);if(null===b||b===c.voidOperation)return G(N(a),0,d);if(y(b))return G(N(a),N(b),d)}else if(D(a)){if(D(b))return G(a,
b,d);if(null===b||b===c.voidOperation)return G(a.getTime(),0,d);if(z(b))return G(a.getTime(),b,d);if(y(b)||v(b))return G(a.getTime(),N(b),d)}else if(y(a)){if(y(b))return G(a,b,d);if(z(b))return G(N(a),N(b),d);if(D(b))return G(N(a),b.getTime(),d);if(null===b||b===c.voidOperation)return G(N(a),0,d);if(v(b))return G(N(a),N(b),d)}return!I(a,b)||"\x3c\x3d"!==d&&"\x3e\x3d"!==d?!1:!0};c.equalityTest=I;c.toString=K;c.toNumberArray=function(a){var b=[];if(!1===A(a))return null;if(a instanceof d){for(var c=
0;c<a.length();c++)b[c]=N(a.get(c));return b}for(c=0;c<a.length;c++)b[c]=N(a[c]);return b};c.toStringExplicit=M;c.toNumber=N;c.toDate=function(a,b){return D(a)?a:v(a)&&(a=l(a,[void 0===b||null===b||""===b?l.ISO_8601:b]),a.isValid())?a.toDate():null};c.toDateM=function(a,b){return D(a)?l(a):v(a)&&(a=l(a,[void 0===b||null===b||""===b?l.ISO_8601:b]),a.isValid())?a:null};c.toBoolean=function(a){return y(a)?a:v(a)?(a=a.toLowerCase(),"true"===a?!0:!1):z(a)?0===a||isNaN(a)?!1:!0:!1};c.fixSpatialReference=
function(a,b){if(t.isNone(a))return null;if(null===a.spatialReference||void 0===a.spatialReference)a.spatialReference=b;return a};c.fixNullGeometry=function(b){return null===b?null:b instanceof e?"NaN"===b.x||null===b.x||isNaN(b.x)?null:b:b instanceof m?0===b.rings.length?null:b:b instanceof q?0===b.paths.length?null:b:b instanceof a?0===b.points.length?null:b:b instanceof f?"NaN"===b.xmin||null===b.xmin||isNaN(b.xmin)?null:b:null};c.getDomainValue=function(a,b){if(!a||!a.domain)return b;var d=null;
b="string"===a.field.type||"esriFieldTypeString"===a.field.type?K(b):N(b);for(var c=0;c<a.domain.codedValues.length;c++){var e=a.domain.codedValues[c];e.code===b&&(d=e)}return null===d?b:d.name};c.getDomainCode=function(a,b){if(!a||!a.domain)return b;var d=null;b=K(b);for(var c=0;c<a.domain.codedValues.length;c++){var e=a.domain.codedValues[c];e.name===b&&(d=e)}return null===d?b:d.code};c.getDomain=function(a,b,d,c){void 0===d&&(d=null);if(!b||!b.fields)return null;for(var e=null,f=0;f<b.fields.length;f++){var g=
b.fields[f];g.name.toLowerCase()===a.toString().toLowerCase()&&(e=g)}if(null===e)throw Error("Field not found");var m,h;c||(c=d&&b.typeIdField&&d._field(b.typeIdField));null!=c&&b.types.some(function(a){return a.id===c?((m=a.domains&&a.domains[e.name])&&"inherited"===m.type&&(m=S(e.name,b),h=!0),!0):!1});h||m||(m=S(a,b));return{field:e,domain:m}};c.stableStringify=O;c.autoCastFeatureToGeometry=function(a){if(null===a)return null;for(var b=[],d=0;d<a.length;d++){var c=a[d];c&&c.declaredClass&&"esri.arcade.Feature"===
c.declaredClass?b.push(c.geometry()):b.push(c)}return b};c.autoCastArrayOfPointsToPolygon=function(a,b){if(A(a)||B(a)){var d=!1,c=!1,e=[];if(A(a)){for(var f=0;f<a.length;f++){var h=a[f];V(e,h)}0<e.length&&(b=a[0].spatialReference,d=a[0].hasZ,c=a[0].hasM)}else if(a instanceof g)e=a._elements,0<e.length&&(d=a._hasZ,c=a._hasM,b=a.get(0).spatialReference);else if(B(a)){for(var f=0,k=a.toArray();f<k.length;f++)h=k[f],V(e,h);0<e.length&&(b=a.get(0).spatialReference,d=!0===a.get(0).hasZ,c=!0===a.get(0).hasM)}else throw Error("Invalid Argument");
if(0===e.length)return null;!1===u.isClockwise(e,c,d)&&(e=e.slice(0).reverse());return new m({rings:[e],spatialReference:b,hasZ:d,hasM:c})}return a};c.autoCastArrayOfPointsToPolyline=function(a,b){if(A(a)||B(a)){var d=!1,c=!1,e=[];if(A(a)){for(var f=0;f<a.length;f++){var m=a[f];V(e,m)}0<e.length&&(b=a[0].spatialReference,d=!0===a[0].hasZ,c=!0===a[0].hasM)}else if(a instanceof g)e=a._elements,0<e.length&&(d=a._hasZ,c=a._hasM,b=a.get(0).spatialReference);else if(B(a)){for(var f=0,h=a.toArray();f<h.length;f++)m=
h[f],V(e,m);0<e.length&&(b=a.get(0).spatialReference,d=!0===a.get(0).hasZ,c=!0===a.get(0).hasM)}return 0===e.length?null:new q({paths:[e],spatialReference:b,hasZ:d,hasM:c})}return a};c.autoCastArrayOfPointsToMultiPoint=function(b,d){if(A(b)||B(b)){var c=!1,e=!1,f=[];if(A(b)){for(var m=0;m<b.length;m++){var h=b[m];V(f,h)}0<f.length&&(d=b[0].spatialReference,c=!0===b[0].hasZ,e=!0===b[0].hasM)}else if(b instanceof g)f=b._elements,0<f.length&&(c=b._hasZ,e=b._hasM,d=b.get(0).spatialReference);else if(B(b)){for(var m=
0,k=b.toArray();m<k.length;m++)h=k[m],V(f,h);0<f.length&&(d=b.get(0).spatialReference,c=!0===b.get(0).hasZ,e=!0===b.get(0).hasM)}return 0===f.length?null:new a({points:f,spatialReference:d,hasZ:c,hasM:e})}return b};c.toStringArray=function(a,b){void 0===b&&(b=!1);var c=[];if(null===a)return c;if(!0===A(a)){for(var e=0;e<a.length;e++){var f=K(a[e]);""===f&&!0!==b||c.push(f)}return c}if(a instanceof d){for(e=0;e<a.length();e++)f=K(a.get(e)),""===f&&!0!==b||c.push(f);return c}return w(a)?(f=K(a),""===
f&&!0!==b||c.push(f),c):[]}})},"esri/moment":function(){define(["require","exports","./plugins/moment!"],function(p,c,n){return n})},"esri/plugins/moment":function(){define(["require","exports","../intl/moment"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.load=function(c,k,d){n.loadMoment().then(function(c){d(c)})}})},"esri/intl/moment":function(){define("require exports ../core/tsSupport/awaiterHelper ../core/tsSupport/generatorHelper @dojo/framework/shim/Set ./locale @dojo/framework/shim/Promise".split(" "),
function(p,c,n,l,k,d){Object.defineProperty(c,"__esModule",{value:!0});var h=new k.default("ar ar-dz ar-kw ar-ly ar-ma ar-sa ar-tn bs ca cs da de de-at de-ch el en-au en-ca en-gb en-ie en-il en-nz es es-do es-us et fi fr fr-ca fr-ch he hi hr hu id it it-ch ja ko lt lv nb nl nl-be pl pt pt-br ro ru sl sr sr-cyrl sv th tr uk vi zh-cn zh-hk zh-tw".split(" "));c.loadMoment=function(c){void 0===c&&(c=d.getLocale());return n(this,void 0,void 0,function(){var d,b,a;return l(this,function(e){switch(e.label){case 0:return[4,
new Promise(function(a,b){p(["moment/moment"],a,b)})];case 1:return d=e.sent(),b=h.has(c),b||(a=c.split("-"),1<a.length&&h.has(a[0])&&(c=a[0],b=!0)),b?[4,new Promise(function(a,b){p(["moment/locale/"+c],a,b)})]:[3,3];case 2:return e.sent(),[3,4];case 3:c="en",e.label=4;case 4:return c!==d.locale()&&d.locale(c),[2,d]}})})}})},"esri/arcade/FunctionWrapper":function(){define(["require","exports"],function(p,c){return function(){return function(c,l){this.context=this.definition=null;this.definition=c;
this.context=l}}()})},"esri/arcade/ImmutableArray":function(){define(["require","exports"],function(p,c){return function(){function c(c){void 0===c&&(c=[]);this._elements=c}c.prototype.length=function(){return this._elements.length};c.prototype.get=function(c){return this._elements[c]};c.prototype.toArray=function(){for(var c=[],k=0;k<this.length();k++)c.push(this.get(k));return c};return c}()})},"esri/arcade/ImmutablePathArray":function(){define(["require","exports","../core/tsSupport/extendsHelper",
"./ImmutableArray","./ImmutablePointArray"],function(p,c,n,l,k){return function(d){function c(c,f,b,a,e){c=d.call(this,c)||this;c._lazyPath=[];c._hasZ=!1;c._hasM=!1;c._hasZ=b;c._hasM=a;c._spRef=f;c._cacheId=e;return c}n(c,d);c.prototype.get=function(d){if(void 0===this._lazyPath[d]){var c=this._elements[d];if(void 0===c)return;this._lazyPath[d]=new k(c,this._spRef,this._hasZ,this._hasM,this._cacheId,d)}return this._lazyPath[d]};c.prototype.equalityTest=function(d){return d===this?!0:null===d||!1===
d instanceof c?!1:d.getUniqueHash()===this.getUniqueHash()};c.prototype.getUniqueHash=function(){return this._cacheId.toString()};return c}(l)})},"esri/arcade/ImmutablePointArray":function(){define(["require","exports","../core/tsSupport/extendsHelper","./ImmutableArray","../geometry/Point"],function(p,c,n,l,k){return function(d){function c(c,f,b,a,e,m){c=d.call(this,c)||this;c._lazyPt=[];c._hasZ=!1;c._hasM=!1;c._spRef=f;c._hasZ=b;c._hasM=a;c._cacheId=e;c._partId=m;return c}n(c,d);c.prototype.get=
function(d){if(void 0===this._lazyPt[d]){var c=this._elements[d];if(void 0===c)return;var b=this._hasZ,a=this._hasM,e=null,e=b&&!a?new k(c[0],c[1],c[2],void 0,this._spRef):a&&b?new k(c[0],c[1],void 0,c[2],this._spRef):b&&a?new k(c[0],c[1],c[2],c[3],this._spRef):new k(c[0],c[1],this._spRef);e.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+d.toString();this._lazyPt[d]=e}return this._lazyPt[d]};c.prototype.equalityTest=function(d){return d===this?!0:null===d||!1===d instanceof
c?!1:d.getUniqueHash()===this.getUniqueHash()};c.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return c}(l)})},"esri/views/3d/webgl-engine/materials/internal/waterMaterialData":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});c.waterNormals="data:image/jpeg;base64,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\x3d\x3d";
c.waterDuDv="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQIAdgB2AAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCAEAAQADAREAAhEBAxEB/8QAGwAAAwEBAQEBAAAAAAAAAAAABAUGAwIBBwD/xAAbAQADAQEBAQEAAAAAAAAAAAAEBQYDAgcBAP/aAAwDAQACEAMQAAAB+xxKDz5dSjWoF7nmAfkeX2ILHNMxoCM64zGjLw7XkT0+xQjb2is70JOyoNOs3gk6xw87Iyjn62k8+Uyc7MrOQz1jFxc3x381z9A/fPUnqw9kEoF7j0zj6Fp6QDrQbDqNR/NQdIRiGYaPxpwR599Dz6p9c0OGkF79w7+3aZlaK2LQAw8fZEbhC1KcnfMtUZ2xw/NB43Hbz1cZN46U2ffrTIOserE4/cT8+rj12/pPuVS4VqfcYFGVIuVrunTrP3MeDvWrSfT+fx7AaNOx8/ZYdF81WW7dA1pYp+47+JKJXgnPGnWurkSgsE862H8xBM85AL/BkepZ9eoGD7+fIyfcoRe7L3G9/Y6Lu5FRtL3E2z+gSyf9x58sJB649DH0uV5O+vyTajSLsLQzgxUc4jX1ftxpSK5ybbzkm9K519JZ4nUIUEdx5LxtHbfKfXn1QXSsAISscPLs/jbcf0NMQ9iHKxKQu+gSjf6BLJusoJQTFHiUrIS5VGMEjEvr7w3EVsR0Qm6lAzqhtrigXoRSfO0zRfmR6eCde5kZOh/M2WXkh2QjIb0jn5bcfk60mfIwRNV9UmKpoB8ElJ+OVdxRpfpAsYs286YhHPlthhoGAVn++1jAclmKj4+yKg0QIn0MYh0OVCaaQ9CJS+b38s/qfN0tGD45v8idObsPT07vLhSVowCkmoCtGa8jXJG2CulS0mwtCgLDlmUQzA5rUlZtwAuKnN+KxmI/aCBacToG8bry8Vn2sXRgtOJD6Gh+G/mM29pwD2dEF5vht5p5+afuPUlm9YcErw/fdspZYSmTGUtAq4rUPOox8oyCh3Uo7Wc2iCv3z+oWUurLd8/b84YjvNGoMkXi/wCscW0XRi97b3KfrTdEuZajmWJPxEGT5oVgG/VXeH6l/YIx/rALZeHtIZ9VDMKroVWWwy2dNkZdjHswT6pNc68NkTGXXErWIt2wEcCaJJlmkcAvHoPxI0neSXBfT0JguO+pNdKOccmzDiSoVY9xNvNx+ZwttzyrE1Wc/Zrr4bj36WTg3Ygz6zbz9EZGnCNaVRbYaVSBko04kapNRsgm4G6BQVNOl9QxHPXnT2BeOBbEc051jkV97lnnPzipHKwrbBA4OCEi2lHn8Az+pGocwfhJibXKwv0XrP57nC8fPPzRWTlfWCbOZtn0YPP1qRjrkyC1T5/pKiVN2wjTPcAI1IEch200a5Mt+9kTRTIPF3P70LXC4C6NOXzw3137wO7XzxWfn68v4Pr6UnNrxdATRvPPPgXvNrx+7VFdP1Y1GpyTGMZlm3y6XUKzVsJvr9y06V7dyW/2T17V96FLTgBCFjAWmIHrVW5rdSk0wt8vhzUJRlpGKTpkzOyEItJRy9nGa9SbP65U+P3Qb7+sEJdMnn1hKSOd0ygygbhnE8GZ7fCecngSOkXwvfXnCZklXmmvgGT1fp+5AE6GKXnlC+iDfqDfEfLuQFIkG4rzjUyeamwlI6lnHL1aT+zFw/MHC6t3x5WEyMy0CZjPrBMTnqTPtOgyHG/LN+vnDM/MlR8KZwwq1NS/X95fYtXvJcjHtF17h8s05T1YWhMyjalaT+0n0jSfnWzTnunp1BeH2cy+FsQrhdu+Qnq0h8w+XvbRJ8/dqZpsnVG0iov0ZUY1F3jeNYauUHWaVm3E/c/o5ST51MFFUSenaLa8PSmjXn4EtHYqC6IGTBN89BMBeg27wB6v3nwNVRolBvjRBbYpjpk3CjfgNe/yeeZxqkzoLb1CWb30w2A40lqRbQ0y04vLHHuXW7eYyZrepR19UhZEYEyTkZA1UORqSyUpif3mwhci9CqHYVYP3gpKmc/gzYGn8+fk5suVk2chUvfz4gYyCM+Z2ytFhPpci6agFTVIta1So3r9nOslEe3iXSVeyX+lsgH4nese7Xo2aBlnYVS7t4LB/tfNWw/FABW+fXawpUJpPuF9JrnqsJk8u1bgKjIyczTNCoLimAhhY9+gY1ck6wbCN/oE9m1DVIT5qOcRrhME7V+iEjVc6x3+a1Qkw5FO4vWWdI0yRmfPPnI0vQgkc6P5trssKQOl1I1Ba9czgmsK2B0IwoJFuIcLON16YrA7P66nme+3NpWpjDMVqM6bTlQBAIr1Xba42UY76+fUk9zouaYX+JPowJzXElcz4TuBwwTBpN4ENqjrkblwvpxO81RMU5XBkDlJysLFB9olSXvicG0RYafG4N6ZhTzrMhSWnLG86LBEYCOO+Hkg6wmGqJmMtdCUenfpCdnZIW7kYzbTbhYwVz7aZoFqj6JLAvVjmSbM/nVGvND/AD1Xhpinag0zcEt0umtOILP7LtwK4LWziXz1iIG8Xefh9OmIo/P5AnNl+/mh4++v7vf9RjlUwZtXiW04K6StVkq7SNBHP0CZCeqwIZ5++c0fyiT6UafPj9Lhav1xHoR42r1bEHieaa49zTK4lG1jRKyni6YSG1R44Pv2G5++dUqsluE0967HIyGKGN+PjfjzbUtQzUS7pARnX0Cpn5wu+eUQiMtzWouixVCcySE2y649F4+25I4z1Z5rh8h51hQA625wtRvmRVJ0q4smSdo/fsR9Dmu363771oGUZxuq70UMeDGmdACaEkZS7IWiZhPVRKqNcI+eKxsve7ZSiY3z3DRa3CuyMPRUxdEJ0m1H8t1HWnCVROFDx00pFiZab388p1Ko3ivTUr1eu6+oBSaPzVjxvKnfENCFRrTyk56BwE0PEdg6pkxkUYKxdLqzLpZOs/Px9FlCst24Fqs3dxzcwL7EOlci8V1RY7r38Pzowx1npZzF47EmZel8dNTMocnnIMuplXvxriltkuy00dAz+mj1HXDkTUUfqGMGn6BZUAkdyziJ15xq01tQK2vPI0c1+STPJ2qmHqp1x+rt8+lR7MrOUF38y50A879RVHX7MadeBxg5A0dQG6dU9ml725kQt1ReFlj3TqizhdZ4XWRKyoxdjJxtE5aEUaq9plGxYsvLMplES5qkHDhYpWEPA965jhnjr+6++bCkRC030BOw9bNzOrlMUXn56mZIedLzr5bacpuuYI8Y339b5duPfyfDWQJzMI53SsIhYZ8NH9Ky+1ykpciLiXigi6l2B4E+pJnMO6NqO324Z8aRqdh52rNPFJ9XXG+iF58NRvPhiPOGI7HXj0eeY0WnEW9XSLcSh0/PEjLTHXF6AM1FXLS4ReUiaCXi0n0L5nUtZFshrZ4+wnWjJemH/ef6ZLVbH0t4vZsB5FaX5kETOlcWYhPq0w4u1hy0XfzupUiUSqiSnVJOINgliGwwP7vqcbjJmNT++0rIYMrGC8+wLAdyAR6L8urHSE5HVIqTcWrD+948xWmcc1yozMKrz4tw08w2481chaF5+koWXqMg9cpz5qkVfnAJiks8vE2xSzbwObL5VrzZdWdoGRfhb1hWKc8bzDficF2tYp8z2znKpHWg930ozoV2qMjHzz6lMofPl5HOX4W0M1C8fYizzUOs6/ehI2NVjrg6A5G0wm2fQZFrv8ZNR1jsRKzxjcNoj38b3zfrCn2PciZj5rloOpO+kZZHC+jA6+lc8MdMUxGPnv8A/8QAIxAAAQUBAQADAQEBAQEAAAAAAQACAwQRIRITFCIFMRBBFf/aAAgBAQABBQJmBSkZaZpijXjn/rCgU1oKYwBcU7QVJF11fVNVT2FhjnLVDbX2dUU3YnAiVoILOtbx8aexAYsTWdgYF8IT2AI2cT7iM3pMTnYPl7E8H/gkxOs4hdX2PScdTU6H0Jqep1PE9hjX2C1Q2uwWuSXefeGxWgU13pPYnDF7xfPir202yCJZlJaT7KZYUU6lscda/VWxqj6HDE9PBCbIQmTamuUZ1fEHJ1UK3U5Ygx1eA62Ehttzmr53eq1oqtY1e9EgTgnRlAOam2CE+ypq536xX1yF1insEJsvp/8ANZqgi/MsaLV8HpPpoxFiY9QvUb1qsjRZj/VVg0RDzer6n1eiIsUExaorGr1qxNi1fV1OpqWoVNXBLKoRo8s08F2DFEzH/wA1+KCUeZXDHHsJ1eARPCE+LCw4opEHKVTM1RnwYpuT45GLSauqSsWpjywxS6m9UaBC0J7AQZNURQzLmZbAJEPa4LFFZLU65x9wbXuBMtaJJ0ZAUAComJoUjU9idCvZjTrSif7MUXoTVeWK/k1x2NnBxF3HSEFtheiDC9fJy5JyU66CD0YaWh9PBajcxSSO9VHOKha7Hscj6BZLiisJlhOmCdINaPQtQ8nJY6g7TVbyQcsxaoYv0xnHhNGp1fVLAWqSqhF4X/kzPSNbXVKihrjJK4y9WUtP90qagqjH1Rk9bEYUIio43KQEB0pDqr/Sli9NuVP1Sg8mA+WySJ49Lx5PzYHzhQO9JkeiavqICcwJzE5q+NQENUUgT3ctdT2D1VwKE8e4ZOQgNMdfU2sp4ePr66rBi+P8z19MVfE78j1pjZqfDy1rE+1jqNjVBIMedX2gnWQjZBXyavSdN5UV1fc0T2NT5e15VFLyeziktqCbTXdz0FO5ZroGrzySNAYpOpkXYo05nL8XLMJ91HliguYPur5nBOslNnJMTiUNUqLnNItEL5S9eSVFxMlwTv1SuO1XHYpC0Ot4n3NTLGmvMEJQnOBTk5RlMei/lvqlg9ObURgIT/TUamp1FMo9hp4nV8DoU6pqmqlqaPJ9BfKF86fYGOkDnU2hefzZ4ppy0x3OwX03+iv/AKCFzUJfSBQlxGzyWxqH6MbEYxk0GpjAU6IJrBrGjJWrz1sWietos1/KmlMaNzosEqSwVHMfVKxibZ5ZmVqVNcSY/S+VwX2iFHcVe3qim0PeprGITkmt1NbxxxE6YnI9X+ITYpJwU12mP/JVZbqvxIVy58NI5LSUdI6ysWL05qnmOSuLjTr+jFS/MtJTVsXxkKOQsMFzE65x8/owN9GszEwckCPDFKhJqkcpZS1Ot4q9rTFLokKmU8XtV/5+mOhglpqOoF9MZNRU/wDPR/n/AKpVPKhr8lq8nqp1VTVsTiY0+0VFZ11OZV5RjZgnyhSSdiudgsah+lPDy23yYZy11SzqDvQmYhHprQBCLk0SA8lhXxhylrBPrDYK6jjxSR8sRL41NX0Wqqlg7HAdrMIURcF8xCdbxSXVE5wNWYqGdSTDLjgV/wC1pcNeXQ86h/tdyB5INUjUw9YpP8f/ALCUxP8A8so/759CzW0WK+FrcNSMFRVdElPlqqQrLHNLaSjp4mwlqn1otzkL7XYbSrXE21o+ZV50ybj5VLOE2cbHOE6QFSFMlwxSp8vLNhfJpicnN9C1W1SxFrqTsNToLBlqIFWa2mJiiiCdEMutGf0B34zrGkKOUtTLabbVeyo7XJbnLH9DEP6fYf6Sbf1G2Cja7Xsqa1+ZrHp9cek1mJpUvRNB6Nerhrt8h8uCabU/qj4YSpXcvzKw726GD0hU4+ridGWr2QobGJtzk93lm4SYXuearHEeHASTOYjdx1a+p72hk/p9OUY1wKxPTRphiTj4Fm1iEhefKzsZxSO5db6X1NdDVxMgTqmqekpKa+uQvjcp2OxzD6o19NOrw0/z/Qr+RY0Pq+ihCXBtYgxkxqG2o7AKcdTf9jdgtWME8/p9UavPGTApjwpH8kHox1tQrJsWLynxBydS9L/5yd/OVn+epKOOp1/JpN47jf6jwnx/JJTqJsIaHABSFF5BhtYop/SDkZ/Iu218+vq2cQtJj3BNskJ1xMm9OrDUGL409v8AxmJsYKMAVmsMkp/qGioa/lWON/oa4xQfqtHgkHJNXklfW1GsWqElpY/kpU8ZehUOsruC8uC+ip6vkWXFhqT/AKpScD0ZE6RDq9YoZEDyZOH6gYF55abyev6dHTUdbE+vyWBMh7FX1Op6JqvlB3lb6TIPSbTCFMJ1NBitRcvQaYa5a6q8sTZkZE4lfL5RsqvPpbJyebF8/wCoJ19gKWYFPPYcTGBS4BMQo/8AYGoR6LEGizF5LHdgcmFAhcKZNomdosR6Y4AviwB2Fp1BuqdmCaYtdRn0xu1tkItOsJCdK4J1gozqCzhZa5Zt8ludgtDa1gJkoIlcMvFGTHVnoP4bGKO0o7BC+xqc7UH4nz8Nj9QTamFT/wCWYtNXWGCfkjvSDRojCfEFJCjXXgtLXuyb05TsconOBr2CFDcT7fLljU0e3VIeGPBK1dajXXwkL4ynjFLqfoNebDXm0SdEkekQr0WL7KFhNnRfv/NCLA5R1tRp8sU0KfW009hjU1stT7fp1HHKtmOzJAvj1McHDwCnRKZiMep9fU6IsMFjwvt8NkEwyBylZol1pi1yhiKjg1PgwS/lMk7BIF6BEw1BnWRjLkX5/o/lCQ+6U2KG5i+7qfZCinCgvKK5q+cESvCB6G6p4eTt8F9ktQufqnZ1fLrZyNqZsDRjApByxGnMxMmLEy2vk9f8jerjvz/S/Rhq+nQUyA9hYjYLU64orp2Ksc8uYvslqNrVHJqicnD0LNbVarFCu71Vic1FzgJJTtaxhrW1HYC+T0JW6nMT4UWFqikxB6a9WDrbMPp1Wt2OEBtmMZPD365KjqHYqynq8tQ4WRElkWKPiYnx+hNT9KP+Z2P+fgnqYJavfhLUyYsUV1Q3NQl9JyaNTq/oSV/KagE9Pi0xMxesD/0hT9ofz02ni//EACMRAAIDAQADAQADAQEBAAAAAAABAgMEEQUSIRMUIjFBYTL/2gAIAQMBAT8ByLrMiK/8PI1eyPJUfWWVtSKPaJRpcTLr6Vy9yUWa/ZEdMoSPH+QMmxSRGcZInVGRrx+yPIYOH4uEjI2iux8Lv7o2ZOmnM4lvUU2uLPGaucMejsSdjL7Hw1z6zCv7GOrqFXxGuvqPJZ+lmXsivF8LM7gZbfV8MEvdH8f2RsxfDXmcGZ7nWzDtKdvwr2dPZWI25FNF3j/7FWL1HT6kKvYtxeyN2A2ZfUcfWR4+zjPGS9kj8uo00s1waZnr9JnjvqPz6jTT8N9B/F7Mqx/DZl4ia/OR4zVwyXxmiymNiN+DppyuuRmucGU6vhTqM2no5KcS6C6e0UWWRM8otipUom7H1HksfOmqr1Zls9JHidX+GayM4l1CkjdkHoSmeO2Io0KSLeSRupTPw/sRhxGyHUbYcZm0OuR4/cUa/ZFnrYjbiUizG4MgnEjd6mfZwzafdF30vscC7b6mLd2RjvU4l1KmjyWHvTyONxbJJ1yPHafVnj9nwjp6jZcuGibjIwbGmZN3wWvqNOhMq5Nn4/DVQb6CcXGRgsZRc0ha+Ebo2E80ZluPhfS4n6ygzx+whL9Im2r4bk4sy6HGZ43b8RRepo00KxHlcP8Apuz+jMsvWR42fSHfU2d4bsTRXGVcjJeyu3qNFjMl/wDYompouoUkeQx9NOTkjFQ+ldL9S+MolF7TM9nsia6aKumqjhmtdcjDq6iyKsieSyDqcJmG5xMmoquU0eRqUonlc/1iXpM8Xb/hm5OJpy+yNOWNhp8fwUXUzPb0uj7ITdcjLr4Q1dRplGSNcI9MvqmVevDVGPD4pmLjR+XUWZzXlLanCRhsaKbvhrSmizJ1kKfQru9DJr6Xz94nlK+9NMPWR4+71Z4/V8I2KaIa0yz1mjZWkV3+simf6IspK04iu9S/ZxGnb1mbV9KL+ous6i6z1keP28M+lSROcTRKLNEFJlNfqKz0RPT1lfJk6i9OJkvaZXZ7xN1Psjdn+mappmNuKK9PqRslFkdJqt9kTs5MwXdFD2RKrhd/VGy9ouvbZksfTLPqJR6jZBoz2uEjHpfB6Hw06WhaOyKZJoufwssakZbxTTRprUhR9JGa7hbJSRqzqbKcJXncUTi0WYWWZ5RLa5NGippmGz1kYn7oln6jXmfDfnZZQ/Yy52ZK2iunqNuT4fxmpmWtocXw2RYm1Myy+E11F9b6V2OBHZwjoUyXGQl6lmnhXepyMtUZo/iIsxdPzhMuxplmJG3Hw5+Uzxen/CiUZxL8ykjyGEvz+sjJSmU0cKvhdFTRLMvYpoSFn6jXi6ieFqRnztH4/C3L0uytFilBlWhojo6fqabuFOrkzx20p1RaFbBmXyHsLR7InNGz6jZHjMWn0kYNvUV3qaNdCsRux8Zlg4yKa+xJQaONolUz39CjQmfnG1E8CbK8HD+GSxF/j+mvxxfllWOxwZHR8NFnSPt0yaHAp8hxEfJ/f9MGllFnUP8Aw0I3RIv1mYb2jPr4Q0qaNVUZoVHrIzJJFiRVBMln6jTQ0Kcq5GTSRsiyDiciz0iSzqRpxJm/Cbc3qxdTIU/oQwEsrgWWSrI637GC0yW/CL6i2rqN1J+X9yheqP5XoU+S/wDSO9SR+ybFq9EWeQMm1NlV8ZIurjNGrNxlUvRldz4LV6i8hwXkl3/TPrUxpTRtydR5LEWZmpGelooq+F2dcN1PCX9ZGSz1Zi0Gaz2FBSRuzdQ8v9j8OI1pxP5MoMo3Nme72LJ/C+1pmPW0zNsI6+o13rh+/wDYps6iyRbocSXkHFnj/Jd/6ZNfuiaU4nkMyZPD7SKvHEMjiWUfDyGY1VesivM0zLVJGVuJVaXv2R+Sch5v6m/Ma6vVlEmpGKQ11GqshN1sz6yrT8NF/USv5MyaOocvZGhfDU3FmPW4yPG7v8KdHsjZLqE17lHq0ekSdUWb8qaN+T6ZqIzZRgXCOP1FS0XppEJ/3Ko+0Tbn6jyGY9fSRimV/wBkXUexoo9SnqZS3wv7wtlyRkvK7eot+o2wFP0keO18MWvqLZe8SaakUTaR+/B6jVqXDVbGTPH6vpj0poVkWJxZpSaI1/3MlXYmjJ7I8jgNeNwkZ+xZmmRj7I1ZiNHJGen4W53w1ZmiEnWzNd071GyHUXwakZbnBmHYR1po/VSkVJcLfhZNo13Mu0P2MdvqzDofCu5n8nhbsKdKcjBamj81NGvEpI3eL7/wfjHF/wCFeaUCiDLqeo/j/wBjLm6iWLqNnj/hpxuMjPU0Qj8L6/Yvx9JZ3BlFzrI7uIp3dkZdPUTn7Fi6bK/hrXGVf1kYbCmfwsn8NN/CrXyR43eZtSkjqmi7JGZPxyf/AAn41DyehdHiJfJGW9IqsjJF9UZo1402V4x0ep+PsSw+yNHjv/C/G4FvtAz2v2MVvwg+n59NdPw308Y8zUjN2BHT6ot3F2n3P0aZg2OLMW8z7UyF6ke8WNxL/Uv/ALFlAk4Mo0NH8n4W2KRBo0SSRC9KRncbEWZFJGvAbsXBV+kzCygrh1GqnqN+Yl4v7/hPA4mmuUC2yXSpORKkqi4Mz6nAzeRKN/SO0ewv2i1pyIOM4l1SP/k/RnWyMmi6XUWzcZHj9ZmsViLsykjyGH4a8/pIyWerMliZmSaLM/sjVg9j+PBl2RNHkcZfn5IopPxFnLKXEhZKDKNnCvX0/dmnQ+EdTUzJr6iV3Sy1H6pspSkiyvhdZ6mu9dMu31keP8gU6FNGqtWI8lkJdqkY9XDLt4U6lJD9Jlew/kpmxxmi3N7SIZOEoepV9JZ/dFuLhOLrKLiEuo0xbRJNTMcmez4aLGj+U1Ixa+k7VKJtmbLX0pvfseP0MyaXwhd7I3UqaPIU+rM8mmUTZRoaI7eEJtEtHqX7Si1WMrpUkas/BP0kZpqROhTRtycIVuMigsrUkWZuyM2doVD4a8z4X1uEjHa0V29RrXUbYfSipuRhqaKOxKruErFOJ5OnpCHJGWHUKr4STRZR6mpuJpvaZh0/TDd7Iuq94mypxZnucGU6U0X+tiP4v0UPQnf6lNkZszwiyNUWX5FJG/AV0uMjPW2i+j4bM30y4uszY+I/L1J2ehHWXv8AVFlXrIxz4VJTRPN0nUpo35fhvocWZX6yPFy7whV7RN2LpdQ62LS6yrb7Mz8sRdR8NlbiU3OEjJpKrunv1G3jHxTMnrwv9fU1uPTF6tmeqLRbn+GulofYyKf7IvoOupmXdwovjYijT7I0clE8nWvon6TPE6V8MVqnEuoU0bsZtpcCFrhI8dqIcsibcfUaM7rkZLOMzT6jvw1Q6i6pqRnm4l979TZc+mPZyRg2dRCamjXnUkX5+SKK2Sq6jVRwlN1SMO1mVvhNvh5CPTSvWRg1+jPGeQ/wz3qxGmj3R5HF/ppzOEjFJxZht+EoKyJ5HIerrkZdHCOo/aMyWdTHk4aKmkbq2VScZHj7zJd8Jz7EsgpSKMqZ/D+GrD8N2NxZnTjIy0fCef4b8/w308ZCbhI8ds4eN2d4VTVkTZmUkbMPZFWFozVOBR9Rso9kacvGRi4E7XEjtcWY9amQjGxGjJ1HkMRdT+cjDbwxWfCdvIj0/wBjHoTKpKRbnUkeQwn8X1mY9aITjNGzMpI8pk5001+kjLd6s8Zr/wAMev4TtUol/q2VwiesUUNFlSmjTkLcrTLqHw0QcGZdbrZh39IWRsRtzKSPI5fVlU/zkYtiSL9y9T+X2ZgubMljIz+G5rhosUJmS9pmS9nfaJ5av/TyEOMjL1kYdPqY95Xt9kWW9Ff6lm71M/kvpl1qxDrjYi3F0vwm3CX1OtmPU4sx7Ph+qnE8lSpI1VOEiGp1lnkG0UaeyPGXJ8Ms1wejhq0dRun9P//EACERAAMBAQADAQEAAwEAAAAAAAABAgMRBBIhExAUIjFB/9oACAECAQE/AakmGZfC3/aRwb4Ns+mbJsWhnsS1Q80y8T8i8y1whsT+DZNEsf8AKNenWLrPw6Lxj8uFyeh+Zc8/jnosujwPz4IZN8M9ydyaVH5pmmRpiT44vHfCseHOEsn6eh+XTXxysCcSfHFgXiaYk4n4fDbLhfwRImhymVA0UK+E7GG5lr8NNUPRNmKTPzXDTE0yFPCBCGkysUxYEWh6IdpjSojErPiPLfDSvpNHT9OE7itUOS0Uv5k+GV/Daz3fTx9Sdj26Xn0rIU8EN8P0FqToiNCtT9yNumNmj6jy46a5/SZOfDRHWZ2yb6NdKk4QZ0V/sio+mXwmydSNOnr7FZnCkOT1Ym0evC0Mx6ZfCqNkmaYpn4H4GuA8SMxS1/KY2TRNE6CXsTiOeDvhlqY6dLGz/p6nomVkNJmiHJjJK+Gt8NNj9umbVChcN5lF+pLQkmOC8h5igUs7ww0MeNG64jR/TNmFFV8GyR/D9eE6Jk7Dvv8AIrh+vw32NNBaGOpO3w8jY01J1M9BWOkVSJ4xQuGs8M74zx9vhrp1FfWZyR8FXT06TmarhdE6nRUKhUexqumks9TIT+GxaJkzkfwvTg9DOydPhtp0VfTLQepH0lcPbhGhhyhZfDyc+Gs/RDyPzPzPU4KOmmA8CMhZmuZeZniTgaZ8NZPUhH/hoxMzoT6ZnuOybPG0MtFw3So1x6PEcJn5ocIriOkM4mPJHpw6X9KzM54QkbJFz0/HosCsvhpmejJRBAzhJg+Ea8RW5+qYmmfuf5JXkl+QTt0WgtyNulfT1PQeQshS0jyGd+mZGfSsDTxj/FP8Y/Dh6c/nBZkRwb4XZ7k6l2foyrZVkWKx6Gexlr0iPY/AeSROaLj4eRmPL6ZwYwNLhSQoTFih4GmJUcIRnB68Rq+Do/7/ADQ6dHPSZH8GyGY0eNY9EkaboncvyC9UziZnCISSNtOFb/TPcz1PdFSmXiTiTHC74a2Nk0f+GklIRKTFkaZlSQZmV+pp5PwvyPpO5ew9yPII8kXk/Dfbpen0jUz2FsRr0XKJyRWfw2k0ljlikSNMTWOFPhGphXS4TRrmf8M6Pc10HZFj+lI9uEasnUvQqiaMrPcjXhjsRqVqa2iuM9UxZCxNOM3k1gmfph1HfhpPS5IP/DQZJLKRRJJaKEZfz24ZbcMtejo2torfhPkGW/TO0yvJL8grVMzaZhHRZFZmmJ+XBQaQOBQTmVmy82KCUVHS4Jn6ZZnOFirhjsRp1G5s+Csy0M9+Glmmh+jMKZ4zFaHSHKY8j8i8x5EYGfjdH4nw08QfjH4H4muRGX0jPiNa4OujJfCNeGm5pfSV0iRPhbNCV9PHgy/1RWvD9yNyLTEkys+n4mWBlgjSUkbNDcsmFR+Hw28cjD6VHEbyV1HRMdcL0E+syzGvUdjZZK+mD4ftxF7dHqTuZeQZ7i1TFaMqRNLh5Ghvsfv9PH16Z/UbcHokVt0v/YvErPgvhRZlHWZxxG1HsVBSJRPwrU/U9xMi+E+RwnyifKMfJI8j4b69PIoX/TxUK/WTyNytOibJPXppiXnwaPTphkenw2z6PIaTHl0WBWfEa/D2PYh/32ZOjMdSN/hp5Bpr0z+s8fiNNPhtRJPDqR+vD9UzRdLklEWpHuitUz2TP8gz26ZJUbZ/DeD1FJMfxLpUnDMT+GlDZkyNOIvcvUWhFlUXoLYjXpS6NcL04VuPcW57GNfTx9OF6Jo1no8xQSj06TkXmev0yg/P4aQfmTHBGnSmQZoo1GzOzOulyaopDT/lZma4ZVwrQ9unr05z+ZMzz6jfPhS4zFnsuFcYpQs0fmaZFY/TLAjxzTA1xZeZMmKPT4bSOT8ulYlZJn5cJXD16TmLL4XnwaMjGuI1/wBjTMn4Oh2ybZOh+h1Mcoz4jNyXKZrkmaeOLD6ZY8L/ANUb2dJOJi0PdHsSQTw0z6aZ8I+EUe5z2PzHA4FP8+ifCtBbGWx+w9hNUTh0WHEeSuG3T6Se3CpaOtE0ZsVE6k37F5dPxFkXPCaI+l8RdlaE6EfSoNIZxmY2VRjX08b6VC4eTl018crxxYl5M08Yvxz8uEScO8M9DN+xOSZ+Pw3zPX6ZmxbY2QZMl9HmqKwPTn8pGC+njfEaa8RrsdVH4pn+OX4xdo+Ufh0/HhUFSJ8MtTHUeq4bWmcTJhGufTTEeQo4Zksmz2TLk9RyZLjMr4jbUun0zbIo90Voi7I0+mVdKoqiiia4Z78K8oryemexGorTHCorArA9OCH8FpwnTo/5JNFvp6ing9eD3Hqf/8QAHRAAAgIDAAMAAAAAAAAAAAAAATEAUCBAYBAwcP/aAAgBAQAGPwLphQDojyZuHHHaGhUWS7M+hxxx6h0HtjydlRRRYGzHzU0BsFFqKKf/xAAdEAEBAAMBAQEBAQAAAAAAAAABABEhMRBBUWEg/9oACAEBAAE/IVDqDQ5sCc8Wf1SNYBggHkpw8I1adsAdhevdYAp+LC+TYgjwtPPEL6v7RPszzEfcRZ8n6bZ2xPYIBg4W5qf48bkWdO7GNxnUp3fdgNqsyackB9u4h/Zcu5F7NnsOOxHV+iZm7O2hUltS+77PM5gcmHIBakScPPAsl1ETLGDcisniyRi58dhwX5fns0Y7l8i0rEWyx+L+UzKO7jZixxAkMxki7Gr8MhKhY/bTObFUjl/KIcuAlfIniy2pEy0VIEqCUsJgRm4E7uEiWaW5NINxI4wuWxxYg2KekxL+GGjmzXAp1B82AiN37L6Nrbg6RP2RnPDXZSzt9iafPMcnAr1fMliQZyeFfrdayYjCoqZpy1fEl1EAxcJMkjtgTkvUJAnZBIgVvIeUQ7IYYWVhhlxvjweXBt/JVKxsr4kWtQhq+BCmlk4iE1YXV8iJc8wuv8AwGBfJsi1KerAWU8JsQKY9iUUAOTGZARrAzOEghZiHyAhBCR2Y6D5gDkeWr5s2M0HCH5jWfg/xW7LhzGzcowiG+2F2Q7JgcWTY/th0iDvx7S/XYHbM9hPcKLVAjAg8Exu9NmuMIbngixJlgt2L98uD4wUsBZp5D6XkUWbL6kpYlaIzfrh+o+thG5B3yGS3GMeIGYFjTV/KH15PzS/l+awuXyrI8sTl8S7EYrF9gn2+54hmLCZZXRWHqxhNECwfuP68koHUH3GAlcQ/HmEORPGFiZLhEmpEoWYm+vMxZUwCB7gw7iV3aTMkjs7sue2luPtGEue7o5a+bA8DRarqM9hOxeYjEAb5LhJh1Jjl8SK5IbMeFUsl+KxHJFz3gwDcb1D2sZYx4NcpP9iFo8xVtiDcfWzEndn8trCkX5Z3L8FlzqTepiMg1FjqJ4t7q/jJ8y0T7J0icWEsDsw7BDerR3a41Tti7ixjfl5I50NQHPsgNickHL4sI8sayQssjMHKxZ1JlAuKjfGw22zt9XGxmPBOqrGC4rcY7iEwpaiYIsT5OYQ4pTMWEw3KggE1ZbUM4WDlfigXBKLI8m4IaTJVv7243Yw3D2sc9ue4nqEO36L7Mw7Adi8LOdiO4su48QF4y48UgSwTIAwtqBZRyFxCVwLJ79WPtm+283YOoiMt8VmCYHYzsP3CnYhbtZmUDJMMCh42A1Y6PtHluxfg02G4iMllcvySfHljZ8N2DqfLcg34kR2JiNz9LQROsk4iJn82R4wYincM+YFiPLZ7vSuVr6jTkQ5dNTDyHckizE7aLQjRqL4uIivEsHjs6x5mDAsD2E2tOCfd9SLCwinZRB4AlyAOX4LHF8SH4nKaZjGNBC1YRYzgeM1mriPODFpUv1YXb7eC2HcrJYpuNOyMTuL9j7QAhSxsEG4LzFHJS1E8RZNWDZvZQn3SANSE3eXP5vhWxWavhlL4ns9/idsEnkTlgaLEIRrIhnssLGYYXwAkyKBNQ/k/xfgsDzwD8R8JnkJ3h8A+JHyxuR/kaQZ6s7qzDEAWc7M2VC6i/bEb8O9YvUGDdq7E9gbmsCMM5iMPUEGmrLWGExY82IPpG8DWVyRWq8JizF2Vgt+Sznwz/wDCJ+pH9wi3H9zhuUG/MMcG/NdxORX2Be3VtffZSIX1FjuzEcuZ4jix3EJUxrEsrNibgTChr2+msXatsD3DlueVwkhIWvzsq0SRYW8nLMRbsLCPwiJ+23ds5L50SkHxE8Q71H8WA554KLarMkMwIioeYPumLFjz5MLlnEmi2L1dBAweM5kjHqwqse0jHgHCroItW/wLksY3AHZH2c9mwbv0X2Z0LDMKtSJi+hM9Wpuxh0CEoRkbMizvUhZ/sE3HNgLbhJOcB1D305P2J3H8VJhZH2VWc8TAdQFwXzIg16uMVmDBuV9sPCZrLyfk6spY7PWQjw1cBZSRWJdy+NDjkGepmx5h/AxI4y3VkgaZzVsaluvLwY3fqhNjmCjwmerIZsRyXyIq0yeL8lgg1//aAAwDAQACAAMAAAAQlVI0su0o8OfXFnpOGU284DYvIl19FeMysueQ9G/YAd0Byq/Scy2P8Z7vWF8L5qd4ltF3joYNOgNNGnRopJsfl1gkG7cRxTU+O/8ABcNyniH5BeMYACybX3mmMr4yTgB64Pp7wC5SWU1z4tf0SW6Y7wb4G+G4D3O9A/lJ0tSy5GB8Z27tBxRgHWnQEppfMbIabYmwopgj8kH8B7c/oMeDdvRdsrgTHsIMW2qjj67WxFXkjuimiOOZa8+QYYdbbrnli8MGaPsIvW50genVQrRPoQ84IpnK5Otzfl6VOrP0r8AJC+6cfwJNLDiuaCvZ/wDszS56T0kXHBdZYZjATiUT+YkwAFG8jl+mNsZaMYiHgERtlqe+eFf/ABOTlcqIC6XQzXa/xeWc/iLM4AL7Cum3t8P/APiKJzG/v6d1RCOnPdQS6WXdZnpsoWp/0chQkNvhR9H5bLwOzt6MvETEyUR4Ju3351l5ULRBaT//AHeFC0ZPqWzfJLP86/Ujox7yTwDvsS7R+Lj/xAAcEQEBAQEBAQEBAQAAAAAAAAABABEhMRBBUWH/2gAIAQMBAT8QwZwIPu2Zzh8AsGbBZiGyDbNyQt2bLwWFa3ZRPIUwn0hPHI4hdR2LrcmXCLxHZl1IXZBalsXANkTRs3RyTxmfF2QlFQBA4kysJahHxZ8O3N2B5sWOELrcmHkgkWX5NlvJk8krJLFStyAPJ5YUAIPG2VvvJ/BF+Ykwk3hYLERbmYQoTZCCDPjsm+3EL8QDWR9KnwRAnJPCV+WZCYWNXDQ9QttchsN78bQgm8ivQt5gBs+BsAazxNooWlC5bMuxoNiA2ONLYmXtmaxrWZpZEE4Z8QgdmR2Dqy1trIULaDt+pCOsomuZEeTG8+DBkZdvMsLjC6EO8LRz4bqCwymkkkS1uRsJFm6EOLJ15IBKC3mKlFD4oQGy+kayGsVkWWJcnbkIc+YjpY1Zw2Iwl5MlCBkRi/NeiFykmGzga2JWRMAgfALQxJbeEIoWlQ+JMYsOxbCYAsHZl+z2wBNVyYkhX4pn8tB5bslQhTs2idCXudnbmNin8SR2UbgFsu3JWUtFLlbDOzpKyD20O37Foezh2ZJ9oECwfWcRjLcn6JYHBbFsecndIWLHnbiTj5F4RODX4BgxYlmrOCxbz/ialo3uZwmCS3Fs7YnZnqAe3GWEtis+Y5mt30ApNwsgN18zwnHcvFXnwuhfmygbXZKQxmN3ghLkFeS4VOWZvy90hflQR8QA/MKiejame3k2A9imnxY82wCxiEOFm8sHItwurkYULUBwsClWERrkPnMHICISOX51OssKDlK2Fp8iTkt8Tfm2UPkOSsP6spdXZ/aHAWBa/ByHYIYQGt9JSNsQWyLIUJkQjA2VIxlRHchLs5j8HcBAPJ/za/lgeSmuTChYxt/UhciN2XrJ7WcIzs5dmsRG9ZeESdsRrYRZEkXGAj8rOR8C3ULsLcBY3s+DS0VwjHkIPJGwuVN6tjchNC4Fyts0iRDTNycHkuIVv92bjMFt2i/ch3NjXYls6yJknxv1J/1EOtwJj9ufgbCxVy5omDSFGkjzdeEm1AuB2MHyIohd/Lfna2T6cwGygdm83voBrczsXRkKye4ec50i3t6W1Awg78sY8i8bI3ITyf8AEmPJkcuFLD5YWzZ2HrExPBYjydLBSofLRVPkUMNlfUy9k9LANjjdTBiRtsdR+sSN7kSWpCSDCyWEWmhC/AfZExj4e5yUVyXJASIwPJkoTw2RLWbSyw2H2uq9ppZHbC7HGhIRL/VgeylrJ7MaxWM+Asy2mJbHJUeTRC5TagQ1sLknjIjk58m1yzrLiJ7kqSIbZB26lmZGy/hGMUexumUe2R2Ueyj7FmLelgx8V1y3KTeEc8iGMXnZ/MQcg87ZOSrCbJDqUpkunLbBPAy4bYHYz7ZJxMqV7U5BCiM9Sb7N7xcFjHfjfkS0B4X8VqFjayhsFOcmOEY+WaCsg8L1mshHlAGzoNnM53Xy2LaZDPb3mHM2ROM7cI7czWEOw3sQaTA5YSE6afLimsbwsl8qjLEsYLXBDjyXfJI4l2HxNDk6vJuoLwiXImb1JEt4WHrMIbZjtoe3H2LHti1+a0aSK5ZcvferI9s7BBYLtpwiVydnIAGBIFFXdyfCTTCwHCdeTn5BTyN/IjT4BgazD2WPYi7eomEWIwIzN+ex6RBGGuxBjEgbDdZ7lkqHwdx2MHbpmyWv7IezCJ0JjuT3CyHgTdBJzqCz04+aEHyGsdtjAL8QwORl2J6j52zNYMmcoSuhYuzkGaycL8tR7D5t3tpyxKEuTHg2lC7EPkDw34HqBZnJXi0uW8nQ2S0abXwGBMC/rsQwaQuHCUhonpB5EtnNkz2yxiVyVoWYYwLHgneglN5G6GOIyaYQCoWahE6+Tq5IPJi5aPkk75sUrpkSBjkPQW8JdYSCcSw/HppyXIS2LGQsNl6gkmxDOh2YE+iwPzEhYK0YkieX4i2clkvIwJoRSSBYxrGes3XcPjiQscLbhYChOKXf24C/O3kJMhOQxB2AxGy0hcdkKEnZi7GAt38hS84jcyXyl058YJBbOmVgyIyCbbAWFmwqhPnEhcixKgfiQNQiBAGxh1vCt3wk8kpiL82xnZUdg7fNZHLrxMrkgQs9Hi/jn1yVufBIztjG3YTtyFOTuhY0HBt7loOSEBZFYYFuAgbCc3k2tsCFHYvSI9xhFyfCJFyD4TcN+bRoX4loSD2yeok9+MMWxLXlwNvvJRyEuWsI6LCQX5lmhbCE2LANb9SfE2J2QEHua5wwHswOyO0OcWjPG47Zgbfo2nZhJ+oMiwTW2BB0FweTA8teQYWZHZ6UoQkCFylshtjq3sIRYz7A/bvS/8QAHREBAQEAAwEBAQEAAAAAAAAAAQARECExQVFhcf/aAAgBAgEBPxBWI2hPkqsnUExY6e0ozZOMT7GRPDskCVQmVi7xaw2zJOWE7cQXxfytGSNMrJonKH8bdKSyV2X2N+8edwhC2Zl8geJ4t8QxG7qkfko+TfkGeQHyPJPyRfL+EWoCmMgmHcZ1YcISWKfZNO4HtEOINkPCTqcZVCMwh+EPfJREuknoFjvscbZvEu/CIie+FSBGdTxMspllsQaNx4Q6lgzgcyBMWh9tkDFLakIgw4hZPGydxDiQMwsZwhqapAsWPqyRpYXXjRbCQtxst7BNsXR3aOzEd+iHnk58nGU4RUn4smxL4MfGczKUfbL3IyLZAQNgF+EBsNqwjEQTGPsBdz0+aFk2mCjfJZyUYhKd2Aw1QdHATZTLWLstJw0vRumM3WxTrG7nWTZhOCjvcmybO36SjipJGol1wWPqOjwLuHIakCQSjMNslleJchtULYJJAs+ybMWhJHWXbGBMY4SMtwCa7pYRuyXUgoJMQ4RCJmG1+SD5IXRdF2WjZEgkGVs5Kkfbs5Q8upbs22STu8BaOpTgiCEYQwEDndkmoOok0YVKIBGoMQ+TEbbBnLV4gsqCMiJY/VlHfB9fsD9jz23fbRZ2b7DUHqUstkfk28KU2XGMBtzy0fJW+Qz5C+IVH9jdszTFJbGYkI0sEmzbdEgzD7B1YoDOYQk12YjbJ9jdprwyI/yw8JlJsbZ4B3wkXCF0Z2TqcZIn2bZBLw3hIn2H9gz2V4ergBm/daPsCQkDbMgzGyZa3fwLsaYb3xhJ1KEgzxmWKzxsr6m/Z89k32w9Yv2B9WD2WOPs2X944YRAdJu7RwGGbLI4WuyYT3wLNs3x9CT9kXgeJi2oDJns7btm8Ai2QsGQJIm0UB8uizQu5dkpDhCZgnG0NqwsHZJaXVHu9XiaDN2THkpSL2xeypaky9u/2DGw02exP2QkIJ0W5aNpSZwts7PKPITIN8rBZSsTJyhI7HqOkI2pkGUZB7KEowjKS6zYRK4EG/xdduzL5ZvL81h8svkIfLWeSHyZnZwdI53nU5tDLbKpCUWhe7abJHghh9gfXhQIp3fId8gHnDhrKXjWXoXZ5YeIpbWCX9xWSbyatu4BBt0w3idaDAfU2zD7f0h/eMa22B0sxmF7hfVuJHbMzsAyBduyZQYuoKzR2cxL2QJdl2eZi0zqXZa31Yfbu9t07hfUBbRZLG04Lse5VIgwB3A+cf5XddpYM2iQeOLxN+SVpSth2seSpZQmUTuU9S57aZEIBh6EqshYxgjgAOlgxbAWDN4Akf1E+42E6TCytnmIE4WMIYsxFlWxZ4T9jbulbpmJR9hOMPc4KVD7Jvs/7KGcFkLIROzbKGD4lszg1tEfZezQOWUuwVlyKEmUZRsdoTk28A0kGdSCSEpw2a1LZ7ioBwAEQDS+U3J/idfJs8mzyJvUoyjP1O4ZsawIh8vAjThMOs8eZscYYwJN0iqQLVwuiDsFlsGkEFedfkSnib4sYRayVmWC/WEgbMYkUZCNJFBUgT+7EfzLlmwEfyCKJSYZf2Xls3Ux9wvjThyKWANrJUQ4C7x5WUAxi7kMZQmc45IEwhLG2bJtTqBZMklyUZ0RybwpatHyUfJT5GPI98kPlpTloJSmGMd8Ak8WeyyBCSFukZu2ZCMiLCZ9LdsRZCKCXgMQfkSeTnixA/FiWVssshTvgloRZLN1NvkhIpZY2PsBhfJxacgDJKmiAO5CzSzQh3EETHYJKrD7OHs69tX26b1eMF+Tny24s2Ko7hNlLqyhNO7Ad4un2Zv/xAAkEAEBAQEAAgICAgMBAQAAAAABABEhMUFRoZHBEGFxgbHR4f/aAAgBAQABPxBD1JDlhQMLsvTSHKYC4hsxQljhAZMsyCc+SzISsJsHkD1ScBHfQbxCtRnjhc7nmWIUcLU5ApFZe55uJDCbxM+C0f2jxL0+rmSPyXF+UA7AzSc+Zqxw/e+cSOjMYzaakfW3kf4l1BMtmj+MG+Y/373iPz8xgY7/AHC/DsanJmsHm9nIAwjx4njkEEXZM3Yo7Hv9ITn3gQ1shN3J1JHUeE2QFGo7Cg3a6lfH4kEpoGdlzG0BviLdbpl5tALQpxzFvJ1QlXBtkbyzyst6pvxvep7BSP2ZCSiOG+59mI5eoG5AsSA+0uKTlRwjQrR6jDWXvLpCc92QQuCDxCMxRPyiCCZKhSyBgfPDGJz+Jk1yJUUocTPj+LhvrCkzCoR1T3BBfiMNPEy6Snt5IXXhcgEzIj54nTr+NtNsWRP0bAxfUUeJNhbSfWUQiBomWY2WBmCbAdkc5KuF7OwbyGeJeL8XjeZo9pJAxESQ62i8Pn5kP7YbxFsYaloiDkII1jQyc4TKKgQPUMd3WNabydPjI6YhknFySRcMse2hijC1OtM3m9XUYoz3LHWyh+ssULDR5OtPm88fwM2+N0eyZqzNYZFPS8zL0x2YsMTubaaxLT1PZhMoID57jP8AiDlYMnZIkobRp9LxxiYiBkuz7ROz+LiiU+PFn1JP72g0HD4lOqEmG4XOmyHmXvbCq+YAY28uSMPeSn2jI85Aht0c2fgskti8QHuxPnqa8fiReIx4TDl4xH1hEjhDekl8T8TMbh5uIEczjUlfCwuR44vDkYpsp7XjFthPUz2MCRHy48wNLZpCbNMtcXm0Gdm9Xnhep/mMufzeILq7szyk3HIGD97/AO7/AIUC+Xu9lZh+FvwFGf2AtYfUF5l14vBfd4JC0lOR+RACF0s9w8UpGeo8xKwfNo28lE55YsfvLvLbxreatrGy6bWyVJsBip9yEPYqbZpMyZfj7kDs4K+JxjNwfvFfLszkjfFqdLoz+MA2CDSQdIH+Z0+VjiTgjB3ra3IisGsP8caQzeT6zCiMmyGR+02E4CciFos/o9tnyD4+IAhkHU577/N/6RED9r0D82Ny/wC5OYdG8g3ZfafSBtm2I0n3E05DBQbwxeGkccIryBd3UxgfiwQZYBcyGyD6LAXWPqvm61sP8JbTEZ358xl7dUs4SoY1/m1ap7ROUbAH2jepNmOrEJMxDk3MbOXztmGIOLd77gAbVG5+XoLACzZYXcr/AJsXv8RVEZZp2b0Z2d6zrptuH4/Ez5V+KWaDyPaplkH7zn952GoEXgFgC7P4gSE8xJtJJKLZXD/do33g2ekr5OBK51sBL2+Iv/T4jrz+LF0/iG8f4sOPrJP024fb4n1/WQXxmEKpo/rbCYnHUyHTUG1eboW8xL0CU8QUiRj97H5LHXuyFkmcRcVxlK/aIPd0cu4NgaxcoIe4R+DIEJ7Admjn8RfH5+I9kMeQryAmTEZKMibEGGMSQfMfjYD5s3VnmhCLaW32uqN3TI9Txd5JbR9xFg4+l6PA/wDNk6/iCCNkJgG2EwKi/wBkHJQtFCDF2zGbIxr/AFbbx/xHRPd4idimC6kuwljGw8bnKXOjb8vC0NhRi1MTQmn8wuyBsGYo2dOiH4fMV4vGUxUbKNhKMlgynVG1zZQZuxBR3g8Ypdg3/F4j6uYl54Q3SN8S/i8bwpQXTfMIPZs1TIQG6Df4hIN+8j/aD9hF4+3zf+8Rhv3nOmCP3jH739TZ2G+/M6O7AiEoxl++ZVkRxiTVzJsMXBq0ubcO8izaaPqY2/MZeewgs0GU7RyDx5ZZ0ndRP/XAw+8GDiuK9kyCHs60liHPbL9yUhvnzCFd7I3SA9I02ZEh6nuKHCUPjC2BPK12dpstEwLZN9S85s68ydvrEBin9b1PrJMdyyvD2BoNlw+bRJ+qc/fx+ImGIk15igbFtGMaQ53AtUAPh25x2wEJVv6HW8d9+YlLsDzEuIBiSF2JjzsWf+IElVkA7LVOpDx/EK/8XX+kv6Sc57fF/Zf4u1Lc3PFgzLZw02AdpjRepC1st2nJoFWcf9WwatzuShFbUvmHVA8DbsS0kgxpzy7I3ITyQPBGeWXZZuhYfC8FXFP4n2Hz8QEPrOfMyzh8THazx7MTfCUYW68wvHWBbplNEQA1EXbJDJ81m63GGCT8yNFKtYZEmpjHnstUfUI9mHZwbdTb3EDO3nM+vRvMoHC8GITlsXtbBKaTu2G0BBkaTUn1nWDP4gJOT5oYwcxvD+JfreGk3+tPl9ooF5gN0yyzygHGRojOrVnDDg1bF31N5r/cI9EPFIuJ48t4OTS4TDxeZED/AMzDi8NJ4jODIiFkixtyx+pR6jkyxl5PdgOLRBeUWY7dQW2PiQGs2bTM7vqNxCab5jvmMesVRWRd1gEZlf0sY+8xXiH83PUa6XjTxDHy1wfdqom7dEshQ/awxM8bCexKddjf5P4QE8bKSkHu0TnbJPpJejt42S/EnLxAmFtIXA7ZTsU+ZGgOd8pk4D7Z7/X5nSeUfTvYGpeB25zbUm8nzRegZDobfmLFl5DkcK1CJnSS6e4w0XyOXDILKTJBvHdlV1J4HLkQsOf+d3rv4/gb6kIU0yVCZ/d3m+/Mg4bwlcDni2b1+wzpHghFeBAuImmbbifSzQzJQwZedN4TgHRnCSUC5MnWB0OSg0tNCb5tmCjuiPS2tgMbwPN42Syek3E55l+S9ttWwzcr/wBzu4i5iRtQxv2vRPE69L0S8UJwPSXNEOijIIPvZNx6qeJX0tGy8MQxyU8i4JiiHaplkB+151sYMLFY3/DIIPbHX5SgI5aw0yYRRYfOFdeYlg2Te8tUDLJQS7YV63ZmE0UmHF5uvOWbd4T1uzbidkln8wpzPnNi2kKRJ9otSbk8Ch814GzA31M5PcJmntHiTgFki8oWQ6ggoGPT4sWe7sBjRSKwYEMk4MWb6xCv0iv6R4K1N4EyXBUCda+8BB+95KWmi5z22hEiMue7dAncYNYqOZNgTdjZOne/1at/4sz9L//Z"})},
"esri/views/3d/webgl-engine/shaders/WaterSurfacePrograms":function(){define(["require","exports","../lib/DefaultVertexAttributeLocations","./sources/resolver","../../../webgl/programUtils"],function(p,c,n,l,k){Object.defineProperty(c,"__esModule",{value:!0});var d=function(d){return k.glslifyDefineMap({SLICE:d.slice,RECEIVE_SHADOWS:d.receiveShadows})};c.color={name:"water-ocean",shaders:function(c){return{vertexShader:d(c)+l.resolveIncludes("materials/water/colorPass.vert"),fragmentShader:d(c)+l.resolveIncludes("materials/water/colorPass.frag")}},
attributes:n.Default3D};c.drapedColor={name:"water-drapedColor",shaders:function(c){return{vertexShader:d(c)+l.resolveIncludes("materials/water/drapedColorPass.vert"),fragmentShader:d(c)+l.resolveIncludes("materials/water/drapedColorPass.frag")}},attributes:n.Default3D};c.drapedNormal={name:"water-drapedNormal",shaders:function(c){return{vertexShader:d(c)+l.resolveIncludes("materials/water/normalPass.vert"),fragmentShader:d(c)+l.resolveIncludes("materials/water/normalPass.frag")}},attributes:n.Default3D}})},
"esri/views/3d/webgl-engine/materials/renderers/Instance":function(){define(["require","exports","../../../../../core/libs/gl-matrix-2/mat4","../../../../../core/libs/gl-matrix-2/mat4f64"],function(p,c,n,l){return function(){return function(c,d,h,g,f,b,a,e,m){this.name=c;this.from=d;this.to=h;this.displayedIndexRange=g;this.highlightedIndexRanges=f;this.transformation=b;this.instanceParameters=a;this.idx=e;this.dataId=m;null!=b&&(this.transformationNormal=l.mat4f64.clone(b),n.mat4.invert(this.transformationNormal,
this.transformationNormal),n.mat4.transpose(this.transformationNormal,this.transformationNormal))}}()})},"esri/views/3d/webgl-engine/materials/renderers/utils":function(){define("require exports ../../../../../core/libs/gl-matrix-2/mat4 ../../../../../core/libs/gl-matrix-2/mat4f64 ../../lib/ComponentUtils ../../lib/Util ../../../../webgl/Util".split(" "),function(p,c,n,l,k,d,h){Object.defineProperty(c,"__esModule",{value:!0});c.generateRenderGeometryVisibleIndexRanges=function(d){return d.instanceParameters.hidden?
[]:k.generateVisibleIndexRanges(d.instanceParameters.componentVisibilities,d.componentOffsets)};c.generateRenderGeometryHighlightRanges=function(d){return d.instanceParameters.hidden?null:k.generateHighlightedIndexRanges(d.instanceParameters.componentVisibilities,d.instanceParameters.componentHighlights,d.componentOffsets)};c.doesRenderGeometryHaveHighlights=function(d){return d.instanceParameters.hidden?!1:k.hasHighlights(d.instanceParameters.componentVisibilities,d.instanceParameters.componentHighlights,
d.componentOffsets)};c.isRenderGeometryHidden=function(d){return d.instanceParameters.hidden?!0:k.isAllHidden(d.instanceParameters.componentVisibilities,d.componentOffsets)};c.drawArrays=function(d,b,a,c,g){d.drawArrays(b,a,c);g&&(g.drawCalls++,4===b&&(g.triangles+=c))};c.drawElements=function(d,b,a,c,g,k){var e=h.getBytesPerElement(a);d.drawElements(b,g,a,c*e);k&&(k.drawCalls++,4===b&&(k.triangles+=g))};c.drawArraysFaceRange=function(d,b,a,c,g){for(var e=0,f=0;f<b.length;f++){var m=b[f],h=m[0]+a,
m=m[1]-m[0]+1,e=e+m;d.drawArrays(c,h,m)}g&&(g.drawCalls+=b.length,4===c&&(g.triangles=e/3))};c.drawElementsFaceRange=function(d,b,a,c,g,k){for(var e=h.getBytesPerElement(g),f=0,m=0;m<b.length;m++){var l=b[m],q=l[0]+a,l=l[1]-l[0]+1,f=f+l;d.drawElements(c,l,g,q*e)}k&&(k.drawCalls+=b.length,4===c&&(k.triangles+=f/3))};c.acquireMaterials=function(d,b){var a=new Map;a.set(0,b.acquire(d,"color"));a.set(3,b.acquire(d,"depthShadowMap"));a.set(2,b.acquire(d,"normal"));a.set(1,b.acquire(d,"depth"));a.set(4,
b.acquire(d,"highlight"));return a};c.releaseMaterials=function(d,b){b.release(d.id,"color");b.release(d.id,"depthShadowMap");b.release(d.id,"normal");b.release(d.id,"depth");b.release(d.id,"highlight")};c.calculateTransformRelToOrigin=function(c,b,a){var e=c.origin.vec3;d.setMatrixTranslation3(g,-e[0],-e[1],-e[2]);n.mat4.multiply(b,g,c.transformation);a&&(n.mat4.invert(a,b),n.mat4.transpose(a,a))};var g=l.mat4f64.create()})},"esri/views/3d/webgl-engine/shaders/HUDPrograms":function(){define(["require",
"exports","../lib/DefaultVertexAttributeLocations","./sources/resolver","../../../webgl/programUtils"],function(p,c,n,l,k){Object.defineProperty(c,"__esModule",{value:!0});var d=function(d){return k.glslifyDefineMap({OCCL_TEST:d.occlTest,SIGNED_DISTANCE_FIELD:d.sdf,VV_SIZE:d.vvSize,VV_COLOR:d.vvColor,VERTICAL_OFFSET:d.verticalOffset,SCREEN_SIZE_PERSPECTIVE:d.screenSizePerspective,CENTER_OFFSET_UNITS_SCREEN:d.centerOffsetUnitsScreen,DEBUG_DRAW_BORDER:d.debugDrawBorder,BINARY_HIGHLIGHT_OCCLUSION:d.binaryHighlightOcclusion,
SLICE:d.slice})};c.colorPass={name:"hud-color",shaders:function(c){return{vertexShader:d(c)+l.resolveIncludes("materials/hud/hud.vert"),fragmentShader:d(c)+l.resolveIncludes("materials/hud/colorPass.frag")}},attributes:n.Default3D};c.highlightPass={name:"hud-highlight",shaders:function(c){return{vertexShader:d(c)+l.resolveIncludes("materials/hud/hud.vert"),fragmentShader:d(c)+l.resolveIncludes("materials/hud/highlightPass.frag")}},attributes:n.Default3D};c.occlusionPass={name:"hud-occlusion",shaders:function(d){return{vertexShader:k.glslifyDefineMap({VERTICAL_OFFSET:d.verticalOffset,
SCREEN_SIZE_PERSPECTIVE:d.screenSizePerspective,CENTER_OFFSET_UNITS_SCREEN:d.centerOffsetUnitsScreen,SLICE:d.slice})+l.resolveIncludes("materials/hud/occlusionTest.vert"),fragmentShader:l.resolveIncludes("materials/hud/occlusionTest.frag")}},attributes:n.Default3D}})},"esri/views/3d/layers/graphics/Labeler":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/Accessor ../../../../core/asyncUtils ../../../../core/Handles ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/accessorSupport/decorators ../../../../layers/graphics/dehydratedFeatures ../../../../layers/support/labelFormatUtils ../../../../symbols/callouts/calloutUtils ./Graphics3DCalloutSymbolLayerFactory ./graphicSymbolUtils ./labelPlacement ../../support/debugFlags ../../webgl-engine/Stage ../../webgl-engine/lib/Layer ../../webgl-engine/lib/MaterialCollection ../../webgl-engine/lib/TextRenderer ../../webgl-engine/lib/TextRenderParameters ../../webgl-engine/lib/TextTextureAtlas".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z,A,B,D){Object.defineProperty(c,"__esModule",{value:!0});p=function(c){function h(){var a=null!==c&&c.apply(this,arguments)||this;a.idHint="__labeler";a._dirty=!1;a.labels={};a.labelsToAdd={};a.labelsToRemove={};a.labelingContexts=[];return a}n(h,c);h.prototype.setup=function(){var a=this;this.handles||(this.handles=new f,this.handles.add([this.view.watch("state.camera",function(){return a.setDirty()}),this.view.watch("pixelRatio",function(){return a.resetAllLabels()})]));
this.textTextureAtlas||(this.textTextureAtlas=new D.default({idHint:this.idHint+"_atlas",view:this.view}),this.hudMaterialCollection=new z(this.view._stage),this.calloutMaterialCollection=new z(this.view._stage));this.handles.add(this.view.resourceController.scheduler.registerTask(8,function(b){return a.update(b)},function(){return a.needsUpdate()}))};h.prototype.dispose=function(){this.handles&&(this.handles.destroy(),this.handles=null);this.textTextureAtlas&&(this.textTextureAtlas.dispose(),this.textTextureAtlas=
null);this.hudMaterialCollection&&(this.hudMaterialCollection.dispose(),this.hudMaterialCollection=null);this.calloutMaterialCollection&&(this.calloutMaterialCollection.dispose(),this.calloutMaterialCollection=null);this.labelingContexts=[];this.labels={};this.labelsToAdd={};this.labelsToRemove={}};h.prototype.isActiveLabelingContext=function(a){return a.active&&this.labelsEnabled(a)};h.prototype.activateLabelingContext=function(a){for(var b in a.labels){var d=a.labels[b];this.labels[b]=d;d.graphics3DGraphic.setVisibilityFlag(0,
!0,1)}a.active=!0};h.prototype.deactivateLabelingContext=function(a){for(var b in a.labels){var d=a.labels[b];d.graphics3DGraphic.setVisibilityFlag(0,!1,1);d.rendered&&(this.labelsToRemove[b]=a.labels[b]);delete this.labels[b];delete this.labelsToAdd[b]}a.active=!1};h.prototype.addLabelTextureToAtlas=function(a){for(var b=0;b<a.graphics3DGraphic._labelGraphics.length;b++){var d=a.graphics3DGraphic._labelGraphics[b];if(d._labelClass){var c=a.textRenderers[d._labelIndex];c&&this.textTextureAtlas.addTextTexture(c,
d.stageObject)}}a.rendered=!0};h.prototype.removeLabelTextureFromAtlas=function(a){for(var b=a.graphics3DGraphic,d=0;d<b._labelGraphics.length;d++){var c=b._labelGraphics[d];c._labelClass&&(c=a.textRenderers[c._labelIndex])&&this.textTextureAtlas.removeTextTexture(c,b._labelGraphics[d].stageObject)}a.rendered=!1};h.prototype.needsUpdate=function(){return this.view.ready&&this.isDirty};h.prototype.update=function(a){for(var b=this._dirty=!1,d=0,c=this.labelingContexts;d<c.length;d++){var e=c[d];if(this.isActiveLabelingContext(e)){if(!this.hasValidLabelClassContext(e)){if(this.hasInvalidLabelClassContext(e)){this.deactivateLabelingContext(e);
continue}this.createLabelClassContext(e);if(this.hasPendingLabelClassContext(e)){this._dirty=!0;continue}if(!this.hasValidLabelClassContext(e))continue}for(var f in e.labelsToInitialize){var g=e.labelsToInitialize[f];this.ensureGraphics3DResources(g)&&(this.labels[f]=g,b=!0);(g.visible&&g.hasTextTextureResources||!g.visible&&g.hasGraphics3DResources)&&delete e.labelsToInitialize[f];if(a&&(a.madeProgress(),a.done)){this._dirty=!0;return}}}}a&&b&&this.view.deconflictor.setDirty();for(f in this.labelsToRemove)this.removeLabelTextureFromAtlas(this.labelsToRemove[f]),
delete this.labelsToRemove[f];for(f in this.labelsToAdd)this.addLabelTextureToAtlas(this.labelsToAdd[f]),delete this.labelsToAdd[f];this._dirty||this.notifyChange("updating")};h.prototype.hasPendingLabelClassContext=function(a){return a.labelClassPromise&&!!a.labelClassAbortController};h.prototype.hasValidLabelClassContext=function(a){return a.labelClassContexts&&a.labelClassContexts.length};h.prototype.hasInvalidLabelClassContext=function(a){return null===a.labelClassContexts};h.prototype.createLabelClassContextAsync=
function(b){return d(this,void 0,void 0,function(){var c,e,f,m,h=this;return k(this,function(l){switch(l.label){case 0:return c=b.labelClassAbortController.signal,[4,b.layer.when()];case 1:l.sent();a.throwIfAborted(c);b.scaleVisibility&&b.scaleVisibility.updateScaleRangeActive();e=b.graphics3DCore;f=e.layer.labelingInfo&&e.layer.labelingInfo.filter(function(a){return!!a.symbol});if(!f||0===f.length)return[2];m=Array(f.length);return[4,g.forEach(f,function(f,l){return d(h,void 0,void 0,function(){var d,
h,y,n;return k(this,function(k){switch(k.label){case 0:return d=f.symbol,h=r.getGraphics3DSymbol(e.getOrCreateGraphics3DSymbol(d)),[4,h.load()];case 1:k.sent();a.throwIfAborted(c);y=null;if(!u.isCalloutSupport(d)||!d.hasVisibleCallout())return[3,3];y=t.make(d,e.symbolCreationContext);return[4,y.load()];case 2:k.sent(),a.throwIfAborted(c),k.label=3;case 3:return[4,g.result(q.createLabelFunction(f,b.layer.fields.map(function(a){return a.toJSON()}),this.view.spatialReference))];case 4:return n=k.sent(),
a.throwIfAborted(c),!0===n.ok&&(m[l]={labelClass:f,labelFunction:n.value,graphics3DSymbol:h,graphics3DCalloutSymbolLayer:y,calloutSymbolLayerIndex:0,textRenderParameters:this.createTextRenderParameters(h.symbol)}),[2]}})})})];case 2:return l.sent(),a.throwIfAborted(c),b.labelClassContexts=m,[2]}})})};h.prototype.createLabelClassContext=function(b){return d(this,void 0,void 0,function(){var d=this;return k(this,function(c){b.labelClassPromise||(b.labelClassPromise=this.createLabelClassContextAsync(b).catch(function(d){if(a.isAbortError(d))throw d;
b.labelClassContexts=null}).then(function(){b.labelClassAbortController=null;d.notifyChange("updating")}),this.notifyChange("updating"));return[2,b.labelClassPromise]})})};h.prototype.createTextRenderParameters=function(a){return(a=a.symbolLayers.getItemAt(0))&&"text"===a.type?B.default.fromSymbol(a,this.view.pixelRatio):null};h.prototype.destroyLabelClassContext=function(b){for(var d=0,c=b.labelClassContexts;d<c.length;d++){var e=c[d];--e.graphics3DSymbol.referenced;e.graphics3DSymbol=null}d=b.labelClassAbortController;
b.labelClassAbortController=a.createAbortController();d&&d.abort();b.labelClassContexts=[];b.labelClassPromise=null;this.notifyChange("updating")};h.prototype.createTextSymbolGraphic=function(a,b,d,c,e){a={text:a.text,centerOffset:d.centerOffset,translation:d.translation,elevationOffset:d.elevationOffset,screenOffset:d.screenOffset,anchor:d.anchor,centerOffsetUnits:d.centerOffsetUnits,verticalOffset:d.verticalOffset,debugDrawBorder:w.LABELS_SHOW_BORDER,displayWidth:a.displayWidth,displayHeight:a.displayHeight};
C.graphic=b;C.renderingInfo=null;C.layer=c;return e.createLabel(C,a,this.hudMaterialCollection,this.textTextureAtlas)};h.prototype.createLineCalloutGraphic=function(a,b,d,c,e){b={symbol:b,translation:c.translation,elevationOffset:c.elevationOffset,screenOffset:c.screenOffset,centerOffset:c.centerOffset,centerOffsetUnits:c.centerOffsetUnits,materialCollection:this.calloutMaterialCollection};C.graphic=a;C.renderingInfo=b;C.layer=e;return d.createGraphics3DGraphic(C)};h.prototype.ensureGraphics3DResources=
function(a){var d=a.graphics3DGraphic;if(d.destroyed||a.hasGraphics3DResources)return!1;this.ensureTextTextureResources(a);var c=a.labelingContext,e=!1,f=d.graphic,g=c.labelClassContexts,m=c.layer,h=this.labelsEnabled(c);if(!g||0===g.length||!d._graphics[0])return!1;for(var k=0;k<g.length;k++){var l=g[k],q=l.labelClass,r=a.textRenderers[k];if(r){var t=l.graphics3DSymbol,u=null;t.symbol&&"label-3d"===t.symbol.type&&(u=t.symbol);var y=t.symbolLayers[0],t=x.get({graphics3DGraphic:d,labelSymbol:u,labelClass:l.labelClass});
if(y&&!b.isNone(t)){if(e=this.createTextSymbolGraphic(r,f,t,m,y)){if(e._labelClass=q,e._labelIndex=k,d.addLabelGraphic(e,c.stageLayer,this.view._stage),d.setVisibilityFlag(0,h,1),d.clearVisibilityFlag(1,1),d.setVisibilityFlag(3,!1,1),e=!0,l.graphics3DCalloutSymbolLayer&&t.hasLabelVerticalOffset&&(f=this.createLineCalloutGraphic(f,u,l.graphics3DCalloutSymbolLayer,t,m)))l.calloutSymbolLayerIndex=d._labelGraphics.length,d.addLabelGraphic(f,c.stageLayer,this.view._stage)}else return!1;break}}}c.scaleVisibility&&
e&&c.scaleVisibility.updateGraphicLabelScaleVisibility(d);return a.hasGraphics3DResources=!0};h.prototype.destroyGraphics3DResources=function(a){a.graphics3DGraphic.clearLabelGraphics();a.hasGraphics3DResources=!1};h.prototype.ensureTextTextureResources=function(a){if(!a.hasTextTextureResources){var d=a.labelingContext,c=d.labelClassContexts,e=a.graphics3DGraphic.graphic;if(c&&0!==c.length){for(var f=0;f<c.length;f++){var g=c[f];a.textRenderers[f]=null;if(g.textRenderParameters){var h=g.labelFunction,
k=void 0;if("arcade"===h.type){var l=m.hydrateGraphic(e,d.layer);try{k=h.evaluate(l)}catch(Q){k=null}}else k=h.evaluate(e);b.isNone(k)||""===k||(a.textRenderers[f]=new A.default(k,g.textRenderParameters))}}a.hasTextTextureResources=!0}}};h.prototype.destroyTextTextureResources=function(a){a.textRenderers=[];a.hasTextTextureResources=!1};h.prototype.addGraphic=function(a,b){var d={hasGraphics3DResources:!1,hasTextTextureResources:!1,visible:!1,rendered:!1,labelingContext:a,graphics3DGraphic:b,textRenderers:[]};
b=b.graphic.uid;a.labels[b]=d;this.isActiveLabelingContext(a)&&this.hasValidLabelClassContext(a)&&this.ensureGraphics3DResources(d)?this.labels[b]=d:a.labelsToInitialize[b]=d;this.setDirty(a.graphics3DCore.asyncUpdates);this.view.deconflictor.setDirty()};h.prototype.removeGraphic=function(a,b){b=b.graphic.uid;var d=a.labels[b];d&&(this.labels[b]&&(this.removeLabelTextureFromAtlas(d),delete this.labels[b],delete this.labelsToAdd[b],delete this.labelsToRemove[b]),d.hasTextTextureResources&&this.destroyTextTextureResources(d),
d.hasGraphics3DResources&&this.destroyGraphics3DResources(d),delete a.labels[b],delete a.labelsToInitialize[b],this.setDirty(a.graphics3DCore.asyncUpdates),this.view.deconflictor.setDirty())};h.prototype.labelsEnabled=function(a){return!0===a.layer.labelsVisible&&null!=a.layer.labelingInfo&&0<a.layer.labelingInfo.length};h.prototype.labelingInfoChange=function(a,b){return d(this,void 0,void 0,function(){var d,c,e,f;return k(this,function(g){if(b){d=0;for(c=b;d<c.length;d++)if(e=c[d],f=a.labels[e])this.removeGraphic(a,
f.graphics3DGraphic),this.addGraphic(a,f.graphics3DGraphic);return[2]}this.visibilityInfoChange(a);this.resetLabels(a);return[2,this.createLabelClassContext(a)]})})};h.prototype.globalPropertyChanged=function(a,d){for(var c=function(c){var e=new Map,f;for(f in d.labels){var g=d.labels[f].graphics3DGraphic;e.set(g.graphic.uid,g)}b.expect(c.graphics3DSymbol.symbolLayers[0]).globalPropertyChanged(a,e,function(a){return a._labelGraphics[0]});c.graphics3DCalloutSymbolLayer&&c.graphics3DCalloutSymbolLayer.globalPropertyChanged(a,
e,function(a){return a._labelGraphics[c.calloutSymbolLayerIndex]})},e=0,f=d.labelClassContexts;e<f.length;e++)c(f[e])};h.prototype.visibilityInfoChange=function(a){var b=a.layer.labelsVisible;b&&!a.active&&this.activateLabelingContext(a);!b&&a.active&&this.deactivateLabelingContext(a);this.setDirty(a.graphics3DCore.asyncUpdates)};h.prototype.resetAllLabels=function(){for(var a=0,b=this.labelingContexts;a<b.length;a++)this.resetLabels(b[a])};h.prototype.resetLabels=function(a){for(var b in a.labels){var d=
a.labels[b];this.labels[b]&&(this.removeLabelTextureFromAtlas(d),delete this.labels[b],delete this.labelsToAdd[b],delete this.labelsToRemove[b]);d.hasTextTextureResources&&this.destroyTextTextureResources(d);d.hasGraphics3DResources&&this.destroyGraphics3DResources(d);d.visible=!1;d.rendered=!1;a.labelsToInitialize[b]=d}this.destroyLabelClassContext(a);this.setDirty(a.graphics3DCore.asyncUpdates);this.view.deconflictor.setDirty()};h.prototype.findLabelingContext=function(a){for(var b=0,d=this.labelingContexts;b<
d.length;b++){var c=d[b];if(c.graphics3DCore===a)return c}return null};h.prototype.addGraphicsOwner=function(b,d){var c=this;if(!this.findLabelingContext(b)){var e=b.layer,f={graphics3DCore:b,layer:e,scaleVisibility:d,active:b.layer.labelsVisible,labelClassPromise:null,labelClassAbortController:a.createAbortController(),labelClassContexts:[],labels:{},labelsToInitialize:{},stageLayer:new y(this.idHint+"_"+e.uid,{isPickable:!0},e.uid)};this.view._stage.add(v.ModelContentType.LAYER,f.stageLayer);this.view._stage.addToViewContent([f.stageLayer.id]);
this.labelingContexts.push(f);this.setDirty();return{addGraphic:function(a){return c.addGraphic(f,a)},removeGraphic:function(a){return c.removeGraphic(f,a)},featureReductionChange:function(){},layerLabelsEnabled:function(){return c.labelsEnabled(f)},labelingInfoChange:function(a){return c.labelingInfoChange(f,a)},elevationInfoChange:function(){return c.globalPropertyChanged("elevationInfo",f)},slicePlaneEnabledChange:function(){return c.globalPropertyChanged("slicePlaneEnabled",f)},visibilityInfoChange:function(){return c.visibilityInfoChange(f)},
reset:function(){return c.resetLabels(f)},clear:function(){},processStageDirty:function(){return c.view._stage.processDirtyLayer(f.stageLayer.id)}}}};h.prototype.removeGraphicsOwner=function(a){if(a=this.findLabelingContext(a)){var b=this.labelingContexts.indexOf(a);this.labelingContexts.splice(b,1);for(var d in a.labels)this.removeGraphic(a,a.labels[d].graphics3DGraphic);d=a.stageLayer.id;this.view._stage.removeFromViewContent([d]);this.view._stage.remove(v.ModelContentType.LAYER,d);a.stageLayer=
null;this.setDirty()}};h.prototype.setLabelGraphicVisibility=function(a,b){a=a.graphic.uid;var d=this.labels[a];d&&(b&&!d.rendered?(this.labelsToAdd[a]=d,d.hasTextTextureResources||(d.labelingContext.labelsToInitialize[a]=d)):!b&&d.rendered&&(this.labelsToRemove[a]=d),d.visible=b,this.setDirty(d.labelingContext.graphics3DCore.asyncUpdates))};Object.defineProperty(h.prototype,"isDirty",{get:function(){return this._dirty||this.textTextureAtlas&&this.textTextureAtlas.isDirty},enumerable:!0,configurable:!0});
h.prototype.setDirty=function(a){void 0===a&&(a=!0);var b=this._dirty;this._dirty||(this._dirty=!0);a||this.update(null);b!==this._dirty&&this.notifyChange("updating")};Object.defineProperty(h.prototype,"updating",{get:function(){var a=this;return this._dirty||this.textTextureAtlas&&this.textTextureAtlas.updating||this.labelingContexts.some(function(b){return a.hasPendingLabelClassContext(b)})},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"test",{get:function(){return{textTextureAtlas:this.textTextureAtlas}},
enumerable:!0,configurable:!0});l([e.property({constructOnly:!0})],h.prototype,"view",void 0);l([e.property()],h.prototype,"textTextureAtlas",void 0);l([e.property({type:Boolean,readOnly:!0,dependsOn:["textTextureAtlas.updating"]})],h.prototype,"updating",null);return h=l([e.subclass("esri.views.3d.layers.graphics.Labeler")],h)}(e.declared(h));c.Labeler=p;var C={graphic:null,renderingInfo:null,layer:null}})},"esri/layers/support/labelFormatUtils":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/promiseUtils ../../intl/date ../../intl/number ./FieldsIndex ./fieldUtils ../../support/arcadeOnDemand".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e){function m(){return d(this,void 0,void 0,function(){return k(this,function(a){return[2,h.create(function(a){p(["../../core/sql/WhereClause"],a)})]})})}function q(b,d,c,e){b=a.getField(e,b);if(!b)return d;if(null==c[b.name])return"";if(d=b.domain)if("codedValue"===d.type||"coded-value"===d.type){e=c[b.name];var m=0;for(d=d.codedValues;m<d.length;m++){var h=d[m];if(h.code===e)return h.name}}else if("range"===d.type&&(e=+c[b.name],m="range"in d?d.range[1]:d.maxValue,
("range"in d?d.range[0]:d.minValue)<=e&&e<=m))return d.name;c=c[b.name];"date"===b.type||"esriFieldTypeDate"===b.type?c=g.formatDate(c,g.convertDateFormatToIntlOptions("short-date")):a.isNumericField(b)&&(c=f.formatNumber(+c));return c?c:""}Object.defineProperty(c,"__esModule",{value:!0});var u={type:"simple",evaluate:function(a){return null}};c.createLabelFunction=function(a,c,f){return d(this,void 0,void 0,function(){var d,g,h,l,r,t,n,x;return k(this,function(k){switch(k.label){case 0:if(!a||!a.symbol)return[2,
u];d=a.where;g=a.getLabelExpression();return d?[4,m()]:[3,2];case 1:return l=k.sent(),[3,3];case 2:l=null,k.label=3;case 3:return h=l,"arcade"!==g.type?[3,5]:[4,e.createLabelExpression(g.expression,f,c)];case 4:return t=k.sent(),r={type:"arcade",evaluate:function(a){a=t.evaluate({$feature:t.repurposeFeature(a)});return null!=a?a.toString():null}},[3,6];case 5:r={type:"simple",evaluate:function(a){var b=a&&a.attributes;return b?g.expression.replace(/{[^}]*}/g,function(a){return q(a.slice(1,-1),a,b,
c)}):null}},k.label=6;case 6:if(d){try{n=h.WhereClause.create(d,new b(c))}catch(H){return[2,u]}x=r.evaluate;r.evaluate=function(a){return n.testFeature(a)?x(a):null}}return[2,r]}})})};c.formatField=q})},"esri/views/3d/layers/graphics/Graphics3DCalloutSymbolLayerFactory":function(){define(["require","exports","../../../../core/Logger","../../../../symbols/callouts/calloutUtils","./Graphics3DLineCalloutSymbolLayer"],function(p,c,n,l,k){Object.defineProperty(c,"__esModule",{value:!0});var d=n.getLogger("esri.views.3d.layers.graphics.Graphics3DCalloutSymbolLayerFactory");
c.make=function(c,f){if(!l.isCalloutSupport(c))return d.error("Graphics3DCalloutSymbolLayerFactory#make","symbol of type '"+c.type+"' does not support callouts"),null;if(!c.callout)return null;var b=h[c.callout.type];return b?new b(c,f):(d.error("Graphics3DCalloutSymbolLayerFactory#make","unknown or unsupported callout type "+c.callout.type),null)};var h={line:k.default}})},"esri/views/3d/layers/graphics/Graphics3DLineCalloutSymbolLayer":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../Color ../../../../core/maybe ../../../../core/screenUtils ./ElevationAligners ./Graphics3DObject3DGraphicLayer ./Graphics3DSymbolCommonCode ./Graphics3DSymbolLayer ./graphicUtils ./symbolComplexity ../../webgl-engine/Stage ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/GeometryData ../../webgl-engine/lib/Util ../../webgl-engine/materials/LineCalloutMaterial".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w){Object.defineProperty(c,"__esModule",{value:!0});var v,y,z=x.VertexAttrConstants;p=function(c){function e(a,b){a=c.call(this,a,null,b,!0)||this;a._elevationOptions={supportsOffsetAdjustment:!0,supportsOnTheGround:!1};return a}n(e,c);e.prototype.doLoad=function(){return k(this,void 0,void 0,function(){var a;return l(this,function(b){a=this._getStageIdHint();this._createMaterialsAndAddToStage(this._context.stage,a);return[2]})})};e.prototype.destroy=function(){c.prototype.destroy.call(this);
this._material&&(this._context.stage.remove(u.ModelContentType.MATERIAL,this._material.id),this._material=null)};e.prototype.perInstanceMaterialParameters=function(a){var b=this.materialParameters;b.screenOffset=a.screenOffset||[0,0];b.centerOffsetUnits=a.centerOffsetUnits||"world";return b};Object.defineProperty(e.prototype,"materialParameters",{get:function(){var a=this.symbol,b=a.callout,c=h.isSome(b.color)?d.toUnitRGBA(b.color):[0,0,0,0];c[3]*=this._getLayerOpacity();var e=g.pt2px(b.size||0),
f=null;if(a.verticalOffset)var f=a.verticalOffset,m=f.minWorldLength,k=f.maxWorldLength,f={screenLength:g.pt2px(f.screenLength),minWorldLength:m||0,maxWorldLength:null!=k?k:Infinity};b=h.isSome(b.border)&&h.isSome(b.border.color)?d.toUnitRGBA(b.border.color):null;m="object"===a.symbolLayers.getItemAt(0).type;return{color:c,size:e,verticalOffset:f,screenSizePerspective:this._context.screenSizePerspectiveEnabled?this._context.sharedResources.screenSizePerspectiveSettings:null,screenOffset:[0,0],centerOffsetUnits:"world",
borderColor:b,occlusionTest:!m,shaderPolygonOffset:m?0:void 0,depthHUDAlignStart:"label-3d"===a.type,slicePlaneEnabled:this._context.slicePlaneEnabled}},enumerable:!0,configurable:!0});e.prototype._createMaterialsAndAddToStage=function(a,b){this._material=new w(this.materialParameters,b+"_lineCallout_common");a.add(u.ModelContentType.MATERIAL,this._material)};e.prototype._defaultElevationInfoNoZ=function(){return D};e.prototype.createGraphics3DGraphic=function(a){var b=a.renderingInfo;a=a.graphic;
var d=this.getGraphicElevationContext(a,b.elevationOffset||0),c=b.symbol,e="on-the-ground"===this._elevationContext.mode&&!c.symbolLayers.some(function(a){return"object"===a.type||"text"===a.type});if("label-3d"!==c.type&&e)return null;c=m.computeCentroid(a.geometry);return h.isNone(c)?null:this._createAs3DShape(a,c,d,b,"graphic"+a.uid,a.uid)};e.prototype.layerOpacityChanged=function(){this._material.setParameterValues(this.materialParameters);return!0};e.prototype.layerElevationInfoChanged=function(a,
b,d){var c=this,e=this._elevationContext.mode;if(d!==e&&("on-the-ground"===d||"on-the-ground"===e))return!1;a.forEach(function(a){var d=b(a);d&&c.updateGraphicElevationContext(a.graphic,d)});return!0};e.prototype.slicePlaneEnabledChanged=function(a,b){this._material.setParameterValues({slicePlaneEnabled:this._context.slicePlaneEnabled});return!0};e.prototype.pixelRatioChanged=function(a,b){return!0};e.prototype.getGraphicElevationContext=function(a,b){void 0===b&&(b=0);a=c.prototype.getGraphicElevationContext.call(this,
a);a.addOffsetRenderUnits(b);return a};e.prototype.updateGraphicElevationContext=function(b,d){b=this.getGraphicElevationContext(b,d.metadata.elevationOffset);d.elevationContext.set(b);d.needsElevationUpdates=a.needsElevationUpdates2D(b.mode)};e.prototype.computeComplexity=function(){return{primitivesPerFeature:2,primitivesPerCoordinate:0,estimated:!1,memory:q.emptySymbolComplexity.memory}};e.prototype.createVertexData=function(a){var b,d=a.translation;a=a.centerOffset;if(!d&&!a)return A;d=d?{size:3,
data:[d[0],d[1],d[2]]}:A[z.POSITION];a=a?{size:4,data:[a[0],a[1],a[2],a[3]]}:A[z.AUXPOS1];return b={},b[z.POSITION]=d,b[z.NORMAL]=A[z.NORMAL],b[z.AUXPOS1]=a,b};e.prototype.getOrCreateMaterial=function(a,b){var d=this.perInstanceMaterialParameters(a),c=w.uniqueMaterialIdentifier(d);if(c===this._material.uniqueMaterialIdentifier)return{material:this._material,isUnique:!1};if(a.materialCollection){var e=a.materialCollection.getMaterial(c);e||(e=new w(d,b+"_lineCallout_shared"),a.materialCollection.addMaterial(c,
e));return{material:e,isUnique:!1}}e=new w(d,b+"_lineCallout_unique");return{material:e,isUnique:!0}};e.prototype._createAs3DShape=function(d,c,e,g,m,h){d=new r(this.createVertexData(g),B,r.DefaultOffsets,"point");d=[new t(d,m)];var k=this.getOrCreateMaterial(g,m);m=a.createStageObjectForPoint(this._context,c,d,[k.material],null,null,e,m,this._context.layer.uid,h,!0);if(null===m)return null;h=new b(this,m.object,d,k.isUnique?[k.material]:null,null,f.perObjectElevationAligner,e);h.metadata={elevationOffset:g.elevationOffset||
0};h.alignedTerrainElevation=m.terrainElevation;h.needsElevationUpdates=a.needsElevationUpdates2D(e.mode);a.extendPointGraphicElevationContext(h,c,this._context.elevationProvider);return h};return e}(e.Graphics3DSymbolLayer);c.Graphics3DLineCalloutSymbolLayer=p;var A=(v={},v[z.POSITION]={size:3,data:[0,0,0]},v[z.NORMAL]={size:3,data:[0,0,1]},v[z.AUXPOS1]={size:4,data:[0,0,0,1]},v);v=new Uint32Array([0]);var B=(y={},y[z.POSITION]=v,y[z.NORMAL]=v,y[z.AUXPOS1]=v,y),D={mode:"relative-to-ground",offset:0};
c.default=p})},"esri/views/3d/layers/graphics/ElevationAligners":function(){define("require exports ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/Point ./Graphics3DSymbolCommonCode ./graphicUtils ../../support/debugFlags ../../support/projectionUtils ../../webgl-engine/lib/Util".split(" "),function(p,c,n,l,k,d,h,g,f,b,a,e){Object.defineProperty(c,"__esModule",{value:!0});
var m=e.VertexAttrConstants,q=new h,u=d.vec3f64.create(),t=d.vec3f64.create(),r=d.vec3f64.create(),x=l.mat4f64.create(),w=d.vec3f64.create(),v={verticalDistanceToGround:0,terrainElevation:0};c.perVertexElevationAligner=function(a,d,e,f){a=a.stageObject;q.spatialReference=e.spatialReference;for(var h=a.getGeometryRecords(),k=h.length,l="absolute-height"!==d.mode,y=0,n=0;n<k;n++){var x=h[n].geometry,A=h[n].getShaderTransformation();t[0]=A[12];t[1]=A[13];t[2]=A[14];x.invalidateBoundingInfo();for(var A=
x.data.getVertexAttr(),w=A[m.POSITION],x=w.data,A=A.mapPos.data,w=w.size,z=x.length/w,p=0,B=0,D=!1,Q=0,J=0;J<z;J++){q.x=A[B++];q.y=A[B++];q.z=A[B++];r[0]=x[p];r[1]=x[p+1];r[2]=x[p+2];var P=g.computeElevation(e,q,d,f,l?v:null);l&&(Q+=v.terrainElevation);u[0]=x[p]+t[0];u[1]=x[p+1]+t[1];u[2]=x[p+2]+t[2];f.setAltitude(P,u);x[p]=u[0]-t[0];x[p+1]=u[1]-t[1];x[p+2]=u[2]-t[2];if(b.TESTS_DISABLE_UPDATE_THROTTLE_THRESHOLDS)D=!0;else if(P=c.updateThresholdInMeters/f.unitInMeters,Math.abs(r[0]-x[p])>=P||Math.abs(r[1]-
x[p+1])>=P||Math.abs(r[2]-x[p+2])>=P)D=!0;p+=w}y+=Q/z;D&&a.geometryVertexAttrsUpdated(n)}return y/k};c.perObjectElevationAligner=function(d,e,m,h,l){d=d.stageObject;var q=e.centerPointInElevationSR,r=0;l=0;if(d.metadata.usesVerticalDistanceToGround)r=g.computeElevation(m,q,e,h,v),f.updateVertexAttributeAuxpos1w(d,v.verticalDistanceToGround),l=v.terrainElevation;else{var t="absolute-height"!==e.mode,r=g.computeElevation(m,q,e,h,t?v:null);t&&(l=v.terrainElevation)}e=n.mat4.copy(y,d.objectTransformation);
m=k.vec3.set(w,e[12],e[13],e[14]);b.DISABLE_ELEVATION_ALIGNERS_ITERATIVE_UPDATES?(u[0]=q.x,u[1]=q.y,u[2]=r,a.computeLinearTransformation(q.spatialReference,u,e,h.spatialReference)&&(d.objectTransformation=e)):h.setAltitudeOfTransformation(r,e);h=c.updateThresholdInMeters/h.unitInMeters;if(Math.abs(e[12]-m[0])>=h||Math.abs(e[13]-m[1])>=h||Math.abs(e[14]-m[2])>=h)d.objectTransformation=e;return l};var y=l.mat4f64.create();c.perLodInstanceElevationAligner=function(d,e,f,m,h){var l=e.centerPointInElevationSR,
q=0;h=0;var r="absolute-height"!==e.mode,q=g.computeElevation(f,l,e,m,r?v:null);r&&(h=v.terrainElevation);e=d.graphics3DSymbolLayer.lodRenderer.instanceData;d=d.instanceIndex;e.getGlobalTransform(d,x);f=k.vec3.set(w,x[12],x[13],x[14]);b.DISABLE_ELEVATION_ALIGNERS_ITERATIVE_UPDATES?(u[0]=l.x,u[1]=l.y,u[2]=q,a.computeLinearTransformation(l.spatialReference,u,x,m.spatialReference)&&e.setGlobalTransform(d,x)):m.setAltitudeOfTransformation(q,x);m=c.updateThresholdInMeters/m.unitInMeters;(Math.abs(x[12]-
f[0])>=m||Math.abs(x[13]-f[1])>=m||Math.abs(x[14]-f[2])>=m)&&e.setGlobalTransform(d,x);return h};c.updateThresholdInMeters=.01;c.iterativeUpdatesEnabled=!0})},"esri/views/3d/layers/graphics/Graphics3DSymbolCommonCode":function(){define("require exports ../../../../core/compilerUtils ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/support/coordsUtils ../../../../geometry/support/triangulationUtils ../../../../layers/graphics/dehydratedFeatures ./graphicUtils ../../support/projectionUtils ../../webgl-engine/lib/Object3D".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e){function m(a,b,d,c,e){var f=b.z||0,g=d.featureExpressionInfoContext;switch(d.mode){case "on-the-ground":return d=a.getElevation(b,"ground")||0,e&&(e.verticalDistanceToGround=0,e.terrainElevation=d),d;case "relative-to-ground":return a=a.getElevation(b,"ground")||0,d=d.calculateOffsetRenderUnits(c),null==g&&(d+=f),e&&(e.verticalDistanceToGround=d,e.terrainElevation=a),d+a;case "relative-to-scene":return a=a.getElevation(b,"scene")||0,d=d.calculateOffsetRenderUnits(c),
e&&(e.verticalDistanceToGround=d,e.terrainElevation=a),d+a;case "absolute-height":return d=d.calculateOffsetRenderUnits(c),null==g&&(d+=f),e&&(a=a.getElevation(b,"ground")||0,e.verticalDistanceToGround=d-a,e.terrainElevation=a),d;default:n.neverReached(d.mode)}return 0}function q(a,b,d,c,e,f,g,m){var h=m.mode,k=0,l=0,q=0;g=m.calculateOffsetRenderUnits(g);m=m.featureExpressionInfoContext;A.spatialReference=a.spatialReference;d*=3;e*=3;for(var r=0;r<f;++r){A.x=b[d+0];A.y=b[d+1];A.z=b[d+2];switch(h){case "on-the-ground":l=
k=a.getElevation(A)||0;q+=k;break;case "relative-to-ground":k=a.getElevation(A)||0;l=k+g;null==m&&(l+=A.z);q+=k;break;case "relative-to-scene":k=a.getElevation(A,"scene")||0;l=k+g;q+=k;break;case "absolute-height":l=g,null==m&&(l+=A.z)}c[e+0]=b[d+0];c[e+1]=b[d+1];c[e+2]=l;d+=3;e+=3}return{terrainElevation:q/f}}function u(a,b){a=g.pathsToTriangulationInfo(a,b);return{vertexData:a.position,polygons:a.polygons,outlines:a.outlines}}function t(a,b,d,c,e){b*=3;c*=3;for(var f=0;f<e;++f)d[c++]=a[b++],d[c++]=
a[b++],d[c++]=a[b++]}function r(b,d,c,e,f,g,m){return a.bufferToBuffer(b,c,d,e,g,f,m)}function x(b,d,c){a.pointToVector(b,d,c)}function w(a,b){return!(a[0]>b[3]||a[0]<b[0]||a[1]>b[4]||a[1]<b[1])}function v(a,b){return!(b[0]>a[3]||b[3]<a[0]||b[1]>a[4]||b[4]<a[1])}Object.defineProperty(c,"__esModule",{value:!0});var y=d.vec3f64.create(),z=k.mat4f64.create(),A=f.makeDehydratedPoint(0,0,0,null);c.createStageObjectForPoint=function(d,c,f,g,h,k,q,r,t,u,n,v){var A=f?f.length:0,p=d.clippingExtent;x(c,y,d.elevationProvider.spatialReference);
if(p&&!w(y,p))return null;x(c,y,d.renderSpatialReference);p=d.localOriginFactory.getOrigin(y);r=new e({castShadow:!1,metadata:{layerUid:t,graphicUid:u,usesVerticalDistanceToGround:!!n},idHint:r});for(t=0;t<A;t++)r.addGeometry(f[t],g[t],h?h[t]:z,k,p,v);f=d.renderSpatialReference;g=d.elevationProvider;h=d.renderCoordsHelper;d=0;var M;r.metadata.usesVerticalDistanceToGround?(d=m(g,c,q,h,D),b.updateVertexAttributeAuxpos1w(r,D.verticalDistanceToGround),M=D.terrainElevation):(k="absolute-height"!==q.mode,
d=m(g,c,q,h,k?D:null),k&&(M=D.terrainElevation));q=l.mat4.copy(B,r.objectTransformation);y[0]=c.x;y[1]=c.y;y[2]=d;a.computeLinearTransformation(c.spatialReference,y,q,f)?r.objectTransformation=q:console.warn("Could not locate symbol object properly, it might be misplaced");return{object:r,terrainElevation:M}};c.extendPointGraphicElevationContext=function(a,b,d){a=a.elevationContext;d=d.spatialReference;x(b,y,d);a.centerPointInElevationSR=f.makeDehydratedPoint(y[0],y[1],b.hasZ?y[2]:0,d)};c.placePointOnGeometry=
function(a){switch(a.type){case "point":return a;case "polygon":case "extent":return b.computeCentroid(a);case "polyline":var d=a.paths[0];if(!d||0===d.length)break;d=h.getPointOnPath(d,h.getPathLength(d)/2);return f.makeDehydratedPoint(d[0],d[1],d[2],a.spatialReference);case "mesh":return a.extent.center}return null};c.computeElevation=m;c.applyElevation=q;var B=k.mat4f64.create();c.getSingleSizeDriver=function(a,b){void 0===b&&(b=0);return isFinite(a[b])?a[b]:null};c.copyPathData=u;c.copyVertices=
t;c.applyOrigin=function(a,b,d,c){var e=Math.floor(b+(d-1)/2);c[0]=a[3*e+0];c[1]=a[3*e+1];c[2]=a[3*e+2];b*=3;for(e=0;e<d;++e)a[b++]-=c[0],a[b++]-=c[1],a[b++]-=c[2]};c.setZ=function(a,b,d,c){b*=3;for(var e=0;e<d;++e)a[b+2]=c,b+=3};c.offsetZ=function(a,b,d,c){b*=3;for(var e=0;e<d;++e)a[b+2]+=c,b+=3};c.scaleZ=function(a,b,d,c){b*=3;for(var e=0;e<d;++e)a[b+2]*=c,b+=3};c.flatArrayToArrayOfArrays=function(a,b,d){var c=[];b*=3;for(var e=0;e<d;++e)c.push([a[b++],a[b++],a[b++]]);return c};c.reproject=r;c.reprojectPoint=
x;c.getGeometryVertexData3D=function(a,b,d,c,e,f,g){var m=e.spatialReference;a=u(a,b);b=a.vertexData;var h=b.length/3,k=new Float64Array(b.length),l=!0;d.equals(m)?t(b,0,k,0,b.length):l=r(b,0,d,k,0,m,h);d=q(e,k,0,b,0,h,f,g);m.equals(c)||r(b,0,m,b,0,c,h);return{geometryData:a,vertexData:b,eleVertexData:k,terrainElevation:d.terrainElevation,projectionSuccess:l}};c.getGeometryVertexDataDraped=function(b,d,c){b=u(b,!1);var e=b.vertexData,f=e.length/3,g=!0;d.equals(c)||(g=a.bufferToBuffer(e,d,0,e,c,0,
f));return{geometryData:b,vertexData:e,projectionSuccess:g}};c.computeBoundingBox=function(a,b,d,c){c[0]=Number.MAX_VALUE;c[1]=Number.MAX_VALUE;c[2]=Number.MAX_VALUE;c[3]=-Number.MAX_VALUE;c[4]=-Number.MAX_VALUE;c[5]=-Number.MAX_VALUE;b*=3;for(var e=0;e<d;++e){var f=a[b++],g=a[b++],m=a[b++];f<c[0]&&(c[0]=f);g<c[1]&&(c[1]=g);m<c[2]&&(c[2]=m);f>c[3]&&(c[3]=f);g>c[4]&&(c[4]=g);m>c[5]&&(c[5]=m)}return c};c.pointInBox2D=w;c.boxesIntersect2D=v;c.boundingBoxClipped=function(a,b){return b?!v(a,b):!1};c.needsElevationUpdates2D=
function(a){return"relative-to-ground"===a||"relative-to-scene"===a};c.needsElevationUpdates3D=function(a){return"absolute-height"!==a};var D={verticalDistanceToGround:0,terrainElevation:0}})},"esri/geometry/support/triangulationUtils":function(){define(["require","exports","../../core/libs/earcut/earcut","./coordsUtils","./meshUtils/deduplicate"],function(p,c,n,l,k){function d(d,b,a){if(1===d.length)return d[0];b=new Float64Array(b);a=new Uint32Array(a);for(var c=0,f=0,g=0,h=0;h<d.length;h++){for(var k=
d[h],l=0;l<k.position.length;l++)b[c++]=k.position[l];for(l=0;l<k.faces.length;l++)a[f++]=k.faces[l]+g;g=c/3}return{position:b,faces:a}}function h(d,b){for(var a=d.length,c=Array(a),f=Array(a),h=Array(a),k=0,t=0,r=0,n=0,w=0;w<a;++w)n+=d[w].length;for(var n=new Float64Array(3*n),v=0,y=a-1;0<=y;y--){var z=d[y],A=!l.isClockwise(z,!1,!1);if(A&&1!==a)c[k++]=z;else{for(var p=z.length,w=0;w<k;++w)p+=c[w].length;w={index:v,pathLengths:Array(k+1),count:p,holeIndices:Array(k)};w.pathLengths[0]=z.length;0<z.length&&
(h[r++]={index:v,count:z.length});v=A?g(z,z.length-1,-1,n,v,z.length,b):g(z,0,1,n,v,z.length,b);for(z=0;z<k;++z)A=c[z],w.holeIndices[z]=v,w.pathLengths[z+1]=A.length,0<A.length&&(h[r++]={index:v,count:A.length}),v=g(A,0,1,n,v,A.length,b);k=0;0<w.count&&(f[t++]=w)}}for(z=0;z<k;++z)A=c[z],0<A.length&&(h[r++]={index:v,count:A.length}),v=g(A,0,1,n,v,A.length,b);t<a&&(f.length=t);r<a&&(h.length=r);return{position:n,polygons:f,outlines:h}}function g(d,b,a,c,g,h,k){g*=3;for(var e=0;e<h;++e){var f=d[b];c[g++]=
f[0];c[g++]=f[1];c[g++]=k?f[2]:0;b+=a}return g/3}Object.defineProperty(c,"__esModule",{value:!0});c.triangulate=function(c){var b=h(c.rings,c.hasZ),a=[],e=0,f=0;c=function(d){var c=d.index,g=new Float64Array(b.position.buffer,3*c*b.position.BYTES_PER_ELEMENT,3*d.count);d=d.holeIndices.map(function(a){return a-c});d=new Uint32Array(n(g,d,3));a.push({position:g,faces:d});e+=g.length;f+=d.length};for(var g=0,l=b.polygons;g<l.length;g++)c(l[g]);c=d(a,e,f);g=k.default(c.position.buffer,6,c.faces);c.position=
new Float64Array(g.buffer);c.faces=g.indices;return c};c.pathsToTriangulationInfo=h})},"esri/core/libs/earcut/earcut":function(){define([],function(){function p(a,b,e){e=e||2;var g=b&&b.length,m=g?b[0]*e:a.length,k=c(a,0,m,e,!0),q=[];if(!k||k.next===k.prev)return q;var r,t,y,v;if(g){var x=e,g=[],w,z,p;v=0;for(w=b.length;v<w;v++)z=b[v]*x,p=v<w-1?b[v+1]*x:a.length,z=c(a,z,p,x,!1),z===z.next&&(z.steiner=!0),g.push(f(z));g.sort(d);for(v=0;v<g.length;v++){b=g[v];x=k;if(x=h(b,x))b=u(x,b),n(b,b.next);k=
n(k,k.next)}}if(a.length>80*e){r=y=a[0];t=g=a[1];for(x=e;x<m;x+=e)v=a[x],b=a[x+1],v<r&&(r=v),b<t&&(t=b),v>y&&(y=v),b>g&&(g=b);y=Math.max(y-r,g-t);y=0!==y?1/y:0}l(k,q,e,r,t,y);return q}function c(a,b,d,c,f){var g;if(f===0<w(a,b,d,c))for(f=b;f<d;f+=c)g=t(f,a[f],a[f+1],g);else for(f=d-c;f>=b;f-=c)g=t(f,a[f],a[f+1],g);g&&e(g,g.next)&&(r(g),g=g.next);return g}function n(b,d){if(!b)return b;d||(d=b);var c;do if(c=!1,b.steiner||!e(b,b.next)&&0!==a(b.prev,b,b.next))b=b.next;else{r(b);b=d=b.prev;if(b===b.next)break;
c=!0}while(c||b!==d);return d}function l(d,c,f,h,t,x,w){if(d){if(!w&&x){var y=d,v=y;do null===v.z&&(v.z=g(v.x,v.y,h,t,x)),v.prevZ=v.prev,v=v.nextZ=v.next;while(v!==y);v.prevZ.nextZ=null;v.prevZ=null;var y=v,A,z,p,B,D,C,S=1;do{v=y;p=y=null;for(B=0;v;){B++;z=v;for(A=D=0;A<S&&(D++,z=z.nextZ,z);A++);for(C=S;0<D||0<C&&z;)0!==D&&(0===C||!z||v.z<=z.z)?(A=v,v=v.nextZ,D--):(A=z,z=z.nextZ,C--),p?p.nextZ=A:y=A,A.prevZ=p,p=A;v=z}p.nextZ=null;S*=2}while(1<B)}for(y=d;d.prev!==d.next;){v=d.prev;z=d.next;if(x)p=
k(d,h,t,x);else a:if(p=d,B=p.prev,D=p,S=p.next,0<=a(B,D,S))p=!1;else{for(A=p.next.next;A!==p.prev;){if(b(B.x,B.y,D.x,D.y,S.x,S.y,A.x,A.y)&&0<=a(A.prev,A,A.next)){p=!1;break a}A=A.next}p=!0}if(p)c.push(v.i/f),c.push(d.i/f),c.push(z.i/f),r(d),y=d=z.next;else if(d=z,d===y){if(!w)l(n(d),c,f,h,t,x,1);else if(1===w){w=c;y=f;v=d;do z=v.prev,p=v.next.next,!e(z,p)&&m(z,v,v.next,p)&&q(z,p)&&q(p,z)&&(w.push(z.i/y),w.push(v.i/y),w.push(p.i/y),r(v),r(v.next),v=d=p),v=v.next;while(v!==d);d=v;l(d,c,f,h,t,x,2)}else if(2===
w)a:{w=d;do{for(y=w.next.next;y!==w.prev;){if(v=w.i!==y.i){v=w;z=y;p=void 0;if(p=v.next.i!==z.i&&v.prev.i!==z.i){p=void 0;b:{p=v;do{if(p.i!==v.i&&p.next.i!==v.i&&p.i!==z.i&&p.next.i!==z.i&&m(p,p.next,v,z)){p=!0;break b}p=p.next}while(p!==v);p=!1}p=!p}B=void 0;if(B=p&&q(v,z)&&q(z,v)){p=v;B=!1;D=(v.x+z.x)/2;z=(v.y+z.y)/2;do p.y>z!==p.next.y>z&&p.next.y!==p.y&&D<(p.next.x-p.x)*(z-p.y)/(p.next.y-p.y)+p.x&&(B=!B),p=p.next;while(p!==v)}v=B}if(v){d=u(w,y);w=n(w,w.next);d=n(d,d.next);l(w,c,f,h,t,x);l(d,c,
f,h,t,x);break a}y=y.next}w=w.next}while(w!==d)}break}}}}function k(d,c,e,f){var m=d.prev,h=d.next;if(0<=a(m,d,h))return!1;var k=m.x>d.x?m.x>h.x?m.x:h.x:d.x>h.x?d.x:h.x,l=m.y>d.y?m.y>h.y?m.y:h.y:d.y>h.y?d.y:h.y,q=g(m.x<d.x?m.x<h.x?m.x:h.x:d.x<h.x?d.x:h.x,m.y<d.y?m.y<h.y?m.y:h.y:d.y<h.y?d.y:h.y,c,e,f);c=g(k,l,c,e,f);e=d.prevZ;for(f=d.nextZ;e&&e.z>=q&&f&&f.z<=c;){if(e!==d.prev&&e!==d.next&&b(m.x,m.y,d.x,d.y,h.x,h.y,e.x,e.y)&&0<=a(e.prev,e,e.next))return!1;e=e.prevZ;if(f!==d.prev&&f!==d.next&&b(m.x,
m.y,d.x,d.y,h.x,h.y,f.x,f.y)&&0<=a(f.prev,f,f.next))return!1;f=f.nextZ}for(;e&&e.z>=q;){if(e!==d.prev&&e!==d.next&&b(m.x,m.y,d.x,d.y,h.x,h.y,e.x,e.y)&&0<=a(e.prev,e,e.next))return!1;e=e.prevZ}for(;f&&f.z<=c;){if(f!==d.prev&&f!==d.next&&b(m.x,m.y,d.x,d.y,h.x,h.y,f.x,f.y)&&0<=a(f.prev,f,f.next))return!1;f=f.nextZ}return!0}function d(a,b){return a.x-b.x}function h(a,d){var c=d,e=a.x,f=a.y,g=-Infinity,m;do{if(f<=c.y&&f>=c.next.y&&c.next.y!==c.y){var h=c.x+(f-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(h<=e&&
h>g){g=h;if(h===e){if(f===c.y)return c;if(f===c.next.y)return c.next}m=c.x<c.next.x?c:c.next}}c=c.next}while(c!==d);if(!m)return null;if(e===g)return m.prev;d=m;for(var h=m.x,k=m.y,l=Infinity,r,c=m.next;c!==d;)e>=c.x&&c.x>=h&&e!==c.x&&b(f<k?e:g,f,h,k,f<k?g:e,f,c.x,c.y)&&(r=Math.abs(f-c.y)/(e-c.x),(r<l||r===l&&c.x>m.x)&&q(c,a)&&(m=c,l=r)),c=c.next;return m}function g(a,b,d,c,e){a=32767*(a-d)*e;b=32767*(b-c)*e;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;b=(b|b<<8)&16711935;b=(b|b<<
4)&252645135;b=(b|b<<2)&858993459;return(a|a<<1)&1431655765|((b|b<<1)&1431655765)<<1}function f(a){var b=a,d=a;do{if(b.x<d.x||b.x===d.x&&b.y<d.y)d=b;b=b.next}while(b!==a);return d}function b(a,b,d,c,e,f,g,m){return 0<=(e-g)*(b-m)-(a-g)*(f-m)&&0<=(a-g)*(c-m)-(d-g)*(b-m)&&0<=(d-g)*(f-m)-(e-g)*(c-m)}function a(a,b,d){return(b.y-a.y)*(d.x-b.x)-(b.x-a.x)*(d.y-b.y)}function e(a,b){return a.x===b.x&&a.y===b.y}function m(b,d,c,f){return e(b,d)&&e(c,f)||e(b,f)&&e(c,d)?!0:0<a(b,d,c)!==0<a(b,d,f)&&0<a(c,f,b)!==
0<a(c,f,d)}function q(b,d){return 0>a(b.prev,b,b.next)?0<=a(b,d,b.next)&&0<=a(b,b.prev,d):0>a(b,d,b.prev)||0>a(b,b.next,d)}function u(a,b){var d=new x(a.i,a.x,a.y),c=new x(b.i,b.x,b.y),e=a.next,f=b.prev;a.next=b;b.prev=a;d.next=e;e.prev=d;c.next=d;d.prev=c;f.next=c;c.prev=f;return c}function t(a,b,d,c){a=new x(a,b,d);c?(a.next=c.next,a.prev=c,c.next.prev=a,c.next=a):(a.prev=a,a.next=a);return a}function r(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=
a.prevZ)}function x(a,b,d){this.i=a;this.x=b;this.y=d;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function w(a,b,d,c){for(var e=0,f=d-c;b<d;b+=c)e+=(a[f]-a[b])*(a[b+1]+a[f+1]),f=b;return e}p.deviation=function(a,b,d,c){var e=b&&b.length,f=Math.abs(w(a,0,e?b[0]*d:a.length,d));if(e)for(var e=0,g=b.length;e<g;e++)f-=Math.abs(w(a,b[e]*d,e<g-1?b[e+1]*d:a.length,d));for(e=b=0;e<c.length;e+=3){var g=c[e]*d,m=c[e+1]*d,h=c[e+2]*d;b+=Math.abs((a[g]-a[h])*(a[m+1]-a[g+1])-(a[g]-a[m])*
(a[h+1]-a[g+1]))}return 0===f&&0===b?0:Math.abs((b-f)/f)};p.flatten=function(a){for(var b=a[0][0].length,d={vertices:[],holes:[],dimensions:b},c=0,e=0;e<a.length;e++){for(var f=0;f<a[e].length;f++)for(var g=0;g<b;g++)d.vertices.push(a[e][f][g]);0<e&&(c+=a[e-1].length,d.holes.push(c))}return d};return p})},"esri/geometry/support/meshUtils/deduplicate":function(){define(["require","exports","../../../core/mathUtils"],function(p,c,n){function l(d,c,g,f){void 0===f&&(f=0);var b=d.byteLength/(4*c),a=new Uint32Array(d,
0,b*c);d=new Uint32Array(b);var e=Math.floor(1.1*b)+1;if(null==k||k.length<2*e)k=new Uint32Array(n.nextHighestPowerOfTwo(2*e));for(var m=0;m<2*e;m++)k[m]=0;for(var h=0,l=0!==f?Math.ceil(7.84*1.96/(f*f)*f*(1-f)):b,m=0;m<b;m++){if(m===l){var t=1-h/m;if(t+1.96*Math.sqrt(t*(1-t)/m)<f)return null;l*=2}for(var t=m*c,r,x=r=0;x<c;x++)r=a[t+x]+r|0,r=r+(r<<11)+(r>>>2)|0;r>>>=0;for(var x=r%e,w=h;0!==k[2*x+1];){if(k[2*x]===r){var v=k[2*x+1]-1,y=v*c;a:{for(var z=0;z<c;z++)if(a[t+z]!==a[y+z]){y=!1;break a}y=!0}if(y){w=
d[v];break}}x++;x>=e&&(x-=e)}w===h&&(k[2*x]=r,k[2*x+1]=m+1,h++);d[m]=w}if(0!==f&&1-h/b<f)return null;f=new Uint32Array(c*h);for(m=h=0;m<b;m++)if(d[m]===h){e=a;l=m*c;t=f;r=h*c;x=c;for(w=0;w<x;w++)t[r+w]=e[l+w];h++}if(g){c=new Uint32Array(g.length);for(m=0;m<c.length;m++)c[m]=d[g[m]];d=c}return{buffer:f.buffer,indices:d,uniqueCount:h}}Object.defineProperty(c,"__esModule",{value:!0});c.deduplicate=l;var k=null;c.default=l})},"esri/views/3d/layers/graphics/graphicUtils":function(){define("require exports ../../../../core/mathUtils ../../../../core/maybe ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec2f64 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4 ../../../../core/libs/gl-matrix-2/vec4f64 ../../../../geometry/support/aaBoundingBox ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/centroid ../../../../geometry/support/coordsUtils ../../../../layers/graphics/dehydratedFeatures ../../support/projectionUtils".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t){function r(a){var b=a.paths[0];if(!b||0===b.length)return null;b=q.getPointOnPath(b,q.getPathLength(b)/2);return u.makeDehydratedPoint(b[0],b[1],b[2],a.spatialReference)}function x(a,b,d){if(!b||!a)return a;d=d?a:u.clonePoint(a);return t.pointToPoint(a,d,b)?d:null}function w(a){if(Array.isArray(a)){for(var b=0;b<a.length;b++)if(!w(a[b]))return!1;return!0}return null==a||0<=a}Object.defineProperty(c,"__esModule",{value:!0});c.computeCentroid=function(a,b){if("point"===
a.type)return x(a,b,!1);if(u.isHydratedGeometry(a))switch(a.type){case "extent":return x(a.center,b,!1);case "polygon":return x(a.centroid,b,!1);case "polyline":return x(r(a),b,!0);case "mesh":return x(a.extent.center,b,!1)}else switch(a.type){case "extent":var d=n.isFinite(a.zmin);a=u.makeDehydratedPoint(.5*(a.xmax+a.xmin),.5*(a.ymax+a.ymin),d?.5*(a.zmax+a.zmin):void 0,a.spatialReference);return x(a,b,!0);case "polygon":return(d=a.rings[0])&&0!==d.length?(d=m.ringsCentroid(a.rings,a.hasZ),a=u.makeDehydratedPoint(d[0],
d[1],d[2],a.spatialReference)):a=null,x(a,b,!0);case "polyline":return x(r(a),b,!0)}};c.enlargeExtent=function(a,b,d){if(a){b||(b=e.create());var c=.5*a.width*(d-1);d=.5*a.height*(d-1);a.width<1E-7*a.height?c+=d/20:a.height<1E-7*a.width&&(d+=c/20);f.vec4.set(b,a.xmin-c,a.ymin-d,a.xmax+c,a.ymax+d);return b}return null};c.updateVertexAttributeAuxpos1w=function(a,b){for(var d=0;d<a.geometries.length;++d){var c=a.geometries[d].data.vertexAttributes.auxpos1;c&&c.data[3]!==b&&(c.data[3]=b,a.geometryVertexAttrsUpdated(d))}};
c.mixinColorAndOpacity=function(a,d){var c=b.vec4f64.clone(b.vec4f64.ONES);l.isSome(a)&&(c[0]=a[0],c[1]=a[1],c[2]=a[2]);l.isSome(d)?c[3]=d:l.isSome(a)&&3<a.length&&(c[3]=a[3]);return c};c.overrideColor=function(a,b,d,c,e,f){void 0===f&&(f=[0,0,0,0]);for(var g=0;3>g;++g)f[g]=a&&null!=a[g]?a[g]:d&&null!=d[g]?d[g]:e[g];f[3]=null!=b?b:null!=c?c:e[3];return f};c.computeObjectScale=function(a,b,d,c){void 0===a&&(a=g.vec3f64.ONES);void 0===c&&(c=1);var e=Array(3);if(null==b||null==d)e[0]=1,e[1]=1,e[2]=1;
else{for(var f=void 0,m=0,h=2;0<=h;h--){var k=a[h],l=void 0,q=null!=k,r=0===h&&!f&&!q,t=d[h];"symbolValue"===k||r?l=0!==t?b[h]/t:1:q&&"proportional"!==k&&isFinite(k)&&(l=0!==t?k/t:1);null!=l&&(f=e[h]=l,m=Math.max(m,Math.abs(l)))}for(h=2;0<=h;h--)null==e[h]?e[h]=f:0===e[h]&&(e[h]=.001*m)}for(h=2;0<=h;h--)e[h]/=c;return g.vec3f64.fromArray(e)};c.computeSizeWithResourceSize=function(a,b){var d=b.width,c=b.depth,e=b.height;b=b.isPrimitive?10:1;if(null==d&&null==e&&null==c)return[b*a[0],b*a[1],b*a[2]];
for(var d=g.vec3f64.fromValues(d,c,e),f,c=0;3>c;c++)if(e=d[c],null!=e){f=e/a[c];break}for(c=0;3>c;c++)null==d[c]&&(d[c]=a[c]*f);return d};c.validateSymbolLayerSize=function(a){null!=a.isPrimitive&&(a=[a.width,a.depth,a.height]);return w(a)?null:"Symbol sizes may not be negative values"};c.isValidSize=w;c.computeObjectRotation=function(a,b,c,e){void 0===e&&(e=d.mat4f64.create());a=a||0;b=b||0;c=c||0;0!==a&&k.mat4.rotateZ(e,e,-a/180*Math.PI);0!==b&&k.mat4.rotateX(e,e,b/180*Math.PI);0!==c&&k.mat4.rotateY(e,
e,c/180*Math.PI);return e};c.demResolutionForBoundingBox=function(b,d){return null!=d.minDemResolution?d.minDemResolution:a.isPoint(b)?d.minDemResolutionForPoints:.01*a.maximumDimension(b)};c.namedAnchorToHUDMaterialAnchorPos={"bottom-left":h.vec2f64.fromValues(0,0),bottom:h.vec2f64.fromValues(.5,0),"bottom-right":h.vec2f64.fromValues(1,0),left:h.vec2f64.fromValues(0,.5),center:h.vec2f64.fromValues(.5,.5),right:h.vec2f64.fromValues(1,.5),"top-left":h.vec2f64.fromValues(0,1),top:h.vec2f64.fromValues(.5,
1),"top-right":h.vec2f64.fromValues(1,1)}})},"esri/views/3d/layers/graphics/Graphics3DObject3DGraphicLayer":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/support/aaBoundingBox ./featureExpressionInfoUtils ./Graphics3DGraphicElevationContext ./graphicUtils ../../webgl-engine/Stage".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e){p=function(){function c(a,d,e,f,g,m,h,k){this.type="object3d";this._addedToStage=!1;this.alignedTerrainElevation=0;this.needsElevationUpdates=!1;this.graphics3DSymbolLayer=a;this.uniqueMaterials=f;this.uniqueGeometries=e;this.uniqueTextures=g;this.stageObject=d;this.elevationAligner=m;this.elevationContext=new b(h);this.stageLayer=this.stage=null;this._visible=!1;this.visibilityMode=null!=k?k:c.VisibilityModes.HIDE_FACERANGE}c.prototype.initialize=function(a,b){this.stageLayer=
a;this.stage=b;if(this.uniqueMaterials)for(a=0;a<this.uniqueMaterials.length;a++)b.add(e.ModelContentType.MATERIAL,this.uniqueMaterials[a]);if(this.uniqueGeometries)for(a=0;a<this.uniqueGeometries.length;a++)b.add(e.ModelContentType.GEOMETRY,this.uniqueGeometries[a]);if(this.uniqueTextures)for(a=0;a<this.uniqueTextures.length;a++)b.add(e.ModelContentType.TEXTURE,this.uniqueTextures[a]);b.add(e.ModelContentType.OBJECT,this.stageObject)};c.prototype.setVisibility=function(a){if(null!=this.stage)return this._visible!==
a?((this._visible=a)?this._addedToStage?this.stageObject.unhideAllComponents():(this.stageLayer.addObject(this.stageObject),this._addedToStage=!0):this.visibilityMode===c.VisibilityModes.HIDE_FACERANGE?this.stageObject.hideAllComponents():(this.stageLayer.removeObject(this.stageObject),this._addedToStage=!1),a=this.stage.renderView.ensureEdgeView(),a.hasObject(this.stageObject)&&a.updateObjectVisibility(this.stageObject,this._visible),!0):!1};Object.defineProperty(c.prototype,"visible",{get:function(){return this._visible},
enumerable:!0,configurable:!0});c.prototype.destroy=function(){var a=this.stage;if(this.stageLayer){if(this.uniqueMaterials)for(var b=0;b<this.uniqueMaterials.length;b++)a.remove(e.ModelContentType.MATERIAL,this.uniqueMaterials[b].id);if(this.uniqueGeometries)for(b=0;b<this.uniqueGeometries.length;b++)a.remove(e.ModelContentType.GEOMETRY,this.uniqueGeometries[b].id);if(this.uniqueTextures)for(b=0;b<this.uniqueTextures.length;b++)a.remove(e.ModelContentType.TEXTURE,this.uniqueTextures[b].id)}a.remove(e.ModelContentType.OBJECT,
this.stageObject.id);this._addedToStage&&(this.stageLayer.removeObject(this.stageObject),this._addedToStage=!1);a=this.stage.renderView.ensureEdgeView();a.hasObject(this.stageObject)&&a.removeObject(this.stageObject);this._visible=!1;this.stage=this.stageLayer=null};c.prototype.alignWithElevation=function(a,b,d){this.elevationAligner&&(f.setContextFeature(this.elevationContext.featureExpressionInfoContext,d),a=this.elevationAligner(this,this.elevationContext,a,b),null!=a&&(this.alignedTerrainElevation=
a))};c.prototype.getBSRadius=function(){return this.stageObject.getBSRadius()};c.prototype.getCenterObjectSpace=function(a){void 0===a&&(a=h.vec3f64.create());return d.vec3.copy(a,this.stageObject.getCenter(!0))};c.prototype.getBoundingBoxObjectSpace=function(a){void 0===a&&(a=g.create());var b=this.stageObject;a||(a=g.create());g.setMin(a,b.getBBMin(!0));g.setMax(a,b.getBBMax(!0));return a};c.prototype.getProjectedBoundingBox=function(b,c,e,f,h){return k(this,void 0,void 0,function(){var k,r,n,y,
x,v,w,z,p,M;return l(this,function(l){switch(l.label){case 0:k=this.getBoundingBoxObjectSpace(h);r=t;n=g.isPoint(k)?1:r.length;for(y=0;y<n;y++)x=r[y],q[0]=k[x[0]],q[1]=k[x[1]],q[2]=k[x[2]],d.vec3.transformMat4(q,q,this.stageObject.objectTransformation),m[3*y+0]=q[0],m[3*y+1]=q[1],m[3*y+2]=q[2];if(!b(m,0,n))return[2,null];g.empty(k);v=null;this.calculateRelativeScreenBounds&&(v=this.calculateRelativeScreenBounds());for(y=0;y<3*n;y+=3){for(w=0;3>w;w++)k[w]=Math.min(k[w],m[y+w]),k[w+3]=Math.max(k[w+
3],m[y+w]);v&&e.push({location:m.slice(y,y+3),screenSpaceBoundingRect:v})}if(!c||!c.service||"absolute-height"===this.elevationContext.mode)return[3,5];g.center(k,u);z="relative-to-scene"===this.elevationContext.mode?"scene":"ground";p=void 0;if(!c.useViewElevation)return[3,1];p=c.service.getElevation(u[0],u[1],z);return[3,4];case 1:return l.trys.push([1,3,,4]),M=a.demResolutionForBoundingBox(k,c),[4,c.service.queryElevation(u[0],u[1],f,M,z)];case 2:return p=l.sent(),[3,4];case 3:return l.sent(),
p=null,[3,4];case 4:g.offset(k,0,0,-this.alignedTerrainElevation+p),l.label=5;case 5:return[2,k]}})})};c.prototype.addHighlight=function(a,b){b=this.stageObject.highlightAllComponents(b);a.addObject(this.stageObject,b)};c.prototype.removeHighlight=function(a){a.removeObject(this.stageObject)};return c}();(function(a){a=a.VisibilityModes||(a.VisibilityModes={});a[a.REMOVE_OBJECT=0]="REMOVE_OBJECT";a[a.HIDE_FACERANGE=1]="HIDE_FACERANGE"})(p||(p={}));var m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0],q=h.vec3f64.create(),u=h.vec3f64.create(),t=[[0,1,2],[3,1,2],[0,4,2],[3,4,2],[0,1,5],[3,1,5],[0,4,5],[3,4,5]];return p})},"esri/views/3d/layers/graphics/featureExpressionInfoUtils":function(){define(["require","exports","../../../../layers/graphics/dehydratedFeatures","../../../../support/arcadeUtils"],function(p,c,n,l){Object.defineProperty(c,"__esModule",{value:!0});c.createContext=function(c,d,h){var g=null;c=c&&c.expression;"string"===typeof c&&(g="0"===c?0:null,null!=g?g={cachedResult:g}:
(g=l.createSyntaxTree(c),l.dependsOnView(g)?(null!=h&&h.error("Expressions containing '$view' are not supported on ElevationInfo"),g={cachedResult:0}):g={arcade:{func:l.createFunction(g),context:l.createExecContext(null,{sr:d})}}));return g};c.createFeature=function(c,d){return l.createFeature(c.attributes,c.geometry,d)};c.setContextFeature=function(c,d){null!=c&&null==c.cachedResult&&(d._geometry&&(d._geometry=n.hydrateGeometry(d._geometry)),l.updateExecContext(c.arcade.context,d))};c.execute=function(c){if(null!=
c){if(null!=c.cachedResult)return c.cachedResult;var d=c.arcade,d=l.executeFunction(d.func,d.context);"number"!==typeof d&&(d=c.cachedResult=0);return d}return 0};c.extractExpressionInfo=function(c,d){void 0===d&&(d=!1);var h=(c=c&&c.featureExpressionInfo)&&c.expression;d||"0"===h||(c=null);return c};c.zeroContext={cachedResult:0}})},"esri/support/arcadeUtils":function(){define("require exports ../arcade/arcade ../arcade/Dictionary ../arcade/Feature ../core/lang ../core/promiseUtils ../renderers/visualVariables/support/sizeVariableUtils".split(" "),
function(p,c,n,l,k,d,h,g){function f(a){var b;try{b=a?n.parseScript(a):null}catch(u){b=null}return b}function b(a){a=f(a);return!!a&&n.scriptUsesGeometryEngine(a)}Object.defineProperty(c,"__esModule",{value:!0});c.arcade=n;c.Dictionary=l;c.arcadeFeature=k;var a=/^\$feature\./i,e={vars:{$feature:"any",$view:"any"},spatialReference:null};c.createSyntaxTree=f;c.createFunction=function(a,b){b=b||d.clone(e);a="string"===typeof a?f(a):a;if(!a)return null;var c;try{c=a?n.compileScript(a,b):null}catch(t){c=
null}return c};c.createExecContext=function(a,b){return{vars:{$feature:null==a?new k:k.createFromGraphic(a),$view:b&&b.view},spatialReference:b&&b.sr}};c.createFeature=function(a,b,d){return k.createFromGraphicLikeObject(b,a,d)};c.updateExecContext=function(a,b){a.vars.$feature=b};c.evalSyntaxTree=function(a,b){var d;try{d=n.executeScript(a,b)}catch(t){d=null}return d};c.executeFunction=function(a,b){var d;try{d=a?a(b):null}catch(t){d=null}return d};c.executeAsyncFunction=function(a,b){try{return a?
a(b):h.resolve(null)}catch(u){return h.resolve(null)}};c.extractFieldNames=function(b){if(!b)return[];b="string"===typeof b?f(b):b;if(!b)return[];var d=[];n.extractFieldLiterals(b).forEach(function(b){a.test(b)&&(b=b.replace(a,""),d.push(b))});d.sort();return d.filter(function(a,b){return 0===b||d[b-1]!==a})};c.dependsOnView=function(a){return n.referencesMember(a,"$view")};c.hasVariable=function(a,b){return a?n.referencesMember(a,b):!1};c.getViewInfo=function(a){if(a&&(null!=a.spatialReference||
null!=a.scale&&null!=a.viewingMode))return{view:a.viewingMode&&null!=a.scale?new l({viewingMode:a.viewingMode,scale:a.scale}):null,sr:a.spatialReference}};c.convertServiceUrlToWorkspace=function(a,b){var d=n.featureSetUtils();return d?d.createFeatureSetCollectionFromService(a,b):null};c.convertFeatureLayerToFeatureSet=function(a,b){if(null===a)return null;var d=n.featureSetUtils();return d?d.constructFeatureSet(a,b):null};c.convertMapToFeatureSetCollection=function(a){if(null===a||null===a.map)return null;
var b=n.featureSetUtils();return b?b.createFeatureSetCollectionFromMap(a.map,a.spatialReference):null};c.loadScriptDependencies=function(a,b,d){void 0===d&&(d=[]);return n.loadScriptDependencies(a,b,d)};c.enableGeometryOperations=function(){return n.enableGeometrySupport()};c.enableFeatureSetOperations=function(){return n.enableFeatureSetSupport()};c.applyTextFormattingHTML=function(a){var b=/(\n)/gi;return"string"===typeof a?a.replace(b,'\x3cbr class\x3d"esri-text-new-line" /\x3e'):a};c.hasGeometryOperations=
function(a){if(!a)return!1;if("string"===typeof a)return b(a);if("simple"===a.type||"class-breaks"===a.type||"unique-value"===a.type||"dot-density"===a.type||"dictionary"===a.type){if("dot-density"===a.type){var d=a.attributes.some(function(a){return b(a.valueExpression)});if(d)return d}d=a.visualVariables;d=!!d&&d.some(function(a){var d=b(a.valueExpression);"size"===a.type&&(g.isSizeVariable(a.minSize)&&(d=d||b(a.minSize.valueExpression)),g.isSizeVariable(a.maxSize)&&(d=d||b(a.maxSize.valueExpression)));
return d});return"valueExpression"in a&&b(a.valueExpression)?!0:d}return"esri.layers.support.LabelClass"===a.declaredClass?(a=a.labelExpressionInfo&&a.labelExpressionInfo.expression,!(!a||!b(a))||!1):"esri.PopupTemplate"===a.declaredClass?!!a.expressionInfos&&a.expressionInfos.some(function(a){return b(a.expression)}):!1}})},"esri/arcade/arcade":function(){define("require exports ./arcadeCompiler ./arcadeRuntime ./parser ./treeAnalysis ../core/has ../core/promiseUtils".split(" "),function(p,c,n,l,
k,d,h,g){function f(a,b){if(null===A)throw Error("Async Arcade must be enabled for this script");return h("csp-restrictions")||!1===v?function(b){return A.executeScript(a,b)}:n.compileScript(a,b,!0)}function b(a,b){void 0===b&&(b=[]);return k.parseScript(a,b)}function a(a,b){if(!0===b.useAsync||!0===a.isAsync){if(null===A)throw Error("Async Arcade must be enabled for this script");return A.executeScript(a,b)}return l.executeScript(a,b)}function e(a,b){return l.referencesMember(a,b)}function m(a,b){void 0===
b&&(b=[]);void 0===a.usesGeometry&&d.findScriptDependencies(a,b);return!0===a.usesGeometry}function q(){return D?D:D=g.create(function(a,b){p(["../geometry/geometryEngine","./functions/geomsync"],function(b,d){z=!0;d.setGeometryEngine(b);a(!0)},function(a){b(a)})})}function u(){return null!==C?C:C=n.enableAsyncSupport().then(function(){return g.create(function(a,b){p(["./arcadeAsyncRuntime"],function(d){try{A=d;d=0;for(var c=B;d<c.length;d++){var e=c[d];A.extend(e);n.extend(e,"async")}B=null;a(!0)}catch(N){b(N)}},
b)})})}function t(){return A?!0:!1}function r(){return E?E:E=u().then(function(){return g.create(function(a,b){p(["./featureSetUtils","./functions/featuresetbase","./functions/featuresetgeom","./functions/featuresetstats","./functions/featuresetstring"],function(d,c,e,f,g){try{H=d,A.extend([c,e,f,g]),n.extend([c,e,f,g],"async"),y=!0,a(!0)}catch(O){b(O)}},b)})})}function x(a,b){void 0===b&&(b=[]);void 0===a.usesFeatureSet&&d.findScriptDependencies(a,b);return!0===a.usesFeatureSet}function w(a,b){if(b)for(var d=
0;d<b.length;d++)if(e(a,b[d]))return!0;return!1}Object.defineProperty(c,"__esModule",{value:!0});var v=function(){if(h("csp-restrictions"))return!1;try{return(new Function("function* test() {}; return true"))()}catch(G){return!1}}(),y=!1,z=!1,A=null,B=[];c.compileScript=function(a,b){return!0===b.useAsync||!0===a.isAsync?f(a,b):h("csp-restrictions")?function(b){return l.executeScript(a,b)}:n.compileScript(a,b)};c.extend=function(a){l.extend(a);n.extend(a,"sync");null===A?B.push(a):(n.extend(a,"async"),
A.extend(a))};c.parseScript=b;c.validateScript=function(a,b,d){void 0===d&&(d="");return k.validateScript(a,b,d)};c.scriptCheck=function(a,b,d,c){void 0===c&&(c="");return k.scriptCheck(a,b,d,c)};c.parseAndExecuteScript=function(b,d,c){void 0===c&&(c=[]);b=k.parseScript(b,c);return a(b,d)};c.executeScript=a;c.referencesMember=e;c.referencesFunction=function(a,b){return l.referencesFunction(a,b)};c.extractFieldLiterals=function(a,b){void 0===b&&(b=!1);return k.extractFieldLiterals(a,b)};c.scriptUsesGeometryEngine=
m;var D=null;c.enableGeometrySupport=q;var C=null;c.enableAsyncSupport=u;c.isFeatureSetSupportEnabled=function(){return y};c.isAsyncEnabled=t;c.isGeometryEnabled=function(){return z};var E=null;c.enableFeatureSetSupport=r;c.scriptUsesFeatureSet=x;c.scriptIsAsync=function(a,b){void 0===b&&(b=[]);void 0===a.isAsync&&d.findScriptDependencies(a,b);return!0===a.isAsync};c.loadScriptDependencies=function(a,d,c,e){void 0===c&&(c=[]);void 0===e&&(e=!1);return g.create(function(f,h){var k="string"===typeof a?
b(a):a,l=[];k&&(!1===z&&(m(k)||e)&&l.push(q()),!1===t()&&(!0===k.isAsync||d)&&l.push(u()),!1===y&&(x(k)||w(k,c))&&l.push(r()));l?g.all(l).then(function(){f(!0)},h):f(!0)})};c.scriptTouchesGeometry=function(a){if(m(a))return!0;a=d.findFunctionCalls(a,!0);return-1<a.indexOf("geometry")||-1<a.indexOf("feature")?!0:!1};var H=null;c.featureSetUtils=function(){return H}})},"esri/arcade/arcadeCompiler":function(){define("require exports ./Attachment ./Dictionary ./Feature ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../core/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/SpatialReference".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z,A){function B(a,b,d){try{return d(a,null,b)}catch(pa){throw pa;}}function D(a){return a instanceof Error?t.reject(a):t.reject(Error(a))}function C(a,b){try{switch(b.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return K(a,b);case "VariableDeclaration":for(var d=[],c=0;c<b.declarations.length;c++)d.push(C(a,b.declarations[c]));return d.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":return I(a,
b);case "FunctionDeclaration":var e=b.id.name.toLowerCase(),g={isAsync:a.isAsync,spatialReference:a.spatialReference,console:a.console,lrucache:a.lrucache,services:a.services,symbols:a.symbols,mangleMap:a.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:a.depthCounter+1,globalScope:a.globalScope};if(64<g.depthCounter)throw Error("Exceeded maximum function depth");for(var d="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n",
m=0;m<b.params.length;m++){var h=b.params[m].name.toLowerCase(),k=P(h,a);g.localScope._SymbolsMap[h]=k;g.mangleMap[h]=k;d+="lscope['"+k+"']\x3darguments["+m.toString()+"];\n"}!0===a.isAsync?(d=d+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(I(g,b.body)+"\n return lastStatement; "),d+="});  }, runtimeCtx))\n lastStatement \x3d lc.voidOperation; \n"):(d+=I(g,b.body)+"\n return lastStatement; }, runtimeCtx))",d+="\n lastStatement \x3d lc.voidOperation; \n");void 0!==a.globalScope[e]?
c="gscope['"+e+"']\x3d"+d:void 0!==a.globalScope._SymbolsMap[e]?c="gscope['"+a.globalScope._SymbolsMap[e]+"']\x3d"+d:(k=P(e,a),a.globalScope._SymbolsMap[e]=k,a.mangleMap[e]=k,c="gscope['"+k+"']\x3d"+d);return c;case "ReturnStatement":var l;l=null===b.argument?"return lc.voidOperation":"return "+C(a,b.argument)+"";return l;case "IfStatement":if("AssignmentExpression"===b.test.type||"UpdateExpression"===b.test.type)throw Error(f.nodeErrorMessage(b.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
var q=C(a,b.test),r=L(a),t="var "+r+" \x3d "+q+";\n if ("+r+" \x3d\x3d\x3d true) {\n"+G(a,b.consequent)+"\n }\n",t=null!==b.alternate?t+("else if ("+r+"\x3d\x3d\x3dfalse)   { \n"+G(a,b.alternate)+"}\n"):t+("else if ("+r+"\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n");return t+="else { lang.error({type: '"+b.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";case "ExpressionStatement":var u;u="AssignmentExpression"===b.expression.type?"lastStatement \x3d lc.voidOperation; "+
C(a,b.expression)+"; \n ":"lastStatement \x3d "+C(a,b.expression)+"; ";return u;case "AssignmentExpression":return H(a,b);case "UpdateExpression":return E(a,b);case "BreakStatement":return"break";case "ContinueStatement":return"continue";case "ForStatement":d="lastStatement \x3d lc.voidOperation; \n";null!==b.init&&(d+=C(a,b.init)+"; ");var n=L(a),y=L(a),d=d+("var "+n+" \x3d true; ")+"\n do { ";null!==b.update&&(d+=" if ("+n+"\x3d\x3d\x3dfalse) {\n "+C(a,b.update)+"  \n}\n "+n+"\x3dfalse; \n");null!==
b.test&&(d+="var "+y+" \x3d "+C(a,b.test)+"; ",d+="if ("+y+"\x3d\x3d\x3dfalse) { break; } else if ("+y+"!\x3d\x3dtrue) { lang.error({type: '"+b.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n");d+=C(a,b.body);null!==b.update&&(d+="\n "+C(a,b.update));return d+("\n"+n+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");case "ForInStatement":var x=L(a),v=L(a),w=L(a),A="var "+x+" \x3d "+C(a,b.right)+";\n";"VariableDeclaration"===b.left.type&&(A+=C(a,b.left));var z=
"VariableDeclaration"===b.left.type?b.left.declarations[0].id.name:b.left.name,z=z.toLowerCase(),d="";null!==a.localScope&&(void 0!==a.localScope[z]?d="lscope['"+z+"']":void 0!==a.localScope._SymbolsMap[z]&&(d="lscope['"+a.localScope._SymbolsMap[z]+"']"));""===d&&(void 0!==a.globalScope[z]?d="gscope['"+z+"']":void 0!==a.globalScope._SymbolsMap[z]&&(d="gscope['"+a.globalScope._SymbolsMap[z]+"']"));A=A+("if ("+x+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n ")+("else if (lc.isArray("+
x+") || lc.isString("+x+")) {")+("var "+v+"\x3d"+x+".length; \n")+("for(var "+w+"\x3d0; "+w+"\x3c"+v+"; "+w+"++) {\n");A+=d+"\x3d"+w+";\n";A+=C(a,b.body);A+="\n}\n";A+=" lastStatement \x3d lc.voidOperation; \n";A+=" \n}\n";A+="else if (lc.isImmutableArray("+x+")) {";A=A+("var "+v+"\x3d"+x+".length(); \n")+("for(var "+w+"\x3d0; "+w+"\x3c"+v+"; "+w+"++) {\n");A+=d+"\x3d"+w+";\n";A+=C(a,b.body);A+="\n}\n";A+=" lastStatement \x3d lc.voidOperation; \n";A+=" \n}\n";A+="else if (( "+x+" instanceof lang.Dictionary) || ( "+
x+" instanceof lang.Feature)) {";A=A+("var "+v+"\x3d"+x+".keys(); \n")+("for(var "+w+"\x3d0; "+w+"\x3c"+v+".length; "+w+"++) {\n");A+=d+"\x3d"+v+"["+w+"];\n";A+=C(a,b.body);A+="\n}\n";A+=" lastStatement \x3d lc.voidOperation; \n";A+=" \n}\n";a.isAsync&&(A+="else if (lc.isFeatureSet("+x+")) {",A=A+("var "+v+"\x3d"+x+".iterator(runtimeCtx.abortSignal); \n")+("for(var "+w+"\x3dlang. graphicToFeature( yield "+v+".next(),"+x+"); "+w+"!\x3dnull; "+w+"\x3dlang. graphicToFeature( yield "+v+".next(),"+x+")) {\n")+
(d+"\x3d"+w+";\n"),A+=C(a,b.body),A+="\n}\n",A+=" lastStatement \x3d lc.voidOperation; \n",A+=" \n}\n");return A+"else { lastStatement \x3d lc.voidOperation; } \n";case "Identifier":return T(a,b);case "MemberExpression":var p;try{d=void 0,d=!0===b.computed?C(a,b.property):"'"+b.property.name+"'",p="lang.member("+C(a,b.object)+","+d+")"}catch(ta){throw ta;}return p;case "Literal":return null===b.value||void 0===b.value?"null":JSON.stringify(b.value);case "ThisExpression":throw Error(f.nodeErrorMessage(b,
"RUNTIME","NOTSUPPORTED"));case "CallExpression":try{if("Identifier"!==b.callee.type)throw Error(f.nodeErrorMessage(b,"RUNTIME","ONLYNODESSUPPORTED"));var B=b.callee.name.toLowerCase(),c="";null!==a.localScope&&(void 0!==a.localScope[B]?c="lscope['"+B+"']":void 0!==a.localScope._SymbolsMap[B]&&(c="lscope['"+a.localScope._SymbolsMap[B]+"']"));""===c&&(void 0!==a.globalScope[B]?c="gscope['"+B+"']":void 0!==a.globalScope._SymbolsMap[B]&&(c="gscope['"+a.globalScope._SymbolsMap[B]+"']"));if(""!==c){e=
"[";for(g=0;g<b.arguments.length;g++)0<g&&(e+=", "),e+=C(a,b.arguments[g]);e+="]";d=a.isAsync?"(yield lang.callfunc("+c+","+e+",runtimeCtx) )":"lang.callfunc("+c+","+e+",runtimeCtx)"}else throw Error(f.nodeErrorMessage(b,"RUNTIME","NOTFOUND"));}catch(ta){throw ta;}return d;case "UnaryExpression":var M;try{M="lang.unary("+C(a,b.argument)+",'"+b.operator+"')"}catch(ta){throw ta;}return M;case "BinaryExpression":var D;try{D="lang.binary("+C(a,b.left)+","+C(a,b.right)+",'"+b.operator+"')"}catch(ta){throw ta;
}return D;case "LogicalExpression":var ja;try{if("AssignmentExpression"===b.left.type||"UpdateExpression"===b.left.type)throw Error(f.nodeErrorMessage(b.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===b.right.type||"UpdateExpression"===b.right.type)throw Error(f.nodeErrorMessage(b.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("\x26\x26"===b.operator||"||"===b.operator)ja="(lang.logicalCheck("+C(a,b.left)+") "+b.operator+" lang.logicalCheck("+C(a,b.right)+
"))";else throw Error(f.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));}catch(ta){throw ta;}return ja;case "ConditionalExpression":throw Error(f.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{d=[];for(c=0;c<b.elements.length;c++)"Literal"===b.elements[c].type?d.push(C(a,b.elements[c])):d.push("lang.aCheck("+C(a,b.elements[c])+",'ArrayExpression')");m="["+d.join(",")+"]"}catch(ta){throw ta;}return m;case "ObjectExpression":d="lang.dictionary([";for(c=0;c<b.properties.length;c++){var F=
b.properties[c],ba="Identifier"===F.key.type?"'"+F.key.name+"'":C(a,F.key),Z=C(a,F.value);0<c&&(d+=",");d+="lang.strCheck("+ba+",'ObjectExpression'),lang.aCheck("+Z+", 'ObjectExpression')"}return d+"])";case "Property":throw Error("Should not get here");case "Array":throw Error(f.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));default:throw Error(f.nodeErrorMessage(b,"RUNTIME","UNREOGNISED"));}}catch(ta){throw ta;}}function E(a,b){var d=null,c="";if("MemberExpression"===b.argument.type)return d=C(a,
b.argument.object),c=!0===b.argument.computed?C(a,b.argument.property):"'"+b.argument.property.name+"'","lang.memberupdate("+d+","+c+",'"+b.operator+"',"+b.prefix+")";d=b.argument.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[d])return"lang.update(lscope, '"+d+"','"+b.operator+"',"+b.prefix+")";if(void 0!==a.localScope._SymbolsMap[d])return"lang.update(lscope, '"+a.localScope._SymbolsMap[d]+"','"+b.operator+"',"+b.prefix+")"}if(void 0!==a.globalScope[d])return"lang.update(gscope, '"+
d+"','"+b.operator+"',"+b.prefix+")";if(void 0!==a.globalScope._SymbolsMap[d])return"lang.update(gscope, '"+a.globalScope._SymbolsMap[d]+"','"+b.operator+"',"+b.prefix+")";throw Error("Variable not recognised");}function H(a,b){var d=C(a,b.right),c=null,e="";if("MemberExpression"===b.left.type)return c=C(a,b.left.object),e=!0===b.left.computed?C(a,b.left.property):"'"+b.left.property.name+"'","lang.assignmember("+c+","+e+",'"+b.operator+"',"+d+")";c=b.left.name.toLowerCase();if(null!==a.localScope){if(void 0!==
a.localScope[c])return"lscope['"+c+"']\x3dlang.assign("+d+",'"+b.operator+"', lscope['"+c+"'])";if(void 0!==a.localScope._SymbolsMap[c])return"lscope['"+a.localScope._SymbolsMap[c]+"']\x3dlang.assign("+d+",'"+b.operator+"', lscope['"+a.localScope._SymbolsMap[c]+"'])"}if(void 0!==a.globalScope[c])return"gscope['"+c+"']\x3dlang.assign("+d+",'"+b.operator+"', gscope['"+c+"'])";if(void 0!==a.globalScope._SymbolsMap[c])return"gscope['"+a.globalScope._SymbolsMap[c]+"']\x3dlang.assign("+d+",'"+b.operator+
"', gscope['"+a.globalScope._SymbolsMap[c]+"'])";throw Error("Variable not recognised");}function G(a,b){return"BlockStatement"===b.type?C(a,b):"ReturnStatement"===b.type||"BreakStatement"===b.type||"ContinueStatement"===b.type?C(a,b)+"; ":"UpdateExpression"===b.type?"lastStatement \x3d "+C(a,b)+"; ":"ExpressionStatement"===b.type?C(a,b):"ObjectExpression"===b.type?"lastStatement \x3d "+C(a,b)+"; ":C(a,b)+"; "}function I(a,b){for(var d="",c=0;c<b.body.length;c++)d="ReturnStatement"===b.body[c].type?
d+(C(a,b.body[c])+"; \n"):"BreakStatement"===b.body[c].type?d+(C(a,b.body[c])+"; \n"):"ContinueStatement"===b.body[c].type?d+(C(a,b.body[c])+"; \n"):"UpdateExpression"===b.body[c].type?d+("lastStatement \x3d "+C(a,b.body[c])+"; \n"):"ObjectExpression"===b.body[c].type?d+("lastStatement \x3d "+C(a,b.body[c])+"; \n"):d+(C(a,b.body[c])+" \n");return d}function K(a,b){var d=null===b.init?null:C(a,b.init);d===g.voidOperation&&(d=null);b=b.id.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[b])return"lscope['"+
b+"']\x3d"+d+"; ";if(void 0!==a.localScope._SymbolsMap[b])return"lscope['"+a.localScope._SymbolsMap[b]+"']\x3d"+d+"; ";var c=P(b,a);a.localScope._SymbolsMap[b]=c;a.mangleMap[b]=c;return"lscope['"+c+"']\x3d"+d+"; "}if(void 0!==a.globalScope[b])return"gscope['"+b+"']\x3d"+d+"; ";if(void 0!==a.globalScope._SymbolsMap[b])return"gscope['"+a.globalScope._SymbolsMap[b]+"']\x3d"+d+"; ";c=P(b,a);a.globalScope._SymbolsMap[b]=c;a.mangleMap[b]=c;return"gscope['"+c+"']\x3d"+d+"; "}function M(a,b,c){b=b.toLowerCase();
switch(b){case "hasz":return a=a.hasZ,void 0===a?!1:a;case "hasm":return a=a.hasM,void 0===a?!1:a;case "spatialreference":return b=a.spatialReference._arcadeCacheId,void 0===b&&(c=!0,Object.freeze&&Object.isFrozen(a.spatialReference)&&(c=!1),c&&(Z++,b=a.spatialReference._arcadeCacheId=Z)),a=new l({wkt:a.spatialReference.wkt,wkid:a.spatialReference.wkid}),void 0!==b&&(a._arcadeCacheId="SPREF"+b.toString()),a}switch(a.type){case "extent":switch(b){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return a=
a[b],void 0!==a?a:null;case "type":return"Extent"}break;case "polygon":switch(b){case "rings":return b=a.cache._arcadeCacheId,void 0===b&&(Z++,b=Z,a.cache._arcadeCacheId=b),a=new d(a.rings,a.spatialReference,!0===a.hasZ,!0===a.hasM,b);case "type":return"Polygon"}break;case "point":switch(b){case "x":case "y":case "z":case "m":return void 0!==a[b]?a[b]:null;case "type":return"Point"}break;case "polyline":switch(b){case "paths":return b=a.cache._arcadeCacheId,void 0===b&&(Z++,b=Z,a.cache._arcadeCacheId=
b),a=new d(a.paths,a.spatialReference,!0===a.hasZ,!0===a.hasM,b);case "type":return"Polyline"}break;case "multipoint":switch(b){case "points":return b=a.cache._arcadeCacheId,void 0===b&&(Z++,b=Z,a.cache._arcadeCacheId=b),a=new h(a.points,a.spatialReference,!0===a.hasZ,!0===a.hasM,b,1);case "type":return"Multipoint"}}throw Error(f.nodeErrorMessage(c,"RUNTIME","PROPERTYNOTFOUND"));}function T(a,b){try{var d=b.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[d])return"lscope['"+d+
"']";if(void 0!==a.localScope._SymbolsMap[d])return"lscope['"+a.localScope._SymbolsMap[d]+"']"}if(void 0!==a.globalScope[d])return"gscope['"+d+"']";if(void 0!==a.globalScope._SymbolsMap[d])return"gscope['"+a.globalScope._SymbolsMap[d]+"']";throw Error(f.nodeErrorMessage(b,"RUNTIME","VARIABLENOTFOUND"));}catch(pa){throw pa;}}function N(a){return null===a?"":g.isArray(a)||g.isImmutableArray(a)?"Array":g.isDate(a)?"Date":g.isString(a)?"String":g.isBoolean(a)?"Boolean":g.isNumber(a)?"Number":a instanceof
n?"Attachment":a instanceof l?"Dictionary":a instanceof k?"Feature":a instanceof v?"Point":a instanceof y?"Polygon":a instanceof z?"Polyline":a instanceof w?"Multipoint":a instanceof r?"Extent":g.isFunctionParameter(a)?"Function":g.isFeatureSet(a)?"FeatureSet":g.isFeatureSetCollection(a)?"FeatureSetCollection":a===g.voidOperation?"":"number"===typeof a&&isNaN(a)?"Number":"Unrecognised Type"}function S(a,b,d,c){try{if(g.equalityTest(b[d],c))return b[d+1];var e=b.length-d;return 1===e?b[d]:2===e?null:
3===e?b[d+2]:S(a,b,d+2,c)}catch(ia){throw ia;}}function O(a,b,d,c){try{if(!0===c)return b[d+1];if(3===b.length-d)return b[d+2];var e=b[d+2];if(!1===g.isBoolean(e))throw Error("WHEN needs boolean test conditions");return O(a,b,d+2,e)}catch(ia){throw ia;}}function V(a,b){var d=a.length,c=Math.floor(d/2);if(0===d)return[];if(1===d)return[a[0]];var e=V(a.slice(0,c),b);a=V(a.slice(c,d),b);for(d=[];0<e.length||0<a.length;)0<e.length&&0<a.length?(c=b(e[0],a[0]),isNaN(c)&&(c=0),0>=c?(d.push(e[0]),e=e.slice(1)):
(d.push(a[0]),a=a.slice(1))):0<e.length?(d.push(e[0]),e=e.slice(1)):0<a.length&&(d.push(a[0]),a=a.slice(1));return d}function Q(a,b){try{var d=a.length,c=Math.floor(d/2);if(0===d)return t.resolve([]);if(1===d)return t.resolve([a[0]]);var e=[Q(a.slice(0,c),b),Q(a.slice(c,d),b)];return t.all(e).then(function(a){return J(a[0],a[1],b,[])})}catch(ia){return t.reject(ia)}}function J(a,b,d,c){return t.create(function(e,f){0<a.length||0<b.length?0<a.length&&0<b.length?d(a[0],b[0]).then(function(g){try{isNaN(g)&&
(g=1),0>=g?(c.push(a[0]),a=a.slice(1)):(c.push(b[0]),b=b.slice(1)),J(a,b,d,c).then(function(a){e(a)},f)}catch(Aa){f(Aa)}},f):0<a.length?(c.push(a[0]),a=a.slice(1),J(a,b,d,c).then(function(a){e(a)},f)):0<b.length&&(c.push(b[0]),b=b.slice(1),J(a,b,d,c).then(function(a){e(a)},f)):e(c)})}function P(a,b){b.symbols.symbolCounter++;return"_T"+b.symbols.symbolCounter.toString()}function L(a){a.symbols.symbolCounter++;return"_Tvar"+a.symbols.symbolCounter.toString()}function F(a,b,d){var c={};a||(a={});d||
(d={});c._SymbolsMap={};c.textformatting=1;c.infinity=1;c.pi=1;for(var e in b)c[e]=1;for(e in d)c[e]=1;for(e in a)c[e]=1;return c}function Y(a,b){for(var d={mode:b,compiled:!0,functions:{},signatures:[],failDefferred:D,standardFunction:B,standardFunctionAsync:B,evaluateIdentifier:X},c=0;c<a.length;c++)a[c].registerFunctions(d);if("sync"===b){for(var e in d.functions)da[e]=new g.NativeFunction(d.functions[e]),ha.prototype[e]=da[e];for(c=0;c<d.signatures.length;c++)f.addFunctionDeclaration(d.signatures[c],
"sync")}else{for(e in d.functions)ja[e]=new g.NativeFunction(d.functions[e]),W.prototype[e]=ja[e];for(c=0;c<d.signatures.length;c++)f.addFunctionDeclaration(d.signatures[c],"async")}}function X(a,b){b=b.name;if("_SymbolsMap"===b)throw"Illegal";if(0<a.localStack.length){if("_t"!==b.substr(0,2).toLowerCase()&&void 0!==a.localStack[a.localStack.length-1][b])return a.localStack[a.localStack.length-1][b];var d=a.mangleMap[b];if(void 0!==d&&void 0!==a.localStack[a.localStack.length-1][d])return a.localStack[a.localStack.length-
1][d]}if("_t"!==b.substr(0,2).toLowerCase()&&void 0!==a.globalScope[b]||1===a.globalScope._SymbolsMap[b])return a.globalScope[b];b=a.mangleMap[b];if(void 0!==b)return a.globalScope[b]}function R(a){console.log(a)}Object.defineProperty(c,"__esModule",{value:!0});var Z=0,da={};b.registerFunctions(da,B);u.registerFunctions(da,B);m.registerFunctions(da,B);a.registerFunctions(da,B);q.registerFunctions(da,B);da["typeof"]=function(a,b){return B(a,b,function(a,b,d){g.pcCheck(d,1,1);a=N(d[0]);if("Unrecognised Type"===
a)throw Error("Unrecognised Type");return a})};da.iif=function(a,b){try{return B(a,b,function(a,b,d){g.pcCheck(d,3,3);if(!1===g.isBoolean(d[0]))throw Error("IF Function must have a boolean test condition");return d[0]?d[1]:d[2]})}catch(na){throw na;}};da.decode=function(a,b){try{return B(a,b,function(b,d,c){if(2>c.length)throw Error("Missing Parameters");if(2===c.length)return c[1];if(0===(c.length-1)%2)throw Error("Must have a default value result.");return S(a,c,1,c[0])})}catch(na){throw na;}};
da.when=function(a,b){try{return B(a,b,function(b,d,c){if(3>c.length)throw Error("Missing Parameters");if(0===c.length%2)throw Error("Must have a default value result.");b=c[0];if(!1===g.isBoolean(b))throw Error("WHEN needs boolean test conditions");return O(a,c,0,b)})}catch(na){throw na;}};da.top=function(a,b){return B(a,b,function(a,b,d){g.pcCheck(d,2,2);if(g.isArray(d[0]))return g.toNumber(d[1])>=d[0].length?d[0].slice(0):d[0].slice(0,g.toNumber(d[1]));if(g.isImmutableArray(d[0]))return g.toNumber(d[1])>=
d[0].length()?d[0].slice(0):d[0].slice(0,g.toNumber(d[1]));throw Error("Top cannot accept this parameter type");})};da.first=function(a,b){return B(a,b,function(a,b,d){g.pcCheck(d,1,1);return g.isArray(d[0])?0===d[0].length?null:d[0][0]:g.isImmutableArray(d[0])?0===d[0].length()?null:d[0].get(0):null})};da.sort=function(a,b){return B(a,b,function(b,d,c){g.pcCheck(c,1,2);d=c[0];g.isImmutableArray(d)&&(d=d.toArray());if(!1===g.isArray(d))throw Error("Illegal Argument");if(1<c.length){if(!1===g.isFunctionParameter(c[1]))throw Error("Illegal Argument");
var e=function(a,d){return ga.callfunc(c[1],[a,d],b)};return a.isAsync?Q(d,e):d=V(d,function(a,b){return e(a,b)})}if(0===d.length)return[];for(var f={},m=0;m<d.length;m++){var h=N(d[m]);""!==h&&(f[h]=!0)}if(!0===f.Array||!0===f.Dictionary||!0===f.Feature||!0===f.Point||!0===f.Polygon||!0===f.Polyline||!0===f.Multipoint||!0===f.Extent||!0===f.Function)return d.slice(0);var m=0,h="",k;for(k in f)m++,h=k;return d=1<m||"String"===h?V(d,function(a,b){if(null===a||void 0===a||a===g.voidOperation)return null===
b||void 0===b||b===g.voidOperation?0:1;if(null===b||void 0===b||b===g.voidOperation)return-1;a=g.toString(a);b=g.toString(b);return a<b?-1:a===b?0:1}):"Number"===h?V(d,function(a,b){return a-b}):"Boolean"===h?V(d,function(a,b){return a===b?0:b?-1:1}):"Date"===h?V(d,function(a,b){return b-a}):d.slice(0)})};var ja={},ba;for(ba in da)ja[ba]=new g.NativeFunction(da[ba]);e.registerFunctions(da,B);for(ba in da)da[ba]=new g.NativeFunction(da[ba]);var ha=function(){};ha.prototype=da;var W=function(){};W.prototype=
ja;c.functionHelper={fixSpatialReference:g.fixSpatialReference,parseArguments:function(a,b){for(var d=[],c=0;c<b.arguments.length;c++)d.push(C(a,b.arguments[c]));return d},standardFunction:B};c.extend=Y;c.executeScript=function(a,b){return a(b)};c.extractFieldLiterals=function(a,b){void 0===b&&(b=!1);return f.findFieldLiterals(a,b)};c.validateScript=function(a,b){return f.validateScript(a,b,"sync")};c.referencesMember=function(a,b){return f.referencesMember(a,b)};c.referencesFunction=function(a,b){return f.referencesFunction(a,
b)};var ea=0,ga={error:function(a,b,d){throw Error(f.nodeErrorMessage(a,b,d));},__awaiter:function(a,b,d,c){return t.create(function(d,e){function f(a){try{m(c.next(a))}catch(Ba){e(Ba)}}function g(a){try{m(c["throw"](a))}catch(Ba){e(Ba)}}function m(a){a.done?d(a.value):a.value&&a.value.then?a.value.then(f,g):(ea++,0===ea%100?setTimeout(function(){ea=0;f(a.value)},0):f(a.value))}m((c=c.apply(a,b||[])).next())})},functionDepthchecker:function(a,b){return function(){b.depthCounter++;b.localStack.push([]);
if(64<b.depthCounter)throw Error("Exceeded maximum function depth");var d=a.apply(this,arguments);if(t.isThenable(d))return d.then(function(a){b.depthCounter--;--b.localStack.length;return a});b.depthCounter--;--b.localStack.length;return d}},aCheck:function(a,b){if(g.isFunctionParameter(a))throw Error(f.nodeErrorMessage({type:b},"RUNTIME","FUNCTIONCONTEXTILLEGAL"));return a===g.voidOperation?null:a},Dictionary:l,Feature:k,dictionary:function(a){for(var b={},d=0;d<a.length;d+=2){if(g.isFunctionParameter(a[d+
1]))throw Error("Illegal Argument");if(!1===g.isString(a[d]))throw Error("Illegal Argument");b[a[d].toString()]=a[d+1]===g.voidOperation?null:a[d+1]}a=new l(b);a.immutable=!1;return a},strCheck:function(a,b){if(!1===g.isString(a))throw Error("Illegal Argument");return a},unary:function(a,b){if(g.isBoolean(a)){if("!"===b)return!a;if("-"===b)return-1*g.toNumber(a);if("+"===b)return 1*g.toNumber(a);throw Error(f.nodeErrorMessage({type:"UnaryExpression",operator:b,prefix:null,argument:null},"RUNTIME",
"NOTSUPPORTEDUNARYOPERATOR"));}if("-"===b)return-1*g.toNumber(a);if("+"===b)return 1*g.toNumber(a);throw Error(f.nodeErrorMessage({type:"UnaryExpression",operator:b,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));},logicalCheck:function(a){if(!1===g.isBoolean(a))throw Error(f.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));return a},logical:function(a,b,d){if(g.isBoolean(a)&&g.isBoolean(b))switch(d){case "||":return a||b;
case "\x26\x26":return a&&b}throw Error(f.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));},binary:function(a,b,d){switch(d){case "\x3d\x3d":return g.equalityTest(a,b);case "\x3d":return g.equalityTest(a,b);case "!\x3d":return!g.equalityTest(a,b);case "\x3c":return g.greaterThanLessThan(a,b,d);case "\x3e":return g.greaterThanLessThan(a,b,d);case "\x3c\x3d":return g.greaterThanLessThan(a,b,d);case "\x3e\x3d":return g.greaterThanLessThan(a,b,
d);case "+":return g.isString(a)||g.isString(b)?g.toString(a)+g.toString(b):g.toNumber(a)+g.toNumber(b);case "-":return g.toNumber(a)-g.toNumber(b);case "*":return g.toNumber(a)*g.toNumber(b);case "/":return g.toNumber(a)/g.toNumber(b);case "%":return g.toNumber(a)%g.toNumber(b);default:throw Error(f.nodeErrorMessage({type:"BinaryExpression",operator:d,left:a,right:b},"RUNTIME","OPERATORNOTRECOGNISED"));}},assign:function(a,b,d){switch(b){case "\x3d":return a===g.voidOperation?null:a;case "/\x3d":return g.toNumber(d)/
g.toNumber(a);case "*\x3d":return g.toNumber(d)*g.toNumber(a);case "-\x3d":return g.toNumber(d)-g.toNumber(a);case "+\x3d":return g.isString(d)||g.isString(a)?g.toString(d)+g.toString(a):g.toNumber(d)+g.toNumber(a);case "%\x3d":return g.toNumber(d)%g.toNumber(a);default:throw Error(f.nodeErrorMessage({type:"AssignmentExpression",operator:b,left:null,right:null},"RUNTIME","OPERATORNOTRECOGNISED"));}},update:function(a,b,d,c){var e=g.toNumber(a[b]);a[b]="++"===d?e+1:e-1;return!1===c?e:"++"===d?e+1:
e-1},graphicToFeature:function(a,b){return null===a?null:k.createFromGraphicLikeObject(a.geometry,a.attributes,b)},memberupdate:function(a,b,d,c){var e;if(g.isArray(a))if(g.isNumber(b)){0>b&&(b=a.length+b);if(0>b||b>=a.length)throw Error("Assignment outside of array bounds");e=g.toNumber(a[b]);a[b]="++"===d?e+1:e-1}else throw Error("Invalid Parameter");else if(a instanceof l){if(!1===g.isString(b))throw Error("Dictionary accessor must be a string");if(!0===a.hasField(b))e=g.toNumber(a.field(b)),a.setField(b,
"++"===d?e+1:e-1);else throw Error("Invalid Parameter");}else if(a instanceof k){if(!1===g.isString(b))throw Error("Feature accessor must be a string");if(!0===a.hasField(b))e=g.toNumber(a.field(b)),a.setField(b,"++"===d?e+1:e-1);else throw Error("Invalid Parameter");}else{if(g.isImmutableArray(a))throw Error("Array is Immutable");throw Error("Invalid Parameter");}return!1===c?e:"++"===d?e+1:e-1},assignmember:function(a,b,d,c){if(g.isArray(a))if(g.isNumber(b)){0>b&&(b=a.length+b);if(0>b||b>a.length)throw Error("Assignment outside of array bounds");
if(b===a.length&&"\x3d"!==d)throw Error("Invalid Parameter");a[b]=this.assign(c,d,a[b])}else throw Error("Invalid Parameter");else if(a instanceof l){if(!1===g.isString(b))throw Error("Dictionary accessor must be a string");if(!0===a.hasField(b))a.setField(b,this.assign(c,d,a.field(b)));else{if("\x3d"!==d)throw Error("Invalid Parameter");a.setField(b,this.assign(c,d,null))}}else if(a instanceof k){if(!1===g.isString(b))throw Error("Feature accessor must be a string");if(!0===a.hasField(b))a.setField(b,
this.assign(c,d,a.field(b)));else{if("\x3d"!==d)throw Error("Invalid Parameter");a.setField(b,this.assign(c,d,null))}}else{if(g.isImmutableArray(a))throw Error("Array is Immutable");throw Error("Invalid Parameter");}},member:function(a,b){if(null===a)throw Error(f.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","NOTFOUND"));if(a instanceof l||a instanceof k){if(g.isString(b))return a.field(b);throw Error(f.nodeErrorMessage({type:"MemberExpression",object:null,
property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(a instanceof x){if(g.isString(b))return M(a,b,"MemberExpression");throw Error(f.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(g.isArray(a)){if(g.isNumber(b)&&isFinite(b)&&Math.floor(b)===b){0>b&&(b=a.length+b);if(b>=a.length||0>b)throw Error(f.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return a[b]}throw Error(f.nodeErrorMessage({type:"MemberExpression",
object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(g.isString(a)){if(g.isNumber(b)&&isFinite(b)&&Math.floor(b)===b){0>b&&(b=a.length+b);if(b>=a.length||0>b)throw Error(f.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return a[b]}throw Error(f.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(g.isImmutableArray(a)&&g.isNumber(b)&&isFinite(b)&&Math.floor(b)===
b){0>b&&(b=a.length()+b);if(b>=a.length()||0>b)throw Error(f.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return a.get(b)}throw Error(f.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));},callfunc:function(a,b,d){return a instanceof g.NativeFunction?a.fn(d,b):a instanceof g.SizzleFunction?a.fn.apply(this,b):a.apply(this,b)}};c.compileScript=function(a,b,d){void 0===b&&(b=null);
void 0===d&&(d=!1);null===b&&(b={vars:{},customfunctions:{}});b={isAsync:d,globalScope:F(b.vars,d?ja:da,b.customfunctions),localScope:null,mangleMap:{},console:R,lrucache:b.lrucache,services:b.services,symbols:{symbolCounter:0}};a=C(b,a.body[0].body);""===a&&(a="lc.voidOperation; ");b={lc:g,lang:ga,mangles:b.mangleMap,postProcess:function(a){a instanceof g.ReturnResult&&(a=a.value);a instanceof g.ImplicitResult&&(a=a.value);a===g.voidOperation&&(a=null);if(a===g.breakResult)throw Error("Cannot return BREAK");
if(a===g.continueResult)throw Error("Cannot return CONTINUE");if(g.isFunctionParameter(a))throw Error("Cannot return FUNCTION");return a},prepare:function(a,b){var d=a.spatialReference;if(null===d||void 0===d)d=new A({wkid:102100});var c=a.vars,e=a.customfunctions,f=b?new W:new ha;c||(c={});e||(e={});var g=new l({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});g.immutable=!1;f._SymbolsMap={textformatting:1,infinity:1,pi:1};f.textformatting=g;f.infinity=
Number.POSITIVE_INFINITY;f.pi=Math.PI;for(var m in e)f[m]=e[m],f._SymbolsMap[m]=1;for(m in c)f._SymbolsMap[m]=1,f[m]=c[m]&&"esri.Graphic"===c[m].declaredClass?k.createFromGraphic(c[m]):c[m];return{localStack:[],isAsync:b,mangleMap:this.mangles,spatialReference:d,globalScope:f,abortSignal:void 0===a.abortSignal||null===a.abortSignal?{aborted:!1}:a.abortSignal,localScope:null,services:a.services,console:a.console?a.console:R,lrucache:a.lrucache,symbols:{symbolCounter:0},depthCounter:1}}};return(new Function("context",
"spatialReference",d?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+a+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+
a+"\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(b)};c.enableAsyncSupport=function(){return t.create(function(a,b){p(["./functions/geomasync"],function(b){Y([b],"async");a(!0)},function(a){b(a)})})}})},"esri/arcade/Attachment":function(){define(["require","exports","../core/tsSupport/extendsHelper","./Dictionary"],function(p,c,n,l){return function(c){function d(d,g,f,b,a){var e=c.call(this)||this;e.attachmentUrl=a;e.immutable=!1;e.setField("id",d);e.setField("name",g);
e.setField("contenttype",f);e.setField("size",b);e.immutable=!0;return e}n(d,c);return d}(l)})},"esri/arcade/Dictionary":function(){define(["require","exports","./ImmutableArray","./languageUtils","../geometry/Geometry"],function(p,c,n,l,k){return function(){function d(c){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=c instanceof d?c.attributes:void 0===c?{}:null===c?{}:c}d.prototype.field=function(d){var c=d.toLowerCase();d=this.attributes[d];
if(void 0!==d)return d;for(var f in this.attributes)if(f.toLowerCase()===c)return this.attributes[f];throw Error("Field not Found");};d.prototype.setField=function(d,c){if(this.immutable)throw Error("Dictionary is Immutable");var f=d.toLowerCase();if(void 0===this.attributes[d])for(var b in this.attributes)if(b.toLowerCase()===f){this.attributes[b]=c;return}this.attributes[d]=c};d.prototype.hasField=function(d){var c=d.toLowerCase();if(void 0!==this.attributes[d])return!0;for(var f in this.attributes)if(f.toLowerCase()===
c)return!0;return!1};d.prototype.keys=function(){var d=[],c;for(c in this.attributes)d.push(c);return d=d.sort()};d.prototype.castToText=function(){var d="",c;for(c in this.attributes){""!==d&&(d+=",");var f=this.attributes[c];null==f?d+=JSON.stringify(c)+":null":l.isBoolean(f)||l.isNumber(f)||l.isString(f)?d+=JSON.stringify(c)+":"+JSON.stringify(f):f instanceof k?d+=JSON.stringify(c)+":"+l.toStringExplicit(f):f instanceof n?d+=JSON.stringify(c)+":"+l.toStringExplicit(f):f instanceof Array?d+=JSON.stringify(c)+
":"+l.toStringExplicit(f):f instanceof Date?d+=JSON.stringify(c)+":"+JSON.stringify(f):null!==f&&"object"===typeof f&&void 0!==f.castToText&&(d+=JSON.stringify(c)+":"+f.castToText())}return"{"+d+"}"};return d}()})},"esri/arcade/Feature":function(){define("require exports ../core/tsSupport/assignHelper ./Dictionary ./ImmutableArray ./languageUtils ../geometry/Geometry ../geometry/Point ../geometry/support/jsonUtils ../layers/graphics/featureConversionUtils ../core/maybe".split(" "),function(p,c,n,
l,k,d,h,g,f,b,a){return function(){function c(){this.declaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=this._optimizedGeomDefinition=null;this.immutable=this._datesfixed=!0;this._datefields=null;this.immutable=!0}c.createFromGraphic=function(b){var d=new c;d._geometry=a.isSome(b.geometry)?b.geometry:null;d.attributes=void 0===b.attributes?{}:null===b.attributes?{}:b.attributes;b._sourceLayer?(d._layer=b._sourceLayer,d._datesfixed=!1):b._layer?(d._layer=b._layer,d._datesfixed=
!1):b.layer&&(d._layer=b.layer,d._datesfixed=!1);return d};c.createFromArcadeFeature=function(a){var b=new c;b._datesfixed=a._datesfixed;b.attributes=a.attributes;b._geometry=a._geometry;b._optimizedGeomDefinition=a._optimizedGeomDefinition;a._layer&&(b._layer=a._layer);return b};c.createFromOptimisedFeature=function(a,b,d){var e=new c;e._geometry=a.geometry?{geometry:a.geometry}:null;e._optimizedGeomDefinition=d;e.attributes=a.attributes||{};e._layer=b;e._datesfixed=!1;return e};c.createFromArcadeDictionary=
function(a){var b=new c;b.attributes=a.field("attributes");null!==b.attributes?b.attributes instanceof l?(b.attributes=b.attributes.attributes,null===b.attributes&&(b.attributes={})):b.attributes={}:b.attributes={};b._geometry=a.field("geometry");null!==b._geometry&&(b._geometry instanceof l?b._geometry=c.parseGeometryFromDictionary(b._geometry):b._geometry instanceof h||(b._geometry=null));return b};c.createFromGraphicLikeObject=function(b,d,e){void 0===e&&(e=null);var f=new c;null===d&&(d={});f.attributes=
d;f._geometry=a.isSome(b)?b:null;f._layer=e;f._layer&&(f._datesfixed=!1);return f};c.prototype.repurposeFromGraphicLikeObject=function(a,b,d){void 0===d&&(d=null);null===b&&(b={});this.attributes=b;this._geometry=a?a:null;this._datesfixed=(this._layer=d)?!1:!0};c.prototype.castToText=function(){var a="",b;for(b in this.attributes){""!==a&&(a+=",");var c=this.attributes[b];null==c?a+=JSON.stringify(b)+":null":d.isBoolean(c)||d.isNumber(c)||d.isString(c)?a+=JSON.stringify(b)+":"+JSON.stringify(c):c instanceof
h?a+=JSON.stringify(b)+":"+d.toStringExplicit(c):c instanceof k?a+=JSON.stringify(b)+":"+d.toStringExplicit(c):c instanceof Array?a+=JSON.stringify(b)+":"+d.toStringExplicit(c):c instanceof Date?a+=JSON.stringify(b)+":"+JSON.stringify(c):null!==c&&"object"===typeof c&&void 0!==c.castToText&&(a+=JSON.stringify(b)+":"+c.castToText())}return'{"geometry":'+(null===this.geometry()?"null":d.toStringExplicit(this.geometry()))+',"attributes":{'+a+"}}"};c.prototype._fixDates=function(){if(null!==this._datefields)0<
this._datefields.length&&this._fixDateFields(this._datefields);else{for(var a=[],b=0;b<this._layer.fields.length;b++){var d=this._layer.fields[b];"date"!==d.type&&"esriFieldTypeDate"!==d.type||a.push(d.name)}this._datefields=a;0<a.length&&this._fixDateFields(a)}this._datesfixed=!0};c.prototype._fixDateFields=function(a){this.attributes=n({},this.attributes);for(var b=0;b<a.length;b++){var d=this.attributes[a[b]];if(null!==d)if(void 0===d)for(var c in this.attributes){if(c.toLowerCase()===a[b].toLowerCase()){d=
this.attributes[c];null===d||d instanceof Date||(this.attributes[c]=new Date(d));break}}else d instanceof Date||(this.attributes[a[b]]=new Date(d))}};c.prototype.geometry=function(){if(null===this._geometry||this._geometry instanceof h)return this._geometry;this._optimizedGeomDefinition?(this._geometry=a.unwrap(f.fromJSON(b.convertToGeometry(this._geometry,this._optimizedGeomDefinition.geometryType,this._optimizedGeomDefinition.hasZ,this._optimizedGeomDefinition.hasM))),this._geometry.spatialReference=
this._optimizedGeomDefinition.spatialReference):this._geometry=a.unwrap(f.fromJSON(this._geometry));return this._geometry};c.prototype.field=function(a){!1===this._datesfixed&&this._fixDates();var b=this.attributes[a];if(void 0!==b)return b;a=a.toLowerCase();for(var d in this.attributes)if(d.toLowerCase()===a)return this.attributes[d];if(this._hasFieldDefinition(a))return null;throw Error("Field not Found");};c.prototype._hasFieldDefinition=function(a){if(null===this._layer)return!1;for(var b=0;b<
this._layer.fields.length;b++)if(this._layer.fields[b].name.toLowerCase()===a)return!0;return!1};c.prototype._field=function(a){!1===this._datesfixed&&this._fixDates();var b=a.toLowerCase();a=this.attributes[a];if(void 0!==a)return a;for(var d in this.attributes)if(d.toLowerCase()===b)return this.attributes[d];return null};c.prototype.setField=function(a,b){if(this.immutable)throw Error("Feature is Immutable");if(!1===d.isSimpleType(b))throw Error("Illegal Value Assignment to Feature");var c=a.toLowerCase();
if(void 0===this.attributes[a])for(var e in this.attributes)if(e.toLowerCase()===c){this.attributes[e]=b;return}this.attributes[a]=b};c.prototype.hasField=function(a){var b=a.toLowerCase();if(void 0!==this.attributes[a])return!0;for(var d in this.attributes)if(d.toLowerCase()===b)return!0;return this._hasFieldDefinition(b)?!0:!1};c.prototype.keys=function(){var a=[],b={},d;for(d in this.attributes)a.push(d),b[d.toLowerCase()]=1;if(null!==this._layer)for(d=0;d<this._layer.fields.length;d++){var c=
this._layer.fields[d];1!==b[c.name.toLowerCase()]&&a.push(c.name)}return a=a.sort()};c.parseGeometryFromDictionary=function(a){a=c.convertDictionaryToJson(a,!0);void 0!==a.spatialreference&&(a.spatialReference=a.spatialreference,delete a.spatialreference);void 0!==a.rings&&(a.rings=this.fixPathArrays(a.rings,!0===a.hasZ,!0===a.hasM));void 0!==a.paths&&(a.paths=this.fixPathArrays(a.paths,!0===a.hasZ,!0===a.hasM));void 0!==a.points&&(a.points=this.fixPointArrays(a.points,!0===a.hasZ,!0===a.hasM));return f.fromJSON(a)};
c.fixPathArrays=function(a,b,d){var c=[];if(a instanceof Array)for(var e=0;e<a.length;e++)c.push(this.fixPointArrays(a[e],b,d));else if(a instanceof k)for(e=0;e<a.length();e++)c.push(this.fixPointArrays(a.get(e),b,d));return c};c.fixPointArrays=function(a,b,d){var c=[];if(a instanceof Array)for(var e=0;e<a.length;e++){var f=a[e];f instanceof g?b&&d?c.push([f.x,f.y,f.z,f.m]):b?c.push([f.x,f.y,f.z]):d?c.push([f.x,f.y,f.m]):c.push([f.x,f.y]):f instanceof k?c.push(f.toArray()):c.push(f)}else if(a instanceof
k)for(e=0;e<a.length();e++)f=a.get(e),f instanceof g?b&&d?c.push([f.x,f.y,f.z,f.m]):b?c.push([f.x,f.y,f.z]):d?c.push([f.x,f.y,f.m]):c.push([f.x,f.y]):f instanceof k?c.push(f.toArray()):c.push(f);return c};c.convertDictionaryToJson=function(a,b){void 0===b&&(b=!1);var d={},e;for(e in a.attributes){var f=a.attributes[e];f instanceof l&&(f=c.convertDictionaryToJson(f));b?d[e.toLowerCase()]=f:d[e]=f}return d};c.parseAttributesFromDictionary=function(a){var b={},c;for(c in a.attributes){var e=a.attributes[c];
if(d.isSimpleType(e))b[c]=e;else throw Error("Illegal Argument");}return b};c.fromJson=function(a){var b=null;null!==a.geometry&&void 0!==a.geometry&&(b=f.fromJSON(a.geometry));var e={};if(null!==a.attributes&&void 0!==a.attributes)for(var g in a.attributes){var m=a.attributes[g];if(null===m)e[g]=m;else if(d.isString(m)||d.isNumber(m)||d.isBoolean(m)||d.isDate(m))e[g]=m;else throw Error("Illegal Argument");}return c.createFromGraphicLikeObject(b,e,null)};c.prototype.domainValueLookup=function(a,b,
c){if(null===this._layer||!this._layer.fields)return null;c=d.getDomain(a,this._layer,this,c);if(void 0===b)try{b=this.field(a)}catch(t){return null}return d.getDomainValue(c,b)};c.prototype.domainCodeLookup=function(a,b,c){if(null===this._layer||!this._layer.fields)return null;if(void 0===b){try{b=this.field(a)}catch(t){return null}return b}a=d.getDomain(a,this._layer,this,c);return d.getDomainCode(a,b)};return c}()})},"esri/layers/graphics/featureConversionUtils":function(){define("require exports ../../core/Error ../../core/Logger ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),
function(p,c,n,l,k,d,h,g){function f(a,b){return a?b?4:3:b?3:2}function b(a,b){return Math.round((b-a.translate[0])/a.scale[0])}function a(a,b){return Math.round((a.translate[1]-b)/a.scale[1])}function e(a,b){return b*a.scale[0]+a.translate[0]}function m(a,b){return a.translate[1]-b*a.scale[1]}function q(a){a=a.coords;return{x:a[0],y:a[1]}}function u(a,b){a.coords[0]=b.x;a.coords[1]=b.y;return a}function t(a){a=a.coords;return{x:a[0],y:a[1],z:a[2]}}function r(a,b){a.coords[0]=b.x;a.coords[1]=b.y;
a.coords[2]=b.z;return a}function x(a){a=a.coords;return{x:a[0],y:a[1],m:a[2]}}function w(a,b){a.coords[0]=b.x;a.coords[1]=b.y;a.coords[2]=b.m;return a}function v(a){a=a.coords;return{x:a[0],y:a[1],z:a[2],m:a[3]}}function y(a,b){a.coords[0]=b.x;a.coords[1]=b.y;a.coords[2]=b.z;a.coords[3]=b.m;return a}function z(a,b){return a&&b?y:a?r:b?w:u}function A(a,b,d){if(!a)return null;for(var c=f(b,d),e=[],g=0;g<a.coords.length;g+=c){for(var m=[],h=0;h<c;h++)m.push(a.coords[g+h]);e.push(m)}return b?d?{points:e,
hasZ:b,hasM:d}:{points:e,hasZ:b}:d?{points:e,hasM:d}:{points:e}}function B(a,b,d){void 0===d&&(d=f(b.hasZ,b.hasM));a.lengths[0]=b.points.length;var c=a.coords,e=0,g=0;for(b=b.points;g<b.length;g++)for(var m=b[g],h=0;h<d;h++)c[e++]=m[h];return a}function D(a,b,d){if(!a)return null;var c=f(b,d),e=a.coords,g=[],m=0,h=0;for(a=a.lengths;h<a.length;h++){for(var k=a[h],l=[],q=0;q<k;q++){for(var r=[],t=0;t<c;t++)r.push(e[m++]);l.push(r)}g.push(l)}return b?d?{paths:g,hasZ:b,hasM:d}:{paths:g,hasZ:b}:d?{paths:g,
hasM:d}:{paths:g}}function C(a,b,d){void 0===d&&(d=f(b.hasZ,b.hasM));var c=a.lengths,e=a.coords,g=0,m=0;for(b=b.paths;m<b.length;m++){for(var h=b[m],k=0,l=h;k<l.length;k++)for(var q=l[k],r=0;r<d;r++)e[g++]=q[r];c.push(h.length)}return a}function E(a,b,d){if(!a)return null;var c=f(b,d),e=a.coords,g=[],m=0,h=0;for(a=a.lengths;h<a.length;h++){for(var k=a[h],l=[],q=0;q<k;q++){for(var r=[],t=0;t<c;t++)r.push(e[m++]);l.push(r)}g.push(l)}return b?d?{rings:g,hasZ:b,hasM:d}:{rings:g,hasZ:b}:d?{rings:g,hasM:d}:
{rings:g}}function H(a,b,d,c){void 0===d&&(d=b.hasZ);void 0===c&&(c=b.hasM);d=f(d,c);c=a.lengths;var e=a.coords,g=0,m=c.length=e.length=0;for(b=b.rings;m<b.length;m++){for(var h=b[m],k=0,l=h;k<l.length;k++)for(var q=l[k],r=0;r<d;r++)e[g++]=q[r];c.push(h.length)}return a}function G(a,b,c,e,m,h){a.length=0;if(c){switch(c){case "esriGeometryPoint":e=z(e,m);for(m=0;m<b.length;m++){var k=b[m];c=k.geometry;var k=k.attributes,l=void 0;c&&(l=e(new g.default,c));a.push(new d.default(l,k,null,k[h]))}break;
case "esriGeometryMultipoint":e=f(e,m);for(m=0;m<b.length;m++)k=b[m],c=k.geometry,k=k.attributes,l=void 0,c&&(l=B(new g.default,c,e)),a.push(new d.default(l,k,null,k[h]));break;case "esriGeometryPolyline":e=f(e,m);for(m=0;m<b.length;m++)k=b[m],c=k.geometry,k=k.attributes,l=void 0,c&&(l=C(new g.default,c,e)),a.push(new d.default(l,k,null,k[h]));break;case "esriGeometryPolygon":for(c=0;c<b.length;c++){var q=b[c],k=q.geometry,l=q.centroid,q=q.attributes,r=void 0;k&&(r=H(new g.default,k,e,m));l?a.push(new d.default(r,
q,u(new g.default,l),q[h])):a.push(new d.default(r,q,null,q[h]))}break;default:N.error("convertToFeatureSet:unknown-geometry",new n("Unable to parse unknown geometry type '"+c+"'")),a.length=0}return a}a.length=0}function I(a,b,d,c,e){a.length=0;switch(d){case "esriGeometryPoint":d=q;c&&e?d=v:c?d=t:e&&(d=x);for(c=0;c<b.length;c++){var f=b[c];e=f.geometry;f=f.attributes;e=e?d(e):null;a.push({attributes:f,geometry:e})}break;case "esriGeometryMultipoint":for(d=0;d<b.length;d++){var g=b[d],f=g.geometry,
g=g.attributes,m=void 0;f&&(m=A(f,c,e));a.push({attributes:g,geometry:m})}break;case "esriGeometryPolyline":for(d=0;d<b.length;d++)g=b[d],f=g.geometry,g=g.attributes,m=void 0,f&&(m=D(f,c,e)),a.push({attributes:g,geometry:m});break;case "esriGeometryPolygon":for(d=0;d<b.length;d++){var m=b[d],g=m.geometry,f=m.attributes,h=m.centroid,m=void 0;g&&(m=E(g,c,e));h?(g=q(h),a.push({attributes:f,centroid:g,geometry:m})):a.push({attributes:f,geometry:m})}break;default:N.error("convertToFeatureSet:unknown-geometry",
new n("Unable to parse unknown geometry type '"+d+"'"))}return a}function K(d,c,e,g,m,h){d.lengths.length&&(d.lengths.length=0);d.coords.length&&(d.coords.length=0);if(!c||!c.coords.length)return null;m=S[m];var k=c.coords;c=c.lengths;var l=f(e,g);e=e?g?Q:V:g?V:O;if(!c.length)return e(d.coords,k,0,0,b(h,k[0]),a(h,k[1])),d.lengths.length&&(d.lengths.length=0),d.coords.length=l,d;for(var q,r,t,n=0,u,y=0,v=0;v<c.length;v++){var x=c[v];if(!(x<m)){var w=0;u=y;r=g=b(h,k[n]);t=q=a(h,k[n+1]);e(d.coords,k,
u,n,r,t);w++;n+=l;u+=l;for(var A=1;A<x;A++,n+=l)if(r=b(h,k[n]),t=a(h,k[n+1]),r!==g||t!==q)e(d.coords,k,u,n,r-g,t-q),u+=l,w++,g=r,q=t;w>=m&&(d.lengths.push(w),y=u)}}d.coords.length=y;return d.coords.length?d:null}function M(a,b,d,c,e,f,g){for(var m=g-d,h=0,k=0,l,q=f+d;q<g-d;q+=d){l=b[q];var r=b[q+1],t=b[f],n=b[f+1],u=b[m],y=b[m+1];t===u?l=Math.abs(l-t):(u=(y-n)/(u-t),l=Math.abs(u*l-r+(n-u*t))/Math.sqrt(u*u+1));l>h&&(k=q,h=l)}h>c?(M(a,b,d,c,e,f,k+d),M(a,b,d,c,e,k,g)):(e(a,b,a.length,f,b[f],b[f+1]),
e(a,b,a.length,m,b[m],b[m+1]))}function T(a,b,d,c,g){var h=b.coords,k=b.lengths,l=d?c?Q:V:c?V:O;d=f(d,c);if(!h.length)return a!==b&&(a.lengths.length=0,a.coords.length=0),a;if(!k.length)return l(a.coords,h,0,0,e(g,h[0]),m(g,h[1])),a!==b&&(a.lengths.length=0,a.coords.length=d),a;var q=g.scale;c=q[0];for(var q=q[1],r=0,t=0;t<k.length;t++){var n=k[t];a.lengths[t]=n;var u=e(g,h[r]),y=m(g,h[r+1]);l(a.coords,h,r,r,u,y);for(var r=r+d,v=1;v<n;v++,r+=d)u+=h[r]*c,y-=h[r+1]*q,l(a.coords,h,r,r,u,y)}a!==b&&(a.lengths.length=
k.length,a.coords.length=h.length);return a}Object.defineProperty(c,"__esModule",{value:!0});var N=l.getLogger("esri.tasks.support.optimizedFeatureSet"),S={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},O=function(a,b,d,c,e,f){a[d]=e;a[d+1]=f},V=function(a,b,d,c,e,f){a[d]=e;a[d+1]=f;a[d+2]=b[c+2]},Q=function(a,b,d,c,e,f){a[d]=e;a[d+1]=f;a[d+2]=b[c+2];a[d+3]=b[c+3]};c.quantizeX=b;c.quantizeY=a;c.hydrateX=e;c.hydrateY=m;c.convertToPoint=function(a,b,d){return a?
b?d?v(a):t(a):d?x(a):q(a):null};c.convertFromPoint=function(a,b,d){void 0===d&&(d=z(null!=b.z,null!=b.m));return d(a,b)};c.convertToMultipoint=A;c.convertFromMultipoint=B;c.convertToPolyline=D;c.convertToPolygon=E;c.convertFromPolygon=H;var J=[],P=[];c.convertFromFeature=function(a,b,d,c,e){J[0]=a;a=G(P,J,b,d,c,e)[0];J.length=P.length=0;return a};c.convertFromFeatures=G;c.convertToFeature=function(a,b,d,c){P[0]=a;I(J,P,b,d,c);a=J[0];J.length=P.length=0;return a};c.convertFromGeometry=function(a,b,
d){if(!a)return null;var c=new g.default;"hasZ"in a&&null==b&&(b=a.hasZ);"hasM"in a&&null==d&&(d=a.hasM);if(k.isPoint(a))return z(null!=b?b:null!=a.z,null!=d?d:null!=a.m)(c,a);if(k.isPolygon(a))return H(c,a,b,d);if(k.isPolyline(a))return C(c,a,f(b,d));if(k.isMultipoint(a))return B(c,a,f(b,d));N.error("convertFromGeometry:unknown-geometry",new n("Unable to parse unknown geometry type '"+a+"'"))};c.convertToGeometry=function(a,b,d,c){a=a&&("coords"in a?a:a.geometry);if(!a)return null;switch(b){case "esriGeometryPoint":return b=
q,d&&c?b=v:d?b=t:c&&(b=x),b(a);case "esriGeometryMultipoint":return A(a,d,c);case "esriGeometryPolyline":return D(a,d,c);case "esriGeometryPolygon":return E(a,d,c);default:N.error("convertToGeometry:unknown-geometry",new n("Unable to parse unknown geometry type '"+b+"'"))}};c.convertToFeatures=I;c.convertToFeatureSet=function(a){var b=a.objectIdFieldName,d=a.spatialReference,c=a.transform,e=a.fields,f=a.hasM,g=a.hasZ,m=a.geometryType,h=a.exceededTransferLimit;a={features:I([],a.features,m,g,f),fields:e,
geometryType:m,objectIdFieldName:b,spatialReference:d};c&&(a.transform=c);h&&(a.exceededTransferLimit=h);f&&(a.hasM=f);g&&(a.hasZ=g);return a};c.convertFromFeatureSet=function(a,b){var d=new h.default,c=a.hasM,e=a.hasZ,f=a.features,g=a.objectIdFieldName,m=a.spatialReference,k=a.geometryType,l=a.exceededTransferLimit,q=a.transform;d.fields=a.fields;d.geometryType=k;d.objectIdFieldName=g||b;d.spatialReference=m;if(!d.objectIdFieldName)return N.error(new n("optimized-features:invalid-objectIdFieldName",
"objectIdFieldName is missing")),d;f&&G(d.features,f,k,e,c,d.objectIdFieldName);l&&(d.exceededTransferLimit=l);c&&(d.hasM=c);e&&(d.hasZ=e);q&&(d.transform=q);return d};c.hydrateOptimizedFeatureSet=function(a){var b=a.transform,d=a.hasM,c=a.hasZ;if(!b)return a;for(var e=0,f=a.features;e<f.length;e++){var g=f[e];g.geometry&&T(g.geometry,g.geometry,d,c,b);g.centroid&&T(g.centroid,g.centroid,d,c,b)}a.transform=null;return a};c.quantizeOptimizedFeatureSet=function(a,b){var c=b.geometryType,e=b.features,
f=b.hasM,m=b.hasZ;if(!a)return b;for(var h=0;h<e.length;h++){var k=e[h],l=new d.default(new g.default,k.attributes);K(l.geometry,k.geometry,f,m,c,a);k.centroid&&(l.centroid=new g.default,K(l.centroid,k.centroid,f,m,"esriGeometryPoint",a));e[h]=l}b.transform=a;return b};c.quantizeOptimizedGeometry=K;c.quantizeOptimizedGeometryRemoveCollinear=function(d,c,e,g,m,h){d.lengths.length&&(d.lengths.length=0);d.coords.length&&(d.coords.length=0);if(!c||!c.coords.length)return null;m=S[m];var k=c.coords;c=
c.lengths;var l=f(e,g);e=e?g?Q:V:g?V:O;if(!c.length)return e(d.coords,k,0,0,b(h,k[0]),a(h,k[1])),d.lengths.length&&(d.lengths.length=0),d.coords.length=l,d;for(var q,r,t,n=0,u,y=0,v=0;v<c.length;v++){var x=c[v];if(!(x<m)){var w=0;u=y;g=q=b(h,k[n]);t=r=a(h,k[n+1]);e(d.coords,k,u,n,g,t);w++;for(var n=n+l,A=!1,z=0,p=0,B=1;B<x;B++,n+=l)if(g=b(h,k[n]),t=a(h,k[n+1]),g!==q||t!==r)q=g-q,r=t-r,A&&(0===z&&0===q||0===p&&0===r)?(z+=q,p+=r):(A=!0,z=q,p=r,u+=l,w++),e(d.coords,k,u,n,z,p),q=g,r=t;A&&(u+=l,e(d.coords,
k,u,n,z,p));w>=m&&(d.lengths.push(w),y=u)}}d.coords.length!==y&&(d.coords.length=y);return d.coords.length?d:null};c.generalizeOptimizedGeometry=function(a,b,d,c,e,g){a.lengths.length&&(a.lengths.length=0);a.coords.length&&(a.coords.length=0);if(!b||!b.coords.length)return null;e=S[e];var m=b.coords;b=b.lengths;var h=f(d,c);d=d?c?Q:V:c?V:O;if(!b.length)return d(a.coords,m,0,0,m[0],m[1]),a.lengths.length&&(a.lengths.length=0),a.coords.length=h,a;for(var k=c=0;k<b.length;k++){var l=b[k];if(!(l<e)){var q=
a.coords.length/h;M(a.coords,m,h,g,d,c,c+l*h);var r=a.coords.length/h-q;r>=e?a.lengths.push(r):a.coords.length=q*h}c+=l*h}return a.coords.length?a:null};c.getBoundsOptimizedGeometry=function(a,b,d,c){d=f(d,c);var e=c=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,m=Number.NEGATIVE_INFINITY;if(b&&b.coords){b=b.coords;for(var h=0;h<b.length;h+=d){var k=b[h],l=b[h+1];c=Math.min(c,k);g=Math.max(g,k);e=Math.min(e,l);m=Math.max(m,l)}}a[0]=c;a[1]=e;a[2]=g;a[3]=m;return a};c.getQuantizedBoundsOptimizedGeometry=
function(a,b,d,c){d=f(d,c);c=b.coords;var e=Number.POSITIVE_INFINITY,g=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY,k=0,l=0;for(b=b.lengths;l<b.length;l++)for(var q=b[l],r=c[k],t=c[k+1],e=Math.min(r,e),g=Math.min(t,g),m=Math.max(r,m),h=Math.max(t,h),k=k+d,n=1;n<q;n++,k+=d){var u=c[k],y=c[k+1],r=r+u,t=t+y;0>u&&(e=Math.min(e,r));0<u&&(m=Math.max(m,r));0>y?g=Math.min(g,t):0<y&&(h=Math.max(h,t))}a[0]=e;a[1]=g;a[2]=m;a[3]=h;return a};c.hydrateOptimizedGeometry=T})},"esri/arcade/treeAnalysis":function(){define(["require",
"exports"],function(p,c){function n(a,b,d,c){return"0"!==a.min&&d.length<Number(a.min)||"*"!==a.max&&d.length>Number(a.max)?-2:1}function l(a,b,d){if(null!==d.localScope&&void 0!==d.localScope[a.toLowerCase()]){var c=d.localScope[a.toLowerCase()];if("FormulaFunction"===c.type||"any"===c.type)return void 0===c.signature&&(c.signature={min:"0",max:"*"}),n(c.signature,a,b,d)}return void 0!==d.globalScope[a.toLowerCase()]&&(c=d.globalScope[a.toLowerCase()],"FormulaFunction"===c.type||"any"===c.type)?
(void 0===c.signature&&(c.signature={min:"0",max:"*"}),n(c.signature,a,b,d)):-1}function k(a,b){if(a)for(var c=0;c<a.length;c++)d(a[c],b)}function d(a,b){if(a&&!1!==b(a))switch(a.type){case "ArrayExpression":k(a.elements,b);break;case "AssignmentExpression":case "BinaryExpression":d(a.left,b);d(a.right,b);break;case "BlockStatement":k(a.body,b);break;case "CallExpression":d(a.callee,b);k(a.arguments,b);break;case "ConditionalExpression":d(a.test,b);d(a.alternate,b);d(a.consequent,b);break;case "DoWhileStatement":d(a.test,
b);d(a.body,b);break;case "ExpressionStatement":d(a.expression,b);break;case "ForInStatement":d(a.left,b);d(a.right,b);d(a.body,b);break;case "ForStatement":d(a.init,b);d(a.test,b);d(a.update,b);d(a.body,b);break;case "FunctionDeclaration":case "FunctionDeclaration":case "FunctionExpression":d(a.id,b);k(a.params,b);d(a.body,b);break;case "IfStatement":d(a.test,b);d(a.consequent,b);d(a.alternate,b);break;case "LogicalExpression":d(a.left,b);d(a.right,b);break;case "MemberExpression":d(a.object,b);
d(a.property,b);break;case "NewExpression":d(a.callee,b);k(a.arguments,b);break;case "ObjectExpression":k(a.properties,b);break;case "Program":k(a.body,b);break;case "Property":d(a.key,b);d(a.value,b);break;case "ReturnStatement":d(a.argument,b);break;case "UnaryExpression":d(a.argument,b);break;case "UpdateExpression":d(a.argument,b);break;case "VariableDeclaration":k(a.declarations,b);break;case "VariableDeclarator":d(a.id,b),d(a.init,b)}}function h(a,b){void 0===b&&(b=!0);var d=m(a,"SYNTAX","UNREOGNISED");
try{switch(a.type){case "VariableDeclarator":return null!==a.init&&"FunctionExpression"===a.init.type?m(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"):"Identifier"!==a.id.type?m(a,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==a.init?h(a.init,!1):"";case "VariableDeclaration":for(var c=0;c<a.declarations.length;c++)if(d=h(a.declarations[c],b),""!==d)return d;return"";case "ForInStatement":d=h(a.left,b);if(""!==d)break;if("VariableDeclaration"===a.left.type){if(1<a.left.declarations.length)return m(a,"SYNTAX",
"ONLY1VAR");if(null!==a.left.declarations[0].init)return m(a,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==a.left.type)return m(a,"SYNTAX","LEFTNOTVAR");d=h(a.right,b);if(""!==d)break;d=h(a.body,b);if(""!==d)break;return"";case "ForStatement":if(null!==a.test&&(d=h(a.test,b),""!==d))break;if(null!==a.init&&(d=h(a.init,b),""!==d))break;if(null!==a.update&&(d=h(a.update,b),""!==d))break;if(null!==a.body&&(d=h(a.body,b),""!==d))break;return"";case "ContinueStatement":return"";case "EmptyStatement":return"";
case "BreakStatement":return"";case "IfStatement":d=h(a.test,b);if(""!==d)break;if(null!==a.consequent&&(d=h(a.consequent,!1),""!==d))break;if(null!==a.alternate&&(d=h(a.alternate,!1),""!==d))break;return"";case "BlockStatement":for(var e=[],c=0;c<a.body.length;c++)"EmptyStatement"!==a.body[c].type&&e.push(a.body[c]);a.body=e;for(c=0;c<a.body.length;c++)if(d=h(a.body[c],b),""!==d)return d;return"";case "FunctionDeclaration":return!1===b?m(a,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==a.id.type?
m(a,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):h(a.body,!1);case "ReturnStatement":return null!==a.argument?h(a.argument,b):"";case "UpdateExpression":return"Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type?m(a,"SYNTAX","ASSIGNMENTTOVARSONLY"):h(a.argument,b);case "AssignmentExpression":if("Identifier"!==a.left.type&&"MemberExpression"!==a.left.type)return m(a,"SYNTAX","ASSIGNMENTTOVARSONLY");d=h(a.left,b);if(""!==d)break;switch(a.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;
default:return m(a,"SYNTAX","OPERATORNOTRECOGNISED")}return h(a.right,!1);case "ExpressionStatement":return h(a.expression,!1);case "Identifier":d="";break;case "MemberExpression":d=h(a.object,b);if(""!==d)break;return!0===a.computed?h(a.property,b):"";case "Literal":return"";case "CallExpression":if("Identifier"!==a.callee.type)return m(a,"SYNTAX","ONLYNODESSUPPORTED");d="";for(c=0;c<a.arguments.length;c++)if(d=h(a.arguments[c],b),""!==d)return d;return"";case "UnaryExpression":d=h(a.argument,b);
break;case "BinaryExpression":d=h(a.left,b);if(""!==d)break;d=h(a.right,b);if(""!==d)break;switch(a.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:return m(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":d=h(a.left,b);if(""!==d)break;d=h(a.right);if(""!==d)break;switch(a.operator){case "\x26\x26":case "||":break;default:return m(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";
case "ConditionalExpression":return m(a,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":d="";for(c=0;c<a.elements.length&&(d=h(a.elements[c],b),""===d);c++);break;case "ObjectExpression":d="";for(c=0;c<a.properties.length;c++){d="";if(null!==a.properties[c].key&&("Literal"!==a.properties[c].key.type&&"Identifier"!==a.properties[c].key.type&&(d=m(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===a.properties[c].key.type)){var e=a.properties[c].key,f="value"in e?e.value:null;"string"===typeof f||
f instanceof String||(d=m(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===d&&(d=h(a.properties[c],b));if(""!==d)break}break;case "Property":if("Literal"!==a.key.type&&"Identifier"!==a.key.type)return m(a,"SYNTAX","ONLYLITERAL");if("Identifier"!==a.key.type&&(d=h(a.key,b),""!==d))break;d=h(a.value,b)}return d}catch(E){throw E;}}function g(d,c){var e=m(d,"SYNTAX","UNREOGNISED"),f=null,h="";try{switch(d.type){case "VariableDeclarator":if(null!==d.init&&"FunctionExpression"===d.init.type)return m(d,"SYNTAX",
"FUNCTIONVARIABLEDECLARATOR");var k=null===d.init?"":g(d.init,c);if(""!==k)return k;"Identifier"===d.id.type&&(null===c.localScope?c.globalScope[d.id.name.toLowerCase()]={type:"any"}:c.localScope[d.id.name.toLowerCase()]={type:"any"});return"";case "FunctionDeclaration":f=b(d.id.name.toLowerCase(),d,c);h=a(d,c);if(""!==h)return h;if(null!==c.localScope)return m(d,"SYNTAX","GLOBALFUNCTIONSONLY");f.isnative=!1;c.globalScope[d.id.name.toLowerCase()]={type:"FormulaFunction",signature:[f]};return"";case "VariableDeclaration":for(var e=
"",q=0;q<d.declarations.length&&(e=g(d.declarations[q],c),""===e);q++);break;case "IfStatement":e=g(d.test,c);if(""!==e)break;if("AssignmentExpression"===d.test.type||"UpdateExpression"===d.test.type)return m(d.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");if(null!==d.consequent&&(e=g(d.consequent,c),""!==e))break;if(null!==d.alternate&&(e=g(d.alternate,c),""!==e))break;return"";case "EmptyStatement":return"";case "BlockStatement":for(q=0;q<d.body.length;q++)if(e=g(d.body[q],c),""!==e)return e;
return"";case "ReturnStatement":return null!==d.argument?g(d.argument,c):"";case "ForInStatement":if("VariableDeclaration"===d.left.type){if(1<d.left.declarations.length)return m(d,"SYNTAX","ONLY1VAR");if(null!==d.left.declarations[0].init)return m(d,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==d.left.type)return m(d,"SYNTAX","LEFTNOTVAR");e=g(d.left,c);if(""!==e)break;e=g(d.right,c);if(""!==e)break;e=g(d.body,c);if(""!==e)break;return"";case "ForStatement":if(null!==d.init&&(e=g(d.init,c),
""!==e))break;if(null!==d.test&&(e=g(d.test,c),""!==e))break;if(null!==d.body&&(e=g(d.body,c),""!==e))break;if(null!==d.update&&(e=g(d.update,c),""!==e))break;return"";case "BreakStatement":return"";case "ContinueStatement":return"";case "UpdateExpression":if("Identifier"!==d.argument.type&&"MemberExpression"!==d.argument.type)return m(d,"SYNTAX","ASSIGNMENTTOVARSONLY");var r=!1;if("MemberExpression"===d.argument.type)return g(d.argument,c);null!==c.localScope&&void 0!==c.localScope[d.argument.name.toLowerCase()]&&
(r=!0);void 0!==c.globalScope[d.argument.name.toLowerCase()]&&(r=!0);return!1===r?"Identifier "+d.argument.name+" has not been declared.":"";case "AssignmentExpression":if("Identifier"!==d.left.type&&"MemberExpression"!==d.left.type)return m(d,"SYNTAX","ASSIGNMENTTOVARSONLY");var t=g(d.right,c);if(""!==t)return t;r=!1;if("MemberExpression"===d.left.type)return t=g(d.left,c),""!==t?t:"";null!==c.localScope&&void 0!==c.localScope[d.left.name.toLowerCase()]&&(r=!0);void 0!==c.globalScope[d.left.name.toLowerCase()]&&
(r=!0);return!1===r?"Identifier "+d.left.name+" has not been declared.":"";case "ExpressionStatement":return g(d.expression,c);case "Identifier":var n=d.name.toLowerCase();if(null!==c.localScope&&void 0!==c.localScope[n])return"";e=void 0!==c.globalScope[n]?"":m(d,"SYNTAX","VARIABLENOTFOUND");break;case "MemberExpression":e=g(d.object,c);if(""!==e)break;return!0===d.computed?g(d.property,c):"";case "Literal":return"";case "CallExpression":if("Identifier"!==d.callee.type)return m(d,"SYNTAX","ONLYNODESSUPPORTED");
e="";for(q=0;q<d.arguments.length;q++)if(e=g(d.arguments[q],c),""!==e)return e;var u=l(d.callee.name,d.arguments,c);-1===u&&(e=m(d,"SYNTAX","NOTFOUND"));-2===u&&(e=m(d,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":e=g(d.argument,c);break;case "BinaryExpression":e=g(d.left,c);if(""!==e)break;e=g(d.right,c);if(""!==e)break;return"";case "LogicalExpression":e=g(d.left,c);if(""!==e)break;if("AssignmentExpression"===d.left.type||"UpdateExpression"===d.left.type)return m(d.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");
e=g(d.right,c);if(""!==e)break;return"AssignmentExpression"===d.right.type||"UpdateExpression"===d.right.type?m(d.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case "ConditionalExpression":return m(d,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":e="";for(q=0;q<d.elements.length&&(e=g(d.elements[q],c),""===e);q++);break;case "ObjectExpression":e="";for(q=0;q<d.properties.length;q++){e="";if(null!==d.properties[q].key&&("Literal"!==d.properties[q].key.type&&"Identifier"!==d.properties[q].key.type&&
(e=m(d,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===d.properties[q].key.type)){var v=d.properties[q].key,x="value"in v?v.value:null;"string"===typeof x||x instanceof String||(e=m(d,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===e&&(e=g(d.properties[q],c));if(""!==e)break}break;case "Property":if("Literal"!==d.key.type&&"Identifier"!==d.key.type)return m(d,"SYNTAX","ONLYLITERAL");if("Identifier"!==d.key.type&&(e=g(d.key,c),""!==e))break;e=g(d.value,c)}return e}catch(N){throw N;}}function f(a,
b){var c=!1,e=b.toLowerCase();d(a,function(a){if(c)return!1;"Identifier"===a.type&&a.name&&a.name.toLowerCase()===e&&(c=!0);return!0});return c}function b(a,b,d){d=[];if(void 0!==b.params&&null!==b.params)for(var c=0;c<b.params.length;c++)d.push("any");return{name:a,return:"any",params:d}}function a(a,b){b={globalScope:b.globalScope,localScope:{}};for(var d=0;d<a.params.length;d++)b.localScope[a.params[d].name.toLowerCase()]={type:"any"};return g(a.body,b)}function e(a,b,d,c){var e={};if(void 0===
a||null===a)a={};if(void 0===d||null===d)d={};e.infinity={type:"any"};e.textformatting={type:"any"};e.pi={type:"any"};for(var f in b)"sync"===c&&void 0!==b[f].min?e[f]={type:"FormulaFunction",signature:{min:b[f].min,max:b[f].max}}:"sync"!==c&&void 0!==b[f].fmin&&(e[f]={type:"FormulaFunction",signature:{min:b[f].fmin,max:b[f].fmax}});for(b=0;b<d.length;b++)f=d[b],e[f.name]={type:"FormulaFunction",signature:f};for(f in a)e[f]=a[f],e[f].type="any";return e}function m(a,b,d){var c="";switch(b){case "SYNTAX":c=
"Syntax Error: ";break;case "RUNTIME":c="Runtime Error: ";break;default:c="Syntax Error: "}try{switch(a.type){case "IfStatement":switch(d){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":c+=" Assignments not be made in logical tests";break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":c+=" Non Boolean used as Condition"}break;case "UpdateExpression":case "AssignmentExpression":switch(d){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":c+=" Assignments not be made in logical tests";break;case "ASSIGNMENTTOVARSONLY":c+=
" Assignments can only be made to identifiers"}break;case "ExpressionStatement":c+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(d){case "GLOBALFUNCTIONSONLY":c+=" Functions cannot be declared as variables";break;case "FUNCTIONMUSTHAVEIDENTIFIER":c+=" Function Definition must have an identifier"}break;case "VariableDeclaration":c+=" Only 1 variable can be declared at a time";break;case "VariableDeclarator":switch(d){case "FUNCTIONVARIABLEDECLARATOR":c+=" Functions cannot be declared as variables";
break;case "VARIABLEMUSTHAVEIDENTIFIER":c+=" Variable Definition must have an identifier"}break;case "Identifier":c+=" Identifier Not Found. ";c+=a.name;break;case "ObjectExpression":switch(d){case "OBJECTPROPERTYMUSTBESTRING":c+=" Property name must be a string"}break;case "ForStatement":switch(d){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":c+=" Non Boolean used as Condition"}break;case "ForInStatement":switch(d){case "ONLY1VAR":c+=" Can only declare 1 var for use with IN";break;case "CANNOTDECLAREVAL":c+=
" Can only declare value for use with IN";break;case "LEFTNOVAR":c+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":c+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":c+="This type cannot be used in an IN loop"}break;case "MemberExpression":switch(d){case "PROPERTYNOTFOUND":c+="Cannot find member property. ";c+=!1===a.computed?"Identifier"===a.property.type?a.property.name:"":"";break;case "OUTOFBOUNDS":c+="Out of Bounds. ";c+=!1===a.computed?
"Identifier"===a.property.type?a.property.name:"":"";break;case "NOTFOUND":c+="Cannot call member method on null. ";c+=!1===a.computed?"Identifier"===a.property.type?a.property.name:"":"";break;case "INVALIDTYPE":c+="Cannot call member property on object of this type. ",c+=!1===a.computed?"Identifier"===a.property.type?a.property.name:"":""}break;case "Property":switch(d){case "ONLYLITERAL":c+="Property names must be literals or identifiers"}break;case "Literal":break;case "CallExpression":switch(d){case "WRONGSIGNATURE":c+=
"Function signature does not match: ";c+="Identifier"===a.callee.type?a.callee.name:"";break;case "ONLYNODESUPPORTED":c+="Functions must be declared.";c+="Identifier"===a.callee.type?a.callee.name:"";break;case "NOTAFUNCTION":c+="Not a Function: ";c+="Identifier"===a.callee.type?a.callee.name:"";break;case "NOTFOUND":c+="Function Not Found: "+("Identifier"===a.callee.type?a.callee.name:"")}break;case "UnaryExpression":switch(d){case "NOTSUPPORTEDUNARYOPERATOR":c+="Operator "+a.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";
break;case "NOTSUPPORTEDTYPE":c+="Unary operator "+a.operator+" cannot be used with this argument."}case "BinaryExpression":switch(d){case "OPERATORNOTRECOGNISED":c+="Binary Operator not recognised "+a.operator}break;case "LogicalExpression":switch(d){case "ONLYBOOLEAN":c+="Operator "+a.operator+" cannot be used. Only || or \x26\x26 are allowed values";break;case "ONLYORORAND":c+="Logical Expression "+a.operator+" being applied to parameters that are not boolean."}break;case "ConditionalExpression":c+=
"Conditional statements not supported.";break;case "ArrayExpression":switch(d){case "FUNCTIONCONTEXTILLEGAL":c+=" Cannot Put Function inside Array."}break;default:c+="Expression contains unrecognised code structures."}}catch(D){throw D;}return c}function q(a,b,d){return{line:a.loc.start.line,character:a.loc.start.column,reason:m(a,b,d)}}function u(a,b,d,c,e){void 0===e&&(e=!0);b={globalScope:b.globalScope,localScope:{}};for(e=0;e<a.params.length;e++)b.localScope[a.params[e].name.toLowerCase()]={type:"any"};
t(a.body,b,d,c,!1)}function t(a,d,c,e,f){void 0===f&&(f=!0);if(null===a)throw Error("Unnexpexted Expression Syntax");var g=null;try{switch(a.type){case "VariableDeclarator":if(null!==a.init&&"FunctionExpression"===a.init.type){e.push(q(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"));break}"Identifier"!==a.id.type?e.push(q(a,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):(a.id.name.toLowerCase(),null===d.localScope?d.globalScope[a.id.name.toLowerCase()]={type:"any"}:d.localScope[a.id.name.toLowerCase()]={type:"any"});
null!==a.init&&t(a.init,d,c,e,f);break;case "FunctionDeclaration":!1===f&&e.push(q(a,"SYNTAX","GLOBALFUNCTIONSONLY"));"Identifier"!==a.id.type&&e.push(q(a,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"));g=b("",a,d);u(a,d,c,e,f);null!==d.localScope&&e.push(q(a,"SYNTAX","GLOBALFUNCTIONSONLY"));g.isnative=!1;"Identifier"===a.id.type&&(d.globalScope[a.id.name.toLowerCase()]={type:"FormulaFunction",signature:[g]});break;case "VariableDeclaration":for(var m=0;m<a.declarations.length;m++)t(a.declarations[m],d,c,
e,f);break;case "IfStatement":null!==a.test&&(t(a.test,d,c,e,f),"AssignmentExpression"!==a.test.type&&"UpdateExpression"!==a.test.type||e.push(q(a.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));null!==a.consequent&&t(a.consequent,d,c,e,f);null!==a.alternate&&t(a.alternate,d,c,e,f);break;case "EmptyStatement":break;case "BlockStatement":if(null!==a.body)for(m=0;m<a.body.length;m++)t(a.body[m],d,c,e,f);break;case "ReturnStatement":null!==a.argument&&t(a.argument,d,c,e,f);break;case "ForInStatement":"VariableDeclaration"===
a.left.type?(1<a.left.declarations.length&&e.push(q(a,"SYNTAX","ONLY1VAR")),null!==a.left.declarations[0].init&&e.push(q(a,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==a.left.type&&e.push(q(a,"SYNTAX","LEFTNOTVAR"));t(a.left,d,c,e,f);t(a.right,d,c,e,f);t(a.body,d,c,e,f);break;case "ForStatement":null!==a.init&&t(a.init,d,c,e,f);null!==a.test&&t(a.test,d,c,e,f);null!==a.body&&t(a.body,d,c,e,f);null!==a.update&&t(a.update,d,c,e,f);break;case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":"Identifier"!==
a.argument.type&&"MemberExpression"!==a.argument.type?e.push(q(a,"SYNTAX","ASSIGNMENTTOVARSONLY")):("Identifier"===a.argument.type&&(g=!1,!1===c&&(null!==d.localScope&&void 0!==d.localScope[a.argument.name.toLowerCase()]&&(g=!0),void 0!==d.globalScope[a.argument.name.toLowerCase()]&&(g=!0),!1===g&&e.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Identifier "+a.argument.name+" has not been declared."}))),"MemberExpression"===a.argument.type&&t(a.argument,d,c,
e,f));break;case "AssignmentExpression":"Identifier"!==a.left.type&&"MemberExpression"!==a.left.type&&e.push(q(a,"SYNTAX","ASSIGNMENTTOVARSONLY"));switch(a.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:e.push(q(a,"SYNTAX","OPERATORNOTRECOGNISED"))}t(a.right,d,c,e,f);g=!1;"Identifier"===a.left.type&&(null!==d.localScope&&void 0!==d.localScope[a.left.name.toLowerCase()]&&(g=!0),void 0!==d.globalScope[a.left.name.toLowerCase()]&&(g=!0),!1===c&&!1===
g&&e.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Identifier "+a.left.name+" has not been declared."}));"MemberExpression"===a.left.type&&t(a.left,d,c,e,f);break;case "ExpressionStatement":t(a.expression,d,c,e,f);break;case "Identifier":var h=a.name.toLowerCase();if(null!==d.localScope&&void 0!==d.localScope[h])break;if(void 0!==d.globalScope[h])break;!1===c&&e.push(q(a,"SYNTAX","VARIABLENOTFOUND"));break;case "MemberExpression":t(a.object,d,c,e,f);!0===a.computed&&
t(a.property,d,c,e,f);break;case "Literal":return"";case "CallExpression":"Identifier"!==a.callee.type&&e.push(q(a,"SYNTAX","ONLYNODESSUPPORTED"));for(m=0;m<a.arguments.length;m++)t(a.arguments[m],d,c,e,f);if("Identifier"===a.callee.type){var k=l(a.callee.name,a.arguments,d);!1===c&&-1===k&&e.push(q(a,"SYNTAX","NOTFOUND"));-2===k&&e.push(q(a,"SYNTAX","WRONGSIGNATURE"))}break;case "UnaryExpression":t(a.argument,d,c,e,f);break;case "BinaryExpression":t(a.left,d,c,e,f);t(a.right,d,c,e,f);switch(a.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;
default:e.push(q(a,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(a.operator){case "\x26\x26":case "||":break;default:e.push(q(a,"SYNTAX","OPERATORNOTRECOGNISED"))}t(a.left,d,c,e,f);"AssignmentExpression"!==a.left.type&&"UpdateExpression"!==a.left.type||e.push(q(a,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));t(a.right,d,c,e,f);"AssignmentExpression"!==a.right.type&&"UpdateExpression"!==a.right.type||e.push(q(a,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));break;case "ConditionalExpression":e.push(q(a,
"SYNTAX","NOTSUPPORTED"));break;case "ArrayExpression":for(m=0;m<a.elements.length;m++)t(a.elements[m],d,c,e,f);break;case "ObjectExpression":for(m=0;m<a.properties.length;m++)t(a.properties[m],d,c,e,f);break;case "Property":"Literal"!==a.key.type&&"Identifier"!==a.key.type&&e.push(q(a,"SYNTAX","ONLYLITERAL"));"Literal"===a.key.type&&t(a.key,d,c,e,f);t(a.value,d,c,e,f);break;default:e.push(q(a,"SYNTAX","UNRECOGNISED"))}}catch(I){e.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,
reason:"Unnexpected Syntax"})}}function r(a,b){var c=[];d(a,function(a){"CallExpression"===a.type&&"Identifier"===a.callee.type&&c.push(a.callee.name.toLowerCase());return!0});return c}Object.defineProperty(c,"__esModule",{value:!0});c.functionDecls={concatenate:{min:"0",max:"*"},split:{min:"2",max:"4"},guid:{min:"0",max:"1"},today:{min:"0",max:"0"},angle:{min:"2",max:"3"},bearing:{min:"2",max:"3"},urlencode:{min:"1",max:"1"},now:{min:"0",max:"0"},timestamp:{min:"0",max:"0"},day:{min:"1",max:"1"},
month:{min:"1",max:"1"},year:{min:"1",max:"1"},hour:{min:"1",max:"1"},second:{min:"1",max:"1"},millisecond:{min:"1",max:"1"},minute:{min:"1",max:"1"},weekday:{min:"1",max:"1"},toutc:{min:"1",max:"1"},tolocal:{min:"1",max:"1"},date:{min:"0",max:"7"},datediff:{min:"2",max:"3"},dateadd:{min:"2",max:"3"},trim:{min:"1",max:"1"},text:{min:"1",max:"2"},left:{min:"2",max:"2"},right:{min:"2",max:"2"},mid:{min:"2",max:"3"},upper:{min:"1",max:"1"},proper:{min:"1",max:"2"},lower:{min:"1",max:"1"},find:{min:"2",
max:"3"},iif:{min:"3",max:"3"},decode:{min:"2",max:"*"},when:{min:"2",max:"*"},defaultvalue:{min:"2",max:"2"},isempty:{min:"1",max:"1"},domaincode:{min:"2",max:"4"},domainname:{min:"2",max:"4"},polygon:{min:"1",max:"1"},point:{min:"1",max:"1"},polyline:{min:"1",max:"1"},extent:{min:"1",max:"1"},multipoint:{min:"1",max:"1"},ringisclockwise:{min:"1",max:"1"},geometry:{min:"1",max:"1"},count:{min:"0",max:"*"},number:{min:"1",max:"2"},acos:{min:"1",max:"1"},asin:{min:"1",max:"1"},atan:{min:"1",max:"1"},
atan2:{min:"2",max:"2"},ceil:{min:"1",max:"2"},floor:{min:"1",max:"2"},round:{min:"1",max:"2"},cos:{min:"1",max:"1"},exp:{min:"1",max:"1"},log:{min:"1",max:"1"},min:{min:"0",max:"*"},constrain:{min:"3",max:"3"},console:{min:"0",max:"*"},max:{min:"0",max:"*"},pow:{min:"2",max:"2"},random:{min:"0",max:"0"},sqrt:{min:"1",max:"1"},sin:{min:"1",max:"1"},tan:{min:"1",max:"1"},abs:{min:"1",max:"1"},isnan:{min:"1",max:"1"},stdev:{min:"0",max:"*"},average:{min:"0",max:"*"},mean:{min:"0",max:"*"},sum:{min:"0",
max:"*"},variance:{min:"0",max:"*"},distinct:{min:"0",max:"*"},first:{min:"1",max:"1"},top:{min:"2",max:"2"},boolean:{min:"1",max:"1"},dictionary:{min:"0",max:"*"},typeof:{min:"1",max:"1"},reverse:{min:"1",max:"1"},replace:{min:"3",max:"4"},sort:{min:"1",max:"2"},feature:{min:"1",max:"*"},haskey:{min:"2",max:"2"},indexof:{min:"2",max:"2"},disjoint:{min:"2",max:"2"},intersects:{min:"2",max:"2"},touches:{min:"2",max:"2"},crosses:{min:"2",max:"2"},within:{min:"2",max:"2"},contains:{min:"2",max:"2"},
overlaps:{min:"2",max:"2"},equals:{min:"2",max:"2"},relate:{min:"3",max:"3"},intersection:{min:"2",max:"2"},union:{min:"1",max:"2"},difference:{min:"2",max:"2"},symmetricdifference:{min:"2",max:"2"},clip:{min:"2",max:"2"},cut:{min:"2",max:"2"},area:{min:"1",max:"2"},areageodetic:{min:"1",max:"2"},length:{min:"1",max:"2"},lengthgeodetic:{min:"1",max:"2"},distance:{min:"2",max:"3"},densify:{min:"2",max:"3"},densifygeodetic:{min:"2",max:"3"},generalize:{min:"2",max:"4"},buffer:{min:"2",max:"3"},buffergeodetic:{min:"2",
max:"3"},offset:{min:"2",max:"6"},rotate:{min:"2",max:"3"},issimple:{min:"1",max:"1"},simplify:{min:"1",max:"1"},centroid:{min:"1",max:"1"},multiparttosinglepart:{min:"1",max:"1"},setgeometry:{min:"2",max:"2"}};for(var x in c.functionDecls)c.functionDecls[x].fmin=c.functionDecls[x].min,c.functionDecls[x].fmax=c.functionDecls[x].max;var w="featureset featuresetbyid featuresetbyname featuresetbyurl attachments featuresetbyportalitem".split(" "),v="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length lengthgeodetic distance densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple simplify multiparttosinglepart".split(" ");
c.addFunctionDeclaration=function(a,b){var d=c.functionDecls[a.name.toLowerCase()];void 0===d?"sync"===b?c.functionDecls[a.name.toLowerCase()]={min:a.min,max:a.max}:c.functionDecls[a.name.toLowerCase()]={fmin:a.min,fmax:a.max}:"sync"===b?(d.min=a.min,d.max=a.max):(d.fmin=a.min,d.fmax=a.max)};c.checkFunctionSignature=n;c.findFunction=l;c.walk=d;c.validateLanguageNode=h;c.testValidityOfExpression=g;c.referencesMember=f;c.referencesFunction=function(a,b){var c=!1,e=b.toLowerCase();d(a,function(a){return c?
!1:"CallExpression"===a.type&&"Identifier"===a.callee.type&&a.callee.name&&a.callee.name.toLowerCase()===e?(c=!0,!1):!0});return c};c.findFieldLiterals=function(a,b){var c=[];d(a,function(a){if("MemberExpression"!==a.type||"Identifier"!==a.object.type)return!0;!1===a.computed&&a.object&&a.object.name&&a.property&&"Identifier"===a.property.type&&a.property.name?c.push(a.object.name.toLowerCase()+"."+a.property.name.toLowerCase()):a.object&&a.object.name&&a.property&&"Literal"===a.property.type&&"string"===
typeof a.property.value&&c.push(a.object.name.toLowerCase()+"."+a.property.value.toString().toLowerCase());return!1});return c};c.extractFunctionDeclaration=b;c.validateFunction=a;c.constructGlobalScope=e;c.validateScript=function(a,b,d,f){void 0===d&&(d="async");void 0===f&&(f=c.functionDecls);b={globalScope:e(b.vars,f,b.customFunctions,d),localScope:null};return g(a.body[0].body,b)};c.validateLanguage=function(a){return"BlockStatement"!==a.body[0].body.type?"Invalid formula content.":h(a.body[0].body)};
c.nodeErrorMessage=m;c.makeError=q;c.extractAllIssuesInFunction=u;c.extractAllIssues=t;c.checkScript=function(a,b,d,f,g){void 0===f&&(f="async");void 0===g&&(g=c.functionDecls);var m=[];if("BlockStatement"!==a.body[0].body.type)return[{line:0,character:0,reason:"Invalid Body"}];if(null===b||void 0===b)b={vars:{},customFunctions:[]};b={globalScope:e(b.vars,g,b.customFunctions,f),localScope:null};try{t(a.body[0].body,b,d,m)}catch(E){}return m};c.findFunctionCalls=r;c.findScriptDependencies=function(a,
b){void 0===b&&(b=[]);var d=null;if(void 0===a.usesFeatureSet){null===d&&(d=r(a,!1));a.usesFeatureSet=!1;for(var c=0;c<d.length;c++)-1<w.indexOf(d[c])&&(a.usesFeatureSet=!0,a.isAsync=!0);if(!1===a.usesFeatureSet&&b&&0<b.length)for(c=0;c<b.length;c++)if(f(a,b[c])){a.usesFeatureSet=!0;a.isAsync=!0;break}}void 0===a.isAsync&&(a.isAsync=!1);if(void 0===a.usesGeometry)for(a.usesGeometry=!1,null===d&&(d=r(a,!1)),c=0;c<d.length;c++)-1<v.indexOf(d[c])&&(a.usesGeometry=!0)};c.scriptUsesFeatureSet=function(a){a=
r(a,!1);for(var b=0;b<a.length;b++)if(-1<w.indexOf(a[b]))return!0;return!1}})},"esri/arcade/functions/date":function(){define(["require","exports","../../moment","../languageUtils"],function(p,c,n,l){function k(d){return null===d?d:isNaN(d.getTime())?null:d}Object.defineProperty(c,"__esModule",{value:!0});c.registerFunctions=function(d,c){d.today=function(d,f){return c(d,f,function(b,a,d){l.pcCheck(d,0,0);b=new Date;b.setHours(0,0,0,0);return b})};d.now=function(d,f){return c(d,f,function(b,a,d){l.pcCheck(d,
0,0);return new Date})};d.timestamp=function(d,f){return c(d,f,function(b,a,d){l.pcCheck(d,0,0);b=new Date;return b=new Date(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds())})};d.toutc=function(d,f){return c(d,f,function(b,a,d){l.pcCheck(d,1,1);b=l.toDate(d[0]);return null===b?null:new Date(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds())})};d.tolocal=
function(d,f){return c(d,f,function(b,a,d){l.pcCheck(d,1,1);b=l.toDate(d[0]);return null===b?null:n.utc([b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds(),b.getMilliseconds()]).toDate()})};d.day=function(d,f){return c(d,f,function(b,a,d){l.pcCheck(d,1,1);b=l.toDate(d[0]);return null===b?NaN:b.getDate()})};d.month=function(d,f){return c(d,f,function(b,a,d){l.pcCheck(d,1,1);b=l.toDate(d[0]);return null===b?NaN:b.getMonth()})};d.year=function(d,f){return c(d,f,function(b,
a,d){l.pcCheck(d,1,1);b=l.toDate(d[0]);return null===b?NaN:b.getFullYear()})};d.hour=function(d,f){return c(d,f,function(b,a,d){l.pcCheck(d,1,1);b=l.toDate(d[0]);return null===b?NaN:b.getHours()})};d.second=function(d,f){return c(d,f,function(b,a,d){l.pcCheck(d,1,1);b=l.toDate(d[0]);return null===b?NaN:b.getSeconds()})};d.millisecond=function(d,f){return c(d,f,function(b,a,d){l.pcCheck(d,1,1);b=l.toDate(d[0]);return null===b?NaN:b.getMilliseconds()})};d.minute=function(d,f){return c(d,f,function(b,
a,d){l.pcCheck(d,1,1);b=l.toDate(d[0]);return null===b?NaN:b.getMinutes()})};d.weekday=function(d,f){return c(d,f,function(b,a,d){l.pcCheck(d,1,1);b=l.toDate(d[0]);return null===b?NaN:b.getDay()})};d.date=function(d,f){return c(d,f,function(b,a,d){l.pcCheck(d,0,7);if(3===d.length)return k(new Date(l.toNumber(d[0]),l.toNumber(d[1]),l.toNumber(d[2]),0,0,0,0));if(4===d.length)return k(new Date(l.toNumber(d[0]),l.toNumber(d[1]),l.toNumber(d[2]),l.toNumber(d[3]),0,0,0));if(5===d.length)return k(new Date(l.toNumber(d[0]),
l.toNumber(d[1]),l.toNumber(d[2]),l.toNumber(d[3]),l.toNumber(d[4]),0,0));if(6===d.length)return k(new Date(l.toNumber(d[0]),l.toNumber(d[1]),l.toNumber(d[2]),l.toNumber(d[3]),l.toNumber(d[4]),l.toNumber(d[5]),0));if(7===d.length)return k(new Date(l.toNumber(d[0]),l.toNumber(d[1]),l.toNumber(d[2]),l.toNumber(d[3]),l.toNumber(d[4]),l.toNumber(d[5]),l.toNumber(d[6])));if(2===d.length){b=l.toString(d[1]);if(""===b)return null;b=l.standardiseDateFormat(b);d=n(l.toString(d[0]),b,!0);return!0===d.isValid()?
d.toDate():null}if(1===d.length){if(l.isString(d[0])&&""===d[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;b=l.toNumber(d[0]);return!1===isNaN(b)?k(new Date(b)):l.toDate(d[0])}if(0===d.length)return new Date})};d.datediff=function(d,f){return c(d,f,function(b,a,d){l.pcCheck(d,2,3);b=l.toDateM(d[0]);a=l.toDateM(d[1]);if(null===b||null===a)return NaN;switch(l.toString(d[2]).toLowerCase()){case "days":case "day":case "d":return b.diff(a,"days",!0);case "months":case "month":return b.diff(a,
"months",!0);case "minutes":case "minute":case "m":return"M"===d[2]?b.diff(a,"months",!0):b.diff(a,"minutes",!0);case "seconds":case "second":case "s":return b.diff(a,"seconds",!0);case "milliseconds":case "millisecond":case "ms":return b.diff(a);case "hours":case "hour":case "h":return b.diff(a,"hours",!0);case "years":case "year":case "y":return b.diff(a,"years",!0);default:return b.diff(a)}})};d.dateadd=function(d,f){return c(d,f,function(b,a,d){l.pcCheck(d,2,3);b=l.toDateM(d[0]);if(null===b)return null;
a="milliseconds";switch(l.toString(d[2]).toLowerCase()){case "days":case "day":case "d":a="days";break;case "months":case "month":a="months";break;case "minutes":case "minute":case "m":a="M"===d[2]?"months":"minutes";break;case "seconds":case "second":case "s":a="seconds";break;case "milliseconds":case "millisecond":case "ms":a="milliseconds";break;case "hours":case "hour":case "h":a="hours";break;case "years":case "year":case "y":a="years"}b.add(l.toNumber(d[1]),a);return b.toDate()})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../Dictionary ../Feature ../ImmutablePointArray ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ./centroid ../../geometry/support/jsonUtils ../../geometry/support/coordsUtils".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u){Object.defineProperty(c,"__esModule",{value:!0});c.registerFunctions=function(c,r){c.ringisclockwise=function(a,c){return r(a,c,function(a,c,e){d.pcCheck(e,1,1);a=[];var f=c=!1;if(null===e[0])return!1;if(d.isArray(e[0])){for(var g=0,m=e[0];g<m.length;g++){var h=m[g];if(h instanceof b)a.push(h.hasZ?h.hasM?[h.x,h.y,h.z,h.m]:[h.x,h.y,h.z]:[h.x,h.y]);else throw Error("Invalid Argument");}0<a.length&&(c=e[0][0].hasZ,f=e[0][0].hasM)}else if(e[0]instanceof k)a=e[0]._elements,
0<a.length&&(c=e[0]._hasZ,f=e[0]._hasM);else if(d.isImmutableArray(e[0])){g=0;for(m=e[0].toArray();g<m.length;g++)if(h=m[g],h instanceof b)a.push(h.hasZ?h.hasM?[h.x,h.y,h.z,h.m]:[h.x,h.y,h.z]:[h.x,h.y]);else throw Error("Invalid Argument");0<a.length&&(c=e[0].get(0).hasZ,f=e[0].get(0).hasM)}else throw Error("Invalid Argument");return 3>a.length?!1:u.isClockwise(a,f,c)})};c.polygon=function(b,c){return r(b,c,function(c,e,f){d.pcCheck(f,1,1);c=null;if(f[0]instanceof n){if(c=d.fixSpatialReference(l.parseGeometryFromDictionary(f[0]),
b.spatialReference),!1===c instanceof a)throw Error("Illegal Parameter");}else c=f[0]instanceof a?q.fromJSON(f[0].toJSON()):d.fixSpatialReference(new a(JSON.parse(f[0])),b.spatialReference);if(null!==c&&!1===c.spatialReference.equals(b.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return d.fixNullGeometry(c)})};c.polyline=function(a,b){return r(a,b,function(b,c,f){d.pcCheck(f,1,1);b=null;if(f[0]instanceof n){if(b=d.fixSpatialReference(l.parseGeometryFromDictionary(f[0]),
a.spatialReference),!1===b instanceof e)throw Error("Illegal Parameter");}else b=f[0]instanceof e?q.fromJSON(f[0].toJSON()):d.fixSpatialReference(new e(JSON.parse(f[0])),a.spatialReference);if(null!==b&&!1===b.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return d.fixNullGeometry(b)})};c.point=function(a,c){return r(a,c,function(c,e,f){d.pcCheck(f,1,1);c=null;if(f[0]instanceof n){if(c=d.fixSpatialReference(l.parseGeometryFromDictionary(f[0]),
a.spatialReference),!1===c instanceof b)throw Error("Illegal Parameter");}else c=f[0]instanceof b?q.fromJSON(f[0].toJSON()):d.fixSpatialReference(new b(JSON.parse(f[0])),a.spatialReference);if(null!==c&&!1===c.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return d.fixNullGeometry(c)})};c.multipoint=function(a,b){return r(a,b,function(b,c,e){d.pcCheck(e,1,1);b=null;if(e[0]instanceof n){if(b=
d.fixSpatialReference(l.parseGeometryFromDictionary(e[0]),a.spatialReference),!1===b instanceof f)throw Error("Illegal Parameter");}else b=e[0]instanceof f?q.fromJSON(e[0].toJSON()):d.fixSpatialReference(new f(JSON.parse(e[0])),a.spatialReference);if(null!==b&&!1===b.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return d.fixNullGeometry(b)})};c.extent=function(c,g){return r(c,g,function(g,
m,k){k=d.autoCastFeatureToGeometry(k);d.pcCheck(k,1,1);g=null;k[0]instanceof n?g=d.fixSpatialReference(l.parseGeometryFromDictionary(k[0]),c.spatialReference):k[0]instanceof b?(g={xmin:k[0].x,ymin:k[0].y,xmax:k[0].x,ymax:k[0].y,spatialReference:k[0].spatialReference.toJSON()},k[0].hasZ?(g.zmin=k[0].z,g.zmax=k[0].z):k[0].hasM&&(g.mmin=k[0].m,g.mmax=k[0].m),g=q.fromJSON(g)):g=k[0]instanceof a?q.fromJSON(k[0].extent.toJSON()):k[0]instanceof e?q.fromJSON(k[0].extent.toJSON()):k[0]instanceof f?q.fromJSON(k[0].extent.toJSON()):
k[0]instanceof h?q.fromJSON(k[0].toJSON()):d.fixSpatialReference(new h(JSON.parse(k[0])),c.spatialReference);if(null!==g&&!1===g.spatialReference.equals(c.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return d.fixNullGeometry(g)})};c.geometry=function(a,b){return r(a,b,function(b,c,e){d.pcCheck(e,1,1);b=null;b=e[0]instanceof l?d.fixSpatialReference(e[0].geometry(),a.spatialReference):e[0]instanceof n?d.fixSpatialReference(l.parseGeometryFromDictionary(e[0]),
a.spatialReference):d.fixSpatialReference(q.fromJSON(JSON.parse(e[0])),a.spatialReference);if(null!==b&&!1===b.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return d.fixNullGeometry(b)})};c.setgeometry=function(a,b){return r(a,b,function(a,b,c){d.pcCheck(c,2,2);if(c[0]instanceof l){if(!0===c[0].immutable)throw Error("Feature is Immutable");if(c[1]instanceof g||null===c[1])c[0]._geometry=c[1];
else throw Error("Illegal Argument");}else throw Error("Illegal Argument");return d.voidOperation})};c.feature=function(a,b){return r(a,b,function(b,c,e){if(0===e.length)throw Error("Missing Parameters");b=null;if(1===e.length)if(d.isString(e[0]))b=l.fromJson(JSON.parse(e[0]));else if(e[0]instanceof l)b=l.createFromArcadeFeature(e[0]);else if(e[0]instanceof g)b=l.createFromGraphicLikeObject(e[0],null,null);else if(e[0]instanceof n)b=e[0].hasField("geometry")?e[0].field("geometry"):null,c=e[0].hasField("attributes")?
e[0].field("attributes"):null,null!==b&&b instanceof n&&(b=l.parseGeometryFromDictionary(b)),null!==c&&(c=l.parseAttributesFromDictionary(c)),b=l.createFromGraphicLikeObject(b,c,null);else throw Error("Illegal Argument");else{if(2===e.length){c=b=null;if(null!==e[0])if(e[0]instanceof g)b=e[0];else if(b instanceof n)b=l.parseGeometryFromDictionary(e[0]);else throw Error("Illegal Argument");if(null!==e[1])if(e[1]instanceof n)c=l.parseAttributesFromDictionary(e[1]);else throw Error("Illegal Argument");
}else{b=null;c={};if(null!==e[0])if(e[0]instanceof g)b=e[0];else if(b instanceof n)b=l.parseGeometryFromDictionary(e[0]);else throw Error("Illegal Argument");for(var f=1;f<e.length;f+=2){var m=d.toString(e[f]),h=e[f+1];if(null===h||void 0===h||d.isString(h)||isNaN(h)||d.isDate(h)||d.isNumber(h)||d.isBoolean(h)){if(d.isFunctionParameter(h)||!1===d.isSimpleType(h))throw Error("Illegal Argument");c[m]=h===d.voidOperation?null:h}else throw Error("Illegal Argument");}}b=l.createFromGraphicLikeObject(b,
c,null)}b._geometry=d.fixSpatialReference(b.geometry(),a.spatialReference);b.immutable=!1;return b})};c.dictionary=function(a,b){return r(a,b,function(a,b,c){if(0===c.length)throw Error("Missing Parameters");if(0!==c.length%2)throw Error("Missing Parameters");a={};for(b=0;b<c.length;b+=2){var e=d.toString(c[b]),f=c[b+1];if(null===f||void 0===f||d.isString(f)||isNaN(f)||d.isDate(f)||d.isNumber(f)||d.isBoolean(f)||d.isArray(f)||d.isImmutableArray(f)){if(d.isFunctionParameter(f))throw Error("Illegal Argument");
a[e]=f===d.voidOperation?null:f}else throw Error("Illegal Argument");}c=new n(a);c.immutable=!1;return c})};c.haskey=function(a,b){return r(a,b,function(a,b,c){d.pcCheck(c,2,2);a=d.toString(c[1]);if(c[0]instanceof l||c[0]instanceof n)return c[0].hasField(a);throw Error("Illegal Argument");})};c.indexof=function(a,b){return r(a,b,function(a,b,c){d.pcCheck(c,2,2);a=c[1];if(d.isArray(c[0])){for(b=0;b<c[0].length;b++)if(d.equalityTest(a,c[0][b]))return b;return-1}if(d.isImmutableArray(c[0])){var e=c[0].length();
for(b=0;b<e;b++)if(d.equalityTest(a,c[0].get(b)))return b;return-1}throw Error("Illegal Argument");})};c.angle=function(a,c){return r(a,c,function(a,c,e){e=d.autoCastFeatureToGeometry(e);d.pcCheck(e,2,3);if(!(e[0]instanceof b))throw Error("Illegal Argument");if(!(e[1]instanceof b))throw Error("Illegal Argument");if(2<e.length&&!(e[2]instanceof b))throw Error("Illegal Argument");return 2===e.length?m.angle2D(e[0],e[1]):m.angleBetween2D(e[0],e[1],e[2])})};c.bearing=function(a,c){return r(a,c,function(a,
c,e){e=d.autoCastFeatureToGeometry(e);d.pcCheck(e,2,3);if(!(e[0]instanceof b))throw Error("Illegal Argument");if(!(e[1]instanceof b))throw Error("Illegal Argument");if(2<e.length&&!(e[2]instanceof b))throw Error("Illegal Argument");return 2===e.length?m.bearing2D(e[0],e[1]):m.bearingBetween2D(e[0],e[1],e[2])})}}})},"esri/arcade/functions/centroid":function(){define(["require","exports","../../geometry/Point"],function(p,c,n){function l(d,b,a){var c={x:0,y:0};b&&(c.z=0);a&&(c.m=0);for(var f=0,g=d[0],
h=0;h<d.length;h++){var l=d[h],r;a:if(l.length!==g.length)r=!1;else{for(r=0;r<l.length;r++)if(l[r]!==g[r]){r=!1;break a}r=!0}if(!1===r){r=k(g,l,b);var n=l,w=b,v=a,y={x:(g[0]+n[0])/2,y:(g[1]+n[1])/2};w&&(y.z=(g[2]+n[2])/2);w&&v?y.m=(g[3]+n[3])/2:v&&(y.m=(g[2]+n[2])/2);g=y;g.x*=r;g.y*=r;c.x+=g.x;c.y+=g.y;b&&(g.z*=r,c.z+=g.z);a&&(g.m*=r,c.m+=g.m);f+=r;g=l}}0<f?(c.x/=f,c.y/=f,b&&(c.z/=f),a&&(c.m/=f)):(c.x=d[0][0],c.y=d[0][1],b&&(c.z=d[0][2]),a&&b?c.m=d[0][3]:a&&(c.m=d[0][2]));return c}function k(d,b,
a){var c=b[0]-d[0];d=b[1]-d[1];return a?(b=b[2]-b[2],Math.sqrt(c*c+d*d+b*b)):Math.sqrt(c*c+d*d)}function d(d,b,a){for(void 0===a&&(a=0);d<a;)d+=b;for(a+=b;d>=a;)d-=b;return d}function h(d,b){return Math.atan2(b.y-d.y,b.x-d.x)}function g(d,b,a){var c=d.x-b.x;d=d.y-b.y;var f=a.x-b.x;b=a.y-b.y;return Math.atan2(f*d-c*b,f*c+b*d)}Object.defineProperty(c,"__esModule",{value:!0});c.centroidPolyline=function(d){for(var b={x:0,y:0,spatialReference:d.spatialReference.toJSON()},a={x:0,y:0,spatialReference:d.spatialReference.toJSON()},
c=0,f=0,g=0;g<d.paths.length;g++)if(0!==d.paths[g].length){var h;h=d.paths[g];var t=!0===d.hasZ;if(1>=h.length)h=0;else{for(var r=0,x=1;x<h.length;x++)r+=k(h[x-1],h[x],t);h=r}0===h?(t=l(d.paths[g],!0===d.hasZ,!0===d.hasM),b.x+=t.x,b.y+=t.y,!0===d.hasZ&&(b.z+=t.z),!0===d.hasM&&(b.m+=t.m),++c):(t=l(d.paths[g],!0===d.hasZ,!0===d.hasM),a.x+=t.x*h,a.y+=t.y*h,!0===d.hasZ&&(a.z+=t.z*h),!0===d.hasM&&(a.m+=t.m*h),f+=h)}return 0<f?(a.x/=f,a.y/=f,!0===d.hasZ&&(a.z/=f),!0===d.hasM&&(a.m/=f),new n(a)):0<c?(b.x/=
c,b.y/=c,!0===d.hasZ&&(a.z/=c),!0===d.hasM&&(b.m/=c),new n(b)):null};c.centroidMultiPoint=function(d){if(0===d.points.length)return null;for(var b=0,a=0,c=0,f=0,g=0;g<d.points.length;g++){var h=d.getPoint(g);!0===h.hasZ&&(c+=h.z);!0===h.hasM&&(f+=h.m);b+=h.x;a+=h.y;f+=h.m}b={x:b/d.points.length,y:a/d.points.length,spatialReference:null};b.spatialReference=d.spatialReference.toJSON();!0===d.hasZ&&(b.z=c/d.points.length);!0===d.hasM&&(b.m=f/d.points.length);return new n(b)};c.angleRad=h;c.angle2D=function(c,
b){return d(h(c,b),2*Math.PI)*(180/Math.PI)};c.bearing2D=function(c,b){return d(Math.PI/2-h(c,b),2*Math.PI)*(180/Math.PI)};c.angleBetweenRad=g;c.angleBetween2D=function(c,b,a){return d(g(c,b,a),2*Math.PI)*(180/Math.PI)};c.bearingBetween2D=function(c,b,a){return d(-1*g(c,b,a),2*Math.PI)*(180/Math.PI)}})},"esri/arcade/functions/geomsync":function(){define("require exports ../../kernel ../kernel ../languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/jsonUtils".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m){function q(b){return 0===n.version.indexOf("4.")?a.fromExtent(b):new a({spatialReference:b.spatialReference,rings:[[[b.xmin,b.ymin],[b.xmin,b.ymax],[b.xmax,b.ymax],[b.xmax,b.ymin],[b.xmin,b.ymin]]]})}Object.defineProperty(c,"__esModule",{value:!0});var u=null;c.setGeometryEngine=function(a){u=a};c.registerFunctions=function(c,r){function t(a){k.pcCheck(a,2,2);if(!(a[0]instanceof g&&a[1]instanceof g||a[0]instanceof g&&null===a[1]||a[1]instanceof g&&null===a[0]||
null===a[0]&&null===a[1]))throw Error("Illegal Argument");}c.disjoint=function(a,b){return r(a,b,function(a,b,d){d=k.autoCastFeatureToGeometry(d);t(d);return null===d[0]||null===d[1]?!0:u.disjoint(d[0],d[1])})};c.intersects=function(a,b){return r(a,b,function(a,b,d){d=k.autoCastFeatureToGeometry(d);t(d);return null===d[0]||null===d[1]?!1:u.intersects(d[0],d[1])})};c.touches=function(a,b){return r(a,b,function(a,b,d){d=k.autoCastFeatureToGeometry(d);t(d);return null===d[0]||null===d[1]?!1:u.touches(d[0],
d[1])})};c.crosses=function(a,b){return r(a,b,function(a,b,d){d=k.autoCastFeatureToGeometry(d);t(d);return null===d[0]||null===d[1]?!1:u.crosses(d[0],d[1])})};c.within=function(a,b){return r(a,b,function(a,b,d){d=k.autoCastFeatureToGeometry(d);t(d);return null===d[0]||null===d[1]?!1:u.within(d[0],d[1])})};c.contains=function(a,b){return r(a,b,function(a,b,d){d=k.autoCastFeatureToGeometry(d);t(d);return null===d[0]||null===d[1]?!1:u.contains(d[0],d[1])})};c.overlaps=function(a,b){return r(a,b,function(a,
b,d){d=k.autoCastFeatureToGeometry(d);t(d);return null===d[0]||null===d[1]?!1:u.overlaps(d[0],d[1])})};c.equals=function(a,b){return r(a,b,function(a,b,d){k.pcCheck(d,2,2);return d[0]===d[1]?!0:d[0]instanceof g&&d[1]instanceof g?u.equals(d[0],d[1]):k.isDate(d[0])&&k.isDate(d[1])?d[0].getTime()===d[1].getTime():!1})};c.relate=function(a,b){return r(a,b,function(a,b,d){d=k.autoCastFeatureToGeometry(d);k.pcCheck(d,3,3);if(d[0]instanceof g&&d[1]instanceof g)return u.relate(d[0],d[1],k.toString(d[2]));
if(d[0]instanceof g&&null===d[1]||d[1]instanceof g&&null===d[0]||null===d[0]&&null===d[1])return!1;throw Error("Illegal Argument");})};c.intersection=function(a,b){return r(a,b,function(a,b,d){d=k.autoCastFeatureToGeometry(d);t(d);return null===d[0]||null===d[1]?null:u.intersect(d[0],d[1])})};c.union=function(a,b){return r(a,b,function(b,d,c){c=k.autoCastFeatureToGeometry(c);b=[];if(0===c.length)throw Error("Function called with wrong number of Parameters");if(1===c.length)if(k.isArray(c[0]))for(c=
k.autoCastFeatureToGeometry(c[0]),d=0;d<c.length;d++){if(null!==c[d]){if(!(c[d]instanceof g))throw Error("Illegal Argument");b.push(c[d])}}else if(k.isImmutableArray(c[0]))for(c=k.autoCastFeatureToGeometry(c[0].toArray()),d=0;d<c.length;d++){if(null!==c[d]){if(!(c[d]instanceof g))throw Error("Illegal Argument");b.push(c[d])}}else{if(c[0]instanceof g)return k.fixSpatialReference(l.cloneGeometry(c[0]),a.spatialReference);if(null===c[0])return null;throw Error("Illegal Argument");}else for(d=0;d<c.length;d++)if(null!==
c[d]){if(!(c[d]instanceof g))throw Error("Illegal Argument");b.push(c[d])}return 0===b.length?null:u.union(b)})};c.difference=function(a,b){return r(a,b,function(a,b,d){d=k.autoCastFeatureToGeometry(d);t(d);return null!==d[0]&&null===d[1]?l.cloneGeometry(d[0]):null===d[0]?null:u.difference(d[0],d[1])})};c.symmetricdifference=function(a,b){return r(a,b,function(a,b,d){d=k.autoCastFeatureToGeometry(d);t(d);return null===d[0]&&null===d[1]?null:null===d[0]?l.cloneGeometry(d[1]):null===d[1]?l.cloneGeometry(d[0]):
u.symmetricDifference(d[0],d[1])})};c.clip=function(a,b){return r(a,b,function(a,b,d){d=k.autoCastFeatureToGeometry(d);k.pcCheck(d,2,2);if(!(d[1]instanceof h)&&null!==d[1])throw Error("Illegal Argument");if(null===d[0])return null;if(!(d[0]instanceof g))throw Error("Illegal Argument");return null===d[1]?null:u.clip(d[0],d[1])})};c.cut=function(a,b){return r(a,b,function(a,b,d){d=k.autoCastFeatureToGeometry(d);k.pcCheck(d,2,2);if(!(d[1]instanceof e)&&null!==d[1])throw Error("Illegal Argument");if(null===
d[0])return[];if(!(d[0]instanceof g))throw Error("Illegal Argument");return null===d[1]?[l.cloneGeometry(d[0])]:u.cut(d[0],d[1])})};c.area=function(a,b){return r(a,b,function(b,d,c){k.pcCheck(c,1,2);c=k.autoCastFeatureToGeometry(c);if(null===c[0])return 0;if(k.isArray(c[0])||k.isImmutableArray(c[0]))return b=k.autoCastArrayOfPointsToPolygon(c[0],a.spatialReference),null===b?0:u.planarArea(b,l.convertSquareUnitsToCode(k.defaultUndefined(c[1],-1)));if(!(c[0]instanceof g))throw Error("Illegal Argument");
return u.planarArea(c[0],l.convertSquareUnitsToCode(k.defaultUndefined(c[1],-1)))})};c.areageodetic=function(a,b){return r(a,b,function(b,d,c){k.pcCheck(c,1,2);c=k.autoCastFeatureToGeometry(c);if(null===c[0])return 0;if(k.isArray(c[0])||k.isImmutableArray(c[0]))return b=k.autoCastArrayOfPointsToPolygon(c[0],a.spatialReference),null===b?0:u.geodesicArea(b,l.convertSquareUnitsToCode(k.defaultUndefined(c[1],-1)));if(!(c[0]instanceof g))throw Error("Illegal Argument");return u.geodesicArea(c[0],l.convertSquareUnitsToCode(k.defaultUndefined(c[1],
-1)))})};c.length=function(a,b){return r(a,b,function(b,d,c){k.pcCheck(c,1,2);c=k.autoCastFeatureToGeometry(c);if(null===c[0])return 0;if(k.isArray(c[0])||k.isImmutableArray(c[0]))return b=k.autoCastArrayOfPointsToPolyline(c[0],a.spatialReference),null===b?0:u.planarLength(b,l.convertLinearUnitsToCode(k.defaultUndefined(c[1],-1)));if(!(c[0]instanceof g))throw Error("Illegal Argument");return u.planarLength(c[0],l.convertLinearUnitsToCode(k.defaultUndefined(c[1],-1)))})};c.lengthgeodetic=function(a,
b){return r(a,b,function(b,d,c){k.pcCheck(c,1,2);c=k.autoCastFeatureToGeometry(c);if(null===c[0])return 0;if(k.isArray(c[0])||k.isImmutableArray(c[0]))return b=k.autoCastArrayOfPointsToPolyline(c[0],a.spatialReference),null===b?0:u.geodesicLength(b,l.convertLinearUnitsToCode(k.defaultUndefined(c[1],-1)));if(!(c[0]instanceof g))throw Error("Illegal Argument");return u.geodesicLength(c[0],l.convertLinearUnitsToCode(k.defaultUndefined(c[1],-1)))})};c.distance=function(a,b){return r(a,b,function(b,d,
c){c=k.autoCastFeatureToGeometry(c);k.pcCheck(c,2,3);b=c[0];if(k.isArray(c[0])||k.isImmutableArray(c[0]))b=k.autoCastArrayOfPointsToMultiPoint(c[0],a.spatialReference);d=c[1];if(k.isArray(c[1])||k.isImmutableArray(c[1]))d=k.autoCastArrayOfPointsToMultiPoint(c[1],a.spatialReference);if(!(b instanceof g))throw Error("Illegal Argument");if(!(d instanceof g))throw Error("Illegal Argument");return u.distance(b,d,l.convertLinearUnitsToCode(k.defaultUndefined(c[2],-1)))})};c.densify=function(b,d){return r(b,
d,function(b,d,c){c=k.autoCastFeatureToGeometry(c);k.pcCheck(c,2,3);if(null===c[0])return null;if(!(c[0]instanceof g))throw Error("Illegal Argument");b=k.toNumber(c[1]);if(isNaN(b))throw Error("Illegal Argument");if(0>=b)throw Error("Illegal Argument");return c[0]instanceof a||c[0]instanceof e?u.densify(c[0],b,l.convertLinearUnitsToCode(k.defaultUndefined(c[2],-1))):c[0]instanceof h?u.densify(q(c[0]),b,l.convertLinearUnitsToCode(k.defaultUndefined(c[2],-1))):c[0]})};c.densifygeodetic=function(b,d){return r(b,
d,function(b,d,c){c=k.autoCastFeatureToGeometry(c);k.pcCheck(c,2,3);if(null===c[0])return null;if(!(c[0]instanceof g))throw Error("Illegal Argument");b=k.toNumber(c[1]);if(isNaN(b))throw Error("Illegal Argument");if(0>=b)throw Error("Illegal Argument");return c[0]instanceof a||c[0]instanceof e?u.geodesicDensify(c[0],b,l.convertLinearUnitsToCode(k.defaultUndefined(c[2],-1))):c[0]instanceof h?u.geodesicDensify(q(c[0]),b,l.convertLinearUnitsToCode(k.defaultUndefined(c[2],-1))):c[0]})};c.generalize=function(a,
b){return r(a,b,function(a,b,d){d=k.autoCastFeatureToGeometry(d);k.pcCheck(d,2,4);if(null===d[0])return null;if(!(d[0]instanceof g))throw Error("Illegal Argument");a=k.toNumber(d[1]);if(isNaN(a))throw Error("Illegal Argument");return u.generalize(d[0],a,k.toBoolean(k.defaultUndefined(d[2],!0)),l.convertLinearUnitsToCode(k.defaultUndefined(d[3],-1)))})};c.buffer=function(a,b){return r(a,b,function(a,b,d){d=k.autoCastFeatureToGeometry(d);k.pcCheck(d,2,3);if(null===d[0])return null;if(!(d[0]instanceof
g))throw Error("Illegal Argument");a=k.toNumber(d[1]);if(isNaN(a))throw Error("Illegal Argument");return 0===a?l.cloneGeometry(d[0]):u.buffer(d[0],a,l.convertLinearUnitsToCode(k.defaultUndefined(d[2],-1)))})};c.buffergeodetic=function(a,b){return r(a,b,function(a,b,d){d=k.autoCastFeatureToGeometry(d);k.pcCheck(d,2,3);if(null===d[0])return null;if(!(d[0]instanceof g))throw Error("Illegal Argument");a=k.toNumber(d[1]);if(isNaN(a))throw Error("Illegal Argument");return 0===a?l.cloneGeometry(d[0]):u.geodesicBuffer(d[0],
a,l.convertLinearUnitsToCode(k.defaultUndefined(d[2],-1)))})};c.offset=function(b,d){return r(b,d,function(b,d,c){c=k.autoCastFeatureToGeometry(c);k.pcCheck(c,2,6);if(null===c[0])return null;if(!(c[0]instanceof a||c[0]instanceof e))throw Error("Illegal Argument");b=k.toNumber(c[1]);if(isNaN(b))throw Error("Illegal Argument");d=k.toNumber(k.defaultUndefined(c[4],10));if(isNaN(d))throw Error("Illegal Argument");var f=k.toNumber(k.defaultUndefined(c[5],0));if(isNaN(f))throw Error("Illegal Argument");
return u.offset(c[0],b,l.convertLinearUnitsToCode(k.defaultUndefined(c[2],-1)),k.toString(k.defaultUndefined(c[3],"round")).toLowerCase(),d,f)})};c.rotate=function(d,c){return r(d,c,function(d,c,e){e=k.autoCastFeatureToGeometry(e);k.pcCheck(e,2,3);d=e[0];if(null===d)return null;if(!(d instanceof g))throw Error("Illegal Argument");d instanceof h&&(d=a.fromExtent(d));c=k.toNumber(e[1]);if(isNaN(c))throw Error("Illegal Argument");e=k.defaultUndefined(e[2],null);if(null===e)return u.rotate(d,c);if(e instanceof
b)return u.rotate(d,c,e);throw Error("Illegal Argument");})};c.centroid=function(c,m){return r(c,m,function(m,q,r){r=k.autoCastFeatureToGeometry(r);k.pcCheck(r,1,1);if(null===r[0])return null;m=r[0];if(k.isArray(r[0])||k.isImmutableArray(r[0]))m=k.autoCastArrayOfPointsToMultiPoint(r[0],c.spatialReference);if(null===m)return null;if(!(m instanceof g))throw Error("Illegal Argument");return m instanceof b?k.fixSpatialReference(l.cloneGeometry(r[0]),c.spatialReference):m instanceof a?m.centroid:m instanceof
e?d.centroidPolyline(m):m instanceof f?d.centroidMultiPoint(m):m instanceof h?m.center:null})};c.multiparttosinglepart=function(d,c){return r(d,c,function(c,q,r){r=k.autoCastFeatureToGeometry(r);k.pcCheck(r,1,1);q=[];if(null===r[0])return null;if(!(r[0]instanceof g))throw Error("Illegal Argument");if(r[0]instanceof b||r[0]instanceof h)return[k.fixSpatialReference(l.cloneGeometry(r[0]),d.spatialReference)];c=u.simplify(r[0]);if(c instanceof a){q=[];var t=[];for(r=0;r<c.rings.length;r++)if(c.isClockwise(c.rings[r])){var n=
m.fromJSON({rings:[c.rings[r]],hasZ:!0===c.hasZ,hasM:!0===c.hasM,spatialReference:c.spatialReference.toJSON()});q.push(n)}else t.push({ring:c.rings[r],pt:c.getPoint(r,0)});for(c=0;c<t.length;c++)for(r=0;r<q.length;r++)if(q[r].contains(t[c].pt)){q[r].addRing(t[c].ring);break}return q}if(c instanceof e){q=[];for(r=0;r<c.paths.length;r++)t=m.fromJSON({paths:[c.paths[r]],hasZ:!0===c.hasZ,hasM:!0===c.hasM,spatialReference:c.spatialReference.toJSON()}),q.push(t);return q}if(r[0]instanceof f){c=k.fixSpatialReference(l.cloneGeometry(r[0]),
d.spatialReference);for(r=0;r<c.points.length;r++)q.push(c.getPoint(r));return q}return null})};c.issimple=function(a,b){return r(a,b,function(a,b,d){d=k.autoCastFeatureToGeometry(d);k.pcCheck(d,1,1);if(null===d[0])return!0;if(!(d[0]instanceof g))throw Error("Illegal Argument");return u.isSimple(d[0])})};c.simplify=function(a,b){return r(a,b,function(a,b,d){d=k.autoCastFeatureToGeometry(d);k.pcCheck(d,1,1);if(null===d[0])return null;if(!(d[0]instanceof g))throw Error("Illegal Argument");return u.simplify(d[0])})}}})},
"esri/arcade/kernel":function(){define(["require","exports","../geometry/Extent"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.convertSquareUnitsToCode=function(c){if(void 0===c)return null;if("number"===typeof c)return c;switch(c.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square-meters":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 109413;
case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 109405}return null};
c.shapeExtent=function(c){if(null===c)return null;switch(c.type){case "polygon":case "multipoint":case "polyline":return c.extent;case "point":return new n({xmin:c.x,ymin:c.y,xmax:c.x,ymax:c.y,spatialReference:c.spatialReference});case "extent":return c}return null};c.convertLinearUnitsToCode=function(c){if(void 0===c)return null;if("number"===typeof c||"number"===typeof c)return c;switch(c.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square-meters":return 9001;
case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 9035;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 9036;case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 9002}return null};
c.sameGeomType=function(c,k){return c===k||"point"===c&&"esriGeometryPoint"===k||"polyline"===c&&"esriGeometryPolyline"===k||"polygon"===c&&"esriGeometryPolygon"===k||"extent"===c&&"esriGeometryEnvelope"===k||"multipoint"===c&&"esriGeometryMultipoint"===k||"point"===k&&"esriGeometryPoint"===c||"polyline"===k&&"esriGeometryPolyline"===c||"polygon"===k&&"esriGeometryPolygon"===c||"extent"===k&&"esriGeometryEnvelope"===c||"multipoint"===k&&"esriGeometryMultipoint"===c?!0:!1};c.cloneGeometry=function(c){if(null===
c)return null;var k=c.clone();void 0!==c.cache._geVersion&&(k.cache._geVersion=c.cache._geVersion);return k}})},"esri/arcade/functions/maths":function(){define(["require","exports","dojo/number","../languageUtils"],function(p,c,n,l){function k(d,c,g){if("undefined"===typeof g||0===+g)return Math[d](c);c=+c;g=+g;if(isNaN(c)||"number"!==typeof g||0!==g%1)return NaN;c=c.toString().split("e");c=Math[d](+(c[0]+"e"+(c[1]?+c[1]-g:-g)));c=c.toString().split("e");return+(c[0]+"e"+(c[1]?+c[1]+g:g))}Object.defineProperty(c,
"__esModule",{value:!0});c.registerFunctions=function(d,c){function g(d,b,a){d=l.toNumber(d);return isNaN(d)?d:isNaN(b)||isNaN(a)||b>a?NaN:d<b?b:d>a?a:d}d.number=function(d,b){return c(d,b,function(a,b,d){l.pcCheck(d,1,2);a=d[0];return l.isNumber(a)?a:null===a?0:l.isDate(a)||l.isBoolean(a)?Number(a):l.isArray(a)?NaN:""===a||void 0===a?Number(a):l.isString(a)?void 0!==d[1]?(d=l.multiReplace(d[1],"\u2030",""),d=l.multiReplace(d,"\u00a4",""),n.parse(a,{pattern:d})):Number(a.trim()):Number(a)})};d.abs=
function(d,b){return c(d,b,function(a,b,d){l.pcCheck(d,1,1);return Math.abs(l.toNumber(d[0]))})};d.acos=function(d,b){return c(d,b,function(a,b,d){l.pcCheck(d,1,1);return Math.acos(l.toNumber(d[0]))})};d.asin=function(d,b){return c(d,b,function(a,b,d){l.pcCheck(d,1,1);return Math.asin(l.toNumber(d[0]))})};d.atan=function(d,b){return c(d,b,function(a,b,d){l.pcCheck(d,1,1);return Math.atan(l.toNumber(d[0]))})};d.atan2=function(d,b){return c(d,b,function(a,b,d){l.pcCheck(d,2,2);return Math.atan2(l.toNumber(d[0]),
l.toNumber(d[1]))})};d.ceil=function(d,b){return c(d,b,function(a,b,d){l.pcCheck(d,1,2);return 2===d.length?(a=l.toNumber(d[1]),isNaN(a)&&(a=0),k("ceil",l.toNumber(d[0]),-1*a)):Math.ceil(l.toNumber(d[0]))})};d.round=function(d,b){return c(d,b,function(a,b,d){l.pcCheck(d,1,2);return 2===d.length?(a=l.toNumber(d[1]),isNaN(a)&&(a=0),k("round",l.toNumber(d[0]),-1*a)):Math.round(l.toNumber(d[0]))})};d.floor=function(d,b){return c(d,b,function(a,b,d){l.pcCheck(d,1,2);return 2===d.length?(a=l.toNumber(d[1]),
isNaN(a)&&(a=0),k("floor",l.toNumber(d[0]),-1*a)):Math.floor(l.toNumber(d[0]))})};d.cos=function(d,b){return c(d,b,function(a,b,d){l.pcCheck(d,1,1);return Math.cos(l.toNumber(d[0]))})};d.isnan=function(d,b){return c(d,b,function(a,b,d){l.pcCheck(d,1,1);return"number"===typeof d[0]&&isNaN(d[0])})};d.exp=function(d,b){return c(d,b,function(a,b,d){l.pcCheck(d,1,1);return Math.exp(l.toNumber(d[0]))})};d.log=function(d,b){return c(d,b,function(a,b,d){l.pcCheck(d,1,1);return Math.log(l.toNumber(d[0]))})};
d.pow=function(d,b){return c(d,b,function(a,b,d){l.pcCheck(d,2,2);return Math.pow(l.toNumber(d[0]),l.toNumber(d[1]))})};d.random=function(d,b){return c(d,b,function(a,b,d){l.pcCheck(d,0,0);return Math.random()})};d.sin=function(d,b){return c(d,b,function(a,b,d){l.pcCheck(d,1,1);return Math.sin(l.toNumber(d[0]))})};d.sqrt=function(d,b){return c(d,b,function(a,b,d){l.pcCheck(d,1,1);return Math.sqrt(l.toNumber(d[0]))})};d.tan=function(d,b){return c(d,b,function(a,b,d){l.pcCheck(d,1,1);return Math.tan(l.toNumber(d[0]))})};
d.defaultvalue=function(d,b){return c(d,b,function(a,b,d){l.pcCheck(d,2,2);return null===d[0]||""===d[0]||void 0===d[0]?d[1]:d[0]})};d.isempty=function(d,b){return c(d,b,function(a,b,d){l.pcCheck(d,1,1);return null===d[0]||""===d[0]||void 0===d[0]?!0:!1})};d["boolean"]=function(d,b){return c(d,b,function(a,b,d){l.pcCheck(d,1,1);return l.toBoolean(d[0])})};d.constrain=function(d,b){return c(d,b,function(a,b,d){l.pcCheck(d,3,3);a=l.toNumber(d[1]);b=l.toNumber(d[2]);if(l.isArray(d[0])){var c=[],e=0;
for(d=d[0];e<d.length;e++)c.push(g(d[e],a,b));return c}if(l.isImmutableArray(d[0])){c=[];for(e=0;e<d[0].length();e++)c.push(g(d[0].get(e),a,b));return c}return g(d[0],a,b)})}}})},"esri/arcade/functions/stats":function(){define(["require","exports","../languageUtils","./fieldStats"],function(p,c,n,l){function k(d,c,g,f){if(1===f.length){if(n.isArray(f[0]))return l.calculateStat(d,f[0],-1);if(n.isImmutableArray(f[0]))return l.calculateStat(d,f[0].toArray(),-1)}return l.calculateStat(d,f,-1)}Object.defineProperty(c,
"__esModule",{value:!0});c.registerFunctions=function(d,c){d.stdev=function(d,f){return c(d,f,function(b,a,d){return k("stdev",b,a,d)})};d.variance=function(d,f){return c(d,f,function(b,a,d){return k("variance",b,a,d)})};d.average=function(d,f){return c(d,f,function(b,a,d){return k("mean",b,a,d)})};d.mean=function(d,f){return c(d,f,function(b,a,d){return k("mean",b,a,d)})};d.sum=function(d,f){return c(d,f,function(b,a,d){return k("sum",b,a,d)})};d.min=function(d,f){return c(d,f,function(b,a,d){return k("min",
b,a,d)})};d.max=function(d,f){return c(d,f,function(b,a,d){return k("max",b,a,d)})};d.distinct=function(d,f){return c(d,f,function(b,a,d){return k("distinct",b,a,d)})};d.count=function(d,f){return c(d,f,function(b,a,d){n.pcCheck(d,1,1);if(n.isArray(d[0])||n.isString(d[0]))return d[0].length;if(n.isImmutableArray(d[0]))return d[0].length();throw Error("Invalid Parameters for Count");})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],function(p,c,n){function l(d){for(var c=
0,g=0;g<d.length;g++)c+=d[g];return c/d.length}function k(d){for(var c=l(d),g=0,f=0;f<d.length;f++)g+=Math.pow(c-d[f],2);return g/d.length}Object.defineProperty(c,"__esModule",{value:!0});c.decodeStatType=function(d){switch(d.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};c.calculateStat=
function(d,c,g){void 0===g&&(g=1E3);switch(d.toLowerCase()){case "distinct":a:{d=g;g=[];for(var f={},b=[],a=0;a<c.length;a++){if(void 0!==c[a]&&null!==c[a]&&c[a]!==n.voidOperation){var e=c[a];if(n.isNumber(e)||n.isString(e))void 0===f[e]&&(g.push(e),f[e]=1);else{for(var m=!1,h=0;h<b.length;h++)!0===n.equalityTest(b[h],e)&&(m=!0);!1===m&&(b.push(e),g.push(e))}}if(g.length>=d&&-1!==d){c=g;break a}}c=g}return c;case "avg":case "mean":return l(n.toNumberArray(c));case "min":return Math.min.apply(Math,
n.toNumberArray(c));case "sum":c=n.toNumberArray(c);for(g=d=0;g<c.length;g++)d+=c[g];return d;case "max":return Math.max.apply(Math,n.toNumberArray(c));case "stdev":case "stddev":return Math.sqrt(k(n.toNumberArray(c)));case "var":case "variance":return k(n.toNumberArray(c));case "count":return c.length}return 0}})},"esri/arcade/functions/string":function(){define(["require","exports","../Dictionary","../Feature","../languageUtils"],function(p,c,n,l,k){Object.defineProperty(c,"__esModule",{value:!0});
c.registerFunctions=function(d,c){d.trim=function(d,f){return c(d,f,function(b,a,d){k.pcCheck(d,1,1);return k.toString(d[0]).trim()})};d.upper=function(d,f){return c(d,f,function(b,a,d){k.pcCheck(d,1,1);return k.toString(d[0]).toUpperCase()})};d.proper=function(d,f){return c(d,f,function(b,a,d){k.pcCheck(d,1,2);b=1;2===d.length&&"firstword"===k.toString(d[1]).toLowerCase()&&(b=2);a=/\s/;d=k.toString(d[0]);for(var c="",e=!0,f=0;f<d.length;f++){var g=d[f];a.test(g)?1===b&&(e=!0):g.toUpperCase()!==g.toLowerCase()&&
(e?(g=g.toUpperCase(),e=!1):g=g.toLowerCase());c+=g}return c})};d.lower=function(d,f){return c(d,f,function(b,a,d){k.pcCheck(d,1,1);return k.toString(d[0]).toLowerCase()})};d.guid=function(d,f){return c(d,f,function(b,a,d){k.pcCheck(d,0,1);if(0<d.length)switch(k.toString(d[0]).toLowerCase()){case "digits":return k.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return k.generateUUID();case "digits-hyphen-parentheses":return"("+k.generateUUID()+")"}return"{"+
k.generateUUID()+"}"})};d.console=function(d,f){return c(d,f,function(b,a,c){0!==c.length&&(1===c.length?d.console(k.toString(c[0])):d.console(k.toString(c)));return k.voidOperation})};d.mid=function(d,f){return c(d,f,function(b,a,d){k.pcCheck(d,2,3);b=k.toNumber(d[1]);if(isNaN(b))return"";0>b&&(b=0);if(2===d.length)return k.toString(d[0]).substr(b);a=k.toNumber(d[2]);if(isNaN(a))return"";0>a&&(a=0);return k.toString(d[0]).substr(b,a)})};d.find=function(d,f){return c(d,f,function(b,a,d){k.pcCheck(d,
2,3);b=0;if(2<d.length){b=k.toNumber(k.defaultUndefined(d[2],0));if(isNaN(b))return-1;0>b&&(b=0)}return k.toString(d[1]).indexOf(k.toString(d[0]),b)})};d.left=function(d,f){return c(d,f,function(b,a,d){k.pcCheck(d,2,2);b=k.toNumber(d[1]);if(isNaN(b))return"";0>b&&(b=0);return k.toString(d[0]).substr(0,b)})};d.right=function(d,f){return c(d,f,function(b,a,d){k.pcCheck(d,2,2);b=k.toNumber(d[1]);if(isNaN(b))return"";0>b&&(b=0);return k.toString(d[0]).substr(-1*b,b)})};d.split=function(d,f){return c(d,
f,function(b,a,d){k.pcCheck(d,2,4);b=k.toNumber(k.defaultUndefined(d[2],-1));a=k.toBoolean(k.defaultUndefined(d[3],!1));-1===b||null===b||!0===a?d=k.toString(d[0]).split(k.toString(d[1])):(isNaN(b)&&(b=-1),-1>b&&(b=-1),d=k.toString(d[0]).split(k.toString(d[1]),b));if(!1===a)return d;a=[];for(var c=0;c<d.length&&!(-1!==b&&a.length>=b);c++)""!==d[c]&&void 0!==d[c]&&a.push(d[c]);return a})};d.text=function(d,f){return c(d,f,function(b,a,d){k.pcCheck(d,1,2);return k.toStringExplicit(d[0],d[1])})};d.concatenate=
function(d,f){return c(d,f,function(b,a,d){b=[];if(1>d.length)return"";if(k.isArray(d[0])){a=k.defaultUndefined(d[2],"");for(var c=0;c<d[0].length;c++)b[c]=k.toStringExplicit(d[0][c],a);return 1<d.length?b.join(d[1]):b.join("")}if(k.isImmutableArray(d[0])){a=k.defaultUndefined(d[2],"");for(c=0;c<d[0].length();c++)b[c]=k.toStringExplicit(d[0].get(c),a);return 1<d.length?b.join(d[1]):b.join("")}for(c=0;c<d.length;c++)b[c]=k.toStringExplicit(d[c]);return b.join("")})};d.reverse=function(d,f){return c(d,
f,function(b,a,d){k.pcCheck(d,1,1);if(k.isArray(d[0]))return b=d[0].slice(0),b.reverse(),b;if(k.isImmutableArray(d[0]))return b=d[0].toArray().slice(0),b.reverse(),b;throw Error("Invalid Parameter");})};d.replace=function(d,f){return c(d,f,function(b,a,d){k.pcCheck(d,3,4);b=k.toString(d[0]);a=k.toString(d[1]);var c=k.toString(d[2]);return(4===d.length?k.toBoolean(d[3]):1)?k.multiReplace(b,a,c):b.replace(a,c)})};d.domainname=function(d,f){return c(d,f,function(b,a,d){k.pcCheck(d,2,4);if(d[0]instanceof
l)return d[0].domainValueLookup(k.toString(d[1]),d[2],void 0===d[3]?void 0:k.toNumber(d[3]));throw Error("Invalid Parameter");})};d.domaincode=function(d,f){return c(d,f,function(b,a,d){k.pcCheck(d,2,4);if(d[0]instanceof l)return d[0].domainCodeLookup(k.toString(d[1]),d[2],void 0===d[3]?void 0:k.toNumber(d[3]));throw Error("Invalid Parameter");})};d.urlencode=function(d,f){return c(d,f,function(b,a,d){k.pcCheck(d,1,1);if(null===d[0])return"";if(d[0]instanceof n){b="";a=0;for(var c=d[0].keys();a<c.length;a++){var e=
c[a],f=d[0].field(e);""!==b&&(b+="\x26");b=null===f?b+(encodeURIComponent(e)+"\x3d"):b+(encodeURIComponent(e)+"\x3d"+encodeURIComponent(f))}return b}return encodeURIComponent(k.toString(d[0]))})}}})},"esri/arcade/arcadeRuntime":function(){define("require exports ./Attachment ./Dictionary ./Feature ./FunctionWrapper ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/SpatialReference".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z,A){function B(a,b){for(var d=[],c=0;c<b.arguments.length;c++)d.push(C(a,b.arguments[c]));return d}function D(a,b,d){try{return d(a,b,B(a,b))}catch(W){throw W;}}function C(a,c){try{switch(c.type){case "EmptyStatement":return f.voidOperation;case "VariableDeclarator":var e=null===c.init?null:C(a,c.init);e===f.voidOperation&&(e=null);if("Identifier"!==c.id.type)throw Error("Can only assign a regular variable");var g=c.id.name.toLowerCase();null!==
a.localScope?a.localScope[g]={value:e,valueset:!0,node:c.init}:a.globalScope[g]={value:e,valueset:!0,node:c.init};return f.voidOperation;case "VariableDeclaration":for(var m=0;m<c.declarations.length;m++)C(a,c.declarations[m]);return f.voidOperation;case "BlockStatement":var h;a:{for(var q=f.voidOperation,m=0;m<c.body.length;m++)if(q=C(a,c.body[m]),q instanceof f.ReturnResult||q===f.breakResult||q===f.continueResult){h=q;break a}h=q}return h;case "FunctionDeclaration":var r=c.id.name.toLowerCase();
a.globalScope[r]={valueset:!0,node:null,value:new d(c,a)};return f.voidOperation;case "ReturnStatement":var t;if(null===c.argument)t=new f.ReturnResult(f.voidOperation);else{var n=C(a,c.argument);t=new f.ReturnResult(n)}return t;case "IfStatement":var u;if("AssignmentExpression"===c.test.type||"UpdateExpression"===c.test.type)throw Error(b.nodeErrorMessage(c.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var x=C(a,c.test);if(!0===x)u=C(a,c.consequent);else if(!1===x)u=null!==c.alternate?C(a,
c.alternate):f.voidOperation;else throw Error(b.nodeErrorMessage(c,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));return u;case "ExpressionStatement":var v;if("AssignmentExpression"===c.expression.type||"UpdateExpression"===c.expression.type)v=C(a,c.expression);else{var w=C(a,c.expression);v=w===f.voidOperation?f.voidOperation:new f.ImplicitResult(w)}return v;case "AssignmentExpression":var y;var p=C(a,c.right),m=null,z="";if("MemberExpression"===c.left.type){m=C(a,c.left.object);!0===c.left.computed?
z=C(a,c.left.property):"Identifier"===c.left.property.type&&(z=c.left.property.name);if(f.isArray(m))if(f.isNumber(z)){0>z&&(z=m.length+z);if(0>z||z>m.length)throw Error("Assignment outside of array bounds");if(z===m.length&&"\x3d"!==c.operator)throw Error("Invalid Parameter");m[z]=H(p,c.operator,m[z],c)}else throw Error("Invalid Parameter");else if(m instanceof l){if(!1===f.isString(z))throw Error("Dictionary accessor must be a string");if(!0===m.hasField(z))m.setField(z,H(p,c.operator,m.field(z),
c));else{if("\x3d"!==c.operator)throw Error("Invalid Parameter");m.setField(z,H(p,c.operator,null,c))}}else if(m instanceof k){if(!1===f.isString(z))throw Error("Feature accessor must be a string");if(!0===m.hasField(z))m.setField(z,H(p,c.operator,m.field(z),c));else{if("\x3d"!==c.operator)throw Error("Invalid Parameter");m.setField(z,H(p,c.operator,null,c))}}else{if(f.isImmutableArray(m))throw Error("Array is Immutable");throw Error("Invalid Parameter");}y=f.voidOperation}else if(m=c.left.name.toLowerCase(),
null!==a.localScope&&void 0!==a.localScope[m])a.localScope[m]={value:H(p,c.operator,a.localScope[m].value,c),valueset:!0,node:c.right},y=f.voidOperation;else if(void 0!==a.globalScope[m])a.globalScope[m]={value:H(p,c.operator,a.globalScope[m].value,c),valueset:!0,node:c.right},y=f.voidOperation;else throw Error("Variable not recognised");return y;case "UpdateExpression":var A;var B,m=null,z="";if("MemberExpression"===c.argument.type){m=C(a,c.argument.object);!0===c.argument.computed?z=C(a,c.argument.property):
"Identifier"===c.argument.property.type&&(z=c.argument.property.name);if(f.isArray(m))if(f.isNumber(z)){0>z&&(z=m.length+z);if(0>z||z>=m.length)throw Error("Assignment outside of array bounds");B=f.toNumber(m[z]);m[z]="++"===c.operator?B+1:B-1}else throw Error("Invalid Parameter");else if(m instanceof l){if(!1===f.isString(z))throw Error("Dictionary accessor must be a string");if(!0===m.hasField(z))B=f.toNumber(m.field(z)),m.setField(z,"++"===c.operator?B+1:B-1);else throw Error("Invalid Parameter");
}else if(m instanceof k){if(!1===f.isString(z))throw Error("Feature accessor must be a string");if(!0===m.hasField(z))B=f.toNumber(m.field(z)),m.setField(z,"++"===c.operator?B+1:B-1);else throw Error("Invalid Parameter");}else{if(f.isImmutableArray(m))throw Error("Array is Immutable");throw Error("Invalid Parameter");}A=!1===c.prefix?B:"++"===c.operator?B+1:B-1}else{m="Identifier"===c.argument.type?c.argument.name.toLowerCase():"";if(!m)throw Error("Invalid identifier");if(null!==a.localScope&&void 0!==
a.localScope[m])B=f.toNumber(a.localScope[m].value),a.localScope[m]={value:"++"===c.operator?B+1:B-1,valueset:!0,node:c},A=!1===c.prefix?B:"++"===c.operator?B+1:B-1;else if(void 0!==a.globalScope[m])B=f.toNumber(a.globalScope[m].value),a.globalScope[m]={value:"++"===c.operator?B+1:B-1,valueset:!0,node:c},A=!1===c.prefix?B:"++"===c.operator?B+1:B-1;else throw Error("Variable not recognised");}return A;case "BreakStatement":return f.breakResult;case "ContinueStatement":return f.continueResult;case "ForStatement":null!==
c.init&&C(a,c.init);z={testResult:!0,lastAction:f.voidOperation};do b:{y=a;p=c;A=z;if(null!==p.test){A.testResult=C(y,p.test);if(!1===A.testResult)break b;if(!0!==A.testResult)throw Error(b.nodeErrorMessage(p,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}A.lastAction=C(y,p.body);A.lastAction===f.breakResult?A.testResult=!1:A.lastAction instanceof f.ReturnResult?A.testResult=!1:null!==p.update&&C(y,p.update)}while(!0===z.testResult);m=z.lastAction instanceof f.ReturnResult?z.lastAction:f.voidOperation;
return m;case "ForInStatement":return E(a,c);case "Identifier":return N(a,c);case "MemberExpression":return I(a,c);case "Literal":return c.value;case "CallExpression":return S(a,c);case "UnaryExpression":return K(a,c);case "BinaryExpression":return M(a,c);case "LogicalExpression":return T(a,c);case "ConditionalExpression":throw Error(b.nodeErrorMessage(c,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{for(m=[],z=0;z<c.elements.length;z++){var D=C(a,c.elements[z]);if(f.isFunctionParameter(D))throw Error(b.nodeErrorMessage(c,
"RUNTIME","FUNCTIONCONTEXTILLEGAL"));D===f.voidOperation?m.push(null):m.push(D)}}catch(fa){throw fa;}return m;case "ObjectExpression":m={};for(z=0;z<c.properties.length;z++){var L=C(a,c.properties[z]);if(f.isFunctionParameter(L.value))throw Error("Illegal Argument");if(!1===f.isString(L.key))throw Error("Illegal Argument");m[L.key.toString()]=L.value===f.voidOperation?null:L.value}var ja=new l(m);ja.immutable=!1;return ja;case "Property":return{key:"Identifier"===c.key.type?c.key.name:C(a,c.key),
value:C(a,c.value)};default:throw Error(b.nodeErrorMessage(c,"RUNTIME","UNREOGNISED"));}}catch(fa){throw fa;}}function E(a,d){var c=C(a,d.right);"VariableDeclaration"===d.left.type&&C(a,d.left);var e=null,g="";if("VariableDeclaration"===d.left.type){var m=d.left.declarations[0].id;"Identifier"===m.type&&(g=m.name)}else"Identifier"===d.left.type&&(g=d.left.name);if(!g)throw Error(b.nodeErrorMessage(d,"RUNTIME","INVALIDVARIABLE"));g=g.toLowerCase();null!==a.localScope&&void 0!==a.localScope[g]&&(e=
a.localScope[g]);null===e&&void 0!==a.globalScope[g]&&(e=a.globalScope[g]);if(null===e)throw Error(b.nodeErrorMessage(d,"RUNTIME","VARIABLENOTDECLARED"));if(f.isArray(c)||f.isString(c)){c=c.length;for(m=0;m<c;m++){e.value=m;g=C(a,d.body);if(g===f.breakResult)break;if(g instanceof f.ReturnResult)return g}return f.voidOperation}if(f.isImmutableArray(c)){for(m=0;m<c.length();m++){e.value=m;g=C(a,d.body);if(g===f.breakResult)break;if(g instanceof f.ReturnResult)return g}return f.voidOperation}if(c instanceof
l||c instanceof k)for(c=c.keys(),m=0;m<c.length;m++){e.value=c[m];g=C(a,d.body);if(g===f.breakResult)break;if(g instanceof f.ReturnResult)return g}else return f.voidOperation}function H(a,d,c,e){switch(d){case "\x3d":return a===f.voidOperation?null:a;case "/\x3d":return f.toNumber(c)/f.toNumber(a);case "*\x3d":return f.toNumber(c)*f.toNumber(a);case "-\x3d":return f.toNumber(c)-f.toNumber(a);case "+\x3d":return f.isString(c)||f.isString(a)?f.toString(c)+f.toString(a):f.toNumber(c)+f.toNumber(a);case "%\x3d":return f.toNumber(c)%
f.toNumber(a);default:throw Error(b.nodeErrorMessage(e,"RUNTIME","OPERATORNOTRECOGNISED"));}}function G(a,d,c,e){d=d.toLowerCase();switch(d){case "hasz":return a=a.hasZ,void 0===a?!1:a;case "hasm":return a=a.hasM,void 0===a?!1:a;case "spatialreference":return d=a.spatialReference._arcadeCacheId,void 0===d&&(c=!0,Object.freeze&&Object.isFrozen(a.spatialReference)&&(c=!1),c&&(X++,d=a.spatialReference._arcadeCacheId=X)),a=new l({wkt:a.spatialReference.wkt,wkid:a.spatialReference.wkid}),void 0!==d&&(a._arcadeCacheId=
"SPREF"+d.toString()),a}switch(a.type){case "extent":switch(d){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return a=a[d],void 0!==a?a:null;case "type":return"Extent"}break;case "polygon":switch(d){case "rings":return d=a.cache._arcadeCacheId,void 0===d&&(X++,d=X,a.cache._arcadeCacheId=d),a=new h(a.rings,a.spatialReference,!0===a.hasZ,!0===a.hasM,d);case "type":return"Polygon"}break;case "point":switch(d){case "x":case "y":case "z":case "m":return void 0!==
a[d]?a[d]:null;case "type":return"Point"}break;case "polyline":switch(d){case "paths":return d=a.cache._arcadeCacheId,void 0===d&&(X++,d=X,a.cache._arcadeCacheId=d),a=new h(a.paths,a.spatialReference,!0===a.hasZ,!0===a.hasM,d);case "type":return"Polyline"}break;case "multipoint":switch(d){case "points":return d=a.cache._arcadeCacheId,void 0===d&&(X++,d=X,a.cache._arcadeCacheId=d),a=new g(a.points,a.spatialReference,!0===a.hasZ,!0===a.hasM,d,1);case "type":return"Multipoint"}}throw Error(b.nodeErrorMessage(e,
"RUNTIME","PROPERTYNOTFOUND"));}function I(a,d){try{var c=C(a,d.object);if(null===c)throw Error(b.nodeErrorMessage(d,"RUNTIME","NOTFOUND"));if(!1===d.computed){if("Identifier"===d.property.type){if(c instanceof l||c instanceof k)return c.field(d.property.name);if(c instanceof x)return G(c,d.property.name,a,d)}throw Error(b.nodeErrorMessage(d,"RUNTIME","INVALIDTYPE"));}var e=C(a,d.property);if(c instanceof l||c instanceof k){if(f.isString(e))return c.field(e);throw Error(b.nodeErrorMessage(d,"RUNTIME",
"INVALIDTYPE"));}if(c instanceof x){if(f.isString(e))return G(c,e,a,d);throw Error(b.nodeErrorMessage(d,"RUNTIME","INVALIDTYPE"));}if(f.isArray(c)){if(f.isNumber(e)&&isFinite(e)&&Math.floor(e)===e){0>e&&(e=c.length+e);if(e>=c.length||0>e)throw Error(b.nodeErrorMessage(d,"RUNTIME","OUTOFBOUNDS"));return c[e]}throw Error(b.nodeErrorMessage(d,"RUNTIME","INVALIDTYPE"));}if(f.isString(c)){if(f.isNumber(e)&&isFinite(e)&&Math.floor(e)===e){0>e&&(e=c.length+e);if(e>=c.length||0>e)throw Error(b.nodeErrorMessage(d,
"RUNTIME","OUTOFBOUNDS"));return c[e]}throw Error(b.nodeErrorMessage(d,"RUNTIME","INVALIDTYPE"));}if(f.isImmutableArray(c)&&f.isNumber(e)&&isFinite(e)&&Math.floor(e)===e){0>e&&(e=c.length()+e);if(e>=c.length()||0>e)throw Error(b.nodeErrorMessage(d,"RUNTIME","OUTOFBOUNDS"));return c.get(e)}throw Error(b.nodeErrorMessage(d,"RUNTIME","INVALIDTYPE"));}catch(ea){throw ea;}}function K(a,d){try{var c=C(a,d.argument);if(f.isBoolean(c)){if("!"===d.operator)return!c;if("-"===d.operator)return-1*f.toNumber(c);
if("+"===d.operator)return 1*f.toNumber(c);throw Error(b.nodeErrorMessage(d,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===d.operator)return-1*f.toNumber(c);if("+"===d.operator)return 1*f.toNumber(c);throw Error(b.nodeErrorMessage(d,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}catch(W){throw W;}}function M(a,d){try{var c=[C(a,d.left),C(a,d.right)],e=c[0],g=c[1];switch(d.operator){case "\x3d\x3d":return f.equalityTest(e,g);case "!\x3d":return!f.equalityTest(e,g);case "\x3c":return f.greaterThanLessThan(e,
g,d.operator);case "\x3e":return f.greaterThanLessThan(e,g,d.operator);case "\x3c\x3d":return f.greaterThanLessThan(e,g,d.operator);case "\x3e\x3d":return f.greaterThanLessThan(e,g,d.operator);case "+":return f.isString(e)||f.isString(g)?f.toString(e)+f.toString(g):f.toNumber(e)+f.toNumber(g);case "-":return f.toNumber(e)-f.toNumber(g);case "*":return f.toNumber(e)*f.toNumber(g);case "/":return f.toNumber(e)/f.toNumber(g);case "%":return f.toNumber(e)%f.toNumber(g);default:throw Error(b.nodeErrorMessage(d,
"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(ga){throw ga;}}function T(a,d){try{if("AssignmentExpression"===d.left.type||"UpdateExpression"===d.left.type)throw Error(b.nodeErrorMessage(d.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===d.right.type||"UpdateExpression"===d.right.type)throw Error(b.nodeErrorMessage(d.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var c=C(a,d.left);if(f.isBoolean(c))switch(d.operator){case "||":if(!0===c)return c;var e=C(a,d.right);
if(f.isBoolean(e))return e;throw Error(b.nodeErrorMessage(d,"RUNTIME","ONLYORORAND"));case "\x26\x26":if(!1===c)return c;e=C(a,d.right);if(f.isBoolean(e))return e;throw Error(b.nodeErrorMessage(d,"RUNTIME","ONLYORORAND"));default:throw Error(b.nodeErrorMessage(d,"RUNTIME","ONLYORORAND"));}throw Error(b.nodeErrorMessage(d,"RUNTIME","ONLYBOOLEAN"));}catch(ea){throw ea;}}function N(a,d){var c;try{var e=d.name.toLowerCase();if(null!==a.localScope&&void 0!==a.localScope[e]){c=a.localScope[e];if(!0===c.valueset)return c.value;
c.value=C(a,c.node);c.valueset=!0;return c.value}if(void 0!==a.globalScope[e]){c=a.globalScope[e];if(!0===c.valueset)return c.value;c.value=C(a,c.node);c.valueset=!0;return c.value}throw Error(b.nodeErrorMessage(d,"RUNTIME","VARIABLENOTFOUND"));}catch(ea){throw ea;}}function S(a,c){try{if("Identifier"!==c.callee.type)throw Error(b.nodeErrorMessage(c,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==a.localScope&&void 0!==a.localScope[c.callee.name.toLowerCase()]){var e=a.localScope[c.callee.name.toLowerCase()];
if(e.value instanceof f.NativeFunction)return e.value.fn(a,c);if(e.value instanceof d)return L(a,c,e.value.definition);throw Error(b.nodeErrorMessage(c,"RUNTIME","NOTAFUNCTION"));}if(void 0!==a.globalScope[c.callee.name.toLowerCase()]){e=a.globalScope[c.callee.name.toLowerCase()];if(e.value instanceof f.NativeFunction)return e.value.fn(a,c);if(e.value instanceof d)return L(a,c,e.value.definition);throw Error(b.nodeErrorMessage(c,"RUNTIME","NOTAFUNCTION"));}throw Error(b.nodeErrorMessage(c,"RUNTIME",
"NOTFOUND"));}catch(W){throw W;}}function O(a){return null==a?"":f.isArray(a)||f.isImmutableArray(a)?"Array":f.isDate(a)?"Date":f.isString(a)?"String":f.isBoolean(a)?"Boolean":f.isNumber(a)?"Number":a instanceof n?"Attachment":a instanceof l?"Dictionary":a instanceof k?"Feature":a instanceof v?"Point":a instanceof y?"Polygon":a instanceof z?"Polyline":a instanceof w?"Multipoint":a instanceof r?"Extent":f.isFunctionParameter(a)?"Function":f.isFeatureSet(a)?"FeatureSet":f.isFeatureSetCollection(a)?
"FeatureSetCollection":a===f.voidOperation?"":"number"===typeof a&&isNaN(a)?"Number":"Unrecognised Type"}function V(a,b,d,c){try{var e=C(a,b.arguments[d]);if(f.equalityTest(e,c))return C(a,b.arguments[d+1]);var g=b.arguments.length-d;return 1===g?C(a,b.arguments[d]):2===g?null:3===g?C(a,b.arguments[d+2]):V(a,b,d+2,c)}catch(ma){throw ma;}}function Q(a,b,d,c){try{if(!0===c)return C(a,b.arguments[d+1]);if(3===b.arguments.length-d)return C(a,b.arguments[d+2]);var e=C(a,b.arguments[d+2]);if(!1===f.isBoolean(e))throw Error("WHEN needs boolean test conditions");
return Q(a,b,d+2,e)}catch(ga){throw ga;}}function J(a,b){var d=a.length,c=Math.floor(d/2);if(0===d)return[];if(1===d)return[a[0]];var e=J(a.slice(0,c),b);a=J(a.slice(c,d),b);for(d=[];0<e.length||0<a.length;)0<e.length&&0<a.length?(c=b(e[0],a[0]),isNaN(c)&&(c=0),0>=c?(d.push(e[0]),e=e.slice(1)):(d.push(a[0]),a=a.slice(1))):0<e.length?(d.push(e[0]),e=e.slice(1)):0<a.length&&(d.push(a[0]),a=a.slice(1));return d}function P(a,b,d){try{var c=a.body;if(d.length!==a.params.length)throw Error("Invalid Parameter calls to function.");
for(var e=0;e<d.length;e++)b.localScope[a.params[e].name.toLowerCase()]={value:d[e],valueset:!0,node:null};var g=C(b,c);if(g instanceof f.ReturnResult)return g.value;if(g===f.breakResult)throw Error("Cannot Break from a Function");if(g===f.continueResult)throw Error("Cannot Continue from a Function");return g instanceof f.ImplicitResult?g.value:g}catch(ma){throw ma;}}function L(a,b,d){return D(a,b,function(b,c,e){b={spatialReference:a.spatialReference,globalScope:a.globalScope,depthCounter:a.depthCounter+
1,console:a.console,lrucache:a.lrucache,localScope:{}};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");return P(d,b,e)})}function F(a){return function(){var b={spatialReference:a.context.spatialReference,console:a.context.console,lrucache:a.context.lrucache,localScope:{},depthCounter:a.context.depthCounter+1,globalScope:a.context.globalScope};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");return P(a.definition,b,arguments)}}function Y(a){console.log(a)}Object.defineProperty(c,
"__esModule",{value:!0});var X=0,R={};a.registerFunctions(R,D);t.registerFunctions(R,D);q.registerFunctions(R,D);e.registerFunctions(R,D);u.registerFunctions(R,D);m.registerFunctions(R,D);R["typeof"]=function(a,b){return D(a,b,function(a,b,d){f.pcCheck(d,1,1);a=O(d[0]);if("Unrecognised Type"===a)throw Error("Unrecognised Type");return a})};R.iif=function(a,b){try{f.pcCheck(null===b.arguments?[]:b.arguments,3,3);var d=C(a,b.arguments[0]);if(!1===f.isBoolean(d))throw Error("IF Function must have a boolean test condition");
var c=C(a,b.arguments[1]),e=C(a,b.arguments[2]);return!0===d?c:e}catch(ga){throw ga;}};R.decode=function(a,b){try{if(2>b.arguments.length)throw Error("Missing Parameters");if(2===b.arguments.length)return C(a,b.arguments[1]);if(0===(b.arguments.length-1)%2)throw Error("Must have a default value result.");var d=C(a,b.arguments[0]);return V(a,b,1,d)}catch(W){throw W;}};R.when=function(a,b){try{if(3>b.arguments.length)throw Error("Missing Parameters");if(0===b.arguments.length%2)throw Error("Must have a default value result.");
var d=C(a,b.arguments[0]);if(!1===f.isBoolean(d))throw Error("WHEN needs boolean test conditions");return Q(a,b,0,d)}catch(W){throw W;}};R.top=function(a,b){return D(a,b,function(a,b,d){f.pcCheck(d,2,2);if(f.isArray(d[0]))return f.toNumber(d[1])>=d[0].length?d[0].slice(0):d[0].slice(0,f.toNumber(d[1]));if(f.isImmutableArray(d[0]))return f.toNumber(d[1])>=d[0].length()?d[0].slice(0):d[0].slice(0,f.toNumber(d[1]));throw Error("Top cannot accept this parameter type");})};R.first=function(a,b){return D(a,
b,function(a,b,d){f.pcCheck(d,1,1);return f.isArray(d[0])?0===d[0].length?null:d[0][0]:f.isImmutableArray(d[0])?0===d[0].length()?null:d[0].get(0):null})};R.sort=function(a,b){return D(a,b,function(a,b,d){f.pcCheck(d,1,2);a=d[0];f.isImmutableArray(a)&&(a=a.toArray());if(!1===f.isArray(a))throw Error("Illegal Argument");if(1<d.length){if(!1===f.isFunctionParameter(d[1]))throw Error("Illegal Argument");var c=F(d[1]);return a=J(a,function(a,b){return c(a,b)})}if(0===a.length)return[];d={};for(b=0;b<
a.length;b++){var e=O(a[b]);""!==e&&(d[e]=!0)}if(!0===d.Array||!0===d.Dictionary||!0===d.Feature||!0===d.Point||!0===d.Polygon||!0===d.Polyline||!0===d.Multipoint||!0===d.Extent||!0===d.Function)return a.slice(0);b=0;var e="",g;for(g in d)b++,e=g;return a=1<b||"String"===e?J(a,function(a,b){if(null===a||void 0===a||a===f.voidOperation)return null===b||void 0===b||b===f.voidOperation?0:1;if(null===b||void 0===b||b===f.voidOperation)return-1;a=f.toString(a);b=f.toString(b);return a<b?-1:a===b?0:1}):
"Number"===e?J(a,function(a,b){return a-b}):"Boolean"===e?J(a,function(a,b){return a===b?0:b?-1:1}):"Date"===e?J(a,function(a,b){return b-a}):a.slice(0)})};for(var Z in R)R[Z]={value:new f.NativeFunction(R[Z]),valueset:!0,node:null};var da=function(){};da.prototype=R;da.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};da.prototype.pi={value:Math.PI,valueset:!0,node:null};c.functionHelper={fixSpatialReference:f.fixSpatialReference,parseArguments:B,standardFunction:D};c.extend=
function(a){for(var d={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:D,evaluateIdentifier:N,arcadeCustomFunctionHandler:F},c=0;c<a.length;c++)a[c].registerFunctions(d);for(var e in d.functions)R[e]={value:new f.NativeFunction(d.functions[e]),valueset:!0,node:null},da.prototype[e]=R[e];for(c=0;c<d.signatures.length;c++)b.addFunctionDeclaration(d.signatures[c],"async")};c.executeScript=function(a,b){var c=b.spatialReference;if(null===c||void 0===c)c=new A({wkid:102100});var e=
b.vars,g=b.customfunctions,m=new da;e||(e={});g||(g={});var h=new l({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});h.immutable=!1;m.textformatting={value:h,valueset:!0,node:null};for(var q in g)m[q]={value:new f.NativeFunction(g[q]),native:!0,valueset:!0,node:null};for(q in e)m[q]=e[q]&&"esri.Graphic"===e[q].declaredClass?{value:k.createFromGraphic(e[q]),valueset:!0,node:null}:{value:e[q],valueset:!0,node:null};a=C({spatialReference:c,globalScope:m,localScope:null,
console:b.console?b.console:Y,lrucache:b.lrucache,depthCounter:1},a.body[0].body);a instanceof f.ReturnResult&&(a=a.value);a instanceof f.ImplicitResult&&(a=a.value);a===f.voidOperation&&(a=null);if(a===f.breakResult)throw Error("Cannot return BREAK");if(a===f.continueResult)throw Error("Cannot return CONTINUE");if(a instanceof d)throw Error("Cannot return FUNCTION");if(a instanceof f.NativeFunction)throw Error("Cannot return FUNCTION");return a};c.extractFieldLiterals=function(a,d){void 0===d&&(d=
!1);return b.findFieldLiterals(a,d)};c.validateScript=function(a,d){return b.validateScript(a,d,"simple")};c.referencesMember=function(a,d){return b.referencesMember(a,d)};c.referencesFunction=function(a,d){return b.referencesFunction(a,d)};c.findFunctionCalls=function(a){return b.findFunctionCalls(a,!1)}})},"esri/arcade/parser":function(){define(["require","exports","./treeAnalysis","./lib/esprima"],function(p,c,n,l){Object.defineProperty(c,"__esModule",{value:!0});c.parseScript=function(c,d){void 0===
d&&(d=[]);c=l.parse("function _() { "+c+"\n}");if(null===c.body||void 0===c.body)throw Error("No formula provided.");if(0===c.body.length)throw Error("No formula provided.");if(0===c.body.length)throw Error("No formula provided.");if("BlockStatement"!==c.body[0].body.type)throw Error("Invalid formula content.");var h=n.validateLanguage(c);if(""!==h)throw Error(h);n.findScriptDependencies(c,d);return c};c.scriptCheck=function(c,d,h,g,f){var b=[];try{var a=l.parse("function _() { "+c+"\n}",{tolerant:!0,
loc:!0}),e=a.errors;if(0<e.length)for(var m=0;m<e.length;m++)b.push({line:e[m].lineNumber,character:e[m].column,reason:e[m].description});var k=n.checkScript(a,d,h,g,f);for(d=0;d<k.length;d++)b.push(k[d])}catch(u){try{"Unexpected token }"===u.description?(u.index=("function _() { "+c+"\n}").length-1,b.push({line:u.lineNumber,character:u.column,reason:"Unexpected end of script"})):b.push({line:u.lineNumber,character:u.column,reason:u.description})}catch(t){}}return b};c.extractFieldLiterals=function(c,
d){void 0===d&&(d=!1);return n.findFieldLiterals(c,d)};c.validateScript=function(c,d,h){return n.validateScript(c,d,h)};c.referencesMember=function(c,d){return n.referencesMember(c,d)};c.referencesFunction=function(c,d){return n.referencesFunction(c,d)}})},"esri/arcade/lib/esprima":function(){(function(p,c){"function"===typeof define&&define.amd?define(["exports"],c):"undefined"!==typeof exports?c(exports):c(p.esprima={})})(this,function(p){function c(a,b){if(!a)throw Error("ASSERT: "+b);}function n(a){return 48<=
a&&57>=a}function l(a){return 0<="0123456789abcdefABCDEF".indexOf(a)}function k(a){return 0<="01234567".indexOf(a)}function d(a){return 10===a||13===a||8232===a||8233===a}function h(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||92===a||128<=a&&Ja.NonAsciiIdentifierStart.test(String.fromCharCode(a))}function g(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||48<=a&&57>=a||92===a||128<=a&&Ja.NonAsciiIdentifierPart.test(String.fromCharCode(a))}function f(a){a=a.toLowerCase();switch(a.length){case 2:return"if"===
a||"in"===a;case 3:return"var"===a||"for"===a;case 4:return"else"===a;case 5:return"break"===a;case 6:return"return"===a;case 8:return"function"===a.toLowerCase()||"continue"===a;default:return!1}}function b(a,b,d,e,f){c("number"===typeof d,"Comment must have valid position");la.lastCommentStart>=d||(la.lastCommentStart=d,a={type:a,value:b},aa.range&&(a.range=[d,e]),aa.loc&&(a.loc=f),aa.comments.push(a),aa.attachComment&&(aa.leadingComments.push(a),aa.trailingComments.push(a)))}function a(a){var c,
e,f;c=U-a;for(e={start:{line:ra,column:U-ua-a}};U<ta;)if(f=ca.charCodeAt(U),++U,d(f)){aa.comments&&(a=ca.slice(c+a,U-1),e.end={line:ra,column:U-ua-1},b("Line",a,c,U-1,e));13===f&&10===ca.charCodeAt(U)&&++U;++ra;ua=U;return}aa.comments&&(a=ca.slice(c+a,U),e.end={line:ra,column:U-ua},b("Line",a,c,U,e))}function e(){var c,e;for(e=0===U;U<ta;)if(c=ca.charCodeAt(U),32===c||9===c||11===c||12===c||160===c||5760<=c&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(c))++U;
else if(d(c))++U,13===c&&10===ca.charCodeAt(U)&&++U,++ra,ua=U,e=!0;else if(47===c)if(c=ca.charCodeAt(U+1),47===c)++U,++U,a(2),e=!0;else if(42===c){++U;++U;a:{var f=c=void 0,g=void 0,g=void 0;aa.comments&&(c=U-2,f={start:{line:ra,column:U-ua-2}});for(;U<ta;)if(g=ca.charCodeAt(U),d(g))13===g&&10===ca.charCodeAt(U+1)&&++U,++ra,++U,ua=U,U>=ta&&N();else{if(42===g&&47===ca.charCodeAt(U+1)){++U;++U;aa.comments&&(g=ca.slice(c+2,U-2),f.end={line:ra,column:U-ua},b("Block",g,c,U,f));break a}++U}N()}}else break;
else if(e&&45===c)if(45===ca.charCodeAt(U+1)&&62===ca.charCodeAt(U+2))U+=3,a(3);else break;else if(60===c)if("!--"===ca.slice(U+1,U+4))++U,++U,++U,++U,a(4);else break;else break}function m(a){var b,d,c=0;b="u"===a?4:2;for(a=0;a<b;++a)if(U<ta&&l(ca[U]))d=ca[U++],c=16*c+"0123456789abcdef".indexOf(d.toLowerCase());else return"";return String.fromCharCode(c)}function q(){var a,b;a=ca.charCodeAt(U++);b=String.fromCharCode(a);92===a&&(117!==ca.charCodeAt(U)&&N(),++U,(a=m("u"))&&"\\"!==a&&h(a.charCodeAt(0))||
N(),b=a);for(;U<ta;){a=ca.charCodeAt(U);if(!g(a))break;++U;b+=String.fromCharCode(a);92===a&&(b=b.substr(0,b.length-1),117!==ca.charCodeAt(U)&&N(),++U,(a=m("u"))&&"\\"!==a&&g(a.charCodeAt(0))||N(),b+=a)}return b}function u(){var a=U,b=ca.charCodeAt(U),d,c=ca[U];switch(b){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++U,aa.tokenize&&(40===b?aa.openParenToken=aa.tokens.length:123===b&&(aa.openCurlyToken=aa.tokens.length)),{type:fa.Punctuator,
value:String.fromCharCode(b),lineNumber:ra,lineStart:ua,start:a,end:U};default:if(d=ca.charCodeAt(U+1),61===d)switch(b){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return U+=2,{type:fa.Punctuator,value:String.fromCharCode(b)+String.fromCharCode(d),lineNumber:ra,lineStart:ua,start:a,end:U};case 33:case 61:return U+=2,61===ca.charCodeAt(U)&&++U,{type:fa.Punctuator,value:ca.slice(a,U),lineNumber:ra,lineStart:ua,start:a,end:U}}}b=ca.substr(U,4);if("\x3e\x3e\x3e\x3d"===
b)return U+=4,{type:fa.Punctuator,value:b,lineNumber:ra,lineStart:ua,start:a,end:U};b=b.substr(0,3);if("\x3e\x3e\x3e"===b||"\x3c\x3c\x3d"===b||"\x3e\x3e\x3d"===b)return U+=3,{type:fa.Punctuator,value:b,lineNumber:ra,lineStart:ua,start:a,end:U};b=b.substr(0,2);if(c===b[1]&&0<="+-\x3c\x3e\x26|".indexOf(c)||"\x3d\x3e"===b)return U+=2,{type:fa.Punctuator,value:b,lineNumber:ra,lineStart:ua,start:a,end:U};if(0<="\x3c\x3e\x3d!+-*%\x26|^/".indexOf(c))return++U,{type:fa.Punctuator,value:c,lineNumber:ra,lineStart:ua,
start:a,end:U};N()}function t(){var a,b,d;d=ca[U];c(n(d.charCodeAt(0))||"."===d,"Numeric literal must start with a decimal digit or a decimal point");b=U;a="";if("."!==d){a=ca[U++];d=ca[U];if("0"===a){if("x"===d||"X"===d){++U;for(a="";U<ta&&l(ca[U]);)a+=ca[U++];0===a.length&&N();h(ca.charCodeAt(U))&&N();return{type:fa.NumericLiteral,value:parseInt("0x"+a,16),lineNumber:ra,lineStart:ua,start:b,end:U}}if("b"===d||"B"===d){++U;for(d="";U<ta;){a=ca[U];if("0"!==a&&"1"!==a)break;d+=ca[U++]}0===d.length&&
N();U<ta&&(a=ca.charCodeAt(U),(h(a)||n(a))&&N());return{type:fa.NumericLiteral,value:parseInt(d,2),lineNumber:ra,lineStart:ua,start:b,end:U}}if("o"===d||"O"===d){k(d)?(d=!0,a="0"+ca[U++]):(d=!1,++U,a="");for(;U<ta&&k(ca[U]);)a+=ca[U++];d||0!==a.length||N();(h(ca.charCodeAt(U))||n(ca.charCodeAt(U)))&&N();return{type:fa.NumericLiteral,value:parseInt(a,8),octal:d,lineNumber:ra,lineStart:ua,start:b,end:U}}}for(;n(ca.charCodeAt(U));)a+=ca[U++];d=ca[U]}if("."===d){for(a+=ca[U++];n(ca.charCodeAt(U));)a+=
ca[U++];d=ca[U]}if("e"===d||"E"===d){a+=ca[U++];d=ca[U];if("+"===d||"-"===d)a+=ca[U++];if(n(ca.charCodeAt(U)))for(;n(ca.charCodeAt(U));)a+=ca[U++];else N()}h(ca.charCodeAt(U))&&N();return{type:fa.NumericLiteral,value:parseFloat(a),lineNumber:ra,lineStart:ua,start:b,end:U}}function r(){ka=null;e();K("Regular Expression language structures not supported")}function x(){e();r()}function w(){var a;a=aa.tokens[aa.tokens.length-1];if(!a)return x();if("Punctuator"===a.type){if("]"===a.value)return u();if(")"===
a.value)return a=aa.tokens[aa.openParenToken-1],!a||"Keyword"!==a.type||"if"!==a.value.toLowerCase()&&"while"!==a.value.toLowerCase()&&"for"!==a.value.toLowerCase()&&"with"!==a.value.toLowerCase()?u():x();if("}"===a.value){if(aa.tokens[aa.openCurlyToken-3]&&"Keyword"===aa.tokens[aa.openCurlyToken-3].type){if(a=aa.tokens[aa.openCurlyToken-4],!a)return u()}else if(aa.tokens[aa.openCurlyToken-4]&&"Keyword"===aa.tokens[aa.openCurlyToken-4].type){if(a=aa.tokens[aa.openCurlyToken-5],!a)return x()}else return u();
if(0<=La.indexOf(a.value))return u()}return x()}return"Keyword"===a.type&&"this"!==a.value?x():u()}function v(){var a;e();if(U>=ta)return{type:fa.EOF,lineNumber:ra,lineStart:ua,start:U,end:U};a=ca.charCodeAt(U);if(h(a)){var b;a=U;if(92===ca.charCodeAt(U))b=q();else a:{var r;for(b=U++;U<ta;){r=ca.charCodeAt(U);if(92===r){U=b;b=q();break a}if(g(r))++U;else break}b=ca.slice(b,U)}return{type:1===b.length?fa.Identifier:f(b)?fa.Keyword:"null"===b.toLowerCase()?fa.NullLiteral:"true"===b.toLowerCase()||"false"===
b.toLowerCase()?fa.BooleanLiteral:fa.Identifier,value:b,lineNumber:ra,lineStart:ua,start:a,end:U}}if(40===a||41===a||59===a)return u();if(39===a||34===a){var x="",v,y,p;r=!1;var z,A;z=ra;A=ua;a=ca[U];c("'"===a||'"'===a,"String literal must starts with a quote");b=U;for(++U;U<ta;)if(v=ca[U++],v===a){a="";break}else if("\\"===v)if((v=ca[U++])&&d(v.charCodeAt(0)))++ra,"\r"===v&&"\n"===ca[U]&&++U,ua=U;else switch(v){case "u":case "x":if("{"===ca[U]){++U;y=v=void 0;v=ca[U];y=0;for("}"===v&&N();U<ta;){v=
ca[U++];if(!l(v))break;y=16*y+"0123456789abcdef".indexOf(v.toLowerCase())}(1114111<y||"}"!==v)&&N();v=65535>=y?String.fromCharCode(y):String.fromCharCode((y-65536>>10)+55296,(y-65536&1023)+56320);x+=v}else p=U,(y=m(v))?x+=y:(U=p,x+=v);break;case "n":x+="\n";break;case "r":x+="\r";break;case "t":x+="\t";break;case "b":x+="\b";break;case "f":x+="\f";break;case "v":x+="\x0B";break;default:k(v)?(y="01234567".indexOf(v),0!==y&&(r=!0),U<ta&&k(ca[U])&&(r=!0,y=8*y+"01234567".indexOf(ca[U++]),0<="0123".indexOf(v)&&
U<ta&&k(ca[U])&&(y=8*y+"01234567".indexOf(ca[U++]))),x+=String.fromCharCode(y)):x+=v}else if(d(v.charCodeAt(0)))break;else x+=v;""!==a&&N();return{type:fa.StringLiteral,value:x,octal:r,startLineNumber:z,startLineStart:A,lineNumber:ra,lineStart:ua,start:b,end:U}}return 46===a?n(ca.charCodeAt(U+1))?t():u():n(a)?t():aa.tokenize&&47===a?w():u()}function y(){var a,b,d;e();a={start:{line:ra,column:U-ua}};b=v();a.end={line:ra,column:U-ua};b.type!==fa.EOF&&(d=ca.slice(b.start,b.end),a={type:Ca[b.type],value:d,
range:[b.start,b.end],loc:a},b.regex&&(a.regex={pattern:b.regex.pattern,flags:b.regex.flags}),aa.tokens.push(a));return b}function z(){var a;a=ka;U=a.end;ra=a.lineNumber;ua=a.lineStart;ka="undefined"!==typeof aa.tokens?y():v();U=a.end;ra=a.lineNumber;ua=a.lineStart;return a}function A(){var a,b,d;a=U;b=ra;d=ua;ka="undefined"!==typeof aa.tokens?y():v();U=a;ra=b;ua=d}function B(){this.line=ra;this.column=U-ua}function D(){this.start=new B;this.end=null}function C(a){this.start=a.type===fa.StringLiteral?
{line:a.startLineNumber,column:a.start-a.startLineStart}:{line:a.lineNumber,column:a.start-a.lineStart};this.end=null}function E(){U=ka.start;ka.type===fa.StringLiteral?(ra=ka.startLineNumber,ua=ka.startLineStart):(ra=ka.lineNumber,ua=ka.lineStart);aa.range&&(this.range=[U,0]);aa.loc&&(this.loc=new D)}function H(a){aa.range&&(this.range=[a.start,0]);aa.loc&&(this.loc=new C(a))}function G(){var a,b,d,c;a=U;b=ra;d=ua;e();c=ra!==b;U=a;ra=b;ua=d;return c}function I(a,b,d){var c=Error("Line "+a+": "+d);
c.index=b;c.lineNumber=a;c.column=b-ua+1;c.description=d;return c}function K(a){var b,d;b=Array.prototype.slice.call(arguments,1);d=a.replace(/%(\d)/g,function(a,d){c(d<b.length,"Message reference must be in range");return b[d]});throw I(ra,U,d);}function M(a){var b,d;b=Array.prototype.slice.call(arguments,1);d=a.replace(/%(\d)/g,function(a,d){c(d<b.length,"Message reference must be in range");return b[d]});d=I(ra,U,d);if(aa.errors)aa.errors.push(d);else throw d;}function T(a,b){var d=wa.UnexpectedToken;
a&&(d=b?b:a.type===fa.EOF?wa.UnexpectedEOS:a.type===fa.Identifier?wa.UnexpectedIdentifier:a.type===fa.NumericLiteral?wa.UnexpectedNumber:a.type===fa.StringLiteral?wa.UnexpectedString:wa.UnexpectedToken);d=d.replace("%0",a?a.value:"ILLEGAL");return a&&"number"===typeof a.lineNumber?I(a.lineNumber,a.start,d):I(ra,U,d)}function N(a,b){throw T(a,b);}function S(a,b){a=T(a,b);if(aa.errors)aa.errors.push(a);else throw a;}function O(a){var b=z();b.type===fa.Punctuator&&b.value===a||N(b)}function V(){var a;
aa.errors?(a=ka,a.type===fa.Punctuator&&","===a.value?z():a.type===fa.Punctuator&&";"===a.value?(z(),S(a)):S(a,wa.UnexpectedToken)):O(",")}function Q(a){var b=z();b.type===fa.Keyword&&b.value.toLowerCase()===a.toLowerCase()||N(b)}function J(a){return ka.type===fa.Punctuator&&ka.value===a}function P(a){return ka.type===fa.Keyword&&ka.value.toLowerCase()===a.toLowerCase()}function L(){var a;59===ca.charCodeAt(U)||J(";")?z():(a=ra,e(),ra===a&&(ka.type===fa.EOF||J("}")||N(ka)))}function F(a){return a.type===
oa.Identifier||a.type===oa.MemberExpression}function Y(a,b){var d,c=new E;b=ya;d=Ba();ya=b;return c.finishFunctionExpression(null,a,[],d)}function X(){var a,b;a=ya;ya=!0;b=Ea();b=Y(b.params);ya=a;return b}function R(){var a,b=new E;a=z();return a.type===fa.StringLiteral||a.type===fa.NumericLiteral?(ya&&a.octal&&S(a,wa.StrictOctalLiteral),b.finishLiteral(a)):b.finishIdentifier(a.value)}function Z(){var a,b,d,c=new E;a=ka;if(a.type===fa.Identifier)return b=R(),"get"!==a.value||J(":")||J("(")?"set"!==
a.value||J(":")||J("(")?J(":")?(z(),a=sa(),c.finishProperty("init",b,a,!1,!1)):J("(")?(a=X(),c.finishProperty("init",b,a,!0,!1)):c.finishProperty("init",b,b,!1,!0):(b=R(),O("("),a=ka,a.type!==fa.Identifier?(O(")"),S(a),a=Y([])):(d=[va()],O(")"),a=Y(d,a)),c.finishProperty("set",b,a,!1,!1)):(b=R(),O("("),O(")"),a=Y([]),c.finishProperty("get",b,a,!1,!1));if(a.type===fa.EOF||a.type===fa.Punctuator)N(a);else{b=R();if(J(":"))return z(),a=sa(),c.finishProperty("init",b,a,!1,!1);if(J("("))return a=X(),c.finishProperty("init",
b,a,!0,!1);N(z())}}function da(a){var b=[],d,c,e={},f=String,g=new E;for(!0!==a&&O("{");!J("}");)a=Z(),d=a.key.type===oa.Identifier?a.key.name:f(a.key.value),c="init"===a.kind?Da.Data:"get"===a.kind?Da.Get:Da.Set,d="$"+d,Object.prototype.hasOwnProperty.call(e,d)?(e[d]===Da.Data?ya&&c===Da.Data?M(wa.StrictDuplicateProperty):c!==Da.Data&&M(wa.AccessorDataProperty):c===Da.Data?M(wa.AccessorDataProperty):e[d]&c&&M(wa.AccessorGetSet),e[d]|=c):e[d]=c,b.push(a),J("}")||V();O("}");return g.finishObjectExpression(b)}
function ja(){var a,b,d,c;if(J("("))return O("("),J(")")?(z(),b=Ia.ArrowParameterPlaceHolder):(++la.parenthesisCount,b=ia(),O(")")),b;if(J("[")){b=[];var e=new E;for(O("[");!J("]");)J(",")?(z(),b.push(null)):(b.push(sa()),J("]")||O(","));z();return e.finishArrayExpression(b)}if(J("{"))return da();a=ka.type;c=new E;if(a===fa.Identifier)d=c.finishIdentifier(z().value);else if(a===fa.StringLiteral||a===fa.NumericLiteral)ya&&ka.octal&&S(ka,wa.StrictOctalLiteral),d=c.finishLiteral(z());else if(a===fa.Keyword){if(P("function")){c=
null;var f;d=[];var g=[],m,h=new E;Q("function");J("(")||(c=va());f=Ea(b);d=f.params;g=f.defaults;a=f.stricted;b=f.firstRestricted;f.message&&(e=f.message);m=ya;f=Ba();ya&&b&&N(b,e);ya&&a&&S(a,e);ya=m;return h.finishFunctionExpression(c,d,g,f)}P("this")?(z(),d=c.finishThisExpression()):N(z())}else a===fa.BooleanLiteral?(b=z(),b.value="true"===b.value.toLowerCase(),d=c.finishLiteral(b)):a===fa.NullLiteral?(b=z(),b.value=null,d=c.finishLiteral(b)):J("/")||J("/\x3d")?(d="undefined"!==typeof aa.tokens?
c.finishLiteral(x()):c.finishLiteral(r()),A()):N(z());return d}function ba(){var a=[];O("(");if(!J(")"))for(;U<ta;){a.push(sa());if(J(")"))break;V()}O(")");return a}function ha(){O(".");var a,b=new E;a=z();a.type===fa.Identifier||a.type===fa.Keyword||a.type===fa.BooleanLiteral||a.type===fa.NullLiteral||N(a);return b.finishIdentifier(a.value)}function W(){var a;O("[");a=ia();O("]");return a}function ea(){var a,b,d=new E;Q("new");var e;c(la.allowIn,"callee of new expression always allow in keyword.");
e=ka;for(a=P("new")?ea():ja();;)if(J("["))b=W(),a=(new H(e)).finishMemberExpression("[",a,b);else if(J("."))b=ha(),a=(new H(e)).finishMemberExpression(".",a,b);else break;b=J("(")?ba():[];return d.finishNewExpression(a,b)}function ga(){var a,b,d=ka,c,e=la.allowIn;b=ka;la.allowIn=!0;for(a=P("new")?ea():ja();;)if(J("."))c=ha(),a=(new H(b)).finishMemberExpression(".",a,c);else if(J("("))c=ba(),a=(new H(b)).finishCallExpression(a,c);else if(J("["))c=W(),a=(new H(b)).finishMemberExpression("[",a,c);else break;
la.allowIn=e;ka.type!==fa.Punctuator||!J("++")&&!J("--")||G()||(F(a)||M(wa.InvalidLHSInAssignment),b=z(),a=(new H(d)).finishPostfixExpression(b.value,a));return a}function ma(){var a,b,d;ka.type!==fa.Punctuator&&ka.type!==fa.Keyword?b=ga():J("++")||J("--")?(d=ka,a=z(),b=ma(),F(b)||M(wa.InvalidLHSInAssignment),b=(new H(d)).finishUnaryExpression(a.value,b)):J("+")||J("-")||J("~")||J("!")?(d=ka,a=z(),b=ma(),b=(new H(d)).finishUnaryExpression(a.value,b)):P("delete")||P("void")||P("typeof")?(d=ka,a=z(),
b=ma(),b=(new H(d)).finishUnaryExpression(a.value,b),ya&&"delete"===b.operator&&b.argument.type===oa.Identifier&&M(wa.StrictDelete)):b=ga();return b}function qa(a,b){var d=0;if(a.type!==fa.Punctuator&&a.type!==fa.Keyword)return 0;switch(a.value){case "||":d=1;break;case "\x26\x26":d=2;break;case "|":d=3;break;case "^":d=4;break;case "\x26":d=5;break;case "\x3d\x3d":case "!\x3d":case "\x3d\x3d\x3d":case "!\x3d\x3d":d=6;break;case "\x3c":case "\x3e":case "\x3c\x3d":case "\x3e\x3d":case "instanceof":d=
7;break;case "in":d=b?7:0;break;case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":d=8;break;case "+":case "-":d=9;break;case "*":case "/":case "%":d=11}return d}function na(){var a,b,d,c,e,f;a=ka;b=ma();if(b===Ia.ArrowParameterPlaceHolder)return b;d=ka;c=qa(d,la.allowIn);if(0===c)return b;d.prec=c;z();a=[a,ka];f=ma();for(e=[b,d,f];0<(c=qa(ka,la.allowIn));){for(;2<e.length&&c<=e[e.length-2].prec;)f=e.pop(),d=e.pop().value,b=e.pop(),a.pop(),b=(new H(a[a.length-1])).finishBinaryExpression(d,b,f),e.push(b);
d=z();d.prec=c;e.push(d);a.push(ka);b=ma();e.push(b)}c=e.length-1;b=e[c];for(a.pop();1<c;)b=(new H(a.pop())).finishBinaryExpression(e[c-1].value,e[c-2],b),c-=2;return b}function pa(a){var b,d,c,e,f,g,m;e=[];f=[];g=0;m={paramSet:{}};b=0;for(d=a.length;b<d;b+=1)if(c=a[b],c.type===oa.Identifier)e.push(c),f.push(null),Fa(m,c,c.name);else if(c.type===oa.AssignmentExpression)e.push(c.left),f.push(c.right),++g,Fa(m,c.left,c.left.name);else return null;m.message===wa.StrictParamDupe&&(a=ya?m.stricted:m.firstRestricted,
N(a,m.message));0===g&&(f=[]);return{params:e,defaults:f,rest:null,stricted:m.stricted,firstRestricted:m.firstRestricted,message:m.message}}function sa(){var a,b,d,c,e;a=la.parenthesisCount;b=e=ka;var f,g;g=ka;d=na();d!==Ia.ArrowParameterPlaceHolder&&J("?")&&(z(),f=la.allowIn,la.allowIn=!0,b=sa(),la.allowIn=f,O(":"),f=sa(),d=(new H(g)).finishConditionalExpression(d,b,f));if(d===Ia.ArrowParameterPlaceHolder||J("\x3d\x3e"))if(la.parenthesisCount===a||la.parenthesisCount===a+1)if(d.type===oa.Identifier?
c=pa([d]):d.type===oa.AssignmentExpression?c=pa([d]):d.type===oa.SequenceExpression?c=pa(d.expressions):d===Ia.ArrowParameterPlaceHolder&&(c=pa([])),c)return a=c,e=new H(e),O("\x3d\x3e"),c=ya,d=J("{")?Ba():sa(),ya&&a.firstRestricted&&N(a.firstRestricted,a.message),ya&&a.stricted&&S(a.stricted,a.message),ya=c,e.finishArrowFunctionExpression(a.params,a.defaults,d,d.type!==oa.BlockStatement);ka.type!==fa.Punctuator?a=!1:(a=ka.value,a="\x3d"===a||"*\x3d"===a||"/\x3d"===a||"%\x3d"===a||"+\x3d"===a||"-\x3d"===
a||"\x3c\x3c\x3d"===a||"\x3e\x3e\x3d"===a||"\x3e\x3e\x3e\x3d"===a||"\x26\x3d"===a||"^\x3d"===a||"|\x3d"===a);a&&(F(d)||M(wa.InvalidLHSInAssignment),b=z(),a=sa(),d=(new H(e)).finishAssignmentExpression(b.value,d,a));return d}function ia(){var a,b=ka;a=sa();if(J(",")){for(a=[a];U<ta&&J(",");)z(),a.push(sa());a=(new H(b)).finishSequenceExpression(a)}return a}function va(){var a,b=new E;a=z();a.type!==fa.Identifier&&N(a);return b.finishIdentifier(a.value)}function Aa(a){var b=null,d,c=new E;d=va();"const"===
a?(O("\x3d"),b=sa()):J("\x3d")&&(z(),b=sa());return c.finishVariableDeclarator(d,b)}function za(a){var b=[];do{b.push(Aa(a));if(!J(","))break;z()}while(U<ta);return b}function xa(a){var b=ka.type,d,c;b===fa.EOF&&N(ka);if(b===fa.Punctuator&&"{"===ka.value){if(a){O("{");var e=ka;a=U;d=ra;c=ua;z();b=J(":");ka=e;U=a;ra=d;ua=c;if((ka.type===fa.Identifier||ka.type===fa.StringLiteral)&&b)return da(!0);a=new E;for(d=[];U<ta&&!J("}");){c=Ga();if("undefined"===typeof c)break;d.push(c)}O("}");return a.finishBlockStatement(d)}return da()}a=
new E;if(b===fa.Punctuator)switch(ka.value){case ";":return a=new E,O(";"),a.finishEmptyStatement();case "(":return d=ia(),L(),a.finishExpressionStatement(d)}else if(b===fa.Keyword)switch(ka.value.toLowerCase()){case "break":return d=null,Q("break"),59===ca.charCodeAt(U)?(z(),la.inIteration||la.inSwitch||K(wa.IllegalBreak),a=a.finishBreakStatement(null)):G()?(la.inIteration||la.inSwitch||K(wa.IllegalBreak),a=a.finishBreakStatement(null)):(ka.type===fa.Identifier&&(d=va(),c="$"+d.name,Object.prototype.hasOwnProperty.call(la.labelSet,
c)||K(wa.UnknownLabel,d.name)),L(),null!==d||la.inIteration||la.inSwitch||K(wa.IllegalBreak),a=a.finishBreakStatement(d)),a;case "continue":return d=null,Q("continue"),59===ca.charCodeAt(U)?(z(),la.inIteration||K(wa.IllegalContinue),a=a.finishContinueStatement(null)):G()?(la.inIteration||K(wa.IllegalContinue),a=a.finishContinueStatement(null)):(ka.type===fa.Identifier&&(d=va(),c="$"+d.name,Object.prototype.hasOwnProperty.call(la.labelSet,c)||K(wa.UnknownLabel,d.name)),L(),null!==d||la.inIteration||
K(wa.IllegalContinue),a=a.finishContinueStatement(d)),a;case "for":var f,g,m;g=la.allowIn;f=b=e=null;Q("for");O("(");if(J(";"))z();else{if(P("var")){la.allowIn=!1;var k=new E;f=z();m=za();f=k.finishVariableDeclaration(m,f.value);la.allowIn=g;1===f.declarations.length&&P("in")&&(z(),d=f,c=ia(),f=null)}else la.allowIn=!1,f=ia(),la.allowIn=g,P("in")&&(F(f)||M(wa.InvalidLHSInForIn),z(),d=f,c=ia(),f=null);"undefined"===typeof d&&O(";")}"undefined"===typeof d&&(J(";")||(b=ia()),O(";"),J(")")||(e=ia()));
O(")");m=la.inIteration;la.inIteration=!0;g=xa(!0);la.inIteration=m;return"undefined"===typeof d?a.finishForStatement(f,b,e,g):a.finishForInStatement(d,c,g);case "function":return Ka(a);case "if":return Q("if"),O("("),d=ia(),O(")"),c=xa(!0),P("else")?(z(),b=xa(!0)):b=null,a.finishIfStatement(d,c,b);case "return":return d=null,Q("return"),la.inFunctionBody||M(wa.IllegalReturn),32===ca.charCodeAt(U)&&h(ca.charCodeAt(U+1))?(d=ia(),L(),a=a.finishReturnStatement(d)):G()?a=a.finishReturnStatement(null):
(J(";")||J("}")||ka.type===fa.EOF||(d=ia()),L(),a=a.finishReturnStatement(d)),a;case "var":return Q("var"),d=za(),L(),a.finishVariableDeclaration(d,"var")}d=ia();if(d.type===oa.Identifier&&J(":"))return z(),b="$"+d.name,Object.prototype.hasOwnProperty.call(la.labelSet,b)&&K(wa.Redeclaration,"Label",d.name),la.labelSet[b]=!0,c=xa(!1),delete la.labelSet[b],a.finishLabeledStatement(d,c);L();return a.finishExpressionStatement(d)}function Ba(){var a,b=[],d,c,e,f,g,m=new E;for(O("{");U<ta&&ka.type===fa.StringLiteral;){d=
ka;a=Ga();b.push(a);if(a.expression.type!==oa.Literal)break;a=ca.slice(d.start+1,d.end-1);"use strict"===a?(ya=!0,c&&S(c,wa.StrictOctalLiteral)):!c&&d.octal&&(c=d)}d=la.labelSet;c=la.inIteration;e=la.inSwitch;f=la.inFunctionBody;g=la.parenthesizedCount;la.labelSet={};la.inIteration=!1;la.inSwitch=!1;la.inFunctionBody=!0;for(la.parenthesizedCount=0;U<ta&&!J("}");){a=Ga();if("undefined"===typeof a)break;b.push(a)}O("}");la.labelSet=d;la.inIteration=c;la.inSwitch=e;la.inFunctionBody=f;la.parenthesizedCount=
g;return m.finishBlockStatement(b)}function Fa(a,b,d){d="$"+d;ya?Object.prototype.hasOwnProperty.call(a.paramSet,d)&&(a.stricted=b,a.message=wa.StrictParamDupe):!a.firstRestricted&&Object.prototype.hasOwnProperty.call(a.paramSet,d)&&(a.firstRestricted=b,a.message=wa.StrictParamDupe);a.paramSet[d]=!0}function Ea(a){a={params:[],defaultCount:0,defaults:[],firstRestricted:a};O("(");if(!J(")"))for(a.paramSet={};U<ta;){var b=a,d=void 0,c=void 0,e=void 0,d=ka,c=va();Fa(b,d,d.value);J("\x3d")&&(z(),e=sa(),
++b.defaultCount);b.params.push(c);b.defaults.push(e);if(J(")"))break;O(",")}O(")");0===a.defaultCount&&(a.defaults=[]);return{params:a.params,defaults:a.defaults,stricted:a.stricted,firstRestricted:a.firstRestricted,message:a.message}}function Ka(){var a,b=[],d=[],c,e,f,g,m,h=new E;Q("function");a=va();c=Ea(f);b=c.params;d=c.defaults;e=c.stricted;f=c.firstRestricted;c.message&&(g=c.message);m=ya;c=Ba();ya&&f&&N(f,g);ya&&e&&S(e,g);ya=m;return h.finishFunctionDeclaration(a,b,d,c)}function Ga(){if(ka.type===
fa.Keyword)return"function"===ka.value.toLowerCase()?Ka():xa(!1);if(ka.type!==fa.EOF)return xa(!1)}function Ha(){var a,b,d,c=[];for(a=0;a<aa.tokens.length;++a)b=aa.tokens[a],d={type:b.type,value:b.value},b.regex&&(d.regex={pattern:b.regex.pattern,flags:b.regex.flags}),aa.range&&(d.range=b.range),aa.loc&&(d.loc=b.loc),c.push(d);aa.tokens=c}var fa,Ca,La,oa,Ia,Da,wa,Ja,ca,ya,U,ra,ua,ta,ka,la,aa;fa={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,
RegularExpression:9};Ca={};Ca[fa.BooleanLiteral]="Boolean";Ca[fa.EOF]="\x3cend\x3e";Ca[fa.Identifier]="Identifier";Ca[fa.Keyword]="Keyword";Ca[fa.NullLiteral]="Null";Ca[fa.NumericLiteral]="Numeric";Ca[fa.Punctuator]="Punctuator";Ca[fa.StringLiteral]="String";Ca[fa.RegularExpression]="RegularExpression";La="( { [ in typeof instanceof new return case delete throw void \x3d +\x3d -\x3d *\x3d /\x3d %\x3d \x3c\x3c\x3d \x3e\x3e\x3d \x3e\x3e\x3e\x3d \x26\x3d |\x3d ^\x3d , + - * / % ++ -- \x3c\x3c \x3e\x3e \x3e\x3e\x3e \x26 | ^ ! ~ \x26\x26 || ? : \x3d\x3d\x3d \x3d\x3d \x3e\x3d \x3c\x3d \x3c \x3e !\x3d !\x3d\x3d".split(" ");
oa={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",
FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator"};Ia={ArrowParameterPlaceHolder:{type:"ArrowParameterPlaceHolder"}};
Da={Data:1,Get:2,Set:4};wa={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",
MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",
StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",
AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"};Ja={NonAsciiIdentifierStart:/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b2\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/,
NonAsciiIdentifierPart:/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0-\u08b2\u08e4-\u0963\u0966-\u096f\u0971-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c00-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d01-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191e\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1ab0-\u1abd\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1cf8\u1cf9\u1d00-\u1df5\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua69d\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\ua9e0-\ua9fe\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe2d\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/};
H.prototype=E.prototype={processComment:function(){var a,b,d,c=aa.bottomRightStack,e,f,g=c[c.length-1];if(!(this.type===oa.Program&&0<this.body.length)){if(0<aa.trailingComments.length){d=[];for(e=aa.trailingComments.length-1;0<=e;--e)f=aa.trailingComments[e],f.range[0]>=this.range[1]&&(d.unshift(f),aa.trailingComments.splice(e,1));aa.trailingComments=[]}else g&&g.trailingComments&&g.trailingComments[0].range[0]>=this.range[1]&&(d=g.trailingComments,delete g.trailingComments);if(g)for(;g&&g.range[0]>=
this.range[0];)a=g,g=c.pop();if(a)a.leadingComments&&a.leadingComments[a.leadingComments.length-1].range[1]<=this.range[0]&&(this.leadingComments=a.leadingComments,a.leadingComments=void 0);else if(0<aa.leadingComments.length)for(b=[],e=aa.leadingComments.length-1;0<=e;--e)f=aa.leadingComments[e],f.range[1]<=this.range[0]&&(b.unshift(f),aa.leadingComments.splice(e,1));b&&0<b.length&&(this.leadingComments=b);d&&0<d.length&&(this.trailingComments=d);c.push(this)}},finish:function(){aa.range&&(this.range[1]=
U);aa.loc&&(this.loc.end=new B,aa.source&&(this.loc.source=aa.source));aa.attachComment&&this.processComment()},finishArrayExpression:function(a){this.type=oa.ArrayExpression;this.elements=a;this.finish();return this},finishAssignmentExpression:function(a,b,d){this.type=oa.AssignmentExpression;this.operator=a;this.left=b;this.right=d;this.finish();return this},finishBinaryExpression:function(a,b,d){this.type="||"===a||"\x26\x26"===a?oa.LogicalExpression:oa.BinaryExpression;this.operator=a;this.left=
b;this.right=d;this.finish();return this},finishBlockStatement:function(a){this.type=oa.BlockStatement;this.body=a;this.finish();return this},finishBreakStatement:function(a){this.type=oa.BreakStatement;this.label=a;this.finish();return this},finishCallExpression:function(a,b){this.type=oa.CallExpression;this.callee=a;this.arguments=b;this.finish();return this},finishConditionalExpression:function(a,b,d){this.type=oa.ConditionalExpression;this.test=a;this.consequent=b;this.alternate=d;this.finish();
return this},finishContinueStatement:function(a){this.type=oa.ContinueStatement;this.label=a;this.finish();return this},finishEmptyStatement:function(){this.type=oa.EmptyStatement;this.finish();return this},finishExpressionStatement:function(a){this.type=oa.ExpressionStatement;this.expression=a;this.finish();return this},finishForStatement:function(a,b,d,c){this.type=oa.ForStatement;this.init=a;this.test=b;this.update=d;this.body=c;this.finish();return this},finishForInStatement:function(a,b,d){this.type=
oa.ForInStatement;this.left=a;this.right=b;this.body=d;this.each=!1;this.finish();return this},finishFunctionDeclaration:function(a,b,d,c){this.type=oa.FunctionDeclaration;this.id=a;this.params=b;this.defaults=d;this.body=c;this.rest=null;this.expression=this.generator=!1;this.finish();return this},finishFunctionExpression:function(a,b,d,c){this.type=oa.FunctionExpression;this.id=a;this.params=b;this.defaults=d;this.body=c;this.rest=null;this.expression=this.generator=!1;this.finish();return this},
finishIdentifier:function(a){this.type=oa.Identifier;this.name=a;this.finish();return this},finishIfStatement:function(a,b,d){this.type=oa.IfStatement;this.test=a;this.consequent=b;this.alternate=d;this.finish();return this},finishLiteral:function(a){this.type=oa.Literal;this.value=a.value;this.raw=ca.slice(a.start,a.end);a.regex&&(this.regex=a.regex);this.finish();return this},finishMemberExpression:function(a,b,d){this.type=oa.MemberExpression;this.computed="["===a;this.object=b;this.property=d;
this.finish();return this},finishObjectExpression:function(a){this.type=oa.ObjectExpression;this.properties=a;this.finish();return this},finishPostfixExpression:function(a,b){this.type=oa.UpdateExpression;this.operator=a;this.argument=b;this.prefix=!1;this.finish();return this},finishProgram:function(a){this.type=oa.Program;this.body=a;this.finish();return this},finishProperty:function(a,b,d,c,e){this.type=oa.Property;this.key=b;this.value=d;this.kind=a;this.method=c;this.shorthand=e;this.finish();
return this},finishReturnStatement:function(a){this.type=oa.ReturnStatement;this.argument=a;this.finish();return this},finishUnaryExpression:function(a,b){this.type="++"===a||"--"===a?oa.UpdateExpression:oa.UnaryExpression;this.operator=a;this.argument=b;this.prefix=!0;this.finish();return this},finishVariableDeclaration:function(a,b){this.type=oa.VariableDeclaration;this.declarations=a;this.kind=b;this.finish();return this},finishVariableDeclarator:function(a,b){this.type=oa.VariableDeclarator;this.id=
a;this.init=b;this.finish();return this}};p.version="2.0.0-dev";p.tokenize=function(a,b){var d,c;d=String;"string"===typeof a||a instanceof String||(a=d(a));ca=a;U=0;ra=0<ca.length?1:0;ua=0;ta=ca.length;ka=null;la={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1};aa={};b=b||{};b.tokens=!0;aa.tokens=[];aa.tokenize=!0;aa.openParenToken=-1;aa.openCurlyToken=-1;aa.range="boolean"===typeof b.range&&b.range;aa.loc="boolean"===typeof b.loc&&b.loc;"boolean"===typeof b.comment&&
b.comment&&(aa.comments=[]);"boolean"===typeof b.tolerant&&b.tolerant&&(aa.errors=[]);try{A();if(ka.type===fa.EOF)return aa.tokens;for(z();ka.type!==fa.EOF;)try{z()}catch(Ma){if(aa.errors){aa.errors.push(Ma);break}else throw Ma;}Ha();c=aa.tokens;"undefined"!==typeof aa.comments&&(c.comments=aa.comments);"undefined"!==typeof aa.errors&&(c.errors=aa.errors)}catch(Ma){throw Ma;}finally{aa={}}return c};p.parse=function(a,b){var d,c;c=String;"string"===typeof a||a instanceof String||(a=c(a));ca=a;U=0;
ra=0<ca.length?1:0;ua=0;ta=ca.length;ka=null;la={allowIn:!0,labelSet:{},parenthesisCount:0,inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1};aa={};"undefined"!==typeof b&&(aa.range="boolean"===typeof b.range&&b.range,aa.loc="boolean"===typeof b.loc&&b.loc,aa.attachComment="boolean"===typeof b.attachComment&&b.attachComment,aa.loc&&null!==b.source&&void 0!==b.source&&(aa.source=c(b.source)),"boolean"===typeof b.tokens&&b.tokens&&(aa.tokens=[]),"boolean"===typeof b.comment&&b.comment&&
(aa.comments=[]),"boolean"===typeof b.tolerant&&b.tolerant&&(aa.errors=[]),aa.attachComment&&(aa.range=!0,aa.comments=[],aa.bottomRightStack=[],aa.trailingComments=[],aa.leadingComments=[]));try{var f;e();A();f=new E;ya=!1;var g;a=[];for(var m,h,k;U<ta;){m=ka;if(m.type!==fa.StringLiteral)break;g=Ga();a.push(g);if(g.expression.type!==oa.Literal)break;h=ca.slice(m.start+1,m.end-1);"use strict"===h?(ya=!0,k&&S(k,wa.StrictOctalLiteral)):!k&&m.octal&&(k=m)}for(;U<ta;){g=Ga();if("undefined"===typeof g)break;
a.push(g)}d=f.finishProgram(a);"undefined"!==typeof aa.comments&&(d.comments=aa.comments);"undefined"!==typeof aa.tokens&&(Ha(),d.tokens=aa.tokens);"undefined"!==typeof aa.errors&&(d.errors=aa.errors)}catch(Na){throw Na;}finally{aa={}}return d};p.Syntax=function(){var a,b={};"function"===typeof Object.create&&(b=Object.create(null));for(a in oa)oa.hasOwnProperty(a)&&(b[a]=oa[a]);"function"===typeof Object.freeze&&Object.freeze(b);return b}()})},"esri/views/3d/layers/graphics/Graphics3DGraphicElevationContext":function(){define(["require",
"exports","../../../../core/tsSupport/extendsHelper","./ElevationContext"],function(p,c,n,l){return function(c){function d(d){d=c.call(this,d)||this;d.centerPointInElevationSR=null;return d}n(d,c);return d}(l)})},"esri/views/3d/layers/graphics/ElevationContext":function(){define(["require","exports","../../../../symbols/support/unitConversionUtils","./featureExpressionInfoUtils"],function(p,c,n,l){return function(){function c(d){d?this.set(d):this.setDefaults()}Object.defineProperty(c.prototype,"meterUnitOffset",
{get:function(){return this._meterUnitOffset},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"unit",{get:function(){return this._unit},enumerable:!0,configurable:!0});c.prototype.setUnit=function(d){this._unit=d;this._metersPerElevationInfoUnit=n.getMetersPerUnit(d)};c.prototype.setDefaults=function(){this.mode=null;this._renderUnitOffset=this._meterUnitOffset=0;this.featureExpressionInfoContext=null;this.setUnit("meters")};c.prototype.set=function(d){this.mode=d.mode;this._meterUnitOffset=
d._meterUnitOffset||0;this._renderUnitOffset=d._renderUnitOffset||0;this.featureExpressionInfoContext=d.featureExpressionInfoContext;this.setUnit(d.unit)};c.prototype.setOffsetMeters=function(d){this._meterUnitOffset=d;this._renderUnitOffset=0};c.prototype.setOffsetElevationInfoUnits=function(d){this._meterUnitOffset=d*this._metersPerElevationInfoUnit;this._renderUnitOffset=0};c.prototype.addOffsetRenderUnits=function(d){this._renderUnitOffset+=d};c.prototype.mixinApi=function(d){null!=d.mode&&(this.mode=
d.mode);null!=d.unit&&this.setUnit(d.unit);null!=d.offset&&this.setOffsetElevationInfoUnits(d.offset)};c.prototype.calculateOffsetRenderUnits=function(d){var c=this._meterUnitOffset,g=this.featureExpressionInfoContext;null!=g&&(c+=l.execute(g)*this._metersPerElevationInfoUnit);return c/d.unitInMeters+this._renderUnitOffset};return c}()})},"esri/views/3d/webgl-engine/Stage":function(){define("require exports ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/extendsHelper ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ./lib/AutoDisposable ./lib/ModelContentType ./lighting/Lightsources ./parts/Model ./parts/RenderView".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a){function e(a){return"function"===typeof a.addParentStage&&"function"===typeof a.removeParentStage}return function(c){function m(e,g,m,h){var k=c.call(this)||this;k.sceneIntersectionHelper=h;k._viewContent=[];k._mainLightDirection=d.vec3f64.fromValues(0,1,0);k.container=g;k.viewingMode=e;k.model=new b;k.renderView=new a(g,k,k.model.getDirtySet(),m);k.setLighting({lights:[new f.MainLight(d.vec3f64.fromValues(.7,.7,.7)),new f.AmbientLight(d.vec3f64.fromValues(.3,.3,.3))],
groundLightingFactor:.5,globalFactor:.5});return k}l(m,c);Object.defineProperty(m.prototype,"mainLightDirection",{get:function(){return this._mainLightDirection},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"lighting",{get:function(){return this._lighting},enumerable:!0,configurable:!0});m.prototype.setLighting=function(a){k.vec3.set(this._mainLightDirection,0,0,0);for(var b=0,d=a.lights;b<d.length;b++){var c=d[b];if(c instanceof f.MainLight){k.vec3.negate(this._mainLightDirection,
c.direction);break}}this._lighting=a;this.renderView.setNeedsRender()};m.prototype.add=function(a,b){this.model.add(a,b);e(b)&&b.addParentStage(this)};m.prototype.remove=function(a,b){a=this.model.remove(a,b);e(a)&&a.removeParentStage(this);return a};m.prototype.notifyDirty=function(a,b,d,c){this.model.notifyDirty(a,b,d,c)};m.prototype.processDirty=function(){var a=this.model.getDirtySet(),b=a.getDirtyMaterials();if(a.hasDirtyGeometryRecords()||b){m.DebugSettings.logDirtySet&&console.log("Dirty set: "+
this.model.getDirtySet().formatDebugInfo(!1));var d=a.commitLayers(this._viewContent);(0<d[0].length+d[1].length+d[2].length||b)&&this.renderView.modify(d[0],d[1],d[2],b);m.DebugSettings.logDirtySet&&(console.log("RGs add: "+d[0].map(function(a){return a.uniqueName})),console.log("RGs remove: "+d[1].map(function(a){return a.uniqueName})));a.commit();a.clearDirtyMaterials();this.renderView.setNeedsRender()}};m.prototype.processDirtyLayer=function(a){var b=this.model.getDirtySet(),d=b.getDirtyMaterials();
a=b.commitLayers([a]);(0<a[0].length+a[1].length+a[2].length||d)&&this.renderView.modify(a[0],a[1],a[2],d);b.clearDirtyMaterials();this.renderView.setNeedsRender()};m.prototype.get=function(a,b){return this.model.get(a,b)};m.prototype.getAll=function(a){return this.model.getAll(a)};m.prototype.getCamera=function(){return this.renderView.getCamera()};m.prototype.setCamera=function(a){this.renderView.setCamera(a)};m.prototype.getLayers=function(){return this.model.getAll(g.LAYER)};m.prototype.getViewContent=
function(){return this._viewContent.slice(0)};m.prototype.addToViewContent=function(a){for(var b=[],d=0;d<a.length;d++)-1===this._viewContent.indexOf(a[d])&&b.push(a[d]);0<a.length&&(this.processDirty(),a=this.model.getDirtySet().getResidentRenderGeometriesFilteredByLayers(b),this.renderView.modify(a,[],[]),this._viewContent.push.apply(this._viewContent,b))};m.prototype.removeFromViewContent=function(a){this.processDirty();for(var b=this.model.getDirtySet(),d=this._viewContent,c=[],e=0;e<a.length;e++){var f=
d.indexOf(a[e]);-1<f&&(d[f]=d[d.length-1],d.pop(),c.push(a[e]))}a=b.getResidentRenderGeometriesFilteredByLayers(c);this.renderView.modify([],a,[])};m.prototype.addRenderPlugin=function(a,b){"intersect"in b&&this.sceneIntersectionHelper.addIntersectionHandler(b);return this.renderView.renderPlugins.add(a,b)};m.prototype.removeRenderPlugin=function(a){"intersect"in a&&this.sceneIntersectionHelper.removeIntersectionHandler(a);return this.renderView.renderPlugins.remove(a)};m.prototype.getContentDebugStrings=
function(a){return this.model.formatDebugInfo(a)};m.DebugSettings={endFrameContentValidation:!1,logDirtySet:!1};m.ModelContentType=g;n([h.autoDispose()],m.prototype,"model",void 0);n([h.autoDispose()],m.prototype,"renderView",void 0);return m}(h.AutoDisposable)})},"esri/views/3d/webgl-engine/parts/Model":function(){define("require exports dojo/string ../../support/mathUtils ../lib/localOrigin ../lib/ModelContentType ../lib/ModelDirtySet ../lib/RenderGeometry ../lib/Util".split(" "),function(p,c,n,
l,k,d,h,g,f){var b=f.assert,a=f.logWithBase;return function(){function c(){this.dirtySet=new h(this);this._uniqueIdx=0;this._id2origin={};this.content={};for(var a in d)this.content[d[a]]={}}c.prototype.getAll=function(a){a=this.content[a];b(void 0!==a);return a};c.prototype.get=function(a,b){return this.getAll(a)[b]};c.prototype.add=function(a,c){var e=this.content[a];b(void 0!==e);var f=c.id;b(null==e[f],"Model/Stage already contains object to be added");e[f]=c;a===d.LAYER&&this.notifyDirty(a,c,
"layerAdded")};c.prototype.remove=function(a,c){var e=this.content[a];b(void 0!==e);var f=e[c];b(void 0!==f,"Model/Stage doesn't contain object to be removed");delete e[c];a===d.TEXTURE&&f.unload();a===d.LAYER&&this.notifyDirty(a,f,"layerRemoved");return f};c.prototype.getDirtySet=function(){return this.dirtySet};c.prototype.notifyDirty=function(a,b,d,c){this.dirtySet.handleUpdate(b,d,c)};c.prototype.getOrigin=function(b,d,c){void 0===c&&(c=10);var e=0;d=d*c/1E4;1<d&&(e=Math.ceil(a(d,2)));d=1E4*Math.pow(2,
e);c=Math.round(b[0]/d);var f=Math.round(b[1]/d);b=Math.round(b[2]/d);var e=e+"_"+c+"_"+f+"_"+b,g=this._id2origin[e];null==g&&(g=k.fromValues(c*d,f*d,b*d,e),this._id2origin[e]=g);return g};c.prototype.getGeometryRenderGeometries=function(a,b,d){var c=a.id,e=b.geometry,f=a.getCombinedStaticTransformation(b),m=l.maxScale(f),h=b.origin,k=b.id,q=this._uniqueIdx++;a=new g(e.data,e.boundingInfo,b.material,f,b.shaderTransformation,m,a.getCastShadow(),!!e.singleUse,c,k,q);a.origin=h||this.getOrigin(a.center,
a.bsRadius);a.instanceParameters=b.instanceParameters;d.push(a)};c.prototype.updateRenderGeometryTransformation=function(a,b,d){a.getCombinedStaticTransformation(b,d.transformation);d.updateTransformation(d.transformation);a=this.getOrigin(d.center,d.bsRadius);return d.origin!==a};c.prototype.formatDebugInfo=function(a){var b=[];if(a){b[0]="\x3ctable\x3e";for(var c in d)a=d[c],b[0]+="\x3ctr\x3e\x3ctd\x3e"+a+'\x3c/td\x3e\x3ctd style\x3d"text-align: right"\x3e'+Object.keys(this.getAll(a)).length+"\x3c/td\x3e\x3c/tr\x3e";
b[0]+="\x3c/table\x3e";b[1]=this.dirtySet.formatDebugInfo(!0)}else{b[0]="";for(c in d)a=d[c],b[0]+=n.pad(String(Object.keys(this.getAll(a)).length),6," ")+" "+a+", ";b[1]=this.dirtySet.formatDebugInfo(!1)}return b};c.prototype.validateObject=function(a){a=a.geometryRecords;for(var c=0;c<a.length;++c){var e=a[c];b(null!=this.get(d.GEOMETRY,e.geometry.id));b(null!=this.get(d.MATERIAL,e.material.id))}};c.prototype.validateLayer=function(a){a=a.getObjects();for(var c=0;c<a.length;++c){var e=this.get(d.OBJECT,
a[c].id);b(null!=e)}};c.ContentType=d;return c}()})},"esri/views/3d/webgl-engine/lib/localOrigin":function(){define(["require","exports","../../../../core/libs/gl-matrix-2/vec3f64"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.fromVector=function(c,k){return{vec3:n.vec3f64.clone(c),id:k}};c.fromValues=function(c,k,d,h){return{vec3:n.vec3f64.fromValues(c,k,d),id:h}}})},"esri/views/3d/webgl-engine/lib/ModelDirtySet":function(){define("require exports ../../../../core/arrayUtils ../../../../core/iteratorUtils ./ModelContentType ./Util".split(" "),
function(p,c,n,l,k,d){return function(){function c(d){this._residentGeomRecords=new Map;this._dirtyGeomRecords=new Map;this._dirtyMaterials=new Set;this._model=d}Object.defineProperty(c.prototype,"residentLayerCount",{get:function(){return this._residentGeomRecords.size},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"residentObjectCount",{get:function(){var d=0;this._residentGeomRecords.forEach(function(c){d+=c.size});return d},enumerable:!0,configurable:!0});c.prototype.getDirtyMaterials=
function(){return 0<this._dirtyMaterials.size?this._dirtyMaterials:null};c.prototype.clearDirtyMaterials=function(){this._dirtyMaterials.clear()};c.prototype.hasDirtyGeometryRecords=function(){var d=!1;l.everyMap(this._dirtyGeomRecords,function(c){if(d)return!1;l.everyMap(c,function(b){if(!d&&b&&0<b.size)return d=!0,!1})});return d};c.prototype.handleUpdate=function(c,f,b){d.assert(this[f],"ModelDirtySet doesn't know how to process "+f);return this[f](c,b)};c.prototype.shaderTransformationChanged=
function(d){var c=this;(d=this._residentGeomRecords.get(d.id))&&d.forEach(function(b,a){(a=c._model.content[k.OBJECT][a])&&a.hasVolativeTransformation()&&b.forEach(function(a){var b=0;for(a=a[1];b<a.length;b++)a[b].shaderTransformationChanged()})})};c.prototype.commit=function(){return this.commitLayers(n.keysOfMap(this._dirtyGeomRecords))};c.prototype.commitLayers=function(c){for(var f=this,b=[],a=[],e=[],g=function(g){var m=c[g];g=h._dirtyGeomRecords.get(m);if(!g)return"continue";g.forEach(function(c,
g){var h=f._ensureGeomRecord(m,g);c.forEach(function(c,m){var l=c[0],q=c[1];c=c[2];var r=!1;if(q&2){var t=h.get(m);if(t){t=t[1];if(c&4)for(var n=f._model.get(k.OBJECT,g),u=0;u<t.length;u++){var x=t[u];if(f._model.updateRenderGeometryTransformation(n,l,x)){r=!0;break}}if(!r)for(n=0;n<t.length;n++)x=t[n],e.push({renderGeometry:x,updateType:c})}else d.assert(!1,"ModelDirtySet.getAddRemoveListFilteredByLayers: invalid update")}if(q&4||r)(t=h.get(m))?a.push.apply(a,t[1]):4===q&&d.assert(!1,"ModelDirtySet.getAddRemoveListFilteredByLayers: invalid remove"),
t&&h.delete(m);if(q&1||r)q=[l,[]],n=f._model.get(k.OBJECT,g),f._model.getGeometryRenderGeometries(n,l,q[1]),b.push.apply(b,q[1]),h.set(m,q)});0===h.size&&f._residentGeomRecords.get(m).delete(g)});0===h._residentGeomRecords.get(m).size&&h._residentGeomRecords.delete(m);h._dirtyGeomRecords.delete(m)},h=this,l=0;l<c.length;l++)g(l);return[b,a,e]};c.prototype.getResidentRenderGeometries=function(){return this.getResidentRenderGeometriesFilteredByLayers(n.keysOfMap(this._residentGeomRecords))};c.prototype.getResidentRenderGeometriesFilteredByLayers=
function(d){for(var c=[],b=0;b<d.length;b++){var a=this._residentGeomRecords.get(d[b]);a&&a.forEach(function(a){a.forEach(function(a){c.push.apply(c,a[1])})})}return c};c.prototype.visibilityChanged=function(d,c,b){if(null!=c)this._componentPropertyChanged(d,c,b,1);else{c=0;for(var a=d.getGeometryRecords();c<a.length;c++)this._componentPropertyChanged(d,a[c],b,1)}};c.prototype.componentHighlightChanged=function(d,c,b){if(null!=c)this._componentPropertyChanged(d,c,b,16);else{c=0;for(var a=d.getGeometryRecords();c<
a.length;c++)this._componentPropertyChanged(d,a[c],b,16)}};c.prototype.vertexAttrsUpdated=function(d,c,b){this._updateOrCreateDirtyRecord(d,c,b,2,0,0,2,5,2)};c.prototype.matChanged=function(d){this._dirtyMaterials.add(d.id);if(this.onMaterialChanged)this.onMaterialChanged(d)};c.prototype.layerAdded=function(d){for(var c=d.getObjects(),b=0;b<c.length;b++)this.layObjectAdded(d,c[b])};c.prototype.layerRemoved=function(d){for(var c=d.getObjects(),b=0;b<c.length;b++)this.layObjectRemoved(d,c[b])};c.prototype.layObjectAdded=
function(d,c){d=d.id;for(var b=c.getGeometryRecords(),a=0;a<b.length;a++)this.objGeometryAdded(c,b[a],d)};c.prototype.layObjectRemoved=function(d,c){d=d.id;for(var b=c.getGeometryRecords(),a=0;a<b.length;a++)this.objGeometryRemoved(c,b[a],d)};c.prototype.layObjectReplaced=function(d,c){this.layObjectRemoved(d,c[0]);this.layObjectAdded(d,c[1])};c.prototype.objTransformation=function(d,c){var b=this;c=c||this._getParentLayerId(d);this._ensureGeomRecord(c,d.id).forEach(function(a){b._updateOrCreateDirtyRecord(d,
a[0],c,2,0,0,2,5,4)})};c.prototype.objGeometryAdded=function(d,c,b){this._updateOrCreateDirtyRecord(d,c,b,1,4,0,0,0)};c.prototype.objGeometryRemoved=function(d,c,b){this._updateOrCreateDirtyRecord(d,c,b,4,1,2,0,0)};c.prototype.objGeometryReplaced=function(d,c){this.objGeometryRemoved(d,c[0]);this.objGeometryAdded(d,c[1])};c.prototype.objGeometryTransformation=function(d,c){this.objGeometryReplaced(d,c)};c.prototype._componentPropertyChanged=function(d,c,b,a){this._updateOrCreateDirtyRecord(d,c,b,
2,0,0,2,5,a)};c.prototype._updateOrCreateDirtyRecord=function(c,f,b,a,e,m,h,k,l){b=b||this._getParentLayerId(c);var g=f.id;c=this._ensureDirtyRecord(b,c.id);(b=c.get(g))?(f=b[1],f&e?c.delete(g):f&m?(b[1]=a,b[2]=l):f&h?b[2]|=l:f&k||d.assert(!1,"ModelDirtySet.objGeometryAdded: inconsistent state")):c.set(g,[f,a,l])};c.prototype._ensureGeomRecord=function(d,c){var b=this._residentGeomRecords.get(d);b||(b=new Map,this._residentGeomRecords.set(d,b));d=b.get(c);d||(d=new Map,b.set(c,d));return d};c.prototype._ensureDirtyRecord=
function(d,c){var b=this._dirtyGeomRecords.get(d);b||(b=new Map,this._dirtyGeomRecords.set(d,b));d=b.get(c);d||(d=new Map,b.set(c,d));return d};c.prototype._getParentLayerId=function(d){return d.parentLayer.id};c.prototype.formatDebugInfo=function(d){if(d)return"";var c=["ADD","UPD",void 0,"REM"],b="";this._dirtyGeomRecords.forEach(function(a,d){a.forEach(function(a,e){0<b.length&&(b+="\n");b+=d+"."+e;var f=[];a.forEach(function(a){var b=a[1];f[b]||(f[b]=[]);f[b].push(a[0].geometry.id)});for(a=0;a<
f.length;a++)if(f[a])for(b+=" "+c[a-1]+": ",e=0;e<f[a].length;e++)b+=f[a][e]+", "})});return b};return c}()})},"esri/views/3d/webgl-engine/lib/RenderGeometry":function(){define("require exports ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../support/mathUtils ./ComponentUtils ./HighlightUtils".split(" "),function(p,c,n,l,k,d,h,g,f){return function(){function b(a,b,c,f,g,h,k,l,n,
v,y){this.shaderTransformationDirty=!0;this.data=a.toRenderData();this.componentOffsets=a.componentOffsets;this.boundingInfo=b;this.material=c;this.origin=null;this.center=d.vec3f64.create();this.bsRadius=0;this.transformation=null;this.calculateShaderTransformation=g;f&&this.updateTransformation(f,h);this.castShadow=k;this.singleUse=l;this.name=n;this.uniqueName=v;this.idx=y;this.instanceParameters={}}b.prototype.updateTransformation=function(a,b){this.transformation=a;this.shaderTransformationDirty=
!0;this.bsRadius=this.getBoundingSphere(a,b,this.center)};b.prototype.shaderTransformationChanged=function(){this.shaderTransformationDirty=!0};b.prototype.getBoundingSphere=function(a,b,d){b=b||h.maxScale(a);k.vec3.transformMat4(d,this.boundingInfo.getCenter(),a);return this.boundingInfo.getBSRadius()*b};Object.defineProperty(b.prototype,"hasShaderTransformation",{get:function(){return!!this.calculateShaderTransformation},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"componentCount",
{get:function(){return g.componentCount(this.componentOffsets)},enumerable:!0,configurable:!0});b.prototype.getShaderTransformation=function(){if(!this.calculateShaderTransformation)return this.transformation;this.shaderTransformationDirty&&(this.shaderTransformation||(this.shaderTransformation=l.mat4f64.create()),n.mat4.copy(this.shaderTransformation,this.calculateShaderTransformation(this.transformation)),this.shaderTransformationDirty=!1);return this.shaderTransformation};b.prototype.getIndices=
function(a){return"indices"in this.data?this.data.indices[a]:null};b.prototype.getAttribute=function(a){return"vertexAttr"in this.data?this.data.vertexAttr[a]:null};b.prototype.addHighlight=function(a){var b=f.generateHighlightId(),d=this.instanceParameters;d.componentHighlights=g.addHighlight(d.componentHighlights,null,a,b);return b};b.prototype.removeHighlight=function(a){var b=this.instanceParameters;b.componentHighlights=g.removeHighlight(b.componentHighlights,a)};return b}()})},"esri/views/3d/webgl-engine/parts/RenderView":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/has ../../../../core/Logger ../../../../core/now ../../../../core/scheduling ../../../../core/libs/gl-matrix-2/vec3f64 ../../support/animationUtils ../lib/AutoDisposable ../lib/Camera ../lib/DrapedRenderer ../lib/GLMaterialRep ../lib/ProgramRepository ../lib/Renderer ../lib/TextureRepository ../lib/tracer ./Model ./ScreenshotManager ../shaders/globalOptions ../../../webgl/context-util ../../../webgl/RenderingContext".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z,A,B){var D=h.getLogger("esri.views.3d.webgl-engine.parts.View");return function(c){function g(a,d,e,f){var g=c.call(this)||this;g._camera=new m(b.vec3f64.fromValues(0,100,-100));g._needsRender=!0;g._idleSuspend=!0;g._animationTimeLast=0;g._stats={renderGeometriesTotal:0,renderGeometriesVisible:0,renderTimeTotal:0,renderTimeLast:0,frameCount:0};g._container=a;g._stage=d;g._initializeContext(f);a=z.glslifyGlobalOptions({viewingMode:f.viewingMode});
g._programRepository=new t(g._rctx,a);g._textureRepository=new x(d.getAll(v.ContentType.TEXTURE),g._programRepository,function(){return g._camera.viewport},g._rctx);g._materialRepository=new u(g._textureRepository,g._programRepository);g._initializeViewportCamera();g._drapedRenderer=new q(g._rctx,g._canvas,g._programRepository,g._materialRepository,g._textureRepository,e);g._renderer=new r(g._programRepository,g._materialRepository,g._textureRepository,g._rctx,"scene",d);g._screenshotManager=new y.ScreenshotManager(g._rctx,
g._render.bind(g),function(){return g.setNeedsRender()},f.screenshot.renderOverlay);g._registerFrameTask();return g}l(g,c);g.prototype.dispose=function(){this._container.contains(this._canvas)&&this._container.removeChild(this._canvas);this._frameTask&&(this._frameTask.remove(),this._frameTask=null);c.prototype.dispose.call(this)};Object.defineProperty(g.prototype,"isLoadingResources",{get:function(){return this._renderer.isLoadingResources},enumerable:!0,configurable:!0});g.prototype.getCombinedStats=
function(){var a=this._rctx.gl,b={},d=this._renderer.getCombinedStats(),c;for(c in d)b[c]=d[c];b.renderGeometriesTotal=this._stats.renderGeometriesTotal;b.renderGeometriesVisible=this._stats.renderGeometriesVisible;void 0!==a.getUsedTextureMemory&&(b.textureMemory=a.getUsedTextureMemory());void 0!==a.getUsedRenderbufferMemory&&(b.renderbufferMemory=a.getUsedRenderbufferMemory());void 0!==a.getUsedVBOMemory&&(b.VBOMemory=a.getUsedVBOMemory());if(void 0!==a.getUsedTextureMemoryStats){var a=a.getUsedTextureMemoryStats(),
e;for(e in a)b["texMem type: "+e]=a[e]}return b};g.prototype.setNeedsRender=function(){this._needsRender=!0};g.prototype.needsRender=function(){var a=this._canRender();return(this._needsRender||!this._idleSuspend||this._renderer.needsRender()||this._textureRepository.needsRender())&&a};g.prototype.ensureEdgeView=function(){return this._renderer.ensureEdgeView()};Object.defineProperty(g.prototype,"edgeView",{get:function(){return this._renderer.edgeView},enumerable:!0,configurable:!0});g.prototype.setRenderParameters=
function(a){this.setNeedsRender();void 0!==a.idleSuspend&&(this._idleSuspend=!!a.idleSuspend);this._renderer.setRenderParams(a)};g.prototype.getRenderParameters=function(){var a=this._renderer.getRenderParams();a.anisotropicFiltering=this._textureRepository.getMaxAnisotropy();a.idleSuspend=this._idleSuspend;return a};Object.defineProperty(g.prototype,"renderingContext",{get:function(){return this._rctx},enumerable:!0,configurable:!0});g.prototype.has=function(a){return"s3tc"===a?!!this._rctx.capabilities.compressedTextureS3TC:
"shaderTextureLOD"===a?!!this._rctx.capabilities.shaderTextureLOD:!1};g.prototype.modify=function(a,b,d,c){this._renderer.modify(a,b,d,c)};g.prototype.setCamera=function(a){this._camera.copyFrom(a);this.setNeedsRender()};g.prototype.getCamera=function(){return this._camera};g.prototype.getCanvas=function(){return this._canvas};g.prototype.getDrapedRenderer=function(){return this._drapedRenderer};g.prototype.takeScreenshot=function(a){return this._screenshotManager.takeScreenshot(a)};Object.defineProperty(g.prototype,
"renderPlugins",{get:function(){return this._renderer.renderPlugins},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"test",{get:function(){return{renderer:this._renderer,textureRepository:this._textureRepository}},enumerable:!0,configurable:!0});g.prototype.getGpuMemoryUsage=function(){return n({},this._renderer.getGpuMemoryUsage(),{draped:this._drapedRenderer?this._drapedRenderer.getGpuMemoryUsage():0})};g.prototype._registerFrameTask=function(){var a=this,b={viewCamera:this._camera,
frameHasSlicePlane:!1,drapedRenderer:this._drapedRenderer};this._frameTask=f.addFrameTask({preRender:function(b){w.begin();a._stage.processDirty();a._processAnimations(b.time)},render:function(){a.needsRender()&&(a._resetNeedsRender(),a._render(null,a._camera,!1))},postRender:function(){w.end()},update:function(){b.viewCamera=a._camera;b.frameHasSlicePlane=a._renderer.hasSlicePlane;b.drapedRenderer=a._drapedRenderer;a._screenshotManager.update(b)}})};g.prototype._resetNeedsRender=function(){this._needsRender=
!1;this._renderer.resetNeedsRender();this._textureRepository.resetNeedsRender()};g.prototype._canRender=function(){var a=this._camera;return 0<a.fullWidth&&0<a.fullHeight};g.prototype._initializeViewportCamera=function(){var a=this._container.getBoundingClientRect(),b=this.getCamera();b.viewport[2]=a.width;b.viewport[3]=a.height;this.setCamera(b)};g.prototype._initializeContext=function(a){this._canvas=a.canvas;this._canvas||(this._canvas=document.createElement("canvas"));this._canvas.setAttribute("style",
"width: 100%; height:100%; display:block;");var b=w.instrumentContext(A.createContextOrErrorHTML(this._canvas,{alpha:a.alpha||!1,premultipliedAlpha:!0,antialias:!1,depth:!0,stencil:null==a.stencil?!0:a.stencil},a.renderContext));this._rctx=new B(b,{disabledExtensions:a.deactivatedWebGLExtensions||{},debugWebGLExtensions:a.debugWebGLExtensions||{}});!a.alpha&&this._rctx.contextAttributes.alpha&&D.error("WebGL context has alpha channel even though no alpha channel was requested");!this._rctx.contextAttributes.alpha&&
11<=d("safari")&&(this._container.style.backgroundColor="black");this._container.appendChild(this._canvas)};g.prototype._processAnimations=function(b){b-this._animationTimeLast<a.DESIRED_ANIMATION_MS||(this._animationTimeLast=b,this._renderer.updateAnimations(b)&&this.setNeedsRender())};g.prototype._render=function(a,b,d){this._renderer.setLighting(this._stage.lighting);this._rctx.bindFramebuffer(a);b.setGLViewport(this._rctx);this._renderer.render({fbo:a,camera:b,disableSlice:d,lightDirection:this._stage.mainLightDirection})};
k([e.autoDispose()],g.prototype,"_rctx",void 0);k([e.autoDispose()],g.prototype,"_container",void 0);k([e.autoDispose()],g.prototype,"_canvas",void 0);k([e.autoDispose()],g.prototype,"_programRepository",void 0);k([e.autoDispose()],g.prototype,"_renderer",void 0);k([e.autoDispose()],g.prototype,"_drapedRenderer",void 0);k([e.autoDispose()],g.prototype,"_screenshotManager",void 0);return g}(e.AutoDisposable)})},"esri/views/3d/support/animationUtils":function(){define(["require","exports"],function(p,
c){Object.defineProperty(c,"__esModule",{value:!0});c.DESIRED_ANIMATION_FPS=25;c.DESIRED_ANIMATION_MS=1E3/c.DESIRED_ANIMATION_FPS;c.DESIRED_DRAPED_ANIMATION_FPS=20;c.DESIRED_DRAPED_ANIMATION_MS=1E3/c.DESIRED_DRAPED_ANIMATION_FPS})},"esri/views/3d/webgl-engine/lib/DrapedRenderer":function(){define("require exports ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4f64 ../../support/debugFlags ../../webgl-engine/lib/intersectorUtils ./Camera ./DefaultVertexBufferLayouts ./glUtil3D ./GridLocalOriginFactory ./Renderer ../lighting/Lightsources ../materials/ColorMaterial ../materials/HUDMaterial ../materials/RibbonLineMaterial ../shaders/MiscPrograms ../../../webgl/FramebufferObject ../../../webgl/renderState ../../../webgl/Texture ../../../webgl/Util".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y){p=function(){function c(b,d,c,f,g,h){var q=this;this._renderTargets={};this._clearColor=k.vec4f64.fromValues(0,0,0,0);this._uniqueIdx=0;this._localOrigins=new a;this._rctx=b;this._canvas=d;this._programRep=c;this._modelDirtySet=h;this._modelDirtySet.onMaterialChanged=function(a){return q._emitContentChanged()};this._renderer=new e(c,f,g,this._rctx,"draped");this._renderer.onHasHighlightsChanged=function(a){if(q.onHasHighlightsChanged)q.onHasHighlightsChanged(a)};
this._renderer.setLighting({lights:[new m.AmbientLight(l.vec3f64.fromValues(1,1,1))],groundLightingFactor:1,globalFactor:0})}c.prototype.dispose=function(){for(var a in this._renderTargets)this._renderTargets[a].dispose();this._renderTargets=null;this._renderer.dispose();this._renderer=null};c.prototype.disposeRenderTarget=function(a){var b=this._renderTargets[a];b&&b.dispose();delete this._renderTargets[a]};c.prototype.getRenderTargetTexture=function(a){return(a=this._renderTargets[a])?a.colorTexture:
null};c.prototype.addRenderGeometries=function(a){var b=this;a.forEach(function(a){null==a.origin&&(a.origin=b._localOrigins.getOrigin(a.center));a.idx=b._uniqueIdx++});this._renderer.modify(a,[]);this._emitContentChanged()};c.prototype.removeRenderGeometries=function(a){this._renderer.modify([],a);this._emitContentChanged()};c.prototype.updateRenderGeometries=function(a,b){a=a.map(function(a){return{renderGeometry:a,updateType:b}});this._renderer.modify([],[],a);this._emitContentChanged()};c.prototype.updateRenderOrder=
function(a){0<a.size&&(this._renderer.modifyRenderOrder(a),this._emitContentChanged())};c.prototype.setBackgroundColor=function(a){this._clearColor=a;this._emitContentChanged()};c.prototype.updateHighlights=function(a){this.updateRenderGeometries(a,16)};c.prototype.isEmpty=function(){return this._renderer.isEmpty()&&!d.OVERLAY_DRAW_TEST_TEXTURE};c.prototype.processDirtyMaterials=function(){var a=this._modelDirtySet.getDirtyMaterials();a&&this._renderer.modify([],[],[],a);this._modelDirtySet.clearDirtyMaterials()};
Object.defineProperty(c.prototype,"hasHighlights",{get:function(){return this._renderer.hasHighlights},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"hasWater",{get:function(){return this._renderer.hasWater},enumerable:!0,configurable:!0});c.prototype.draw=function(a,b){return this.drawPass(0,a,b)};c.prototype.drawNormals=function(a,b){return this.drawPass(2,a,b)};c.prototype.drawHighlights=function(a,b){return this.drawPass(4,a,b)};c.prototype.drawPass=function(a,b,c){this._pixelRatio=
c.pixelRatio*Math.abs(c.views[0].extent[2]-c.views[0].extent[0])/Math.abs(c.views[0].viewport[2]-c.views[0].viewport[0]);if(this.isEmpty()||4===a&&!this.hasHighlights||2===a&&!this.hasWater)return!1;this.processDirtyMaterials();if(!c.views.some(function(a){return a.extent[0]!==a.extent[2]&&a.extent[1]!==a.extent[3]}))return!1;b=this._renderTargets[b];if(!b)return!1;var e=this._rctx,f=c.width,g=c.height;b.width===f&&b.height===g||b.resize(f,g);var m=A.camera;A.fbo=b;m.near=1;m.far=1E4;m.pixelRatio=
c.pixelRatio||1;e.bindFramebuffer(b);e.setClearColor.apply(e,this._clearColor);e.clearSafe(16384);for(var h=0;h<c.views.length;h++){var k=c.views[h];m.viewport=k.viewport;n.mat4.ortho(m.projectionMatrix,0,k.extent[2]-k.extent[0],0,k.extent[3]-k.extent[1],m.near,m.far);n.mat4.identity(m.viewMatrix);n.mat4.translate(m.viewMatrix,m.viewMatrix,[-k.extent[0],-k.extent[1],0]);m.setGLViewport(this._rctx);d.OVERLAY_DRAW_TEST_TEXTURE&&this._drawTestTexture(f,g,z[c.index%z.length]);this._renderer.renderPass(a,
A)}e.bindFramebuffer(null);e.setViewport(0,0,this._canvas.width,this._canvas.height);b.colorTexture.descriptor.hasMipmap&&b.colorTexture.generateMipmap();return!0};c.prototype._drawTestTexture=function(a,d,c){var e=this._rctx;if(!this._testPatternTexture){for(var g=new Uint8Array(a*d*4),m=0,h=0;h<d;h++)for(var k=0;k<a;k++){var l=Math.floor(k/10),q=Math.floor(h/10);2>l||2>q||10*l>a-20||10*q>d-20?(g[m++]=255,g[m++]=255,g[m++]=255,g[m++]=255):(g[m++]=255,g[m++]=255,g[m++]=255,l&1&&q&1?g[m++]=k&1^h&1?
0:255:g[m++]=l&1^q&1?0:128)}this._testPatternTexture=new v(e,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,width:a,height:d},g);this._testPatternProgram=this._programRep.getProgram(r.texOnly);this._testPatternPipelineState=w.makePipelineState({blending:w.separateBlendingParams(770,1,771,771),colorWrite:w.defaultColorWriteParams});this._quadVAO=b.createQuadVAO(e,f.Pos3Tex)}a=this._testPatternProgram;e.bindProgram(a);e.setPipelineState(this._testPatternPipelineState);a.setUniform4f("color",
c[0],c[1],c[2],1);a.setUniform1i("tex",0);e.bindTexture(this._testPatternTexture,0);e.bindVAO(this._quadVAO);e.drawArrays(5,0,y.vertexCount(this._quadVAO,"geometry"))};c.prototype.updateAnimations=function(a){return this._renderer.updateAnimations(a)};c.prototype._emitContentChanged=function(){if(this.onContentChanged)this.onContentChanged()};c.prototype.createRenderTarget=function(a,b,d,c){for(var e=a,f=0;this._renderTargets[e];)e=a+"_"+ ++f;this._renderTargets[e]=x.createWithAttachments(this._rctx,
{target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,samplingMode:c,hasMipmap:b,maxAnisotropy:d,width:0,height:0},{colorTarget:0,depthStencilTarget:0});return e};c.prototype.getGpuMemoryUsage=function(){var a=0,b;for(b in this._renderTargets)a+=y.getGpuMemoryUsage(this._renderTargets[b]);return a};c.prototype.intersect=function(a,b,d){var c=this,e=0;this._renderer.forEachRenderGeometry(function(f){if(!d||d(f)){if(f.material instanceof q||f.material instanceof t||f.material instanceof u){var g=
f.transformation[12],m=f.transformation[13];B[0]=b[0]-g;B[1]=b[1]-m;B[2]=1;D[0]=b[0]-g;D[1]=b[1]-m;D[2]=0;f.pixelRatio=c._pixelRatio;f.material.intersect(f,null,f.getShaderTransformation(),a,B,D,function(b,d,g,m,h,k){c.addIntersectionResult(g,f.material.renderPriority,e,a,f.data.layerUid,f.data.graphicUid)},f.calculateShaderTransformation,!0)}e++}})};c.prototype.addIntersectionResult=function(a,b,d,c,e,f){var g={type:"external",metadata:{layerUid:e,graphicUid:f}};e=function(e){e.set(g,null,c.results.terrain.dist,
c.results.terrain.normal,c.results.terrain.transformation,b,null,null,a,d);e.intersector="DrapedRenderer"};(null==c.results.min.drapedLayerOrder||b>=c.results.min.drapedLayerOrder)&&(null==c.results.min.dist||c.results.terrain.dist<=c.results.min.dist)&&e(c.results.min);(null==c.results.max.drapedLayerOrder||b<c.results.max.drapedLayerOrder)&&(null==c.results.max.dist||c.results.terrain.dist>c.results.max.dist)&&e(c.results.max);c.enable.storeAll&&(f=new h.IntersectorResult(c.ray),e(f),c.results.all.push(f))};
return c}();var z=[[1,.5,.5],[.5,.5,1],[.5,1,.5]],A={fbo:null,camera:new g,lightDirection:l.vec3f64.fromValues(0,0,1)},B=l.vec3f64.create(),D=l.vec3f64.create();return p})},"esri/views/3d/webgl-engine/lib/GridLocalOriginFactory":function(){define("require exports ../../../../core/maybe ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/SpatialReference ../../support/projectionUtils ./Geometry ./GeometryData ./Layer ./localOrigin ./Object3D ./Util ../materials/RibbonLineMaterial ../parts/Model".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t){var r=0;p=function(){function d(){this.ROOT_ORIGIN_ID="rg_root_"+r++;this._origins=new Map;this._gridSize=42E5}d.prototype.getOrigin=function(a){var b=this._origins.get(this.ROOT_ORIGIN_ID);if(null==b){if(n.isSome(d.testOrigin)){var c=d.testOrigin;this._origins.set(this.ROOT_ORIGIN_ID,e.fromValues(c[0],c[1],c[2],this.ROOT_ORIGIN_ID));return this.getOrigin(a)}c=e.fromValues(a[0]+Math.random()-.5,a[1]+Math.random()-.5,a[2]+Math.random()-.5,this.ROOT_ORIGIN_ID);
this._origins.set(this.ROOT_ORIGIN_ID,c);return c}k.vec3.subtract(w,a,b.vec3);w[0]=Math.abs(w[0]);w[1]=Math.abs(w[1]);w[2]=Math.abs(w[2]);c=this._gridSize;if(w[0]<c&&w[1]<c&&w[2]<c)return b;var b=Math.round(a[0]/c),f=Math.round(a[1]/c);a=Math.round(a[2]/c);var g="rg_"+b+"/"+f+"/"+a,m=this._origins.get(g);m||(m=e.fromValues(b*c,f*c,a*c,g),this._origins.set(g,m));return m};d.prototype._drawOriginBox=function(d){var c=window.view,e=c._stage;if(null==this._object){this._material=new u({width:2,color:[0,
1,0,1]},"GridLocalOriginMaterial");e.add(t.ContentType.MATERIAL,this._material);var k=new a("GridLocalOrigin",{isPickable:!1});e.add(t.ContentType.LAYER,k);this._object=new m({name:"GridLocalOrigin",idHint:"GridLocalOrigin",castShadow:!1});e.add(t.ContentType.OBJECT,this._object);k.addObject(this._object);e.addToViewContent([k.id])}for(var l=[0,1,5,4,0,2,1,7,6,2,0,1,3,7,5,4,6,2,0],r=l.length,n=new Float32Array(3*r),k=new Uint32Array(2*(r-1)),v=.5*this._gridSize,w=0;w<r;w++)n[3*w+0]=d[0]+(l[w]&1?v:
-v),n[3*w+1]=d[1]+(l[w]&2?v:-v),n[3*w+2]=d[2]+(l[w]&4?v:-v),0<w&&(k[2*w+0]=w-1,k[2*w+1]=w);g.bufferToBuffer(n,h.WebMercator,0,n,c.spatialReference,0,r);c={};c[q.VertexAttrConstants.POSITION]={size:3,data:n};n={};n[q.VertexAttrConstants.POSITION]=k;k=new b(c,n,void 0,"line");k=new f(k,"GridLocalOriginBox");e.add(t.ContentType.GEOMETRY,k);this._object.addGeometry(k,this._material,x);console.log(this._origins.size,d)};return d}();var x=l.mat4f64.create(),w=d.vec3f64.create();(p||(p={})).testOrigin=null;
return p})},"esri/views/3d/webgl-engine/lib/Geometry":function(){define("require exports ./BoundingInfo ./ComponentUtils ./geometryDataUtils ./IdGen ./Util ./Util".split(" "),function(p,c,n,l,k,d,h,g){return function(){function c(b,a,d){this.singleUse=!1;this._componentAABBs=this._boundingInfo=null;this._id=c.__idGen.gen(a);this._data=b;this._boundingInfo=d}Object.defineProperty(c.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"data",
{get:function(){return this._data},enumerable:!0,configurable:!0});c.prototype.getIndices=function(b){return this.data.getIndices(b)};Object.defineProperty(c.prototype,"indexCount",{get:function(){return this.data.indexCount},enumerable:!0,configurable:!0});c.prototype.getAttribute=function(b){return this.data.getAttribute(b)};Object.defineProperty(c.prototype,"componentCount",{get:function(){return l.componentCount(this.data.componentOffsets)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"componentOffsets",{get:function(){return this.data.componentOffsets},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"vertexCount",{get:function(){return this.data.indexCount},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"faceCount",{get:function(){return this.data.indexCount/3},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"boundingInfo",{get:function(){null==this._boundingInfo&&(this._boundingInfo=this._calculateBoundingInfo());return this._boundingInfo},
enumerable:!0,configurable:!0});c.prototype.invalidateBoundingInfo=function(){this._componentAABBs=this._boundingInfo=null};c.prototype.getComponentAABB=function(b,a){null==this._componentAABBs&&(this._componentAABBs=this._computeComponentAABBs());for(var d=0;6>d;d++)a[d]=this._componentAABBs[6*b+d];return a};c.prototype._computeComponentAABBs=function(){for(var b=this.componentCount,a=new Float32Array(6*b),d=0;d<b;d++)this._calculateAABB(d,a,6*d);return a};c.prototype._calculateAABB=function(b,a,
d){void 0===d&&(d=0);var c=this.data.getIndices(g.VertexAttrConstants.POSITION),e=this.data.getAttribute(g.VertexAttrConstants.POSITION),f=this.data.componentOffsets,h=f.length?f[b+1]:c.length,k=Infinity,l=Infinity,n=Infinity,v=-Infinity,y=-Infinity,p=-Infinity,A=e.offsetIdx,B=e.strideIdx;for(b=f.length?f[b]:0;b<h;b++)var D=A+B*c[b],f=e.data[D],C=e.data[D+1],D=e.data[D+2],k=Math.min(k,f),l=Math.min(l,C),n=Math.min(n,D),v=Math.max(v,f),y=Math.max(y,C),p=Math.max(p,D);a[d]=k;a[d+1]=l;a[d+2]=n;a[d+3]=
v;a[d+4]=y;a[d+5]=p};c.prototype._calculateBoundingInfo=function(){var b=this.data.getIndices(g.VertexAttrConstants.POSITION),a=this.data.getAttribute(g.VertexAttrConstants.POSITION),d="triangle"===this.data.primitiveType?3:1;if(0===b.length)for(var b=new Uint32Array(d),c=0;c<d;++c)b[c]=c;c=b.length;h.assert(0===c%d,"Indexing error: "+c.toFixed(0)+" not divisible by "+d.toFixed(0));c=k.generateDefaultIndexArray(c/d);return new n(c,d,b,a)};c.__idGen=new d;return c}()})},"esri/views/3d/webgl-engine/lib/BoundingInfo":function(){define("require exports ../../../../core/PooledArray ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ./Util".split(" "),
function(p,c,n,l,k,d){p=function(){function c(g,f,b,a){d.assert(1<=g.length);d.assert(0===b.length%f);d.assert(b.length>=g.length*f);d.assert(3===a.size||4===a.size);this.primitiveIndices=g;this.indices=b;this._position=a;this._numIndexPerPrimitive=f;var e=a.data,m=a.offsetIdx,h=a.strideIdx;a=0;var n=g.length,t=m+h*b[f*g[a]];c.tmpIndices.clear();c.tmpIndices.push(t);this.bbMin=k.vec3f64.fromValues(e[t],e[t+1],e[t+2]);for(this.bbMax=k.vec3f64.clone(this.bbMin);a<n;++a)for(var r=f*g[a],x=0;x<f;++x){t=
m+h*b[r+x];c.tmpIndices.push(t);var w=e[t];this.bbMin[0]=Math.min(w,this.bbMin[0]);this.bbMax[0]=Math.max(w,this.bbMax[0]);w=e[t+1];this.bbMin[1]=Math.min(w,this.bbMin[1]);this.bbMax[1]=Math.max(w,this.bbMax[1]);w=e[t+2];this.bbMin[2]=Math.min(w,this.bbMin[2]);this.bbMax[2]=Math.max(w,this.bbMax[2])}this.center=k.vec3f64.create();l.vec3.lerp(this.center,this.bbMin,this.bbMax,.5);this.bsRadius=.5*Math.max(Math.max(this.bbMax[0]-this.bbMin[0],this.bbMax[1]-this.bbMin[1]),this.bbMax[2]-this.bbMin[2]);
g=this.bsRadius*this.bsRadius;for(a=0;a<c.tmpIndices.length;++a)t=c.tmpIndices.data[a],f=e[t]-this.center[0],b=e[t+1]-this.center[1],t=e[t+2]-this.center[2],m=f*f+b*b+t*t,m<=g||(m=Math.sqrt(m),h=.5*(m-this.bsRadius),this.bsRadius+=h,g=this.bsRadius*this.bsRadius,m=h/m,this.center[0]+=f*m,this.center[1]+=b*m,this.center[2]+=t*m);c.tmpIndices.clear()}c.prototype.getCenter=function(){return this.center};c.prototype.getBSRadius=function(){return this.bsRadius};c.prototype.getBBMin=function(){return this.bbMin};
c.prototype.getBBMax=function(){return this.bbMax};c.prototype.getPrimitiveIndices=function(){return this.primitiveIndices};c.prototype.getIndices=function(){return this.indices};c.prototype.getPosition=function(){return this._position};c.prototype.getChildren=function(){if(this.children)return this.children;if(1<l.vec3.squaredDistance(this.bbMin,this.bbMax)){for(var d=l.vec3.lerp(k.vec3f64.create(),this.bbMin,this.bbMax,.5),f=this.primitiveIndices.length,b=new Uint8Array(f),a=Array(8),e=0;8>e;++e)a[e]=
0;for(var e=this._position,m=e.data,h=e.offsetIdx,n=e.strideIdx,e=0;e<f;++e){for(var t=0,r=this._numIndexPerPrimitive*this.primitiveIndices[e],x=h+n*this.indices[r],w=m[x],v=m[x+1],y=m[x+2],p=1;p<this._numIndexPerPrimitive;++p){var x=h+n*this.indices[r+p],A=m[x],B=m[x+1],x=m[x+2];A<w&&(w=A);B<v&&(v=B);x<y&&(y=x)}w<d[0]&&(t|=1);v<d[1]&&(t|=2);y<d[2]&&(t|=4);b[e]=t;++a[t]}for(e=d=0;8>e;++e)0<a[e]&&++d;if(2>d)return;d=Array(8);for(e=0;8>e;++e)d[e]=0<a[e]?new Uint32Array(a[e]):void 0;for(e=0;8>e;++e)a[e]=
0;for(e=0;e<f;++e)t=b[e],d[t][a[t]++]=this.primitiveIndices[e];this.children=Array(8);for(e=0;8>e;++e)void 0!==d[e]&&(this.children[e]=new c(d[e],this._numIndexPerPrimitive,this.indices,this._position))}return this.children};return c}();(p||(p={})).tmpIndices=new n({deallocator:null});return p})},"esri/views/3d/webgl-engine/lib/Layer":function(){define("require exports ../../../../core/arrayUtils ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ./IdGen ./ModelContentType ./Octree".split(" "),
function(p,c,n,l,k,d,h,g){return function(){function c(b,a,d){this._parentStages=[];this._children=new Set;this.id=c._idGen.gen(b);this.apiLayerUid=d;this.name=b;a=a||{};this.group=a.group||"";this.isVisible=null!=a.isVisible?a.isVisible:!0;this.isPickable=null!=a.isPickable?a.isPickable:!0;this.isSliceable=!1;this.translation=a.translation?k.vec3f64.clone(a.translation):k.vec3f64.create();this._extent=[k.vec3f64.fromValues(0,0,0),k.vec3f64.fromValues(1E3,1E3,1E3)];this._extentDirty=!0}c.prototype.addParentStage=
function(b){-1===this._parentStages.indexOf(b)&&this._parentStages.push(b)};c.prototype.removeParentStage=function(b){b=this._parentStages.indexOf(b);-1<b&&this._parentStages.splice(b,1);this.invalidateSpatialQueryAccelerator()};c.prototype.getName=function(){return this.name};c.prototype.getGroup=function(){return this.group};c.prototype.getTranslation=function(){return this.translation};c.prototype.getObjectIds=function(){return n.keysOfSet(this._children,function(b){return b.id})};c.prototype.getObjects=
function(){return n.keysOfSet(this._children)};c.prototype.getExtent=function(){this._updateExtent();return this._extent};c.prototype.addObject=function(b){this._children.add(b);b.parentLayer=this;this.notifyDirty("layObjectAdded",b);this._invalidateExtent();this._octree&&this._octree.add(b)};c.prototype.hasObject=function(b){return this._children.has(b)};c.prototype.removeObject=function(b){return this._children.delete(b)?(b.parentLayer=null,this.notifyDirty("layObjectRemoved",b),this._invalidateExtent(),
this._octree&&this._octree.remove(b),!0):!1};c.prototype.notifyObjectBBChanged=function(b,a){this._octree&&this._octree.update(b,a)};c.prototype.getCenter=function(){this._updateExtent();var b=k.vec3f64.create();return l.vec3.lerp(b,this._extent[0],this._extent[1],.5)};c.prototype.getBSRadius=function(){this._updateExtent();return.5*l.vec3.distance(this._extent[0],this._extent[1])};c.prototype.getSpatialQueryAccelerator=function(){!this._octree&&50<this._children.size&&this._createOctree();return this._octree};
c.prototype.shaderTransformationChanged=function(){this.notifyDirty("shaderTransformationChanged",null)};c.prototype.invalidateSpatialQueryAccelerator=function(){this._octree&&(this._octree.destroy(),this._octree=null)};c.prototype.notifyDirty=function(b,a,d,c){d=d||h.LAYER;c=c||this;for(var e=0;e<this._parentStages.length;e++)this._parentStages[e].notifyDirty(d,c,b,a)};c.prototype._createOctree=function(){for(var b=this.getExtent(),a=0,d=0;3>d;d++)a=Math.max(a,b[1][d]-b[0][d]);d=k.vec3f64.create();
l.vec3.lerp(d,b[0],b[1],.5);this._octree=new g(d,1.2*a,{getRadius:function(a){return a.getBSRadius()},getCenter:function(a){return a.getCenter()}});this._octree.add(n.keysOfSet(this._children))};c.prototype._invalidateExtent=function(){this._extentDirty=!0};c.prototype._updateExtent=function(){var b=this;if(this._extentDirty)if(this._extentDirty=!1,0===this._children.size)this._extent=[[0,0,0],[0,0,0]];else{var a=null;this._children.forEach(function(d){var c=d.getBBMin();d=d.getBBMax();if(a)for(var e=
0;3>e;++e)b._extent[0][e]=Math.min(b._extent[0][e],c[e]),b._extent[1][e]=Math.max(b._extent[1][e],d[e]);else a=[k.vec3f64.clone(c),k.vec3f64.clone(d)]});this._extent=a}};c._idGen=new d;return c}()})},"esri/views/3d/webgl-engine/lib/Octree":function(){define("require exports ../../../../core/ObjectPool ../../../../core/PooledArray ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../support/geometryUtils ./Util".split(" "),function(p,c,n,l,k,d,h,g){function f(a,b,
d){d=d||a;d[0]=a[0]+b;d[1]=a[1]+b;d[2]=a[2]+b;return d}function b(a,b,d){return!h.frustum.intersectsSphere(d.planes,h.sphere.wrap(b,a))}function a(a,b,d){if(!G.length)for(var c=0;8>c;++c)G.push({index:0,distance:0});for(c=0;8>c;++c){var e=u[c];G.data[c].index=c;G.data[c].distance=m(a,b,e)}G.sort(function(a,b){return a.distance-b.distance});d.clear();for(c=0;8>c;++c)d.push(G.data[c].index)}function e(a,b){for(var d=Infinity,c=null,e=0;8>e;++e){var f=m(a,b,t[e]);f<d&&(d=f,c=t[e])}return c}function m(a,
b,d){return b*(a[0]*d[0]+a[1]*d[1]+a[2]*d[2])}p=function(){function c(a,b,c,e){this._maximumObjectsPerNode=10;this._maximumDepth=20;this._degenerateObjects=new Set;this._objectCount=0;this._objectToBoundingSphere=c;e&&(void 0!==e.maximumObjectsPerNode&&(this._maximumObjectsPerNode=e.maximumObjectsPerNode),void 0!==e.maximumDepth&&(this._maximumDepth=e.maximumDepth));isNaN(a[0])||isNaN(a[1])||isNaN(a[2])||isNaN(b)?this._root=new q(null,d.vec3f64.fromValues(0,0,0),.5):this._root=new q(null,a,b/2)}Object.defineProperty(c.prototype,
"center",{get:function(){return this._root.center},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"size",{get:function(){return 2*this._root.halfSize},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"root",{get:function(){return this._root.node},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"maximumObjectsPerNode",{get:function(){return this._maximumObjectsPerNode},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"maximumDepth",
{get:function(){return this._maximumDepth},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"objectCount",{get:function(){return this._objectCount},enumerable:!0,configurable:!0});c.prototype.destroy=function(){this._degenerateObjects.clear();this._root=null;q.clearPool();x=[null];A.prune();G.prune();I.prune()};c.prototype.add=function(a,b){a=this._objectOrObjectsArray(a);b=null==b?a.length:b;this._objectCount+=b;this._grow(a);for(var d=q.acquire(),c=0;c<b;c++){var e=a[c];d.init(this._root);
this._isDegenerate(e)?this._degenerateObjects.add(e):this._add(e,d)}q.release(d)};c.prototype.remove=function(a,b){a=this._objectOrObjectsArray(a);this._objectCount-=a.length;for(var d=q.acquire(),c=0;c<a.length;c++){var e=a[c],f=b||this._boundingSphereFromObject(e,B);this._isValidRadius(f.radius)?(d.init(this._root),this._remove(e,f,d)):this._degenerateObjects.delete(e)}q.release(d);this._shrink()};c.prototype.update=function(a,b){if(this._isValidRadius(b.radius)||!this._isDegenerate(a))this.remove(a,
b),this.add(a)};c.prototype.forEachAlongRay=function(a,b,d){var c=this;this._forEachNode(this._root,function(e){if(!c._intersectsNode(a,b,e))return!1;e=e.node;e.terminals.forEach(function(e){c._intersectsObject(a,b,e)&&d(e)});null!==e.residents&&e.residents.forEach(function(e){c._intersectsObject(a,b,e)&&d(e)});return!0})};c.prototype.forEach=function(a){this._forEachNode(this._root,function(b){b=b.node;b.terminals.forEach(a);null!==b.residents&&b.residents.forEach(a);return!0});this._degenerateObjects.forEach(a)};
c.prototype.forEachDegenerateObject=function(a){this._degenerateObjects.forEach(a)};c.prototype.findClosest=function(a,b,d,c,e){return this._findClosest(a,"front-to-back"===b?1:-1,d,c,e)};c.prototype.forEachInDepthRange=function(a,b,d,c,e,f,g,m){this._forEachInDepthRange(a,b,"front-to-back"===d?1:-1,c,e,f,g,m)};c.prototype.forEachNode=function(a){this._forEachNode(this._root,function(b){return a(b.node,b.center,2*b.halfSize)})};c.prototype._intersectsNode=function(a,b,d){f(d.center,2*-d.halfSize,
y);f(d.center,2*d.halfSize,z);return g.rayBoxTest(a,b,y,z)};c.prototype._intersectsObject=function(a,b,d){var c=this._objectToBoundingSphere.getRadius(d);return 0<c?h.sphere.intersectsRay(h.sphere.wrap(c,this._objectToBoundingSphere.getCenter(d)),h.ray.wrap(a,b)):!0};c.prototype._forEachNode=function(a,b){a=q.acquire().init(a);for(var d=[a];0!==d.length;){a=d.pop();if(b(a)&&!a.isLeaf())for(var c=0;c<a.node.children.length;c++)a.node.children[c]&&d.push(q.acquire().init(a).advance(c));q.release(a)}};
c.prototype._forEachNodeDepthOrdered=function(b,d,c,e){void 0===e&&(e=1);b=q.acquire().init(b);var f=[b];for(a(c,e,I);0!==f.length;){b=f.pop();if(d(b)&&!b.isLeaf())for(c=7;0<=c;--c)e=I.data[c],e>=b.node.children.length||b.node.children[e]&&f.push(q.acquire().init(b).advance(e));q.release(b)}};c.prototype._findClosest=function(a,d,c,f,g){var h=this,l=Infinity,q=Infinity,t=null,n=e(a,d),u=0,x=function(e){++u;if(!f||f(e)){var g=h._objectToBoundingSphere.getCenter(e),k=h._objectToBoundingSphere.getRadius(e);
if(!c||!b(g,k,c)){var g=m(a,d,g),r=g-k;r<l&&(l=r,q=g+k,t=e)}}};this._forEachNodeDepthOrdered(this._root,function(e){if(null!=g&&u>=g||c&&b(e.center,e.halfSize*r,c))return!1;k.vec3.scale(v,n,e.halfSize);k.vec3.add(v,v,e.center);if(m(a,d,v)>q)return!1;e=e.node;e.terminals.forEach(function(a){x(a)});null!==e.residents&&e.residents.forEach(function(a){x(a)});return!0},a,d);return t};c.prototype._forEachInDepthRange=function(a,d,c,f,g,h,l,q){var t=this,n=-Infinity,u=Infinity,x={setRange:function(a){1===
c?(n=Math.max(n,a.near),u=Math.min(u,a.far)):(n=Math.max(n,-a.far),u=Math.min(u,-a.near))}};x.setRange(f);var w=m(d,c,a),p=e(d,c),y=e(d,-1*c),z=0,A=function(a){++z;if(!l||l(a)){var e=t._objectToBoundingSphere.getCenter(a),f=t._objectToBoundingSphere.getRadius(a),k=m(d,c,e)-w;k-f>u||k+f<n||h&&b(e,f,h)||g(a,x)}};this._forEachNodeDepthOrdered(this._root,function(a){if(null!=q&&z>=q||h&&b(a.center,a.halfSize*r,h))return!1;k.vec3.scale(v,p,a.halfSize);k.vec3.add(v,v,a.center);if(m(d,c,v)-w>u)return!1;
k.vec3.scale(v,y,a.halfSize);k.vec3.add(v,v,a.center);if(m(d,c,v)-w<n)return!1;a=a.node;a.terminals.forEach(function(a){A(a)});null!==a.residents&&a.residents.forEach(function(a){A(a)});return!0},d,c)};c.prototype._objectOrObjectsArray=function(a){if(Array.isArray(a))return a;x[0]=a;return x};c.prototype._remove=function(a,b,d){A.clear();b=d.advanceTo(b,function(a,b){A.push(a.node);A.push(b)})?d.node.terminals:d.node.residents;b.removeUnordered(a);if(0===b.length)for(a=A.length-2;0<=a&&this._purge(A.data[a],
A.data[a+1]);a-=2);};c.prototype._nodeIsEmpty=function(a){if(0!==a.terminals.length)return!1;if(null!==a.residents)return 0===a.residents.length;for(var b=0;b<a.children.length;b++)if(a.children[b])return!1;return!0};c.prototype._purge=function(a,b){0<=b&&(a.children[b]=null);return this._nodeIsEmpty(a)?(null===a.residents&&(a.residents=new l({shrink:!0})),!0):!1};c.prototype._add=function(a,b){b.advanceTo(this._boundingSphereFromObject(a,B))?b.node.terminals.push(a):(b.node.residents.push(a),b.node.residents.length>
this._maximumObjectsPerNode&&b.depth<this._maximumDepth&&this._split(b))};c.prototype._split=function(a){var b=a.node.residents;a.node.residents=null;for(var d=0;d<b.length;d++){var c=q.acquire().init(a);this._add(b.data[d],c);q.release(c)}};c.prototype._grow=function(a){var b=this;if(0!==a.length&&(a=this._boundingSphereFromObjects(a,function(a,d){return b._boundingSphereFromObject(a,d)},D),this._isValidRadius(a.radius)&&!this._fitsInsideTree(a)))if(this._nodeIsEmpty(this._root.node))k.vec3.copy(this._root.center,
a.center),this._root.halfSize=1.25*a.radius;else{var d=q.acquire();this._rootBoundsForRootAsSubNode(a,d);this._placingRootViolatesMaxDepth(d)?this._rebuildTree(a,d):this._growRootAsSubNode(d);q.release(d)}};c.prototype._rebuildTree=function(a,b){var d=this;k.vec3.copy(C.center,b.center);C.radius=b.halfSize;a=this._boundingSphereFromObjects([a,C],function(a){return a},E);b=q.acquire().init(this._root);this._root.initFrom(null,a.center,1.25*a.radius);this._forEachNode(b,function(a){d.add(a.node.terminals.data,
a.node.terminals.length);null!==a.node.residents&&d.add(a.node.residents.data,a.node.residents.length);return!0});q.release(b)};c.prototype._placingRootViolatesMaxDepth=function(a){var b=0;this._forEachNode(this._root,function(a){b=Math.max(b,a.depth);return!0});return b+Math.log(a.halfSize/this._root.halfSize)*Math.LOG2E>this._maximumDepth};c.prototype._rootBoundsForRootAsSubNode=function(a,b){var d=a.radius,c=a.center;a=-Infinity;for(var e=this._root.center,f=this._root.halfSize,g=0;3>g;g++){var m=
Math.max(0,Math.ceil((e[g]-f-(c[g]-d))/(2*f))),h=Math.max(0,Math.ceil((c[g]+d-(e[g]+f))/(2*f)))+1;a=Math.max(a,Math.pow(2,Math.ceil(Math.log(m+h)*Math.LOG2E)));H[g].min=m;H[g].max=h}for(g=0;3>g;g++)m=H[g].min,h=H[g].max,d=(a-(m+h))/2,m+=Math.ceil(d),h+=Math.floor(d),w[g]=e[g]-f-m*f*2+(h+m)*f;return b.initFrom(null,w,a*f,0)};c.prototype._growRootAsSubNode=function(a){var b=this._root.node;k.vec3.copy(D.center,this._root.center);D.radius=this._root.halfSize;this._root.init(a);a.advanceTo(D,null,!0);
a.node.children=b.children;a.node.residents=b.residents;a.node.terminals=b.terminals};c.prototype._shrink=function(){for(;;){var a=this._findShrinkIndex();if(-1===a)break;this._root.advance(a);this._root.depth=0}};c.prototype._findShrinkIndex=function(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;for(var a=null,b=this._root.node.children,d=0,c=0;c<b.length&&null==a;)d=c++,a=b[d];for(;c<b.length;)if(b[c++])return-1;return d};c.prototype._isDegenerate=function(a){a=this._objectToBoundingSphere.getRadius(a);
return!this._isValidRadius(a)};c.prototype._isValidRadius=function(a){return!isNaN(a)&&-Infinity!==a&&Infinity!==a&&0<a};c.prototype._fitsInsideTree=function(a){var b=this._root.center,d=this._root.halfSize,c=a.center;return a.radius<=d&&c[0]>=b[0]-d&&c[0]<=b[0]+d&&c[1]>=b[1]-d&&c[1]<=b[1]+d&&c[2]>=b[2]-d&&c[2]<=b[2]+d};c.prototype._boundingSphereFromObject=function(a,b){k.vec3.copy(b.center,this._objectToBoundingSphere.getCenter(a));b.radius=this._objectToBoundingSphere.getRadius(a);return b};c.prototype._boundingSphereFromObjects=
function(a,b,d){if(1===a.length){var c=b(a[0],D);k.vec3.copy(d.center,c.center);d.radius=c.radius}else{y[0]=Infinity;y[1]=Infinity;y[2]=Infinity;z[0]=-Infinity;z[1]=-Infinity;z[2]=-Infinity;for(var e=0;e<a.length;e++)if(c=b(a[e],D),this._isValidRadius(c.radius)){var f=y,g=c.center,m=c.radius;f[0]=Math.min(f[0],g[0]-m);f[1]=Math.min(f[1],g[1]-m);f[2]=Math.min(f[2],g[2]-m);f=z;g=c.center;c=c.radius;f[0]=Math.max(f[0],g[0]+c);f[1]=Math.max(f[1],g[1]+c);f[2]=Math.max(f[2],g[2]+c)}k.vec3.lerp(d.center,
y,z,.5);d.radius=Math.max(z[0]-y[0],z[1]-y[1],z[2]-y[2])/2}return d};return c}();var q=function(){function a(a,b,c,e){void 0===c&&(c=0);void 0===e&&(e=0);this.center=d.vec3f64.create();this.initFrom(a,b,c,0)}a.prototype.init=function(a){return this.initFrom(a.node,a.center,a.halfSize,a.depth)};a.prototype.initFrom=function(b,d,c,e){void 0===b&&(b=null);void 0===c&&(c=this.halfSize);void 0===e&&(e=this.depth);this.node=b||a.createEmptyNode();d&&k.vec3.copy(this.center,d);this.halfSize=c;this.depth=
e;return this};a.prototype.advance=function(b){var d=this.node.children[b];d||(d=a.createEmptyNode(),this.node.children[b]=d);this.node=d;this.halfSize/=2;this.depth++;b=u[b];this.center[0]+=b[0]*this.halfSize;this.center[1]+=b[1]*this.halfSize;this.center[2]+=b[2]*this.halfSize;return this};a.prototype.advanceTo=function(a,b,d){for(void 0===d&&(d=!1);;){if(this.isTerminalFor(a))return b&&b(this,-1),!0;if(this.isLeaf()&&!d)return b&&b(this,-1),!1;this.isLeaf()&&(this.node.residents=null);var c=this._childIndex(a);
b&&b(this,c);this.advance(c)}};a.prototype.isLeaf=function(){return null!=this.node.residents};a.prototype.isTerminalFor=function(a){return a.radius>this.halfSize/2};a.prototype._childIndex=function(a){a=a.center;for(var b=this.center,d=0,c=0;3>c;c++)b[c]<a[c]&&(d|=1<<c);return d};a.createEmptyNode=function(){return{children:[null,null,null,null,null,null,null,null],terminals:new l({shrink:!0}),residents:new l({shrink:!0})}};a.acquire=function(){return a._pool.acquire()};a.release=function(b){a._pool.release(b)};
a.clearPool=function(){a._pool.prune()};a._pool=new n(a);return a}(),u=[d.vec3f64.fromValues(-1,-1,-1),d.vec3f64.fromValues(1,-1,-1),d.vec3f64.fromValues(-1,1,-1),d.vec3f64.fromValues(1,1,-1),d.vec3f64.fromValues(-1,-1,1),d.vec3f64.fromValues(1,-1,1),d.vec3f64.fromValues(-1,1,1),d.vec3f64.fromValues(1,1,1)],t=[d.vec3f64.fromValues(-1,-1,-1),d.vec3f64.fromValues(-1,-1,1),d.vec3f64.fromValues(-1,1,-1),d.vec3f64.fromValues(-1,1,1),d.vec3f64.fromValues(1,-1,-1),d.vec3f64.fromValues(1,-1,1),d.vec3f64.fromValues(1,
1,-1),d.vec3f64.fromValues(1,1,1)],r=Math.sqrt(3),x=[null],w=d.vec3f64.create(),v=d.vec3f64.create(),y=d.vec3f64.create(),z=d.vec3f64.create(),A=new l,B={center:d.vec3f64.create(),radius:0},D={center:d.vec3f64.create(),radius:0},C={center:d.vec3f64.create(),radius:0},E={center:d.vec3f64.create(),radius:0},H=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],G=new l,I=new l;return p})},"esri/views/3d/webgl-engine/materials/RibbonLineMaterial":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/assignHelper ../../../../core/Logger ../../../../core/mathUtils ../../../../core/screenUtils ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../support/geometryUtils ../../support/buffer/InterleavedLayout ../lib/ComponentUtils ../lib/GLMaterial ../lib/Material ../lib/Util ./VisualVariableMaterialParameters ./internal/MaterialUtil ./renderers/InstancedRenderer ./renderers/MergedRenderer ../shaders/RibbonLinePrograms ../../../webgl/renderState".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z){function A(a,b){b.vvSizeEnabled&&(a.setUniform3fv("vvSizeMinSize",b.vvSizeMinSize),a.setUniform3fv("vvSizeMaxSize",b.vvSizeMaxSize),a.setUniform3fv("vvSizeOffset",b.vvSizeOffset),a.setUniform3fv("vvSizeFactor",b.vvSizeFactor));b.vvColorEnabled&&(a.setUniform1fv("vvColorValues",b.vvColorValues),a.setUniform4fv("vvColorColors",b.vvColorColors));b.vvOpacityEnabled&&(a.setUniform1fv("vvOpacityValues",b.vvOpacityValues),a.setUniform1fv("vvOpacityOpacities",
b.vvOpacityOpacities))}var B=k.getLogger("esri.views.3d.webgl-engine.materials.RibbonLineMaterial");p=function(b){function c(a,d){d=b.call(this,d)||this;d.params=x.copyParameters(a,E);"miter"!==d.params.join&&(d.params.miterLimit=0);d.params.transparent=1>d.params.color[3]||d.params.transparent;d.canBeMerged=null==d.params.stippleLength;d.layout=d.createLayout();return d}n(c,b);c.prototype.getColor=function(){return this.params.color};c.prototype.dispose=function(){};c.prototype.setParameterValues=
function(a){for(var b in a)t.assert("cap"!==b,"RibbonLineMaterial: cap cannot be changed after creation"),t.assert("stippleLength"!==b||null!=a[b]===(null!=this.params[b]),"RibbonLineMaterial: stippleLength on/off cannot be changed after creation"),this.params[b]=a[b];"miter"!==this.params.join&&(this.params.miterLimit=0);this.notifyDirty("matChanged")};c.prototype.getParameters=function(){return this.params};c.prototype.intersect=function(a,b,d,c,e,f,g,m,h){h?x.intersectDrapedRenderLineGeometry(a,
b,d,c,e,f,this.params.width,g):this.intersectLineGeometry(a,b,d,c,e,f,this.params.width,g)};c.prototype.intersectLineGeometry=function(b,c,e,h,k,l,q,r,n){if(h.enable.selectionMode&&!m.isAllHidden(c.componentVisibilities,b.componentOffsets))if(t.isTranslationMatrix(e)){c=b.data.getVertexAttr();b=c[y.VertexAttrConstants.POSITION].data;this.params.vvSizeEnabled?q*=d.clamp(this.params.vvSizeOffset[0]+c[y.VertexAttrConstants.SIZEFEATUREATTRIBUTE].data[0]*this.params.vvSizeFactor[0],this.params.vvSizeMinSize[0],
this.params.vvSizeMaxSize[0]):c[y.VertexAttrConstants.SIZE]&&(q*=c[y.VertexAttrConstants.SIZE].data[0]);k=h.camera;l=O;g.vec2.copy(l,h.point);q=q*k.pixelRatio/2+4*k.pixelRatio;f.vec3.set(Z[0],l[0]-q,l[1]+q,0);f.vec3.set(Z[1],l[0]+q,l[1]+q,0);f.vec3.set(Z[2],l[0]+q,l[1]-q,0);f.vec3.set(Z[3],l[0]-q,l[1]-q,0);for(n=0;4>n;n++)k.unprojectPoint(Z[n],da[n]);a.plane.fromPoints(k.eye,da[0],da[1],ja);a.plane.fromPoints(k.eye,da[1],da[2],ba);a.plane.fromPoints(k.eye,da[2],da[3],ha);a.plane.fromPoints(k.eye,
da[3],da[0],W);c=Number.MAX_VALUE;for(n=0;n<b.length-5;n+=3)if(M[0]=b[n]+e[12],M[1]=b[n+1]+e[13],M[2]=b[n+2]+e[14],T[0]=b[n+3]+e[12],T[1]=b[n+4]+e[13],T[2]=b[n+5]+e[14],!(0>a.plane.signedDistance(ja,M)&&0>a.plane.signedDistance(ja,T)||0>a.plane.signedDistance(ba,M)&&0>a.plane.signedDistance(ba,T)||0>a.plane.signedDistance(ha,M)&&0>a.plane.signedDistance(ha,T)||0>a.plane.signedDistance(W,M)&&0>a.plane.signedDistance(W,T))){k.projectPoint(M,V);k.projectPoint(T,Q);if(0>V[2]&&0<Q[2]){f.vec3.subtract(N,
M,T);var u=k.frustum,x=-a.plane.signedDistance(u.planes[4],M),u=x/f.vec3.dot(N,u.planes[4]);f.vec3.scale(N,N,u);f.vec3.add(M,M,N);k.projectPoint(M,V)}else if(0<V[2]&&0>Q[2])f.vec3.subtract(N,T,M),u=k.frustum,x=-a.plane.signedDistance(u.planes[4],T),u=x/f.vec3.dot(N,u.planes[4]),f.vec3.scale(N,N,u),f.vec3.add(T,T,N),k.projectPoint(T,Q);else if(0>V[2]&&0>Q[2])continue;V[2]=0;Q[2]=0;u=a.lineSegment.distance2(a.lineSegment.fromPoints(V,Q,L),l);u<c&&(c=u,f.vec3.copy(J,M),f.vec3.copy(P,T))}e=h.rayBeginPoint;
h=h.rayEndPoint;c<q*q&&(b=Number.MAX_VALUE,a.lineSegment.closestLineSegmentPoint(a.lineSegment.fromPoints(J,P,L),a.lineSegment.fromPoints(e,h,F),S)&&(f.vec3.subtract(S,S,e),b=f.vec3.length(S),f.vec3.scale(S,S,1/b),b/=f.vec3.distance(e,h)),r(b,S))}else B.error("intersection assumes a translation-only matrix")};c.prototype.createLayout=function(){var a=e.newLayout().vec3f(y.VertexAttrConstants.POSITION).f32(y.VertexAttrConstants.SUBDIVISIONFACTOR).vec2f(y.VertexAttrConstants.UV0).vec3f(y.VertexAttrConstants.AUXPOS1).vec3f(y.VertexAttrConstants.AUXPOS2);
this.params.vvSizeEnabled?a.f32(y.VertexAttrConstants.SIZEFEATUREATTRIBUTE):a.f32(y.VertexAttrConstants.SIZE);this.params.vvColorEnabled?a.f32(y.VertexAttrConstants.COLORFEATUREATTRIBUTE):a.vec4f(y.VertexAttrConstants.COLOR);this.params.vvOpacityEnabled&&a.f32(y.VertexAttrConstants.OPACITYFEATUREATTRIBUTE);return a};c.prototype.createBufferWriter=function(){return new H(this.layout,this.params)};c.prototype.createRenderer=function(a,b){return this.canBeMerged?new v(a,b,this,y.vertexAttributeLocations):
new w(a,b,this,y.vertexAttributeLocations)};c.prototype.getGLMaterials=function(){return{color:D,depthShadowMap:void 0,normal:void 0,depth:void 0,highlight:C}};return c}(u);var D=function(a){function b(b,d){b=a.call(this,b,d)||this;b.updateParameters();return b}n(b,a);b.prototype.updateParameters=function(){this.params=x.copyParameters(this.material.getParameters());this.selectProgram()};b.prototype.beginSlot=function(a){return a===(this.params.writeDepth?7:10)};b.prototype.getProgram=function(){return this.program};
b.prototype.selectProgram=function(){var a=this.params;this.program=this.programRep.getProgram(y.colorPass,{stipple:null!=a.stippleLength,slice:a.slicePlaneEnabled,join:a.join,cap:a.cap,vvSize:a.vvSizeEnabled,vvColor:a.vvColorEnabled,vvOpacity:a.vvOpacityEnabled});this.pipelineState=z.makePipelineState({blending:z.separateBlendingParams(770,1,771,771),polygonOffset:a.polygonOffset&&G,depthTest:{func:513},depthWrite:!a.transparent&&a.writeDepth&&z.defaultDepthWriteParams,colorWrite:z.defaultColorWriteParams})};
b.prototype.bind=function(a,b){var d=this.program,c=this.params;a.bindProgram(d);a.setPipelineState(this.pipelineState);d.setUniform1f("symbolLineWidth",c.width);d.setUniform4fv("symbolColor",c.color);d.setUniform1f("miterLimit",c.miterLimit);d.setUniform1f("nearPlane",b.nearFar[0]);d.setUniform1f("pixelRatio",b.pixelRatio);d.setUniform2fv("screenSize",[b.viewport[2],b.viewport[3]]);null!=c.stippleLength&&d.setUniform1f("stippleLengthDoubleInv",c.stippleLength?1/(2*c.stippleLength):0);A(d,c)};b.prototype.release=
function(a){};b.prototype.bindView=function(a,b){a=this.program;var d=this.params;x.bindView(b.origin,b.view,a);d.slicePlaneEnabled&&x.bindSlicePlane(b.origin,b.slicePlane,a)};b.prototype.bindInstance=function(a,b){this.program.setUniformMatrix4fv("model",b.transformation)};b.prototype.getDrawMode=function(){return 5};return b}(q),C=function(a){function b(b,d){b=a.call(this,b,d)||this;b.updateParameters();return b}n(b,a);b.prototype.updateParameters=function(){this.params=x.copyParameters(this.material.getParameters());
this.selectProgram()};b.prototype.beginSlot=function(a){return 5===a};b.prototype.getProgram=function(){return this.program};b.prototype.selectProgram=function(){var a=this.params;this.program=this.programRep.getProgram(y.highlightPass,{stipple:null!=a.stippleLength,slice:a.slicePlaneEnabled,join:a.join,cap:a.cap,vvSize:a.vvSizeEnabled,vvColor:a.vvColorEnabled,vvOpacity:a.vvOpacityEnabled});this.pipelineState=z.makePipelineState({polygonOffset:a.polygonOffset&&G,depthTest:{func:513},depthWrite:!a.transparent&&
a.writeDepth&&z.defaultDepthWriteParams,colorWrite:z.defaultColorWriteParams})};b.prototype.bind=function(a,b){var d=this.program,c=this.params;a.bindProgram(d);a.setPipelineState(this.pipelineState);x.bindHighlightRendering(a,b,d);d.setUniform1f("symbolLineWidth",c.width);d.setUniform4fv("symbolColor",c.color);d.setUniform1f("miterLimit",c.miterLimit);d.setUniform1f("nearPlane",b.nearFar[0]);d.setUniform1f("pixelRatio",b.pixelRatio);d.setUniform2fv("screenSize",[b.viewport[2],b.viewport[3]]);null!=
c.stippleLength&&d.setUniform1f("stippleLengthDoubleInv",c.stippleLength?1/(2*c.stippleLength):0);A(d,c)};b.prototype.release=function(a){};b.prototype.bindView=function(a,b){a=this.program;var d=this.params;x.bindView(b.origin,b.view,a);d.slicePlaneEnabled&&x.bindSlicePlane(b.origin,b.slicePlane,a)};b.prototype.bindInstance=function(a,b){this.program.setUniformMatrix4fv("model",b.transformation)};b.prototype.getDrawMode=function(){return 5};return b}(q),E=l({width:0,color:[1,1,1,1],join:"miter",
cap:"butt",miterLimit:5,writeDepth:!0,polygonOffset:!1,stippleLength:null,slicePlaneEnabled:!1,vvFastUpdate:!1,transparent:!1},r.Default),H=function(){function a(a,b){this.parms=b;this.numJoinSubdivisions=this.numCapSubdivisions=0;this.canBeMerged=!1;this.vertexBufferLayout=a;this.canBeMerged=null==this.parms.stippleLength;switch(this.parms.cap){case "butt":this.numCapSubdivisions=0;break;case "square":this.numCapSubdivisions=1;break;case "round":this.numCapSubdivisions=I}switch(this.parms.join){case "miter":case "bevel":this.numJoinSubdivisions=
0;break;case "round":this.numJoinSubdivisions=K}}a.prototype.allocate=function(a){return this.vertexBufferLayout.createBuffer(a)};a.prototype.elementCount=function(a){var b=a.indices[y.VertexAttrConstants.POSITION].length/2+1,d=2*(2*this.numCapSubdivisions+2);if(a.vertexAttr[y.VertexAttrConstants.SUBDIVISIONS]){a=a.vertexAttr[y.VertexAttrConstants.SUBDIVISIONS].data;for(var c=1;c<b-1;++c)d+=4+2*a[c]}else d+=(b-2)*(2*this.numJoinSubdivisions+4);this.canBeMerged&&(d+=2);return d};a.prototype.write=
function(a,b,d,c){var e=this,g=Y,m=X,h=R,k=b.vertexAttr[y.VertexAttrConstants.POSITION].data,l=b.indices&&b.indices[y.VertexAttrConstants.POSITION];l&&l.length!==2*(k.length/3-1)&&console.warn("RibbonLineMaterial does not support indices");l=null;b.vertexAttr[y.VertexAttrConstants.SUBDIVISIONS]&&(l=b.vertexAttr[y.VertexAttrConstants.SUBDIVISIONS].data);var q=1,r=0;this.parms.vvSizeEnabled?r=b.vertexAttr[y.VertexAttrConstants.SIZEFEATUREATTRIBUTE].data[0]:b.vertexAttr[y.VertexAttrConstants.SIZE]&&
(q=b.vertexAttr[y.VertexAttrConstants.SIZE].data[0]);var t=[1,1,1,1],n=0;this.parms.vvColorEnabled?n=b.vertexAttr[y.VertexAttrConstants.COLORFEATUREATTRIBUTE].data[0]:b.vertexAttr[y.VertexAttrConstants.COLOR]&&(t=b.vertexAttr[y.VertexAttrConstants.COLOR].data);var u=0;this.parms.vvOpacityEnabled&&(u=b.vertexAttr[y.VertexAttrConstants.OPACITYFEATUREATTRIBUTE].data[0]);b=k.length/3;a=a.transformation;var x=new Float32Array(d.buffer),v=0;d=this.vertexBufferLayout.stride/4;var w=c*d,p=w,z=function(a,
b,d,c,f,g){x[w++]=b[0];x[w++]=b[1];x[w++]=b[2];x[w++]=c;x[w++]=f;x[w++]=g;x[w++]=a[0];x[w++]=a[1];x[w++]=a[2];x[w++]=d[0];x[w++]=d[1];x[w++]=d[2];e.parms.vvSizeEnabled?x[w++]=r:x[w++]=q;e.parms.vvColorEnabled?x[w++]=n:(x[w++]=t[0],x[w++]=t[1],x[w++]=t[2],x[w++]=t[3]);e.parms.vvOpacityEnabled&&(x[w++]=u)};this.canBeMerged&&(w+=d);f.vec3.set(g,k[0],k[1],k[2]);a&&f.vec3.transformMat4(g,g,a);f.vec3.set(h,k[3],k[4],k[5]);a&&f.vec3.transformMat4(h,h,a);f.vec3.copy(m,g);for(c=0;c<this.numCapSubdivisions;++c){var A=
1-c/this.numCapSubdivisions;z(g,m,h,A,v,-4);z(g,m,h,A,v,4)}z(g,m,h,0,v,-4);z(g,m,h,0,v,4);f.vec3.copy(g,m);f.vec3.copy(m,h);for(c=1;c<b-1;c++){A=3*c;f.vec3.set(h,k[A+3],k[A+4],k[A+5]);a&&f.vec3.transformMat4(h,h,a);v+=f.vec3.distance(g,m);z(g,m,h,0,v,-1);z(g,m,h,0,v,1);for(var B=l?l[c]:this.numJoinSubdivisions,D=0;D<B;++D)A=(D+1)/(B+1),z(g,m,h,A,v,-2),z(g,m,h,A,v,2);z(g,m,h,1,v,-2);z(g,m,h,1,v,2);f.vec3.copy(g,m);f.vec3.copy(m,h)}v+=f.vec3.distance(g,m);z(g,m,h,0,v,-5);z(g,m,h,0,v,5);for(c=0;c<this.numCapSubdivisions;++c)A=
(c+1)/this.numCapSubdivisions,z(g,m,h,A,v,-5),z(g,m,h,A,v,5);if(this.canBeMerged){for(c=p;c<p+d;c++)x[c]=x[c+d];g=w-d;for(c=0;c<d;c++)x[w++]=x[g++]}};return a}(),G={factor:0,units:-4},I=3,K=1,M=b.vec3f64.create(),T=b.vec3f64.create(),N=b.vec3f64.create(),S=b.vec3f64.create(),O=b.vec3f64.create(),V=h.createRenderScreenPointArray3(),Q=h.createRenderScreenPointArray3(),J=b.vec3f64.create(),P=b.vec3f64.create(),L=a.lineSegment.create(),F=a.lineSegment.create(),Y=b.vec3f64.create(),X=b.vec3f64.create(),
R=b.vec3f64.create(),Z=[h.createRenderScreenPointArray3(),h.createRenderScreenPointArray3(),h.createRenderScreenPointArray3(),h.createRenderScreenPointArray3()],da=[b.vec3f64.create(),b.vec3f64.create(),b.vec3f64.create(),b.vec3f64.create()],ja=a.plane.create(),ba=a.plane.create(),ha=a.plane.create(),W=a.plane.create();return p})},"esri/views/3d/webgl-engine/materials/VisualVariableMaterialParameters":function(){define(["require","exports","../../../../core/libs/gl-matrix-2/mat3f64","../../../../core/libs/gl-matrix-2/vec3f32"],
function(p,c,n,l){var k;(k||(k={})).Default={vvSizeEnabled:!1,vvSizeMinSize:l.vec3f32.fromValues(1,1,1),vvSizeMaxSize:l.vec3f32.fromValues(100,100,100),vvSizeOffset:l.vec3f32.fromValues(0,0,0),vvSizeFactor:l.vec3f32.fromValues(1,1,1),vvSizeValue:l.vec3f32.fromValues(1,1,1),vvColorEnabled:!1,vvColorValues:[0,0,0,0,0,0,0,0],vvColorColors:[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],vvOpacityEnabled:!1,vvOpacityValues:[0,0,0,0,0,0,0,0],vvOpacityOpacities:[1,1,1,1,1,1,1,1],vvSymbolAnchor:[0,
0,0],vvSymbolRotationMatrix:n.mat3f64.create()};return k})},"esri/views/3d/webgl-engine/materials/renderers/InstancedRenderer":function(){define("require exports ../../../../../core/libs/gl-matrix-2/mat4f64 ../../../support/buffer/glUtil ../../lib/DefaultVertexAttributeLocations ./Instance ./utils ../../../../webgl/BufferObject ../../../../webgl/Util ../../../../webgl/VertexArrayObject".split(" "),function(p,c,n,l,k,d,h,g,f,b){function a(a,b){var d=new Map,c=function(a,b){var c=a.origin.id,e=a.data.id,
f=d.get(c);f||(f={origin:a.origin.vec3,deltaByGeometry:new Map},d.set(c,f));c=f.deltaByGeometry.get(e);c||(c={renderData:a.data,toAdd:[],toRemove:[]},f.deltaByGeometry.set(e,c));(b?c.toAdd:c.toRemove).push(a)};a.forEach(function(a){c(a,!0)});b.forEach(function(a){c(a,!1)});return d}function e(a,b,d){var c=b.elementCount(a),c=b.allocate(c);b.write({},a,c,0);d.setData(c.buffer)}return function(){function c(a,b,d,c){void 0===c&&(c=k.Default3D);this._dataByOrigin=new Map;this._highlightCount=0;this._rctx=
a;this._vertexAttributeLocations=c;this._material=d;this._materialRep=b;this._glMaterials=h.acquireMaterials(this._material,this._materialRep);this._bufferWriter=d.createBufferWriter()}c.prototype.dispose=function(){h.releaseMaterials(this._material,this._materialRep)};Object.defineProperty(c.prototype,"isEmpty",{get:function(){return 0===this._dataByOrigin.size},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"hasHighlights",{get:function(){return 0<this._highlightCount},enumerable:!0,
configurable:!0});c.prototype.hasWater=function(){return!1};c.prototype.renderPriority=function(){return this._material.renderPriority};c.prototype.modify=function(a){this.updateGeometries(a.toUpdate);this.addAndRemoveGeometries(a.toAdd,a.toRemove);this.updateHighlightCount()};c.prototype.addAndRemoveGeometries=function(c,m){var k=this,q=this._rctx,u=this._bufferWriter,w=this._dataByOrigin;c=a(c,m);var v=u.vertexBufferLayout;c.forEach(function(a,c){var m=w.get(c);m||(m={origin:a.origin,highlightCount:0,
dataByGeometry:new Map},w.set(c,m));a.deltaByGeometry.forEach(function(a,c){var r=m.dataByGeometry.get(c);!r&&0<a.toAdd.length&&(r={vao:new b(q,k._vertexAttributeLocations,{geometry:l.glLayout(v)},{geometry:g.createVertex(q,35044)}),vertexCount:0,instances:new Map,highlightCount:0},e(a.renderData,u,r.vao.vertexBuffers.geometry),r.vertexCount=f.vertexCount(r.vao,"geometry"),m.dataByGeometry.set(c,r));var t=r.instances;a.toAdd.forEach(function(a){var b=n.mat4f64.create();h.calculateTransformRelToOrigin(a,
b);var c=h.generateRenderGeometryVisibleIndexRanges(a),e=h.generateRenderGeometryHighlightRanges(a),b=new d(a.name,0,r.vertexCount,c,e,b,a.instanceParameters,a.idx,a.data.id);t.set(a.uniqueName,b);m.highlightCount=null;r.highlightCount=null});a.toRemove.forEach(function(a){t.delete(a.uniqueName)});0===t.size&&(r.vao.dispose(),m.dataByGeometry.delete(c))});0===m.dataByGeometry.size&&w.delete(c)})};c.prototype.updateGeometries=function(a){var b=this._dataByOrigin,d=this._bufferWriter;a.forEach(function(a){var c=
a.updateType;a=a.renderGeometry;var f=b.get(a.origin.id),g=f&&f.dataByGeometry.get(a.data.id),m=g&&g.instances.get(a.uniqueName);m&&(c&1&&(m.displayedIndexRange=h.generateRenderGeometryVisibleIndexRanges(a)),c&17&&(m.highlightedIndexRanges=h.generateRenderGeometryHighlightRanges(a),f.highlightCount=null,g.highlightCount=null),c&2&&e(a.data,d,g.vao.vertexBuffers.geometry),c&4&&h.calculateTransformRelToOrigin(a,m.transformation,m.transformationNormal))})};c.prototype.updateHighlightCount=function(){var a=
this;this._highlightCount=0;this._dataByOrigin.forEach(function(b){if(null==b.highlightCount){var d=0;b.dataByGeometry.forEach(function(a){if(null==a.highlightCount){var b=0;a.instances.forEach(function(a){a.highlightedIndexRanges&&++b});a.highlightCount=b}d+=a.highlightCount});b.highlightCount=d}a._highlightCount+=b.highlightCount})};c.prototype.render=function(a,b,d,c){var e=this,f=this._rctx,g=this._glMaterials.get(b.pass),m=4===b.pass;if(!g||null!=a&&!g.beginSlot(a)||m&&0===this._highlightCount)return!1;
g.bind(f,d);var h=!1;this._dataByOrigin.forEach(function(a){m&&0===a.highlightCount||(d.origin=a.origin,g.bindView(f,d),a.dataByGeometry.forEach(function(a){h=m?e.renderHighlightPass(g,a,c)||h:e.renderDefaultPass(g,a,c)||h}))});f.bindVAO(null);g.release(f,d);return h};c.prototype.renderDefaultPass=function(a,b,d){var c=this._rctx,e=a.getProgram(),g=a.getDrawMode(),m=b.vao,k=b.vertexCount;f.assertCompatibleVertexAttributeLocations(m,e);c.bindVAO(m);var l=!1;b.instances.forEach(function(b){var e=b.displayedIndexRange;
e&&0===e.length||(a.bindInstance(c,b),e?h.drawArraysFaceRange(c,e,0,g,d):h.drawArrays(c,g,0,k,d),l=!0)});return l};c.prototype.renderHighlightPass=function(a,b,d){var c=this._rctx,e=a.getProgram(),g=a.getDrawMode(),m=b.vao,k=b.vertexCount;if(0!==b.highlightCount){f.assertCompatibleVertexAttributeLocations(m,e);c.bindVAO(m);var l=!1;b.instances.forEach(function(b){var e=b.highlightedIndexRanges;if(e&&0!==e.length)for(a.bindInstance(c,b),b=0;b<e.length;b++){var f=e[b];h.drawArrays(c,g,f.range?f.range[0]:
0,f.range?f.range[1]-f.range[0]+1:k,d);l=!0}});return l}};return c}()})},"esri/views/3d/webgl-engine/shaders/RibbonLinePrograms":function(){define(["require","exports","./sources/resolver","../../../webgl/programUtils"],function(p,c,n,l){Object.defineProperty(c,"__esModule",{value:!0});c.VertexAttrConstants={POSITION:"position",SUBDIVISIONFACTOR:"subdivisionFactor",UV0:"uv0",AUXPOS1:"auxpos1",AUXPOS2:"auxpos2",SUBDIVISIONS:"subdivisions",COLOR:"color",COLORFEATUREATTRIBUTE:"colorFeatureAttribute",
SIZE:"size",SIZEFEATUREATTRIBUTE:"sizeFeatureAttribute",OPACITYFEATUREATTRIBUTE:"opacityFeatureAttribute"};c.vertexAttributeLocations={position:0,subdivisionFactor:1,uv0:2,auxpos1:3,auxpos2:4,size:6,sizeFeatureAttribute:6,color:5,colorFeatureAttribute:5,opacityFeatureAttribute:7,model:8,modelNormal:12,modelOriginHi:11,modelOriginLo:15};var k=function(d){return l.glslifyDefineMap({STIPPLE:d.stipple,SLICE:d.slice,JOIN_ROUND:"round"===d.join,CAP_ROUND:"round"===d.cap,VV_SIZE:d.vvSize,VV_COLOR:d.vvColor,
VV_OPACITY:d.vvOpacity})};c.colorPass={name:"ribbon-line-color",shaders:function(d){return{vertexShader:k(d)+n.resolveIncludes("materials/ribbonLine/ribbonLine.vert"),fragmentShader:k(d)+n.resolveIncludes("materials/ribbonLine/colorPass.frag")}},attributes:c.vertexAttributeLocations};c.highlightPass={name:"ribbon-line-highlight",shaders:function(d){return{vertexShader:k(d)+n.resolveIncludes("materials/ribbonLine/ribbonLine.vert"),fragmentShader:k(d)+n.resolveIncludes("materials/ribbonLine/highlightPass.frag")}},
attributes:c.vertexAttributeLocations}})},"esri/views/3d/webgl-engine/lib/Renderer":function(){define("require exports ../../../../core/maybe ../../../../core/TimeProfiler ../../../../core/libs/gl-matrix-2/vec2f64 ../../support/debugFlags ../lib/Util ./BoundingInfo ./depthRange ./depthRangeUtils ./FxaaRenderPass ./HighlightHelper ./OffscreenRenderingHelper ./RenderContext ./RenderPluginManager ./ShadowMap ./SliceHelper ./SmaaRenderPass ./SSAOHelper ./Util ./edgeRendering/EdgeView ../lighting/SceneLighting ../materials/HUDMaterial ../../../webgl/Profiling ../../../webgl/Texture".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z,A,B,D){function C(a,b){var d=new Map,c=null,e=null,f=function(a){if(a===c)return e;var b=d.get(a);b||(b={toAdd:[],toRemove:[],toUpdate:[]},d.set(a,b));c=a;return e=b};a.toAdd.forEach(function(a){1<=E(a.data)&&f(a.material).toAdd.push(a)});a.toRemove.forEach(function(a){1<=E(a.data)&&f(a.material).toRemove.push(a)});var g=0;a.toUpdate.forEach(function(a){1<=E(a.renderGeometry.data)&&(f(a.renderGeometry.material).toUpdate.push(a),g|=a.updateType)});
b&&(b.updateTypes=g);return d}function E(a){return!1===a.preinterleaved?v.getFirstObjectValue(a.indices).length:a.indexCount}function H(a,b){return a.isVisible()&&a.isVisibleInPass(b.pass)&&0!==(a.renderOccluded&b.renderOccludedMask)}p=function(){function c(b,d,f,g,h,k){var l=this;this._materialRenderers=new Map;this._orderedMaterialRenderers=[];this._hasWater=this._hasHighlights=!1;this._lighting=new z.SceneLighting;this._content=new Map;this._isRendering=!1;this._needsRender=!0;this._fallbackDepthStencilTexture=
null;this._stats=new c.RenderStats;this._edgeView=null;this.renderOptions={antialiasing:"smaa"};this._programRep=b;this._materialRep=d;this._rctx=g;this._mode=h;this._stage=k;this._fxaaPass=new a(g);this._smaaPass=new x(g);this._bindParameters={view:null,proj:null,viewInvTransp:null,fovY:0,nearFar:null,lightingData:null,viewport:null,shadowMappingEnabled:!1,ssaoEnabled:!1,origin:null,pixelRatio:null,slicePlane:null};this._offscreenRendering=new m(b,this._rctx);this._sliceHelper=new r;"scene"===this._mode&&
(this._shadowMap=new t(this._rctx),this._ssaoHelper=new w(b,this._rctx,function(){l._needsRender=!0}),this._highlightHelper=new e(b,this._rctx));this._renderPlugins=new u.RenderPluginManager({rctx:g,programRep:b,textureRep:f,materialRep:d});this._renderContext=new q(g,this._offscreenRendering,this._lighting.getOld(),this._shadowMap,this._ssaoHelper,this._sliceHelper)}c.prototype.dispose=function(){this._materialRenderers.forEach(function(a){a.dispose()});this._orderedMaterialRenderers=this._materialRenderers=
null;this._edgeView&&(this._edgeView.destroy(),this._edgeView=null);this._offscreenRendering.enabled=!1;this._fallbackDepthStencilTexture&&(this._fallbackDepthStencilTexture.dispose(),this._fallbackDepthStencilTexture=null);this._shadowMap&&(this._shadowMap.enabled=!1,this._shadowMap.dispose());this._ssaoHelper&&(this._ssaoHelper.enabled=!1,this._ssaoHelper.dispose());this._highlightHelper&&(this._highlightHelper.enabled=!1);g.tmpIndices.prune();this._content.clear();this._content=null};Object.defineProperty(c.prototype,
"isLoadingResources",{get:function(){return"smaa"===this.renderOptions.antialiasing&&this._smaaPass.isLoadingResources},enumerable:!0,configurable:!0});c.prototype.ensureEdgeView=function(){var a=this;null==this._edgeView&&(this._edgeView=new y.EdgeView(this._rctx,this._programRep,{setNeedsRender:function(){return a._needsRender=!0}}),this._edgeView.initialize());return this._edgeView};Object.defineProperty(c.prototype,"edgeView",{get:function(){return this._edgeView},enumerable:!0,configurable:!0});
c.prototype.setLighting=function(a){this._lighting.set(a)};c.prototype.setRenderParams=function(a){void 0!==a.shadowMapResolution&&!1===this._shadowMap.enabled&&(this._shadowMap.textureResolution=a.shadowMapResolution);void 0!==a.shadowMap&&(this._shadowMap.enabled=a.shadowMap);void 0!==a.shadowMapMaxCascades&&(this._shadowMap.maxCascades=a.shadowMapMaxCascades);this._highlightHelper.enabled=!0;void 0!==a.ssao&&(this._ssaoHelper.enabled=a.ssao);void 0!==a.ssaoAttenuation&&(this._ssaoHelper.attenuation=
a.ssaoAttenuation);void 0!==a.ssaoRadius&&(this._ssaoHelper.radius=a.ssaoRadius);void 0!==a.ssaoFilterRadius&&console.error("The property ssaoFilterRadius is no longer supported as a render parameter.");void 0!==a.ssaoSamples&&(this._ssaoHelper.samples=a.ssaoSamples);a.background&&(this._offscreenRendering.background=a.background);void 0!==a.antialiasingEnabled&&(this.renderOptions.antialiasing=a.antialiasingEnabled?"smaa":"none");void 0!==a.defaultHighlightOptions&&this._highlightHelper.setDefaultOptions(a.defaultHighlightOptions);
void 0!==a.slicePlane&&(this._sliceHelper.plane=a.slicePlane);this._needsRender=!0};Object.defineProperty(c.prototype,"hasSlicePlane",{get:function(){return!!this._sliceHelper.plane},enumerable:!0,configurable:!0});c.prototype.getRenderParams=function(){var a={};this._shadowMap&&(a.shadowMap=this._shadowMap.enabled,a.shadowMapResolution=this._shadowMap.textureResolution,a.shadowMapMaxCascades=this._shadowMap.maxCascades);this._ssaoHelper&&this._ssaoHelper.isSupported&&(a.ssao=this._ssaoHelper.enabled,
a.ssaoAttenuation=this._ssaoHelper.attenuation,a.ssaoRadius=this._ssaoHelper.radius,a.ssaoFilterRadius=this._ssaoHelper.filterRadius,a.ssaoSamples=this._ssaoHelper.samples);return a};Object.defineProperty(c.prototype,"renderPlugins",{get:function(){return this._renderPlugins},enumerable:!0,configurable:!0});c.prototype.resetNeedsRender=function(){this._needsRender=!1};c.prototype.needsRender=function(){return this._needsRender||this._renderPlugins.needsRender()};c.prototype.getCombinedStats=function(){this._stats.VBOallocatedSize=
0;this._stats.VBOoptimalSize=0;this._stats.VBOusedSize=0;this._stats.VBOallocatedSize*=.00390625;this._stats.VBOusedSize*=.00390625;this._stats.VBOoptimalSize*=.00390625;return this._stats};c.prototype.getFramebufferTexture=function(a){switch(a){case "color":return this._offscreenRendering.colorTexture;case "hudVisibility":return this._offscreenRendering.hudVisibilityTexture;case "shadowMap":return this._shadowMap&&this._shadowMap.getDepthTexture();case "linearDepth":return this._offscreenRendering.linearDepthTexture;
case "normals":return this._offscreenRendering.normalTexture;case "highlight":return this._offscreenRendering.highlightTexture}return null};Object.defineProperty(c.prototype,"hasHighlights",{get:function(){return this._hasHighlights},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"hasWater",{get:function(){return this._hasWater},enumerable:!0,configurable:!0});c.prototype.isEmpty=function(){return 0===this._materialRenderers.size};c.prototype.modify=function(a,b,d,c){var e=this;
void 0===d&&(d=[]);this._isRendering&&console.warn("Renderer.modify called while rendering");for(var f=0;f<b.length;++f)this._content.delete(b[f].uniqueName);for(f=0;f<a.length;++f)this._content.set(a[f].uniqueName,a[f]);if(d)for(f=0;f<d.length;++f)h.assert(this._content.get(d[f].renderGeometry.uniqueName)===d[f].renderGeometry);if(a.length||b.length||d.length){var g=!1;C({toAdd:a,toRemove:b,toUpdate:d}).forEach(function(a,b){var d=e._materialRenderers.get(b);!d&&0<a.toAdd.length&&(d=b.createRenderer(e._rctx,
e._materialRep),e._materialRenderers.set(b,d),e._orderedMaterialRenderers.push(d),e.sortOrderedMaterialRenderers());d&&(d.modify(a),d.isEmpty&&(g=!0))});g&&this._materialRenderers.forEach(function(a,b){a.isEmpty&&(e._materialRenderers.delete(b),e._orderedMaterialRenderers.splice(e._orderedMaterialRenderers.indexOf(a),1),a.dispose())});var m=!1;this._materialRenderers.forEach(function(a){m=m||a.hasHighlights});if(m!==this._hasHighlights){if(this.onHasHighlightsChanged)this.onHasHighlightsChanged(m);
this._hasHighlights=m}this._needsRender=!0}c&&(c.forEach(function(a){e._materialRep.updateMaterialParameters(a)}),this._needsRender=!0)};c.prototype.modifyRenderOrder=function(a){"draped"===this._mode&&(this.sortOrderedMaterialRenderers(),this._needsRender=!0)};c.prototype.updateAnimations=function(a){var b=this,d=!1;this._hasWater=!1;this._orderedMaterialRenderers.forEach(function(c){c.updateAnimations&&(d=c.updateAnimations(a)||d);c.hasWater()&&(b._hasWater=!0)});return d};c.prototype.render=function(a){switch(this._mode){case "scene":this.renderScene(a);
break;case "draped":this.renderDraped(a)}if(this.onPostRender)this.onPostRender()};c.prototype.renderPass=function(a,b){this.renderGeometryPass(a,b)};c.prototype.renderScene=function(a){var b=this;this._isRendering=!0;var d=this._rctx,c=this._offscreenRendering,e=a.camera,f=a.fbo,g=this._sliceHelper.plane;a.disableSlice&&(this._sliceHelper.plane=null);this._renderPlugins.prepareRender(e);this.renderShadowMap(a);c.enabled=!0;c.initializeFrame(e,f);this.renderLinearDepth(a);this.renderNormal(a);this._ssaoHelper.enabled&&
this._ssaoHelper.computeSSAO(e,c.linearDepthTexture,c.normalTexture);this._ssaoHelper.bindAll(this._programRep);this._stats.reset();this.updateGlobalUniforms(e.projectionMatrix);this._renderContext.pass=0;this._renderContext.camera=e;this._renderContext.options=this.renderOptions;c.bindTarget(c.mainColor,c.mainDepth);this._renderPlugins.render(0,this._renderContext);this.renderGeometrySlotsPt1(this._renderContext);this._edgeView&&this._edgeView.shouldRender()&&c.renderSeparateAndComposite(function(){return b._edgeView.render(b._bindParameters)},
void 0,"alpha");var m=e=!1,e=this.renderHUDVisibility(this._renderContext);this.renderInternalSlot(18,this._renderContext);(m=this.renderTransparentTerrain(this._renderContext))&&e&&(c.compositeTransparentTerrainOntoHUDVisibility(),c.renderToTargets(function(){return b.renderHUD("occluded")},c.mainColor,c.tmpDepth,void 0,!0));m&&c.compositeTransparentTerrainOntoMain();c.renderToTargets(function(){b.renderInternalSlot(10,b._renderContext);b._renderPlugins.render(14,b._renderContext);b._renderPlugins.render(15,
b._renderContext)},c.mainColor,c.mainDepth);this.renderOccluded();this.renderAntiAliasing(f);d.bindFramebuffer(f);this.renderHUD("notOccluded");this.renderHighlights(a,f);this._sliceHelper.plane=g;this._isRendering=!1};c.prototype.renderDraped=function(a){this._stats.reset();this.renderGeometryPass(0,a)};c.prototype.renderShadowMap=function(a){var b=this._shadowMap,c=a.camera,e=a.fbo,f=a.lightDirection;if(b.enabled){d.ENABLE_PROFILE_DEPTH_RANGE&&l.begin("depthRange");var g=this.computeDepthRange(c);
d.ENABLE_PROFILE_DEPTH_RANGE&&l.end("depthRange");b.prepare(c,f,g);f=b.getCascades();for(g=0;g<f.length;++g){var m=f[g];m.camera.setGLViewport(this._rctx);a.camera=m.camera;this.renderGeometryPass(3,a)}a.camera=c;b.finish(e);c.setGLViewport(this._rctx)}b.bindAll(this._programRep)};c.prototype.renderLinearDepth=function(a){var b=this;this._ssaoHelper.enabled||this._renderPlugins.needsLinearDepth()?this._offscreenRendering.renderToTargets(function(){b.renderGeometryPass(1,a)},this._offscreenRendering.linearDepth,
this._offscreenRendering.tmpDepth,[0,0,0,0],!0):this._offscreenRendering.disposeTarget(this._offscreenRendering.linearDepth)};c.prototype.renderNormal=function(a){var b=this;this._ssaoHelper.enabled?this._offscreenRendering.renderToTargets(function(){b.renderGeometryPass(2,a)},this._offscreenRendering.normal,this._offscreenRendering.tmpDepth,[0,0,0,0],!0):this._offscreenRendering.disposeTarget(this._offscreenRendering.normal)};c.prototype.computeDepthRange=function(a){var d=b.depthRangeFromScene(a,
this._content,this._stage.getLayers());f.union(d,this.renderPlugins.queryDepthRange(a));d.near=Math.max(a.near,d.near);d.far=Math.min(a.far,d.far);return d};c.prototype.renderGeometryPass=function(a,b){this._isRendering=!0;b=b.camera;this.updateGlobalUniforms(b.projectionMatrix);this._renderContext.pass=a;this._renderContext.camera=b;"draped"===this._mode?this.renderGeometryPassDraped(this._renderContext):this.renderGeometryPassScene(this._renderContext);this._isRendering=!1};c.prototype.renderGeometryPassDraped=
function(a){var b=this,d=a.camera;this._bindParameters.view=d.viewMatrix;this._bindParameters.proj=d.projectionMatrix;this._bindParameters.viewInvTransp=d.viewInverseTransposeMatrix;G[0]=d.near;G[1]=d.far;this._bindParameters.nearFar=G;this._bindParameters.lightingData=a.lightingData;this._bindParameters.viewport=d.fullViewport;this._bindParameters.pixelRatio=d.pixelRatio;this._bindParameters.slicePlane=a.sliceHelper&&a.sliceHelper.plane;this._bindParameters.highlightDepthTexture=this.getFallbackDepthTexture();
this._orderedMaterialRenderers.forEach(function(d){d.render(null,a,b._bindParameters)})};c.prototype.renderGeometryPassScene=function(a){this.renderGeometrySlotsPt1(a);this.renderTransparentTerrain(a)};c.prototype.renderGeometrySlotsPt1=function(a){this._renderPlugins.render(1,a);this.renderInternalSlot(2,a);this.renderInternalSlot(3,a);this._renderPlugins.render(4,a);this.renderInternalSlot(5,a);this._renderPlugins.render(6,a);a.ssaoHelper&&a.ssaoHelper.bindAll(this._programRep);this._renderPlugins.render(13,
this._renderContext);this.renderInternalSlot(7,a);this._renderPlugins.render(8,a);a.ssaoHelper&&a.ssaoHelper.bindAll(this._programRep)};c.prototype.renderTransparentTerrain=function(a){return this._renderPlugins.render(9,a)};c.prototype.renderHUDVisibility=function(a){var b=this,d=A.shouldRenderVisibilityDuringRenderPass(a.pass),c=a.offscreenRenderingHelper&&a.offscreenRenderingHelper.enabled,e=!1;d&&c&&a.offscreenRenderingHelper.renderHUDVisibility(function(){e=b.renderInternalSlot(11,a)});return e};
c.prototype.renderHUD=function(a){this._bindParameters.renderTransparentlyOccludedHUD=a;this.renderInternalSlot(19,this._renderContext);this.renderInternalSlot(16,this._renderContext);this.renderInternalSlot(17,this._renderContext)};c.prototype.renderHighlights=function(a,b){var d=this,c=this._highlightHelper;if(c&&c.enabled&&(this.hasHighlights||this._renderPlugins.needsHighlight())){var e=null;c.profilingCallback&&(e=B.startMeasurement(this._renderContext.rctx));var f=this._offscreenRendering,f=
f.renderToTargets(function(){d.renderGeometryPass(4,a);d._rctx.clearSafe(256);d.renderHUD("both")},f.highlight,f.tmpDepth,[0,0,0,0],!0);c.render(a.camera,f,b);null!==e&&c.profilingCallback&&e.stop(function(a){c.profilingCallback&&c.profilingCallback(a)})}else this._offscreenRendering.disposeTarget(this._offscreenRendering.highlight)};c.prototype.renderOccluded=function(){var a=this;this._materialRenderers.forEach(function(a,b){b&&b.isVisible()&&1!==b.renderOccluded&&I.push(b)});if(0!==I.length){var b=
this._offscreenRendering,d=this._renderContext,c=function(c,e){d.renderOccludedMask=e;b.renderToTargets(function(){a.renderInternalSlot(5,d,I);a.renderInternalSlot(7,d,I);a.renderInternalSlot(10,d,I)},b.tmpColor,b.tmpDepth,[0,0,0,0],!0);d.resetRenderOccludedMask();b.compositeOccludedOntoMain(c)};d.pass=0;c(.4,4);c(.5,2);c(1,8);I.length=0}};c.prototype.renderAntiAliasing=function(a){var b=this;switch(this.renderOptions.antialiasing){case "smaa":this._smaaPass.loadResources(function(){return b._needsRender=
!0});this._smaaPass.enable()&&(this._fxaaPass.disable(),this._smaaPass.render({colorTexture:this._offscreenRendering.colorTexture},a));break;case "fxaa":this._fxaaPass.enable()&&(this._smaaPass.disable(),this._fxaaPass.render({colorTexture:this._offscreenRendering.colorTexture},a));break;default:this._offscreenRendering.composite(),this._fxaaPass.disable(),this._smaaPass.disable()}};c.prototype.renderInternalSlot=function(a,b,d){this._bindParameters.view=b.camera.viewMatrix;this._bindParameters.proj=
b.camera.projectionMatrix;this._bindParameters.viewInvTransp=b.camera.viewInverseTransposeMatrix;this._bindParameters.cameraAboveGround=b.camera.aboveGround;this._bindParameters.fovY=b.camera.fovY;G[0]=b.camera.near;G[1]=b.camera.far;var c=this._renderContext.offscreenRenderingHelper;this._bindParameters.nearFar=G;this._bindParameters.lightingData=b.lightingData;this._bindParameters.viewport=b.camera.fullViewport;this._bindParameters.shadowMap=b.shadowMap;this._bindParameters.shadowMappingEnabled=
!!b.shadowMap&&b.shadowMap.enabled;this._bindParameters.ssaoEnabled=!!b.ssaoHelper&&b.ssaoHelper.enabled;this._bindParameters.pixelRatio=b.camera.pixelRatio;this._bindParameters.slicePlane=b.sliceHelper&&b.sliceHelper.plane;this._bindParameters.hudVisibilityTexture=c?c.hudVisibilityTexture:null;this._bindParameters.highlightDepthTexture=c&&c.depthTexture||this.getFallbackDepthTexture();return this.renderInternalSlotMaterials(a,b,d)};c.prototype.renderInternalSlotMaterials=function(a,b,d){var c=this,
e=!1;n.isSome(d)?d.forEach(function(d){H(d,b)&&(e=c._materialRenderers.get(d).render(a,b,c._bindParameters)||e)}):this._materialRenderers.forEach(function(d,f){H(f,b)&&(e=d.render(a,b,c._bindParameters)||e)});return e};c.prototype.updateGlobalUniforms=function(a){for(var b=this._programRep.getProgramsUsingUniform("proj"),d=0;d<b.length;d++)b[d].setUniformMatrix4fv("proj",a);if(this._lighting){b=this._programRep.getProgramsUsingUniform("lightingMainDirection");for(d=0;d<b.length;d++)this._lighting.setUniforms(b[d]);
b=this._programRep.getProgramsUsingUniform("lightDirection");for(d=0;d<b.length;d++)this._lighting.setUniforms(b[d])}};c.prototype.sortOrderedMaterialRenderers=function(){"draped"===this._mode&&this._orderedMaterialRenderers.sort(function(a,b){return b.renderPriority()-a.renderPriority()})};c.prototype.getFallbackDepthTexture=function(){this._fallbackDepthStencilTexture||(this._fallbackDepthStencilTexture=new D(this._rctx,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1},
new Uint8Array([255,255,255,255])));return this._fallbackDepthStencilTexture};c.prototype.getGpuMemoryUsage=function(){return{offscreen:this._offscreenRendering?this._offscreenRendering.getGpuMemoryUsage():0,highlights:this._highlightHelper?this._highlightHelper.getGpuMemoryUsage():0,shadows:this._shadowMap?this._shadowMap.getGpuMemoryUsage():0,ssao:this._ssaoHelper?this._ssaoHelper.getGpuMemoryUsage():0}};c.prototype.forEachRenderGeometry=function(a){this._content.forEach(function(b,d){a(b)})};return c}();
(function(a){var b=function(){function a(){this.reset()}a.prototype.reset=function(){this.VBOusedSize=this.VBOoptimalSize=this.VBOallocatedSize=this.instancesDrawnAngle=this.drawCallsHighlight=this.drawCallsFragmented=this.drawCallsPreinterleaved=this.drawCallsMerged=this.drawCallsAngleInstanced=this.drawCallsInstanced=this.trianglesRendered=0};return a}();a.RenderStats=b})(p||(p={}));var G=k.vec2f64.create(),I=[];return p})},"esri/core/TimeProfiler":function(){define(["require","exports"],function(p,
c){p=function(){function c(c,k){void 0===k&&(k=.9);this._alpha=.9;this._name=c;this._alpha=k;this.reset()}c.prototype.reset=function(){this._smooth=this._sum=this._count=0;this._min=Infinity;this._max=0};Object.defineProperty(c.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"average",{get:function(){return 0<this._count?
this._sum/this._count:0},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"smooth",{get:function(){return this._smooth},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"min",{get:function(){return this._min},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"max",{get:function(){return this._max},enumerable:!0,configurable:!0});c.prototype.begin=function(){this._startTime=performance.now()};c.prototype.end=function(){var c=performance.now()-this._startTime;
this._count+=1;this._sum+=c;this._smooth=this._alpha*c+(1-this._alpha)*this._smooth;this._min=Math.min(this._min,c);this._max=Math.max(this._max,c)};c.prototype.toJSON=function(){return{name:this.name,count:this.count,average:this.average,smooth:this.smooth,min:this.min,max:this.max}};return c}();(function(c){function l(g){g in d||(d[g]=new c(g));return d[g]}function k(d){console.log(l(d).toJSON())}var d={},h={};c.get=l;c.begin=function(d){l(d).begin()};c.end=function(d,c){void 0===c&&(c=!0);l(d).end();
var b=performance.now();!c||d in h&&!(b>=h[d]+1E3)||(k(d),h[d]=b)};c.log=k;c.logAll=function(){for(var c in d)k(c)}})(p||(p={}));return p})},"esri/views/3d/webgl-engine/lib/depthRange":function(){define(["require","exports"],function(p,c){function n(c,d){return{near:c,far:d}}function l(c,d,h){c.near=d;c.far=h;return c}Object.defineProperty(c,"__esModule",{value:!0});c.create=n;c.empty=function(c){return c?l(c,Infinity,-Infinity):n(Infinity,-Infinity)};c.set=l;c.union=function(c,d,h){void 0===h&&(h=
c);h.near=Math.min(c.near,d.near);h.far=Math.max(c.far,d.far);return h}})},"esri/views/3d/webgl-engine/lib/depthRangeUtils":function(){define("require exports ../../../../core/PooledArray ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4 ../../../../core/libs/gl-matrix-2/vec4f64 ../../support/geometryUtils ../../support/mathUtils ./ComponentUtils ./depthRange ./Util".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q){function u(a,b){if(b.isVisible){var d=m.empty(),c=b.getObjects();b.getSpatialQueryAccelerator()?t(d,a,b.getSpatialQueryAccelerator()):r(d,a,c);return d}}function t(a,b,d){var c=b.eye,e=b.viewForward,f=b.frustum,g=function(a){return!a.areAllComponentsHidden()},h=d.objectCount;500>h?(m.set(D,b.near,Math.min(a.near,b.far)),d.forEachInDepthRange(c,e,"front-to-back",D,function(d,c){x(a,b,d);D.far=a.near;c.setRange(D)},f,g),m.set(D,Math.max(a.far,b.near),b.far),d.forEachInDepthRange(c,
e,"back-to-front",D,function(d,c){x(a,b,d);D.near=a.far;c.setRange(D)},f,g)):(h=Math.max(Math.min(h,500),Math.ceil(.1*h)),c=d.findClosest(e,"front-to-back",f,g,h),d=d.findClosest(e,"back-to-front",f,g,h),c&&d&&(v(a,b,c.getCenter(),c.getBSRadius()),v(a,b,d.getCenter(),d.getBSRadius())))}function r(a,b,d){C.clear();d.forEach(function(a){a.areAllComponentsHidden()||C.add(a)});C.empty||(C.sort(b),m.set(D,b.near,Math.min(a.near,b.far)),C.forEachInDepthRange(D,"front-to-back",function(d,c,e){c<a.near&&
x(a,b,d)}),m.set(D,Math.max(a.far,b.near),b.far),C.forEachInDepthRange(D,"back-to-front",function(b,d,c){a.far=Math.max(a.far,c)}))}function x(d,c,e){if(!e.areAllComponentsHidden()&&b.frustum.intersectsSphere(c.frustum.planes,b.sphere.wrap(e.getBSRadius(),e.getCenter()))){var f=e.objectTransformation,g=B;e.geometryRecords.forEach(function(b){l.mat4.multiply(g,f,b.getShaderTransformation());var e=a.maxScale(g);w(d,c,b.geometry.boundingInfo,g,e)})}}function w(a,c,e,f,g){var m=c.eye,h=c.viewForward;
d.vec3.transformMat4(A,e.center,f);m=h[0]*(A[0]-m[0])+h[1]*(A[1]-m[1])+h[2]*(A[2]-m[2]);h=e.bsRadius*g;if(!(m-h>a.near&&m+h<a.far)&&b.frustum.intersectsSphere(c.frustum.planes,b.sphere.wrap(h,A)))if(100<e.bsRadius&&e.getChildren())for(e=e.getChildren(),m=0;8>m;++m)e[m]&&w(a,c,e[m],f,g);else H.unionDepthRangeWithAABB(a,c.viewProjectionMatrix,f,e.bbMin,e.bbMax)}function v(a,b,d,c){var e=b.eye;b=b.viewForward;d=(d[0]-e[0])*b[0]+(d[1]-e[1])*b[1]+(d[2]-e[2])*b[2];a.near=Math.min(a.near,d-c);a.far=Math.max(a.far,
d+c)}Object.defineProperty(c,"__esModule",{value:!0});c.depthRangeFromScene=function(a,b,d){if(1E4>b.size)return E.compute(a,b);b=m.empty();for(var c in d){var e=d[c];e.isVisible&&m.union(b,u(a,e))}return b};c.depthRangeFromLayer=u;p=function(){function a(){this._items=new n({allocator:function(a){return a||{obj:null,distance:0,near:0,far:0}},deallocator:function(a){a.obj=null;a.distance=0;a.near=0;a.far=0;return a}})}Object.defineProperty(a.prototype,"length",{get:function(){return this._items.length},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"empty",{get:function(){return 0===this._items.length},enumerable:!0,configurable:!0});a.prototype.clear=function(){this._items.clear()};a.prototype.add=function(a){this._items.pushNew().obj=a};a.prototype.sort=function(a){var b=a.eye,d=a.viewForward;this._items.forEach(function(a){var c=a.obj,e=c.getCenter(),c=c.getBSRadius(),e=(e[0]-b[0])*d[0]+(e[1]-b[1])*d[1]+(e[2]-b[2])*d[2];a.distance=e;a.near=e-c;a.far=e+c});this._items.sort(function(a,
b){return a.distance-b.distance})};a.prototype.forEachInDepthRange=function(a,b,d){if("front-to-back"===b)for(b=0;b<this._items.length;++b){var c=this._items.data[b];c.far<a.near||c.near>a.far||d(c.obj,c.near,c.far)}else for(b=this._items.length-1;0<=b;--b)c=this._items.data[b],c.far<a.near||c.near>a.far||d(c.obj,c.near,c.far)};return a}();var y=function(){function c(){this.view=k.mat4f64.create();this.viewProj=k.mat4f64.create();this.frustum=b.frustum.create();this.geometries=[];this.near=[];this.far=
[];this.nearCandidates=[];this.farCandidates=[];this.range={near:0,far:0};this.looseRange={near:0,far:0}}c.prototype.compute=function(a,d){var c=this;this.reset();l.mat4.copy(this.view,a.viewMatrix);l.mat4.multiply(this.viewProj,a.projectionMatrix,this.view);b.frustum.copy(a.frustum,this.frustum);a=this.view;var f=a[2],g=a[6],m=a[10],h=a[14];a=this.range;var k=0;d.forEach(function(a){if(!e.isAllHidden(a.instanceParameters.componentVisibilities,a.componentOffsets)&&a.castShadow){var b,d;a.hasShaderTransformation?
(b=a.getBoundingSphere(a.getShaderTransformation(),1,A),d=A):(b=a.bsRadius,d=a.center);d=f*d[0]+g*d[1]+m*d[2]+h;c.geometries[k]=a;c.near[k]=-(d+b);c.far[k]=-(d-b);++k}});if(0===this.geometries.length)return a;for(d=0;d<this.geometries.length;++d)this.near[d]>a.far&&(a.far=this.near[d]),2<this.near[d]&&this.far[d]<a.near&&(a.near=this.far[d]);var q=this.looseRange;q.near=Math.max(.5*a.near,2);q.far=2*a.far;var r=0,t=0;for(d=0;d<this.geometries.length;++d)this.near[d]<a.near&&(this.near[d]>=q.near?
a.near=this.near[d]:this.nearCandidates[r++]=d),this.far[d]>a.far&&(this.far[d]<=q.far?a.far=this.far[d]:this.farCandidates[t++]=d);if(0===this.nearCandidates.length&&0===this.farCandidates.length)return a;this.nearCandidates.sort(function(a,b){return c.near[a]<c.near[b]?-1:c.near[a]>c.near[b]?1:0});this.farCandidates.sort(function(a,b){return c.far[a]<c.far[b]?1:c.far[a]>c.far[b]?-1:0});for(d=0;d<this.nearCandidates.length;++d)q=this.nearCandidates[d],this.near[q]<a.near&&(q=this.geometries[q],r=
q.boundingInfo,this.includeNearBoundingInfoRec(r,q.getShaderTransformation()));for(d=0;d<this.farCandidates.length;++d)q=this.farCandidates[d],this.far[q]>a.far&&(q=this.geometries[q],r=q.boundingInfo,this.includeFarBoundingInfoRec(r,q.getShaderTransformation()));return a};c.prototype.reset=function(){this.geometries.length=0;this.near.length=0;this.far.length=0;this.nearCandidates.length=0;this.farCandidates.length=0;this.range.near=Number.MAX_VALUE;this.range.far=-Number.MAX_VALUE};c.prototype.includeNearBoundingInfoRec=
function(b,c){var e=b.getBSRadius(),f=b.getCenter();d.vec3.transformMat4(A,f,c);var g=a.maxScale(c),f=A[0],m=A[1],h=A[2],e=e*g,g=this.frustum.planes;if(!(g[0][0]*f+g[0][1]*m+g[0][2]*h+g[0][3]>e||g[1][0]*f+g[1][1]*m+g[1][2]*h+g[1][3]>e||g[2][0]*f+g[2][1]*m+g[2][2]*h+g[2][3]>e||g[3][0]*f+g[3][1]*m+g[3][2]*h+g[3][3]>e||(f=this.view[2]*f+this.view[6]*m+this.view[10]*h+this.view[14],m=f+e,2>-(f-e)||-m>=this.range.near)))if(-m>this.looseRange.near)this.range.near=-m;else{if(100<e&&(e=b.getChildren(),void 0!==
e)){for(b=0;8>b;++b)void 0!==e[b]&&this.includeNearBoundingInfoRec(e[b],c);return}H.unionDepthRangeWithAABB(this.range,this.viewProj,c,b.getBBMin(),b.getBBMax())}};c.prototype.includeFarBoundingInfoRec=function(b,c){var e=b.getBSRadius(),f=b.getCenter();d.vec3.transformMat4(A,f,c);var g=a.maxScale(c),f=A[0],m=A[1],h=A[2],e=e*g,g=this.frustum.planes;if(!(g[0][0]*f+g[0][1]*m+g[0][2]*h+g[0][3]>e||g[1][0]*f+g[1][1]*m+g[1][2]*h+g[1][3]>e||g[2][0]*f+g[2][1]*m+g[2][2]*h+g[2][3]>e||g[3][0]*f+g[3][1]*m+g[3][2]*
h+g[3][3]>e||(f=this.view[2]*f+this.view[6]*m+this.view[10]*h+this.view[14]-e,-f<=this.range.far)))if(-f<this.looseRange.far)this.range.far=-f;else{if(100<e&&(e=b.getChildren(),void 0!==e)){for(b=0;8>b;++b)void 0!==e[b]&&this.includeFarBoundingInfoRec(e[b],c);return}H.unionDepthRangeWithAABB(this.range,this.viewProj,c,b.getBBMin(),b.getBBMax())}};return c}();c.DepthRangeFromRenderGeometries=y;c=function(){function a(){this.modelViewProj=k.mat4f64.create();this.clipPosition=[f.vec4f64.create(),f.vec4f64.create(),
f.vec4f64.create(),f.vec4f64.create(),f.vec4f64.create(),f.vec4f64.create(),f.vec4f64.create(),f.vec4f64.create()]}a.prototype.unionDepthRangeWithAABB=function(a,b,d,c,e){var f=this.modelViewProj;l.mat4.multiply(f,b,d);b=!1;for(d=0;8>d;++d){var g=this.clipPosition[d],m=0===d||3===d||4===d||7===d?c[0]:e[0],h=0===d||1===d||4===d||5===d?c[1]:e[1],k=4>d?c[2]:e[2];g[0]=f[0]*m+f[4]*h+f[8]*k+f[12];g[1]=f[1]*m+f[5]*h+f[9]*k+f[13];g[2]=f[2]*m+f[6]*h+f[10]*k+f[14];g[3]=f[3]*m+f[7]*h+f[11]*k+f[15]}for(d=0;12>
d;++d){c=this.clipTriangle(this.clipPosition[z[d][0]],this.clipPosition[z[d][1]],this.clipPosition[z[d][2]]);e=!0;for(f=0;f<c.length;++f)if(g=c[f][3],2<=g){e=!1;break}if(!e)for(b=!0,f=0;f<c.length;++f)g=c[f][3],g<a.near&&(a.near=g),g>a.far&&(a.far=g)}return b};a.prototype.inside=function(a,b){if(0===b)return a[0]>=-a[3];if(1===b)return a[1]>=-a[3];if(2===b)return a[0]<=a[3];if(3===b)return a[1]<=a[3];q.assert(!1)};a.prototype.intersect=function(a,b,d){var c=0;0===d?c=(-a[3]-a[0])/(b[0]-a[0]+b[3]-
a[3]):1===d?c=(-a[3]-a[1])/(b[1]-a[1]+b[3]-a[3]):2===d?c=(a[3]-a[0])/(b[0]-a[0]-b[3]+a[3]):3===d&&(c=(a[3]-a[1])/(b[1]-a[1]-b[3]+a[3]));return g.vec4.lerp(f.vec4f64.create(),a,b,c)};a.prototype.clipTriangle=function(a,b,d){a=[a,b,d];for(b=0;4>b;++b){d=a;a=[];for(var c=0;c<d.length;++c){var e=d[c],f=d[(c+1)%d.length];this.inside(f,b)?(this.inside(e,b)||a.push(this.intersect(e,f,b)),a.push(f)):this.inside(e,b)&&a.push(this.intersect(e,f,b))}}return a};return a}();var z=[[0,1,3],[2,3,1],[1,5,2],[6,2,
5],[5,4,6],[7,6,4],[4,0,7],[3,7,0],[3,2,7],[6,7,2],[4,5,0],[1,0,5]],A=h.vec3f64.create(),B=k.mat4f64.create(),D=m.empty(),C=new p,E=new y,H=new c})},"esri/views/3d/webgl-engine/lib/FxaaRenderPass":function(){define("require exports ../../../webgl/BufferObject ../../../webgl/Program ../../../webgl/renderState ../../../webgl/VertexArrayObject".split(" "),function(p,c,n,l,k,d){return function(){function c(d){this.isEnabled=!1;this.vertexAttributeLocations={position:0};this.vertexBufferLayout=[{name:"position",
count:2,type:5126,offset:0,stride:8,normalized:!1}];this.rctx=d}c.prototype.enable=function(){if(this.isEnabled)return!0;var c=this.rctx;this.program=new l(c,"\n      #version 100\n      precision highp float;\n\n      attribute vec2 position;\n\n      varying   vec2 fCoordinate;\n\n      void main() {\n        fCoordinate \x3d (position + 1.0 ) * 0.5;\n        gl_Position \x3d vec4(position, -1, 1);\n      }","\n      #version 100\n      #ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      #else\n      precision mediump float;\n      #endif\n\n      /**\n       * @license\n       * Copyright (c) 2011 NVIDIA Corporation. All rights reserved.\n       *\n       * TO  THE MAXIMUM  EXTENT PERMITTED  BY APPLICABLE  LAW, THIS SOFTWARE  IS PROVIDED\n       * *AS IS*  AND NVIDIA AND  ITS SUPPLIERS DISCLAIM  ALL WARRANTIES,  EITHER  EXPRESS\n       * OR IMPLIED, INCLUDING, BUT NOT LIMITED  TO, NONINFRINGEMENT,IMPLIED WARRANTIES OF\n       * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO EVENT SHALL  NVIDIA\n       * OR ITS SUPPLIERS BE  LIABLE  FOR  ANY  DIRECT, SPECIAL,  INCIDENTAL,  INDIRECT,  OR\n       * CONSEQUENTIAL DAMAGES WHATSOEVER (INCLUDING, WITHOUT LIMITATION,  DAMAGES FOR LOSS\n       * OF BUSINESS PROFITS, BUSINESS INTERRUPTION, LOSS OF BUSINESS INFORMATION, OR ANY\n       * OTHER PECUNIARY LOSS) ARISING OUT OF THE  USE OF OR INABILITY  TO USE THIS SOFTWARE,\n       * EVEN IF NVIDIA HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.\n       */\n\n      #define FXAA_EDGE_THRESHOLD      (1.0/8.0)\n      #define FXAA_EDGE_THRESHOLD_MIN  (1.0/24.0)\n      #define FXAA_SEARCH_STEPS        16\n      #define FXAA_SEARCH_THRESHOLD    (1.0/4.0)\n      #define FXAA_SUBPIX_CAP          (3.0/4.0)\n      #define FXAA_SUBPIX_TRIM         (1.0/4.0)\n      #define FXAA_SUBPIX_TRIM_SCALE (1.0/(1.0 - FXAA_SUBPIX_TRIM))\n\n      uniform vec2 uRcpFrameDimension;\n      uniform sampler2D uColorTexture;\n      varying vec2 fCoordinate;\n\n      // Return the luma, the estimation of luminance from rgb inputs.\n      // This approximates luma using one FMA instruction,\n      // skipping normalization and tossing out blue.\n      // FxaaLuma() will range 0.0 to 2.963210702.\n      float FxaaLuma(vec3 rgb) {\n        return rgb.y * (0.587 / 0.299) + rgb.x;\n      }\n      vec3 FxaaLerp3(vec3 a, vec3 b, float amountOfA) {\n        return (vec3(-amountOfA) * b) + ((a * vec3(amountOfA)) + b);\n      }\n      vec4 FxaaTexOff(sampler2D tex, vec2 pos, ivec2 off, vec2 rcpFrame) {\n        float x \x3d pos.x + float(off.x) * rcpFrame.x;\n        float y \x3d pos.y + float(off.y) * rcpFrame.y;\n        return texture2D(tex, vec2(x, y));\n      }\n\n      // pos is the output of FxaaVertexShader interpolated across screen.\n      // xy -\x3e actual texture position {0.0 to 1.0}\n      // rcpFrame should be a uniform equal to  {1.0/frameWidth, 1.0/frameHeight}\n      vec3 FxaaPixelShader(vec2 pos, sampler2D tex, vec2 rcpFrame) {\n        vec3 rgbN \x3d FxaaTexOff(tex, pos.xy, ivec2( 0,-1), rcpFrame).xyz;\n        vec3 rgbW \x3d FxaaTexOff(tex, pos.xy, ivec2(-1, 0), rcpFrame).xyz;\n        vec3 rgbM \x3d FxaaTexOff(tex, pos.xy, ivec2( 0, 0), rcpFrame).xyz;\n        vec3 rgbE \x3d FxaaTexOff(tex, pos.xy, ivec2( 1, 0), rcpFrame).xyz;\n        vec3 rgbS \x3d FxaaTexOff(tex, pos.xy, ivec2( 0, 1), rcpFrame).xyz;\n        float lumaN \x3d FxaaLuma(rgbN);\n        float lumaW \x3d FxaaLuma(rgbW);\n        float lumaM \x3d FxaaLuma(rgbM);\n        float lumaE \x3d FxaaLuma(rgbE);\n        float lumaS \x3d FxaaLuma(rgbS);\n        float rangeMin \x3d min(lumaM, min(min(lumaN, lumaW), min(lumaS, lumaE)));\n        float rangeMax \x3d max(lumaM, max(max(lumaN, lumaW), max(lumaS, lumaE)));\n        float range \x3d rangeMax - rangeMin;\n        if (range \x3c max(FXAA_EDGE_THRESHOLD_MIN, rangeMax * FXAA_EDGE_THRESHOLD)) {\n          return rgbM;\n        }\n        vec3 rgbL \x3d rgbN + rgbW + rgbM + rgbE + rgbS;\n        float lumaL \x3d (lumaN + lumaW + lumaE + lumaS) * 0.25;\n        float rangeL \x3d abs(lumaL - lumaM);\n        float blendL \x3d max(0.0, (rangeL / range) - FXAA_SUBPIX_TRIM) * FXAA_SUBPIX_TRIM_SCALE;\n        blendL \x3d min(FXAA_SUBPIX_CAP, blendL);\n        vec3 rgbNW \x3d FxaaTexOff(tex, pos.xy, ivec2(-1,-1), rcpFrame).xyz;\n        vec3 rgbNE \x3d FxaaTexOff(tex, pos.xy, ivec2( 1,-1), rcpFrame).xyz;\n        vec3 rgbSW \x3d FxaaTexOff(tex, pos.xy, ivec2(-1, 1), rcpFrame).xyz;\n        vec3 rgbSE \x3d FxaaTexOff(tex, pos.xy, ivec2( 1, 1), rcpFrame).xyz;\n        rgbL +\x3d (rgbNW + rgbNE + rgbSW + rgbSE);\n        rgbL *\x3d vec3(1.0/9.0);\n        float lumaNW \x3d FxaaLuma(rgbNW);\n        float lumaNE \x3d FxaaLuma(rgbNE);\n        float lumaSW \x3d FxaaLuma(rgbSW);\n        float lumaSE \x3d FxaaLuma(rgbSE);\n        float edgeVert \x3d\n          abs((0.25 * lumaNW) + (-0.5 * lumaN) + (0.25 * lumaNE)) +\n          abs((0.50 * lumaW ) + (-1.0 * lumaM) + (0.50 * lumaE )) +\n          abs((0.25 * lumaSW) + (-0.5 * lumaS) + (0.25 * lumaSE));\n        float edgeHorz \x3d\n          abs((0.25 * lumaNW) + (-0.5 * lumaW) + (0.25 * lumaSW)) +\n          abs((0.50 * lumaN ) + (-1.0 * lumaM) + (0.50 * lumaS )) +\n          abs((0.25 * lumaNE) + (-0.5 * lumaE) + (0.25 * lumaSE));\n        bool horzSpan \x3d edgeHorz \x3e\x3d edgeVert;\n        float lengthSign \x3d horzSpan ? -rcpFrame.y : -rcpFrame.x;\n        if(!horzSpan) {\n          lumaN \x3d lumaW;\n          lumaS \x3d lumaE;\n        }\n        float gradientN \x3d abs(lumaN - lumaM);\n        float gradientS \x3d abs(lumaS - lumaM);\n        lumaN \x3d (lumaN + lumaM) * 0.5;\n        lumaS \x3d (lumaS + lumaM) * 0.5;\n        if (gradientN \x3c gradientS)\n        {\n          lumaN \x3d lumaS;\n          lumaN \x3d lumaS;\n          gradientN \x3d gradientS;\n          lengthSign *\x3d -1.0;\n        }\n        vec2 posN;\n        posN.x \x3d pos.x + (horzSpan ? 0.0 : lengthSign * 0.5);\n        posN.y \x3d pos.y + (horzSpan ? lengthSign * 0.5 : 0.0);\n        gradientN *\x3d FXAA_SEARCH_THRESHOLD;\n        vec2 posP \x3d posN;\n        vec2 offNP \x3d horzSpan ? vec2(rcpFrame.x, 0.0) : vec2(0.0, rcpFrame.y);\n        float lumaEndN \x3d lumaN;\n        float lumaEndP \x3d lumaN;\n        bool doneN \x3d false;\n        bool doneP \x3d false;\n        posN +\x3d offNP * vec2(-1.0, -1.0);\n        posP +\x3d offNP * vec2( 1.0,  1.0);\n        for(int i \x3d 0; i \x3c FXAA_SEARCH_STEPS; i++) {\n          if(!doneN) {\n            lumaEndN \x3d FxaaLuma(texture2D(tex, posN.xy).xyz);\n          }\n          if(!doneP) {\n            lumaEndP \x3d FxaaLuma(texture2D(tex, posP.xy).xyz);\n          }\n          doneN \x3d doneN || (abs(lumaEndN - lumaN) \x3e\x3d gradientN);\n          doneP \x3d doneP || (abs(lumaEndP - lumaN) \x3e\x3d gradientN);\n          if(doneN \x26\x26 doneP) { break; }\n          if(!doneN) {\n            posN -\x3d offNP;\n          }\n          if(!doneP) {\n            posP +\x3d offNP;\n          }\n        }\n        float dstN \x3d horzSpan ? pos.x - posN.x : pos.y - posN.y;\n        float dstP \x3d horzSpan ? posP.x - pos.x : posP.y - pos.y;\n        bool directionN \x3d dstN \x3c dstP;\n        lumaEndN \x3d directionN ? lumaEndN : lumaEndP;\n        if(((lumaM - lumaN) \x3c 0.0) \x3d\x3d ((lumaEndN - lumaN) \x3c 0.0)) {\n          lengthSign \x3d 0.0;\n        }\n        float spanLength \x3d (dstP + dstN);\n        dstN \x3d directionN ? dstN : dstP;\n        float subPixelOffset \x3d (0.5 + (dstN * (-1.0/spanLength))) * lengthSign;\n        vec3 rgbF \x3d texture2D(tex, vec2(\n          pos.x + (horzSpan ? 0.0 : subPixelOffset),\n          pos.y + (horzSpan ? subPixelOffset : 0.0))).xyz;\n        return FxaaLerp3(rgbL, rgbF, blendL);\n      }\n\n      void main() {\n        vec4 color;\n        vec2 screenCoord \x3d fCoordinate;\n        // if (screenCoord.x \x3c 0.5) {\n          color.rgb \x3d FxaaPixelShader(screenCoord, uColorTexture, uRcpFrameDimension);\n        // } else if (screenCoord.x \x3c 0.501 \x26\x26 screenCoord.x \x3e 0.499) {\n        //   color.rgb \x3d vec3(1,0,0);\n        // } else {\n        //   color \x3d texture2D(uColorTexture, fCoordinate);\n        // }\n        color.a \x3d 1.0;\n        gl_FragColor \x3d color;\n      }",
this.vertexAttributeLocations);this.pipelineState=k.makePipelineState({colorWrite:k.defaultColorWriteParams});var f=new Float32Array([-1,-1,3,-1,-1,3]);this.vao=new d(c,this.vertexAttributeLocations,{geometry:this.vertexBufferLayout},{geometry:new n(c,34962,35044,f)});return this.isEnabled=!0};c.prototype.disable=function(){this.isEnabled&&(this.program.dispose(),this.program=null,this.vao.dispose(),this.vao=null,this.isEnabled=!1)};c.prototype.render=function(d,c){this.enable();var b=this.rctx;b.bindVAO(this.vao);
b.bindFramebuffer(c);var a=0,e=0;null!=c?(a=c.descriptor.width,e=c.descriptor.height):(a=b.gl.canvas.width,e=b.gl.canvas.height);b.bindProgram(this.program);b.setPipelineState(this.pipelineState);b.bindTexture(d.colorTexture,0);this.program.setUniform1i("uColorTexture",0);this.program.setUniform2f("uRcpFrameDimension",1/a,1/e);b.drawArrays(4,0,3)};return c}()})},"esri/views/3d/webgl-engine/lib/HighlightHelper":function(){define("require exports ../../../../core/libs/gl-matrix-2/vec4 ../../../../core/libs/gl-matrix-2/vec4f32 ../../../../core/libs/gl-matrix-2/vec4f64 ../../support/debugFlags ./DefaultVertexAttributeLocations ./DefaultVertexBufferLayouts ./glUtil3D ./Util ../shaders/HighlightPrograms ../../../webgl/BufferObject ../../../webgl/FramebufferObject ../../../webgl/renderState ../../../webgl/Util ../../../webgl/VertexArrayObject".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t){return function(){function c(b,d){this._grid={coverageMipmap:null,vao:null,verticalCellCount:0,horizontalCellCount:0,cellPixelSize:0,mipmapLevels:0,viewportWidth:0,viewportHeight:0};this.blur1Fbo=this.blur0Fbo=this.quadVAO=null;this._rctx=d;this.viewportToRestore=k.vec4f64.create();this.defaultOptions={color:l.vec4f32.fromValues(1,0,1,1),haloOpacity:1,fillOpacity:.2,haloOpacityOccluded:.25,fillOpacityOccluded:.05};this.blurProgram=b.getProgram(a.blurPass,
{gaussianSamples:5});this.blurGridProgram=b.getProgram(a.blurPass,{gaussianSamples:5,gridOptimization:!0});this.applyProgram=b.getProgram(a.applyPass);this.applyGridProgram=b.getProgram(a.applyPass,{gridOptimization:!0});this.applyGridDebugProgram=b.getProgram(a.applyPass,{gridOptimization:!0,gridDebug:!0});this.downsampleProgram=b.getProgram(a.downsamplePass);this.preprocessPipelineState=q.makePipelineState({colorWrite:q.defaultColorWriteParams});this.applyPipelineState=q.makePipelineState({blending:q.separateBlendingParams(770,
1,771,771),colorWrite:q.defaultColorWriteParams})}Object.defineProperty(c.prototype,"enabled",{get:function(){return null!==this.blur0Fbo},set:function(a){a?this.enable():this.disable()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"profilingCallback",{get:function(){return d.HIGHLIGHTS_PROFILE_TO_CONSOLE?function(a){return console.log(a)}:null},enumerable:!0,configurable:!0});c.prototype.setDefaultOptions=function(a){this.defaultOptions=a};c.prototype.render=function(a,c,e){var f=
a.pixelRatio,g=!d.HIGHLIGHTS_GRID_OPTIMIZATION_DISABLED,m=d.HIGHLIGHTS_VISUALIZE_BLOCKS,h=this._rctx;b.assert(this.enabled);n.vec4.copy(this.viewportToRestore,a.fullViewport);var k=Math.ceil(a.fullWidth/f);a=Math.ceil(a.fullHeight/f);this.blur0Fbo.resize(k,a);this.blur1Fbo.resize(k,a);h.bindVAO(this.quadVAO);h.setPipelineState(this.preprocessPipelineState);var l=null,q=f=l=null;if(g){var r=this._grid;this._gridUpdateResources(c,32);this._gridComputeMipmap();f=r.vao;q=4;l=this.blurGridProgram;h.bindProgram(l);
h.bindTexture(r.coverageMipmap[r.mipmapLevels].colorTexture,1);l.setUniform1i("coverageTex",1)}else f=this.quadVAO,q=5,l=this.blurProgram,h.bindProgram(l);h.bindVAO(f);h.bindFramebuffer(this.blur0Fbo);h.setViewport(0,0,k,a);h.setClearColor(0,0,0,0);h.clear(16384);l.setUniform1i("tex",0);h.bindTexture(c.colorTexture,0);l.setUniform2f("blurSize",1/k,0);h.drawArrays(q,0,u.vertexCount(f,"geometry"));h.bindFramebuffer(this.blur1Fbo);h.clear(16384);h.bindTexture(this.blur0Fbo.colorTexture,0);l.setUniform2f("blurSize",
0,1/a);h.drawArrays(q,0,u.vertexCount(f,"geometry"));h.bindFramebuffer(e);h.setPipelineState(this.applyPipelineState);h.setViewport(this.viewportToRestore[0],this.viewportToRestore[1],this.viewportToRestore[2],this.viewportToRestore[3]);g?(l=m?this.applyGridDebugProgram:this.applyGridProgram,h.bindProgram(l),l.setUniform1i("coverageTex",2),h.bindTexture(this._grid.coverageMipmap[this._grid.mipmapLevels].colorTexture,2)):(l=this.applyProgram,h.bindProgram(l));l.setUniform1i("tex",0);h.bindTexture(this.blur1Fbo.colorTexture,
0);l.setUniform1i("origin",1);h.bindTexture(c.colorTexture,1);l.setUniform4fv("color",this.defaultOptions.color);l.setUniform1f("outlineSize",8.6);l.setUniform1f("blurSize",.4);l.setUniform4f("opacities",this.defaultOptions.haloOpacity,this.defaultOptions.haloOpacityOccluded,this.defaultOptions.fillOpacity,this.defaultOptions.fillOpacityOccluded);h.drawArrays(q,0,u.vertexCount(f,"geometry"));h.bindVAO(null)};c.prototype.enable=function(){if(!this.enabled){this.quadVAO=f.createQuadVAO(this._rctx);
var a={colorTarget:0,depthStencilTarget:0,width:0,height:0},b={target:3553,pixelFormat:6408,dataType:5121,samplingMode:9729,wrapMode:33071,width:0,height:0};this.blur0Fbo=m.createWithAttachments(this._rctx,b,a);this.blur1Fbo=m.createWithAttachments(this._rctx,b,a)}};c.prototype.disable=function(){this.enabled&&(this.quadVAO.dispose(!0),this.blur1Fbo.dispose(),this.blur0Fbo.dispose(),this.blur1Fbo=this.blur0Fbo=this.quadVAO=null)};c.prototype._gridUpdateResources=function(a,b){var d=this._rctx,c=this._grid,
f=!1;null===c.coverageMipmap&&(c.coverageMipmap=[a],f=!0);if(c.viewportWidth!==a.width||c.viewportHeight!==a.height)f=!0,c.viewportWidth=a.width,c.viewportHeight=a.height;c.coverageMipmap[0]=a;c.cellPixelSize!==b&&(c.cellPixelSize=b,f=!0);if(f){for(b=1;b<c.coverageMipmap.length;b++)c.coverageMipmap[b].dispose();c.mipmapLevels=Math.ceil(Math.log(c.cellPixelSize)*Math.LOG2E);c.coverageMipmap.length=c.mipmapLevels+1;for(b=0;b<c.mipmapLevels;b++)f=c.coverageMipmap[b],f=m.createWithAttachments(d,{target:3553,
pixelFormat:6407,dataType:33635,samplingMode:9729,wrapMode:33071,width:Math.ceil(f.width/2),height:Math.ceil(f.height/2)},{colorTarget:0,depthStencilTarget:0,width:Math.ceil(f.width/2),height:Math.ceil(f.height/2)}),c.coverageMipmap[b+1]=f}var f=Math.ceil(a.height/c.cellPixelSize),k=Math.ceil(a.width/c.cellPixelSize);if(!c.vao||c.verticalCellCount!==f||c.horizontalCellCount!==k){c.verticalCellCount=f;c.horizontalCellCount=k;a=f+1;b=k+1;for(var f=1/f,k=1/k,l=new Float32Array(24*a*b),q=0,r=0;r<a;r++)for(var n=
0;n<b;n++)l[q+0]=(n-.5)*k*2-1,l[q+1]=(r-.5)*f*2-1,l[q+2]=n*k,l[q+3]=r*f,l[q+4]=(n+.5)*k*2-1,l[q+5]=(r-.5)*f*2-1,l[q+6]=n*k,l[q+7]=r*f,l[q+8]=(n-.5)*k*2-1,l[q+9]=(r+.5)*f*2-1,l[q+10]=n*k,l[q+11]=r*f,l[q+12]=(n-.5)*k*2-1,l[q+13]=(r+.5)*f*2-1,l[q+14]=n*k,l[q+15]=r*f,l[q+16]=(n+.5)*k*2-1,l[q+17]=(r-.5)*f*2-1,l[q+18]=n*k,l[q+19]=r*f,l[q+20]=(n+.5)*k*2-1,l[q+21]=(r+.5)*f*2-1,l[q+22]=n*k,l[q+23]=r*f,q+=24;c.vao&&c.vao.dispose(!0);c.vao=new t(d,h.Default3D,{geometry:g.Pos2Tex},{geometry:e.createVertex(d,
35044,l)})}};c.prototype._gridComputeMipmap=function(){var a=this._rctx,b=this._grid,d=this.downsampleProgram;a.bindVAO(this.quadVAO);for(var c=0;c<b.mipmapLevels;c++){a.bindFramebuffer(b.coverageMipmap[c+1]);a.bindTexture(b.coverageMipmap[c].colorTexture,0);var e=b.coverageMipmap[c+1].width,f=b.coverageMipmap[c+1].height;a.bindProgram(d);d.setUniform1i("tex",0);d.setUniform2f("invFramebufferDim",1/e,1/f);a.setViewport(0,0,e,f);a.drawArrays(5,0,u.vertexCount(this.quadVAO,"geometry"))}};c.prototype.getGpuMemoryUsage=
function(){var a=u.getGpuMemoryUsage(this.blur0Fbo)+u.getGpuMemoryUsage(this.blur1Fbo);if(this._grid&&this._grid.coverageMipmap)for(var b=0,d=this._grid.coverageMipmap;b<d.length;b++)a+=u.getGpuMemoryUsage(d[b]);return a};return c}()})},"esri/core/libs/gl-matrix-2/vec4f32":function(){define(["require","exports","./factories/vec4f32"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.vec4f32=n})},"esri/core/libs/gl-matrix-2/factories/vec4f32":function(){define(["require","exports"],
function(p,c){function n(){return new Float32Array(4)}function l(b,a,d,c){var e=new Float32Array(4);e[0]=b;e[1]=a;e[2]=d;e[3]=c;return e}function k(){return l(1,1,1,1)}function d(){return l(1,0,0,0)}function h(){return l(0,1,0,0)}function g(){return l(0,0,1,0)}function f(){return l(0,0,0,1)}Object.defineProperty(c,"__esModule",{value:!0});c.create=n;c.clone=function(b){var a=new Float32Array(4);a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a};c.fromValues=l;c.createView=function(b,a){return new Float32Array(b,
a,4)};c.zeros=function(){return n()};c.ones=k;c.unitX=d;c.unitY=h;c.unitZ=g;c.unitW=f;c.ZEROS=n();c.ONES=k();c.UNIT_X=d();c.UNIT_Y=h();c.UNIT_Z=g();c.UNIT_W=f()})},"esri/views/3d/webgl-engine/shaders/HighlightPrograms":function(){define(["require","exports","../lib/DefaultVertexAttributeLocations","./sources/resolver","../../../webgl/programUtils"],function(p,c,n,l,k){Object.defineProperty(c,"__esModule",{value:!0});var d=function(d){return k.glslifyDefineMap({GRID_OPTIMIZATION:d.gridOptimization,
GAUSSIAN_SAMPLES:d.gaussianSamples})},h=function(d){return k.glslifyDefineMap({GRID_OPTIMIZATION:d.gridOptimization,GRID_DEBUG:d.gridDebug})};c.downsamplePass={name:"highlight-downsample",shaders:{vertexShader:l.resolveIncludes("renderer/highlight/downsample.vert"),fragmentShader:l.resolveIncludes("renderer/highlight/downsample.frag")},attributes:n.Default3D};c.blurPass={name:"highlight-blur",shaders:function(c){return{vertexShader:d(c)+l.resolveIncludes("renderer/highlight/blur.vert"),fragmentShader:d(c)+
l.resolveIncludes("renderer/highlight/blur.frag")}},attributes:n.Default3D};c.applyPass={name:"highlight-apply",shaders:function(d){return{vertexShader:h(d)+l.resolveIncludes("renderer/highlight/apply.vert"),fragmentShader:h(d)+l.resolveIncludes("renderer/highlight/apply.frag")}},attributes:n.Default3D}})},"esri/views/webgl/FramebufferObject":function(){define(["require","exports","../../core/has","./Renderbuffer","./Texture"],function(p,c,n,l,k){return function(){function d(c,g,f,b){this._colorAttachment=
this._stencilAttachment=this._depthAttachment=this._glName=this._context=null;this._initialized=!1;this._context=c;this._desc={colorTarget:g.colorTarget,depthStencilTarget:g.depthStencilTarget,width:g.width,height:g.height,multisampled:g.multisampled};this._id=d._nextId++;n("esri-webgl-debug")&&c.instanceCounter.incrementCount(4);f&&(c=void 0,f instanceof k?(this._colorAttachment=f,c=f.descriptor):(c=f,this._colorAttachment=new k(this._context,c)),0!==this._desc.colorTarget&&console.error("Framebuffer is initialized with a texture however the descriptor indicates using a renderbuffer color attachment!"),
d._validateTextureDimensions(c,this._desc));b instanceof l?(2===g.depthStencilTarget?this._stencilAttachment=b:1===g.depthStencilTarget||3===g.depthStencilTarget?this._depthAttachment=b:console.error('If a Renderbuffer is provided, "depthStencilTarget" must be one of STENCIL_RENDER_BUFFER, DEPTH_RENDER_BUFFER or DEPTH_STENCIL_RENDER_BUFFER'),d._validateBufferDimensions(b.descriptor,this._desc)):b&&(this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),
g=void 0,b instanceof k?(this._depthStencilTexture=b,g=this._depthStencilTexture.descriptor):(g=b,this._depthStencilTexture=new k(this._context,g)),d._validateTextureDimensions(g,this._desc))}d.create=function(c,g){return new d(c,g)};d.createWithAttachments=function(c,g,f,b){return new d(c,f,g,b)};Object.defineProperty(d.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});
Object.defineProperty(d.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"colorTexture",{get:function(){return this._colorAttachment instanceof k?this._colorAttachment:null},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"colorAttachment",{get:function(){return this._colorAttachment},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"depthStencilAttachment",{get:function(){return this._depthStencilTexture||
this._depthAttachment||this._stencilAttachment},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"depthStencilTexture",{get:function(){return this._depthStencilTexture},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"width",{get:function(){return this._desc.width},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"height",{get:function(){return this._desc.height},enumerable:!0,configurable:!0});d.prototype.dispose=function(){if(this._context){var d=
this._context,c=d.getBoundFramebufferObject();this._disposeColorAttachment();this._disposeDepthStencilAttachments();this._glName&&(d.gl.deleteFramebuffer(this._glName),this._glName=null);n("esri-webgl-debug")&&d.instanceCounter.decrementCount(4);d.bindFramebuffer(c);this._context=null}};d.prototype.attachColorTexture=function(c){if(c){d._validateTextureDimensions(c.descriptor,this._desc);this._disposeColorAttachment();if(this._initialized){this._context.bindFramebuffer(this);var g=this._context.gl;
g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,c.glName,0)}this._colorAttachment=c}};d.prototype.detachColorTexture=function(){var d=void 0;if(this._colorAttachment instanceof k){d=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var c=this._context.gl;this._context.gl.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0)}this._colorAttachment=null}return d};d.prototype.attachDepthStencilTexture=function(c){if(c){var g=c.descriptor;
34041!==g.pixelFormat&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!");34042!==g.dataType&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8_WEBGL!");this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!");d._validateTextureDimensions(g,this._desc);4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4);this._disposeDepthStencilAttachments();
this._initialized&&(this._context.bindFramebuffer(this),g=this._context.gl,g.framebufferTexture2D(g.FRAMEBUFFER,g.DEPTH_STENCIL_ATTACHMENT,g.TEXTURE_2D,c.glName,0));this._depthStencilTexture=c}};d.prototype.detachDepthStencilTexture=function(){var d=this._depthStencilTexture;if(d&&this._initialized){this._context.bindFramebuffer(this);var c=this._context.gl;this._context.gl.framebufferTexture2D(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.TEXTURE_2D,null,0)}this._depthStencilTexture=null;return d};
d.prototype.attachDepthStencilBuffer=function(c){if(c){var g=c.descriptor;34041!==g.internalFormat&&33189!==g.internalFormat&&console.error("Depth/Stencil buffer must have correct internalFormat");d._validateBufferDimensions(g,this._desc);this._disposeDepthStencilAttachments();this._desc.depthStencilTarget=34041===g.internalFormat?3:1;this._initialized&&(this._context.bindFramebuffer(this),g=this._context.gl,g.framebufferRenderbuffer(g.FRAMEBUFFER,1===this._desc.depthStencilTarget?g.DEPTH_ATTACHMENT:
g.DEPTH_STENCIL_ATTACHMENT,g.RENDERBUFFER,c.glName));this._depthAttachment=c}};d.prototype.detachDepthStencilBuffer=function(){var d=this._context.gl,c=this._depthAttachment;c&&this._initialized&&(this._context.bindFramebuffer(this),d.framebufferRenderbuffer(d.FRAMEBUFFER,1===this._desc.depthStencilTarget?d.DEPTH_ATTACHMENT:d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,null));this._depthAttachment=null;return c};d.prototype.copyToTexture=function(d,c,f,b,a,e,m){(0>d||0>c||0>a||0>e)&&console.error("Offsets cannot be negative!");
(0>=f||0>=b)&&console.error("Copy width and height must be greater than zero!");var g=this._desc,h=m.descriptor;3553!==m.descriptor.target&&console.error("Texture target must be TEXTURE_2D!");(d+f>g.width||c+b>g.height||a+f>h.width||e+b>h.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");g=this._context;g.bindTexture(m);g.bindFramebuffer(this);g.gl.copyTexSubImage2D(3553,0,a,e,d,c,f,b)};d.prototype.readPixels=function(d,c,f,b,a,e,m){(0>=
f||0>=b)&&console.error("Copy width and height must be greater than zero!");m||console.error("Target memory is not initialized!");this._context.bindFramebuffer(this);this._context.gl.readPixels(d,c,f,b,a,e,m)};d.prototype.resize=function(c,g){var f=this._desc;if(f.width!==c||f.height!==g)if(this._initialized)f.width=c,f.height=g,this._colorAttachment instanceof k?(b=this._colorAttachment,f=b.descriptor,f.width=c,f.height=g,this._colorAttachment.dispose(),this._colorAttachment=new k(this._context,
f),d._validateTextureDimensions(b.descriptor,this._desc)):this._colorAttachment&&this._disposeColorAttachment(),null!=this._depthStencilTexture?(f=this._depthStencilTexture.descriptor,f.width=c,f.height=g,this._depthStencilTexture.dispose(),this._depthStencilTexture=new k(this._context,f)):(this._depthAttachment||this._stencilAttachment)&&this._disposeDepthStencilAttachments(),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1;else{f.width=c;
f.height=g;if(this._colorAttachment instanceof k){var b=this._colorAttachment;b.resize(c,g)}this._depthStencilTexture&&this._depthStencilTexture.resize(c,g)}};d.prototype.initialize=function(){if(this._initialized)return!1;var d=this._context.gl;this._glName&&d.deleteFramebuffer(this._glName);var c=d.createFramebuffer(),f=this._desc;d.bindFramebuffer(d.FRAMEBUFFER,c);if(!this._colorAttachment)if(0===f.colorTarget)this._colorAttachment=new k(this._context,{target:3553,pixelFormat:6408,dataType:5121,
samplingMode:9728,wrapMode:33071,width:f.width,height:f.height});else{var b=new l(this._context,{internalFormat:32854,width:f.width,height:f.height});d.framebufferRenderbuffer(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.RENDERBUFFER,b.glName);this._colorAttachment=b}this._colorAttachment instanceof k&&d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,this._colorAttachment.glName,0);switch(f.depthStencilTarget){case 1:case 3:this._depthAttachment||(this._depthAttachment=new l(this._context,
{internalFormat:1===f.depthStencilTarget?33189:34041,width:f.width,height:f.height}));d.framebufferRenderbuffer(d.FRAMEBUFFER,1===f.depthStencilTarget?d.DEPTH_ATTACHMENT:d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,this._depthAttachment.glName);break;case 2:this._stencilAttachment||(this._stencilAttachment=new l(this._context,{internalFormat:36168,width:f.width,height:f.height}));d.framebufferRenderbuffer(d.FRAMEBUFFER,d.STENCIL_ATTACHMENT,d.RENDERBUFFER,this._stencilAttachment.glName);break;case 4:this._depthStencilTexture||
(this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),this._depthStencilTexture=new k(this._context,{target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:f.width,height:f.height})),d.framebufferTexture2D(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.TEXTURE_2D,this._depthStencilTexture.glName,0)}d.checkFramebufferStatus(d.FRAMEBUFFER)!==d.FRAMEBUFFER_COMPLETE&&
console.error("Framebuffer is incomplete!");this._glName=c;return this._initialized=!0};d.prototype._disposeColorAttachment=function(){if(this._colorAttachment instanceof k){var d=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var c=this._context.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0)}d.dispose()}else this._colorAttachment instanceof WebGLRenderbuffer&&(d=this._colorAttachment,c=this._context.gl,this._initialized&&(this._context.bindFramebuffer(this),
c.framebufferRenderbuffer(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(d));this._colorAttachment=null};d.prototype._disposeDepthStencilAttachments=function(){var d=this._context.gl;this._depthAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),d.framebufferRenderbuffer(d.FRAMEBUFFER,1===this._desc.depthStencilTarget?d.DEPTH_ATTACHMENT:d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,null)),this._depthAttachment.dispose(),this._depthAttachment=
null);this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),d.framebufferRenderbuffer(d.FRAMEBUFFER,d.STENCIL_ATTACHMENT,d.RENDERBUFFER,null)),this._stencilAttachment.dispose(),this._stencilAttachment=null);this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),d.framebufferTexture2D(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),this._depthStencilTexture=null)};d._validateBufferDimensions=
function(d,c){console.assert(0<=d.width&&0<=d.height);void 0!==c.width&&0<=c.width&&void 0!==c.height&&0<=c.height?c.width===d.width&&c.height===d.height||console.error("Renderbuffer dimensions must match the framebuffer's!"):(c.width=d.width,c.height=d.height)};d._validateTextureDimensions=function(d,c){console.assert(0<=d.width&&0<=d.height);3553!==d.target&&console.error("Texture type must be TEXTURE_2D!");void 0!==c.width&&0<=c.width&&void 0!==c.height&&0<=c.height?c.width===d.width&&c.height===
d.height||console.error("Color attachment texture must match the framebuffer's!"):(c.width=d.width,c.height=d.height)};d._nextId=0;return d}()})},"esri/views/webgl/Renderbuffer":function(){define(["require","exports","../../core/has"],function(p,c,n){return function(){function c(k,d){this._context=k;this._desc=d;this._glName=null;this._id=-1;k=this._context.gl;n("esri-webgl-debug")&&this._context.instanceCounter.incrementCount(5);this._id=++c._nextId;this._glName=k.createRenderbuffer();this._context.bindRenderbuffer(this);
k.renderbufferStorage(k.RENDERBUFFER,d.internalFormat,d.width,d.height)}Object.defineProperty(c.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});c.prototype.resize=function(c,d){var h=this._context.gl,g=this._desc;if(g.width!==c||g.height!==d)g.width=
c,g.height=d,this._context.bindRenderbuffer(this),h.renderbufferStorage(h.RENDERBUFFER,g.internalFormat,g.width,g.height)};c.prototype.dispose=function(){this._glName&&(this._context.gl.deleteRenderbuffer(this._glName),this._glName=null);n("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(5);this._context=null};c._nextId=0;return c}()})},"esri/views/3d/webgl-engine/lib/OffscreenRenderingHelper":function(){define("require exports ./glUtil3D ./RenderTargetHelper ./Util ../shaders/OffscreenPrograms ../../../webgl/renderState ../../../webgl/Util".split(" "),
function(p,c,n,l,k,d,h,g){var f=[0,0,0,0],b=[0,1,0,1];return function(){function a(a,b){this.dimensions={width:4,height:4};this._enabled=!1;this._background={type:"color",color:[0,0,0,1]};this._compositePipelineState=new Map;this._rctx=b;b=this.renderTargetHelper=new l.RenderTargetHelper(b);this.mainColor=b.registerColorTarget({name:"mainColor"});this.mainDepth=b.registerDepthTarget({name:"mainDepth"});this.linearDepth=b.registerColorTarget({name:"linearDepth"});this.normal=b.registerColorTarget({name:"normal"});
this.highlight=b.registerColorTarget({name:"highlight",dataType:32819});this.hudVisibility=b.registerColorTarget({name:"hudVisibility",dataType:32819});this.tmpColor=b.registerColorTarget({name:"tmpColor"});this.tmpDepth=b.registerDepthTarget({name:"tmpDepth"});this._compositeProgram=a.getProgram(d.composite);this._compositePipelineState.set("none",h.makePipelineState({colorWrite:h.defaultColorWriteParams}));this._compositePipelineState.set("alpha",h.makePipelineState({blending:h.separateBlendingParams(770,
1,771,771),colorWrite:h.defaultColorWriteParams}));this._compositePipelineState.set("premultiplied-alpha",h.makePipelineState({blending:h.simpleBlendingParams(1,771),colorWrite:h.defaultColorWriteParams}));this._compositeTransparentToHUDVisibilityProgram=a.getProgram(d.compositeTransparentToHUDVisibility);this._compositeTransparentToHUDVisibilityPipelineState=h.makePipelineState({colorWrite:{r:!1,g:!0,b:!1,a:!1}});this._compositeOccludedProgram=a.getProgram(d.compositeOccluded);this._compositeOccludedPipelineState=
h.makePipelineState({blending:h.simpleBlendingParams(1,771),colorWrite:h.defaultColorWriteParams})}Object.defineProperty(a.prototype,"width",{get:function(){return this.dimensions.width},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"height",{get:function(){return this.dimensions.height},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"enabled",{get:function(){return this._enabled},set:function(a){a?this.enable():this.disable()},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"background",{get:function(){return this._background},set:function(a){this._background=a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"framebuffer",{get:function(){return this.renderTargetHelper.getFramebuffer(this.dimensions,this.mainColor,this.mainDepth)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"colorTexture",{get:function(){return this.framebuffer.colorTexture},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"depthTexture",{get:function(){return this.framebuffer.depthStencilTexture},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"linearDepthTexture",{get:function(){return this.renderTargetHelper.getAllocatedColorTexture(this.linearDepth)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"normalTexture",{get:function(){return this.renderTargetHelper.getAllocatedColorTexture(this.normal)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"highlightTexture",
{get:function(){return this.renderTargetHelper.getAllocatedColorTexture(this.highlight)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"hudVisibilityTexture",{get:function(){return this.getColorTexture(this.hudVisibility)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"tmpColorTexture",{get:function(){return this.getColorTexture(this.tmpColor)},enumerable:!0,configurable:!0});a.prototype.initializeFrame=function(a,b){k.assert(this.enabled);var d=this._rctx;
this.dimensions.width=a.fullWidth;this.dimensions.height=a.fullHeight;this.outputFramebuffer=b;this.bindTarget(this.mainColor,this.mainDepth);d.setClearStencil(0);a=this._background.color;d.setClearColor(a[0]*a[3],a[1]*a[3],a[2]*a[3],a[3]);d.clearSafe(17664)};a.prototype.renderSeparateAndComposite=function(a,b,d){void 0===b&&(b=f);void 0===d&&(d="none");this.renderToTargets(a,this.tmpColor,this.mainDepth,b);this.composite(this.getColorTexture(this.tmpColor),this.framebuffer,d)};a.prototype.renderHUDVisibility=
function(a){this.renderToTargets(a,this.hudVisibility,this.mainDepth,b)};a.prototype.compositeTransparentTerrainOntoHUDVisibility=function(){var a=this,b=this._rctx;this.renderToTargets(function(){var d=a._compositeTransparentToHUDVisibilityProgram;b.bindProgram(d);b.setPipelineState(a._compositeTransparentToHUDVisibilityPipelineState);d.setUniform1i("tex",1);b.bindTexture(a.getColorTexture(a.tmpColor),1);b.bindVAO(a.quadVAO);b.drawArrays(5,0,g.vertexCount(a.quadVAO,"geometry"))},this.hudVisibility,
this.mainDepth)};a.prototype.compositeTransparentTerrainOntoMain=function(){this.composite(this.getColorTexture(this.tmpColor),this.framebuffer,"premultiplied-alpha")};a.prototype.compositeOccludedOntoMain=function(a){var b=this._rctx,d=this._compositeOccludedProgram;this.bindFramebuffer();b.bindProgram(d);b.setPipelineState(this._compositeOccludedPipelineState);b.bindVAO(this.quadVAO);b.bindTexture(this.getColorTexture(this.tmpColor),0);d.setUniform1i("occludedColorMap",0);d.setUniform1f("opacity",
a);b.drawArrays(5,0,g.vertexCount(this.quadVAO,"geometry"));b.bindVAO(null)};a.prototype.bindFramebuffer=function(){this._rctx.bindFramebuffer(this.framebuffer)};a.prototype.renderDepthDetached=function(a){var b=this.bindTarget(this.mainColor);a(b);this.bindTarget(this.mainColor,this.mainDepth)};a.prototype.composite=function(a,b,d){void 0===a&&(a=this.framebuffer.colorTexture);void 0===b&&(b=this.outputFramebuffer);void 0===d&&(d="none");var c=this._rctx,e=this._compositeProgram;c.bindFramebuffer(b);
c.bindProgram(e);c.setPipelineState(this._compositePipelineState.get(d));e.setUniform1i("tex",1);c.bindTexture(a,1);c.bindVAO(this.quadVAO);c.drawArrays(5,0,g.vertexCount(this.quadVAO,"geometry"))};a.prototype.disposeTarget=function(a){this.renderTargetHelper.disposeTargetResource(a)};a.prototype.enable=function(){this.enabled||(this._enabled=!0,this.quadVAO=n.createQuadVAO(this._rctx))};a.prototype.disable=function(){this.enabled&&(this._enabled=!1,this.renderTargetHelper.disposeAllResource(),this.quadVAO.dispose(!0),
this.quadVAO=null)};a.prototype.renderToTargets=function(a,b,d,c,f){var e=this._rctx;b=this.bindTarget(b,d);d=0;c&&(e.setClearColor(c[0],c[1],c[2],Math.max(1E-13,c[3])),d|=16384);f&&(d|=256);e.clearSafe(d);a(b);e.gl.flush();this.bindTarget(this.mainColor,this.mainDepth);return b};a.prototype.bindTarget=function(a,b){a=this.renderTargetHelper.getFramebuffer(this.dimensions,a,b);this._rctx.bindFramebuffer(a);return a};a.prototype.getColorTexture=function(a){return this.renderTargetHelper.getColorTexture(a,
this.dimensions)};a.prototype.getGpuMemoryUsage=function(){var a=0;this.renderTargetHelper&&(a+=this.renderTargetHelper.getGpuMemoryUsage());return a};return a}()})},"esri/views/3d/webgl-engine/lib/RenderTargetHelper":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../webgl/FramebufferObject ../../../webgl/Renderbuffer ../../../webgl/Texture ../../../webgl/Util".split(" "),function(p,c,n,l,k,d,h){Object.defineProperty(c,"__esModule",{value:!0});var g={dataType:5121},
f={};p=function(){function b(a){this.rctx=a;this.activeTargets=new Set;this.depthTextures=new Map;this.depthBuffers=new Map;this.colorTextures=new Map;this.framebuffers=new Map;this.nextId=1;this.depthTextureSupported=a.capabilities.depthTexture}b.prototype.disposeAllResource=function(){this.depthBuffers.forEach(function(a){return a.dispose()});this.depthBuffers.clear();this.depthTextures.forEach(function(a){return a.dispose()});this.depthTextures.clear();this.colorTextures.forEach(function(a){return a.dispose()});
this.colorTextures.clear()};b.prototype.disposeTargetResource=function(a){a=a.id;this.activeTargets.has(a)&&(this.activeTargets.delete(a),this.depthTextures.has(a)&&(this.depthTextures.get(a).dispose(),this.depthTextures.delete(a)),this.depthBuffers.has(a)&&(this.depthBuffers.get(a).dispose(),this.depthBuffers.delete(a)),this.colorTextures.has(a)&&(this.colorTextures.get(a).dispose(),this.colorTextures.delete(a)))};b.prototype.getDepthTexture=function(a,b){if(this.depthTextureSupported){var c=this.depthTextures.get(a.id);
!c||c.descriptor.width===b.width&&c.descriptor.height===b.height||(c.dispose(),c=void 0);c||(c=new d(this.rctx,{target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:b.width,height:b.height}),this.depthTextures.set(a.id,c),this.activeTargets.add(a.id));return c}};b.prototype.getDepthBuffer=function(a,b){if(!this.depthTextureSupported){var d=this.depthBuffers.get(a.id);d?d.descriptor.width===b.width&&d.descriptor.height===b.height||d.resize(b.width,b.height):(d=new k(this.rctx,
n({internalFormat:34041},b)),this.depthBuffers.set(a.id,d),this.activeTargets.add(a.id));return d}};b.prototype.getColorTexture=function(a,b){var c=this.colorTextures.get(a.id);!c||c.descriptor.width===b.width&&c.descriptor.height===b.height||(c.dispose(),c=void 0);c||(c=new d(this.rctx,{target:3553,pixelFormat:6408,dataType:a.dataType,samplingMode:9729,wrapMode:33071,width:b.width,height:b.height}),this.colorTextures.set(a.id,c),this.activeTargets.add(a.id));return c};b.prototype.getAllocatedColorTexture=
function(a){return this.colorTextures.get(a.id)};b.prototype.registerDepthTarget=function(a){void 0===a&&(a={});var b=this.nextId++;return n({id:b},f,a)};b.prototype.registerColorTarget=function(a){void 0===a&&(a={});var b=this.nextId++;return n({id:b},g,a)};b.prototype.getFramebuffer=function(a,b,d){var c=this.getKey(b,d),e=this.framebuffers.get(c);b=this.getColorTexture(b,a);if(this.depthTextureSupported){var f=d?this.getDepthTexture(d,a):void 0;if(!e)return e=d?l.createWithAttachments(this.rctx,
b,{colorTarget:0,depthStencilTarget:4},f):l.createWithAttachments(this.rctx,b,{colorTarget:0,depthStencilTarget:0}),this.framebuffers.set(c,e),e;if(d=e.width!==a.width||e.height!==a.height||e.colorTexture!==b||e.depthStencilTexture!==f)e.detachColorTexture(),e.detachDepthStencilTexture(),e.resize(a.width,a.height),e.attachColorTexture(b),e.attachDepthStencilTexture(f);return e}f=d?this.getDepthBuffer(d,a):void 0;if(!e)return e=l.createWithAttachments(this.rctx,b,{colorTarget:0,depthStencilTarget:d?
3:0},f),this.framebuffers.set(c,e),e;if(d=e.width!==a.width||e.height!==a.height||e.colorTexture!==b)e.detachColorTexture(),e.detachDepthStencilBuffer(),e.resize(a.width,a.height),e.attachColorTexture(b),e.attachDepthStencilBuffer(f);return e};b.prototype.getKey=function(a,b){return a.id+"_"+(b?b.id:"X")+"_"+a.name+(b?"_"+b.name:"")};b.prototype.getGpuMemoryUsage=function(){var a=0,b=new Set,d=function(d){b.has(d)||(b.add(d),a+=h.getGpuMemoryUsage(d))};this.depthTextures.forEach(d);this.colorTextures.forEach(d);
this.depthBuffers.forEach(d);this.framebuffers.forEach(d);return a};return b}();c.RenderTargetHelper=p})},"esri/views/3d/webgl-engine/shaders/OffscreenPrograms":function(){define(["require","exports","../lib/DefaultVertexAttributeLocations","./sources/resolver"],function(p,c,n,l){Object.defineProperty(c,"__esModule",{value:!0});c.composite={name:"offscreen-composite",shaders:{vertexShader:l.resolveIncludes("renderer/offscreen/offscreen.vert"),fragmentShader:l.resolveIncludes("renderer/offscreen/composite.frag")},
attributes:n.Default3D};c.compositeTransparentToHUDVisibility={name:"offscreen-composite-transparent-to-hud-visibility",shaders:{vertexShader:l.resolveIncludes("renderer/offscreen/offscreen.vert"),fragmentShader:l.resolveIncludes("renderer/offscreen/compositeTransparentToHUDVisibility.frag")},attributes:n.Default3D};c.compositeOccluded={name:"offscreen-composite-occluded",shaders:{vertexShader:l.resolveIncludes("renderer/offscreen/offscreen.vert"),fragmentShader:l.resolveIncludes("renderer/offscreen/compositeOccluded.frag")},
attributes:n.Default3D}})},"esri/views/3d/webgl-engine/lib/RenderContext":function(){define(["require","exports"],function(p,c){return function(){function c(c,k,d,h,g,f){this.camera=null;this.slot=this.pass=0;this.options=null;this.renderOccludedMask=5;this.rctx=c;this.offscreenRenderingHelper=k;this.lightingData=d;this.shadowMap=h;this.ssaoHelper=g;this.sliceHelper=f}c.prototype.resetRenderOccludedMask=function(){this.renderOccludedMask=5};Object.defineProperty(c.prototype,"isHighlightPass",{get:function(){return 4===
this.pass},enumerable:!0,configurable:!0});return c}()})},"esri/views/3d/webgl-engine/lib/RenderPluginManager":function(){define(["require","exports","./depthRange"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(d){this.pluginContext=d;this.pluginsChanged=!1;this.renderPlugins=[];this.slots=[];for(d=0;21>d;++d)this.slots[d]=[]}c.prototype.add=function(d,c){this.renderPlugins.push(c);for(var g=0;g<d.length;++g)this.slots[d[g]].push(c);c.initializeRenderContext(this.pluginContext);
this.pluginsChanged=!0};c.prototype.remove=function(d){this.renderPlugins=this.renderPlugins.filter(function(c){return c!==d});for(var c=0;c<this.slots.length;++c)this.slots[c]=this.slots[c].filter(function(c){return c!==d});d.uninitializeRenderContext(this.pluginContext);this.pluginsChanged=!0};c.prototype.prepareRender=function(d){for(var c=0,g=this.renderPlugins;c<g.length;c++){var f=g[c];f.prepareRender&&f.prepareRender(d)}};c.prototype.render=function(d,c){this.pluginsChanged=!1;c.slot=d;var g=
!1,f=0;for(d=this.slots[d];f<d.length;f++)d[f].render(c)&&(g=!0);return g};c.prototype.queryDepthRange=function(d){var c=l;c.near=Infinity;c.far=-Infinity;for(var g=0,f=this.renderPlugins;g<f.length;g++){var b=f[g];b.queryDepthRange&&(b=b.queryDepthRange(d))&&n.union(c,b,c)}return c};c.prototype.needsRender=function(){if(this.pluginsChanged)return!0;for(var d=0,c=this.renderPlugins;d<c.length;d++)if(c[d].needsRender)return!0;return!1};c.prototype.needsHighlight=function(){for(var d=0,c=this.renderPlugins;d<
c.length;d++)if(c[d].needsHighlight)return!0;return!1};c.prototype.needsLinearDepth=function(){for(var d=0,c=this.renderPlugins;d<c.length;d++)if(c[d].needsLinearDepth)return!0;return!1};return c}();c.RenderPluginManager=p;var l={near:0,far:0}})},"esri/views/3d/webgl-engine/lib/ShadowMap":function(){define("require exports ../../../../core/mathUtils ../../../../core/libs/gl-matrix-2/mat3f64 ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec2f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4 ../../../../core/libs/gl-matrix-2/vec4f64 ../../support/mathUtils ./Camera ./glUtil3D ./Util ../../../webgl/FramebufferObject ../../../webgl/Texture ../../../webgl/Util".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w){function v(a,b){h.vec2.set(ba,a[b],a[b+3]);return ba}var y=function(){return function(){this.camera=new q;this.lightMat=d.mat4f64.create()}}();p=function(){function d(a){this.doShadowMapMipmapsWork=!1;this.textureRes=4096;this.numCascades=1;this.maxNumCascades=2;this.cascadeDistances=[0,0,0,0,0];this.cascades=[];this.rctx=a;this.emptyTexture=u.createEmptyTexture(a);for(a=0;4>a;++a)this.cascades.push(new y)}d.prototype.dispose=function(){this.emptyTexture.dispose();
this.emptyTexture=null};Object.defineProperty(d.prototype,"textureResolution",{get:function(){return this.textureRes},set:function(a){this.textureRes=a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"maxCascades",{get:function(){return this.maxNumCascades},set:function(a){this.maxNumCascades=n.clamp(Math.floor(a),1,4)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"enabled",{get:function(){return!!this.depthTexture},set:function(a){a?this.enable():this.disable()},
enumerable:!0,configurable:!0});d.prototype.getDepthTexture=function(){return this.depthTexture};d.prototype.getCascades=function(){for(var a=0;a<this.numCascades;++a)O[a]=this.cascades[a];O.length=this.numCascades;return O};d.prototype.prepare=function(b,d,c){t.assert(this.enabled);k.mat4.multiply(A,b.projectionMatrix,b.viewMatrix);var e=c.near,g=c.far;2>e&&(e=2);2>g&&(g=2);e>=g&&(e=2,g=4);this.numCascades=Math.min(1+Math.floor(t.logWithBase(g/e,4)),this.maxNumCascades);var l=Math.pow(g/e,1/this.numCascades);
for(c=0;c<this.numCascades+1;++c)this.cascadeDistances[c]=e*Math.pow(l,c);k.mat4.invert(B,A);k.mat4.lookAt(N,[0,0,0],[-d[0],-d[1],-d[2]],[0,1,0]);l=b.viewMatrix;b=b.projectionMatrix;for(c=0;c<this.numCascades;++c){var q=this.cascades[c],g=-this.cascadeDistances[c],e=-this.cascadeDistances[c+1],g=(b[10]*g+b[14])/Math.abs(b[11]*g+b[15]),e=(b[10]*e+b[14])/Math.abs(b[11]*e+b[15]);t.assert(g<e);for(var r=0;8>r;++r){a.vec4.set(D,0===r%4||3===r%4?-1:1,0===r%4||1===r%4?-1:1,4>r?g:e,1);a.vec4.transformMat4(C[r],
D,B);for(var n=0;3>n;++n)C[r][n]/=C[r][3]}f.vec3.negate(S,C[0]);k.mat4.translate(z,N,S);q.camera.viewMatrix=z;for(r=0;8>r;++r)f.vec3.transformMat4(C[r],C[r],q.camera.viewMatrix);f.vec3.copy(E,C[0]);f.vec3.copy(H,C[0]);for(r=1;8>r;++r)for(n=0;3>n;++n)E[n]=Math.min(E[n],C[r][n]),H[n]=Math.max(H[n],C[r][n]);E[2]-=200;H[2]+=200;q.camera.near=-H[2];q.camera.far=-E[2];e=1/C[0][3];g=1/C[4][3];t.assert(e<g);var n=e+Math.sqrt(e*g),r=Math.sin(m.acos(l[2]*d[0]+l[6]*d[1]+l[10]*d[2])),n=n/r,e=C,u=n,x=r,r=G,w=
I,p=K,y=M,n=T;h.vec2.set(J,0,0);for(var ba=0;4>ba;++ba)h.vec2.add(J,J,e[ba]);h.vec2.scale(J,J,.25);h.vec2.set(P,0,0);for(ba=4;8>ba;++ba)h.vec2.add(P,P,e[ba]);h.vec2.scale(P,P,.25);h.vec2.lerp(L[0],e[4],e[5],.5);h.vec2.lerp(L[1],e[5],e[6],.5);h.vec2.lerp(L[2],e[6],e[7],.5);h.vec2.lerp(L[3],e[7],e[4],.5);for(var V=0,Q=h.vec2.squaredDistance(L[0],J),ba=1;4>ba;++ba){var O=h.vec2.squaredDistance(L[ba],J);O<Q&&(Q=O,V=ba)}h.vec2.subtract(F,L[V],e[V+4]);ba=F[0];F[0]=-F[1];F[1]=ba;h.vec2.subtract(Y,P,J);h.vec2.lerp(F,
F,Y,x);h.vec2.normalize(F,F);V=x=void 0;x=V=h.vec2.dot(h.vec2.subtract(X,e[0],J),F);for(ba=1;8>ba;++ba)Q=h.vec2.dot(h.vec2.subtract(X,e[ba],J),F),Q<x?x=Q:Q>V&&(V=Q);h.vec2.copy(r,J);h.vec2.scale(X,F,x-u);h.vec2.add(r,r,X);for(var O=-1,ga=1,ba=u=Q=0;8>ba;++ba){h.vec2.subtract(R,e[ba],r);h.vec2.normalize(R,R);var qa=F[0]*R[1]-F[1]*R[0];0<qa?qa>O&&(O=qa,Q=ba):qa<ga&&(ga=qa,u=ba)}t.verify(0<O,"leftArea");t.verify(0>ga,"rightArea");h.vec2.scale(Z,F,x);h.vec2.add(Z,Z,J);h.vec2.scale(da,F,V);h.vec2.add(da,
da,J);ja[0]=-F[1];ja[1]=F[0];w=t.rayRay2D(r,e[u],da,h.vec2.add(X,da,ja),1,w);p=t.rayRay2D(r,e[Q],da,X,1,p);y=t.rayRay2D(r,e[Q],Z,h.vec2.add(X,Z,ja),1,y);e=t.rayRay2D(r,e[u],Z,X,1,n);t.verify(w,"rayRay");t.verify(p,"rayRay");t.verify(y,"rayRay");t.verify(e,"rayRay");p=G;e=I;r=M;y=T;n=q.camera.projectionMatrix;h.vec2.subtract(ha,r,y);h.vec2.scale(ha,ha,.5);W[0]=ha[0];W[1]=ha[1];W[2]=0;W[3]=ha[1];W[4]=-ha[0];W[5]=0;W[6]=ha[0]*ha[0]+ha[1]*ha[1];W[7]=ha[0]*ha[1]-ha[1]*ha[0];W[8]=1;W[6]=-h.vec2.dot(v(W,
0),p);W[7]=-h.vec2.dot(v(W,1),p);p=h.vec2.dot(v(W,0),r)+W[6];w=h.vec2.dot(v(W,1),r)+W[7];ba=h.vec2.dot(v(W,0),y)+W[6];y=h.vec2.dot(v(W,1),y)+W[7];p=-(p+ba)/(w+y);W[0]+=W[1]*p;W[3]+=W[4]*p;W[6]+=W[7]*p;p=1/(h.vec2.dot(v(W,0),r)+W[6]);w=1/(h.vec2.dot(v(W,1),r)+W[7]);W[0]*=p;W[3]*=p;W[6]*=p;W[1]*=w;W[4]*=w;W[7]*=w;W[2]=W[1];W[5]=W[4];W[8]=W[7];W[7]+=1;p=h.vec2.dot(v(W,1),e)+W[7];w=h.vec2.dot(v(W,2),e)+W[8];ba=h.vec2.dot(v(W,1),r)+W[7];y=h.vec2.dot(v(W,2),r)+W[8];p=-.5*(p/w+ba/y);W[1]+=W[2]*p;W[4]+=W[5]*
p;W[7]+=W[8]*p;p=h.vec2.dot(v(W,1),e)+W[7];w=h.vec2.dot(v(W,2),e)+W[8];ba=-w/p;W[1]*=ba;W[4]*=ba;W[7]*=ba;n[0]=W[0];n[1]=W[1];n[2]=0;n[3]=W[2];n[4]=W[3];n[5]=W[4];n[6]=0;n[7]=W[5];n[8]=0;n[9]=0;n[10]=1;n[11]=0;n[12]=W[6];n[13]=W[7];n[14]=0;n[15]=W[8];q.camera.projectionMatrix[10]=2/(E[2]-H[2]);q.camera.projectionMatrix[14]=-(E[2]+H[2])/(E[2]-H[2]);k.mat4.multiply(q.lightMat,q.camera.projectionMatrix,q.camera.viewMatrix);e=this.textureRes/2;q.camera.viewport[0]=0===c%2?0:e;q.camera.viewport[1]=0===
Math.floor(c/2)?0:e;q.camera.viewport[2]=e;q.camera.viewport[3]=e}this.lastOrigin=null;this.cascadeDistances[this.numCascades]=100*g;d=this.rctx;d.bindFramebuffer(this.fbo);d.bindTexture(null,7);d.setClearColor(1,1,1,1);d.clearSafe(16640)};d.prototype.finish=function(a){t.assert(this.enabled);this.rctx.bindFramebuffer(a);this.doShadowMapMipmapsWork&&this.depthTexture.generateMipmap()};d.prototype.bind=function(a){var b=this.rctx,d=this.enabled;b.bindTexture(d?this.depthTexture:this.emptyTexture,7);
b.bindProgram(a);a.setUniform1i("depthTex",7);a.setUniform1f("depthHalfPixelSz",d?.5/this.textureRes:-1);a.setUniform1i("shadowMapNum",this.numCascades);a.setUniform4f("shadowMapDistance",this.cascadeDistances[0],this.cascadeDistances[1],this.cascadeDistances[2],this.cascadeDistances[3])};d.prototype.bindAll=function(a){a=a.getProgramsUsingUniform("shadowMapDistance");for(var b=0;b<a.length;b++)this.bind(a[b])};d.prototype.bindView=function(a,d){if(this.enabled){var c=this.lastOrigin;if(!c||c[0]!==
d[0]||c[1]!==d[1]||c[2]!==d[2])for(this.lastOrigin=this.lastOrigin||b.vec3f64.create(),f.vec3.copy(this.lastOrigin,d),c=0;c<this.numCascades;++c){k.mat4.translate(V,this.cascades[c].lightMat,d);for(var e=0;16>e;++e)Q[16*c+e]=V[e]}a.setUniformMatrix4fv("shadowMapMatrix",Q)}};d.prototype.enable=function(){this.enabled||(this.depthTexture=new x(this.rctx,{target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9728,flipped:!0,width:this.textureRes,height:this.textureRes}),this.fbo=r.createWithAttachments(this.rctx,
this.depthTexture,{colorTarget:0,depthStencilTarget:1,width:this.textureRes,height:this.textureRes}))};d.prototype.disable=function(){this.enabled&&this.fbo&&(this.fbo.dispose(),this.depthTexture=this.fbo=null)};d.prototype.getGpuMemoryUsage=function(){return w.getGpuMemoryUsage(this.fbo)};return d}();var z=d.mat4f64.create(),A=d.mat4f64.create(),B=d.mat4f64.create(),D=e.vec4f64.create(),C=[];for(c=0;8>c;++c)C.push(e.vec4f64.create());var E=b.vec3f64.create(),H=b.vec3f64.create(),G=g.vec2f64.create(),
I=g.vec2f64.create(),K=g.vec2f64.create(),M=g.vec2f64.create(),T=g.vec2f64.create(),N=d.mat4f64.create(),S=b.vec3f64.create(),O=[],V=d.mat4f64.create(),Q=new Float32Array(64),J=g.vec2f64.create(),P=g.vec2f64.create(),L=[g.vec2f64.create(),g.vec2f64.create(),g.vec2f64.create(),g.vec2f64.create()],F=g.vec2f64.create(),Y=g.vec2f64.create(),X=g.vec2f64.create(),R=g.vec2f64.create(),Z=g.vec2f64.create(),da=g.vec2f64.create(),ja=g.vec2f64.create(),ba=g.vec2f64.create(),ha=g.vec2f64.create(),W=l.mat3f64.create();
return p})},"esri/views/3d/webgl-engine/lib/SliceHelper":function(){define(["require","exports","../../support/geometryUtils"],function(p,c,n){var l=n.boundedPlane.create();return function(){function c(){this._worldPlane=l}Object.defineProperty(c.prototype,"isEnabled",{get:function(){return this.plane!==l},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"plane",{get:function(){return this._worldPlane},set:function(d){this._worldPlane=d?d:l},enumerable:!0,configurable:!0});return c}()})},
"esri/views/3d/webgl-engine/lib/SmaaRenderPass":function(){define("require exports ../../support/imageUtils ../../../webgl/BufferObject ../../../webgl/FramebufferObject ../../../webgl/Program ../../../webgl/renderState ../../../webgl/Texture ../../../webgl/VertexArrayObject".split(" "),function(p,c,n,l,k,d,h,g,f){return function(){function b(a){this.isEnabled=this._isLoadingResources=!1;this.vertexAttributeLocations={vPosition:0};this.vertexBufferLayout=[{name:"vPosition",count:2,type:5126,offset:0,
stride:8,normalized:!1}];this.rctx=a}b.prototype.loadResources=function(a){var b=this;return this.data?!0:(this._isLoadingResources=!0,p(["./SmaaRenderPassData"],function(d){b.data=d;b._isLoadingResources=!1;a&&a()}),!1)};Object.defineProperty(b.prototype,"isLoadingResources",{get:function(){return this._isLoadingResources},enumerable:!0,configurable:!0});b.prototype.enable=function(){if(this.isEnabled)return!0;if(!this.loadResources())return!1;var a=this.rctx;this.programEdgeDetect=new d(a,this.data.edgeDetectShader.vertex,
this.data.edgeDetectShader.fragment,this.vertexAttributeLocations);this.programBlendWeights=new d(a,this.data.blendWeightShader.vertex,this.data.blendWeightShader.fragment,this.vertexAttributeLocations);this.programBlur=new d(a,this.data.blurShader.vertex,this.data.blurShader.fragment,this.vertexAttributeLocations);this.pipelineState=h.makePipelineState({colorWrite:h.defaultColorWriteParams});var b=new Float32Array([-1,-1,3,-1,-1,3]);this.vao=new f(a,this.vertexAttributeLocations,{geometry:this.vertexBufferLayout},
{geometry:new l(a,34962,35044,b)});this.tmpFramebufferEdges=k.createWithAttachments(this.rctx,{target:3553,pixelFormat:6407,dataType:5121,samplingMode:9729,wrapMode:33071,width:4,height:4},{colorTarget:0,depthStencilTarget:0});this.tmpFramebufferBlend=k.createWithAttachments(this.rctx,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9729,wrapMode:33071,width:4,height:4},{colorTarget:0,depthStencilTarget:0});this.textureArea=this.loadTextureFromBase64(this.data.areaTexture,9729,6407);this.textureSearch=
this.loadTextureFromBase64(this.data.searchTexure,9728,6409);return this.isEnabled=!0};b.prototype.disable=function(){this.isEnabled&&(this.programEdgeDetect.dispose(),this.programEdgeDetect=null,this.programBlendWeights.dispose(),this.programBlendWeights=null,this.programBlur.dispose(),this.programBlur=null,this.vao.dispose(),this.vao=null,this.textureArea.dispose(),this.textureArea=null,this.textureSearch.dispose(),this.textureSearch=null,this.tmpFramebufferBlend.dispose(),this.tmpFramebufferBlend=
null,this.tmpFramebufferEdges.dispose(),this.tmpFramebufferEdges=null,this.isEnabled=!1)};b.prototype.render=function(a,b){this.enable();var d=this.rctx,c=0,e=0;null!=b?(c=b.descriptor.width,e=b.descriptor.height):(c=d.gl.canvas.width,e=d.gl.canvas.height);d.bindVAO(this.vao);d.setPipelineState(this.pipelineState);d.setViewport(0,0,c,e);this.tmpFramebufferEdges.resize(c,e);d.bindFramebuffer(this.tmpFramebufferEdges);d.setClearColor(0,0,0,1);d.clear(16384);d.bindProgram(this.programEdgeDetect);d.bindTexture(a.colorTexture,
0);this.programEdgeDetect.setUniform1i("tColor",0);this.programEdgeDetect.setUniform4f("uResolution",1/c,1/e,c,e);d.drawArrays(4,0,3);this.tmpFramebufferBlend.resize(c,e);d.bindFramebuffer(this.tmpFramebufferBlend);d.setClearColor(0,0,1,1);d.clear(16384);d.bindProgram(this.programBlendWeights);this.programBlendWeights.setUniform4f("uResolution",1/c,1/e,c,e);d.bindTexture(this.textureSearch,1);this.programBlendWeights.setUniform1i("tSearch",1);d.bindTexture(this.textureArea,2);this.programBlendWeights.setUniform1i("tArea",
2);d.bindTexture(this.tmpFramebufferEdges.colorTexture,3);this.programBlendWeights.setUniform1i("tEdges",3);d.drawArrays(4,0,3);d.bindFramebuffer(b);d.setClearColor(0,1,0,1);d.clear(16384);d.bindProgram(this.programBlur);this.programBlur.setUniform4f("uResolution",1/c,1/e,c,e);d.bindTexture(a.colorTexture,0);this.programBlur.setUniform1i("tColor",0);d.bindTexture(this.tmpFramebufferBlend.colorTexture,1);this.programBlur.setUniform1i("tBlendWeights",1);d.drawArrays(4,0,3)};b.prototype.loadTextureFromBase64=
function(a,b,d){var c=new g(this.rctx,{pixelFormat:d,dataType:5121,wrapMode:33071,samplingMode:b},null);n.requestImage(a).then(function(a){c.resize(a.width,a.height);c.setData(a)});return c};return b}()})},"esri/views/3d/webgl-engine/lib/SSAOHelper":function(){define("require exports ../../../../core/Logger ../../../../core/libs/gl-matrix-2/vec2f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec4 ../../../../core/libs/gl-matrix-2/vec4f64 ../../support/imageUtils ./glUtil3D ./Util ../shaders/SSAOPrograms ../../../webgl/FramebufferObject ../../../webgl/renderState ../../../webgl/Texture ../../../webgl/Util".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u){var t=n.getLogger("esri.views.3d.webgl-engine.lib.SSAOHelper");c=function(){function c(a,b,d){this._enabled=!1;this._BLUR_F=2;this._attenuation=.5;this._radius=3;this._samples=16;this._viewportToRestore=h.vec4f64.create();this._rctx=b;this._programRep=a;this._requestRender=d;this._emptyTexture=f.createEmptyTexture(b)}c.prototype.dispose=function(){this._emptyTexture.dispose();this._emptyTexture=null};Object.defineProperty(c.prototype,"isSupported",{get:function(){var a=
this._rctx,b=-1!==a.parameters.versionString.indexOf("WebGL 0.93"),a=-1!==a.parameters.versionString.indexOf("WebGL 0.94");return!(b||a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"enabled",{get:function(){return this._enabled},set:function(a){a?this.enable():this.disable()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"attenuation",{get:function(){return this._attenuation},set:function(a){this._attenuation=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"radius",{get:function(){return this._radius},set:function(a){this._radius=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"filterRadius",{get:function(){return 4},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"samples",{get:function(){return this._samples},set:function(a){this._samples=a;this._enabled&&this.selectPrograms()},enumerable:!0,configurable:!0});c.prototype.computeSSAO=function(a,c,e){if(this._noiseTexture){b.assert(this.enabled);var g=this._rctx,
m=a.fullViewport,h=m[2],l=m[3],m=h/this._BLUR_F,q=l/this._BLUR_F;this._ssaoFBO.resize(h,l);this._blur0FBO.resize(m,q);this._blur1FBO.resize(m,q);m=1*h;q=1*l;g.bindFramebuffer(this._ssaoFBO);d.vec4.copy(this._viewportToRestore,a.fullViewport);g.setViewport(0,0,h,l);var n=this._ssaoProgram,t=this._blurProgram;n.setUniform2f("rnmScale",h/this._noiseTexture.descriptor.width,l/this._noiseTexture.descriptor.height);n.setUniform3fv("pSphere",8>=this._samples?this._data.random8:16>=this._samples?this._data.random16:
32>=this._samples?this._data.random32:this._data.random64);g.bindProgram(n);g.setPipelineState(this._pipelineState);h=this._data.minDiscrepancy;n.setUniform1f("numSpiralTurns",this._samples<h.length?h[this._samples]:5779);h=x;l=r;b.inverseProjectionInfo(a.projectionMatrix,a.fullWidth,a.fullHeight,h,l);n.setUniform4fv("projInfo",h);n.setUniform2fv("zScale",l);n.setUniform2f("nearFar",a.near,a.far);h=1/a.computeRenderPixelSizeAtDist(1);n.setUniform1f("projScale",1*h);n.setUniform2f("screenDimensions",
m,q);var v=2*this._radius,l=k.vec3.distance(a.eye,a.center),v=20*a.computeRenderPixelSizeAtDist(l),v=Math.max(.1,v);n.setUniform1f("radius",v);n.setUniform1f("intensity",4*this._attenuation/Math.pow(v,6));n.setUniform1i("rnm",0);n.setUniform1i("normalMap",1);n.setUniform1i("depthMap",2);g.bindTexture(this._noiseTexture,0);g.bindTexture(e,1);g.bindTexture(c,2);c=f.createQuadVAO(this._rctx);g.bindVAO(c);g.drawArrays(5,0,u.vertexCount(c,"geometry"));g.bindTexture(this._ssaoFBO.colorTexture,0);g.setViewport(0,
0,m/this._BLUR_F,q/this._BLUR_F);g.bindFramebuffer(this._blur0FBO);t.setUniform2f("screenDimensions",m,q);t.setUniform1i("tex",0);t.setUniform1i("normalMap",1);t.setUniform1i("depthMap",2);t.setUniform2f("blurSize",0,1*this._BLUR_F/q);t.setUniform1i("radius",4);t.setUniform1f("g_BlurFalloff",.08);t.setUniform2f("nearFar",a.near,a.far);5E4<l&&(h=Math.max(0,h-(l-5E4)));t.setUniform1f("projScale",h);t.setUniform2f("zScale",1,0);g.drawArrays(5,0,u.vertexCount(c,"geometry"));t.setUniform2f("blurSize",
1*this._BLUR_F/m,0);g.bindFramebuffer(this._blur1FBO);g.bindTexture(this._blur0FBO.colorTexture,0);g.drawArrays(5,0,u.vertexCount(c,"geometry"));g.setViewport(this._viewportToRestore[0],this._viewportToRestore[1],this._viewportToRestore[2],this._viewportToRestore[3])}};c.prototype.setUniforms=function(a){var b=this.enabled&&this._noiseTexture,d=this._rctx;d.bindTexture(b?this._blur1FBO.colorTexture:this._emptyTexture,6);d.setActiveTexture(0);a.setUniform1i("ssaoTex",6);b?a.setUniform4f("viewportPixelSz",
this._viewportToRestore[0],this._viewportToRestore[1],1/this._ssaoFBO.width,1/this._ssaoFBO.height):a.setUniform4f("viewportPixelSz",-1,-1,-1,-1)};c.prototype.bindAll=function(a){a=a.getProgramsUsingUniform("viewportPixelSz");for(var b=0;b<a.length;b++)this.setUniforms(a[b])};c.prototype.selectPrograms=function(){this._ssaoProgram=this._programRep.getProgram(a.ssaoPass,{samples:8>=this._samples?8:16>=this._samples?16:32>=this._samples?32:64});this._blurProgram=this._programRep.getProgram(a.blurPass,
{radius:4});this._pipelineState=m.makePipelineState({colorWrite:m.defaultColorWriteParams})};c.prototype.enable=function(){var a=this;this.enabled||(this.isSupported?(this._enabled=!0,this.loadResources(function(){a._enabled&&a.initialize()})):t.warn("SSAO is not supported for this browser or hardware"))};c.prototype.loadResources=function(a){var b=this;this._data?a():p(["./SSAOHelperData"],function(d){b._data=d;a()})};c.prototype.initialize=function(){var a=this,b={target:3553,pixelFormat:6408,dataType:5121,
samplingMode:9729,wrapMode:33071,width:0,height:0},d={colorTarget:0,depthStencilTarget:0};this._ssaoFBO=e.createWithAttachments(this._rctx,b,d);this._blur0FBO=e.createWithAttachments(this._rctx,b,d);this._blur1FBO=e.createWithAttachments(this._rctx,b,d);g.requestImage(this._data.noiseTexture).then(function(b){a._enabled&&(a._noiseTexture=new q(a._rctx,{target:3553,pixelFormat:6408,dataType:5121,hasMipmap:!0,width:b.width,height:b.height},b),a._requestRender())});this.selectPrograms()};c.prototype.disable=
function(){this.enabled&&(this._enabled=!1,this._quadVAO&&(this._quadVAO.dispose(!0),this._quadVAO=null),this._noiseTexture&&(this._noiseTexture.dispose(),this._noiseTexture=null),this._blur1FBO&&(this._blur1FBO.dispose(),this._blur1FBO=null),this._blur0FBO&&(this._blur0FBO.dispose(),this._blur0FBO=null),this._ssaoFBO&&(this._ssaoFBO.dispose(),this._ssaoFBO=null))};c.prototype.getGpuMemoryUsage=function(){return u.getGpuMemoryUsage(this._blur0FBO)+u.getGpuMemoryUsage(this._blur1FBO)+u.getGpuMemoryUsage(this._ssaoFBO)};
return c}();var r=l.vec2f64.create(),x=h.vec4f64.create();return c})},"esri/views/3d/webgl-engine/shaders/SSAOPrograms":function(){define(["require","exports","../lib/DefaultVertexAttributeLocations","./sources/resolver"],function(p,c,n,l){Object.defineProperty(c,"__esModule",{value:!0});c.ssaoPass={name:"ssao",shaders:function(c){return{vertexShader:l.resolveIncludes("util/quad.vert"),fragmentShader:"#define SAMPLES "+c.samples+"\n"+l.resolveIncludes("renderer/ssao/ssao.frag")}},attributes:n.Default3D};
c.blurPass={name:"ssao-blur",shaders:function(c){return{vertexShader:l.resolveIncludes("util/quad.vert"),fragmentShader:"#define RADIUS "+c.radius+"\n"+l.resolveIncludes("renderer/ssao/blur.frag")}},attributes:n.Default3D}})},"esri/views/3d/webgl-engine/lib/edgeRendering/EdgeView":function(){define("require exports ../../../../../core/tsSupport/assignHelper ../../../../../core/tsSupport/awaiterHelper ../../../../../core/tsSupport/generatorHelper ../../../../../core/arrayUtils ../../../../../core/mathUtils ../../../../../core/promiseUtils ../../../../../core/requireUtils ../../../../../core/typedArrayUtil ../../../../../core/workers ../../../../../core/libs/gl-matrix-2/mat4f64 ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../../../core/libs/gl-matrix-2/vec4f64 ../../../support/buffer/BufferView ../../../support/buffer/utils ../GridLocalOriginFactory ../localOriginHelper ../LocalOriginManager ../PreinterleavedGeometryData ../TextureBackedBuffer/BufferManager ./bufferLayouts ./edgeBufferWriters ./EdgeProcessingWorker ./EdgeRenderer ./strokes ./util ../../../../webgl/BufferObject ../../../../webgl/renderState ../../../../webgl/VertexArrayObject module".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z,A,B,D,C,E,H,G,I,K,M){Object.defineProperty(c,"__esModule",{value:!0});var T=function(){function c(a,b,d){this.rctx=a;this.programRepository=b;this.callbacks=d;this.profilingCallback=null;this.perObjectData=new Map;this.renderers=new Map;this.localOrigins=new v.LocalOriginManager(new x);this.gpuMemoryUsage=this.numberOfRenderedEdges=0;this.worker=new D;this.workerThread=null;this.destroyed=!1;this.tmpModelPosition=q.vec3f64.create();this.tmpCameraPosition=
q.vec3f64.create();this.componentColorManager=new z.BufferManager(this.rctx,2)}c.prototype.initialize=function(){var b=this;a.open(f.getAbsMid("./EdgeProcessingWorker",p,M)).then(function(a){b.destroyed?a.close():b.workerThread=a});for(var d=A.VertexLayout.createBuffer(4),c=0;4>c;c++)d.sideness.set(c,0,0===c||3===c?0:1),d.sideness.set(c,1,0===c||1===c?0:1);this.verticesBufferObject=G.createVertex(this.rctx,35044,d.buffer);this.pipelineState=(d=this.rctx.capabilities.blendMinMax)?I.makePipelineState({blending:I.separateBlendingParams(1,
1,0,1,32774,d.MAX),depthTest:{func:515},colorWrite:I.defaultColorWriteParams}):I.makePipelineState({depthTest:{func:515},depthWrite:I.defaultDepthWriteParams,colorWrite:I.defaultColorWriteParams})};c.prototype.destroy=function(){this.destroyed||(this.workerThread&&(this.workerThread.close(),this.workerThread=null),this.verticesBufferObject&&(this.verticesBufferObject.dispose(),this.verticesBufferObject=null),this.destroyed=!0)};c.prototype.getUsedMemory=function(){return this.gpuMemoryUsage};Object.defineProperty(c.prototype,
"numberOfRenderedPrimitives",{get:function(){return this.numberOfRenderedEdges},enumerable:!0,configurable:!0});c.prototype.shouldRender=function(){return 0<this.renderers.size};c.prototype.addObject=function(a,b,d,c,e){return l(this,void 0,void 0,function(){var f,m,h,l,q,r,n;return k(this,function(k){switch(k.label){case 0:if(this.hasObject(a))return[2];f=[];h={loaded:g.create(function(a){return m=a}),renderables:[]};this.perObjectData.set(a,h);if(e&&e.mergeGeometries&&1<a.geometries.length&&this.canMergeGeometries(a))f.push(this.addObjectMergedGeometries(a,
h,b,d));else for(l=0;l<a.geometries.length;l++)q=a.geometries[l],r=a.geometryRecords[l],n=r.material,n.supportsEdges&&(q.data instanceof y?f.push(this.addGeometryPreinterleaved(a,h,q,q.data,r,b,d,c)):f.push(this.addGeometryNonPreinterleaved(a,h,q,q.data,r,b[0],d,c)));return[4,g.all(f)];case 1:return k.sent(),this.callbacks.setNeedsRender(),m(),[2]}})})};c.prototype.hasObject=function(a){return this.perObjectData.has(a)};c.prototype.updateAllComponentOpacities=function(a,b){return l(this,void 0,void 0,
function(){var d,c;return k(this,function(e){switch(e.label){case 0:return[4,this.getObjectEntry(a)];case 1:return d=e.sent(),c=b instanceof Array?function(a){return b[a]}:function(a){return b},d.renderables.forEach(function(a){for(var b=a.components.meta.length,d=0;d<b;d++){var e=c(d),f=a.components.meta[d],g=f.index;f.material.opacity=e;a.components.buffer.textureBuffer.setDataElement(g,1,3,255*e)}a.allTransparent=H.determineAllTransparent(a.components.meta)}),this.callbacks.setNeedsRender(),[2]}})})};
c.prototype.updateAllComponentMaterials=function(a,b,d,c){void 0===c&&(c=!0);return l(this,void 0,void 0,function(){var e,f,g,m,h=this;return k(this,function(k){switch(k.label){case 0:return[4,this.getObjectEntry(a)];case 1:return e=k.sent(),f=d.slicePlaneEnabled||!1,g=H.determineRendererType(b),m=C.EdgeRenderer.getKey(g,f),e.renderables.forEach(function(a){if(m!==a.rendererKey){var d=h.renderers.get(a.rendererKey),e=h.acquireRenderer(g,f);d.removeRenderable(a);d.refCount.decrement();a.rendererKey=
m;e.addRenderable(a)}for(d=0;d<b.length;d++)a.components.meta[d].material=b[d];c&&h.updateComponentBuffer(a.components);a.allTransparent=H.determineAllTransparent(a.components.meta)}),this.callbacks.setNeedsRender(),[2]}})})};c.prototype.updateObjectVisibility=function(a,b){return l(this,void 0,void 0,function(){var d;return k(this,function(c){switch(c.label){case 0:return[4,this.getObjectEntry(a)];case 1:return d=c.sent(),d.renderables.forEach(function(a){a.visible=b}),this.callbacks.setNeedsRender(),
[2]}})})};c.prototype.removeObject=function(a){var b=this,d=this.perObjectData.get(a);d&&(this.perObjectData.delete(a),d.loaded.then(function(){d.renderables.forEach(function(a){b.removeRenderable(a)});b.callbacks.setNeedsRender()}))};c.prototype.getObjectEntry=function(a){return l(this,void 0,void 0,function(){var b;return k(this,function(d){switch(d.label){case 0:b=this.perObjectData.get(a);if(!b)throw"no object";return[4,b.loaded];case 1:return d.sent(),[2,b]}})})};c.prototype.removeAll=function(){var a=
this;this.perObjectData.forEach(function(b,d){a.removeObject(d)})};c.prototype.createSolidEdgeMaterial=function(a){return n({},N,a,{type:"solid"})};c.prototype.createSketchEdgeMaterial=function(a){return n({},S,a,{type:"sketch"})};c.prototype.render=function(a){var b=this;this.localOrigins.updateViewMatrices(a.view);this.renderers.forEach(function(a){0===a.refCount.value&&(b.renderers.delete(a.key),a.dispose())});this.componentColorManager.garbageCollect();this.componentColorManager.updateTextures();
var d=a.view,c=0,e=0;this.renderers.forEach(function(a){a.forEachRenderable(function(a){c+=a.statistics.averageEdgeLength;e++})});var f={distanceFalloffFactor:c/e*40,minimumEdgeLength:H.estimateLengthAtDistance(a.viewport[3],a.fovY,1,3.5*a.pixelRatio)};this.rctx.setPipelineState(this.pipelineState);this.updateObjectCameraDistances(a);this.numberOfRenderedEdges=0;this.renderers.forEach(function(d){b.renderRegularEdges(d,a,f);b.renderSilhouetteEdges(d,a,f)});a.view=d};c.prototype.computeModelTransformWithLocalOrigin=
function(a,b,d){a.getCombinedStaticTransformation(b,d);b.origin?this.localOrigins.register(b.origin):(a=m.vec3.set(this.tmpModelPosition,d[12],d[13],d[14]),b.origin=this.localOrigins.acquire(a));w.applyToModelMatrix(b.origin.vec3,d);return d};c.prototype.updateComponentBuffer=function(a){var b=a.meta;a=a.buffer;for(var d=0;d<b.length;d++){var c=b[d].material,e=b[d].index,f=h.clamp(Math.round(c.size*C.LINE_WIDTH_FRACTION_FACTOR),0,255),g=h.clamp(c.extensionLength,-C.EXTENSION_LENGTH_OFFSET,255-C.EXTENSION_LENGTH_OFFSET)+
C.EXTENSION_LENGTH_OFFSET,m="solid"===c.type?0:1,k=255*c.opacity,c=c.color;a.textureBuffer.setData(e,0,255*c[0],255*c[1],255*c[2],255*c[3]);a.textureBuffer.setData(e,1,f,g,m,k)}};c.prototype.createComponentBuffers=function(a){for(var b=[],d=this.componentColorManager.getBuffer(a.length),c=0;c<a.length;c++){var e=a[c],f=d.acquireIndex();b.push({index:f,material:e})}a={meta:b,buffer:d};this.updateComponentBuffer(a);return a};c.prototype.extractEdges=function(a,b,d,c,e){return this.worker.process({data:b,
originalIndices:e,writerSettings:a,skipDeduplicate:d},c?null:this.workerThread)};c.prototype.createEdgeResources=function(a){var b={};if(0<a.regular.lodInfo.lengths.length){var d=new K(this.rctx,A.EdgeShaderAttributeLocations,{vertices:A.glVertexLayout,instances:B.RegularEdgeBufferWriter.glLayout},{vertices:this.verticesBufferObject,instances:G.createVertex(this.rctx,35044,a.regular.instancesData.buffer)});b.regular={vao:d,lod:a.regular.lodInfo}}0<a.silhouette.lodInfo.lengths.length&&(d=new K(this.rctx,
A.EdgeShaderAttributeLocations,{vertices:A.glVertexLayout,instances:B.SilhouetteEdgeBufferWriter.glLayout},{vertices:this.verticesBufferObject,instances:G.createVertex(this.rctx,35044,a.silhouette.instancesData.buffer)}),b.silhouette={vao:d,lod:a.silhouette.lodInfo});return b};c.prototype.disposeEdgeResources=function(a){a.regular&&(a.regular.vao.vertexBuffers.instances.dispose(),a.regular.vao.dispose(!1),a.regular.vao=null);a.silhouette&&(a.silhouette.vao.vertexBuffers.instances.dispose(),a.silhouette.vao.dispose(!1),
a.silhouette.vao=null)};c.prototype.addGeometryNonPreinterleaved=function(a,b,d,c,f,g,m,h){return l(this,void 0,void 0,function(){var d,l,q,r;return k(this,function(k){d=c.getAttribute("position");l=this.computeModelTransformWithLocalOrigin(a,f,e.mat4f64.create());q=f.origin;r={position:d,indices:c.getIndices("position"),modelTransform:l,origin:q};return[2,this.addNonPreinterleaved(a,b,r,g,m,h)]})})};c.prototype.addNonPreinterleaved=function(a,b,d,c,e,f){void 0===f&&(f=!1);return l(this,void 0,void 0,
function(){var a,g,m,h,l,q,r,n,t,u,x,v,w,p,y;return k(this,function(k){switch(k.label){case 0:a=this.acquireRenderer(c.type,e.slicePlaneEnabled||!1);g=d.modelTransform;m=d.origin;h=d.indices;l=d.position;q=l.data.length/l.strideIdx;r=A.EdgeInputBufferLayout.createBuffer(q);for(n=0;n<q;n++)r.position.set(n,0,l.data[l.offsetIdx+n*l.strideIdx+0]),r.position.set(n,1,l.data[l.offsetIdx+n*l.strideIdx+1]),r.position.set(n,2,l.data[l.offsetIdx+n*l.strideIdx+2]);t=this.createComponentBuffers([c]);H.fillComponenBufferIndices(t.meta,
[0,r.componentIndex.count],r.componentIndex);return[4,this.extractEdges(a.writerSettings,r,!1,f,h)];case 1:return u=k.sent(),x=this.createEdgeResources(u),v=x.regular,w=x.silhouette,p=(v?v.vao.size:0)+(w?w.vao.size:0),y={regular:v,silhouette:w,transform:{modelMatrix:g,origin:m},statistics:{gpuMemoryUsage:p,averageEdgeLength:u.averageEdgeLength},components:t,visible:!0,allTransparent:H.determineAllTransparent(t.meta),distanceToCamera:0,rendererKey:a.key},b.renderables.push(y),a.addRenderable(y),this.gpuMemoryUsage+=
p,[2]}})})};c.prototype.addGeometryPreinterleaved=function(a,d,c,f,g,m,h,q){return l(this,void 0,void 0,function(){var c,l,n,u,x,v,w,p,y,z,B,D,L,C,F,K;return k(this,function(k){switch(k.label){case 0:c=f.getAttribute("position");if(!c||!b.isFloat32Array(c.data))return console.warn("Geometry has no float32 `position` attribute, skipping it."),[2];l=H.determineRendererType(m);n=this.acquireRenderer(l,h.slicePlaneEnabled||!1);u=this.computeModelTransformWithLocalOrigin(a,g,e.mat4f64.create());x=g.origin;
v=f.getIndices("position");w=new t.BufferViewVec3f(c.data.buffer,4*c.offsetIdx,4*c.strideIdx);p=A.EdgeInputBufferLayout.createBuffer(w.count);r.vec3.copy(p.position,w);y=this.createComponentBuffers(m);H.fillComponenBufferIndices(y.meta,f.componentOffsets,p.componentIndex,v);z=f.hasPositionData;return[4,this.extractEdges(n.writerSettings,p,z,q,v)];case 1:return B=k.sent(),D=this.createEdgeResources(B),L=D.regular,C=D.silhouette,F=(L?L.vao.size:0)+(C?C.vao.size:0),K={regular:L,silhouette:C,transform:{modelMatrix:u,
origin:x},statistics:{gpuMemoryUsage:F,averageEdgeLength:B.averageEdgeLength},components:y,visible:!a.isHidden(g),allTransparent:H.determineAllTransparent(y.meta),distanceToCamera:0,rendererKey:n.key},d.renderables.push(K),n.addRenderable(K),this.gpuMemoryUsage+=F,[2]}})})};c.prototype.canMergeGeometries=function(a){for(var b=null,c=null,e=0;e<a.geometries.length;e++){var f=a.geometryRecords[e];if(f.material.supportsEdges){if(a.geometries[e].data instanceof y)return!1;if(!b)b=f.transformation;else if(!d.equals(b,
f.transformation))return!1;if(!c&&f.origin)c=f;else if(c&&f.origin&&c.origin.id!==f.origin.id)return!1}}return!0};c.prototype.addObjectMergedGeometries=function(a,d,c,f){return l(this,void 0,void 0,function(){var g,m,h,l,q,r,n,t,u,x,v,w,p,y,z,A,B,D,C,K,P;return k(this,function(k){switch(k.label){case 0:g=new Map;m=0;l=h=null;for(q=0;q<a.geometries.length;q++)if(r=a.geometries[q],n=a.geometryRecords[q],t=n.material,t.supportsEdges&&(!l&&n.origin&&(l=n),u=r.data.getIndices("position"),m+=u?u.length:
0,u&&null==h||h===Uint16Array))h=b.isUint16Array(u)?Uint16Array:Uint32Array;x=m?new h(m):null;v=[];for(q=w=0;q<a.geometries.length;q++)if(r=a.geometries[q],p=a.geometryRecords[q],t=p.material,t.supportsEdges){y=r.data.getAttribute("position");u=r.data.getIndices("position");z=g.get(y.data);if(null==z){z=v.length/3;for(A=y.offsetIdx;A<y.data.length;A+=y.strideIdx)v.push(y.data[A+0]),v.push(y.data[A+1]),v.push(y.data[A+2]);g.set(y.data,z)}if(u)for(B=0;B<u.length;B++)x[w++]=z+u[B]}D=l||a.geometryRecords[0];
C=this.computeModelTransformWithLocalOrigin(a,D,e.mat4f64.create());K=D.origin;for(q=0;q<a.geometryRecords.length;q++)a.geometryRecords[q].origin=K;P={position:{data:v,offsetIdx:0,strideIdx:3},indices:x,modelTransform:C,origin:K};return[4,this.addNonPreinterleaved(a,d,P,c[0],f)];case 1:return k.sent(),[2]}})})};c.prototype.acquireRenderer=function(a,b){var d=C.EdgeRenderer.getKey(a,b),c=this.renderers.get(d);this.strokesTexture||(this.strokesTexture=E.generateStrokesTexture(this.rctx));c||(c=new C.EdgeRenderer(this.rctx,
this.programRepository,{type:a,slicePlaneEnabled:b,strokesTexture:this.strokesTexture}),this.renderers.set(d,c));c.refCount.increment();return c};c.prototype.removeRenderable=function(a){var b=this.renderers.get(a.rendererKey);b.removeRenderable(a);b.refCount.decrement();this.disposeEdgeResources(a);this.localOrigins.release(a.transform.origin);this.gpuMemoryUsage-=a.statistics.gpuMemoryUsage;for(var b=0,d=a.components.meta;b<d.length;b++)a.components.buffer.releaseIndex(d[b].index)};c.prototype.updateObjectCameraDistances=
function(a){var b=this;a=a.viewInvTransp;m.vec3.set(this.tmpCameraPosition,a[3],a[7],a[11]);this.perObjectData.forEach(function(a,d){var c=m.vec3.distance(d.getCenter(),b.tmpCameraPosition);a.renderables.forEach(function(a){return a.distanceToCamera=c})})};c.prototype.renderRegularEdges=function(a,b,d){var c=this;a.bindRegularEdges(b,d);a.forEachRenderable(function(e){if(e.visible&&e.regular&&!e.allTransparent){var f=H.computeEdgeCount(e.regular.lod.lengths,e.distanceToCamera,d);b.view=c.localOrigins.getViewMatrix(e.transform.origin);
a.renderRegularEdges(e,b,f);c.numberOfRenderedEdges+=f}})};c.prototype.renderSilhouetteEdges=function(a,b,d){var c=this;a.bindSilhouetteEdges(b,d);a.forEachRenderable(function(e){if(e.visible&&e.silhouette&&!e.allTransparent){var f=H.computeEdgeCount(e.silhouette.lod.lengths,e.distanceToCamera,d);b.view=c.localOrigins.getViewMatrix(e.transform.origin);a.renderSilhouetteEdges(e,b,f);c.numberOfRenderedEdges+=f}})};return c}();c.EdgeView=T;var N={color:u.vec4f64.fromValues(0,0,0,.2),size:1,extensionLength:0,
opacity:1},S={color:u.vec4f64.fromValues(0,0,0,.2),size:1,extensionLength:0,opacity:1}})},"esri/views/3d/support/buffer/utils":function(){define("require exports ./types ./utils/mat3 ./utils/mat4 ./utils/scalar ./utils/vec2 ./utils/vec3 ./utils/vec4".split(" "),function(p,c,n,l,k,d,h,g,f){Object.defineProperty(c,"__esModule",{value:!0});c.mat3=l;c.mat4=k;c.scalar=d;c.vec2=h;c.vec3=g;c.vec4=f;c.createBuffer=function(b,a){return new b(new ArrayBuffer(a*b.ElementCount*n.elementTypeSize(b.ElementType)))}})},
"esri/views/3d/support/buffer/utils/mat3":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});c.copy=function(c,l,k){var d=c.typedBuffer;c=c.typedBufferStride;var h=l.typedBuffer,g=l.typedBufferStride;l=k?k.count:l.count;var f=(k&&k.dstIndex?k.dstIndex:0)*c;k=(k&&k.srcIndex?k.srcIndex:0)*g;for(var b=0;b<l;++b){for(var a=0;9>a;++a)d[f+a]=h[k+a];f+=c;k+=g}}})},"esri/views/3d/support/buffer/utils/mat4":function(){define(["require","exports"],function(p,
c){Object.defineProperty(c,"__esModule",{value:!0});c.copy=function(c,l,k){var d=c.typedBuffer;c=c.typedBufferStride;var h=l.typedBuffer,g=l.typedBufferStride;l=k?k.count:l.count;var f=(k&&k.dstIndex?k.dstIndex:0)*c;k=(k&&k.srcIndex?k.srcIndex:0)*g;for(var b=0;b<l;++b){for(var a=0;16>a;++a)d[f+a]=h[k+a];f+=c;k+=g}}})},"esri/views/3d/support/buffer/utils/scalar":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});c.copy=function(c,l,k){var d=c.typedBuffer;
c=c.typedBufferStride;var h=l.typedBuffer,g=l.typedBufferStride;l=k?k.count:l.count;var f=(k&&k.dstIndex?k.dstIndex:0)*c;k=(k&&k.srcIndex?k.srcIndex:0)*g;for(var b=0;b<l;++b)d[f]=h[k],f+=c,k+=g};c.makeDense=function(c,l){var k=c.count;l||(l=new c.TypedArrayConstructor(k));for(var d=0;d<k;d++)l[d]=c.get(d);return l}})},"esri/views/3d/support/buffer/utils/vec2":function(){define(["require","exports","../types"],function(p,c,n){function l(c,d,h){var g=c.typedBuffer;c=c.typedBufferStride;var f=d.typedBuffer,
b=d.typedBufferStride;d=h?h.count:d.count;var a=(h&&h.dstIndex?h.dstIndex:0)*c;h=(h&&h.srcIndex?h.srcIndex:0)*b;for(var e=0;e<d;++e)g[a]=f[h],g[a+1]=f[h+1],a+=c,h+=b}Object.defineProperty(c,"__esModule",{value:!0});c.copy=l;c.normalizeIntegerBuffer=function(c,d,h){var g=c.typedBuffer,f=c.typedBufferStride,b=d.typedBuffer,a=d.typedBufferStride,e=h?h.count:d.count,m=(h&&h.dstIndex?h.dstIndex:0)*f,k=(h&&h.srcIndex?h.srcIndex:0)*a;if(n.isInteger(d.elementType))if(h=n.maximumValue(d.elementType),n.isSigned(d.elementType))for(d=
0;d<e;++d)g[m]=Math.max(b[k]/h,-1),g[m+1]=Math.max(b[k+1]/h,-1),m+=f,k+=a;else for(d=0;d<e;++d)g[m]=b[k]/h,g[m+1]=b[k+1]/h,m+=f,k+=a;else l(c,d,h);return c}})},"esri/views/3d/support/buffer/utils/vec3":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});c.copy=function(c,l,k){var d=c.typedBuffer;c=c.typedBufferStride;var h=l.typedBuffer,g=l.typedBufferStride;l=k?k.count:l.count;var f=(k&&k.dstIndex?k.dstIndex:0)*c;k=(k&&k.srcIndex?k.srcIndex:0)*g;
for(var b=0;b<l;++b)d[f]=h[k],d[f+1]=h[k+1],d[f+2]=h[k+2],f+=c,k+=g}})},"esri/views/3d/support/buffer/utils/vec4":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});c.copy=function(c,l,k){var d=c.typedBuffer;c=c.typedBufferStride;var h=l.typedBuffer,g=l.typedBufferStride;l=k?k.count:l.count;var f=(k&&k.dstIndex?k.dstIndex:0)*c;k=(k&&k.srcIndex?k.srcIndex:0)*g;for(var b=0;b<l;++b)d[f]=h[k],d[f+1]=h[k+1],d[f+2]=h[k+2],d[f+3]=h[k+3],f+=c,k+=g};c.fill=
function(c,l,k,d,h,g){var f=c.typedBuffer,b=c.typedBufferStride;c=g?g.count:c.count;g=(g&&g.dstIndex?g.dstIndex:0)*b;for(var a=0;a<c;++a)f[g]=l,f[g+1]=k,f[g+2]=d,f[g+3]=h,g+=b}})},"esri/views/3d/webgl-engine/lib/localOriginHelper":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});c.applyToModelMatrix=function(c,l){var k=-c[0],d=-c[1];c=-c[2];var h=l[3],g=l[7],f=l[11],b=l[15];l[0]+=h*k;l[1]+=h*d;l[2]+=h*c;l[4]+=g*k;l[5]+=g*d;l[6]+=g*c;l[8]+=f*k;
l[9]+=f*d;l[10]+=f*c;l[12]+=b*k;l[13]+=b*d;l[14]+=b*c};c.applyToViewMatrix=function(c,l){var k=c[0],d=c[1];c=c[2];l[12]+=k*l[0]+d*l[4]+c*l[8];l[13]+=k*l[1]+d*l[5]+c*l[9];l[14]+=k*l[2]+d*l[6]+c*l[10];l[14]+=k*l[3]+d*l[7]+c*l[11]}})},"esri/views/3d/webgl-engine/lib/LocalOriginManager":function(){define(["require","exports","../../../../core/libs/gl-matrix-2/mat4","../../../../core/libs/gl-matrix-2/mat4f64","./localOriginHelper"],function(p,c,n,l,k){Object.defineProperty(c,"__esModule",{value:!0});p=
function(){function d(d){this.factory=d;this.originData=new Map}d.prototype.acquire=function(d){return this.register(this.factory.getOrigin(d))};d.prototype.register=function(d){var c=this.originData.get(d.id);if(c)return c.refCount++,c.origin;this.originData.set(d.id,{refCount:1,viewMatrix:l.mat4f64.create(),origin:d});return d};d.prototype.release=function(d){var c=this.originData.get(d.id);c&&(c.refCount--,0===c.refCount&&this.originData.delete(d.id))};d.prototype.updateViewMatrices=function(d){this.originData.forEach(function(c){n.mat4.copy(c.viewMatrix,
d);k.applyToViewMatrix(c.origin.vec3,c.viewMatrix)})};d.prototype.getViewMatrix=function(d){return this.originData.get(d.id).viewMatrix};return d}();c.LocalOriginManager=p})},"esri/views/3d/webgl-engine/lib/PreinterleavedGeometryData":function(){define(["require","exports","./ComponentUtils","./geometryDataUtils","../../../webgl/Util"],function(p,c,n,l,k){function d(d){switch(d){case 5120:return Int8Array;case 5126:return Float32Array;case 5124:return Int32Array;case 5122:return Int16Array;case 5121:return Uint8Array;
case 5125:return Uint32Array;case 5123:return Uint16Array}throw Error("Unhandled data type: "+d);}return function(){function c(g,f,b,a,e){void 0===b&&(b=null);void 0===a&&(a=c.DefaultOffsets);void 0===e&&(e=c.DefaultIndices);this.preinterleaved=!0;this.primitiveType="triangle";this._positionData=null;var m=k.getStride(f)/4,m=g.length/m;this._hasDefaultIndices=e===c.DefaultIndices;this.indexCount=e.length;this._hasDefaultIndices&&(e=l.generateDefaultIndexArray(m),this.indexCount=m);for(var m={},h=
0;h<f.length;h++){var u=f[h],t=new (d(u.type))(g.buffer),r=k.getBytesPerElement(u.type);m[u.name]={data:t,size:u.count,offsetIdx:u.offset/r,strideIdx:u.stride/r}}b&&(this._positionData=b,m.position={data:b.data,size:3,offsetIdx:0,strideIdx:3});this._id=l.getNewId();this._vertexData=g;this._vertexAttributes=m;this._layout=f;this._indexData=e;this._componentOffsets=n.createOffsets(a);this._gpuMemoryUsage=g.byteLength+(this._hasDefaultIndices?0:e.byteLength)}Object.defineProperty(c.prototype,"id",{get:function(){return this._id},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"componentOffsets",{get:function(){return this._componentOffsets},enumerable:!0,configurable:!0});c.prototype.toRenderData=function(){var d={id:this._id.toString(),preinterleaved:!0,indexData:this._hasDefaultIndices?null:this._indexData,indexCount:this.indexCount,vertexData:this._vertexData,layout:this._layout};this._indexData=
this._vertexData=null;this._vertexAttributes={position:this._vertexAttributes.position};return d};c.prototype.getIndices=function(d){return"position"===d&&this._positionData?this._positionData.indices:this._indexData};c.prototype.getAttribute=function(d){return this._vertexAttributes[d]};c.prototype.estimateGpuMemoryUsage=function(){return this._gpuMemoryUsage};Object.defineProperty(c.prototype,"hasPositionData",{get:function(){return!!this._positionData},enumerable:!0,configurable:!0});c.DefaultOffsets=
new Uint32Array(0);c.DefaultIndices=new Uint32Array(0);return c}()})},"esri/views/3d/webgl-engine/lib/TextureBackedBuffer/BufferManager":function(){define(["require","exports","./ManagedTextureBackedBuffer"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(c,d){void 0===d&&(d=1);this.rctx=c;this.fieldCount=d;this.buffers=[]}c.prototype.garbageCollect=function(){this.buffers=this.buffers.filter(function(c){return 0===c.activeCount?(c.dispose(),!1):!0})};c.prototype.getBuffer=
function(c){for(var d=0,h=this.buffers;d<h.length;d++){var g=h[d];if(g.availableCount>=c)return g}if(c>n.MAX_INDEX_COUNT)return null;c=new n.ManagedTextureBackedBuffer(this.rctx,this.fieldCount);this.buffers.push(c);return c};c.prototype.updateTextures=function(){for(var c=0,d=this.buffers;c<d.length;c++)d[c].textureBuffer.updateTexture()};return c}();c.BufferManager=p})},"esri/views/3d/webgl-engine/lib/TextureBackedBuffer/ManagedTextureBackedBuffer":function(){define(["require","exports","./SimpleIndexManager",
"./TextureBackedBuffer"],function(p,c,n,l){Object.defineProperty(c,"__esModule",{value:!0});c.MAX_INDEX_COUNT=65536;p=function(){function k(d,h){void 0===h&&(h=1);this.textureBuffer=new l.TextureBackedBuffer(d,h);this.indexManager=new n.SimpleIndexManager(c.MAX_INDEX_COUNT)}k.prototype.dispose=function(){this.textureBuffer.dispose();this.textureBuffer=void 0};Object.defineProperty(k.prototype,"availableCount",{get:function(){return this.indexManager.availableCount},enumerable:!0,configurable:!0});
Object.defineProperty(k.prototype,"activeCount",{get:function(){return this.indexManager.activeCount},enumerable:!0,configurable:!0});k.prototype.acquireIndex=function(){var d=this.indexManager.acquire();this.textureBuffer.resizeToFit(d);return d};k.prototype.releaseIndex=function(d){this.indexManager.release(d)};return k}();c.ManagedTextureBackedBuffer=p})},"esri/views/3d/webgl-engine/lib/TextureBackedBuffer/SimpleIndexManager":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,
"__esModule",{value:!0});p=function(){function c(c){this.maxCount=c;this._nextIndex=0;this.recycledIndices=[]}Object.defineProperty(c.prototype,"activeCount",{get:function(){return this._nextIndex-this.recycledIndices.length},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"availableCount",{get:function(){return this.recycledIndices.length+this.maxCount-this._nextIndex},enumerable:!0,configurable:!0});c.prototype.acquire=function(){if(0<this.recycledIndices.length)return this.recycledIndices.pop();
if(this.availableCount)return this._nextIndex++};c.prototype.release=function(c){this.recycledIndices.push(c)};return c}();c.SimpleIndexManager=p})},"esri/views/3d/webgl-engine/lib/TextureBackedBuffer/TextureBackedBuffer":function(){define(["require","exports","../../../support/buffer/BufferView","../../../../webgl/Texture"],function(p,c,n,l){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(d,c){void 0===c&&(c=1);this.rctx=d;this.fieldCount=c;this.textureWidth=4096;this.dirty=
!0;this.texture=new l(this.rctx,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:this.textureWidth,height:1,flipped:!1});this.data=new n.BufferViewVec4u8(new ArrayBuffer(4*this.textureWidth))}c.prototype.dispose=function(){this.texture.dispose();this.data=this.texture=void 0};c.prototype.setData=function(d,c,g,f,b,a){d=d*this.fieldCount+c;this.dirty=!0;this.data.set(d,0,g);this.data.set(d,1,f);this.data.set(d,2,b);this.data.set(d,3,a)};c.prototype.setDataElement=
function(d,c,g,f){d=d*this.fieldCount+c;this.dirty=!0;this.data.set(d,g,f)};c.prototype.resizeToFit=function(d){d*=this.fieldCount;d>=this.data.count&&(d=new n.BufferViewVec4u8(new ArrayBuffer(Math.ceil((d+1)/this.textureWidth)*this.textureWidth*4)),d.typedBuffer.set(this.data.typedBuffer),this.data=d)};c.prototype.updateTexture=function(){if(this.dirty){var d=this.texture.descriptor.width;this.data.count>d*this.texture.descriptor.height&&this.texture.resize(d,this.data.count/d);this.texture.setData(this.data.typedBuffer);
this.dirty=!1}};c.prototype.bind=function(d,c){this.rctx.bindTexture(this.texture,c.unit);d.setUniform1i(c.texName,c.unit);d.setUniform2f(c.invDimName,1/this.texture.descriptor.width,1/this.texture.descriptor.height)};return c}();c.TextureBackedBuffer=p})},"esri/views/3d/webgl-engine/lib/edgeRendering/bufferLayouts":function(){define(["require","exports","../../../support/buffer/glUtil","../../../support/buffer/InterleavedLayout"],function(p,c,n,l){Object.defineProperty(c,"__esModule",{value:!0});
c.EdgeInputBufferLayout=l.newLayout().vec3f("position").u16("componentIndex").u16("_padding");c.VertexLayout=l.newLayout().vec2u8("sideness");c.glVertexLayout=n.glLayout(c.VertexLayout,{prefixA:!0});c.CommonInstancesLayout=l.newLayout().vec3f("position0").vec3f("position1").u16("componentIndex").vec2u8("packedAttributes").u8("variantOffset",{glNormalized:!0}).u8("variantStroke").u8("variantExtension",{glNormalized:!0}).u8("_padding",{glPadding:!0});c.RegularEdgeInstancesLayout=c.CommonInstancesLayout.clone().vec3f("normal");
c.SilhouetteEdgeInstancesLayout=c.CommonInstancesLayout.clone().vec3f("normalA").vec3f("normalB");c.EdgeShaderAttributeLocations={aPosition0:0,aPosition1:1,aComponentIndex:2,aPackedAttributes:3,aVariantOffset:4,aVariantStroke:5,aVariantExtension:6,aNormal:7,aNormalA:7,aNormalB:8,aSideness:9}})},"esri/views/3d/webgl-engine/lib/edgeRendering/edgeBufferWriters":function(){define("require exports ../../../../../core/tsSupport/assignHelper ../../../../../core/tsSupport/extendsHelper ../../../../../core/RandomLCG ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../support/buffer/glUtil ./bufferLayouts".split(" "),
function(p,c,n,l,k,d,h,g,f){Object.defineProperty(c,"__esModule",{value:!0});var b=function(){function b(){}b.prototype.updateSettings=function(a){this.settings=a};b.prototype.write=function(b,d,c){var f=a;f[0]=c.position0[0];f[1]=c.position0[1];f[2]=c.position0[2];f[3]=c.position1[0];f[4]=c.position1[1];f[5]=c.position1[2];m[0]=5381;for(f=0;f<e.length;f++)m[0]=31*m[0]+e[f];q.seed=m[0];var f=q.getIntRange(0,255),g=q.getIntRange(0,this.settings.variants-1),h=q.getFloat(),h=-(1-Math.min(h/.7,1))+Math.max(0,
h-.7)/(1-.7),h=255*(Math.pow(Math.abs(h),1.2)*(0>h?-1:1)*.5+.5);b.position0.setVec(d,c.position0);b.position1.setVec(d,c.position1);b.componentIndex.set(d,c.componentIndex);b.variantOffset.set(d,f);b.variantStroke.set(d,g);b.variantExtension.set(d,h)};b.prototype.trim=function(a,b){return a.slice(0,b)};return b}();c.CommonBufferWriter=b;var a=new Float32Array(6),e=new Uint32Array(a.buffer),m=new Uint32Array(1),q=new k;p=function(){function a(){this.commonWriter=new b}a.prototype.updateSettings=function(a){this.commonWriter.updateSettings(a)};
a.prototype.allocate=function(a){return f.RegularEdgeInstancesLayout.createBuffer(a)};a.prototype.write=function(a,b,c){this.commonWriter.write(a,b,c);d.vec3.add(u,c.faceNormal0,c.faceNormal1);d.vec3.normalize(u,u);a.normal.setVec(b,u)};a.prototype.trim=function(a,b){return this.commonWriter.trim(a,b)};a.Layout=f.RegularEdgeInstancesLayout;a.glLayout=g.glLayout(f.RegularEdgeInstancesLayout,{prefixA:!0,divisor:1});return a}();c.RegularEdgeBufferWriter=p;p=function(){function a(){this.commonWriter=
new b}a.prototype.updateSettings=function(a){this.commonWriter.updateSettings(a)};a.prototype.allocate=function(a){return f.SilhouetteEdgeInstancesLayout.createBuffer(a)};a.prototype.write=function(a,b,d){this.commonWriter.write(a,b,d);a.normalA.setVec(b,d.faceNormal0);a.normalB.setVec(b,d.faceNormal1)};a.prototype.trim=function(a,b){return this.commonWriter.trim(a,b)};a.Layout=f.SilhouetteEdgeInstancesLayout;a.glLayout=g.glLayout(f.SilhouetteEdgeInstancesLayout,{prefixA:!0,divisor:1});return a}();
c.SilhouetteEdgeBufferWriter=p;var u=h.vec3f64.create()})},"esri/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker":function(){define("require exports ../../../../../core/tsSupport/awaiterHelper ../../../../../core/tsSupport/generatorHelper ../../../../../core/typedArrayUtil ../../../../../geometry/support/meshUtils/deduplicate ../../../support/meshProcessing ../../../support/buffer/workerHelper ./bufferLayouts ./edgeBufferWriters ./edgePreprocessing".split(" "),function(p,c,n,l,k,d,h,
g,f,b,a){return function(){function c(){this.regularWriter=new b.RegularEdgeBufferWriter;this.silhouetteWriter=new b.SilhouetteEdgeBufferWriter}c.prototype.process=function(a,b){return n(this,void 0,void 0,function(){var d,c,e;return l(this,function(f){switch(f.label){case 0:if(!b)return[3,2];d=[];c=this.packInput(a,d);this.wrappedWork;return[4,b.invoke("wrappedWork",c,{transferList:d})];case 1:return e=f.sent(),[2,this.unpackOutput(e)];case 2:return[2,this.work(a)]}})})};c.prototype.wrappedWork=
function(a){return n(this,void 0,void 0,function(){var b,d,c,e;return l(this,function(f){b=this.unpackInput(a);d=this.work(b);c=[];this.packInputTransferables(b,c);e=this.packOutput(d,c);return[2,{result:e,transferList:c}]})})};c.prototype.work=function(b){var d=this.extractEdgeInformation(b.data,b.skipDeduplicate,b.originalIndices);this.regularWriter.updateSettings(b.writerSettings);this.silhouetteWriter.updateSettings(b.writerSettings);return a.extractEdges(d,this.regularWriter,this.silhouetteWriter)};
c.prototype.packInputTransferables=function(a,b){b.push(a.data.buffer)};c.prototype.packInput=function(a,b){this.packInputTransferables(a,b);b={dataBuffer:a.data.buffer,writerSettings:a.writerSettings,skipDeduplicate:a.skipDeduplicate};a.originalIndices&&(b.originalIndicesBuffer=a.originalIndices.buffer,b.originalIndicesType=k.isUint32Array(a.originalIndices)?"Uint32Array":"Uint16Array");return b};c.prototype.unpackInput=function(a){return{data:f.EdgeInputBufferLayout.createView(a.dataBuffer),originalIndices:"Uint32Array"===
a.originalIndicesType?new Uint32Array(a.originalIndicesBuffer):"Uint16Array"===a.originalIndicesType?new Uint16Array(a.originalIndicesBuffer):void 0,writerSettings:a.writerSettings,skipDeduplicate:a.skipDeduplicate}};c.prototype.packOutput=function(a,b){b.push(a.regular.lodInfo.lengths.buffer);b.push(a.silhouette.lodInfo.lengths.buffer);return{regular:{instancesData:g.packInterleavedBuffer(a.regular.instancesData,b),lodInfo:{lengths:a.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:g.packInterleavedBuffer(a.silhouette.instancesData,
b),lodInfo:{lengths:a.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:a.averageEdgeLength}};c.prototype.unpackOutput=function(a){return{regular:{instancesData:g.unpackInterleavedBuffer(a.regular.instancesData),lodInfo:{lengths:new Float32Array(a.regular.lodInfo.lengths)}},silhouette:{instancesData:g.unpackInterleavedBuffer(a.silhouette.instancesData),lodInfo:{lengths:new Float32Array(a.silhouette.lodInfo.lengths)}},averageEdgeLength:a.averageEdgeLength}};c.prototype.extractEdgeInformation=function(a,
b,c){if(b&&c)return b=h.computeNeighbors(c,a.count),{faces:c,neighbors:b,vertices:a};a=d.default(a.buffer,a.stride/4,c);b=h.computeNeighbors(a.indices,a.uniqueCount);return{faces:a.indices,neighbors:b,vertices:f.EdgeInputBufferLayout.createView(a.buffer)}};return c}()})},"esri/views/3d/support/meshProcessing":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});c.computeNeighbors=function(c,l){for(var k=c.length/3,d=new Uint32Array(l+1),h=new Uint32Array(l+
1),g=function(a,b){a<b?d[a+1]++:h[b+1]++},f=0;f<k;f++){var b=c[3*f],a=c[3*f+1],e=c[3*f+2];g(b,a);g(a,e);g(e,b)}for(f=a=b=0;f<l;f++)e=d[f+1],g=h[f+1],d[f+1]=b,h[f+1]=a,b+=e,a+=g;for(var m=new Uint32Array(6*k),q=d[l],g=function(a,b,c){if(a<b){var e=d[a+1]++;m[2*e]=b;m[2*e+1]=c}else e=h[b+1]++,m[2*q+2*e]=a,m[2*q+2*e+1]=c},f=0;f<k;f++)b=c[3*f],a=c[3*f+1],e=c[3*f+2],g(b,a,f),g(a,e,f),g(e,b,f);b=function(a,b){var d=2*a;a=b-a;for(b=1;b<a;b++){var c=m[d+2*b],e=m[d+2*b+1],f=b-1;for(f;0<=f&&m[d+2*f]>c;f--)m[d+
2*f+2]=m[d+2*f],m[d+2*f+3]=m[d+2*f+1];m[d+2*f+2]=c;m[d+2*f+3]=e}};for(f=0;f<l;f++)b(d[f],d[f+1]),b(q+h[f],q+h[f+1]);for(var n=new Int32Array(3*k),t=function(a,b){return a===c[3*b]?0:a===c[3*b+1]?1:a===c[3*b+2]?2:-1},k=function(a,b){a=t(a,b);n[3*b+a]=-1},b=function(a,b,d,c){a=t(a,b);n[3*b+a]=c;d=t(d,c);n[3*c+d]=b},f=0;f<l;f++){for(var a=d[f],e=d[f+1],g=h[f],r=h[f+1];a<e&&g<r;){var x=m[2*a],w=m[2*q+2*g];x===w?(b(f,m[2*a+1],w,m[2*q+2*g+1]),a++,g++):x<w?(k(f,m[2*a+1]),a++):(k(w,m[2*q+2*g+1]),g++)}for(;a<
e;)k(f,m[2*a+1]),a++;for(;g<r;)w=m[2*q+2*g],k(w,m[2*q+2*g+1]),g++}return n}})},"esri/views/3d/support/buffer/workerHelper":function(){define(["require","exports","../../../../core/tsSupport/assignHelper","./BufferView","./InterleavedLayout"],function(p,c,n,l,k){function d(d){var b=[];d.fields.forEach(function(a,d){var c=a.constructor;a=n({},a,{constructor:c.ElementType+"_"+c.ElementCount});b.push([d,a])});return{stride:d.stride,fields:b,fieldNames:d.fieldNames}}function h(d){var b=k.newLayout();b.stride=
d.stride;b.fieldNames=d.fieldNames;d.fields.forEach(function(a){return b.fields.set(a[0],n({},a[1],{constructor:g.get(a[1].constructor)}))});return b}Object.defineProperty(c,"__esModule",{value:!0});c.packInterleavedBuffer=function(c,b){b.push(c.buffer);return{buffer:c.buffer,layout:d(c.layout)}};c.unpackInterleavedBuffer=function(d){return h(d.layout).createView(d.buffer)};c.packLayout=d;c.unpackLayout=h;p=[l.BufferViewFloat,l.BufferViewVec2f,l.BufferViewVec3f,l.BufferViewVec4f,l.BufferViewMat3f,
l.BufferViewMat4f,l.BufferViewFloat64,l.BufferViewVec2f64,l.BufferViewVec3f64,l.BufferViewVec4f64,l.BufferViewMat3f64,l.BufferViewMat4f64,l.BufferViewUint8,l.BufferViewVec2u8,l.BufferViewVec3u8,l.BufferViewVec4u8,l.BufferViewUint16,l.BufferViewVec2u16,l.BufferViewVec3u16,l.BufferViewVec4u16,l.BufferViewUint32,l.BufferViewVec2u32,l.BufferViewVec3u32,l.BufferViewVec4u32,l.BufferViewInt8,l.BufferViewVec2i8,l.BufferViewVec3i8,l.BufferViewVec4i8,l.BufferViewInt16,l.BufferViewVec2i16,l.BufferViewVec3i16,
l.BufferViewVec4i16,l.BufferViewInt32,l.BufferViewVec2i32,l.BufferViewVec3i32,l.BufferViewVec4i32];var g=new Map;p.forEach(function(d){return g.set(d.ElementType+"_"+d.ElementCount,d)})})},"esri/views/3d/webgl-engine/lib/edgeRendering/edgePreprocessing":function(){define("require exports ../../../../../core/arrayUtils ../../../../../core/typedArrayUtil ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../support/mathUtils".split(" "),function(p,c,n,l,k,d,
h){function g(b,d){var c=h.acos(b.cosAngle),e=a.fwd,f=a.ortho;h.directionFromTo(e,b.position1,b.position0);b=0<k.vec3.dot(k.vec3.cross(f,b.faceNormal0,b.faceNormal1),e)?-1:1;return c*b>d}function f(a){var b=a.faces.length/3,d=a.faces;a=a.neighbors;for(var c=0,e=0;e<b;e++)var f=a[3*e+0],g=a[3*e+1],m=a[3*e+2],h=d[3*e+0],k=d[3*e+1],l=d[3*e+2],c=c+(-1===f||h<k?1:0),c=c+(-1===g||k<l?1:0),c=c+(-1===m||l<h?1:0);for(var c=new Int32Array(4*c),q=0,e=0;e<b;e++){f=a[3*e+0];g=a[3*e+1];m=a[3*e+2];h=d[3*e+0];k=
d[3*e+1];l=d[3*e+2];if(-1===f||h<k)c[q++]=h,c[q++]=k,c[q++]=e,c[q++]=f;if(-1===g||k<l)c[q++]=k,c[q++]=l,c[q++]=e,c[q++]=g;if(-1===m||l<h)c[q++]=l,c[q++]=h,c[q++]=e,c[q++]=m}return c}function b(a){var b=a.faces.length/3,d=a.vertices.position;a=a.faces;for(var c=e.v0,f=e.v1,g=e.v2,m=new Float32Array(3*b),h=0;h<b;h++){var l=a[3*h+1],q=a[3*h+2];d.getVec(a[3*h+0],c);d.getVec(l,f);d.getVec(q,g);k.vec3.subtract(f,f,c);k.vec3.subtract(g,g,c);k.vec3.cross(c,f,g);k.vec3.normalize(c,c);m[3*h+0]=c[0];m[3*h+1]=
c[1];m[3*h+2]=c[2]}return m}Object.defineProperty(c,"__esModule",{value:!0});c.extractEdges=function(d,c,e,r){void 0===r&&(r=m);var q=d.vertices.position,t=d.vertices.componentIndex,u=h.deg2rad(r.anglePlanar);r=h.deg2rad(r.angleSignificantEdge);var p=Math.cos(r),z=Math.cos(u),A=a.edge,B=A.position0,D=A.position1,C=A.faceNormal0,E=A.faceNormal1,H=b(d),G=f(d),I=G.length/4;d=c.allocate(I);r=0;var K=e.allocate(I),M=0,T=0,N=0,S=n.range(0,I),O=new Float32Array(I);l.forEach(O,function(a,b,d){q.getVec(G[4*
b+0],B);q.getVec(G[4*b+1],D);d[b]=k.vec3.distance(B,D)});S.sort(function(a,b){return O[b]-O[a]});for(var V=[],Q=[],J=0;J<I;J++){var P=S[J],L=O[P],F=G[4*P+0],Y=G[4*P+1],X=G[4*P+2],P=G[4*P+3],R=-1===P;q.getVec(F,B);q.getVec(Y,D);if(R)k.vec3.set(C,H[3*X+0],H[3*X+1],H[3*X+2]),k.vec3.copy(E,C),A.componentIndex=t.get(F),A.cosAngle=k.vec3.dot(C,E);else{k.vec3.set(C,H[3*X+0],H[3*X+1],H[3*X+2]);k.vec3.set(E,H[3*P+0],H[3*P+1],H[3*P+2]);A.componentIndex=t.get(F);A.cosAngle=k.vec3.dot(C,E);if(A.cosAngle>z)continue;
-.9999>A.cosAngle&&k.vec3.copy(E,C)}T+=L;N++;R||A.cosAngle<p?(c.write(d,r++,A),V.push(L)):g(A,u)&&(e.write(K,M++,A),Q.push(L))}t=new Float32Array(V.reverse());u=new Float32Array(Q.reverse());return{regular:{instancesData:c.trim(d,r),lodInfo:{lengths:t}},silhouette:{instancesData:e.trim(K,M),lodInfo:{lengths:u}},averageEdgeLength:T/N}};var a={edge:{position0:d.vec3f64.create(),position1:d.vec3f64.create(),faceNormal0:d.vec3f64.create(),faceNormal1:d.vec3f64.create(),componentIndex:0,cosAngle:0},ortho:d.vec3f64.create(),
fwd:d.vec3f64.create()},e={v0:d.vec3f64.create(),v1:d.vec3f64.create(),v2:d.vec3f64.create()},m={anglePlanar:4,angleSignificantEdge:35}})},"esri/views/3d/webgl-engine/lib/edgeRendering/EdgeRenderer":function(){define("require exports ../../../../../core/tsSupport/assignHelper ../../../../../core/tsSupport/extendsHelper ../../../../../core/libs/gl-matrix-2/mat3 ../../../../../core/libs/gl-matrix-2/mat3f64 ../../../support/mathUtils ../../materials/internal/MaterialUtil ../../shaders/EdgeRendererPrograms".split(" "),
function(p,c,n,l,k,d,h,g,f){Object.defineProperty(c,"__esModule",{value:!0});c.LINE_WIDTH_FRACTION_FACTOR=8;c.EXTENSION_LENGTH_OFFSET=128;var b={type:"uber",slicePlaneEnabled:!1,strokesTexture:null},a=function(){function a(){this._value=0}Object.defineProperty(a.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0});a.prototype.increment=function(){this._value++};a.prototype.decrement=function(){this._value--};return a}();p=function(){function e(c,f,g){this.rctx=c;this.programRepository=
f;this.refCount=new a;this.renderables=new Set;this.depthBiasZ=-4E-4;this.depthBiasXY=.5;this.tmpViewToWorldNormalMatrix=d.mat3f64.create();this.settings=n({},b,g);this.key=e.getKey(this.settings.type,this.settings.slicePlaneEnabled);this.writerSettings={variants:this.settings.strokesTexture.variants};this.createPrograms()}e.prototype.dispose=function(){for(var a in this.programs){var b=this.programs[a];b&&(this.programRepository.decreaseRefCount(b),this.programs[a]=null)}};e.prototype.addRenderable=
function(a){this.renderables.add(a)};e.prototype.removeRenderable=function(a){this.renderables.delete(a)};e.prototype.forEachRenderable=function(a){this.renderables.forEach(a)};e.prototype.bindRegularEdges=function(a,b){this.bind(this.programs.regular,a,b)};e.prototype.bindSilhouetteEdges=function(a,b){this.bind(this.programs.silhouette,a,b)};e.prototype.bind=function(a,b,d){this.rctx.bindProgram(a);a.setUniformMatrix4fv("uProj",b.proj);a.setUniform2f("uDepthBias",this.depthBiasXY,this.depthBiasZ);
a.setUniform2f("uPixelToNDC",2/b.viewport[2],2/b.viewport[3]);a.setUniform2f("uNDCToPixel",b.viewport[2]/2,b.viewport[3]/2);a.setUniform1f("uDistanceFalloffFactor",d.distanceFalloffFactor);a.setUniform2f("uViewportDimInv",1/b.viewport[2],1/b.viewport[3]);a.setUniform1f("uPixelRatio",b.pixelRatio||1)};e.prototype.renderRegularEdges=function(a,b,d){this.render(this.programs.regular,a,a.regular.vao,b,d)};e.prototype.renderSilhouetteEdges=function(a,b,d){this.render(this.programs.silhouette,a,a.silhouette.vao,
b,d)};e.prototype.render=function(a,b,d,c,e){this.setUniforms(a,b,c);a=this.rctx;a.bindVAO(d);a.capabilities.instancing.drawArraysInstanced(6,0,4,e)};e.prototype.setUniforms=function(a,b,d){b.components.buffer.textureBuffer.bind(a,c.componentDataBindParameters);a.setUniformMatrix4fv("uView",d.view);a.setUniformMatrix4fv("uModel",b.transform.modelMatrix);var e=d.viewInvTransp,f=k.mat3.fromMat4(this.tmpViewToWorldNormalMatrix,e);a.setUniform3f("uCameraPosition",e[3],e[7],e[11]);a.setUniformMatrix3fv("uViewToWorldNormalMatrix",
f);"uber"!==this.settings.type&&"sketch"!==this.settings.type||this.setSketchUniforms(a);a.setUniform1f("uWorldLineRadiusPerDistance",Math.tan(d.fovY/2)/(d.viewport[3]/2));a.setUniform3fv("uLocalOrigin",b.transform.origin.vec3);this.settings.slicePlaneEnabled&&g.bindSlicePlane(b.transform.origin.vec3,d.slicePlane,a)};e.prototype.setSketchUniforms=function(a){var b=this.settings.strokesTexture,d=b.texture;this.rctx.bindTexture(d,0);a.setUniform1i("uStrokesTexture",0);a.setUniform2f("uStrokesTextureScale",
1/d.descriptor.width,1/d.descriptor.height);a.setUniform1f("uStrokesLog2Resolution",h.log2(b.resolution));a.setUniform1f("uStrokesNormalizationScale",b.normalizationScale);a.setUniform1f("uStrokesAmplitude",b.amplitude);a.setUniform1f("uStrokeVariants",b.variants)};e.prototype.getOptions=function(a){return n({},a,{antialiasing:!!this.rctx.capabilities.blendMinMax,mode:this.settings.type,slice:this.settings.slicePlaneEnabled})};e.prototype.createPrograms=function(){var a=this.programRepository.getProgram(f.program,
this.getOptions({silhouette:!1})),b=this.programRepository.getProgram(f.program,this.getOptions({silhouette:!0}));this.programRepository.increaseRefCount(a);this.programRepository.increaseRefCount(b);this.programs={regular:a,silhouette:b}};e.getKey=function(a,b){return"edges-t:"+a+":"+b};return e}();c.EdgeRenderer=p;c.componentDataBindParameters={texName:"uComponentDataTex",invDimName:"uComponentDataTexInvDim",unit:2}})},"esri/views/3d/webgl-engine/shaders/EdgeRendererPrograms":function(){define(["require",
"exports","./sources/resolver","../../../webgl/programUtils"],function(p,c,n,l){Object.defineProperty(c,"__esModule",{value:!0});var k=function(d){return l.glslifyDefineMap({MODE:{value:d.mode,options:{solid:"MODE_SOLID",sketch:"MODE_SKETCH",uber:"MODE_UBER"}},SILHOUETTE:d.silhouette,ANTIALIASING:d.antialiasing,SLICE:d.slice})};c.program={name:"edges",shaders:function(d){return{vertexShader:k(d)+n.resolveIncludes("edgeRenderer/edgeRenderer.vert"),fragmentShader:k(d)+n.resolveIncludes("edgeRenderer/edgeRenderer.frag")}},
attributes:{aPosition0:0,aPosition1:1,aComponentIndex:2,aPackedAttributes:3,aVariantOffset:4,aVariantStroke:5,aVariantExtension:6,aNormal:7,aNormalA:7,aNormalB:8,aSideness:9}}})},"esri/views/3d/webgl-engine/lib/edgeRendering/strokes":function(){define("require exports ../../../../../core/tsSupport/assignHelper ../../../support/mathUtils ../Util ../../../../webgl/Texture".split(" "),function(p,c,n,l,k,d){function h(b,a){if(!b)return null;var d=b.length/2,c=g*d,d=Array(d),h=0;a=1===a;for(var k=0;k<
b.length;k+=2){var l=(b[k]+b[k+1])/2;a?d[h++]=Math.min(c,1-(1-l)*f):d[h++]=Math.min(c,l*f)}return d}Object.defineProperty(c,"__esModule",{value:!0});c.generateStrokesTexture=function(b){for(var a=c.strokesDefinition.resolution,e=a/2,f=new Uint8Array(4*a*a),g=4*a*e,e=c.strokesDefinition.amplitude,n=2*e,t=4*a,r=l.log2(a)+1,x=c.strokesDefinition.strokes.length,w=(r-1)*x*t,v=0,p=c.strokesDefinition.strokes;v<p.length;v++){for(var z=p[v],A=z.distance,z=z.pressure,B=w,D=0;D<r;D++){0!==D&&(A=h(A,0),z=h(z,
1));for(var C=0;C<c.strokesDefinition.resolution;C++){var E=z?z[C%z.length]:1;k.packFloatRGBA((A?A[C%A.length]/n:0)+.5,f,B);k.packFloatRGBA(E,f,B+g);B+=4}B-=t*(x+1)}w+=t}b=new d(b,{pixelFormat:6408,dataType:5121,hasMipmap:!1,samplingMode:9729,width:a,height:a,wrapMode:10497},f);return{resolution:a,texture:b,normalizationScale:n,amplitude:e,variants:x}};var g=.1,f=.5;c.strokesDefinition={amplitude:8,resolution:256,strokes:[{distance:[-1.59027,-1.59426,-1.59674,-1.59766,-1.59702,-1.59479,-1.59095,-1.5855,
-1.57843,-1.56973,-1.55942,-1.5475,-1.53398,-1.5189,-1.50226,-1.4841,-1.46446,-1.44337,-1.42088,-1.39703,-1.37188,-1.34547,-1.31786,-1.28912,-1.2593,-1.22847,-1.19668,-1.16402,-1.13053,-1.09629,-1.06137,-1.02582,-.98972,-.95313,-.91611,-.87872,-.84102,-.80306,-.76488,-.72654,-.68807,-.64952,-.61092,-.57232,-.53375,-.49527,-.45692,-.41874,-.38078,-.34309,-.3057,-.26867,-.23204,-.19585,-.16015,-.12497,-.09036,-.05634,-.02296,.00977,.04183,.07321,.10389,.13386,.16313,.19169,.21956,.24672,.27321,.299,
.32413,.34858,.37237,.3955,.41798,.43981,.461,.48154,.50145,.52073,.53939,.55744,.57488,.5917,.6079,.62347,.63837,.65259,.66609,.67885,.69083,.70201,.71235,.72183,.73042,.73812,.7449,.75076,.7557,.75973,.76284,.76507,.76642,.76692,.76659,.76545,.76352,.76083,.7574,.75324,.74837,.74279,.73652,.72959,.72199,.71377,.70493,.69553,.68558,.67515,.66426,.65298,.64135,.62944,.6173,.60499,.59257,.58008,.56759,.55513,.54275,.5305,.51842,.50654,.4949,.48353,.47246,.4617,.45128,.44121,.43149,.42213,.41313,.40448,
.39617,.38818,.3805,.37309,.36594,.35902,.35229,.34572,.33927,.33292,.32663,.32035,.31407,.30774,.30135,.29486,.28824,.28148,.27454,.26739,.26002,.25241,.24454,.23639,.22796,.21922,.21016,.20076,.19098,.18082,.17023,.1592,.14768,.13566,.1231,.10996,.09624,.08188,.06688,.05121,.03485,.01778,0,-.0185,-.03771,-.05763,-.07824,-.09952,-.12144,-.14396,-.16706,-.19069,-.21481,-.23938,-.26436,-.28971,-.31539,-.34136,-.36759,-.39404,-.42067,-.44746,-.47437,-.50136,-.52839,-.55544,-.58248,-.60948,-.63642,-.66329,
-.6901,-.71684,-.74352,-.77015,-.79675,-.82332,-.84988,-.87644,-.90301,-.92958,-.95615,-.98272,-1.00926,-1.03575,-1.06217,-1.08847,-1.11463,-1.1406,-1.16633,-1.19178,-1.2169,-1.24164,-1.26595,-1.28979,-1.31312,-1.3359,-1.35809,-1.37963,-1.4005,-1.42064,-1.44,-1.45853,-1.47616,-1.49285,-1.50853,-1.52313,-1.53659,-1.54886,-1.55986,-1.56955,-1.57788,-1.5848],pressure:[-.01365,-.00206,.01025,.02327,.03696,.05129,.06619,.08163,.09755,.11393,.1307,.14784,.16531,.18308,.20111,.21938,.23786,.25651,.2753,
.29419,.31315,.33215,.35115,.37015,.38913,.40806,.42694,.44576,.46449,.48313,.50167,.5201,.53839,.55653,.57448,.59222,.60971,.62692,.6438,.66033,.67648,.69221,.70753,.72242,.73688,.75093,.76456,.77779,.79063,.80309,.81517,.82686,.83817,.84911,.85967,.86987,.87972,.88924,.89845,.90734,.91594,.92425,.93229,.94005,.94754,.95475,.96166,.96826,.97451,.9804,.98588,.99092,.99549,.99957,.99685,.99381,.99131,.98936,.98796,.98711,.98681,.98706,.98787,.98923,.99113,.99357,.99654,1,.99607,.99171,.98695,.98181,
.97634,.97057,.96452,.95824,.95175,.94506,.93818,.93113,.92389,.91647,.90887,.90109,.89314,.88501,.87672,.86831,.85978,.85119,.84256,.83393,.82533,.8168,.80836,.80002,.79181,.78374,.77582,.7681,.76059,.75331,.74629,.73955,.73311,.72697,.72116,.71568,.71054,.70572,.70121,.697,.69304,.68931,.68576,.68236,.67905,.67582,.67262,.66941,.66619,.66291,.65957,.65613,.65259,.64892,.6451,.6411,.6369,.63248,.62783,.62295,.61783,.61247,.60688,.60104,.59498,.58868,.58216,.57542,.56845,.56125,.5538,.5461,.53813,
.52986,.52129,.51239,.50316,.49359,.4837,.47349,.46299,.45223,.44124,.43005,.41869,.40719,.39557,.38386,.37207,.36023,.34836,.33648,.32464,.31287,.30119,.28963,.27822,.26698,.25594,.2451,.23448,.22409,.21391,.20394,.19415,.18452,.17503,.16565,.15636,.14713,.13794,.1288,.11968,.11058,.10151,.09247,.08346,.07447,.06552,.05659,.0477,.03885,.03007,.02137,.01278,.00433,-.00393,-.012,-.01983,-.02738,-.03463,-.04155,-.0481,-.05429,-.0601,-.06553,-.07057,-.07524,-.07954,-.08347,-.08703,-.09022,-.09303,-.09544,
-.09744,-.09898,-.10004,-.10059,-.1006,-.10005,-.09892,-.0972,-.09487,-.09192,-.08833,-.08409,-.07918,-.07357,-.06724,-.06019,-.0524,-.04386,-.03455,-.02448]},{distance:[-3.46259,-3.47131,-3.47668,-3.47863,-3.47712,-3.4721,-3.46352,-3.45138,-3.43566,-3.41635,-3.39347,-3.36704,-3.33709,-3.30368,-3.26684,-3.22667,-3.18322,-3.1366,-3.08689,-3.0342,-2.97865,-2.92036,-2.85946,-2.79607,-2.73034,-2.66241,-2.59242,-2.52052,-2.44686,-2.37159,-2.29485,-2.2168,-2.13757,-2.05731,-1.97616,-1.89426,-1.81174,-1.72875,
-1.64543,-1.56191,-1.47833,-1.39483,-1.3115,-1.22847,-1.14581,-1.06361,-.98193,-.90083,-.82036,-.74054,-.66141,-.583,-.50532,-.4284,-.35228,-.277,-.20261,-.12916,-.05672,.01463,.08485,.15384,.22153,.28784,.35269,.41602,.47776,.53787,.59629,.653,.70799,.76123,.81274,.86253,.9106,.95698,1.0017,1.04477,1.0862,1.126,1.16415,1.20065,1.23546,1.26857,1.29994,1.32953,1.35731,1.38321,1.40719,1.42921,1.44922,1.46719,1.48309,1.49691,1.50862,1.51825,1.52581,1.53133,1.53486,1.53644,1.53616,1.53409,1.53031,1.52493,
1.51803,1.50972,1.50009,1.48924,1.47725,1.46421,1.45019,1.43527,1.4195,1.40295,1.38568,1.36778,1.34929,1.3303,1.31087,1.29108,1.27099,1.25066,1.23018,1.2096,1.18898,1.16838,1.14785,1.12745,1.10721,1.08719,1.06741,1.04791,1.02871,1.00986,.99136,.97324,.95551,.93819,.92127,.90476,.88866,.87296,.85767,.84277,.82823,.81406,.80022,.7867,.77346,.76049,.74774,.73519,.72278,.71049,.69827,.68606,.67381,.66145,.64893,.63618,.62313,.60973,.5959,.5816,.56675,.5513,.53516,.51826,.50053,.4819,.46231,.44169,.42002,
.39725,.37336,.34834,.32219,.2949,.2665,.23698,.20638,.17469,.14193,.10809,.07316,.03714,0,-.03827,-.07772,-.11836,-.16022,-.20332,-.24768,-.29332,-.34024,-.38844,-.43788,-.48854,-.54036,-.59329,-.64724,-.70211,-.75782,-.81425,-.87128,-.92881,-.98674,-1.04498,-1.10346,-1.1621,-1.22086,-1.27969,-1.33854,-1.3974,-1.45625,-1.51511,-1.57396,-1.63283,-1.69173,-1.75067,-1.80968,-1.86875,-1.9279,-1.98712,-2.04639,-2.10568,-2.16495,-2.22416,-2.28322,-2.34208,-2.40063,-2.4588,-2.51647,-2.57354,-2.62989,-2.68543,
-2.74002,-2.79357,-2.84597,-2.89711,-2.94689,-2.99521,-3.04195,-3.087,-3.13023,-3.17152,-3.21075,-3.24779,-3.28252,-3.3148,-3.34451,-3.37154,-3.39577,-3.41709,-3.43539,-3.45059],pressure:[.87183,.87151,.87129,.87118,.87117,.87128,.87149,.87182,.87225,.8728,.87347,.87424,.87513,.87613,.87723,.87845,.87978,.88122,.88276,.88441,.88616,.88801,.88996,.892,.89414,.89637,.89868,.90108,.90356,.90611,.90874,.91144,.91421,.91704,.91993,.92287,.92587,.92892,.93201,.93514,.93831,.94151,.94474,.94799,.95126,.95456,
.95786,.96118,.9645,.96783,.97116,.97448,.9778,.98111,.98441,.9877,.99096,.99421,.99742,.99938,.99622,.9931,.99001,.98697,.98397,.98101,.97811,.97526,.97246,.96972,.96703,.96441,.96185,.95935,.95691,.95455,.95225,.95002,.94786,.94577,.94376,.94182,.93995,.93817,.93646,.93483,.93328,.93181,.93042,.92911,.92788,.92673,.92566,.92467,.92376,.92293,.92217,.92149,.92088,.92034,.91987,.91947,.91913,.91886,.91864,.91849,.91838,.91833,.91834,.91839,.91849,.91863,.91883,.91907,.91935,.91968,.92005,.92046,.92092,
.92142,.92195,.92253,.92314,.9238,.92449,.92521,.92598,.92677,.9276,.92847,.92936,.93029,.93125,.93224,.93325,.9343,.93537,.93646,.93758,.93872,.93988,.94106,.94225,.94346,.94469,.94593,.94718,.94844,.94971,.95098,.95226,.95354,.95482,.9561,.95738,.95867,.95995,.96122,.9625,.96377,.96504,.9663,.96757,.96883,.97009,.97135,.97261,.97387,.97513,.9764,.97767,.97895,.98023,.98153,.98284,.98416,.98549,.98684,.98821,.9896,.99101,.99244,.99389,.99537,.99688,.99842,1,.99839,.99675,.99508,.99336,.99161,.98982,
.98799,.98613,.98422,.98228,.98029,.97827,.97622,.97414,.97202,.96987,.9677,.96551,.9633,.96107,.95882,.95656,.9543,.95202,.94975,.94747,.94519,.94292,.94065,.93838,.93613,.93388,.93164,.92941,.9272,.92499,.9228,.92062,.91846,.91631,.91418,.91207,.90998,.90792,.90588,.90387,.90189,.89995,.89804,.89617,.89434,.89256,.89083,.88914,.88752,.88595,.88443,.88299,.88161,.8803,.87907,.87791,.87683,.87584,.87494,.87412,.8734,.87278,.87225]},{distance:[.39335,.43437,.47737,.52234,.56923,.61801,.66864,.72109,
.7753,.83123,.88882,.94801,1.00875,1.07097,1.13461,1.1996,1.26586,1.33333,1.40193,1.47158,1.54221,1.61373,1.68607,1.75913,1.83284,1.90711,1.98186,2.05699,2.13243,2.20809,2.28387,2.35971,2.4355,2.51117,2.58663,2.66179,2.73658,2.81092,2.88473,2.95792,3.03043,3.10217,3.17308,3.24309,3.31211,3.3801,3.44697,3.51267,3.57712,3.64028,3.70208,3.76247,3.8214,3.87881,3.93467,3.98892,4.04152,4.09244,4.14164,4.18908,4.23474,4.27859,4.32061,4.36077,4.39905,4.43544,4.46992,4.50249,4.53314,4.56185,4.58864,4.61349,
4.63642,4.65745,4.67657,4.69381,4.7092,4.72274,4.73447,4.74441,4.75259,4.75903,4.76376,4.76682,4.76822,4.768,4.76618,4.76279,4.75786,4.75142,4.74348,4.73409,4.72326,4.71102,4.69739,4.68241,4.6661,4.64849,4.6296,4.60948,4.58816,4.56567,4.54204,4.51732,4.49154,4.46473,4.43694,4.4082,4.37854,4.348,4.31662,4.28443,4.25145,4.21773,4.1833,4.14819,4.11243,4.07606,4.03912,4.00162,3.96361,3.92512,3.88618,3.84683,3.80708,3.76697,3.72653,3.68579,3.64478,3.60351,3.56202,3.52033,3.47845,3.43642,3.39425,3.35196,
3.30957,3.2671,3.22455,3.18196,3.13933,3.09668,3.05402,3.01136,2.96873,2.92613,2.88357,2.84108,2.79865,2.75631,2.71407,2.67195,2.62994,2.58807,2.54634,2.50477,2.46338,2.42216,2.38114,2.34032,2.29971,2.25933,2.21916,2.17923,2.13954,2.10008,2.06087,2.02189,1.98316,1.94468,1.90644,1.86845,1.83069,1.79316,1.75586,1.71877,1.68189,1.6452,1.60868,1.57232,1.53611,1.50004,1.46407,1.4282,1.39241,1.35668,1.321,1.28535,1.24972,1.2141,1.17849,1.14286,1.10723,1.07158,1.03593,1.00028,.96464,.92902,.89344,.85793,
.8225,.78719,.75203,.71705,.68231,.64784,.61369,.57991,.54656,.51368,.48134,.44959,.41849,.3881,.35848,.32967,.30174,.27474,.24872,.22373,.19982,.17702,.15539,.13497,.11579,.09791,.08137,.06621,.05248,.04022,.02948,.02029,.01271,.00677,.00252,0,-7.6E-4,2.7E-4,.00314,.00788,.01451,.02307,.03357,.04604,.0605,.07697,.09546,.11599,.13858,.16322,.18992,.21869,.24952,.28241,.31735,.35434],pressure:[.95248,.95236,.95228,.95223,.95222,.95224,.95231,.95241,.95256,.95274,.95296,.95322,.95352,.95385,.95423,
.95465,.9551,.9556,.95613,.9567,.95731,.95796,.95864,.95936,.96012,.96091,.96173,.96259,.96348,.9644,.96535,.96633,.96734,.96838,.96944,.97053,.97164,.97277,.97393,.9751,.97629,.9775,.97873,.97997,.98122,.98249,.98376,.98505,.98634,.98763,.98893,.99023,.99154,.99284,.99414,.99544,.99673,.99802,.9993,.99942,.99816,.99691,.99568,.99445,.99324,.99205,.99087,.98972,.98858,.98746,.98636,.98528,.98423,.9832,.98219,.98121,.98025,.97931,.9784,.97752,.97666,.97582,.97501,.97423,.97347,.97274,.97203,.97135,
.9707,.97007,.96948,.9689,.96836,.96784,.96735,.96689,.96646,.96605,.96567,.96533,.965,.96471,.96445,.96421,.964,.96382,.96367,.96355,.96346,.96339,.96335,.96334,.96336,.9634,.96348,.96358,.9637,.96385,.96403,.96423,.96446,.96471,.96499,.96529,.96561,.96595,.96631,.96669,.96709,.96751,.96795,.9684,.96887,.96935,.96984,.97035,.97087,.9714,.97194,.97249,.97304,.97361,.97418,.97476,.97534,.97592,.97651,.97711,.9777,.9783,.9789,.9795,.9801,.9807,.9813,.9819,.9825,.98309,.98369,.98428,.98486,.98545,.98603,
.98661,.98718,.98775,.98832,.98888,.98944,.99,.99056,.99112,.99167,.99223,.99279,.99335,.99392,.99449,.99507,.99565,.99624,.99684,.99745,.99807,.9987,.99934,1,.99933,.99866,.99797,.99727,.99656,.99583,.9951,.99435,.99359,.99283,.99205,.99126,.99046,.98966,.98885,.98803,.9872,.98637,.98554,.9847,.98387,.98303,.98219,.98134,.9805,.97967,.97883,.978,.97717,.97634,.97552,.97471,.97389,.97309,.97229,.9715,.97071,.96993,.96915,.96838,.96762,.96687,.96612,.96539,.96466,.96395,.96324,.96255,.96187,.9612,
.96055,.95991,.95929,.95869,.95811,.95754,.957,.95648,.95599,.95552,.95508,.95467,.95428,.95393,.9536,.95331,.95305,.95283,.95264]},{distance:[2.85606,2.86149,2.86432,2.8645,2.862,2.85686,2.84912,2.83886,2.82618,2.81117,2.79393,2.77456,2.75314,2.72975,2.70447,2.67734,2.64844,2.61784,2.58564,2.55196,2.5169,2.48057,2.44305,2.40438,2.36462,2.32383,2.28208,2.23943,2.19591,2.15153,2.10628,2.06016,2.01321,1.96548,1.91702,1.86793,1.8183,1.76829,1.71803,1.66767,1.61737,1.56726,1.51746,1.46803,1.41902,1.37044,
1.32228,1.27452,1.22716,1.18023,1.13376,1.08781,1.04244,.99769,.95357,.91003,.86701,.82447,.78238,.74069,.69938,.65836,.61758,.57699,.53656,.49627,.45611,.41611,.37632,.33683,.29776,.25924,.22141,.18441,.14839,.11346,.07972,.04727,.01619,-.01348,-.0417,-.0684,-.09351,-.11698,-.13875,-.1588,-.17713,-.19381,-.20889,-.22242,-.23444,-.24501,-.25421,-.26216,-.26897,-.27473,-.27951,-.28336,-.28631,-.28836,-.28948,-.28963,-.28873,-.28673,-.28355,-.27916,-.27354,-.26673,-.25878,-.2498,-.23992,-.22929,-.21802,
-.20623,-.19398,-.18134,-.16836,-.1551,-.14163,-.12809,-.11461,-.1013,-.08826,-.07557,-.06335,-.0517,-.04077,-.03065,-.02143,-.01321,-.00606,0,.00496,.00888,.01181,.01385,.01511,.0157,.01574,.01533,.01458,.01358,.0124,.01112,.00979,.00851,.00738,.0065,.006,.00596,.00646,.00754,.00924,.01161,.01471,.01858,.02323,.02865,.03481,.04169,.0493,.05765,.06677,.07671,.08754,.09934,.11222,.12628,.14159,.15823,.17624,.19561,.21632,.23828,.26142,.28563,.31083,.33696,.36397,.39185,.42057,.4501,.48036,.51125,.54264,
.5744,.60646,.63871,.67105,.70337,.73556,.76751,.79918,.83048,.86139,.8919,.92202,.95184,.98144,1.01094,1.04045,1.0701,1.10002,1.13029,1.16103,1.1923,1.22416,1.25664,1.28979,1.32364,1.35824,1.39363,1.42985,1.4669,1.50475,1.54332,1.58252,1.62227,1.6625,1.70312,1.744,1.78501,1.82598,1.8668,1.90734,1.94754,1.98732,2.02666,2.06555,2.10402,2.1421,2.17985,2.2173,2.25448,2.29139,2.328,2.36424,2.4,2.43515,2.46955,2.50309,2.53565,2.56717,2.59761,2.62692,2.65505,2.68191,2.7074,2.73138,2.75375,2.7744,2.79324,
2.81017,2.82504,2.83772,2.8481],pressure:[.22758,.23641,.24578,.25568,.26609,.27699,.28835,.30016,.31237,.32495,.33789,.35113,.36466,.37843,.39241,.40658,.4209,.43535,.44989,.4645,.47916,.49385,.50853,.5232,.53784,.55243,.56696,.58141,.59578,.61004,.62419,.63821,.65209,.6658,.67934,.69268,.70582,.71873,.73139,.7438,.75594,.76779,.77935,.79061,.80156,.81221,.82254,.83258,.84231,.85176,.86091,.86978,.87837,.88669,.89473,.9025,.91,.91725,.92425,.931,.93752,.9438,.94985,.95566,.96124,.96658,.97168,.97652,
.98109,.98539,.98939,.99309,.99646,.99949,.99783,.99552,.99361,.99209,.99098,.99029,.99003,.99019,.99079,.99181,.99324,.9951,.99735,1,.99698,.99361,.98992,.98592,.98163,.97709,.97231,.96731,.96212,.95676,.95122,.94554,.93973,.93378,.92773,.92157,.91532,.90899,.90258,.89612,.88961,.88308,.87653,.87,.8635,.85705,.85068,.8444,.83823,.83219,.82628,.82052,.81493,.80952,.8043,.79929,.7945,.78994,.78561,.78151,.77765,.77402,.77062,.76742,.76443,.76161,.75896,.75645,.75406,.75175,.74951,.7473,.74511,.74289,
.74064,.73833,.73592,.73341,.73078,.728,.72507,.72197,.71869,.71522,.71156,.70769,.70363,.69936,.69489,.69021,.68533,.68023,.67492,.66939,.66363,.65765,.65145,.64501,.63833,.63143,.62428,.61691,.60931,.60148,.59344,.58521,.57679,.5682,.55948,.55063,.54167,.53264,.52354,.51439,.50522,.49603,.48686,.47773,.46865,.45964,.45072,.44192,.43324,.42469,.41629,.40804,.39994,.392,.3842,.37655,.36903,.36164,.35437,.3472,.34012,.33312,.3262,.31933,.31251,.30574,.299,.2923,.28563,.27899,.27239,.26583,.25933,.25288,
.24652,.24025,.2341,.22808,.22221,.21653,.21104,.20576,.20072,.19592,.19138,.18712,.18313,.17943,.17602,.17292,.17013,.16766,.16551,.16369,.16222,.1611,.16036,.16001,.16007,.16055,.16148,.16286,.16471,.16705,.16988,.17321,.17706,.18144,.18636,.19182,.19785,.20443,.21158,.2193]},{distance:[-2.31317,-2.3191,-2.32189,-2.32154,-2.31811,-2.31174,-2.30254,-2.29062,-2.27609,-2.25904,-2.23954,-2.21767,-2.19355,-2.16732,-2.13907,-2.10885,-2.07672,-2.04268,-2.00677,-1.96911,-1.92985,-1.88914,-1.84713,-1.80397,
-1.75979,-1.71467,-1.66864,-1.62171,-1.57395,-1.52546,-1.47625,-1.42628,-1.3755,-1.32384,-1.27131,-1.218,-1.16408,-1.10972,-1.05508,-1.00031,-.94551,-.89077,-.83615,-.7817,-.72757,-.6739,-.62076,-.56821,-.51625,-.46484,-.41397,-.36366,-.314,-.26506,-.21689,-.16957,-.12316,-.07766,-.03301,.01085,.05399,.09643,.13827,.17967,.22079,.26176,.30265,.34342,.38397,.42414,.46381,.50285,.54115,.57863,.61524,.65093,.6856,.71914,.75153,.78275,.81283,.84182,.86972,.89651,.92208,.94634,.96919,.99052,1.01025,1.02835,
1.04484,1.05976,1.07309,1.08479,1.09492,1.1036,1.11096,1.11714,1.12224,1.12627,1.12916,1.13083,1.13125,1.13036,1.12816,1.12466,1.11992,1.11397,1.10677,1.09827,1.08849,1.07746,1.06527,1.05203,1.03786,1.02283,1.00695,.99025,.97279,.9546,.93573,.9163,.8965,.8765,.85647,.83652,.81687,.79775,.77939,.76199,.74568,.73049,.71635,.70316,.69082,.67925,.66834,.65804,.64831,.63911,.63032,.62184,.61363,.60564,.59788,.59036,.58308,.57597,.5689,.56177,.55447,.5469,.53896,.53062,.5219,.51283,.5034,.49355,.48335,
.47287,.46223,.45154,.44085,.43012,.41923,.40805,.39648,.38441,.37176,.35849,.34458,.32999,.31461,.29833,.28109,.26288,.2437,.22361,.20265,.18082,.15807,.13434,.1096,.0838,.0569,.02894,0,-.0298,-.0604,-.09173,-.12364,-.15594,-.18843,-.22092,-.25331,-.28559,-.31781,-.35006,-.38244,-.41502,-.44785,-.48098,-.5144,-.54811,-.58218,-.61666,-.65153,-.68677,-.72232,-.75807,-.79397,-.83002,-.86628,-.90281,-.93968,-.97693,-1.01465,-1.05282,-1.09139,-1.13031,-1.16956,-1.20917,-1.24905,-1.28907,-1.32908,-1.36891,
-1.40844,-1.44765,-1.48658,-1.52527,-1.56376,-1.60206,-1.64016,-1.67801,-1.71552,-1.75264,-1.78936,-1.8257,-1.86161,-1.89702,-1.93182,-1.96584,-1.99894,-2.03102,-2.06203,-2.0919,-2.12056,-2.14794,-2.17397,-2.19852,-2.22138,-2.24235,-2.26129,-2.27805,-2.29243,-2.30422],pressure:[.9681,.97424,.98046,.98674,.99309,.9995,.99404,.98754,.981,.97444,.96785,.96124,.95462,.94801,.94139,.93479,.92822,.92167,.91515,.90868,.90225,.89589,.88959,.88336,.87722,.87115,.86519,.85932,.85356,.84792,.84239,.83699,.83173,
.8266,.82162,.81679,.81211,.80759,.80324,.79906,.79505,.79121,.78756,.78409,.78081,.77771,.77481,.77211,.76959,.76728,.76516,.76324,.76153,.76001,.75869,.75757,.75665,.75593,.7554,.75507,.75493,.75498,.75523,.75565,.75627,.75706,.75803,.75917,.76049,.76197,.76361,.76541,.76737,.76947,.77172,.77409,.7766,.77923,.78198,.78484,.7878,.79086,.79401,.79724,.80055,.80394,.8074,.81092,.8145,.81813,.82182,.82556,.82934,.83317,.83703,.84093,.84487,.84884,.85284,.85687,.86094,.86503,.86915,.87329,.87746,.88166,
.88587,.89011,.89436,.89863,.90291,.9072,.91149,.91579,.92009,.92438,.92867,.93295,.9372,.94144,.94566,.94985,.954,.95812,.96219,.96623,.97021,.97415,.97802,.98184,.9856,.9893,.99293,.9965,1,.99657,.9932,.98991,.98668,.98352,.98042,.97738,.9744,.97148,.9686,.96577,.96298,.96023,.95751,.95482,.95214,.94949,.94684,.9442,.94156,.93892,.93627,.93361,.93094,.92825,.92555,.92284,.9201,.91735,.91458,.91179,.90899,.90616,.90332,.90047,.8976,.89472,.89183,.88893,.88603,.88314,.88024,.87735,.87448,.87162,.86878,
.86597,.86319,.86044,.85774,.85508,.85247,.84993,.84744,.84503,.84269,.84042,.83825,.83616,.83417,.83227,.83048,.8288,.82724,.82578,.82445,.82324,.82215,.82119,.82037,.81967,.81911,.81868,.81839,.81824,.81823,.81835,.81862,.81903,.81957,.82026,.82109,.82206,.82317,.82443,.82583,.82737,.82906,.83089,.83287,.83499,.83726,.83968,.84223,.84494,.84778,.85077,.8539,.85717,.86058,.86412,.86781,.87163,.87559,.87968,.88391,.88826,.89275,.89737,.90211,.90698,.91198,.91709,.92233,.92768,.93315,.93873,.94441,
.95019,.95607,.96205]},{distance:[4.72925,4.81721,4.9037,4.98859,5.07177,5.15311,5.23249,5.3098,5.38491,5.45772,5.52811,5.59598,5.66122,5.72375,5.78346,5.84028,5.8941,5.94486,5.99248,6.03689,6.07803,6.11584,6.15028,6.18128,6.20882,6.23285,6.25336,6.27031,6.28369,6.29348,6.29969,6.3023,6.30133,6.29678,6.28867,6.27703,6.26187,6.24324,6.22116,6.19567,6.16683,6.13468,6.09928,6.06068,6.01896,5.97417,5.92639,5.87569,5.82217,5.76589,5.70696,5.64545,5.58147,5.5151,5.44644,5.37559,5.30265,5.2277,5.15085,5.0722,
4.99184,4.90987,4.82639,4.74151,4.65533,4.56794,4.47945,4.38996,4.29959,4.20843,4.11658,4.02416,3.93125,3.83796,3.74437,3.65057,3.55666,3.46272,3.36884,3.27509,3.18155,3.08831,2.99545,2.90303,2.81114,2.71984,2.62922,2.53933,2.45026,2.36207,2.27484,2.18862,2.10349,2.01951,1.93675,1.85528,1.77515,1.69644,1.61919,1.54348,1.46935,1.39685,1.32605,1.25698,1.18967,1.12417,1.06049,.99863,.93862,.88044,.82408,.76953,.71676,.66574,.61644,.56882,.52282,.47841,.43553,.39413,.35414,.31551,.27817,.24206,.20712,
.17328,.14048,.10866,.07776,.04772,.01848,-.00999,-.03776,-.06487,-.09134,-.11721,-.14251,-.16725,-.19144,-.21509,-.2382,-.26076,-.28275,-.30416,-.32496,-.34511,-.36459,-.38334,-.40134,-.41852,-.43485,-.45026,-.46471,-.47815,-.49052,-.50179,-.51189,-.52081,-.52849,-.5349,-.54003,-.54383,-.54627,-.54734,-.54702,-.54528,-.54211,-.53752,-.53149,-.52403,-.51515,-.50487,-.4932,-.48015,-.46575,-.45001,-.43297,-.41463,-.39503,-.37419,-.35213,-.32887,-.30443,-.27885,-.25214,-.22432,-.19541,-.16544,-.13442,
-.10235,-.06926,-.03514,0,.03616,.07336,.11159,.15088,.19125,.23272,.27531,.31906,.36401,.41019,.45764,.5064,.55651,.60802,.66096,.71538,.77129,.82874,.88776,.94836,1.01056,1.07438,1.13982,1.20687,1.27554,1.34581,1.41766,1.49107,1.56599,1.64239,1.72025,1.79951,1.88013,1.96209,2.04532,2.12979,2.21546,2.30226,2.39017,2.47911,2.56905,2.65991,2.75164,2.84416,2.93742,3.03133,3.12582,3.2208,3.31619,3.41191,3.50785,3.60393,3.70006,3.79612,3.89202,3.98765,4.08291,4.17767,4.27182,4.36525,4.45783,4.54944,4.63995],
pressure:[.30942,.30838,.30765,.30724,.30715,.30738,.30795,.30884,.31007,.31164,.31354,.31578,.31837,.32129,.32455,.32815,.33209,.33636,.34097,.34591,.35117,.35675,.36265,.36887,.37539,.38221,.38933,.39674,.40442,.41238,.4206,.42907,.43779,.44675,.45593,.46533,.47493,.48473,.49471,.50486,.51517,.52563,.53623,.54694,.55777,.5687,.57971,.59079,.60194,.61313,.62435,.6356,.64686,.65811,.66935,.68056,.69174,.70286,.71391,.72489,.73579,.74659,.75728,.76785,.7783,.7886,.79876,.80877,.81861,.82827,.83776,
.84706,.85617,.86507,.87378,.88227,.89056,.89863,.90649,.91412,.92153,.92872,.93568,.94241,.94892,.95519,.96122,.96702,.97258,.97791,.98299,.98783,.99242,.99677,.99911,.99525,.99164,.98827,.98515,.98228,.97966,.97728,.97514,.97324,.97159,.97017,.96898,.96801,.96727,.96674,.96641,.96629,.96635,.96661,.96703,.96762,.96838,.96928,.97032,.97149,.97279,.9742,.97572,.97734,.97905,.98085,.98273,.98468,.98669,.98877,.99091,.99311,.99535,.99765,1,.9976,.99516,.99267,.99014,.98755,.98491,.98222,.97947,.97666,
.97378,.97083,.96781,.96471,.96153,.95826,.9549,.95144,.94787,.9442,.94042,.93651,.93249,.92834,.92407,.91966,.91512,.91045,.90564,.90069,.8956,.89037,.885,.87949,.87384,.86806,.86214,.85608,.84988,.84356,.83711,.83053,.82383,.81702,.81009,.80306,.79594,.78872,.78141,.77403,.76657,.75905,.75148,.74385,.73619,.72849,.72076,.71302,.70526,.69749,.68972,.68195,.67419,.66644,.65871,.65099,.64329,.63561,.62795,.62032,.61271,.60512,.59755,.59001,.58248,.57497,.56749,.56002,.55256,.54512,.5377,.5303,.52291,
.51554,.50819,.50087,.49358,.48632,.4791,.47192,.4648,.45773,.45072,.44378,.43692,.43015,.42346,.41687,.41039,.40403,.39779,.39168,.38571,.37989,.37423,.36873,.36342,.35828,.35335,.34862,.34409,.3398,.33573,.3319,.32831,.32498,.32192,.31912,.3166,.31436,.31242,.31077]}]}})},"esri/views/3d/webgl-engine/lib/edgeRendering/util":function(){define(["require","exports","../../../../../core/arrayUtils","../../../../../core/maybe","../../../../../core/typedArrayUtil"],function(p,c,n,l,k){function d(d,c){var f=
n.binaryIndexOf(d,c,!0);return-1===f?c<d[0]?0:d.length:f}Object.defineProperty(c,"__esModule",{value:!0});c.determineRendererType=function(d){for(var c=null,f=0;f<d.length;f++){var b=d[f],a=b.type;if(0<b.size*b.color[3]*b.opacity)if(l.isNone(c))c=a;else if(c!==a)return"uber"}return l.isSome(c)?c:"solid"};c.determineAllTransparent=function(d){if(0===d.length)return!0;for(var c=0;c<d.length;c++){var f=d[c].material;if(0<f.size*f.color[3]*f.opacity)return!1}return!0};c.cloneIndices=function(d){if(Uint16Array.from)return k.isUint16Array(d)?
Uint16Array.from(d):Uint32Array.from(d);for(var c=k.isUint16Array(d)?new Uint16Array(d.length):new Uint32Array(d.length),f=0;f<d.length;f++)c[f]=d[f];return c};c.estimateLengthAtDistance=function(d,c,f,b){return b/d*f*2*Math.tan(.5*c)};c.findLowerBoundIndex=d;c.computeEdgeCount=function(c,g,f){return c.length-d(c,g*f.minimumEdgeLength)};c.fillComponenBufferIndices=function(d,c,f,b){for(var a=0;a<d.length;a++){var e=d[a].index,g=c[a],h=c[a+1];if(b)for(;g<h;g++)f.set(b[g],e);else for(;g<h;g++)f.set(g,
e)}}})},"esri/views/3d/webgl-engine/lighting/SceneLighting":function(){define("require exports ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4f64 ./SphericalHarmonics".split(" "),function(p,c,n,l,k,d){Object.defineProperty(c,"__esModule",{value:!0});var h=l.vec3f64.create();p=function(){function c(){this._renderLighting={main:{intensity:l.vec3f64.create(),direction:l.vec3f64.fromValues(1,0,0),castShadows:!1},sphericalHarmonics:{sh:{r:[0],
g:[0],b:[0]}}};this._shOrder=2;this._oldDirection=l.vec3f64.create();this._oldSpecular=k.vec4f64.create();this._oldDiffuse=k.vec4f64.create();this._oldAmbient=k.vec4f64.create()}c.prototype.setUniforms=function(d,b){void 0===b&&(b=!1);b||d.getDefine("GROUND_NORMAL_SHADING")?d.setUniform1f("lightingFixedFactor",(1-this._info.groundLightingFactor)*(1-this._info.globalFactor)):d.setUniform1f("lightingFixedFactor",0);d.setUniform1f("lightingGlobalFactor",this._info.globalFactor);d.setUniform3fv("lightingMainDirection",
this._renderLighting.main.direction);d.setUniform3fv("lightingMainIntensity",this._renderLighting.main.intensity);d.setUniform1f("ambientBoostFactor",.4);b=this._renderLighting.sphericalHarmonics.sh;0===this._shOrder?d.setUniform3f("lightingAmbientSH0",b.r[0],b.g[0],b.b[0]):1===this._shOrder?(d.setUniform4f("lightingAmbientSH_R",b.r[0],b.r[1],b.r[2],b.r[3]),d.setUniform4f("lightingAmbientSH_G",b.g[0],b.g[1],b.g[2],b.g[3]),d.setUniform4f("lightingAmbientSH_B",b.b[0],b.b[1],b.b[2],b.b[3])):2===this._shOrder&&
(d.setUniform3f("lightingAmbientSH0",b.r[0],b.g[0],b.b[0]),d.setUniform4f("lightingAmbientSH_R1",b.r[1],b.r[2],b.r[3],b.r[4]),d.setUniform4f("lightingAmbientSH_G1",b.g[1],b.g[2],b.g[3],b.g[4]),d.setUniform4f("lightingAmbientSH_B1",b.b[1],b.b[2],b.b[3],b.b[4]),d.setUniform4f("lightingAmbientSH_R2",b.r[5],b.r[6],b.r[7],b.r[8]),d.setUniform4f("lightingAmbientSH_G2",b.g[5],b.g[6],b.g[7],b.g[8]),d.setUniform4f("lightingAmbientSH_B2",b.b[5],b.b[6],b.b[7],b.b[8]));d.setUniform3fv("lightDirection",this._oldDirection)};
c.prototype.set=function(c){this._info=c;d.combineLights(c.lights,this._shOrder,this._renderLighting.main,this._renderLighting.sphericalHarmonics);n.vec3.negate(this._oldDirection,this._renderLighting.main.direction);c=1/Math.PI;this._oldAmbient[0]=.282095*this._renderLighting.sphericalHarmonics.sh.r[0]*c;this._oldAmbient[1]=.282095*this._renderLighting.sphericalHarmonics.sh.g[0]*c;this._oldAmbient[2]=.282095*this._renderLighting.sphericalHarmonics.sh.b[0]*c;this._oldAmbient[3]=1;this._oldDiffuse[0]=
this._renderLighting.main.intensity[0]*c;this._oldDiffuse[1]=this._renderLighting.main.intensity[1]*c;this._oldDiffuse[2]=this._renderLighting.main.intensity[2]*c;this._oldDiffuse[3]=1;c=n.vec3.copy(h,this._oldDiffuse);n.vec3.scale(c,c,.4*this._info.globalFactor);n.vec3.add(this._oldAmbient,this._oldAmbient,c)};Object.defineProperty(c.prototype,"globalFactor",{get:function(){return this._info.globalFactor},enumerable:!0,configurable:!0});c.prototype.getOld=function(){return{ambient:this._oldAmbient,
diffuse:this._oldDiffuse,specular:this._oldSpecular,direction:this._oldDirection,helper:this}};return c}();c.SceneLighting=p})},"esri/views/3d/webgl-engine/lighting/SphericalHarmonics":function(){define("require exports ../../../../core/mathUtils ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../lib/LongVectorMath ./Lightsources".split(" "),function(p,c,n,l,k,d,h){function g(a){return(a+1)*(a+1)}function f(a){return n.clamp(Math.floor(Math.sqrt(a)-1),0,2)}function b(a,
b,d){var c=a[0],e=a[1];a=a[2];d=d||[];d.length=g(b);0<=b&&(d[0]=.28209479177);1<=b&&(d[1]=.4886025119*c,d[2]=.4886025119*a,d[3]=.4886025119*e);2<=b&&(d[4]=1.09254843059*c*e,d[5]=1.09254843059*e*a,d[6]=.31539156525*(3*a*a-1),d[7]=1.09254843059*c*a,d[8]=.54627421529*(c*c-e*e));return d}function a(a,b){a=g(a);b=b||{r:[],g:[],b:[]};b.r.length=b.g.length=b.b.length=a;for(var d=0;d<a;d++)b.r[d]=b.g[d]=b.b[d]=0;return b}function e(a,c){for(var e=f(c.r.length),g=0;g<a.length;g++){var m=a[g];l.vec3.negate(w,
m.direction);b(w,e,r);d.elementwiseProduct(r,v);d.scalarProduct(r,m.intensity[0],x);d.add(c.r,x);d.scalarProduct(r,m.intensity[1],x);d.add(c.g,x);d.scalarProduct(r,m.intensity[2],x);d.add(c.b,x)}return c}function m(a,d){b(w,0,r);for(var c=0;c<a.length;c++){var e=a[c];d.r[0]+=r[0]*v[0]*e.intensity[0]*4*Math.PI;d.g[0]+=r[0]*v[0]*e.intensity[1]*4*Math.PI;d.b[0]+=r[0]*v[0]*e.intensity[2]*4*Math.PI}return d}Object.defineProperty(c,"__esModule",{value:!0});c.numberOfCoefficients=g;c.numberOfCoefficientsInBand=
function(a){return 2*a+1};c.orderFromNumberOfCoefficients=f;c.computeCoefficients=b;c.initSHCoefficients=a;c.projectFillLights=e;c.projectAmbientLights=m;c.combineLights=function(b,c,f,g){a(c,g.sh);l.vec3.set(f.intensity,0,0,0);var k=!1,r=q,n=u;c=t;r.length=0;n.length=0;for(var x=c.length=0;x<b.length;x++){var v=b[x];v instanceof h.MainLight&&!k?(l.vec3.copy(f.direction,v.direction),f.intensity[0]=v.intensity[0],f.intensity[1]=v.intensity[1],f.intensity[2]=v.intensity[2],f.castShadows=v.castShadows,
k=!0):v instanceof h.MainLight||v instanceof h.FillLight?r.push(v):v instanceof h.AmbientLight?n.push(v):v instanceof h.SphericalHarmonicsLight&&c.push(v)}e(r,g.sh);m(n,g.sh);for(b=0;b<c.length;b++)v=c[b],d.add(g.sh.r,v.sh.r),d.add(g.sh.g,v.sh.g),d.add(g.sh.b,v.sh.b)};var q=[],u=[],t=[],r=[0],x=[0],w=k.vec3f64.create(),v=[3.141593,2.094395,2.094395,2.094395,.785398,.785398,.785398,.785398,.785398]})},"esri/views/3d/webgl-engine/lib/LongVectorMath":function(){define(["require","exports"],function(p,
c){Object.defineProperty(c,"__esModule",{value:!0});c.dotProduct=function(c,l){for(var k=0,d=0;d<c.length;d++)k+=c[d]*l[d];return k};c.elementwiseProduct=function(c,l,k){k=k||c;k.length=c.length;for(var d=0;d<c.length;d++)k[d]=c[d]*l[d];return k};c.scalarProduct=function(c,l,k){k=k||c;k.length=c.length;for(var d=0;d<c.length;d++)k[d]=c[d]*l;return k};c.add=function(c,l,k){k=k||c;k.length=c.length;for(var d=0;d<c.length;d++)k[d]=c[d]+l[d];return k}})},"esri/views/webgl/Profiling":function(){define(["require",
"exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});c.startMeasurement=function(c){return(c=c.capabilities.disjointTimerQuery)?new n(c):null};c.getTimestamp=function(c,k,d){void 0===d&&(d=50);var h=c.capabilities.disjointTimerQuery;if(!h||0>=h.timestampBits())return null;var g=h.createQuery();h.createTimestamp(g);var f=function(){var b=h.resultAvailable(g),a=h.disjoint();b&&!a?(b=h.getResult(g),k(b/1E6)):a?k():setTimeout(f,d)};f()};c.supportsTimestamps=function(c){c=c.capabilities.disjointTimerQuery;
if(!c)return!1;c=c.timestampBits();console.log({bits:c});return 0<c};var n=function(){function c(c){this.timer=c;this.query=c.createQuery();this.timer.beginTimeElapsed(this.query)}c.prototype.stop=function(c,d){void 0===d&&(d=50);this.cb=c;this.checkInterval=d;this.timer.endTimeElapsed();this.checkQueryResult()};c.prototype.checkQueryResult=function(){var c=this.timer.resultAvailable(this.query),d=this.timer.disjoint();c&&!d?(c=this.timer.getResult(this.query),this.cb(c/1E6)):d?this.cb():setTimeout(this.checkQueryResult.bind(this),
this.checkInterval)};return c}()})},"esri/views/3d/webgl-engine/materials/ColorMaterial":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../support/buffer/InterleavedLayout ../lib/GLMaterial ../lib/Material ../lib/Util ./internal/bufferWriters ./internal/MaterialUtil ./renderers/MergedRenderer ../shaders/ColorPrograms ../../../webgl/renderState".split(" "),function(p,c,n,l,k,d,h,g,f,b,a,e){p=function(a){function d(b,d){d=a.call(this,d)||this;d.supportsEdges=!0;d.params=
f.copyParameters(b,u);return d}n(d,a);d.prototype.setParameterValues=function(a){var b=this.params,d;for(d in a)b[d]=a[d];this.notifyDirty("matChanged")};d.prototype.getParameters=function(){return this.params};d.prototype.setColor=function(a){this.params.color=a;this.notifyDirty("matChanged")};d.prototype.getColor=function(){return this.params.color};d.prototype.setTransparent=function(a){this.params.transparent=a;this.notifyDirty("matChanged")};d.prototype.getTransparent=function(){return this.params.transparent};
d.prototype.intersect=function(a,b,d,c,e,g,m,h,k){f.intersectTriangleGeometry(a,b,d,c,e,g,m,k)};d.prototype.getGLMaterials=function(){return{color:m,depthShadowMap:void 0,normal:void 0,depth:void 0,highlight:q}};d.prototype.createBufferWriter=function(){return new r};d.prototype.createRenderer=function(a,d){return new b(a,d,this)};return d}(d);var m=function(b){function d(a,d,c){a=b.call(this,a,d)||this;a.updateParameters();return a}n(d,b);d.prototype.updateParameters=function(){this.params=f.copyParameters(this.material.getParameters());
this.selectProgram()};d.prototype.selectProgram=function(){var b=this.params;this.program=this.programRep.getProgram(a.colorPass,{vertexColors:b.vertexColors,slice:b.slicePlaneEnabled});this.pipelineState=e.makePipelineState({blending:b.transparent&&e.separateBlendingParams(770,1,771,771),polygonOffset:b.polygonOffset&&x,culling:w(b.cullFace),depthTest:b.testDepth&&{func:513},depthWrite:b.writeDepth&&e.defaultDepthWriteParams,colorWrite:e.defaultColorWriteParams})};d.prototype.beginSlot=function(a){var b=
5;this.params.transparent&&(b=this.params.writeDepth?7:10);return a===b};d.prototype.getProgram=function(){return this.program};d.prototype.bind=function(a,b){b=this.program;var d=this.params;a.bindProgram(b);a.setPipelineState(this.pipelineState);b.setUniform4fv("eColor",d.color)};d.prototype.release=function(a){};d.prototype.bindView=function(a,b){a=this.program;var d=this.params;f.bindView(b.origin,b.view,a);d.slicePlaneEnabled&&f.bindSlicePlane(b.origin,b.slicePlane,a)};d.prototype.bindInstance=
function(a,b){this.program.setUniformMatrix4fv("model",b.transformation)};d.prototype.getDrawMode=function(){return 4};return d}(k),q=function(b){function d(a,d,c){a=b.call(this,a,d)||this;a.updateParameters();return a}n(d,b);d.prototype.updateParameters=function(){this.params=f.copyParameters(this.material.getParameters());this.selectProgram()};d.prototype.selectProgram=function(){var b=this.params;this.program=this.programRep.getProgram(a.colorPass,{vertexColors:b.vertexColors,slice:b.slicePlaneEnabled});
this.pipelineState=e.makePipelineState({polygonOffset:b.polygonOffset&&x,culling:w(b.cullFace),depthTest:b.testDepth&&{func:513},depthWrite:b.writeDepth&&e.defaultDepthWriteParams,colorWrite:e.defaultColorWriteParams})};d.prototype.beginSlot=function(a){return 5===a};d.prototype.getProgram=function(){return this.program};d.prototype.bind=function(a,b){var d=this.program,c=this.params;a.bindProgram(d);a.setPipelineState(this.pipelineState);f.bindHighlightRendering(a,b,d);d.setUniform4fv("eColor",c.color)};
d.prototype.release=function(a){};d.prototype.bindView=function(a,b){a=this.program;var d=this.params;f.bindView(b.origin,b.view,a);d.slicePlaneEnabled&&f.bindSlicePlane(b.origin,b.slicePlane,a)};d.prototype.bindInstance=function(a,b){this.program.setUniformMatrix4fv("model",b.transformation)};d.prototype.getDrawMode=function(){return 4};return d}(k),u={color:[1,1,1,1],transparent:!1,writeDepth:!0,testDepth:!0,vertexColors:!1,polygonOffset:!1,slicePlaneEnabled:!1,cullFace:"none"},t=l.newLayout().vec3f(h.VertexAttrConstants.POSITION).vec4u8(h.VertexAttrConstants.COLOR),
r=function(){function a(){this.vertexBufferLayout=t}a.prototype.allocate=function(a){return t.createBuffer(a)};a.prototype.elementCount=function(a){return a.indices[h.VertexAttrConstants.POSITION].length};a.prototype.write=function(a,b,d,c){g.writeDefaultAttributes(b,t,a.transformation,a.invTranspTransformation,d,c)};return a}(),x={factor:1,units:1},w=function(a){return"none"!==a&&{face:"front"===a?1028:1029,mode:2305}};return p})},"esri/views/3d/webgl-engine/shaders/ColorPrograms":function(){define(["require",
"exports","../lib/DefaultVertexAttributeLocations","./sources/resolver","../../../webgl/programUtils"],function(p,c,n,l,k){Object.defineProperty(c,"__esModule",{value:!0});var d=function(d){return k.glslifyDefineMap({VERTEX_COLORS:d.vertexColors,SLICE:d.slice})};c.colorPass={name:"color-color",shaders:function(c){return{vertexShader:d(c)+l.resolveIncludes("materials/color/color.vert"),fragmentShader:d(c)+l.resolveIncludes("materials/color/color.frag")}},attributes:n.Default3D}})},"esri/views/3d/webgl-engine/shaders/MiscPrograms":function(){define(["require",
"exports","../lib/DefaultVertexAttributeLocations","./sources/resolver"],function(p,c,n,l){Object.defineProperty(c,"__esModule",{value:!0});c.blendLayers={name:"blend-layers",shaders:{vertexShader:l.resolveIncludes("misc/blendLayers.vert"),fragmentShader:l.resolveIncludes("misc/blendLayers.frag")},attributes:n.Default3D};c.texOnly={name:"tex-only",shaders:{vertexShader:l.resolveIncludes("misc/texOnly.vert"),fragmentShader:l.resolveIncludes("misc/texOnly.frag")},attributes:n.Default3D}})},"esri/views/3d/webgl-engine/lib/GLMaterialRep":function(){define(["require",
"exports","../../../../core/compilerUtils","./Util"],function(p,c,n,l){var k=function(){function d(d){this.refCnt=0;this.glMaterial=d}d.prototype.incRefCnt=function(){++this.refCnt};d.prototype.decRefCnt=function(){--this.refCnt;l.assert(0<=this.refCnt)};d.prototype.getRefCnt=function(){return this.refCnt};d.prototype.getGLMaterial=function(){return this.glMaterial};return d}();p=function(){function c(d,c){this._textureRep=d;this._programRep=c;this._id2glMaterialRef=new Map}c.prototype.acquire=function(d,
c){var b=d.id+"_"+c,a=this._id2glMaterialRef.get(b);null==a?(d=(a=d.getGLMaterials()[c])?new a(d,this._programRep,this._textureRep):void 0,a=new k(d),this._id2glMaterialRef.set(b,a)):d=a.getGLMaterial();a.incRefCnt();d&&this.increaseProgramReferences(d);return d};c.prototype.release=function(d,c){d=d+"_"+c;c=this._id2glMaterialRef.get(d);c.decRefCnt();if(0===c.getRefCnt()){if(c=c.getGLMaterial())this.decreaseProgramReferences(c),c.dispose();this._id2glMaterialRef.delete(d)}};c.prototype.updateMaterialParameters=
function(c){for(var f=0,b=d;f<b.length;f++){var a=this._id2glMaterialRef.get(c+"_"+b[f]);a&&a.getGLMaterial()&&this.updateParamsForMat(a.getGLMaterial())}};c.prototype.updateParamsForMat=function(d){d.updateParameters&&(this.decreaseProgramReferences(d),d.updateParameters(),this.increaseProgramReferences(d))};c.prototype.increaseProgramReferences=function(d){d=d.getPrograms();for(var c=this._programRep,b=0;b<d.length;b++)c.increaseRefCount(d[b])};c.prototype.decreaseProgramReferences=function(d){d=
d.getPrograms();for(var c=this._programRep,b=0;b<d.length;b++)c.decreaseRefCount(d[b])};return c}();var d=n.tuple("color","depth","depthShadowMap","normal","highlight");return p})},"esri/views/3d/webgl-engine/lib/ProgramRepository":function(){define(["require","exports","./Util","../../../webgl/programUtils"],function(p,c,n,l){return function(){function c(d,c){void 0===c&&(c="");this._rctx=d;this._shaderPrefix=c;this._programCacheByTemplate=new Map;this._programRefCount=[];this._commonUniforms={model:[],
modelNormal:[],lightDirection:[],proj:[],shadowMapDistance:[],viewportPixelSz:[],lightingMainDirection:[]}}c.prototype.dispose=function(){this._programCacheByTemplate.forEach(function(d){d.programs.forEach(function(d){d.dispose()})});this._rctx=this._commonUniforms=this._programRefCount=this._programCacheByTemplate=null};c.prototype.getProgram=function(d,c){var g=this;this._programCacheByTemplate.has(d)||this.addProgramTemplate(d,function(c){return l.createProgram(g._rctx,d,c,g._shaderPrefix)});return this.getProgramTemplateInstance(d,
c)};c.prototype.addProgramTemplate=function(d,c){this._programCacheByTemplate.set(d,{constructor:c,programs:new Map})};c.prototype.getProgramTemplateInstance=function(d,c){if(d=this._programCacheByTemplate.get(d)){var g=c?JSON.stringify(c):"default";d.programs.has(g)||(c=d.constructor(c),d.programs.set(g,c));return d.programs.get(g)}return null};c.prototype.getProgramsUsingUniform=function(d){return this._commonUniforms[d]||[]};c.prototype.increaseRefCount=function(d){var c=d.id;this._programRefCount[c]?
this._programRefCount[c]++:(this._programRefCount[c]=1,this._findCommonUniforms(d))};c.prototype.decreaseRefCount=function(d){var c=d.id;1<this._programRefCount[c]?this._programRefCount[c]--:(this._forgetCommonUniforms(d),this._programRefCount[c]=0)};c.prototype._findCommonUniforms=function(d){for(var c in this._commonUniforms)d.hasUniform(c)&&(n.assert(-1===this._commonUniforms[c].indexOf(d),"common uniforms of program have already been determined"),this._commonUniforms[c].push(d))};c.prototype._forgetCommonUniforms=
function(d){for(var c in this._commonUniforms){var g=this._commonUniforms[c],f=g.indexOf(d);-1<f&&(g[f]=g[g.length-1],g.pop())}};return c}()})},"esri/views/3d/webgl-engine/lib/TextureRepository":function(){define(["require","exports","../../../../core/Logger","./Util","../../../webgl/Texture"],function(p,c,n,l,k){var d=n.getLogger("esri.views.3d.webgl-engine.lib.TextureRepository");p=function(){function c(d,c,b,a){this.NUM_PARALLEL=8;this._fallbackTextureTransparent=this._fallbackTexture=null;this.textures=
d;this._programRepository=c;this.getViewportToRestore=b;this._rctx=a;this.NUM_PARALLEL=8;this.id2textureRef={};this.loading={};this._queue=[];this.listeners=[];this.maxMaxAnisotropy=(this.afExt=a.capabilities.textureFilterAnisotropic)?a.parameters.maxMaxAnisotropy:1;this.maxAnisotropy=Math.min(8,this.maxMaxAnisotropy);this._needsRender=!0;this._fallbackTextureData=new Uint8Array(256);this._fallbackTextureTransparentData=new Uint8Array(256);for(d=0;d<this._fallbackTextureData.length;++d)this._fallbackTextureData[d]=
255,this._fallbackTextureTransparentData[d]=0!==(d+1)%4?255:0;this._fallbackTextureDesc={target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,width:8,height:8,maxAnisotropy:8}}c.prototype.resetNeedsRender=function(){this._needsRender=!1};c.prototype.needsRender=function(){return this._needsRender};c.prototype.acquire=function(g,f,b){var a=this,e=this.id2textureRef[g];if(null==e){var m=this.textures[g];l.assert(void 0!==m);m.setUnloadFunc(this._unload.bind(this));f=!0===f;var h=this._createGLTextureDescription(m),
e=new c.TextureRef(null);l.assert(null==this.id2textureRef[g]);this.id2textureRef[g]=e;if(m.initializeThroughRender)g=m.initializeThroughRender(this._rctx,h),e.setGLTexture(g),b&&b(e);else if(m.deferredLoading())this.getLoadingCount()<this.NUM_PARALLEL?this._loadImage(g,h,b):this._queue.push([g,h,b]);else try{m.initializeThroughUpload(this._rctx,h,this._programRepository,this.getViewportToRestore(),function(d){e.setGLTexture(d);a._needsRender=!0;b&&b(e)})}catch(u){d.error("#acquire","Error loading texture: "+
u.toString())}null==e.getGLTexture()&&e.setGLTexture(f?this.fallbackTextureTransparent:this.fallbackTexture);this._needsRender=!0}e.incRefCnt();return e};c.prototype.release=function(d){d=this.id2textureRef[d];void 0!==d&&(d.decRefCnt(),l.assert(0<=d.getRefCnt()))};c.prototype.getLoadingCount=function(){return Object.keys(this.loading).length};c.prototype.getTexture=function(d){return this.textures[d]};c.prototype.getMaxAnisotropy=function(){return this.maxAnisotropy};c.prototype._unload=function(d){var c=
this.id2textureRef[d];void 0!==c&&((c=c.getGLTexture())&&c!==this.fallbackTextureTransparent&&c!==this.fallbackTexture&&c.dispose(),delete this.id2textureRef[d]);this.next(d)};c.prototype._createGLTextureDescription=function(d){return{target:3553,pixelFormat:6408,dataType:5121,maxAnisotropy:this.afExt&&d.params&&d.params.mipmap&&!d.params.disableAnisotropy?this.maxAnisotropy:void 0,wrapMode:d.params&&d.params.wrap}};c.prototype.next=function(d){if(d in this.loading){delete this.loading[d];var c=Object.keys(this.id2textureRef),
b=Object.keys(this.loading);this.listeners.forEach(function(a){a(d,c,b)});this.processQueue()}};c.prototype._loadImage=function(d,c,b){var a=this;l.assert(null==this.loading[d]);this.loading[d]=!0;var e=this.textures[d];l.assert(void 0!==e);setTimeout(function(){var f=a.id2textureRef[d];f&&f.getRefCnt()&&e.initializeThroughUpload(a._rctx,c,a._programRepository,a.getViewportToRestore(),function(c){a.next(d);a._needsRender=!0;f&&f.getRefCnt()&&(f.setGLTexture(c),b&&b(f))})},0)};c.prototype.processQueue=
function(){for(var d=[],c=0;c<this._queue.length;++c){var b=this._queue[c][0],a=this.id2textureRef[b];void 0!==a&&(0===a.getRefCnt()?(a.getGLTexture().dispose(),delete this.id2textureRef[b]):d.push(this._queue[c]))}this._queue=d;d=Math.min(this.NUM_PARALLEL-Object.keys(this.loading).length,this._queue.length);for(c=0;c<d;++c)this._loadImage(this._queue[c][0],this._queue[c][1],this._queue[c][2]);this._queue.splice(0,d)};Object.defineProperty(c.prototype,"fallbackTexture",{get:function(){this._fallbackTexture||
(this._fallbackTexture=new k(this._rctx,this._fallbackTextureDesc,this._fallbackTextureData));return this._fallbackTexture},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"fallbackTextureTransparent",{get:function(){this._fallbackTextureTransparent||(this._fallbackTextureTransparent=new k(this._rctx,this._fallbackTextureDesc,this._fallbackTextureTransparentData));return this._fallbackTextureTransparent},enumerable:!0,configurable:!0});return c}();(function(d){var c=function(){function d(b){this._glTexture=
null;this._refCount=0;this._glTexture=b}d.prototype.incRefCnt=function(){++this._refCount};d.prototype.decRefCnt=function(){--this._refCount;l.assert(0<=this._refCount)};d.prototype.getRefCnt=function(){return this._refCount};d.prototype.setGLTexture=function(b){this._glTexture=b};d.prototype.getGLTexture=function(){return this._glTexture};return d}();d.TextureRef=c})(p||(p={}));return p})},"esri/views/3d/webgl-engine/lib/tracer":function(){define(["require","exports","./webgl-debug","../../../webgl/capabilities/isWebGL2Context"],
function(p,c,n,l){Object.defineProperty(c,"__esModule",{value:!0});var k=null,d=[];c.enabled=!1;c.begin=function(){c.enabled&&(k=[])};c.trace=function(d){c.enabled&&null!=k&&k.push(d)};c.end=function(){if(c.enabled){var h=k;k=null;h&&(d.forEach(function(d){return d(h)}),d.length=0);return h}};c.instrumentContext=function(d){return c.enabled?l.default(d)?(console.warn("WebGL tracer is not supported on a WebGL2 Context"),d):n.makeDebugContext(d,void 0,function(d,f){c.enabled&&k&&k.push("gl."+d+"("+
n.glFunctionArgsToString(d,f)+")")}):d};c.request=function(c){d.push(c)}})},"esri/views/3d/webgl-engine/lib/webgl-debug":function(){define([],function(){function p(a){if(null==f){f={};b={};for(var d in a)"number"==typeof a[d]&&(f[a[d]]=d,b[d]=a[d])}}function c(){if(null==f)throw"WebGLDebugUtils.init(ctx) not called";}function n(a){c();var b=f[a];return void 0!==b?"gl."+b:"/*UNKNOWN WebGL ENUM*/ 0x"+a.toString(16)+""}function l(a,d,c,f){a=g[a];if(void 0!==a&&(a=a[d],void 0!==a&&a[c])){if("object"===
typeof a[c]&&void 0!==a[c].enumBitwiseOr){d=a[c].enumBitwiseOr;c=0;a=[];for(var e=0;e<d.length;++e){var m=b[d[e]];0!==(f&m)&&(c|=m,a.push(n(m)))}return c===f?a.join(" | "):n(f)}return n(f)}return null===f?"null":void 0===f?"undefined":f.toString()}function k(a,b,d){a.__defineGetter__(d,function(){return b[d]});a.__defineSetter__(d,function(a){b[d]=a})}function d(a,b,c,f){function e(a,d){return function(){c&&c(d,arguments);var e=a[d].apply(a,arguments),m=f.getError();0!=m&&(g[m]=!0,b(m,d,arguments));
return e}}f=f||a;p(a);b=b||function(a,b,d){for(var c="",e=d.length,f=0;f<e;++f)c+=(0==f?"":", ")+l(b,e,f,d[f]);a="WebGL error "+n(a)+" in "+b+"("+c+")";window.console&&window.console.error?window.console.error(a):window.console&&window.console.log&&window.console.log(a)};var g={},m={},h;for(h in a)if("function"==typeof a[h])if("getExtension"!=h)m[h]=e(a,h);else{var q=e(a,h);m[h]=function(){var e=q.apply(a,arguments);return d(e,b,c,f)}}else k(m,a,h);m.getError=function(){for(var b in g)if(g.hasOwnProperty(b)&&
g[b])return g[b]=!1,b;return a.NO_ERROR};return m}function h(a){var b=a.getParameter(a.MAX_VERTEX_ATTRIBS),d=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,d);for(var c=0;c<b;++c)a.disableVertexAttribArray(c),a.vertexAttribPointer(c,4,a.FLOAT,!1,0,0),a.vertexAttrib1f(c,0);a.deleteBuffer(d);b=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS);for(c=0;c<b;++c)a.activeTexture(a.TEXTURE0+c),a.bindTexture(a.TEXTURE_CUBE_MAP,null),a.bindTexture(a.TEXTURE_2D,null);a.activeTexture(a.TEXTURE0);a.useProgram(null);a.bindBuffer(a.ARRAY_BUFFER,
null);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);a.bindFramebuffer(a.FRAMEBUFFER,null);a.bindRenderbuffer(a.RENDERBUFFER,null);a.disable(a.BLEND);a.disable(a.CULL_FACE);a.disable(a.DEPTH_TEST);a.disable(a.DITHER);a.disable(a.SCISSOR_TEST);a.blendColor(0,0,0,0);a.blendEquation(a.FUNC_ADD);a.blendFunc(a.ONE,a.ZERO);a.clearColor(0,0,0,0);a.clearDepth(1);a.clearStencil(-1);a.colorMask(!0,!0,!0,!0);a.cullFace(a.BACK);a.depthFunc(a.LESS);a.depthMask(!0);a.depthRange(0,1);a.frontFace(a.CCW);a.hint(a.GENERATE_MIPMAP_HINT,
a.DONT_CARE);a.lineWidth(1);a.pixelStorei(a.PACK_ALIGNMENT,4);a.pixelStorei(a.UNPACK_ALIGNMENT,4);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1);a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);a.UNPACK_COLORSPACE_CONVERSION_WEBGL&&a.pixelStorei(a.UNPACK_COLORSPACE_CONVERSION_WEBGL,a.BROWSER_DEFAULT_WEBGL);a.polygonOffset(0,0);a.sampleCoverage(1,!1);a.scissor(0,0,a.canvas.width,a.canvas.height);a.stencilFunc(a.ALWAYS,0,4294967295);a.stencilMask(4294967295);a.stencilOp(a.KEEP,a.KEEP,a.KEEP);a.viewport(0,
0,a.canvas.width,a.canvas.height);for(a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT|a.STENCIL_BUFFER_BIT);a.getError(););}var g={enable:{1:{0:!0}},disable:{1:{0:!0}},getParameter:{1:{0:!0}},drawArrays:{3:{0:!0}},drawElements:{4:{0:!0,2:!0}},createShader:{1:{0:!0}},getShaderParameter:{2:{1:!0}},getProgramParameter:{2:{1:!0}},getShaderPrecisionFormat:{2:{0:!0,1:!0}},getVertexAttrib:{2:{1:!0}},vertexAttribPointer:{6:{2:!0}},bindTexture:{2:{0:!0}},activeTexture:{1:{0:!0}},getTexParameter:{2:{0:!0,1:!0}},
texParameterf:{3:{0:!0,1:!0}},texParameteri:{3:{0:!0,1:!0,2:!0}},texImage2D:{9:{0:!0,2:!0,6:!0,7:!0},6:{0:!0,2:!0,3:!0,4:!0}},texSubImage2D:{9:{0:!0,6:!0,7:!0},7:{0:!0,4:!0,5:!0}},copyTexImage2D:{8:{0:!0,2:!0}},copyTexSubImage2D:{8:{0:!0}},generateMipmap:{1:{0:!0}},compressedTexImage2D:{7:{0:!0,2:!0}},compressedTexSubImage2D:{8:{0:!0,6:!0}},bindBuffer:{2:{0:!0}},bufferData:{3:{0:!0,2:!0}},bufferSubData:{3:{0:!0}},getBufferParameter:{2:{0:!0,1:!0}},pixelStorei:{2:{0:!0,1:!0}},readPixels:{7:{4:!0,5:!0}},
bindRenderbuffer:{2:{0:!0}},bindFramebuffer:{2:{0:!0}},checkFramebufferStatus:{1:{0:!0}},framebufferRenderbuffer:{4:{0:!0,1:!0,2:!0}},framebufferTexture2D:{5:{0:!0,1:!0,2:!0}},getFramebufferAttachmentParameter:{3:{0:!0,1:!0,2:!0}},getRenderbufferParameter:{2:{0:!0,1:!0}},renderbufferStorage:{4:{0:!0,1:!0}},clear:{1:{0:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]}}},depthFunc:{1:{0:!0}},blendFunc:{2:{0:!0,1:!0}},blendFuncSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},blendEquation:{1:{0:!0}},
blendEquationSeparate:{2:{0:!0,1:!0}},stencilFunc:{3:{0:!0}},stencilFuncSeparate:{4:{0:!0,1:!0}},stencilMaskSeparate:{2:{0:!0}},stencilOp:{3:{0:!0,1:!0,2:!0}},stencilOpSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},cullFace:{1:{0:!0}},frontFace:{1:{0:!0}},drawArraysInstancedANGLE:{4:{0:!0}},drawElementsInstancedANGLE:{5:{0:!0,2:!0}},blendEquationEXT:{1:{0:!0}}},f=null,b=null;return{init:p,mightBeEnum:function(a){c();return void 0!==f[a]},glEnumToString:n,glFunctionArgToString:l,glFunctionArgsToString:function(a,
b){for(var d="",c=b.length,e=0;e<c;++e)d+=(0==e?"":", ")+l(a,c,e,b[e]);return d},makeDebugContext:d,makeLostContextSimulatingCanvas:function(a){function b(a){return"function"==typeof a?a:function(b){a.handleEvent(b)}}function d(){for(var a=Object.keys(G),b=0;b<a.length;++b)delete G[a]}function c(){++C;A||D==C&&a.loseContext()}function f(a,b){var d=a[b];return function(){c();if(!A)return d.apply(a,arguments)}}function g(a){return{statusMessage:a,preventDefault:function(){E=!0}}}function l(a){for(var b in a)"function"==
typeof a[b]?w[b]=f(a,b):k(w,a,b);w.getError=function(){c();if(!A)for(var a;a=n.getError();)G[a]=!0;for(a in G)if(G[a])return delete G[a],a;return w.NO_ERROR};var d="createBuffer createFramebuffer createProgram createRenderbuffer createShader createTexture".split(" ");for(b=0;b<d.length;++b){var e=d[b];w[e]=function(b){return function(){c();if(A)return null;var d=b.apply(a,arguments);d.__webglDebugContextLostId__=z;B.push(d);return d}}(a[e])}d="getActiveAttrib getActiveUniform getBufferParameter getContextAttributes getAttachedShaders getFramebufferAttachmentParameter getParameter getProgramParameter getProgramInfoLog getRenderbufferParameter getShaderParameter getShaderInfoLog getShaderSource getTexParameter getUniform getUniformLocation getVertexAttrib".split(" ");
for(b=0;b<d.length;++b)e=d[b],w[e]=function(b){return function(){c();return A?null:b.apply(a,arguments)}}(w[e]);d="isBuffer isEnabled isFramebuffer isProgram isRenderbuffer isShader isTexture".split(" ");for(b=0;b<d.length;++b)e=d[b],w[e]=function(b){return function(){c();return A?!1:b.apply(a,arguments)}}(w[e]);w.checkFramebufferStatus=function(b){return function(){c();return A?w.FRAMEBUFFER_UNSUPPORTED:b.apply(a,arguments)}}(w.checkFramebufferStatus);w.getAttribLocation=function(b){return function(){c();
return A?-1:b.apply(a,arguments)}}(w.getAttribLocation);w.getVertexAttribOffset=function(b){return function(){c();return A?0:b.apply(a,arguments)}}(w.getVertexAttribOffset);w.isContextLost=function(){return A};return w}var n,w,v=[],p=[];w={};var z=1,A=!1,B=[],D=0,C=0,E=!1,H=0,G={};a.getContext=function(b){return function(){var d=b.apply(a,arguments);if(d instanceof WebGLRenderingContext){if(d!=n){if(n)throw"got different context";n=d;w=l(n)}return w}return d}}(a.getContext);(function(a){var d=a.addEventListener;
a.addEventListener=function(c,e,f){switch(c){case "webglcontextlost":v.push(b(e));break;case "webglcontextrestored":p.push(b(e));break;default:d.apply(a,arguments)}}})(a);a.loseContext=function(){if(!A){A=!0;D=0;for(++z;n.getError(););d();G[n.CONTEXT_LOST_WEBGL]=!0;var b=g("context lost"),c=v.slice();setTimeout(function(){for(var d=0;d<c.length;++d)c[d](b);0<=H&&setTimeout(function(){a.restoreContext()},H)},0)}};a.restoreContext=function(){A&&p.length&&setTimeout(function(){if(!E)throw"can not restore. webglcontestlost listener did not call event.preventDefault";
for(var a=0;a<B.length;++a){var b=B[a];b instanceof WebGLBuffer?n.deleteBuffer(b):b instanceof WebGLFramebuffer?n.deleteFramebuffer(b):b instanceof WebGLProgram?n.deleteProgram(b):b instanceof WebGLRenderbuffer?n.deleteRenderbuffer(b):b instanceof WebGLShader?n.deleteShader(b):b instanceof WebGLTexture&&n.deleteTexture(b)}h(n);A=!1;C=0;E=!1;for(var a=p.slice(),b=g("context restored"),d=0;d<a.length;++d)a[d](b)},0)};a.loseContextInNCalls=function(a){if(A)throw"You can not ask a lost contet to be lost";
D=C+a};a.getNumCalls=function(){return C};a.setRestoreTimeout=function(a){H=a};return a},resetToInitialState:h}})},"esri/views/webgl/capabilities/isWebGL2Context":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});c.default=function(c){return window.WebGL2RenderingContext&&c instanceof window.WebGL2RenderingContext}})},"esri/views/3d/webgl-engine/parts/ScreenshotManager":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/maybe ../../../../core/promiseUtils ../lib/AutoDisposable ../../../support/screenshotUtils ../../../webgl/FramebufferObject".split(" "),
function(p,c,n,l,k,d,h,g,f,b){Object.defineProperty(c,"__esModule",{value:!0});p=function(a){function c(b,d,c,e,f){void 0===e&&(e=null);void 0===f&&(f=!0);var g=a.call(this)||this;g._rctx=b;g._renderScene=d;g._requestRenderScene=c;g._renderOverlay=e;g.supersample=f;g._screenshotQueue=[];return g}l(c,a);c.prototype.dispose=function(){this._rctx=null};c.prototype.takeScreenshot=function(a){var b=this;this._requestRenderScene();var d=h.createResolver(function(){b._screenshotQueue=b._screenshotQueue.filter(function(a){return a.resolver!==
d})});this._screenshotQueue.push({settings:a,resolver:d});return d.promise};c.prototype.update=function(a){if(0!==this._screenshotQueue.length){for(var b=0,d=this._screenshotQueue;b<d.length;b++){var c=d[b];if(this.isDisposed)c.resolver.reject();else{var e=n({},c.settings,{pixelRatio:c.settings.pixelRatio*a.viewCamera.pixelRatio}),g=this._ensureScreenshotEncodeCanvas(),m=this._renderScreenshot(a,e),e=f.encodeResult(m,e,g,{flipY:!0,premultipliedAlpha:!0});c.resolver(e)}}this._screenshotQueue=[]}};
c.prototype._renderScreenshotOverlay=function(a,b,c){if(!d.isNone(this._renderOverlay)){a.width=b.width;a.height=b.height;var e=a.getContext("2d"),f=c.pixelRatio;e.save();e.translate(0,b.height);e.scale(1,-1);c.region&&e.translate(-c.region.x,-c.region.y);e.scale(f,f);this._renderOverlay(a,b);e.restore()}};c.prototype._readbackScreenshot=function(a){return a.resample?this._readbackScreenshotResampled(a):this._readbackScreenshotImmediate(a)};c.prototype._readbackScreenshotResampled=function(a){var b=
a.framebufferWidth,d=a.framebufferHeight,c=a.region,e=a.resample,g=this._ensureScreenshotEncodeCanvas(),m=f.createEmptyImageData(b,d,g);this._rctx.gl.readPixels(0,0,b,d,6408,5121,new Uint8Array(m.data.buffer));this._renderScreenshotOverlay(g,m,n({},a,{region:null}));a=f.createEmptyImageData(c.width,c.height,g);return f.resampleHermite(m,a,!0,e.region.x,d-(e.region.y+e.region.height),e.region.width,e.region.height)};c.prototype._readbackScreenshotImmediate=function(a){var b=a.framebufferHeight,d=a.region,
c=this._ensureScreenshotEncodeCanvas(),e=f.createEmptyImageData(d.width,d.height,c);this._rctx.gl.readPixels(d.x,b-(d.y+d.height),d.width,d.height,6408,5121,new Uint8Array(e.data.buffer));this._renderScreenshotOverlay(c,e,a);return e};c.prototype._renderScreenshot=function(a,d){var c=null,e=a.viewCamera,f=d.framebufferWidth,g=d.framebufferHeight,m=!1,h=a.frameHasSlicePlane&&d.disableSlice;if(h=f!==e.fullWidth||g!==e.fullHeight||h){var k=e.clone();k.fullWidth=f;k.fullHeight=g;k.pixelRatio=d.pixelRatio;
c=e.fovX-k.fovX;m=e.fovY-k.fovY;0>c&&c<m?k.fovX=e.fovX:0>m&&m<c&&(k.fovY=e.fovY);a.drapedRenderer.forceUpdate&&a.drapedRenderer.forceUpdate(k);m=!0;c=new b(this._rctx,{width:k.fullWidth,height:k.fullHeight,colorTarget:0,depthStencilTarget:3});this._renderScene(c,k,d.disableSlice)}d=this._readbackScreenshot(d);if(h&&!this._rctx.contextAttributes.alpha)for(h=3;h<d.data.length;h+=4)d.data[h]=255;c&&c.dispose();this._rctx.bindFramebuffer(null);m&&a.drapedRenderer.forceUpdate&&a.drapedRenderer.forceUpdate(e);
return d};c.prototype._ensureScreenshotEncodeCanvas=function(){this._screenshotEncodeCanvas||(this._screenshotEncodeCanvas=document.createElement("canvas"));return this._screenshotEncodeCanvas};return c}(g.AutoDisposable);c.ScreenshotManager=p})},"esri/views/support/screenshotUtils":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../core/compilerUtils","../../core/mathUtils"],function(p,c,n,l,k){function d(a,d){var c=a||{},e=c.format,g=c.quality,m=c.rotation,c=c.disableSlice,
h=!a.ignorePadding&&d.padding||t,r;r=d.width-h.left-h.right;d=d.height-h.top-h.bottom;var n=h=0,x=r,p=d;if(a&&a.area){var h=Math.floor(a.area.x)||0,n=Math.floor(a.area.y)||0,H=null!=a.area.width?Math.floor(a.area.width):null,G=null!=a.area.height?Math.floor(a.area.height):null,x=x-h,p=p-n;null!=H&&null!=G?(x=Math.min(x,H),p=Math.min(p,G)):null==H&&null!=G?(H=Math.min(x,H),p*=H/x,x=H):null!=H&&null==G&&(H=Math.min(p,G),x*=H/p,p=H)}h=b({x:h,y:n,width:x,height:p},a);n=Math.floor(Math.max(h.x,0));x=Math.floor(Math.max(h.y,
0));r={x:n,y:x,width:Math.floor(Math.min(h.width,r-n)),height:Math.floor(Math.min(h.height,d-x))};d=r.width/r.height;h=h.width/h.height;h!==d&&(h>d?(d=Math.floor(r.width/h),r={x:r.x,y:Math.floor(r.y+(r.height-d)/2),width:r.width,height:d}):(d=Math.floor(r.height*h),r={x:Math.floor(r.x+(r.width-d)/2),y:r.y,width:d,height:r.height}));d=f(a,r);a=d.width;d=d.height;a:switch(e){case "png":case "jpg":case "jpeg":break a;case null:case void 0:e=q;break a;default:l.neverReached(e),e=q}h=u[e];g=k.clamp(null!=
g?g:h,0,100);return{format:e,quality:g,area:r,width:a,height:d,rotation:m,disableSlice:c||!1}}function h(a,b){return a.toDataURL(m[b.format],b.quality/100)}function g(b,d,c){c||(a||(a=document.createElement("canvas"),a.width=1,a.height=1),c=a);return c.getContext("2d").createImageData(b,d)}function f(a,b){if(!a)return b;var d=a.width;a=a.height;if(null!=d&&null!=a)return{width:Math.floor(d),height:Math.floor(a)};if(null==d&&null==a)return b;b=b.width/b.height;return null==a?{width:Math.floor(d),height:Math.floor(d/
b)}:{width:Math.floor(a*b),height:Math.floor(a)}}function b(a,b){if(!b||null==b.width||null==b.height)return a;b=b.width/b.height;var d=a.width/a.height;if(d===b)return a;if(d<b)return a.width=Math.floor(a.height*b),a.height=a.height,a;a.width=a.width;a.height=Math.floor(a.width/b);return a}Object.defineProperty(c,"__esModule",{value:!0});c.completeUserSettings=d;c.toRenderSettings=function(a,b){var c=d(a,b),e=c.area,f=c.width/e.width,g=!a.ignorePadding&&b.padding||t,m=g.left+g.right,h=g.top+g.bottom;
return{framebufferWidth:Math.floor((b.width-m)*f+m),framebufferHeight:Math.floor((b.height-h)*f+h),region:{x:Math.floor(e.x*f)+g.left,y:Math.floor(e.y*f)+g.top,width:c.width,height:c.height},format:c.format,quality:c.quality,rotation:c.rotation,pixelRatio:f,layers:a&&a.layers?a.layers:[],disableSlice:c.disableSlice}};c.encodeResult=function(a,b,d,c){if(c.premultipliedAlpha)for(var e=a.data,f=e.length,g=0;g<f;g+=4){var m=e[g+3];0<m&&(m/=255,e[g+0]/=m,e[g+1]/=m,e[g+2]/=m)}d.width=a.width;d.height=a.height;
e=d.getContext("2d");e.putImageData(a,0,0);c.flipY&&(e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore());a=e.getImageData(0,0,a.width,a.height);b=h(d,b);d.width=0;d.height=0;return{dataUrl:b,data:a}};c.toDataUrl=h;c.createEmptyImageData=function(a,b,d){if(!a||!b)throw Error("Cannot construct image data without dimensions");if(e)try{return new ImageData(a,b)}catch(v){e=!1}return g(a,b,d)};c.wrapImageData=function(a,b,d,c){if(!b||
!d)throw Error("Cannot construct image data without dimensions");if(e)try{return new ImageData(a,b,d)}catch(y){e=!1}b=g(b,d,c);b.data.set(a,0);return b};c.resampleHermite=function(a,b,d,c,e,f,g,m){void 0===c&&(c=0);void 0===e&&(e=0);void 0===f&&(f=a.width-c);void 0===g&&(g=a.height-e);void 0===m&&(m=!1);var h=a.data,k=b.width,l=b.height,q=b.data;f/=k;g/=l;var r=Math.ceil(f/2),n=Math.ceil(g/2);a=a.width;for(var t=0;t<l;t++)for(var u=0;u<k;u++){for(var x=4*(u+(m?l-t-1:t)*k),v=0,w=0,p=0,y=0,z=0,A=0,
B=(t+.5)*g,L=Math.floor(t*g);L<(t+1)*g;L++)for(var F=Math.abs(B-(L+.5))/n,Y=(u+.5)*f,F=F*F,X=Math.floor(u*f);X<(u+1)*f;X++){var R=Math.abs(Y-(X+.5))/r,R=Math.sqrt(F+R*R);if(!(1<=R)){var R=2*R*R*R-3*R*R+1,Z=4*(c+X+(e+L)*a),A=A+R*h[Z+3],w=w+R;!d&&255>h[Z+3]&&(R=R*h[Z+3]/255);p+=R*h[Z];y+=R*h[Z+1];z+=R*h[Z+2];v+=R}}q[x]=p/v;q[x+1]=y/v;q[x+2]=z/v;q[x+3]=A/w}return b};c.screenshotSuperSampleSettings=function(a,b){if(!b)return a;b=a.framebufferWidth;var d=a.framebufferHeight,c=a.region,e=Math.min(8,2048/
Math.max(b,d));return 1.5>e?a:n({},a,{framebufferWidth:Math.round(b*e),framebufferHeight:Math.round(d*e),pixelRatio:a.pixelRatio*e,resample:{region:{x:Math.round(c.x*e),y:Math.round(c.y*e),width:Math.round(c.width*e),height:Math.round(c.height*e)},width:b,height:d}})};var a=null,e=!0,m={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},q="jpg",u={png:100,jpg:98,jpeg:98},t={top:0,right:0,bottom:0,left:0}})},"esri/views/3d/webgl-engine/shaders/globalOptions":function(){define(["require","exports",
"../../../webgl/programUtils"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.glslifyGlobalOptions=function(c){return n.glslifyDefineMap({VIEWING_MODE:{value:c.viewingMode,options:{global:"VIEWING_MODE_GLOBAL",local:"VIEWING_MODE_LOCAL"}}})}})},"esri/views/webgl/RenderingContext":function(){define("require exports ../../core/has ./enums ./InstanceCounter ./renderState ./capabilities/isWebGL2Context ./capabilities/load".split(" "),function(p,c,n,l,k,d,h,g){function f(b,a){switch(b){case 0:return 2*
a;case 4:return a/3;case 5:return a-2;case 6:return a-2}return 0}return function(){function b(a,b){var c=this;this.gl=null;this._blendEnabled=!1;this._blendColorState={r:0,g:0,b:0,a:0};this._blendFunctionState={srcRGB:1,dstRGB:0,srcAlpha:1,dstAlpha:0};this._blendEquationState={mode:32774,modeAlpha:32774};this._colorMaskState={r:!0,g:!0,b:!0,a:!0};this._polygonCullingEnabled=!1;this._cullFace=1029;this._frontFace=2305;this._scissorTestEnabled=!1;this._scissorRect={x:0,y:0,width:0,height:0};this._depthTestEnabled=
!1;this._depthFunction=513;this._clearDepth=1;this._depthWriteEnabled=!0;this._depthRange={zNear:0,zFar:1};this._viewport=null;this._polygonOffsetFillEnabled=this._stencilTestEnabled=!1;this._polygonOffset=[0,0];this._stencilFunction={face:1032,func:519,ref:0,mask:1};this._clearStencil=0;this._stencilWriteMask=1;this._stencilOperation={face:1032,fail:7680,zFail:7680,zPass:7680};this._clearColor={r:0,g:0,b:0,a:0};this._activeRenderbuffer=this._activeFramebuffer=this._activeIndexBuffer=this._activeVertexBuffer=
this._activeShaderProgram=null;this._activeTextureUnit=0;this._textureUnitMap={};this._numOfTriangles=this._numOfDrawCalls=0;this.contextVersion=h.default(a)?"webgl2":"webgl";this.gl=a;a instanceof WebGLRenderingContext&&this.gl.getExtension("OES_element_index_uint");this._capabilities=g.loadCapabilities(a,b);a=this.gl.getParameter(this.gl.VIEWPORT);this._viewport={x:a[0],y:a[1],width:a[2],height:a[3]};a=this.capabilities.textureFilterAnisotropic;this._parameters={versionString:this.gl.getParameter(this.gl.VERSION),
maxVertexTextureImageUnits:this.gl.getParameter(this.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),maxVertexAttributes:this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS),maxMaxAnisotropy:a?this.gl.getParameter(a.MAX_TEXTURE_MAX_ANISOTROPY):void 0,maxTextureImageUnits:this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS)};n("esri-webgl-debug")&&(this.instanceCounter=new k);this._stateTracker=new d.StateTracker({setBlending:function(a){a?(c.setBlendingEnabled(!0),c.setBlendEquationSeparate(a.opRgb,a.opAlpha),c.setBlendFunctionSeparate(a.srcRgb,
a.dstRgb,a.srcAlpha,a.dstAlpha),a=a.color,c.setBlendColor(a.r,a.g,a.b,a.a)):c.setBlendingEnabled(!1)},setCulling:function(a){a?(c.setFaceCullingEnabled(!0),c.setCullFace(a.face),c.setFrontFace(a.mode)):c.setFaceCullingEnabled(!1)},setPolygonOffset:function(a){a?(c.setPolygonOffsetFillEnabled(!0),c.setPolygonOffset(a.factor,a.units)):c.setPolygonOffsetFillEnabled(!1)},setDepthTest:function(a){a?(c.setDepthTestEnabled(!0),c.setDepthFunction(a.func)):c.setDepthTestEnabled(!1)},setStencilTest:function(a){if(a){c.setStencilTestEnabled(!0);
var b=a.function;c.setStencilFunction(b.func,b.ref,b.mask);a=a.operation;c.setStencilOp(a.fail,a.zFail,a.zPass)}else c.setStencilTestEnabled(!1)},setDepthWrite:function(a){a?(c.setDepthWriteEnabled(!0),c.setDepthRange(a.zNear,a.zFar)):c.setDepthWriteEnabled(!1)},setColorWrite:function(a){a?c.setColorMask(a.r,a.g,a.b,a.a):c.setColorMask(!1,!1,!1,!1)},setStencilWrite:function(a){a?c.setStencilWriteMask(a.mask):c.setStencilWriteMask(0)}});this.enforceState()}Object.defineProperty(b.prototype,"contextAttributes",
{get:function(){return this.gl.getContextAttributes()},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"parameters",{get:function(){return this._parameters},enumerable:!0,configurable:!0});b.prototype.dispose=function(){this.bindVAO(null);this.unbindBuffer(34962);this.unbindBuffer(34963);this._textureUnitMap={};n("esri-webgl-debug")&&this.instanceCounter.printResourceCount();this.gl=null};b.prototype.setPipelineState=function(a){this._stateTracker.setPipeline(a)};b.prototype.setBlendingEnabled=
function(a){this._blendEnabled!==a&&(!0===a?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._blendEnabled=a,this._stateTracker.invalidateBlending())};b.prototype.setBlendColor=function(a,b,d,c){if(a!==this._blendColorState.r||b!==this._blendColorState.g||d!==this._blendColorState.b||c!==this._blendColorState.a)this.gl.blendColor(a,b,d,c),this._blendColorState.r=a,this._blendColorState.g=b,this._blendColorState.b=d,this._blendColorState.a=c,this._stateTracker.invalidateBlending()};
b.prototype.setBlendFunction=function(a,b){if(a!==this._blendFunctionState.srcRGB||b!==this._blendFunctionState.dstRGB)this.gl.blendFunc(a,b),this._blendFunctionState.srcRGB=a,this._blendFunctionState.srcAlpha=a,this._blendFunctionState.dstRGB=b,this._blendFunctionState.dstAlpha=b,this._stateTracker.invalidateBlending()};b.prototype.setBlendFunctionSeparate=function(a,b,d,c){if(this._blendFunctionState.srcRGB!==a||this._blendFunctionState.srcAlpha!==d||this._blendFunctionState.dstRGB!==b||this._blendFunctionState.dstAlpha!==
c)this.gl.blendFuncSeparate(a,b,d,c),this._blendFunctionState.srcRGB=a,this._blendFunctionState.srcAlpha=d,this._blendFunctionState.dstRGB=b,this._blendFunctionState.dstAlpha=c,this._stateTracker.invalidateBlending()};b.prototype.setBlendEquation=function(a){this._blendEquationState.mode!==a&&(this.gl.blendEquation(a),this._blendEquationState.mode=a,this._blendEquationState.modeAlpha=a,this._stateTracker.invalidateBlending())};b.prototype.setBlendEquationSeparate=function(a,b){if(this._blendEquationState.mode!==
a||this._blendEquationState.modeAlpha!==b)this.gl.blendEquationSeparate(a,b),this._blendEquationState.mode=a,this._blendEquationState.modeAlpha=b,this._stateTracker.invalidateBlending()};b.prototype.setColorMask=function(a,b,d,c){if(this._colorMaskState.r!==a||this._colorMaskState.g!==b||this._colorMaskState.b!==d||this._colorMaskState.a!==c)this.gl.colorMask(a,b,d,c),this._colorMaskState.r=a,this._colorMaskState.g=b,this._colorMaskState.b=d,this._colorMaskState.a=c,this._stateTracker.invalidateColorWrite()};
b.prototype.setClearColor=function(a,b,d,c){if(this._clearColor.r!==a||this._clearColor.g!==b||this._clearColor.b!==d||this._clearColor.a!==c)this.gl.clearColor(a,b,d,c),this._clearColor.r=a,this._clearColor.g=b,this._clearColor.b=d,this._clearColor.a=c};b.prototype.setFaceCullingEnabled=function(a){this._polygonCullingEnabled!==a&&(!0===a?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._polygonCullingEnabled=a,this._stateTracker.invalidateCulling())};b.prototype.setPolygonOffsetFillEnabled=
function(a){this._polygonOffsetFillEnabled!==a&&(!0===a?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._polygonOffsetFillEnabled=a,this._stateTracker.invalidatePolygonOffset())};b.prototype.setPolygonOffset=function(a,b){if(this._polygonOffset[0]!==a||this._polygonOffset[1]!==b)this._polygonOffset[0]=a,this._polygonOffset[1]=b,this.gl.polygonOffset(a,b),this._stateTracker.invalidatePolygonOffset()};b.prototype.setCullFace=function(a){this._cullFace!==
a&&(this.gl.cullFace(a),this._cullFace=a,this._stateTracker.invalidateCulling())};b.prototype.setFrontFace=function(a){this._frontFace!==a&&(this.gl.frontFace(a),this._frontFace=a,this._stateTracker.invalidateCulling())};b.prototype.setScissorTestEnabled=function(a){this._scissorTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._scissorTestEnabled=a)};b.prototype.setScissorRect=function(a,b,d,c){if(this._scissorRect.x!==a||this._scissorRect.y!==
b||this._scissorRect.width!==d||this._scissorRect.height!==c)this.gl.scissor(a,b,d,c),this._scissorRect.x=a,this._scissorRect.y=b,this._scissorRect.width=d,this._scissorRect.height=c};b.prototype.setDepthTestEnabled=function(a){this._depthTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST),this._depthTestEnabled=a,this._stateTracker.invalidateDepthTest())};b.prototype.setClearDepth=function(a){this._clearDepth!==a&&(this.gl.clearDepth(a),this._clearDepth=
a)};b.prototype.setDepthFunction=function(a){this._depthFunction!==a&&(this.gl.depthFunc(a),this._depthFunction=a,this._stateTracker.invalidateDepthTest())};b.prototype.setDepthWriteEnabled=function(a){this._depthWriteEnabled!==a&&(this.gl.depthMask(a),this._depthWriteEnabled=a,this._stateTracker.invalidateDepthWrite())};b.prototype.setDepthRange=function(a,b){if(this._depthRange.zNear!==a||this._depthRange.zFar!==b)this.gl.depthRange(a,b),this._depthRange.zNear=a,this._depthRange.zFar=b,this._stateTracker.invalidateDepthWrite()};
b.prototype.setStencilTestEnabled=function(a){this._stencilTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._stencilTestEnabled=a,this._stateTracker.invalidateStencilTest())};b.prototype.setClearStencil=function(a){a!==this._clearStencil&&(this.gl.clearStencil(a),this._clearStencil=a)};b.prototype.setStencilFunction=function(a,b,d){if(this._stencilFunction.func!==a||this._stencilFunction.ref!==b||this._stencilFunction.mask!==d)this.gl.stencilFunc(a,
b,d),this._stencilFunction.face=1032,this._stencilFunction.func=a,this._stencilFunction.ref=b,this._stencilFunction.mask=d,this._stateTracker.invalidateStencilTest()};b.prototype.setStencilFunctionSeparate=function(a,b,d,c){if(this._stencilFunction.face!==a||this._stencilFunction.func!==b||this._stencilFunction.ref!==d||this._stencilFunction.mask!==c)this.gl.stencilFuncSeparate(a,b,d,c),this._stencilFunction.face=a,this._stencilFunction.func=b,this._stencilFunction.ref=d,this._stencilFunction.mask=
c,this._stateTracker.invalidateStencilTest()};b.prototype.setStencilWriteMask=function(a){this._stencilWriteMask!==a&&(this.gl.stencilMask(a),this._stencilWriteMask=a,this._stateTracker.invalidateStencilWrite())};b.prototype.setStencilOp=function(a,b,d){if(this._stencilOperation.fail!==a||this._stencilOperation.zFail!==b||this._stencilOperation.zPass!==d)this.gl.stencilOp(a,b,d),this._stencilOperation.face=1032,this._stencilOperation.fail=a,this._stencilOperation.zFail=b,this._stencilOperation.zPass=
d,this._stateTracker.invalidateStencilTest()};b.prototype.setStencilOpSeparate=function(a,b,d,c){if(this._stencilOperation.face!==a||this._stencilOperation.fail!==b||this._stencilOperation.zFail!==d||this._stencilOperation.zPass!==c)this.gl.stencilOpSeparate(a,b,d,c),this._stencilOperation.face=a,this._stencilOperation.face=a,this._stencilOperation.fail=b,this._stencilOperation.zFail=d,this._stencilOperation.zPass=c,this._stateTracker.invalidateStencilTest()};b.prototype.setActiveTexture=function(a){var b=
this._activeTextureUnit;0<=a&&a!==this._activeTextureUnit&&(this.gl.activeTexture(l.BASE_TEXTURE_UNIT+a),this._activeTextureUnit=a);return b};b.prototype.clear=function(a){a&&this.gl.clear(a)};b.prototype.clearSafe=function(a){a&&(a&16384&&this.setColorMask(!0,!0,!0,!0),a&256&&this.setDepthWriteEnabled(!0),a&1024&&this.setStencilWriteMask(255),this.gl.clear(a))};b.prototype.drawArrays=function(a,b,d){n("esri-webgl-debug")&&(this._numOfDrawCalls++,this._numOfTriangles+=f(a,d));this.gl.drawArrays(a,
b,d)};b.prototype.drawElements=function(a,b,d,c){n("esri-webgl-debug")&&(this._numOfDrawCalls++,this._numOfTriangles+=f(a,b));5123===d?this.gl.drawElements(a,b,d,c):5125===d&&this.gl.drawElements(a,b,d,c)};b.prototype.logIno=function(){n("esri-webgl-debug")&&console.log("DrawCalls: "+this._numOfDrawCalls+", Triangles: "+this._numOfTriangles)};Object.defineProperty(b.prototype,"capabilities",{get:function(){return this._capabilities},enumerable:!0,configurable:!0});b.prototype.setViewport=function(a,
b,d,c){var e=this._viewport;if(e.x!==a||e.y!==b||e.width!==d||e.height!==c)e.x=a,e.y=b,e.width=d,e.height=c,this.gl.viewport(a,b,d,c)};b.prototype.getViewport=function(){return{x:this._viewport.x,y:this._viewport.y,width:this._viewport.width,height:this._viewport.height}};b.prototype.bindProgram=function(a){a?this._activeShaderProgram!==a&&(a.initialize(),this.gl.useProgram(a.glName),this._activeShaderProgram=a):(this.gl.useProgram(null),this._activeShaderProgram=null)};b.prototype.bindTexture=function(a,
d){void 0===d&&(d=0);-1===b._MAX_TEXTURE_IMAGE_UNITS&&(b._MAX_TEXTURE_IMAGE_UNITS=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS));(d>=b._MAX_TEXTURE_IMAGE_UNITS||0>d)&&console.error("Input texture unit is out of range of available units!");var c=this._textureUnitMap[d];this.setActiveTexture(d);null==a||null==a.glName?(null!=c&&(this.gl.bindTexture(c.descriptor.target,null),c.setBoundToUnit(d,!1)),this._textureUnitMap[d]=null):c&&c.id===a.id?a.applyChanges():(this.gl.bindTexture(a.descriptor.target,
a.glName),a.setBoundToUnit(d,!0),a.applyChanges(),this._textureUnitMap[d]=a)};b.prototype.bindFramebuffer=function(a){a?this._activeFramebuffer!==a&&(a.initialize()||this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,a.glName),this._activeFramebuffer=a):(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this._activeFramebuffer=null)};b.prototype.bindBuffer=function(a){a&&(34962===a.bufferType?this._activeVertexBuffer=b._bindBuffer(this.gl,a,a.bufferType,this._activeVertexBuffer):this._activeIndexBuffer=
b._bindBuffer(this.gl,a,a.bufferType,this._activeIndexBuffer))};b.prototype.bindRenderbuffer=function(a){var b=this.gl;a||(b.bindRenderbuffer(b.RENDERBUFFER,null),this._activeRenderbuffer=null);this._activeRenderbuffer!==a&&(b.bindRenderbuffer(b.RENDERBUFFER,a.glName),this._activeRenderbuffer=a)};b.prototype.unbindBuffer=function(a){34962===a?this._activeVertexBuffer=b._bindBuffer(this.gl,null,a,this._activeVertexBuffer):this._activeIndexBuffer=b._bindBuffer(this.gl,null,a,this._activeIndexBuffer)};
b.prototype.bindVAO=function(a){a?this._activeVertexArrayObject&&this._activeVertexArrayObject.id===a.id||(a.bind(),this._activeVertexArrayObject=a):this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null)};b.prototype.getBoundTexture=function(a){return this._textureUnitMap[a]};b.prototype.getBoundFramebufferObject=function(){return this._activeFramebuffer};b.prototype.getBoundVAO=function(){return this._activeVertexArrayObject};b.prototype.resetState=
function(){this.bindProgram(null);this.bindVAO(null);this.bindFramebuffer(null);this.unbindBuffer(34962);this.unbindBuffer(34963);for(var a=0;a<this.parameters.maxTextureImageUnits;a++)this.bindTexture(null,a);this.setBlendingEnabled(!1);this.setBlendFunction(1,0);this.setBlendEquation(32774);this.setBlendColor(0,0,0,0);this.setFaceCullingEnabled(!1);this.setCullFace(1029);this.setFrontFace(2305);this.setPolygonOffsetFillEnabled(!1);this.setPolygonOffset(0,0);this.setScissorTestEnabled(!1);this.setScissorRect(0,
0,this.gl.canvas.width,this.gl.canvas.height);this.setDepthTestEnabled(!1);this.setDepthFunction(513);this.setDepthRange(0,1);this.setStencilTestEnabled(!1);this.setStencilFunction(519,0,0);this.setStencilOp(7680,7680,7680);this.setClearColor(0,0,0,0);this.setClearDepth(1);this.setClearStencil(0);this.setColorMask(!0,!0,!0,!0);this.setStencilWriteMask(4294967295);this.setDepthWriteEnabled(!0);this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)};b.prototype.enforceState=function(){var a=
this.gl,b=this._capabilities.vao;b&&b.bindVertexArray(null);for(var d=0;d<this.parameters.maxVertexAttributes;d++)a.disableVertexAttribArray(d);this._activeVertexBuffer?a.bindBuffer(this._activeVertexBuffer.bufferType,this._activeVertexBuffer.glName):a.bindBuffer(34962,null);this._activeIndexBuffer?a.bindBuffer(this._activeIndexBuffer.bufferType,this._activeIndexBuffer.glName):a.bindBuffer(34963,null);if(b&&this._activeVertexArrayObject){if(b=this._activeVertexArrayObject)this._activeVertexArrayObject.unbind(),
this._activeVertexArrayObject=null;this.bindVAO(b)}a.bindFramebuffer(a.FRAMEBUFFER,this._activeFramebuffer?this._activeFramebuffer.glName:null);a.useProgram(this._activeShaderProgram?this._activeShaderProgram.glName:null);a.blendColor(this._blendColorState.r,this._blendColorState.g,this._blendColorState.b,this._blendColorState.a);a.bindRenderbuffer(a.RENDERBUFFER,this._activeRenderbuffer?this._activeRenderbuffer.glName:null);!0===this._blendEnabled?a.enable(this.gl.BLEND):a.disable(this.gl.BLEND);
a.blendEquationSeparate(this._blendEquationState.mode,this._blendEquationState.modeAlpha);a.blendFuncSeparate(this._blendFunctionState.srcRGB,this._blendFunctionState.dstRGB,this._blendFunctionState.srcAlpha,this._blendFunctionState.dstAlpha);a.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a);a.clearDepth(this._clearDepth);a.clearStencil(this._clearStencil);a.colorMask(this._colorMaskState.r,this._colorMaskState.g,this._colorMaskState.b,this._colorMaskState.a);
a.cullFace(this._cullFace);a.depthFunc(this._depthFunction);a.depthRange(this._depthRange.zNear,this._depthRange.zFar);!0===this._depthTestEnabled?a.enable(a.DEPTH_TEST):a.disable(a.DEPTH_TEST);a.depthMask(this._depthWriteEnabled);a.frontFace(this._frontFace);a.lineWidth(1);!0===this._polygonCullingEnabled?a.enable(a.CULL_FACE):a.disable(a.CULL_FACE);a.polygonOffset(this._polygonOffset[0],this._polygonOffset[1]);!0===this._polygonOffsetFillEnabled?a.enable(a.POLYGON_OFFSET_FILL):a.disable(a.POLYGON_OFFSET_FILL);
a.scissor(this._scissorRect.x,this._scissorRect.y,this._scissorRect.width,this._scissorRect.height);!0===this._scissorTestEnabled?a.enable(a.SCISSOR_TEST):a.disable(a.SCISSOR_TEST);a.stencilFunc(this._stencilFunction.func,this._stencilFunction.ref,this._stencilFunction.mask);a.stencilOpSeparate(this._stencilOperation.face,this._stencilOperation.fail,this._stencilOperation.zFail,this._stencilOperation.zPass);!0===this._stencilTestEnabled?a.enable(a.STENCIL_TEST):a.disable(a.STENCIL_TEST);a.stencilMask(this._stencilWriteMask);
for(b=0;b<this.parameters.maxTextureImageUnits;b++)a.activeTexture(l.BASE_TEXTURE_UNIT+b),a.bindTexture(3553,null),(d=this._textureUnitMap[b])&&a.bindTexture(d.descriptor.target,d.glName);a.activeTexture(l.BASE_TEXTURE_UNIT+this._activeTextureUnit);a.viewport(this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height);n("esri-webgl-debug")&&(this._numOfTriangles=this._numOfDrawCalls=0)};b._bindBuffer=function(a,b,d,c){if(!b)return a.bindBuffer(d,null),null;if(c===b)return c;a.bindBuffer(d,
b.glName);return b};b._MAX_TEXTURE_IMAGE_UNITS=-1;return b}()})},"esri/views/webgl/enums":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});c.BASE_TEXTURE_UNIT=33984})},"esri/views/webgl/InstanceCounter":function(){define(["require","exports"],function(p,c){return function(){function c(){this._instanceCount={textureCount:0,bufferCount:0,vaoCount:0,programCount:0,framebufferCount:0,renderBufferCount:0}}c.prototype.incrementCount=function(c){switch(c){case 0:this._instanceCount.textureCount++;
break;case 1:this._instanceCount.bufferCount++;break;case 2:this._instanceCount.vaoCount++;break;case 3:this._instanceCount.programCount++;break;case 4:this._instanceCount.framebufferCount++;break;case 5:this._instanceCount.renderBufferCount++}};c.prototype.decrementCount=function(c){switch(c){case 0:this._instanceCount.textureCount--;break;case 1:this._instanceCount.bufferCount--;break;case 2:this._instanceCount.vaoCount--;break;case 3:this._instanceCount.programCount--;break;case 4:this._instanceCount.framebufferCount--;
break;case 5:this._instanceCount.renderBufferCount--}};c.prototype.printResourceCount=function(){console.log("Live objects:");console.log("Textures: "+this._instanceCount.textureCount);console.log("Buffers: "+this._instanceCount.bufferCount);console.log("VAOs: "+this._instanceCount.vaoCount);console.log("Programs: "+this._instanceCount.programCount);console.log("Framebuffers: "+this._instanceCount.framebufferCount);console.log("Renderbuffers: "+this._instanceCount.renderBufferCount)};return c}()})},
"esri/views/webgl/capabilities/load":function(){define("require exports ./DisjointTimerQuery ./Instancing ./isWebGL2Context ./LoseContext ./VertexArrayObjects".split(" "),function(p,c,n,l,k,d,h){function g(d,b,a,c,g){if(c&&k.default(d))return!0;if(b[a])return!1;for(b=0;b<g.length;b++)if(d.getExtension(g[b]))return!0;return!1}Object.defineProperty(c,"__esModule",{value:!0});c.loadCapabilities=function(c,b){var a=b&&b.disabledExtensions||{};b=b&&b.debugWebGLExtensions||{};g(c,a,"standardDerivatives",
!0,["OES_standard_derivatives"]);var e=l.load(c),f=h.load(c,a),q;q=a.compressedTextureS3TC?null:(q=c.getExtension("WEBGL_compressed_texture_s3tc"))?{COMPRESSED_RGB_S3TC_DXT1:q.COMPRESSED_RGB_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT1:q.COMPRESSED_RGBA_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT3:q.COMPRESSED_RGBA_S3TC_DXT3_EXT,COMPRESSED_RGBA_S3TC_DXT5:q.COMPRESSED_RGBA_S3TC_DXT5_EXT}:null;var u;u=a.textureFilterAnisotropic?null:(u=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||
c.getExtension("WEBKIT_EXT_texture_filter_anisotropic"))?{MAX_TEXTURE_MAX_ANISOTROPY:u.MAX_TEXTURE_MAX_ANISOTROPY_EXT,TEXTURE_MAX_ANISOTROPY:u.TEXTURE_MAX_ANISOTROPY_EXT}:null;var t=n.load(c,a),r;k.default(c)?r={textureFloat:!0,textureFloatLinear:!a.textureFloatLinear&&!!c.getExtension("OES_texture_float_linear"),textureHalfFloat:!0,textureHalfFloatLinear:!a.textureHalfFloatLinear&&!!c.getExtension("OES_texture_half_float_linear"),HALF_FLOAT:c.HALF_FLOAT}:c instanceof WebGLRenderingContext?(r=!a.textureHalfFloat&&
c.getExtension("OES_texture_half_float"),r={textureFloat:!a.textureFloat&&!!c.getExtension("OES_texture_float"),textureFloatLinear:!a.textureFloatLinear&&!!c.getExtension("OES_texture_float_linear"),textureHalfFloat:!!r,textureHalfFloatLinear:!a.textureHalfFloatLinear&&!!c.getExtension("OES_texture_half_float_linear"),HALF_FLOAT:r?r.HALF_FLOAT_OES:void 0}):r=void 0;var x;if(k.default(c)){x=!a.colorBufferFloat&&c.getExtension("EXT_color_buffer_half_float");var w=!a.colorBufferFloat&&c.getExtension("EXT_color_buffer_float");
x=x||w?{textureFloat:!!w,textureHalfFloat:!!x,R16F:c.R16F,RG16F:c.RG16F,RGBA16F:c.RGBA16F,R32F:c.R32F,RG32F:c.RG32F,RGBA32F:c.RGBA32F,R11F_G11F_B10F:c.R11F_G11F_B10F,RGB16F:c.RGB16F}:null}else c instanceof WebGLRenderingContext?(x=!a.colorBufferFloat&&c.getExtension("EXT_color_buffer_half_float"),w=!a.colorBufferFloat&&c.getExtension("WEBGL_color_buffer_float"),x=x||w?{textureFloat:!!w,textureHalfFloat:!!x,RGBA16F:x?x.RGBA16F_EXT:void 0,RGB16F:x?x.RGB16F_EXT:void 0,RGBA32F:w?w.RGBA32F_EXT:void 0}:
null):x=void 0;w=k.default(c)?{MIN:c.MIN,MAX:c.MAX}:a.blendMinMax?null:(w=c.getExtension("EXT_blend_minmax"))?{MIN:w.MIN_EXT,MAX:w.MAX_EXT}:null;return{instancing:e,vao:f,compressedTextureS3TC:q,textureFilterAnisotropic:u,disjointTimerQuery:t,textureFloat:r,colorBufferFloat:x,blendMinMax:w,depthTexture:g(c,a,"depthTexture",!0,["WEBGL_depth_texture","MOZ_WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"]),standardDerivatives:!0,shaderTextureLOD:g(c,a,"shaderTextureLOD",!0,["EXT_shader_texture_lod"]),
fragDepth:g(c,a,"fragDepth",!0,["EXT_frag_depth"]),loseContext:d.load(c,b)}}})},"esri/views/webgl/capabilities/DisjointTimerQuery":function(){define(["require","exports","./isWebGL2Context"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.load=function(c,k){if(k.disjointTimerQuery)return null;var d=c.getExtension("EXT_disjoint_timer_query")||c.getExtension("EXT_disjoint_timer_query_webgl2");return d?n.default(c)?{createQuery:function(){return c.createQuery()},resultAvailable:function(d){return c.getQueryParameter(d,
c.QUERY_RESULT_AVAILABLE)},getResult:function(d){return c.getQueryParameter(d,c.QUERY_RESULT)},disjoint:function(){return c.getParameter(d.GPU_DISJOINT_EXT)},beginTimeElapsed:function(h){return c.beginQuery(d.TIME_ELAPSED_EXT,h)},endTimeElapsed:function(){return c.endQuery(d.TIME_ELAPSED_EXT)},createTimestamp:function(c){return d.queryCounterEXT(c,d.TIMESTAMP_EXT)},timestampBits:function(){return c.getQuery(d.TIMESTAMP_EXT,d.QUERY_COUNTER_BITS_EXT)}}:{createQuery:function(){return d.createQueryEXT()},
resultAvailable:function(c){return d.getQueryObjectEXT(c,d.QUERY_RESULT_AVAILABLE_EXT)},getResult:function(c){return d.getQueryObjectEXT(c,d.QUERY_RESULT_EXT)},disjoint:function(){return c.getParameter(d.GPU_DISJOINT_EXT)},beginTimeElapsed:function(c){return d.beginQueryEXT(d.TIME_ELAPSED_EXT,c)},endTimeElapsed:function(){return d.endQueryEXT(d.TIME_ELAPSED_EXT)},createTimestamp:function(c){return d.queryCounterEXT(c,d.TIMESTAMP_EXT)},timestampBits:function(){return d.getQueryEXT(d.TIMESTAMP_EXT,
d.QUERY_COUNTER_BITS_EXT)}}:null}})},"esri/views/webgl/capabilities/Instancing":function(){define(["require","exports","./isWebGL2Context"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.load=function(c){return n.default(c)?{drawArraysInstanced:c.drawArraysInstanced.bind(c),drawElementsInstanced:c.drawElementsInstanced.bind(c),vertexAttribDivisor:c.vertexAttribDivisor.bind(c)}:(c=c.getExtension("ANGLE_instanced_arrays"))?{drawArraysInstanced:c.drawArraysInstancedANGLE.bind(c),
drawElementsInstanced:c.drawElementsInstancedANGLE.bind(c),vertexAttribDivisor:c.vertexAttribDivisorANGLE.bind(c)}:null}})},"esri/views/webgl/capabilities/LoseContext":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});c.load=function(c,l){var k=l.loseContext&&c.getExtension("WEBGL_lose_context");return k?{loseRenderingContext:function(){return k.loseContext()}}:null}})},"esri/views/webgl/capabilities/VertexArrayObjects":function(){define(["require",
"exports","./isWebGL2Context"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.load=function(c,k){return n.default(c)?{createVertexArray:c.createVertexArray.bind(c),deleteVertexArray:c.deleteVertexArray.bind(c),bindVertexArray:c.bindVertexArray.bind(c)}:k.vao?null:(c=c.getExtension("OES_vertex_array_object")||c.getExtension("MOZ_OES_vertex_array_object")||c.getExtension("WEBKIT_OES_vertex_array_object"))?{createVertexArray:c.createVertexArrayOES.bind(c),deleteVertexArray:c.deleteVertexArrayOES.bind(c),
bindVertexArray:c.bindVertexArrayOES.bind(c)}:null}})},"esri/views/3d/layers/graphics/Graphics3DSymbolLayer":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../Color ../../../../core/compilerUtils ../../../../core/Logger ../../../../core/mathUtils ../../../../core/maybe ../../../../core/scheduling ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4f64 ./ElevationContext ./featureExpressionInfoUtils ./graphicUtils ./Loadable ./symbolComplexity".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x){function w(a,b){a=null!=a?b.attributes[a]:0;return null!=a&&isFinite(a)?a:0}Object.defineProperty(c,"__esModule",{value:!0});var v=new q,y=g.getLogger("esri.views.3d.layers.graphics.Graphics3DSymbolLayer");p=function(c){function g(a,b,d,e){var f=c.call(this)||this;f.complexity=null;f.logger=y;f._elevationOptions={supportsOffsetAdjustment:!1,supportsOnTheGround:!0};f.symbol=a;f.symbolLayer=b;f._context=d;f._symbolLayerOrder=d.layerOrder;f._symbolLayerOrderDelta=
d.layerOrderDelta;f._elevationContext=new q;f._material=null;f.complexity=f.computeComplexity();f._geometryCreationWarningHandle=null;f._updateDrivenProperties(e);f._updateElevationContext();f._logWarning;return f}n(g,c);g.prototype.getCachedSize=function(){return null};g.prototype._logWarning=function(a){y.warn(a)};g.prototype._logGeometryCreationWarnings=function(b,d,c,e){var f=this;if(null==this._geometryCreationWarningHandle){var g=b.geometryData&&b.geometryData.polygons;e+=" geometry failed to be created";
var h=null;b.projectionSuccess?!d.length||1===d.length&&!d[0].length?h=e+" (no "+c+" were defined)":Array.isArray(d)&&Array.isArray(d[0])?d.some(function(a){return 1===a.length})?h=e+" ("+c+" should contain at least 2 vertices)":g&&0===g.length&&"rings"===c&&(h=e+" (filled "+c+" should use clockwise winding - try reversing the order of vertices)"):h=e+" ("+c+" should be defined as a 2D array)":h=e+" (failed to project geometry to view spatial reference)";h&&(this._geometryCreationWarningHandle=a.schedule(function(){return f._onNextTick()}),
y.warn(h))}};g.prototype._onNextTick=function(){this._geometryCreationWarningHandle=null};g.prototype._validateGeometry=function(a){return"point"!==a.type||f.isFinite(a.x)&&f.isFinite(a.y)?!0:(y.warn("point coordinate is not a valid number, graphic skipped"),!1)};g.prototype._defaultElevationInfoNoZ=function(){return z};g.prototype._defaultElevationInfoZ=function(){return A};g.prototype._updateElevationContext=function(){this._elevationContext.setDefaults();var a=this._context.layer.elevationInfo;
a&&this._elevationContext.mixinApi(a);(a=this.symbolLayer&&this.symbolLayer.elevationInfo)&&this._elevationContext.mixinApi(a);this._elevationContext.featureExpressionInfoContext=this._context.featureExpressionInfoContext};g.prototype.getDefaultElevationInfo=function(a){return a.hasZ?this._defaultElevationInfoZ():this._defaultElevationInfoNoZ()};g.prototype.getGeometryElevationMode=function(a,b){void 0===b&&(b=this.getDefaultElevationInfo(a));return this._elevationContext.mode||b.mode};g.prototype.getGraphicElevationContext=
function(a){var d=b.expect(a.geometry),c=this.getDefaultElevationInfo(d);v.setUnit(null!=this._elevationContext.unit?this._elevationContext.unit:c.unit);v.mode=this.getGeometryElevationMode(d,c);v.setOffsetMeters(null!=this._elevationContext.meterUnitOffset?this._elevationContext.meterUnitOffset:c.offset);v.featureExpressionInfoContext=this._elevationContext.featureExpressionInfoContext;this._elevationOptions.supportsOnTheGround||"on-the-ground"!==v.mode||(v.mode="relative-to-ground",v.setOffsetMeters(0),
v.featureExpressionInfoContext=u.zeroContext);a=u.createFeature(a,this._context.layer);u.setContextFeature(v.featureExpressionInfoContext,a);return v};g.prototype.prepareSymbolLayerPatch=function(a){};g.prototype.updateGeometry=function(a,b){return!1};g.prototype._getDrapedZ=function(){return-2};g.prototype._updateDrivenProperties=function(a){var b={color:!1,opacity:!1,size:!1};a||(a=this._context.renderer)&&"visualVariables"in a&&a.visualVariables&&a.visualVariables.forEach(function(a){switch(a.type){case "color":b.color=
!0;if(a.stops)for(var d=0;d<a.stops.length;d++){var c=a.stops[d].color;c&&(Array.isArray(c)&&3<c.length&&255!==c[3]||void 0!==c.a&&255!==c.a)&&(b.opacity=!0)}break;case "opacity":b.opacity=!0;break;case "size":b.size=!0}});this._drivenProperties=b};g.prototype._isPropertyDriven=function(a){return this._drivenProperties[a]};g.prototype._getLayerOpacity=function(){if(this._context.layerView&&"fullOpacity"in this._context.layerView)return this._context.layerView.fullOpacity;var a=this._context.layer.opacity;
return null==a?1:a};g.prototype._getCombinedOpacity=function(a,d){void 0===d&&(d=B);var c;c=1*this._getLayerOpacity();if(this._isPropertyDriven("opacity"))return c;b.isSome(a)?c*=a.a:d.hasIntrinsicColor||(c=0);return c};g.prototype._getCombinedOpacityAndColor=function(a,c){void 0===c&&(c=B);c=this._getCombinedOpacity(a,c);if(this._isPropertyDriven("color"))return t.mixinColorAndOpacity(null,c);a=b.isSome(a)?d.toUnitRGB(a):e.vec3f64.ONES;return t.mixinColorAndOpacity(a,c)};g.prototype._getVertexOpacityAndColor=
function(a,b,d){var c=this._isPropertyDriven("color")?a.color:null;a=this._isPropertyDriven("opacity")?a.opacity:null;c=t.mixinColorAndOpacity(c,a);d&&(c[0]*=d,c[1]*=d,c[2]*=d,c[3]*=d);return b?new b(c):c};g.prototype._getStageIdHint=function(){return this._context.layer.id+"_symbol"};g.prototype.isFastUpdatesEnabled=function(){return this._fastUpdates&&this._fastUpdates.enabled};g.prototype.updateSymbolLayerOrder=function(a,b){this._symbolLayerOrder=a;this._symbolLayerOrderDelta=b};g.prototype.computeComplexity=
function(){return x.defaultSymbolLayerComplexity(this.symbol,this.symbolLayer)};g.prototype.setDrawOrder=function(a,b,d){this.updateSymbolLayerOrder(a,b);this._material&&(this._material.renderPriority=a,d.add(this._material.id))};g.prototype.destroy=function(){this.abortLoad();this._geometryCreationWarningHandle&&(this._geometryCreationWarningHandle.remove(),this._geometryCreationWarningHandle=null)};g.prototype.globalPropertyChanged=function(a,b,d){switch(a){case "opacity":return this.layerOpacityChanged();
case "elevationInfo":return a=this._elevationContext.mode,this._updateElevationContext(),this.layerElevationInfoChanged(b,d,a);case "slicePlaneEnabled":return this.slicePlaneEnabledChanged(b,d);case "pixelRatio":return this.pixelRatioChanged(b,d);default:return h.neverReachedSilent(a),!1}};g.prototype.updateGraphics3DGraphicElevationInfo=function(a,b,d){var c=this,e=!0;a.forEach(function(a){var f=b(a);f?(a=c.getGraphicElevationContext(a.graphic),f.needsElevationUpdates=d(a.mode),f.elevationContext.set(a)):
e=!1});return e};g.prototype.applyRendererDiff=function(a,b){return!1};g.prototype.getFastUpdateAttrValues=function(a){if(!this._fastUpdates.enabled)return null;var b=this._fastUpdates.visualVariables,d=b.size?w(b.size.field,a):0,c=b.color?w(b.color.field,a):0;a=b.opacity?w(b.opacity.field,a):0;return m.vec4f64.fromValues(d,c,a,0)};return g}(r.Loadable);c.Graphics3DSymbolLayer=p;c.getAttributeValue=w;var z={mode:"on-the-ground",offset:0,unit:"meters"},A={mode:"absolute-height",offset:0,unit:"meters"},
B={hasIntrinsicColor:!1};c.default=p})},"esri/views/3d/layers/graphics/Loadable":function(){define(["require","exports","../../../../core/tsSupport/generatorHelper","../../../../core/tsSupport/awaiterHelper","../../../../core/promiseUtils"],function(p,c,n,l,k){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function d(){this._abortController=null;this._loadStatus=0;this.logger=this._loader=null}Object.defineProperty(d.prototype,"loadStatus",{get:function(){return this._loadStatus},enumerable:!0,
configurable:!0});d.prototype.load=function(){return l(this,void 0,void 0,function(){var d=this;return n(this,function(c){this._loader||(this._abortController=k.createAbortController(),this._loader=this.doLoad(this._abortController.signal).then(function(){d._abortController=null;d._loadStatus=1},function(c){d._abortController=null;d._loadStatus=2;!k.isAbortError(c)&&d.logger&&c.message&&d.logger.warn(c.message);throw c;}));return[2,this._loader]})})};d.prototype.abortLoad=function(){this._abortController?
(this._abortController.abort(),this._abortController=null):0===this._loadStatus&&(this._loadStatus=2);this._loader=null};return d}();c.Loadable=p})},"esri/views/3d/layers/graphics/symbolComplexity":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/compilerUtils ../../../../core/has ../../../../core/maybe ../../../../symbols/support/ObjectSymbol3DLayerResource ./primitiveObjectSymbolUtils ../../webgl-engine/lib/Util ../../webgl-engine/lib/lodRendering/LodResources".split(" "),
function(p,c,n,l,k,d,h,g,f,b){function a(a){for(var b=0,d=0,c=!1,e={bytesPerFeature:0,bytesPerCoordinate:0,draped:{bytesPerFeature:0,bytesPerCoordinate:0}},f=0;f<a.length;f++){var g=a[f];g&&(b+=g.primitivesPerFeature,d+=g.primitivesPerCoordinate,e.bytesPerFeature+=g.memory.bytesPerFeature,e.bytesPerCoordinate+=g.memory.bytesPerCoordinate,e.draped.bytesPerFeature+=g.memory.bytesPerFeature,e.draped.bytesPerCoordinate+=g.memory.bytesPerCoordinate,c=c||g.estimated)}return{primitivesPerFeature:b,primitivesPerCoordinate:d,
estimated:c,memory:e}}function e(a,b){var c=m(a,b);switch(b.type){case "extrude":return{primitivesPerFeature:-4,primitivesPerCoordinate:4,estimated:!1,memory:c};case "fill":return"mesh-3d"===a.type?{primitivesPerFeature:0,primitivesPerCoordinate:0,estimated:!1,memory:c}:d.isSome(b.outline)&&0<b.outline.size?{primitivesPerFeature:-4,primitivesPerCoordinate:3,estimated:!1,memory:c}:{primitivesPerFeature:-2,primitivesPerCoordinate:1,estimated:!1,memory:c};case "water":return{primitivesPerFeature:-2,
primitivesPerCoordinate:1,estimated:!1,memory:c};case "line":return{primitivesPerFeature:-2,primitivesPerCoordinate:2,estimated:!1,memory:c};case "object":return b.resource&&b.resource.href?{primitivesPerFeature:16,primitivesPerCoordinate:0,estimated:!0,memory:c}:n({},q(b.resource&&b.resource.primitive||h.defaultPrimitive),{memory:c});case "path":return{primitivesPerFeature:-4,primitivesPerCoordinate:20,estimated:!1,memory:c};case "text":case "icon":return{primitivesPerFeature:2,primitivesPerCoordinate:0,
estimated:!1,memory:c};default:l.neverReached(b)}}function m(a,b){a="point-3d"===a.type;switch(b.type){case "extrude":return b.edges&&0<b.edges.size?c.memoryEstimators.EXTRUDE_EDGES:c.memoryEstimators.EXTRUDE;case "fill":return d.isSome(b.outline)&&0<b.outline.size?c.memoryEstimators.FILL_OUTLINE:c.memoryEstimators.FILL;case "water":return c.memoryEstimators.FILL;case "line":return c.memoryEstimators.LINE;case "path":return c.memoryEstimators.PATH;case "object":return k("enable-feature:skallweit/lod-rendering")?
a?c.memoryEstimators.OBJECT_POINT_LOD:c.memoryEstimators.OBJECT_POLYGON_LOD:a?c.memoryEstimators.OBJECT_POINT:c.memoryEstimators.OBJECT_POLYGON;case "icon":case "text":return a?c.memoryEstimators.ICON_POINT:c.memoryEstimators.ICON_POLYGON;default:l.neverReached(b)}}function q(a){var d=u[a];if(d)return d;k("enable-feature:skallweit/lod-rendering")?(d=g.primitiveLodResources(a,null,null),d=b.geometriesFromLodLevelResources(d.levels[0]).reduce(function(a,b){return a+b.data.getIndices(f.VertexAttrConstants.POSITION).length/
3},0)):d=g.primitiveGeometryData(a).getIndices(f.VertexAttrConstants.POSITION).length/3;d={primitivesPerFeature:d,primitivesPerCoordinate:0,estimated:!1};return u[a]=d}Object.defineProperty(c,"__esModule",{value:!0});c.emptySymbolComplexity={primitivesPerFeature:0,primitivesPerCoordinate:0,estimated:!0,memory:{bytesPerFeature:0,bytesPerCoordinate:0,draped:{bytesPerFeature:0,bytesPerCoordinate:0}}};c.defaultSymbolComplexity=function(b){if("web-style"===b.type)return c.emptySymbolComplexity;var d=b.symbolLayers.toArray().map(function(a){return e(b,
a)});return a(d)};c.totalSymbolComplexities=a;var u={};c.defaultSymbolLayerComplexity=e;c.defaultSymbolLayerMemoryComplexity=m;c.memoryEstimators={ICON_POINT:{bytesPerFeature:7478.781325779039,bytesPerCoordinate:0,draped:{bytesPerFeature:5712.082651558076,bytesPerCoordinate:0}},ICON_POLYGON:{bytesPerFeature:9679.372971750396,bytesPerCoordinate:56.86422538239579,draped:{bytesPerFeature:7883.966873022898,bytesPerCoordinate:56.89697037586389}},OBJECT_POINT:{bytesPerFeature:5177.80657223796,bytesPerCoordinate:0,
draped:{bytesPerFeature:5177.80657223796,bytesPerCoordinate:0}},OBJECT_POLYGON:{bytesPerFeature:7372.024890546556,bytesPerCoordinate:56.80425878144206,draped:{bytesPerFeature:7372.024890546556,bytesPerCoordinate:56.80425878144206}},OBJECT_POINT_LOD:{bytesPerFeature:1770.211558073654,bytesPerCoordinate:0,draped:{bytesPerFeature:1770.211558073654,bytesPerCoordinate:0}},OBJECT_POLYGON_LOD:{bytesPerFeature:3958.8422890890743,bytesPerCoordinate:56.88697205558441,draped:{bytesPerFeature:3958.8422890890743,
bytesPerCoordinate:56.88697205558441}},LINE:{bytesPerFeature:7586.045782417972,bytesPerCoordinate:112.02132538683836,draped:{bytesPerFeature:4775.97368572266,bytesPerCoordinate:111.85995483757563}},PATH:{bytesPerFeature:7563.020535856769,bytesPerCoordinate:119.1242257528872,draped:{bytesPerFeature:7563.020535856769,bytesPerCoordinate:119.1242257528872}},FILL:{bytesPerFeature:8702.040510627665,bytesPerCoordinate:56.610361738134486,draped:{bytesPerFeature:5921.70744530372,bytesPerCoordinate:56.58839624148057}},
FILL_OUTLINE:{bytesPerFeature:12168.362923563885,bytesPerCoordinate:56.265773613009564,draped:{bytesPerFeature:7929.090679733446,bytesPerCoordinate:56.17528027868163}},EXTRUDE:{bytesPerFeature:11409.738625531325,bytesPerCoordinate:56.99136098105536,draped:{bytesPerFeature:11409.738625531325,bytesPerCoordinate:56.99136098105536}},EXTRUDE_EDGES:{bytesPerFeature:19399.52461450617,bytesPerCoordinate:52.052414603432105,draped:{bytesPerFeature:19399.52461450617,bytesPerCoordinate:52.052414603432105}}}})},
"esri/views/3d/layers/graphics/primitiveObjectSymbolUtils":function(){define("require exports ../../../../core/compilerUtils ../../../../geometry/support/aaBoundingBox ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/GeometryUtil".split(" "),function(p,c,n,l,k,d){Object.defineProperty(c,"__esModule",{value:!0});var h=l.fromValues(-.5,-.5,-.5,.5,.5,.5),g=l.fromValues(-.5,-.5,0,.5,.5,1),f=l.fromValues(-.5,-.5,0,.5,.5,.5);c.isValidPrimitive=function(a){switch(a){case "sphere":case "cube":case "diamond":case "cylinder":case "cone":case "inverted-cone":case "tetrahedron":return!0}return!1};
c.primitiveBoundingBox=function(a){switch(a){case "sphere":case "cube":case "diamond":return h;case "cylinder":case "cone":case "inverted-cone":return g;case "tetrahedron":return f;default:n.neverReached(a)}};c.primitiveGeometryData=function(a){switch(a){case "sphere":return d.createPolySphereGeometry(.5,2,!0);case "cube":return d.createBoxGeometry(1);case "cylinder":return d.createCylinderGeometry(1,.5,32,[0,0,1],[0,0,.5]);case "cone":return d.cgToGIS(d.createConeGeometry(1,.5,15,!1));case "inverted-cone":return d.cgToGIS(d.createConeGeometry(1,
.5,15,!0));case "tetrahedron":return d.cgToGIS(d.createTetrahedronGeometry(1));case "diamond":return d.cgToGIS(d.createDiamondGeometry(1));default:n.neverReached(a)}};c.primitiveLodResources=function(a,c,f){var e=function(a,b,e){void 0===e&&(e=!1);return{levels:a.map(function(a,g){var h=b(a.tesselation);e&&d.cgToGIS(h);return{components:[{geometry:new k(h,f+("_lod"+g)),material:c}],faceCount:h.indexCount/3,minScreenSpaceRadius:a.minScreenSpaceRadius}})}};switch(a){case "sphere":return e([{tesselation:0,
minScreenSpaceRadius:0},{tesselation:1,minScreenSpaceRadius:8},{tesselation:2,minScreenSpaceRadius:16},{tesselation:3,minScreenSpaceRadius:50},{tesselation:4,minScreenSpaceRadius:250}],function(a){return d.createPolySphereGeometry(.5,a,!0)});case "cube":return e([{tesselation:0,minScreenSpaceRadius:0}],function(a){return d.createBoxGeometry(1)});case "cone":return e(b,function(a){return d.createConeGeometry(1,.5,a,!1)},!0);case "inverted-cone":return e(b,function(a){return d.createConeGeometry(1,
.5,a,!0)},!0);case "cylinder":return e(b,function(a){return d.createCylinderGeometry(1,.5,a,[0,0,1],[0,0,.5])});case "tetrahedron":return e([{tesselation:0,minScreenSpaceRadius:0}],function(a){return d.createTetrahedronGeometry(1)},!0);case "diamond":return e([{tesselation:0,minScreenSpaceRadius:0}],function(a){return d.createDiamondGeometry(1)},!0);default:n.neverReached(a)}};var b=[{tesselation:6,minScreenSpaceRadius:0},{tesselation:18,minScreenSpaceRadius:7},{tesselation:64,minScreenSpaceRadius:65}]})},
"esri/views/3d/webgl-engine/lib/lodRendering/LodResources":function(){define(["require","exports","../../../../../core/arrayUtils"],function(p,c,n){function l(c){var d=[];c.components.forEach(function(c){d.push(c.geometry)});return n.unique(d)}Object.defineProperty(c,"__esModule",{value:!0});c.materialsFromLodResources=function(c){var d=[];c.levels.forEach(function(c){c.components.forEach(function(c){d.push(c.material)})});return n.unique(d)};c.texturesFromLodResources=function(c){var d=[];c.levels.forEach(function(c){c.components.forEach(function(c){c.textures&&
d.push.apply(d,c.textures)})});return n.unique(d)};c.geometriesFromLodLevelResources=l;c.geometriesFromLodResources=function(c){var d=[];c.levels.forEach(function(c){c.components.forEach(function(c){d.push(c.geometry)})});return n.unique(d)};c.computeFaceCount=function(c){var d=0;l(c).forEach(function(c){d+=c.data.indexCount/3});return d}})},"esri/views/3d/webgl-engine/materials/LineCalloutMaterial":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/libs/gl-matrix-2/vec2f32 ../../support/buffer/InterleavedLayout ../lib/GLMaterial ../lib/Material ../lib/Util ./internal/bufferWriters ./internal/MaterialUtil ./renderers/MergedRenderer ../shaders/LineCalloutPrograms ../../../webgl/renderState".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m){function q(a,b,d){3===d.length?a.setUniform4f(b,d[0],d[1],d[2],1):a.setUniform4fv(b,d)}p=function(d){function c(a,e){e=d.call(this,e)||this;e.params=b.copyParameters(a,t);e._uniqueMaterialIdentifier=c.uniqueMaterialIdentifier(e.params);return e}n(c,d);Object.defineProperty(c.prototype,"uniqueMaterialIdentifier",{get:function(){return this._uniqueMaterialIdentifier},enumerable:!0,configurable:!0});c.prototype.dispose=function(){};c.prototype.getGLMaterials=function(){return{color:u,
depthShadowMap:void 0,normal:void 0,depth:void 0,highlight:void 0}};c.prototype.intersect=function(a,b,d,c,e,f,g,h){};c.prototype.createBufferWriter=function(){return new w};c.prototype.createRenderer=function(b,d){return new a(b,d,this)};c.prototype.setParameterValues=function(a){b.updateParameters(this.params,a)&&(this._uniqueMaterialIdentifier=c.uniqueMaterialIdentifier(this.params),this.notifyDirty("matChanged"))};c.prototype.getParameters=function(){return this.params};c.uniqueMaterialIdentifier=
function(a){return JSON.stringify({screenOffset:a.screenOffset||[0,0],centerOffsetUnits:a.centerOffsetUnits||"world"})};return c}(h);var u=function(a){function d(b,d,c){b=a.call(this,b,d)||this;b.isRenderSlot=!0;b.updateParameters();return b}n(d,a);d.prototype.updateParameters=function(){this.params=b.copyParameters(this.material.getParameters());this.selectProgram()};d.prototype.selectProgram=function(){var a=this.params;this.renderProgram=this.programRep.getProgram(e.program,{occlTest:!!a.occlusionTest,
verticalOffset:!!a.verticalOffset,screenSizePerspective:!!a.screenSizePerspective,depthHud:!1,depthHudAlignStart:!!a.depthHUDAlignStart,centerOffsetUnitsScreen:"screen"===a.centerOffsetUnits,slice:a.slicePlaneEnabled});this.depthProgram=this.programRep.getProgram(e.program,{occlTest:!!a.occlusionTest,verticalOffset:!!a.verticalOffset,screenSizePerspective:!!a.screenSizePerspective,depthHud:!0,depthHudAlignStart:!!a.depthHUDAlignStart,centerOffsetUnitsScreen:"screen"===a.centerOffsetUnits,slice:a.slicePlaneEnabled});
this.renderPipelineState=m.makePipelineState({blending:m.separateBlendingParams(1,770,771,771),depthTest:{func:513},colorWrite:m.defaultColorWriteParams});this.depthPipelineState=m.makePipelineState({depthTest:{func:513},depthWrite:m.defaultDepthWriteParams})};d.prototype.beginSlot=function(a){switch(a){case 18:return this.isRenderSlot=!0;case 19:return this.isRenderSlot=!1,!0}return!1};Object.defineProperty(d.prototype,"program",{get:function(){return this.isRenderSlot?this.renderProgram:this.depthProgram},
enumerable:!0,configurable:!0});d.prototype.getProgram=function(){return this.program};d.prototype.getPrograms=function(){return[this.renderProgram,this.depthProgram]};d.prototype.getDrawMode=function(){return 4};d.prototype.bind=function(a,d){var c=d.cameraAboveGround?1:-1,e=this.program,f=this.params;a.bindProgram(e);e.setUniform1f("cameraGroundRelative",c);e.setUniform1f("polygonOffset",f.shaderPolygonOffset);e.setUniform4fv("viewport",d.viewport);e.setUniform1f("perDistancePixelRatio",Math.tan(d.fovY/
2)/(d.viewport[2]/2));e.setUniformMatrix4fv("viewNormal",d.viewInvTransp);e.setUniform1i("hudVisibilityTexture",0);a.bindTexture(d.hudVisibilityTexture,0);q(e,"color",f.color);c=d.pixelRatio||1;e.setUniform1f("pixelRatio",c);e.setUniform2f("screenOffset",f.screenOffset[0]*c,f.screenOffset[1]*c);this.bindBorder(a,d);b.bindVerticalOffset(f.verticalOffset,d,e);this.bindSizing(a,d);b.bindScreenSizePerspective(f.screenSizePerspective,e);this.isRenderSlot?a.setPipelineState(this.renderPipelineState):a.setPipelineState(this.depthPipelineState)};
d.prototype.bindView=function(a,d){a=this.program;var c=this.params;b.bindView(d.origin,d.view,a);b.bindCamPos(d.origin,d.viewInvTransp,a);c.slicePlaneEnabled&&b.bindSlicePlane(d.origin,d.slicePlane,a)};d.prototype.bindInstance=function(a,b){a=this.program;a.setUniformMatrix4fv("model",b.transformation);a.setUniformMatrix4fv("modelNormal",b.transformationNormal)};d.prototype.release=function(a,b){};d.prototype.bindSizing=function(a,b){a=this.program;var d=this.params;a.setUniform2f("pixelToNDC",2/
b.viewport[2],2/b.viewport[3]);a.setUniform1f("lineSize",Math.ceil(d.size)*(b.pixelRatio||1))};d.prototype.bindBorder=function(a,b){a=this.program;var d=this.params;b=b.pixelRatio||1;null!==d.borderColor?(q(a,"borderColor",d.borderColor),a.setUniform1f("borderSize",b)):(a.setUniform4f("borderColor",0,0,0,0),a.setUniform1f("borderSize",0))};return d}(d),t={verticalOffset:null,screenSizePerspective:null,screenOffset:[0,0],color:[0,0,0,1],size:1,borderColor:null,occlusionTest:!1,shaderPolygonOffset:1E-5,
depthHUDAlignStart:!1,centerOffsetUnits:"world",slicePlaneEnabled:!1},r=k.newLayout().vec3f(g.VertexAttrConstants.POSITION).vec3f(g.VertexAttrConstants.NORMAL).vec2f(g.VertexAttrConstants.UV0).vec4f(g.VertexAttrConstants.AUXPOS1),x=[l.vec2f32.fromValues(0,0),l.vec2f32.fromValues(1,0),l.vec2f32.fromValues(0,1),l.vec2f32.fromValues(1,0),l.vec2f32.fromValues(1,1),l.vec2f32.fromValues(0,1)],w=function(){function a(){this.vertexBufferLayout=r}a.prototype.allocate=function(a){return this.vertexBufferLayout.createBuffer(a)};
a.prototype.elementCount=function(a){return 6*a.indices[g.VertexAttrConstants.POSITION].length};a.prototype.write=function(a,b,d,c){f.writePosition(b.indices[g.VertexAttrConstants.POSITION],b.vertexAttr[g.VertexAttrConstants.POSITION].data,a.transformation,d.position,c,6);f.writeNormal(b.indices[g.VertexAttrConstants.NORMAL],b.vertexAttr[g.VertexAttrConstants.NORMAL].data,a.invTranspTransformation,d.normal,c,6);f.writeBufferVec4(b.indices[g.VertexAttrConstants.AUXPOS1],b.vertexAttr[g.VertexAttrConstants.AUXPOS1].data,
d.auxpos1,c,6);for(a=0;a<x.length;++a)d.uv0.setVec(c+a,x[a])};return a}();return p})},"esri/core/libs/gl-matrix-2/vec2f32":function(){define(["require","exports","./factories/vec2f32"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.vec2f32=n})},"esri/core/libs/gl-matrix-2/factories/vec2f32":function(){define(["require","exports"],function(p,c){function n(){return new Float32Array(2)}function l(d,c){var b=new Float32Array(2);b[0]=d;b[1]=c;return b}function k(){return l(1,1)}function d(){return l(1,
0)}function h(){return l(0,1)}Object.defineProperty(c,"__esModule",{value:!0});c.create=n;c.clone=function(d){var c=new Float32Array(2);c[0]=d[0];c[1]=d[1];return c};c.fromValues=l;c.createView=function(d,c){return new Float32Array(d,c,2)};c.zeros=function(){return n()};c.ones=k;c.unitX=d;c.unitY=h;c.ZEROS=n();c.ONES=k();c.UNIT_X=d();c.UNIT_Y=h()})},"esri/views/3d/webgl-engine/shaders/LineCalloutPrograms":function(){define(["require","exports","../lib/DefaultVertexAttributeLocations","./sources/resolver",
"../../../webgl/programUtils"],function(p,c,n,l,k){Object.defineProperty(c,"__esModule",{value:!0});var d=function(d){return k.glslifyDefineMap({OCCL_TEST:d.occlTest,VERTICAL_OFFSET:d.verticalOffset,SCREEN_SIZE_PERSPECTIVE:d.screenSizePerspective,DEPTH_HUD:d.depthHud,DEPTH_HUD_ALIGN_START:d.depthHudAlignStart,CENTER_OFFSET_UNITS_SCREEN:d.centerOffsetUnitsScreen,SLICE:d.slice})};c.program={name:"line-callout",shaders:function(c){return{vertexShader:d(c)+l.resolveIncludes("materials/lineCallout/lineCallout.vert"),
fragmentShader:d(c)+l.resolveIncludes("materials/lineCallout/lineCallout.frag")}},attributes:n.Default3D}})},"esri/views/3d/layers/graphics/graphicSymbolUtils":function(){define(["require","exports","./Graphics3DSymbol","./Graphics3DWebStyleSymbol"],function(p,c,n,l){Object.defineProperty(c,"__esModule",{value:!0});c.getGraphics3DSymbol=function(c){return c instanceof l?c.graphics3DSymbol:c instanceof n?c:null}})},"esri/views/3d/layers/graphics/Graphics3DSymbol":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/asyncUtils ../../../../core/maybe ../../../../core/promiseUtils ./Graphics3DGraphic ./Graphics3DObject3DGraphicLayer ./Graphics3DSymbolLayerFactory ./Loadable ./symbolComplexity".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m){return function(c){function e(a,b,d){var e=c.call(this)||this;e._symbol=a;e._context=b;e._backgroundLayers=d;e._destroyed=!1;e.symbolLayers=[];e.referenced=0;return e}n(e,c);Object.defineProperty(e.prototype,"symbol",{get:function(){return this._symbol},set:function(a){this._symbol=a;if(this.symbolLayers)for(var b=0;b<a.symbolLayers.length;b++){var d=this.symbolLayers[b];h.isNone(d)||(d.symbol=a,d.symbolLayer=a.symbolLayers.items[b])}},enumerable:!0,configurable:!0});
e.prototype.doLoad=function(b){return k(this,void 0,void 0,function(){var c,e,f,m,q,n,t=this;return l(this,function(r){switch(r.label){case 0:c=this._symbol.symbolLayers;this._backgroundLayers&&(c=this._backgroundLayers.concat(c));e=c.length;this.symbolLayers.length=c.length;f=this._context.layerOrder;m=function(d){var h=c.getItemAt(d);if(!1===h.enabled)return"continue";q._context.layerOrder=f+(1-(1+d)/e);q._context.layerOrderDelta=1/e;var m=a.make(q.symbol,h,q._context,h._ignoreDrivers);g.onAbortOrThrow(b,
function(){return m.destroy()});q.symbolLayers[d]=m};q=this;for(n=0;n<e;n++)m(n);this._context.layerOrder=f;return[4,d.forEach(this.symbolLayers,function(a,b){return k(t,void 0,void 0,function(){return l(this,function(d){switch(d.label){case 0:if(!h.isSome(a))return[3,4];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,a.load()];case 2:return d.sent(),[3,4];case 3:return d.sent(),this.symbolLayers[b]=null,[3,4];case 4:return[2]}})})})];case 1:r.sent();if(this.symbolLayers.length&&!this.symbolLayers.some(function(a){return!!a}))throw Error();
return[2]}})})};e.prototype.whenSymbolLayerSize=function(a){return k(this,void 0,void 0,function(){var b;return l(this,function(d){switch(d.label){case 0:return d.trys.push([0,2,,3]),[4,this.load()];case 1:return d.sent(),[3,3];case 2:return d.sent(),[3,3];case 3:return b=this.symbolLayers[a],[2,h.isSome(b)?b.getCachedSize():null]}})})};e.prototype.createGraphics3DGraphic=function(a,b){for(var d=a.graphic,c=Array(this.symbolLayers.length),e=0;e<this.symbolLayers.length;e++){var g=this.symbolLayers[e];
h.isSome(g)&&(c[e]=g.createGraphics3DGraphic(a))}return new f(d,b||this,c,a.layer)};Object.defineProperty(e.prototype,"complexity",{get:function(){return m.totalSymbolComplexities(this.symbolLayers.map(function(a){return h.isSome(a)&&a.complexity}))},enumerable:!0,configurable:!0});e.prototype.globalPropertyChanged=function(a,d){for(var c=this.symbolLayers.length,e=function(c){var e=f.symbolLayers[c],g=function(a){a=a._graphics[c];return a instanceof b?a:null};if(h.isSome(e)&&!e.globalPropertyChanged(a,
d,g))return{value:!1}},f=this,g=0;g<c;g++){var m=e(g);if("object"===typeof m)return m.value}return!0};e.prototype.applyRendererDiff=function(a,b){return 1!==this.loadStatus?!1:this.symbolLayers.reduce(function(d,c,e){return d&&(h.isNone(c)||c.applyRendererDiff(a,b))},!0)};e.prototype.prepareSymbolPatch=function(a){if(2!==this.loadStatus&&"partial"===a.diff.type){var b=a.diff.diff;if(b.symbolLayers&&"partial"===b.symbolLayers.type){var d=b.symbolLayers.diff;this.symbolLayers.forEach(function(b,c){var e;
if(!h.isNone(b)){var f=d[c];if(f){var g={diff:f,graphics3DGraphicPatches:[],symbolLayerStatePatches:[]};b.prepareSymbolLayerPatch(g);(e=a.symbolStatePatches).push.apply(e,g.symbolLayerStatePatches);g.graphics3DGraphicPatches.length&&a.graphics3DGraphicPatches.push(function(a,b){var d=a._graphics[c];g.graphics3DGraphicPatches.forEach(function(a){return a(d,b)})})}}})}}};e.prototype.updateGeometry=function(a,b){for(var d=0;d<this.symbolLayers.length;d++){var c=this.symbolLayers[d];if(!h.isNone(c)&&
!c.updateGeometry(a._graphics[d],b))return!1}return!0};e.prototype.getFastUpdateStatus=function(){var a=0,b=0,d=0;this.symbolLayers.forEach(function(c){h.isNone(c)||(0===c.loadStatus?a++:c.isFastUpdatesEnabled()?d++:b++)});return{loading:a,slow:b,fast:d}};e.prototype.setDrawOrder=function(a,b){for(var d=this.symbolLayers.length,c=1/d,e=0;e<d;e++){var f=this.symbolLayers[e];h.isSome(f)&&f.setDrawOrder(a+(1-(1+e)/d),c,b)}};e.prototype.destroy=function(){if(this.destroyed)console.error("Graphics3DSymbol.destroy called when already destroyed!");
else{this.abortLoad();for(var a=0,b=this.symbolLayers;a<b.length;a++){var d=b[a];h.isSome(d)&&d.destroy()}this.symbolLayers.length=0;this._destroyed=!0}};Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0});return e}(e.Loadable)})},"esri/views/3d/layers/graphics/Graphics3DGraphic":function(){define("require exports ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/asyncUtils ../../../../core/maybe ../../../../core/ObjectPool ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/Polygon ../../../../geometry/support/aaBoundingBox ../../../../geometry/support/aaBoundingRect ../../../../layers/graphics/dehydratedFeatures ../../../../layers/graphics/featureConversionUtils ./featureExpressionInfoUtils ../../support/projectionUtils".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u){var t=new h(Array,function(a){return b.set(a,b.ZERO)},null,10,5),r=a.create();return function(){function c(a,b,d,c){this._labelGraphics=[];this._auxiliaryGraphics=[];for(var e=Array(2),f=0;f<e.length;f++)e[f]=Array(4);this._visibilityFlags=e;this._featureExpressionFeature=null;this._optimizedGeometry={geometry:null,hasZ:!1,hasM:!1};this.extent=null;++b.referenced;this.graphics3DSymbol=b;this.graphic=a;this._graphics=d;this._featureExpressionFeature=q.createFeature(a,
c)}c.prototype.initialize=function(a,b){var d=this;this._layer=a;this._stage=b;this.forEachSymbolLayerGraphic(function(c){c.initialize(a,b);c.setVisibility(d.isVisible())})};c.prototype.destroy=function(){this.forEachSymbolLayerGraphic(function(a){return a.destroy()});this._auxiliaryGraphics=this._graphics=null;--this.graphics3DSymbol.referenced;this.graphics3DSymbol=null};Object.defineProperty(c.prototype,"destroyed",{get:function(){return null==this._graphics},enumerable:!0,configurable:!0});c.prototype.clearLabelGraphics=
function(){this.forEachLabelGraphic(function(a){return a.destroy()});this._labelGraphics.length=0};c.prototype.addLabelGraphic=function(a,b,d){this._labelGraphics.push(a);a.initialize(b,d);a.setVisibility(this.isVisible(1))};c.prototype.addAuxiliaryGraphic=function(a){this._auxiliaryGraphics.push(a);this._layer&&(a.initialize(this._layer,this._stage),a.setVisibility(this.isVisible()))};c.prototype.isDraped=function(){var a=!1;this.forEachSymbolLayerGraphic(function(b){"draped"===b.type&&(a=!0)});
return a};c.prototype.isVisible=function(a,b){void 0===a&&(a=0);for(var d=0;d<=a;d++)for(var c=this._visibilityFlags[d],e=0;e<c.length;++e)if(!1===c[e]&&e!==b)return!1;return!0};c.prototype.hasVisibilityFlag=function(a,b){return null!=this._visibilityFlags[b][a]};c.prototype.setVisibilityFlag=function(a,b,d){var c=this.isVisible(d);this._visibilityFlags[d][a]=b;var e=this.isVisible(d);if(c===e)return!1;if(1===d)this.forEachLabelGraphic(function(a){return a.setVisibility(e)});else{this.forEachSymbolLayerGraphic(function(a){return a.setVisibility(e)});
var f=this.isVisible(1);this.forEachLabelGraphic(function(a){return a.setVisibility(f)})}return!0};c.prototype.clearVisibilityFlag=function(a,b){void 0===b&&(b=0);return this.setVisibilityFlag(a,void 0,b)};c.prototype.getBSRadius=function(){var a=0;this.forEachSymbolLayerGraphic(function(b){a=Math.max(a,b.getBSRadius())});return a};c.prototype.getCenterObjectSpace=function(a){void 0===a&&(a=g.vec3f64.create());return this._graphics[0].getCenterObjectSpace(a)};c.prototype.computeExtent=function(b){if(!this.extent){this.extent=
a.create();var c=this.graphic.geometry;if(d.isNone(c))return this.extent=null,!1;var f=c.spatialReference;e.computeAABR(c,this.extent);if(!f.equals(b)&&!u.boundingRectToBoundingRect(this.extent,f,this.extent,b))return this.extent=null,!1}return!0};c.prototype.getAsOptimizedGeometry=function(a,b){if(this._optimizedGeometry.geometry&&this._optimizedGeometry.hasZ===a&&this._optimizedGeometry.hasM===b)return this._optimizedGeometry.geometry;this._optimizedGeometry.geometry=this._convertGraphicToOptimizedGeometry(this.graphic,
a,b);this._optimizedGeometry.hasZ=a;this._optimizedGeometry.hasM=b;return this._optimizedGeometry.geometry};c.prototype._convertGraphicToOptimizedGeometry=function(a,b,d){a=a.geometry;if("mesh"===a.type||"extent"===a.type)a=f.fromExtent("mesh"===a.type?a.extent:a);return m.convertFromGeometry(a,b,d)};Object.defineProperty(c.prototype,"usedMemory",{get:function(){var a=this,b=0;this.forEachSymbolLayerGraphic(function(d){var c=d.graphics3DSymbolLayer.complexity;d="draped"===d.type?c.memory.draped:c.memory;
b+=d.bytesPerFeature;d.bytesPerCoordinate&&(b+=e.numVertices(a.graphic.geometry)*d.bytesPerCoordinate)});return b},enumerable:!0,configurable:!0});c.prototype.getProjectedBoundingBox=function(d,c,e,f,g){return l(this,void 0,void 0,function(){var h=this;return n(this,function(m){switch(m.label){case 0:return g||(g={boundingBox:null,requiresDrapedElevation:!1,screenSpaceObjects:[]}),g.boundingBox?b.empty(g.boundingBox):g.boundingBox=b.empty(),g.requiresDrapedElevation=!1,[4,k.forEach(this._graphics,
function(a){return l(h,void 0,void 0,function(){var h,m,k;return n(this,function(l){switch(l.label){case 0:if(!a)return[2];h="draped"===a.type?c:d;m=t.acquire();return[4,a.getProjectedBoundingBox(h,e,g.screenSpaceObjects,f,m)];case 1:return k=l.sent(),isFinite(k[2])&&isFinite(k[5])||(g.requiresDrapedElevation=!0),k&&b.expand(g.boundingBox,m),t.release(m),[2]}})})})];case 1:return m.sent(),b.allFinite(g.boundingBox)||a.allFinite(b.toRect(g.boundingBox,r))?[2,g]:[2,null]}})})};c.prototype.needsElevationUpdates=
function(){for(var a=0,b=this._graphics;a<b.length;a++){var d=b[a];if(d&&("object3d"===d.type||"lod-instance"===d.type)&&d.needsElevationUpdates)return!0}a=0;for(b=this._labelGraphics;a<b.length;a++)if((d=b[a])&&d.needsElevationUpdates)return!0;return!1};c.prototype.alignWithElevation=function(a,b){var d=this;this.forEachRenderedGraphic(function(c){"object3d"!==c.type&&"lod-instance"!==c.type||c.alignWithElevation(a,b,d._featureExpressionFeature)})};c.prototype.addHighlight=function(a,b){this.forEachSymbolLayerGraphic(function(d){return d.addHighlight(a,
b)})};c.prototype.removeHighlight=function(a){this.forEachSymbolLayerGraphic(function(b){return b.removeHighlight(a)})};c.prototype.forEachGraphicList=function(a,b){a.forEach(function(a,d){return a&&b(a,d)})};c.prototype.forEachSymbolLayerGraphic=function(a){this.forEachGraphicList(this._graphics,a);this.forEachGraphicList(this._auxiliaryGraphics,a)};c.prototype.forEachLabelGraphic=function(a){this.forEachGraphicList(this._labelGraphics,a)};c.prototype.forEachRenderedGraphic=function(a){this.forEachSymbolLayerGraphic(a);
this.forEachLabelGraphic(a)};return c}()})},"esri/views/3d/layers/graphics/Graphics3DSymbolLayerFactory":function(){define("require exports ../../../../core/Logger ./Graphics3DExtrudeSymbolLayer ./Graphics3DIconSymbolLayer ./Graphics3DLineSymbolLayer ./Graphics3DMeshFillSymbolLayer ./Graphics3DObjectSymbolLayer ./Graphics3DPathSymbolLayer ./Graphics3DPolygonFillSymbolLayer ./Graphics3DTextSymbolLayer ./Graphics3DWaterSymbolLayer".split(" "),function(p,c,n,l,k,d,h,g,f,b,a,e){Object.defineProperty(c,
"__esModule",{value:!0});var m=n.getLogger("esri.views.3d.layers.graphics.Graphics3DSymbolLayerFactory");c.make=function(a,b,d,c){var e=u[a.type]&&u[a.type][b.type]||q[b.type];return e?new e(a,b,d,c):(m.error("GraphicsLayerFactory#make","unknown symbol type "+b.type),null)};var q={icon:k.default,object:g.default,line:d.default,path:f.default,fill:b.default,extrude:l.default,text:a.default,water:e.default};c.setSymbolClass=function(a,b){q[a]=b};var u={"mesh-3d":{fill:h.default}}})},"esri/views/3d/layers/graphics/Graphics3DExtrudeSymbolLayer":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/Error ../../../../core/maybe ../../../../core/libs/earcut/earcut ../../../../core/libs/gl-matrix-2/mat3 ../../../../core/libs/gl-matrix-2/mat3f64 ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/Polygon ../../../../layers/graphics/dehydratedFeatures ./Graphics3DObject3DGraphicLayer ./Graphics3DSymbolCommonCode ./Graphics3DSymbolLayer ./graphicUtils ../support/edgeUtils ../../support/projectionUtils ../../support/buffer/BufferView ../../support/buffer/math/vec3 ../../webgl-engine/Stage ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/GeometryData ../../webgl-engine/lib/Object3D ../../webgl-engine/lib/Util ../../webgl-engine/materials/DefaultMaterial".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z,A,B,D,C,E,H,G,I){function K(a,b,d,c,e,f,g,h,k,l,q,r,n,t){var u=d.length/3,x=0;q+=2*c.count;var p=c.index,v=c.count,w=k,y=q;m.vec3.copy(S,n);var z=0<r?1:-1,p=3*p,A=w;n=3*A;for(var B=w+v,w=3*B,L=0;L<v;++L)t&&(S[0]=a[p+0],S[1]=a[p+1],S[2]=a[p+2],m.vec3.normalize(S,S)),e[n+0]=a[p+0],e[n+1]=a[p+1],e[n+2]=a[p+2],f[n+0]=b[p+0],f[n+1]=b[p+1],f[n+2]=b[p+2],g[n+0]=-z*S[0],g[n+1]=-z*S[1],g[n+2]=-z*S[2],h[A]=0,e[w+0]=a[p+0]+r*S[0],e[w+1]=a[p+1]+r*S[1],e[w+
2]=a[p+2]+r*S[2],f[w+0]=b[p+0],f[w+1]=b[p+1],f[w+2]=b[p+2],g[w+0]=z*S[0],g[w+1]=z*S[1],g[w+2]=z*S[2],h[B]=r,n+=3,w+=3,p+=3,A+=1,B+=1;p=0;n=3*y;w=3*(y+u);n=3*(y+u);w=3*y;a=O;b=V;0>r&&(a=V,b=O);for(L=0;L<u;++L)l[n+0]=d[p+a[0]],l[n+1]=d[p+a[1]],l[n+2]=d[p+a[2]],l[w+0]=d[p+b[0]]+v,l[w+1]=d[p+b[1]]+v,l[w+2]=d[p+b[2]]+v,n+=3,w+=3,p+=3;k+=2*c.count;q=q+2*u-(2*c.count+2*u);T(e,f,h,g,x,c.pathLengths[0],c.count,k,l,q,r);k+=4*c.pathLengths[0];q+=2*c.pathLengths[0];x+=c.pathLengths[0];for(d=1;d<c.pathLengths.length;++d)T(e,
f,h,g,x,c.pathLengths[d],c.count,k,l,q,r),k+=4*c.pathLengths[d],q+=2*c.pathLengths[d],x+=c.pathLengths[d]}function M(a,b,d,c,e,f,g){c[f]=c[g];g*=3;f*=3;a[f+0]=a[g+0];a[f+1]=a[g+1];a[f+2]=a[g+2];b[f+0]=b[g+0];b[f+1]=b[g+1];b[f+2]=b[g+2];d[f+0]=e[0];d[f+1]=e[1];d[f+2]=e[2]}function T(a,b,d,c,e,f,g,h,k,l,q){var r=e,n=e+1,t=e+g,u=e+g+1,p=h,x=h+1,v=h+2*f;h=h+2*f+1;0>q&&(r=e+g+1,u=e);l*=3;for(var w=0;w<f;++w){w===f-1&&(0<q?(n=e,u=e+g):(n=e,r=e+g));var y=a,z=r,A=n,B=t,D=P,z=3*z,A=3*A,B=3*B;m.vec3.set(L,
y[z++],y[z++],y[z++]);m.vec3.set(F,y[A++],y[A++],y[A++]);m.vec3.set(Y,y[B++],y[B++],y[B++]);m.vec3.subtract(X,F,L);m.vec3.subtract(R,Y,L);m.vec3.cross(D,R,X);m.vec3.normalize(D,D);M(a,b,c,d,P,p,r);M(a,b,c,d,P,x,n);M(a,b,c,d,P,v,t);M(a,b,c,d,P,h,u);k[l++]=p;k[l++]=v;k[l++]=h;k[l++]=p;k[l++]=h;k[l++]=x;r++;n++;t++;u++;p+=2;x+=2;v+=2;h+=2}}Object.defineProperty(c,"__esModule",{value:!0});var N=q.vec3f64.create(),S=q.vec3f64.create(),O=[0,2,1],V=[0,1,2],Q=t.makeDehydratedPoint(0,0,0,null),J={verticalDistanceToGround:0,
terrainElevation:0};p=function(c){function t(a,b,d,e){a=c.call(this,a,b,d,e)||this;a._edgeStageObjects=new Set;return a}n(t,c);t.prototype.doLoad=function(){return k(this,void 0,void 0,function(){var a,b,c,e,f,g,m;return l(this,function(k){if(!this._isPropertyDriven("size")&&(a=v.validateSymbolLayerSize(this._getSymbolSize())))throw new d("graphics3dextrudesymbollayer:invalid-size",a);b=this._getStageIdHint();c=h.get(this.symbolLayer,"material","color");e=this._getCombinedOpacityAndColor(c);f=q.vec3f64.fromArray(e);
g=e[3];m={diffuse:f,ambient:f,opacity:g,transparent:1>g||this._isPropertyDriven("opacity"),vertexColors:!0,slicePlaneEnabled:this._context.slicePlaneEnabled,castShadows:this.symbolLayer.castShadows};this._material=new I(m,b+"_3dlinemat");this._context.stage.add(D.ModelContentType.MATERIAL,this._material);return[2]})})};t.prototype.destroy=function(){c.prototype.destroy.call(this);this._material&&this._context.stage.remove(D.ModelContentType.MATERIAL,this._material.id)};t.prototype.createGraphics3DGraphic=
function(a){var b=a.renderingInfo;a=a.graphic;var d=a.geometry;if("polygon"!==d.type&&"extent"!==d.type)return this.logger.warn("unsupported geometry type for extrude symbol: "+d.type),null;if(!this._validateGeometry(d))return null;var c="graphic"+a.uid,e=this._getVertexOpacityAndColor(b,Float32Array,255),f=this.getGraphicElevationContext(a);return this._createAs3DShape(d,b,e,f,c,a.uid)};t.prototype.layerOpacityChanged=function(){var a=h.get(this.symbolLayer,"material","color"),a=this._getCombinedOpacity(a),
b=1>a||this._isPropertyDriven("opacity");this._material.setParameterValues({opacity:a,transparent:b});if(0<this._edgeStageObjects.size){var d=this._context.stage.renderView.ensureEdgeView(),c=this._getLayerOpacity();this._edgeStageObjects.forEach(function(a){return d.updateAllComponentOpacities(a,[c])})}return!0};t.prototype.layerElevationInfoChanged=function(a,b){return this.updateGraphics3DGraphicElevationInfo(a,b,x.needsElevationUpdates3D)};t.prototype.slicePlaneEnabledChanged=function(a,b){var d=
this;this._material.setParameterValues({slicePlaneEnabled:this._context.slicePlaneEnabled});if(0<this._edgeStageObjects.size){var c=this._context.stage.renderView.ensureEdgeView();a=this._createEdgeMaterial(c);if(h.isSome(a)){var e=[a];this._edgeStageObjects.forEach(function(a){return c.updateAllComponentMaterials(a,e,{slicePlaneEnabled:d._context.slicePlaneEnabled},!1)})}}return!0};t.prototype.pixelRatioChanged=function(a,b){return!0};t.prototype._getExtrusionSize=function(a){a=a.size&&this._isPropertyDriven("size")?
x.getSingleSizeDriver(a.size,2):this._getSymbolSize();return a/=this._context.renderCoordsHelper.unitInMeters};t.prototype._getSymbolSize=function(){return this.symbolLayer.size||1};t.prototype._createAs3DShape=function(d,c,k,l,n,t){var p=this,w="extent"===d.type?u.fromExtent(d):d;d=w.rings;var y=[],L=[],D=[],F=Array(6),P=this._context.renderSpatialReference===z.SphericalECEFSpatialReference,M=this._getExtrusionSize(c),ja=q.vec3f64.create();P||this._context.renderCoordsHelper.worldUpAtPosition(null,
ja);c=x.getGeometryVertexData3D(d,w.hasZ,w.spatialReference,this._context.renderSpatialReference,this._context.elevationProvider,this._context.renderCoordsHelper,l);this._logGeometryCreationWarnings(c,d,"rings","ExtrudeSymbol3DLayer");if(0===d.length||!d.some(function(a){return 0<a.length}))return null;var T=v.computeCentroid(w);if(h.isNone(T))return null;d=e.mat4f64.create();z.computeLinearTransformation(w.spatialReference,[T.x,T.y,0],d,this._context.renderSpatialReference);var Y=e.mat4f64.create();
a.mat4.invert(Y,d);var I=b.mat3f64.create();f.mat3.normalFromMat4(I,Y);for(var E=c.geometryData.polygons,R=c.eleVertexData,ba=c.vertexData,w=ba.length/3,O=new Float64Array(18*w),da=new Float64Array(18*w),X=new Float64Array(18*w),S=new Float64Array(6*w),V=0,w=function(a){var b=E[a],d=b.count,c=b.index;if(ga._context.clippingExtent&&(x.computeBoundingBox(R,c,d,F),x.boundingBoxClipped(F,ga._context.clippingExtent)))return"continue";var f=new Float64Array(R.buffer,3*c*O.BYTES_PER_ELEMENT,3*d),h=b.holeIndices.map(function(a){return a-
c}),f=g(f,h,3);if(0===f.length)return"continue";var h=new Uint32Array(6*d+2*f.length),m=6*d,l=3*O.BYTES_PER_ELEMENT,l=new A.BufferViewVec3f64(O.buffer,V*l,l,(V+m)*l),q=3*da.BYTES_PER_ELEMENT,q=new A.BufferViewVec3f64(da.buffer,V*q,q,(V+m)*q),r=new Float64Array(X.buffer,3*V*X.BYTES_PER_ELEMENT,3*m),m=new Float64Array(S.buffer,1*V*S.BYTES_PER_ELEMENT,1*m);K(ba,R,f,b,l.typedBuffer,r,q.typedBuffer,m,0,h,0,M,ja,P);B.transformMat4(l,l,Y);B.transformMat3(q,q,I);V+=6*d;b=ga._createExtrudeGeometry(h,{positions:l.typedBuffer,
elevation:r,normals:q.typedBuffer,heights:m},k);a=new C(b,n+"path"+a);a.singleUse=!0;y.push(a);L.push(ga._material);D.push(e.mat4f64.create())},ga=this,T=0;T<E.length;++T)w(T);if(0===y.length)return null;var W=new H({geometries:y,materials:L,transformations:D,castShadow:!0,metadata:{layerUid:this._context.layer.uid,graphicUid:t},idHint:n});W.objectTransformation=d;var ha=function(a){var b=p._context.stage.renderView.ensureEdgeView();b.removeObject(a);p._edgeStageObjects.delete(a);var d=p._createEdgeMaterial(b);
h.isSome(d)&&(p._edgeStageObjects.add(a),b.addObject(a,[d],{slicePlaneEnabled:p._context.slicePlaneEnabled},!p._context.isAsync))};ha(W);t=new r(this,W,y,null,null,function(b,d,c,f){b=b.stageObject;Q.spatialReference=c.spatialReference;for(var g=b.getGeometryRecords(),h=g.length,k="absolute-height"!==d.mode,l=0,q=b.objectTransformation,r=a.mat4.invert(e.mat4f64.create(),q),n=0;n<h;n++){var t=g[n].geometry;t.invalidateBoundingInfo();for(var u=t.data.getVertexAttr(),t=u[G.VertexAttrConstants.POSITION].data,
p=u[G.VertexAttrConstants.SIZE].data,u=u.mapPos.data,v=t.length/3,w=0,y=0,z=!1,A=0,B=0;B<v;B++){Q.x=u[y];Q.y=u[y+1];Q.z=u[y+2];Z[0]=t[w];Z[1]=t[w+1];Z[2]=t[w+2];var L=x.computeElevation(c,Q,d,f,k?J:null);k&&(A+=J.terrainElevation);m.vec3.set(N,t[w+0],t[w+1],t[w+2]);m.vec3.transformMat4(N,N,q);f.setAltitude(L+p[w/3],N);m.vec3.transformMat4(N,N,r);t[w]=N[0];t[w+1]=N[1];t[w+2]=N[2];L=.01/f.unitInMeters;if(Math.abs(Z[0]-t[w])>L||Math.abs(Z[1]-t[w+1])>L||Math.abs(Z[2]-t[w+2])>L)z=!0;y+=3;w+=3}z&&b.geometryVertexAttrsUpdated(n);
l+=A/v}d=l/h;ha(W);return d},l);t.alignedTerrainElevation=c.terrainElevation;t.needsElevationUpdates=x.needsElevationUpdates3D(l.mode);return t};t.prototype._createExtrudeGeometry=function(a,b,d){for(var c=a.length,e=new Uint32Array(c),f=0;f<c;f++)e[f]=0;c={};f={};c[G.VertexAttrConstants.POSITION]=a;c[G.VertexAttrConstants.NORMAL]=a;c[G.VertexAttrConstants.COLOR]=e;f[G.VertexAttrConstants.POSITION]={size:3,data:b.positions};f[G.VertexAttrConstants.NORMAL]={size:3,data:b.normals};f[G.VertexAttrConstants.COLOR]=
{size:4,data:d};f[G.VertexAttrConstants.SIZE]={size:1,data:b.heights};b.elevation&&(f.mapPos={size:3,data:b.elevation},c.mapPos=a);return new E(f,c)};t.prototype._createEdgeMaterial=function(a){var b={opacity:this._getLayerOpacity()};return y.createMaterial(a,this.symbolLayer,b)};return t}(w.default);c.Graphics3DExtrudeSymbolLayer=p;var P=q.vec3f64.create(),L=q.vec3f64.create(),F=q.vec3f64.create(),Y=q.vec3f64.create(),X=q.vec3f64.create(),R=q.vec3f64.create(),Z=q.vec3f64.create();c.default=p})},
"esri/views/3d/layers/support/edgeUtils":function(){define("require exports ../../../../Color ../../../../core/compilerUtils ../../../../core/maybe ../../../../core/screenUtils ../../../../core/libs/gl-matrix-2/vec4f64".split(" "),function(p,c,n,l,k,d,h){function g(c,b,a){if(k.isNone(b))return null;var e=k.isSome(b.color)?h.vec4f64.fromArray(n.toUnitRGBA(b.color)):h.vec4f64.fromValues(0,0,0,0);a=a.opacity;switch(b.type){case "solid":return c.createSolidEdgeMaterial({color:e,size:d.pt2px(b.size),extensionLength:d.pt2px(b.extensionLength),
opacity:a});case "sketch":return c.createSketchEdgeMaterial({color:e,size:d.pt2px(b.size),extensionLength:d.pt2px(b.extensionLength),opacity:a});default:l.neverReached(b)}}Object.defineProperty(c,"__esModule",{value:!0});c.createMaterial=function(d,b,a){return g(d,b&&b.enabled&&b.edges||null,a)};c.createMaterialFromEdges=g})},"esri/views/3d/support/buffer/math/vec3":function(){define(["require","exports","./common"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.transformMat4=
function(c,k,d){if(c.count!==k.count)n.logger.error("source and destination buffers need to have the same number of elements");else{var h=c.count,g=d[0],f=d[1],b=d[2],a=d[4],e=d[5],m=d[6],l=d[8],u=d[9],t=d[10],r=d[12],p=d[13];d=d[14];var w=c.typedBuffer;c=c.typedBufferStride;var v=k.typedBuffer;k=k.typedBufferStride;for(var y=0;y<h;y++){var z=y*c,A=y*k,B=v[A],D=v[A+1],A=v[A+2];w[z]=g*B+a*D+l*A+r;w[z+1]=f*B+e*D+u*A+p;w[z+2]=b*B+m*D+t*A+d}}};c.transformMat3=function(c,k,d){if(c.count!==k.count)n.logger.error("source and destination buffers need to have the same number of elements");
else{var h=c.count,g=d[0],f=d[1],b=d[2],a=d[3],e=d[4],m=d[5],l=d[6],u=d[7];d=d[8];var t=c.typedBuffer;c=c.typedBufferStride;var r=k.typedBuffer;k=k.typedBufferStride;for(var p=0;p<h;p++){var w=p*c,v=p*k,y=r[v],z=r[v+1],v=r[v+2];t[w]=g*y+a*z+l*v;t[w+1]=f*y+e*z+u*v;t[w+2]=b*y+m*z+d*v}}};c.scale=function(c,k,d){var h=Math.min(c.count,k.count),g=c.typedBuffer;c=c.typedBufferStride;var f=k.typedBuffer;k=k.typedBufferStride;for(var b=0;b<h;b++){var a=b*c,e=b*k;g[a]=d*f[e];g[a+1]=d*f[e+1];g[a+2]=d*f[e+2]}}})},
"esri/views/3d/support/buffer/math/common":function(){define(["require","exports","../../../../../core/Logger"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.logger=n.getLogger("esri.views.3d.support.buffer.math")})},"esri/views/3d/webgl-engine/materials/DefaultMaterial":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/assignHelper ../../../../core/has ../../../../core/libs/gl-matrix-2/mat3f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../support/buffer/InterleavedLayout ../lib/GLMaterialTexture ../lib/Material ../lib/Util ./internal/bufferWriters ./internal/MaterialUtil ./internal/MaterialUtil ./renderers/InstancedRenderer ./renderers/MergedRenderer ../shaders/DefaultPrograms ../../../webgl/renderState".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w){function v(a,b){var d=b.vvSizeEnabled;b.vvSizeEnabled?(a.setUniform3fv("vvSizeMinSize",b.vvSizeMinSize),a.setUniform3fv("vvSizeMaxSize",b.vvSizeMaxSize),a.setUniform3fv("vvSizeOffset",b.vvSizeOffset),a.setUniform3fv("vvSizeFactor",b.vvSizeFactor)):d&&a.setUniform3fv("vvSizeValue",b.vvSizeValue);d&&(a.setUniform3fv("vvSymbolAnchor",b.vvSymbolAnchor),a.setUniformMatrix3fv("vvSymbolRotationMatrix",b.vvSymbolRotationMatrix));b.vvColorEnabled&&(a.setUniform1fv("vvColorValues",
b.vvColorValues),a.setUniform4fv("vvColorColors",b.vvColorColors))}var y=e.assert;p=function(a){function b(d,c){c=a.call(this,c)||this;c.supportsEdges=!0;c.params=u.copyParameters(d,E);c.vertexBufferLayout=b.getVertexBufferLayout(c.params);c.instanceBufferLayout=d.instanced?b.getInstanceBufferLayout(c.params):null;c.textureMode=c.vertexBufferLayout.hasField("uv0")?"Textured":"none";return c}n(b,a);b.prototype.isVisibleInPass=function(a){return 3===a?this.params.castShadows:!0};b.prototype.isVisible=
function(){var b=this.params;if(!a.prototype.isVisible.call(this)||0===b.layerOpacity)return!1;var d=b.instanced,c=b.vertexColors,e=b.symbolColors,d=!!d&&-1<d.indexOf("color"),f=b.vvColorEnabled,g="replace"===b.colorMixMode,h=0<b.opacity,b=b.externalColor&&0<b.externalColor[3];return c&&(d||f||e)?g?!0:h:c?g?b:h:d||f||e?g?!0:h:g?b:h};b.prototype.setParameterValues=function(a){var b=this.params,d;for(d in a)"instanced"===d&&y(a.instanced===b.instanced,"Can not change instanced attributes"),"textureId"===
d&&y(b.textureId,"Can only change texture of material that already has a texture"),"vertexColors"===d&&!0===a[d]&&a[d]!==b[d]&&y(b.vertexColors,"Can not enable vertex colors after DefaultMaterial creation"),b[d]=a[d];this.notifyDirty("matChanged")};b.prototype.getParameters=function(){return this.params};b.prototype.intersect=function(a,b,d,c,e,f,g,m){if(null!==this.params.verticalOffset){m=c.camera;h.vec3.set(O,d[12],d[13],d[14]);var k=h.vec3.subtract(V,O,m.eye),l=h.vec3.length(k),q=h.vec3.scale(k,
k,1/l),r=null,k=null;switch(c.viewingMode){case "global":k=h.vec3.normalize(N,O);break;case "local":k=h.vec3.copy(N,T)}this.params.screenSizePerspective&&(r=h.vec3.dot(k,q));m=u.verticalOffsetAtDistance(m,l,this.params.verticalOffset,r,this.params.screenSizePerspective);h.vec3.scale(k,k,m);h.vec3.transformMat3(S,k,c.transform.inverseRotation);e=h.vec3.subtract(K,e,S);f=h.vec3.subtract(M,f,S)}u.intersectTriangleGeometry(a,b,d,c,e,f,g)};b.prototype.getGLMaterials=function(){return{color:z,depthShadowMap:B,
normal:D,depth:A,highlight:C}};b.prototype.createRenderer=function(a,b){return this.params.softwareInstanced?new t(a,b,this):new r(a,b,this)};b.prototype.createBufferWriter=function(){return new H(this.vertexBufferLayout,this.instanceBufferLayout)};b.getVertexBufferLayout=function(a){var b=a.textureId||a.normalTextureId||a.metallicRoughnessTextureId||a.emissiveTextureId||a.occlusionTextureId,d=f.newLayout().vec3f("position").vec3f("normal");a.vertexTangents&&d.vec4f("aTangent");b&&d.vec2f("uv0");
a.vertexColors&&d.vec4u8("color");a.symbolColors&&d.vec4u8("symbolColor");return d};b.getInstanceBufferLayout=function(a){var b=f.newLayout(),b=a.instancedDoublePrecision?b.vec3f("modelOriginHi").vec3f("modelOriginLo").mat3f("model").mat3f("modelNormal"):b.mat4f("model").mat4f("modelNormal");a.instanced&&-1<a.instanced.indexOf("color")&&(b=b.vec4f("instanceColor"));a.instanced&&-1<a.instanced.indexOf("featureAttribute")&&(b=b.vec4f("instanceFeatureAttribute"));return b};return b}(a);var z=function(a){function b(b,
d,c){var e=this,f=b.getParameters(),e=a.call(this,b,d,c,f.textureId,f.normalTextureId,f.emissiveTextureId,f.occlusionTextureId,f.metallicRoughnessTextureId,f.textureInitTransparent)||this;e.params=u.copyParameters(f);d=e.params;e.slot=d.transparent?d.writeDepth?7:10:5;e.textureMode=b.textureMode;b=d.instanced;e.instanced=!!b;e.instancedColor=!!b&&-1<b.indexOf("color");e._createPrograms();e.selectPipeline();return e}n(b,a);b.prototype._createPrograms=function(){var a=this;this.programs=q.BindParametersMap.create(this.params,
function(b){return a._createProgram(b)})};b.prototype._createProgram=function(a){var b=this.params;return this.programRep.getProgram(x.colorPass,{treeRendering:!!b.treeRendering,textureMode:this.textureMode,normalTexture:!!b.normalTextureId,colorTexture:!!b.textureId,tangents:b.vertexTangents?"vertex":"none",vertexColors:b.vertexColors,symbolColors:b.symbolColors,flipV:b.flipV,doubleSided:b.doubleSided&&"normal"===b.doubleSidedType,windowOrderDoubleSided:b.doubleSided&&"winding-order"===b.doubleSidedType,
instanced:!!this.instanced,instancedDoublePrecision:b.instancedDoublePrecision,instancedColor:this.instancedColor,receiveShadows:a.receiveShadows,receiveSSAO:a.receiveSSAO,vvSize:b.vvSizeEnabled,vvColor:b.vvColorEnabled,verticalOffset:null!==b.verticalOffset,screenSizePerspective:null!==b.screenSizePerspective,slice:b.slicePlaneEnabled,sliceHighlightDisabled:b.sliceHighlightDisabled,normals:b.normals,textureAlphaMode:b.textureAlphaMode,textureAlphaPremultiplied:!!b.textureAlphaPremultiplied,iosSafariFix:I,
roughnessMetallnessTexture:!!b.metallicRoughnessTextureId,emissionTexture:!!b.emissiveTextureId,occlusionTexture:!!b.occlusionTextureId,usePBR:b.usePBR})};b.prototype.selectPipeline=function(){var a=this.params;this.pipelineState=w.makePipelineState({blending:a.transparent&&w.separateBlendingParams(770,1,771,771),culling:G(a),depthTest:{func:513},depthWrite:a.writeDepth&&w.defaultDepthWriteParams,colorWrite:w.defaultColorWriteParams})};b.prototype.beginSlot=function(a){return a===this.slot};b.prototype.getProgram=
function(){return this.program||this.getPrograms()[0]};b.prototype.getPrograms=function(){return q.BindParametersMap.programs(this.programs)};b.prototype.updateParameters=function(){this.params=u.copyParameters(this.material.getParameters());this.slot=this.params.transparent?this.params.writeDepth?7:10:5;this.updateTexture(this.params.textureId);this._createPrograms();this.selectPipeline()};b.prototype.bind=function(a,b){var d=this.params,c=this.program=q.BindParametersMap.lookup(this.programs,b);
a.bindProgram(c);a.setPipelineState(this.pipelineState);c.setUniform3fv("ambient",d.ambient);c.setUniform3fv("diffuse",d.diffuse);c.setUniform3fv("specular",d.specular);c.setUniform4fv("externalColor",d.externalColor);c.setUniform1i("colorMixMode",u.colorMixModes[d.colorMixMode]);d.usePBR&&(c.setUniform1f("metalnessFactor",d.metallicFactor),c.setUniform1f("roughnessFactor",d.roughnessFactor),c.setUniform3fv("emissionFactor",d.emissiveFactor));c.setUniform1f("opacity",d.opacity);c.setUniform1f("layerOpacity",
d.layerOpacity);u.bindVerticalOffset(d.verticalOffset,b,c);u.bindScreenSizePerspective(d.screenSizePerspective,c);v(c,d);this.bindTexture(a,c);"none"!==this.textureMode&&this.bindTextureSize(a,c);"mask"!==d.textureAlphaMode&&"maskBlend"!==d.textureAlphaMode||c.setUniform1f("textureAlphaCutoff",d.textureAlphaCutoff)};b.prototype.release=function(a,b){};b.prototype.bindView=function(a,b){a=this.program=q.BindParametersMap.lookup(this.programs,b);var d=this.params,c=d.instancedDoublePrecision?g.vec3f64.fromValues(b.viewInvTransp[3],
b.viewInvTransp[7],b.viewInvTransp[11]):b.origin;u.bindView(c,b.view,a);u.bindCamPos(c,b.viewInvTransp,a);d.instancedDoublePrecision&&u.bindViewOriginDouble(c,a);d.slicePlaneEnabled&&u.bindSlicePlane(c,b.slicePlane,a);b.shadowMappingEnabled&&b.shadowMap.bindView(a,c)};b.prototype.bindInstance=function(a,b){a=this.program;a.setUniformMatrix4fv("model",b.transformation);a.setUniformMatrix4fv("modelNormal",b.transformationNormal)};b.prototype.getDrawMode=function(){return 4};return b}(b),A=function(a){function b(b,
d,c,e){void 0===e&&(e=!1);d=a.call(this,b,d,c,b.getParameters().textureId)||this;d.textureMode=b.textureMode;d.biased=e;d.updateParameters();return d}n(b,a);b.prototype.beginSlot=function(a){return a===this.slot};b.prototype.getProgram=function(){return this.program};b.prototype.selectProgram=function(){var a=this.params;this.program=this.programRep.getProgram(x.depthPass,{textureMode:this.textureMode,normalTexture:!!a.normalTextureId,colorTexture:!!a.textureId,tangents:a.vertexTangents?"vertex":
"none",flipV:a.flipV,instanced:!!a.instanced,instancedDoublePrecision:a.instancedDoublePrecision,shadowMap:this.biased,vvSize:a.vvSizeEnabled,verticalOffset:null!==a.verticalOffset,screenSizePerspective:null!==a.screenSizePerspective,slice:a.slicePlaneEnabled,textureAlphaMode:a.textureAlphaMode,normals:a.normals,iosSafariFix:I});this.pipelineState=w.makePipelineState({culling:G(a),depthTest:{func:513},depthWrite:a.writeDepth&&w.defaultDepthWriteParams,colorWrite:w.defaultColorWriteParams})};b.prototype.selectSlot=
function(){this.slot=this.params.transparent?this.params.writeDepth?7:10:5};b.prototype.updateParameters=function(){this.params=u.copyParameters(this.material.getParameters());this.selectProgram();this.selectSlot();this.updateTexture(this.params.textureId)};b.prototype.bind=function(a,b){var d=this.program,c=this.params;a.bindProgram(d);a.setPipelineState(this.pipelineState);d.setUniform2fv("nearFar",b.nearFar);u.bindVerticalOffset(c.verticalOffset,b,d);u.bindScreenSizePerspective(c.screenSizePerspective,
d);v(d,c);"mask"!==c.textureAlphaMode&&"maskBlend"!==c.textureAlphaMode||d.setUniform1f("textureAlphaCutoff",c.textureAlphaCutoff);this.bindTexture(a,d)};b.prototype.release=function(a){};b.prototype.bindView=function(a,b){a=this.program;var d=this.params,c=d.instancedDoublePrecision?g.vec3f64.fromValues(b.viewInvTransp[3],b.viewInvTransp[7],b.viewInvTransp[11]):b.origin;u.bindView(c,b.view,a);d.slicePlaneEnabled&&u.bindSlicePlane(c,b.slicePlane,a);d.screenSizePerspective&&u.bindCamPos(c,b.viewInvTransp,
a);d.instancedDoublePrecision&&u.bindViewOriginDouble(c,a)};b.prototype.bindInstance=function(a,b){this.program.setUniformMatrix4fv("model",b.transformation)};b.prototype.getDrawMode=function(){return 4};return b}(b),B=function(a){function b(b,d,c){return a.call(this,b,d,c,!0)||this}n(b,a);return b}(A),D=function(a){function b(b,d,c){d=a.call(this,b,d,c,b.getParameters().textureId)||this;d.params=u.copyParameters(b.getParameters());d.textureMode=b.textureMode;d.selectProgram();d.selectSlot();return d}
n(b,a);b.prototype.beginSlot=function(a){return a===this.slot};b.prototype.getProgram=function(){return this.program};b.prototype.selectProgram=function(){var a=this.params;this.program=this.programRep.getProgram(x.normalPass,{textureMode:this.textureMode,normalTexture:!!a.normalTextureId,colorTexture:!!a.textureId,tangents:a.vertexTangents?"vertex":"none",flipV:a.flipV,instanced:!!a.instanced,instancedDoublePrecision:a.instancedDoublePrecision,vvSize:a.vvSizeEnabled,verticalOffset:null!==a.verticalOffset,
screenSizePerspective:null!==a.screenSizePerspective,slice:a.slicePlaneEnabled,textureAlphaMode:a.textureAlphaMode,normals:a.normals,iosSafariFix:I});this.pipelineState=w.makePipelineState({culling:G(a),depthTest:{func:513},depthWrite:a.writeDepth&&w.defaultDepthWriteParams,colorWrite:w.defaultColorWriteParams})};b.prototype.selectSlot=function(){this.slot=this.params.transparent?this.params.writeDepth?7:10:5};b.prototype.updateParameters=function(){this.params=u.copyParameters(this.material.getParameters());
this.selectProgram();this.selectSlot();this.updateTexture(this.params.textureId)};b.prototype.bind=function(a,b){var d=this.program,c=this.params;a.bindProgram(d);a.setPipelineState(this.pipelineState);this.bindTexture(a,d);u.bindVerticalOffset(c.verticalOffset,b,d);u.bindScreenSizePerspective(c.screenSizePerspective,d);v(d,c);"mask"!==c.textureAlphaMode&&"maskBlend"!==c.textureAlphaMode||d.setUniform1f("textureAlphaCutoff",c.textureAlphaCutoff)};b.prototype.release=function(a){};b.prototype.bindView=
function(a,b){a=this.program;var d=this.params,c=d.instancedDoublePrecision?g.vec3f64.fromValues(b.viewInvTransp[3],b.viewInvTransp[7],b.viewInvTransp[11]):b.origin;u.bindView(c,b.view,a);a.setUniformMatrix4fv("viewNormal",b.viewInvTransp);d.slicePlaneEnabled&&u.bindSlicePlane(c,b.slicePlane,a);d.screenSizePerspective&&u.bindCamPos(c,b.viewInvTransp,a);d.instancedDoublePrecision&&u.bindViewOriginDouble(c,a)};b.prototype.bindInstance=function(a,b){a=this.program;a.setUniformMatrix4fv("model",b.transformation);
a.setUniformMatrix4fv("modelNormal",b.transformationNormal)};b.prototype.getDrawMode=function(){return 4};return b}(b),C=function(a){function b(b,d,c){d=a.call(this,b,d,c,b.getParameters().textureId)||this;d.textureMode=b.textureMode;d.updateParameters();return d}n(b,a);b.prototype.beginSlot=function(a){return a===this.slot};b.prototype.getProgram=function(){return this.program};b.prototype.selectProgram=function(){var a=this.params;this.program=this.programRep.getProgram(x.highlightPass,{textureMode:this.textureMode,
normalTexture:!!a.normalTextureId,colorTexture:!!a.textureId,tangents:a.vertexTangents?"vertex":"none",flipV:a.flipV,instanced:!!a.instanced,instancedDoublePrecision:a.instancedDoublePrecision,vvSize:a.vvSizeEnabled,verticalOffset:null!==a.verticalOffset,screenSizePerspective:null!==a.screenSizePerspective,slice:a.slicePlaneEnabled,textureAlphaMode:a.textureAlphaMode,normals:a.normals,iosSafariFix:I});this.pipelineState=w.makePipelineState({culling:G(a),depthTest:{func:513},depthWrite:a.writeDepth&&
w.defaultDepthWriteParams,colorWrite:w.defaultColorWriteParams})};b.prototype.selectSlot=function(){this.slot=this.params.transparent?this.params.writeDepth?7:10:5};b.prototype.updateParameters=function(){this.params=u.copyParameters(this.material.getParameters());this.selectProgram();this.selectSlot();this.updateTexture(this.params.textureId)};b.prototype.bind=function(a,b){var d=this.program,c=this.params;a.bindProgram(d);a.setPipelineState(this.pipelineState);u.bindHighlightRendering(a,b,d);this.bindTexture(a,
d);u.bindVerticalOffset(c.verticalOffset,b,d);u.bindScreenSizePerspective(c.screenSizePerspective,d);v(d,c);"mask"!==c.textureAlphaMode&&"maskBlend"!==c.textureAlphaMode||d.setUniform1f("textureAlphaCutoff",c.textureAlphaCutoff)};b.prototype.release=function(a){};b.prototype.bindView=function(a,b){a=this.program;var d=this.params,c=d.instancedDoublePrecision?g.vec3f64.fromValues(b.viewInvTransp[3],b.viewInvTransp[7],b.viewInvTransp[11]):b.origin;u.bindView(c,b.view,a);d.slicePlaneEnabled&&u.bindSlicePlane(c,
b.slicePlane,a);d.screenSizePerspective&&u.bindCamPos(c,b.viewInvTransp,a);d.instancedDoublePrecision&&u.bindViewOriginDouble(c,a)};b.prototype.bindInstance=function(a,b){a=this.program;a.setUniformMatrix4fv("model",b.transformation);a.setUniformMatrix4fv("modelNormal",b.transformationNormal)};b.prototype.getDrawMode=function(){return 4};return b}(b);(p||(p={})).COLOR_GAMMA=2.1;var E={textureId:void 0,textureInitTransparent:!1,usePBR:!1,normalTextureId:void 0,vertexTangents:!1,occlusionTextureId:void 0,
emissiveTextureId:void 0,metallicRoughnessTextureId:void 0,emissiveFactor:[0,0,0],metallicFactor:0,roughnessFactor:.75,ambient:[.2,.2,.2],diffuse:[.8,.8,.8],specular:[0,0,0],externalColor:[1,1,1,1],colorMixMode:"multiply",opacity:1,layerOpacity:1,vertexColors:!1,symbolColors:!1,flipV:!1,doubleSided:!1,doubleSidedType:"normal",cullFace:void 0,softwareInstanced:!1,instanced:void 0,instancedDoublePrecision:!1,normals:"default",receiveSSAO:!0,castShadows:!0,verticalOffset:null,screenSizePerspective:null,
slicePlaneEnabled:!1,sliceHighlightDisabled:!1,vvSizeEnabled:!1,vvSizeMinSize:[1,1,1],vvSizeMaxSize:[100,100,100],vvSizeOffset:[0,0,0],vvSizeFactor:[1,1,1],vvSizeValue:[1,1,1],vvColorEnabled:!1,vvColorValues:[0,0,0,0,0,0,0,0],vvColorColors:[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],vvSymbolAnchor:[0,0,0],vvSymbolRotationMatrix:d.mat3f64.create(),transparent:!1,writeDepth:!0,textureAlphaMode:"blend",textureAlphaCutoff:.1,textureAlphaPremultiplied:!1},H=function(){function a(a,
b){this.vertexBufferLayout=a;this.instanceBufferLayout=b}a.prototype.allocate=function(a){return this.vertexBufferLayout.createBuffer(a)};a.prototype.elementCount=function(a){return a.indices.position.length};a.prototype.write=function(a,b,d,c){m.writeDefaultAttributes(b,this.vertexBufferLayout,a.transformation,a.invTranspTransformation,d,c)};return a}(),G=function(a){var b;b=a.cullFace?"none"!==a.cullFace:a.slicePlaneEnabled?!1:!a.transparent&&!a.doubleSided;return b&&{face:"front"===a.cullFace?
1028:1029,mode:2305}},I=!!k("ios")&&!!k("safari"),K=g.vec3f64.create(),M=g.vec3f64.create(),T=g.vec3f64.fromValues(0,0,1),N=g.vec3f64.create(),S=g.vec3f64.create(),O=g.vec3f64.create(),V=g.vec3f64.create();return p})},"esri/views/3d/webgl-engine/shaders/DefaultPrograms":function(){define(["require","exports","../lib/DefaultVertexAttributeLocations","./sources/resolver","../../../webgl/programUtils"],function(p,c,n,l,k){Object.defineProperty(c,"__esModule",{value:!0});var d=function(d){return k.glslifyDefineMap({TEXTURING:"none"!==
d.textureMode,TEXTURE_ATLAS:"AtlasTextured"===d.textureMode,VERTEXCOLORS:d.vertexColors,SYMBOLVERTEXCOLORS:d.symbolColors,FLIPV:d.flipV,DOUBLESIDED:d.doubleSided,WINDINGORDERDOUBLESIDED:d.windowOrderDoubleSided,INSTANCED:d.instanced,INSTANCED_DOUBLE_PRECISION:d.instancedDoublePrecision,INSTANCEDCOLOR:d.instancedColor,RECEIVE_SHADOWS:d.receiveShadows,RECEIVE_SSAO:d.receiveSSAO,VV_SIZE:d.vvSize,VV_COLOR:d.vvColor,VERTICAL_OFFSET:d.verticalOffset,SCREEN_SIZE_PERSPECTIVE:d.screenSizePerspective,SLICE:d.slice,
SLICE_HIGHLIGHT_DISABLED:d.sliceHighlightDisabled,GROUND_NORMAL_SHADING:d.groundNormalShading,NORMALS:{value:d.normals,options:{default:"NORMALS_DEFAULT",compressed:"NORMALS_COMPRESSED",screenDerivative:"NORMALS_SCREEN_DERIVATIVE"}},COMPONENTCOLORS:d.componentColor,TEXTURE_ALPHA_MODE_MASK:"mask"===d.textureAlphaMode,TEXTURE_ALPHA_MODE_MASK_BLEND:"maskBlend"===d.textureAlphaMode,TEXTURE_ALPHA_MODE_OPAQUE:"opaque"===d.textureAlphaMode,BIAS_SHADOWMAP:d.shadowMap,VERTEX_TANGENTS:"vertex"===d.tangents,
TEXTURE_COLOR:d.colorTexture,TEXTURE_NORMALS:!!d.normalTexture,TEXTURE_COORDINATES:!!d.roughnessMetallnessTexture||!!d.emissionTexture||!!d.occlusionTexture||!!d.normalTexture||"none"!==d.textureMode,TREE_RENDERING:d.treeRendering,IOS_SAFARI_FIX:d.iosSafariFix,TEXTURE_ALPHA_PREMULTIPLIED:!!d.textureAlphaPremultiplied,PBR_TEX_METALLNESS_ROUGHNESS:!!d.roughnessMetallnessTexture,PBR_TEX_EMISSION:!!d.emissionTexture,PBR_TEX_OCCLUSION:!!d.occlusionTexture,USE_PBR:d.usePBR})};c.colorPass={name:"default-color",
shaders:function(c){return{vertexShader:d(c)+l.resolveIncludes("materials/defaultMaterial/colorPass.vert"),fragmentShader:d(c)+l.resolveIncludes("materials/defaultMaterial/colorPass.frag")}},attributes:n.Default3D};c.depthPass={name:"default-depth",shaders:function(c){return{vertexShader:d(c)+l.resolveIncludes("materials/defaultMaterial/depthPass.vert"),fragmentShader:d(c)+l.resolveIncludes("materials/defaultMaterial/depthPass.frag")}},attributes:n.Default3D};c.normalPass={name:"default-normal",shaders:function(c){return{vertexShader:d(c)+
l.resolveIncludes("materials/defaultMaterial/normalPass.vert"),fragmentShader:d(c)+l.resolveIncludes("materials/defaultMaterial/normalPass.frag")}},attributes:n.Default3D};c.highlightPass={name:"default-highlight",shaders:function(c){return{vertexShader:d(c)+l.resolveIncludes("materials/defaultMaterial/highlightPass.vert"),fragmentShader:d(c)+l.resolveIncludes("materials/defaultMaterial/highlightPass.frag")}},attributes:n.Default3D}})},"esri/views/3d/layers/graphics/Graphics3DIconSymbolLayer":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../Color ../../../../core/asyncUtils ../../../../core/compilerUtils ../../../../core/Error ../../../../core/has ../../../../core/lang ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/screenUtils ../../../../core/urlUtils ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec2f64 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4f64 ../../../../symbols/support/IconSymbol3DLayerResource ../../../../symbols/support/utils ./constants ./ElevationAligners ./Graphics3DDrapedGraphicLayer ./Graphics3DObject3DGraphicLayer ./Graphics3DSymbolCommonCode ./Graphics3DSymbolLayer ./graphicUtils ./sdfPrimitives ../support/FastSymbolUpdates ../../support/projectionUtils ../../webgl-engine/Stage ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/lib/RenderGeometry ../../webgl-engine/lib/Texture ../../webgl-engine/materials/HUDMaterial".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z,A,B,D,C,E,H,G,I,K,M,T,N,S,O,V,Q){function J(a){return m.isSome(a)?"cross"===a||"x"===a:!1}Object.defineProperty(c,"__esModule",{value:!0});var P=r.mat4f64.create(),L=w.vec3f64.fromValues(0,0,1),F=[.25,.25,.75,.75],Y=[64,64];p=function(c){function r(a,b,d,e){a=c.call(this,a,b,d,e)||this;a._size=null;a._symbolTextureRatio=1;a._outlineSize=0;a._texture=null;a._drapedMaterial=null;a._releaseTexture=null;a._elevationOptions={supportsOffsetAdjustment:!0,
supportsOnTheGround:!0};return a}l(r,c);r.prototype.getCachedSize=function(){return{size:this._getIconSize()}};r.prototype.doLoad=function(a){return d(this,void 0,void 0,function(){var b,d;return k(this,function(c){switch(c.label){case 0:this._validateOrThrow();b=this._prepareMaterialParameters();d=this._getPrimitive();if(!m.isSome(d))return[3,1];this._prepareResourcesPrimitive(b,d);return[3,3];case 1:return[4,this._prepareResourcesHref(b,a)];case 2:c.sent(),c.label=3;case 3:return[2]}})})};r.prototype._validateOrThrow=
function(){if(!this._isPropertyDriven("size")){var a=G.validateSymbolLayerSize(this._getIconSize());if(a)throw new b("graphics3diconsymbollayer:invalid-size",a);}};r.prototype._getIconSize=function(){var a=this.symbolLayer,a=Math.round(null!=a.size?u.pt2px(a.size):16);return this._isPropertyDriven("size")?Math.max(a,64):a};r.prototype._prepareMaterialParameters=function(){var a={anchorPos:this._getAnchorPos()},b=this.symbol;if(this._hasVisibleVerticalOffset(b)){var b=b.verticalOffset,d=b.minWorldLength,
c=b.maxWorldLength;a.verticalOffset={screenLength:u.pt2px(b.screenLength),minWorldLength:d||0,maxWorldLength:null!=c?c:Infinity}}this._context.screenSizePerspectiveEnabled&&(a.screenSizePerspective=this._context.sharedResources.screenSizePerspectiveSettings);return a};r.prototype._prepareResourcesPrimitive=function(a,b){var d=this,c=this._getOutlineSize();if(J(b)&&0===c)throw Error("Nothing to render");this._outlineSize=c;a.color=this._getFillColor();a.outlineColor=this._getOutlineColor();a.outlineSize=
this._outlineSize;var e=this._context.sharedResources.textures.fromData(b,function(){var a;switch(b){case "circle":a=I.createCircle(128,64);break;case "square":a=I.createSquare(128,64);break;case "kite":a=I.createKite(128,64);break;case "cross":a=I.createCross(128,64);break;case "x":a=I.createX(128,64);break;case "triangle":a=I.createTriangle(128,64);break;default:f.neverReached(b)}return new V(a,"sdf_"+b,{mipmap:!1,wrap:{s:33071,t:33071},width:128,height:128,components:4,noUnpackFlip:!0})});this._texture=
e.texture;this._releaseTexture=function(){return d._context.sharedResources.textures.release(e.uid)};a.textureIsSignedDistanceField=!0;a.distanceFieldBoundingBox=F;a.textureId=this._texture.id;c=this._getIconSize();this._size=[c,c];this._symbolTextureRatio=2;this._createMaterialsAndAddToStage(a,this._context.stage)};r.prototype._prepareResourcesHref=function(c,e){return d(this,void 0,void 0,function(){var d,f,m,h,l,r,n,u,p,x,v=this;return k(this,function(k){switch(k.label){case 0:d=z.getIconHref(this.symbol,
this.symbolLayer);if(!a("esri-canvas-svg-support")&&t.isSVG(d))throw f="IconSymbol3DLayer failed to load (SVG symbols are not supported in IE11)",new b("graphics3diconsymbollayer:unsupported-image-format",f);this._outlineSize=this._getOutlineSize();c.color=this._getFillColor();c.outlineColor=this._getOutlineColor();c.outlineSize=this._outlineSize;c.textureIsSignedDistanceField=!1;m=this._getIconSize();h=m*this._context.layerView.view.pixelRatio;return[4,g.result(this._context.sharedResources.textures.fromUrl(d,
h,{signal:e}))];case 1:l=k.sent();if(!1===l.ok)throw q.throwIfAbortError(l.error),f="Failed to load (Request for icon resource failed: "+d+")",new b("graphics3diconsymbollayer:request-failed",f);r=l.value;n=r.uid;u=r.texture;this._releaseTexture=function(){return v._context.sharedResources.textures.release(n)};p=u.params;x=p.width/p.height;this._size=1<x?[m,Math.round(m/x)]:[Math.round(m*x),m];c.textureId=u.id;this._createMaterialsAndAddToStage(c,this._context.stage);return[2]}})})};r.prototype._getPrimitive=
function(){return this.symbolLayer.resource&&this.symbolLayer.resource.href?null:this.symbolLayer.resource&&this.symbolLayer.resource.primitive||y.defaultPrimitive};r.prototype._getOutlineSize=function(){var a=0,a=this.symbolLayer;if(m.isSome(a.outline)&&null!=a.outline.size)return Math.max(u.pt2px(a.outline.size),0);a=this._getPrimitive();a=J(a)?1.5:0;return Math.max(a,0)};r.prototype._getOutlineColor=function(){var a=this._getLayerOpacity(),b=m.get(this.symbolLayer,"outline","color");if(m.isSome(b)){var d=
h.toUnitRGB(b);return[d[0],d[1],d[2],b.a*a]}return[0,0,0,0]};r.prototype._getFillColor=function(){if(J(this._getPrimitive()))return A.TRANSPARENT;var a=m.isNone(this._getPrimitive()),b=m.get(this.symbolLayer,"material","color");return this._getCombinedOpacityAndColor(b,{hasIntrinsicColor:a})};r.prototype._getAnchorPos=function(){var a=this.symbolLayer.anchor,b=this.symbolLayer.anchorPosition;return"relative"===a?x.vec2f64.fromValues((b.x||0)+.5,-(b.y||0)+.5):a in G.namedAnchorToHUDMaterialAnchorPos?
G.namedAnchorToHUDMaterialAnchorPos[a]:G.namedAnchorToHUDMaterialAnchorPos.center};r.prototype._createMaterialsAndAddToStage=function(a,b){this._fastUpdates=K.initFastSymbolUpdatesState(this._context.renderer,this._fastVisualVariableConvertOptions());this._fastUpdates.enabled&&e.mixin(a,this._fastUpdates.materialParameters);var d=n({},a);d.verticalOffset=null;d.screenSizePerspective=null;d.occlusionTest=!1;d.slicePlaneEnabled=!1;d.shaderPolygonOffset=0;var c=this._getStageIdHint();this._drapedMaterial=
new Q(d,c+"_iconDraped");b.add(T.ModelContentType.MATERIAL,this._drapedMaterial);a.occlusionTest=!0;a.slicePlaneEnabled=this._context.slicePlaneEnabled;this._material=new Q(a,c+"_icon");b.add(T.ModelContentType.MATERIAL,this._material)};r.prototype.destroy=function(){c.prototype.destroy.call(this);this._material&&(this._context.stage.remove(T.ModelContentType.MATERIAL,this._material.id),this._material=null);this._drapedMaterial&&(this._context.stage.remove(T.ModelContentType.MATERIAL,this._drapedMaterial.id),
this._drapedMaterial=null);this._releaseTexture&&(this._releaseTexture(),this._releaseTexture=null)};r.prototype._getScaleFactor=function(a){if(this._isPropertyDriven("size")&&a.size){for(var b=0;3>b;b++){var d=a.size[b];d&&"symbolValue"!==d&&"proportional"!==d&&(a.size[b]=u.pt2px(d))}b=this._size[0]>this._size[1]?this._size[0]:this._size[1];if("symbolValue"===a.size[0])return 1;if(isFinite(+a.size[0]))return+a.size[0]/b;if(isFinite(+a.size[2]))return+a.size[2]/b}return 1};r.prototype.createGraphics3DGraphic=
function(a){var b=a.renderingInfo,d=a.graphic;if(!this._validateGeometry(d.geometry))return null;var c=E.placePointOnGeometry(d.geometry);if(m.isNone(c))return this.logger.warn("unsupported geometry type for icon symbol: "+d.geometry.type),null;var e="graphic"+d.uid,f=this._getVertexOpacityAndColor(b),g=1;this._fastUpdates.enabled&&this._fastUpdates.visualVariables.size||(g=this._getScaleFactor(b));g*=this._symbolTextureRatio;b=[this._size[0]*g,this._size[1]*g];g=this.getGraphicElevationContext(d);
return"on-the-ground"===g.mode?this._createAsOverlay(d,c,f,b,g,e,d.uid,a.layer.uid):this._createAs3DShape(d,c,f,b,g,e,d.uid)};r.prototype.layerOpacityChanged=function(){var a=this._getFillColor();this._drapedMaterial.setParameterValues({color:a});this._material.setParameterValues({color:a});a=this._getOutlineColor();this._drapedMaterial.setParameterValues({outlineColor:a});this._material.setParameterValues({outlineColor:a});return!0};r.prototype.layerElevationInfoChanged=function(a,b,d){var c=this._elevationContext.mode;
if("on-the-ground"===d&&"on-the-ground"===c)return!0;if(d!==c&&("on-the-ground"===d||"on-the-ground"===c))return!1;var e=E.needsElevationUpdates2D(c)||"absolute-height"===c;return this.updateGraphics3DGraphicElevationInfo(a,b,function(){return e})};r.prototype.slicePlaneEnabledChanged=function(a,b){this._material.setParameterValues({slicePlaneEnabled:this._context.slicePlaneEnabled});return!0};r.prototype.pixelRatioChanged=function(a,b){return this._getPrimitive()?!0:!1};r.prototype.applyRendererDiff=
function(a,b){for(var d in a.diff)switch(d){case "visualVariables":if(K.updateFastSymbolUpdatesState(this._fastUpdates,b,this._fastVisualVariableConvertOptions()))this._material.setParameterValues(this._fastUpdates.materialParameters),this._drapedMaterial.setParameterValues(this._fastUpdates.materialParameters);else return!1;break;default:return!1}return!0};r.prototype.setDrawOrder=function(a,b,d){this.updateSymbolLayerOrder(a,b);this._drapedMaterial&&(this._drapedMaterial.renderPriority=a,d.add(this._drapedMaterial.id))};
r.prototype._defaultElevationInfoNoZ=function(){return X};r.prototype._createAs3DShape=function(a,b,d,c,e,f,g){var m=this,h=this.getFastUpdateAttrValues(a);a=h?function(a){return K.evaluateModelTransform(m._fastUpdates.materialParameters,h,a)}:null;d=S.createPointGeometry(L,null,d,c,R,null,h);d=[new N(d,f)];f=E.createStageObjectForPoint(this._context,b,d,[this._material],null,null,e,f,this._context.layer.uid,g,!0,a);if(null===f)return null;var k=new C(this,f.object,d,null,null,B.perObjectElevationAligner,
e);k.alignedTerrainElevation=f.terrainElevation;k.needsElevationUpdates=E.needsElevationUpdates2D(e.mode)||"absolute-height"===e.mode;k.getScreenSize=this._createScreenSizeGetter(c,a);k.calculateRelativeScreenBounds=function(a){return m._material.calculateRelativeScreenBounds(k.getScreenSize(),1,a)};E.extendPointGraphicElevationContext(k,b,this._context.elevationProvider);return k};r.prototype._createAsOverlay=function(a,b,d,c,e,f,g,m){var h=this;this._drapedMaterial.renderPriority=this._symbolLayerOrder;
e=w.vec3f64.create();M.pointToVector(b,e,this._context.overlaySR);e[2]=this._getDrapedZ();if((b=this._context.clippingExtent)&&!E.pointInBox2D(e,b))return null;var k=this.getFastUpdateAttrValues(a);b=k?function(a){return K.evaluateModelTransform(h._fastUpdates.materialParameters,k,a)}:null;d=S.createPointGeometry(L,e,d,c,null,null,k);g=new O(d);g.material=this._drapedMaterial;g.center=e;g.bsRadius=0;g.transformation=P;g.name=f;g.uniqueName=f+"#"+d.id;g.data.layerUid=m;g.data.graphicUid=a.uid;g.calculateShaderTransformation=
b;var l=new D(this,[g],null);l.getScreenSize=this._createScreenSizeGetter(c,b);l.calculateRelativeScreenBounds=function(a){return h._drapedMaterial.calculateRelativeScreenBounds(l.getScreenSize(),1,a)};return l};r.prototype._createScreenSizeGetter=function(a,b){var d=this._outlineSize+2;if(this._fastUpdates.enabled){var c=a[0]/this._symbolTextureRatio,e=a[1]/this._symbolTextureRatio;return function(a){void 0===a&&(a=x.vec2f64.create());var f=b(P);a[0]=f[0]*c+d;a[1]=f[5]*e+d;return a}}var f=a[0]/this._symbolTextureRatio+
d,g=a[1]/this._symbolTextureRatio+d;return function(a){void 0===a&&(a=x.vec2f64.create());a[0]=f;a[1]=g;return a}};r.prototype._fastVisualVariableConvertOptions=function(){var a=this._size[0]>this._size[1]?this._size[0]:this._size[1],b=w.vec3f64.fromValues(a,a,a),d=u.px2pt(1),a=a*d,a=w.vec3f64.fromValues(a,a,a);return{modelSize:b,symbolSize:a,unitInMeters:d,transformation:{anchor:w.vec3f64.ZEROS,scale:w.vec3f64.ONES,rotation:w.vec3f64.ZEROS}}};r.prototype._hasVisibleVerticalOffset=function(a){return this.symbol&&
"point-3d"===this.symbol.type&&this.symbol.hasVisibleVerticalOffset()};r.PRIMITIVE_SIZE=Y;return r}(H.default);c.Graphics3DIconSymbolLayer=p;var X={mode:"relative-to-ground",offset:0},R=v.vec4f64.fromValues(0,0,0,1);c.default=p})},"esri/symbols/support/utils":function(){define("require exports ../../Color ../../symbols ../../core/compilerUtils ../../core/has ../../core/Logger ../../core/maybe ../../core/screenUtils ./gfxUtils ./Symbol3DMaterial".split(" "),function(p,c,n,l,k,d,h,g,f,b,a){function e(a,
b){if(null==b)return a;a=a.toRgba();a[3]*=b;return new n(a)}function m(b,d,c){if(b=b.symbolLayers){var f=function(a){a=g.isSome(a)?a:null;d=d||a||null!=c&&r;return e(d,c)};b.forEach(function(b){if("water"===b.type)b.color=f(b.color);else{var d=g.isSome(b.material)?b.material.color:null,d=f(d);g.isNone(b.material)?b.material=new a.default({color:d}):b.material.color=d;null!=c&&"outline"in b&&g.isSome(b.outline)&&g.isSome(b.outline.color)&&(b.outline.color=e(b.outline.color,c))}})}}function q(a,b,d){(a=
a.symbolLayers)&&a.forEach(function(a){if(a)switch(a.type){case "icon":case "line":case "path":case "extrude":case "text":a.size=b;break;case "object":switch(d){case "width":a.width=b;break;case "depth":a.depth=b;break;case "height":a.height=b;break;case "width-and-depth":a.width=b;a.depth=b;break;default:a.width=b,a.depth=b,a.height=b}break;default:u.warn("symbolUtils: applySizeToSymbol","symbolLayer not supported")}})}Object.defineProperty(c,"__esModule",{value:!0});var u=h.getLogger("esri.symbols.support.utils"),
t=/\/resource\/(.*?)\.svg$/,r=new n("white");c.getSymbolOutlineSize=function(a){if(!a)return 0;if(l.isSymbol3D(a)){var d=a.symbolLayers&&a.symbolLayers.length;d?(a=a.symbolLayers.getItemAt(d-1),a="outline"in a?g.get(a,"outline","size"):void 0):a=void 0;return g.isSome(a)?a:0}return(a=b.getStroke(a))&&f.px2pt(a.width)||0};c.isVolumetricSymbol=function(a){if(!a||!a.symbolLayers)return!1;switch(a.type){case "point-3d":return a.symbolLayers.some(function(a){return"object"===a.type});case "line-3d":return a.symbolLayers.some(function(a){return"path"===
a.type});case "polygon-3d":return a.symbolLayers.some(function(a){return"object"===a.type||"extrude"===a.type});default:return!1}};c.getIconHref=function(a,b){b=b.resource.href;return!d("esri-canvas-svg-support")&&a.styleOrigin&&t.test(b)?b.replace(t,"/resource/png/$1.png"):b};c.applyOpacityToColor=e;c.applyColorToSymbol=function(a,b,d){if(a&&(b||null!=d))if(b&&(b=new n(b)),l.isSymbol3D(a))m(a,b,d);else if(l.isSymbol2D(a)){if(b=b||a.color)a.color=e(b,d);null!=d&&"outline"in a&&a.outline&&a.outline.color&&
(a.outline.color=e(a.outline.color,d))}};c.applySizeToSymbol=function(a,b,d){if(a&&null!=b)if(l.isSymbol3D(a))q(a,b,d);else if(l.isSymbol2D(a))switch(a.type){case "simple-marker":a.size=b;break;case "picture-marker":d=a.width/a.height;1<d?(a.width=b,a.height=b*d):(a.width=b*d,a.height=b);break;case "simple-line":a.width=b;break;case "text":a.font.size=b;break;case "simple-fill":case "picture-fill":break;case "cim":break;default:k.neverReached(a)}};c.applyRotationToSymbol=function(a,b,d){a&&null!=
b&&(l.isSymbol3D(a)?(a=a.symbolLayers)&&a.forEach(function(a){if(a&&"object"===a.type)switch(d){case "tilt":a.tilt=b;break;case "roll":a.roll=b;break;default:a.heading=b}}):!l.isSymbol2D(a)||"simple-marker"!==a.type&&"picture-marker"!==a.type&&"text"!==a.type||(a.angle=b))}})},"esri/symbols/support/gfxUtils":function(){define("require exports ../../core/tsSupport/assignHelper ../../Color ../../request ../../core/ItemCache ../../core/promiseUtils ../../core/screenUtils".split(" "),function(p,c,n,l,
k,d,h,g){function f(a){if(!a)return null;var b,d=g.pt2px(a.width);switch(a.type){case "simple-fill":case "picture-fill":case "simple-marker":b=f(a.outline);break;case "simple-line":"none"!==a.style&&0!==d&&(b={color:a.color,style:u(a.style),width:d,cap:a.cap,join:"miter"===a.join?g.pt2px(a.miterLimit):a.join});break;default:b=null}return b}Object.defineProperty(c,"__esModule",{value:!0});var b=p.toUrl("../../symbols/patterns/"),a={type:"pattern",x:0,y:0,width:0,height:0,src:""},e={left:"start",center:"middle",
right:"end",justify:"start"},m={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},q=new d(1E3);c.getSVGAlign=function(a){return a=(a=a.horizontalAlignment)&&e[a.toLowerCase()]||"middle"};c.getSVGBaseline=function(a){return(a=a.verticalAlignment)&&m[a.toLowerCase()]||"alphabetic"};c.getSVGBaselineShift=function(a){return"bottom"===a.verticalAlignment?"super":null};c.getFill=function(d){var c=d.style,e=null;if(d)switch(d.type){case "simple-marker":"cross"!==c&&
"x"!==c&&(e=d.color);break;case "simple-fill":"solid"===c?e=d.color:"none"!==c&&(e=n({},a,{src:b+c+".png",width:8,height:8}));break;case "picture-fill":e=n({},a,{src:d.url,width:g.pt2px(d.width)*d.xscale,height:g.pt2px(d.height)*d.yscale,x:g.pt2px(d.xoffset),y:g.pt2px(d.yoffset)});break;case "text":e=d.color}return e};c.getPatternUrlWithColor=function(a,b){var d=a+"-"+b;return void 0!==q.get(d)?h.resolve(q.get(d)):k(a,{responseType:"image"}).then(function(a){a=a.data;var c=a.naturalWidth,e=a.naturalHeight,
f=document.createElement("canvas");f.width=c;f.height=e;var g=f.getContext("2d");g.fillStyle=b;g.fillRect(0,0,c,e);g.globalCompositeOperation="destination-in";g.drawImage(a,0,0);a=f.toDataURL();q.put(d,a);return a})};c.getStroke=f;c.create2DColorRamp=function(a){var b=a.colors,d=a.numClasses,c=a.size;a=a.surface.createGroup();for(var c=(c||75)/d,e=0;e<d;e++)for(var f=e*c,g=0;g<d;g++){var m=b[e][g];a.createRect({x:g*c,y:f,width:c,height:c}).setFill(m).setStroke(null)}return a};var u=function(){var a=
{};return function(b){if(a[b])return a[b];var d=b.replace(/-/g,"");return a[b]=d}}();c.defaultThematicColor=new l([128,128,128])})},"esri/core/ItemCache":function(){define(["require","exports","./MemCache"],function(p,c,n){return function(){function c(c,d){this._storage=new n.MemCacheStorage;this._storage.maxSize=c;d&&this._storage.registerRemoveFunc("",d)}c.prototype.put=function(c,d){this._storage.put(c,d,1,1)};c.prototype.pop=function(c){return this._storage.pop(c)};c.prototype.get=function(c){return this._storage.get(c)};
c.prototype.clear=function(){this._storage.clearAll()};c.prototype.destroy=function(){this._storage.clearAll()};return c}()})},"esri/views/3d/layers/graphics/constants":function(){define(["require","exports","../../../../core/libs/gl-matrix-2/vec4f64"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.defaultIconElevationOffset=1;c.SUSPEND_RESUME_EXTENT_OPTIMISM=1.2;c.WHITE=new Float32Array([1,1,1,1]);c.TRANSPARENT=n.vec4f64.ZEROS})},"esri/views/3d/layers/graphics/Graphics3DDrapedGraphicLayer":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/support/aaBoundingBox ../../../../geometry/support/aaBoundingRect ./graphicUtils".split(" "),
function(p,c,n,l,k,d,h,g,f,b){p=function(){function c(a,b,d){this.type="draped";this.graphics3DSymbolLayer=a;this.renderGeometries=b;this.boundingBox=d;this.stage=null;this._visible=!1}c.prototype.initialize=function(a,b){this.stage=b};c.prototype.setVisibility=function(a){if(null!=this.stage)return this._visible!==a?((this._visible=a)?this.stage.renderView.getDrapedRenderer().addRenderGeometries(this.renderGeometries):this.stage.renderView.getDrapedRenderer().removeRenderGeometries(this.renderGeometries),
!0):!1};c.prototype.destroy=function(){this.stage&&this._visible&&this.stage.renderView.getDrapedRenderer().removeRenderGeometries(this.renderGeometries);this._visible=!1;this.stage=null};c.prototype.getBSRadius=function(){return this.renderGeometries.reduce(function(a,b){return Math.max(a,b.bsRadius)},0)};c.prototype.getCenterObjectSpace=function(a){void 0===a&&(a=h.vec3f64.create());return d.vec3.set(a,0,0,0)};c.prototype.getBoundingBoxObjectSpace=function(a){void 0===a&&(a=g.create());return g.empty(a)};
c.prototype.addHighlight=function(a,b){var d=this;this.renderGeometries.forEach(function(c){var e=c.addHighlight(b);a.addRenderGeometry(c,e,d)});this._visible&&this.stage.renderView.getDrapedRenderer().updateHighlights(this.renderGeometries)};c.prototype.removeHighlight=function(a){this.renderGeometries.forEach(function(b){a.removeRenderGeometry(b)})};c.prototype.removeRenderGeometryHighlight=function(a,b){a.removeHighlight(b);this._visible&&this.stage.renderView.getDrapedRenderer().updateHighlights(this.renderGeometries)};
c.prototype.getProjectedBoundingBox=function(d,c,e,f,h){return k(this,void 0,void 0,function(){var k,q,r,n;return l(this,function(l){switch(l.label){case 0:g.empty(h);for(k=0;k<this.renderGeometries.length;k++)q=this.renderGeometries[k],this._getRenderGeometryProjectedBoundingRect(q,d,a,e),g.expand(h,a);if(!c)return[3,5];g.center(h,m);r=void 0;n=b.demResolutionForBoundingBox(h,c);l.label=1;case 1:return l.trys.push([1,3,,4]),[4,c.service.queryElevation(m[0],m[1],f,n)];case 2:return r=l.sent(),[3,
4];case 3:return l.sent(),r=null,[3,4];case 4:null!=r&&(h[2]=Math.min(h[2],r),h[5]=Math.max(h[5],r)),l.label=5;case 5:return[2,h]}})})};c.prototype._getRenderGeometryProjectedBoundingRect=function(a,b,d,c){if(this.boundingBox)g.set(e,this.boundingBox);else{var f=a.center;a=a.bsRadius;e[0]=f[0]-a;e[1]=f[1]-a;e[2]=f[2]-a;e[3]=f[0]+a;e[4]=f[1]+a;e[5]=f[2]+a}b(e,0,2);this.calculateRelativeScreenBounds&&c.push({location:g.center(e),screenSpaceBoundingRect:this.calculateRelativeScreenBounds()});return g.toRect(e,
d)};return c}();var a=f.create(),e=g.create(),m=[0,0,0];return p})},"esri/views/3d/layers/graphics/sdfPrimitives":function(){define(["require","exports","../../webgl-engine/lib/Util"],function(p,c,n){function l(d,c,g){g&&(c/=Math.SQRT2);for(var f=new Uint8Array(4*d*d),b=0;b<d;b++)for(var a=0;a<d;a++){var e=a-.5*d+.25,m=-b+.5*d-.75,h=b*d+a;if(g)var k=(e+m)/Math.SQRT2,m=(m-e)/Math.SQRT2,e=k;e=Math.max(Math.abs(e),Math.abs(m))-.5*c;e=e/d+.5;n.packFloatRGBA(e,f,4*h)}return f}function k(d,c,g){g&&(c*=
Math.SQRT2);c*=.5;for(var f=new Uint8Array(4*d*d),b=0;b<d;b++)for(var a=0;a<d;a++){var e=a-.5*d,m=-b+.5*d-1,h=b*d+a;if(g)var k=(e+m)/Math.SQRT2,m=(m-e)/Math.SQRT2,e=k;k=void 0;e=Math.abs(e);m=Math.abs(m);k=e>m?e>c?Math.sqrt((e-c)*(e-c)+m*m):m:m>c?Math.sqrt(e*e+(m-c)*(m-c)):e;k=k/d+.5;n.packFloatRGBA(k,f,4*h)}return f}Object.defineProperty(c,"__esModule",{value:!0});c.createCircle=function(d,c){var g=new Uint8Array(4*d*d),f=d/2-.5;c/=2;for(var b=0;b<d;b++)for(var a=0;a<d;a++){var e=a+d*b,m=a-f,h=b-
f,m=Math.sqrt(m*m+h*h)-c,m=m/d+.5;n.packFloatRGBA(m,g,4*e)}return g};c.createSquare=function(d,c){return l(d,c,!1)};c.createKite=function(d,c){return l(d,c,!0)};c.createCross=function(d,c){return k(d,c,!1)};c.createX=function(d,c){return k(d,c,!0)};c.createTriangle=function(d,c){for(var g=new Uint8Array(4*d*d),f=Math.sqrt(1.25),b=(d-c)/2,a=0;a<d;a++)for(var e=0;e<d;e++){var m=(e-b)/c,h=(a-b+.75)/c;n.packFloatRGBA(Math.max(-(1*m+-.5*h)/f,(1*(m-1)+-.5*-h)/f,-h)*c/d+.5,g,4*(a*d+e))}return g}})},"esri/views/3d/layers/support/FastSymbolUpdates":function(){define("require exports ../../../../core/compilerUtils ../../../../core/mathUtils ../../../../core/libs/gl-matrix-2/mat3 ../../../../core/libs/gl-matrix-2/mat3f64 ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../renderers/support/utils ../../support/debugFlags".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e){function m(a){return null!==a&&void 0!==a}function q(a){return"number"===typeof a}function u(a){return"string"===typeof a}function t(a,b){a&&a.push(b)}function r(b,d,c,e,f){var g=b.minSize,h=b.maxSize;if(b.expression)return t(f,"Could not convert size info: expression not supported"),!1;if(b.useSymbolValue)return b=e.symbolSize[c],d.minSize[c]=b,d.maxSize[c]=b,d.offset[c]=d.minSize[c],d.factor[c]=0,d.type[c]=1,!0;if(m(b.field)){if(m(b.stops)){if(2===b.stops.length&&
q(b.stops[0].size)&&q(b.stops[1].size))return x(b.stops[0].size,b.stops[1].size,b.stops[0].value,b.stops[1].value,d,c),d.type[c]=1,!0;t(f,"Could not convert size info: stops only supported with 2 elements");return!1}if(q(g)&&q(h)&&m(b.minDataValue)&&m(b.maxDataValue))return x(g,h,b.minDataValue,b.maxDataValue,d,c),d.type[c]=1,!0;if(null!=a.meterIn[b.valueUnit])return d.minSize[c]=-Infinity,d.maxSize[c]=Infinity,d.offset[c]=0,d.factor[c]=1/a.meterIn[b.valueUnit],d.type[c]=1,!0;if("unknown"===b.valueUnit)return t(f,
"Could not convert size info: proportional size not supported"),!1;t(f,"Could not convert size info: scale-dependent size not supported");return!1}if(!m(b.field)){if(b.stops&&b.stops[0]&&q(b.stops[0].size))return d.minSize[c]=b.stops[0].size,d.maxSize[c]=b.stops[0].size,d.offset[c]=d.minSize[c],d.factor[c]=0,d.type[c]=1,!0;if(q(g))return d.minSize[c]=g,d.maxSize[c]=g,d.offset[c]=g,d.factor[c]=0,d.type[c]=1,!0}t(f,"Could not convert size info: unsupported variant of sizeInfo");return!1}function x(a,
b,d,c,e,f){c=0<Math.abs(c-d)?(b-a)/(c-d):0;e.minSize[f]=0<c?a:b;e.maxSize[f]=0<c?b:a;e.offset[f]=a-d*c;e.factor[f]=c}function w(a,b,d,c){if(a.normalizationField||a.valueRepresentation)return t(c,"Could not convert size info: unsupported property"),null;var e=a.field;if(null!=e&&!u(e))return t(c,"Could not convert size info: field is not a string"),null;if(!b.size)b.size={field:a.field,minSize:[0,0,0],maxSize:[0,0,0],offset:[0,0,0],factor:[0,0,0],type:[0,0,0]};else if(a.field)if(!b.size.field)b.size.field=
a.field;else if(a.field!==b.size.field)return t(c,"Could not convert size info: multiple fields in use"),null;switch(a.axis){case "width":return(e=r(a,b.size,0,d,c))?b:null;case "height":return(e=r(a,b.size,2,d,c))?b:null;case "depth":return(e=r(a,b.size,1,d,c))?b:null;case "width-and-depth":return(e=r(a,b.size,0,d,c))&&r(a,b.size,1,d,c),e?b:null;case null:case void 0:case "all":return(e=(e=(e=r(a,b.size,0,d,c))&&r(a,b.size,1,d,c))&&r(a,b.size,2,d,c))?b:null;default:return t(c,'Could not convert size info: unknown axis "'+
a.axis+'""'),null}}function v(a,b,d){for(var c=0;3>c;++c){var e=b.unitInMeters;1===a.type[c]&&(e*=b.modelSize[c],a.type[c]=2);a.minSize[c]/=e;a.maxSize[c]/=e;a.offset[c]/=e;a.factor[c]/=e}if(0!==a.type[0])b=0;else if(0!==a.type[1])b=1;else if(0!==a.type[2])b=2;else return t(d,"No size axis contains a valid size or scale"),!1;for(c=0;3>c;++c)0===a.type[c]&&(a.minSize[c]=a.minSize[b],a.maxSize[c]=a.maxSize[b],a.offset[c]=a.offset[b],a.factor[c]=a.factor[b],a.type[c]=a.type[b]);return!0}function y(a,
b,d){a[4*b+0]=d.r/255;a[4*b+1]=d.g/255;a[4*b+2]=d.b/255;a[4*b+3]=d.a}function z(a,b,d){if(a.normalizationField)return t(d,"Could not convert color info: unsupported property"),null;if(u(a.field))if(a.stops){if(8<a.stops.length)return t(d,"Could not convert color info: too many color stops"),null;b.color={field:a.field,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};d=a.stops;for(a=0;8>a;++a){var c=d[Math.min(a,d.length-1)];b.color.values[a]=c.value;
y(b.color.colors,a,c.color)}}else return t(d,"Could not convert color info: missing stops or colors"),null;else if(a.stops&&0<=a.stops.length)for(d=a.stops&&0<=a.stops.length&&a.stops[0].color,b.color={field:null,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},a=0;8>a;a++)b.color.values[a]=Infinity,y(b.color.colors,a,d);else return t(d,"Could not convert color info: no field and no colors/stops"),null;return b}function A(a,b,d){if(a.normalizationField)return t(d,
"Could not convert opacity info: unsupported property"),null;if(u(a.field))if(a.stops){if(8<a.stops.length)return t(d,"Could not convert opacity info: too many opacity stops"),null;b.opacity={field:a.field,values:[0,0,0,0,0,0,0,0],opacityValues:[0,0,0,0,0,0,0,0]};d=a.stops;for(a=0;8>a;++a){var c=d[Math.min(a,d.length-1)];b.opacity.values[a]=c.value;b.opacity.opacityValues[a]=c.opacity}}else return t(d,"Could not convert opacity info: missing stops or opacities"),null;else if(a.stops&&0<=a.stops.length)for(d=
a.stops&&0<=a.stops.length&&a.stops[0].opacity,b.opacity={field:null,values:[0,0,0,0,0,0,0,0],opacityValues:[0,0,0,0,0,0,0,0]},a=0;8>a;a++)b.opacity.values[a]=Infinity,b.opacity.opacityValues[a]=d;else return t(d,"Could not convert opacity info: no field and no opacities/stops"),null;return b}function B(a,b,d,c){a=2===d&&"arithmetic"===a.rotationType;b.offset[d]=a?90:0;b.factor[d]=a?-1:1;b.type[d]=1}function D(a,b,d){if(!u(a.field))return t(d,"Could not convert rotation info: field is not a string"),
null;if(!b.rotation)b.rotation={field:a.field,offset:[0,0,0],factor:[1,1,1],type:[0,0,0]};else if(a.field)if(!b.rotation.field)b.rotation.field=a.field;else if(a.field!==b.rotation.field)return t(d,"Could not convert rotation info: multiple fields in use"),null;switch(a.axis){case "tilt":return B(a,b.rotation,0,d),b;case "roll":return B(a,b.rotation,1,d),b;case null:case void 0:case "heading":return B(a,b.rotation,2,d),b;default:return t(d,'Could not convert rotation info: unknown axis "'+a.axis+
'""'),null}}function C(a,b,d){if(!a)return null;var c=!b.supportedTypes||!!b.supportedTypes.size,e=!b.supportedTypes||!!b.supportedTypes.color,f=!b.supportedTypes||!!b.supportedTypes.rotation,g=!!b.supportedTypes&&!!b.supportedTypes.opacity,m=a.reduce(function(a,m){if(!a)return a;if(m.valueExpression)return t(d,"Could not convert visual variables: arcade expressions not supported"),null;switch(m.type){case "size":return c?w(m,a,b,d):a;case "color":return e?z(m,a,d):a;case "opacity":return g?A(m,a,
d):a;case "rotation":return f?D(m,a,d):a;default:return n.neverReached(m),null}},{size:null,color:null,opacity:null,rotation:null});return 0<a.length&&m&&!m.size&&!m.color&&!m.opacity&&!m.rotation||m&&m.size&&!v(m.size,b,d)?null:m}function E(a,b,d){if(!!a!==!!b||a&&a.field!==b.field)return!1;if(a&&"rotation"===d)for(d=0;3>d;d++)if(a.type[d]!==b.type[d]||a.offset[d]!==b.offset[d]||a.factor[d]!==b.factor[d])return!1;return!0}function H(a,b){var c={vvSizeEnabled:!1,vvSizeMinSize:null,vvSizeMaxSize:null,
vvSizeOffset:null,vvSizeFactor:null,vvSizeValue:null,vvColorEnabled:!1,vvColorValues:null,vvColorColors:null,vvOpacityEnabled:!1,vvOpacityValues:null,vvOpacityOpacities:null,vvSymbolAnchor:null,vvSymbolRotationMatrix:null},e=a&&null!=a.size;a&&a.size?(c.vvSizeEnabled=!0,c.vvSizeMinSize=a.size.minSize,c.vvSizeMaxSize=a.size.maxSize,c.vvSizeOffset=a.size.offset,c.vvSizeFactor=a.size.factor):a&&e&&(c.vvSizeValue=b.transformation.scale);if(a&&e){c.vvSymbolAnchor=b.transformation.anchor;c.vvSymbolRotationMatrix=
d.mat3f64.create();h.mat4.identity(I);var f=b.transformation.rotation[2],e=b.transformation.rotation[0],m=b.transformation.rotation[1];b=I;void 0===b&&(b=g.mat4f64.create());f=f||0;e=e||0;m=m||0;0!==f&&h.mat4.rotateZ(b,b,-f/180*Math.PI);0!==e&&h.mat4.rotateX(b,b,e/180*Math.PI);0!==m&&h.mat4.rotateY(b,b,m/180*Math.PI);k.mat3.fromMat4(c.vvSymbolRotationMatrix,I)}a&&a.color&&(c.vvColorEnabled=!0,c.vvColorValues=a.color.values,c.vvColorColors=a.color.colors);a&&a.opacity&&(c.vvOpacityEnabled=!0,c.vvOpacityValues=
a.opacity.values,c.vvOpacityOpacities=a.opacity.opacityValues);return c}Object.defineProperty(c,"__esModule",{value:!0});c.convertVisualVariables=C;c.initFastSymbolUpdatesState=function(a,b){return!a||e.DISABLE_FAST_UPDATES?{enabled:!1}:(a=C(a.visualVariables,b))?{enabled:!0,visualVariables:a,materialParameters:H(a,b),requiresShaderTransformation:a&&null!=a.size}:{enabled:!1}};c.updateFastSymbolUpdatesState=function(a,b,d){if(!b||!a.enabled)return!1;var c=a.visualVariables;b=C(b.visualVariables,d);
if(!(b&&E(c.size,b.size,"size")&&E(c.color,b.color,"color")&&E(c.rotation,b.rotation,"rotation")))return!1;a.visualVariables=b;a.materialParameters=H(b,d);a.requiresShaderTransformation=b&&null!=b.size;return!0};c.getMaterialParams=H;var G;(function(a){var d=g.mat4f64.create(),c=b.vec3f64.create();a.evaluateModelTransform=function(a,b,e){if(!a.vvSizeEnabled)return e;h.mat4.copy(d,e);e=a.vvSymbolRotationMatrix;h.mat4.set(I,e[0],e[1],e[2],0,e[3],e[4],e[5],0,e[6],e[7],e[8],0,0,0,0,1);h.mat4.multiply(d,
d,I);for(e=0;3>e;++e)c[e]=l.clamp(a.vvSizeOffset[e]+b[0]*a.vvSizeFactor[e],a.vvSizeMinSize[e],a.vvSizeMaxSize[e]);h.mat4.scale(d,d,c);h.mat4.translate(d,d,a.vvSymbolAnchor);return d};a.evaluateModelTransformScale=function(a,b,d){if(!b.vvSizeEnabled)return f.vec3.set(a,1,1,1);for(var c=0;3>c;++c)a[c]=l.clamp(b.vvSizeOffset[c]+d[0]*b.vvSizeFactor[c],b.vvSizeMinSize[c],b.vvSizeMaxSize[c]);return a}})(G||(G={}));var I=g.mat4f64.create();c.evaluateModelTransform=G.evaluateModelTransform;c.evaluateModelTransformScale=
G.evaluateModelTransformScale})},"esri/views/3d/webgl-engine/lib/Texture":function(){define("require exports ../../../../core/compilerUtils ../../../../core/Logger ../../../../core/mathUtils ../../../../core/typedArrayUtil ../../support/imageUtils ../../support/mathUtils ./DDSUtil ./DefaultVertexBufferLayouts ./glUtil3D ./IdGen ./Util ../shaders/MiscPrograms ../../../webgl/FramebufferObject ../../../webgl/renderState ../../../webgl/Texture ../../../webgl/Util ../../../webgl/capabilities/isWebGL2Context".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w){var v=l.getLogger("esri.views.3d.webgl-engine.lib.Texture");p=function(){function c(a,b,d){this.data=a;this.id=c.idGen.gen(b);this.unloadFunc=void 0;this.params=d||{};this.params.mipmap=!1!==this.params.mipmap;this.params.noUnpackFlip=this.params.noUnpackFlip||!1;this.params.preMultiplyAlpha=this.params.preMultiplyAlpha||!1;this.params.wrap=this.params.wrap||{s:10497,t:10497};this.params.powerOfTwoResizeMode=this.params.powerOfTwoResizeMode||1;this.estimatedTexMemRequired=
c.estimateTexMemRequired(this.data,this.params)}c.estimateTexMemRequired=function(a,b){return null==a?0:d.isArrayBuffer(a)||d.isUint8Array(a)?a.byteLength:a instanceof Image||a instanceof ImageData||a instanceof HTMLCanvasElement?(b.mipmap?4/3:1)*a.width*a.height*(b.components||4):(b.mipmap?4/3:1)*b.width*b.height*(b.components||4)||0};c.prototype.getEstimatedTexMemRequired=function(){return this.estimatedTexMemRequired};c.prototype.dispose=function(){this.data=void 0};c.prototype.deferredLoading=
function(){return"string"===typeof this.data};c.prototype.getWidth=function(){return this.params.width};c.prototype.getHeight=function(){return this.params.height};c.prototype.initializeThroughUpload=function(a,b,e,g,h){var k=this.data;b.flipped=!this.params.noUnpackFlip;b.samplingMode=this.params.mipmap?9987:9729;b.hasMipmap=this.params.mipmap;b.wrapMode=this.params.wrap;b.preMultiplyAlpha=this.params.preMultiplyAlpha;if("string"===typeof k)this.loadTextureFromUri(a,k,b,e,g,h);else if(k instanceof
Image||k instanceof ImageData||k instanceof HTMLCanvasElement)this.loadTextureFromImageData(a,k,b,e,g,h);else{if(d.isArrayBuffer(k)&&this.params.encoding===c.DDS_ENCODING)b=f.createDDSTexture(a,b,k,this.params.mipmap);else if(d.isUint8Array(k)&&this.params.encoding===c.DDS_ENCODING)b=f.createDDSTexture(a,b,k.buffer,this.params.mipmap);else if(d.isUint8Array(k))m.assert(0<this.params.width&&0<this.params.height),b.pixelFormat=1===this.params.components?6409:3===this.params.components?6407:6408,b.width=
this.params.width,b.height=this.params.height,b=new r(a,b,k);else{if(null!==k)throw console.warn("Unsupported image data"),Error("Unsupported image data");b=new r(a,b,null)}a.bindTexture(b);h(b)}this.data=void 0};c.prototype.loadTextureFromImageData=function(a,b,d,c,e,f){this.params.width=b.width;this.params.height=b.height;d.pixelFormat=3===this.params.components?6407:6408;var m=33071===this.params.wrap.s&&33071===this.params.wrap.t;w.default(a.gl)||!this.params.mipmap&&m||g.isPowerOfTwo(b.width)&&
g.isPowerOfTwo(b.height)?(d.width=b.width,d.height=b.height,b=new r(a,d,b)):b=this.makePowerOfTwoTexture(a,b,d,c,e);a.bindTexture(b);f(b)};c.prototype.loadTextureFromUri=function(a,b,d,c,e,f){var k=this,l=!1!==this.params.mipmap;h.requestImage(b).then(function(b){m.assert(1<=b.width&&1<=b.height);d.samplingMode=l?9987:9729;d.hasMipmap=l;!l&&33071===d.wrapMode||g.isPowerOfTwo(b.width)&&g.isPowerOfTwo(b.height)?(d.width=b.width,d.height=b.height,b=new r(a,d,b)):b=k.makePowerOfTwoTexture(a,b,d,c,e);
a.bindTexture(b);f(b)}).catch(function(a){var d=200<b.length?b.slice(0,100)+"..."+b.slice(b.length-100):b;v.error("Failed to load image from uri",d,a);f(null)})};c.prototype.makePowerOfTwoTexture=function(a,b,d,c,e){var f=b.width,g=b.height,m=k.nextHighestPowerOfTwo(f),h=k.nextHighestPowerOfTwo(g);d.width=m;d.height=h;var l;switch(this.params.powerOfTwoResizeMode){case 2:d.textureCoordinateScaleFactor=[f/m,g/h];l=new r(a,d);l.updateData(0,0,0,f,g,b);break;case 1:case null:case void 0:l=this.stretchToPowerOfTwo(a,
b,d,c,e);break;default:n.neverReached(this.params.powerOfTwoResizeMode)}d.hasMipmap&&l.generateMipmap();return l};c.prototype.stretchToPowerOfTwo=function(d,c,e,f,g){var m=new r(d,e),h=u.createWithAttachments(d,m,{colorTarget:0,depthStencilTarget:0});c=new r(d,{target:3553,pixelFormat:e.pixelFormat,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!!e.flipped,maxAnisotropy:8,preMultiplyAlpha:e.preMultiplyAlpha},c);d.bindFramebuffer(h);void 0===g&&(g=d.getViewport(),g=[g.x,g.y,g.width,g.height]);
d.setViewport(0,0,e.width,e.height);e=f.getProgram(q.texOnly);d.bindProgram(e);e.setUniform4f("color",1,1,1,1);e.setUniform1i("tex",0);e=a.createQuadVAO(d,b.Pos3Tex);d.bindTexture(c,0);d.bindVAO(e);d.setPipelineState(y);d.drawArrays(5,0,x.vertexCount(e,"geometry"));d.bindFramebuffer(null);d.setViewport(g[0],g[1],g[2],g[3]);e.dispose(!0);c.dispose();d.bindFramebuffer(null);h.detachColorTexture();h.dispose();return m};c.prototype.setUnloadFunc=function(a){this.unloadFunc=a};c.prototype.unload=function(){void 0!==
this.unloadFunc&&(this.unloadFunc(this.id),this.unloadFunc=void 0)};c.createEmpty=function(a){void 0===a&&(a="emptyTexture");return new c(new Uint8Array([0,0,0,0]),a,{width:1,height:1,wrap:{s:33071,t:33071}})};c.idGen=new e;c.DDS_ENCODING="image/vnd-ms.dds";return c}();var y=t.makePipelineState({colorWrite:t.defaultColorWriteParams});return p})},"esri/views/3d/webgl-engine/lib/DDSUtil":function(){define(["require","exports","../../../../core/Logger","../../support/mathUtils","../../../webgl/Texture"],
function(p,c,n,l,k){function d(a){return a.charCodeAt(0)+(a.charCodeAt(1)<<8)+(a.charCodeAt(2)<<16)+(a.charCodeAt(3)<<24)}Object.defineProperty(c,"__esModule",{value:!0});var h=n.getLogger("esri.views.3d.webgl-engine.lib.DDSUtil"),g=d("DXT1"),f=d("DXT3"),b=d("DXT5");c.createDDSTexture=function(a,d,c,q){var e=new Int32Array(c,0,31);if(542327876!==e[0])return h.error("Invalid magic number in DDS header"),null;if(!(e[20]&4))return h.error("Unsupported format, must contain a FourCC code"),null;var m=
e[21],r;switch(m){case g:m=8;r=33776;break;case f:m=16;r=33778;break;case b:m=16;r=33779;break;default:return h.error("Unsupported FourCC code:",String.fromCharCode(m&255,m>>8&255,m>>16&255,m>>24&255)),null}var n=1,p=e[4],v=e[3];if(0!==(p&3)||0!==(v&3))h.warn("Rounding up compressed texture size to nearest multiple of 4."),p=p+3&-4,v=v+3&-4;d.width=p;d.height=v;e[2]&131072&&!1!==q&&(n=Math.max(1,e[7]));1===n||l.isPowerOfTwo(p)&&l.isPowerOfTwo(v)||(h.warn("Ignoring mipmaps of non power of two sized compressed texture."),
n=1);for(var y=e[1]+4,z=[],A=0;A<n;++A)e=(p+3>>2)*(v+3>>2)*m,q=new Uint8Array(c,y,e),z.push(q),y+=e,p=Math.max(1,p>>1),v=Math.max(1,v>>1);d.samplingMode=1<n?9987:9729;d.hasMipmap=1<n;d.internalFormat=r;d=new k(a,d,{type:"compressed",levels:z});a.bindTexture(d);return d}})},"esri/views/3d/layers/graphics/Graphics3DLineSymbolLayer":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/Error ../../../../core/lang ../../../../core/maybe ../../../../core/screenUtils ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4f32 ../../../../geometry/Polygon ../../../../geometry/support/aaBoundingBox ./ElevationAligners ./Graphics3DDrapedGraphicLayer ./Graphics3DObject3DGraphicLayer ./Graphics3DSymbolCommonCode ./Graphics3DSymbolLayer ./lineUtils ../support/FastSymbolUpdates ../../../../views/3d/support/mathUtils ../../webgl-engine/Stage ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/Object3D ../../webgl-engine/lib/RenderGeometry ../../webgl-engine/materials/RibbonLineMaterial ../../webgl-engine/shaders/RibbonLinePrograms".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z,A,B,D,C,E,H,G,I){Object.defineProperty(c,"__esModule",{value:!0});p=function(c){function p(a,b,d,e){a=c.call(this,a,b,d,e)||this;a._lineWidthLOD=1;return a}n(p,c);p.prototype.doLoad=function(){return k(this,void 0,void 0,function(){var a,b,c,e;return l(this,function(m){this._vvConvertOptions={modelSize:[1,1,1],symbolSize:[1,1,1],unitInMeters:1,transformation:{anchor:[0,0,0],scale:[1,1,1],rotation:[0,0,0]},supportedTypes:{size:!0,color:!0,opacity:!0,
rotation:!1}};this._fastUpdates=this._context.renderer&&this._context.renderer.visualVariables&&0<this._context.renderer.visualVariables.length?A.initFastSymbolUpdatesState(this._context.renderer,this._vvConvertOptions):{enabled:!1};a=this._getCombinedOpacityAndColor(g.get(this.symbolLayer,"material","color"));b=a[3];c={width:1,color:a,polygonOffset:!0,join:this.symbolLayer.join||"miter",cap:this.symbolLayer.cap||"butt",transparent:1>b||this._isPropertyDriven("opacity"),slicePlaneEnabled:this._context.slicePlaneEnabled};
if(this._isPropertyDriven("size"))this._fastUpdates.enabled&&this._fastUpdates.visualVariables.size&&(c.width=f.pt2px(1));else{e=null!=this.symbolLayer.size?this.symbolLayer.size:f.px2pt(1);if(0>e)throw new d("graphics3dlinesymbollayer:invalid-size","Symbol sizes may not be negative values");c.width=f.pt2px(e);"round"===c.join&&(this._lineWidthLOD=1.863798+-2.0062872/Math.pow(1+e/18.2313,.8856294))}this._fastUpdates&&this._fastUpdates.visualVariables&&h.mixin(c,this._fastUpdates.materialParameters,
{});this._material=new G(c,this._getStageIdHint()+"_ribbonlinemat");this._context.stage.add(D.ModelContentType.MATERIAL,this._material);return[2]})})};p.prototype.destroy=function(){c.prototype.destroy.call(this);this._material&&(this._context.stage.remove(D.ModelContentType.MATERIAL,this._material.id),this._material=null)};p.prototype.getDrivenSize=function(a){var b=new Float32Array(1);this._isPropertyDriven("size")&&a.size?b[0]=f.pt2px(v.getSingleSizeDriver(a.size)):b[0]=1;return b};p.prototype.getSizeFeatureAttribute=
function(a){var b=new Float32Array(1);b[0]=y.getAttributeValue(this._fastUpdates.visualVariables.size.field,a);return b};p.prototype.getDrivenColor=function(a,b){b=q.vec4f32.fromValues(1,1,1,1);this._isPropertyDriven("color")&&a.color&&(b[0]=a.color[0],b[1]=a.color[1],b[2]=a.color[2],0<a.color.length&&(b[3]=a.color[3]));this._isPropertyDriven("opacity")&&a.opacity&&(b[3]=a.opacity);return b};p.prototype.getColorFeatureAttribute=function(a){var b=new Float32Array(1);b[0]=y.getAttributeValue(this._fastUpdates.visualVariables.color.field,
a);return b};p.prototype.getOpacityFeatureAttribute=function(a){var b=new Float32Array(1);b[0]=y.getAttributeValue(this._fastUpdates.visualVariables.opacity.field,a);return b};p.prototype.createGraphics3DGraphic=function(a){var b=a.graphic,d=b.geometry;if("polyline"!==d.type&&"polygon"!==d.type&&"extent"!==d.type)return this.logger.warn("unsupported geometry type for line symbol: "+d.type),null;if(!this._validateGeometry(d))return null;var d="polygon"===d.type||"extent"===d.type?"rings":"paths",c=
"graphic"+b.uid,e=this.getGraphicElevationContext(b);return"on-the-ground"===e.mode?this._createAsOverlay(a,d,e,c,this._context.layer.uid):this._createAs3DShape(a,d,e,c,b.uid)};p.prototype.applyRendererDiff=function(a,b){for(var d in a.diff)switch(d){case "visualVariables":if(A.updateFastSymbolUpdatesState(this._fastUpdates,b,this._vvConvertOptions))this._material.setParameterValues(this._fastUpdates.materialParameters);else return!1;break;default:return!1}return!0};p.prototype.layerOpacityChanged=
function(){var a=this._material.getColor(),b=g.get(this.symbolLayer,"material","color"),b=this._getCombinedOpacity(b),d=1>b||this._isPropertyDriven("opacity");this._material.setParameterValues({color:[a[0],a[1],a[2],b],transparent:d});return!0};p.prototype.layerElevationInfoChanged=function(a,b,d){var c=this._elevationContext.mode;if(null==d||null==c)return!1;if("on-the-ground"===d&&"on-the-ground"===c)return!0;if(d!==c&&("on-the-ground"===d||"on-the-ground"===c))return!1;var e=v.needsElevationUpdates2D(c);
return this.updateGraphics3DGraphicElevationInfo(a,b,function(){return e})};p.prototype.slicePlaneEnabledChanged=function(a,b){this._material.setParameterValues({slicePlaneEnabled:this._context.slicePlaneEnabled});return!0};p.prototype.pixelRatioChanged=function(a,b){return!0};p.prototype._getOutlineGeometry=function(a,b){return b};p.prototype._getGeometry=function(a){a=a.geometry;"extent"===a.type&&(a=u.fromExtent(a));return a};p.prototype._createAs3DShape=function(d,c,e,f,g){var h=this._getGeometry(d.graphic),
k=h[c],l=this._getOutlineGeometry(h,k),q=[],n=[],t=[],u=m.vec3f64.create(),p=Array(6),h=v.getGeometryVertexData3D(l,h.hasZ,h.spatialReference,this._context.renderSpatialReference,this._context.elevationProvider,this._context.renderCoordsHelper,e);this._logGeometryCreationWarnings(h,k,c,"LineSymbol3DLayer");if(0<l.length){for(var k=h.geometryData.outlines,l=h.eleVertexData,x=h.vertexData,y=0;y<k.length;++y){var z=k[y];if(!(1>=z.count)){var A=z.index,B=z.count;if(this._context.clippingExtent&&(v.computeBoundingBox(l,
A,B,p),v.boundingBoxClipped(p,this._context.clippingExtent)))continue;v.applyOrigin(x,A,B,u);z=new Float64Array(l.buffer,3*A*l.BYTES_PER_ELEMENT,3*B);A=new Float64Array(x.buffer,3*A*x.BYTES_PER_ELEMENT,3*B);A=this._createGeometryData(d,A,z,"rings"===c);A=new C(A,f+"path"+y);A.singleUse=!0;q.push(A);n.push(this._material);A=a.mat4f64.create();b.mat4.translate(A,A,u);t.push(A)}}if(0<q.length)return d=new E({geometries:q,materials:n,transformations:t,castShadow:!1,metadata:{layerUid:this._context.layer.uid,
graphicUid:g},idHint:f}),q=new w(this,d,q,null,null,r.perVertexElevationAligner,e),q.alignedTerrainElevation=h.terrainElevation,q.needsElevationUpdates=v.needsElevationUpdates2D(e.mode),q}return null};p.prototype._createGeometryData=function(a,b,d,c){b=z.createPolylineGeometryData(b,d,c);if("round"===this._material.getParameters().join){d=b.vertexAttributes[I.VertexAttrConstants.POSITION].data;c=d.length/3;var f=new Float32Array(c),g=K,m=M;e.vec3.set(g,0,0,0);for(var h=0;h<c-1;++h){var k=h+1;e.vec3.set(m,
d[3*k+0]-d[3*h+0],d[3*k+1]-d[3*h+1],d[3*k+2]-d[3*h+2]);e.vec3.normalize(m,m);k=1*(Math.PI-B.acos(e.vec3.dot(g,m)))*T*this._lineWidthLOD;f[h]=Math.max(Math.floor(k),0);e.vec3.scale(g,m,-1)}b.vertexAttributes[I.VertexAttrConstants.SUBDIVISIONS]={size:1,data:f,offsetIdx:0,strideIdx:1};b.indices[I.VertexAttrConstants.SUBDIVISIONS]=b.indices[I.VertexAttrConstants.POSITION]}d=new Uint32Array(b.vertexAttributes[I.VertexAttrConstants.POSITION].data.length);b.indices[I.VertexAttrConstants.SIZE]=d;this._fastUpdates.enabled&&
this._fastUpdates.visualVariables.size?(b.vertexAttributes[I.VertexAttrConstants.SIZEFEATUREATTRIBUTE]={size:1,data:this.getSizeFeatureAttribute(a.graphic),offsetIdx:0,strideIdx:1},b.indices[I.VertexAttrConstants.SIZEFEATUREATTRIBUTE]=d):(b.vertexAttributes[I.VertexAttrConstants.SIZE]={size:1,data:this.getDrivenSize(a.renderingInfo),offsetIdx:0,strideIdx:1},b.indices[I.VertexAttrConstants.SIZE]=d);this._fastUpdates.enabled&&this._fastUpdates.visualVariables.color?(b.vertexAttributes[I.VertexAttrConstants.COLORFEATUREATTRIBUTE]=
{size:1,data:this.getColorFeatureAttribute(a.graphic),offsetIdx:0,strideIdx:1},b.indices[I.VertexAttrConstants.COLORFEATUREATTRIBUTE]=d):(b.vertexAttributes[I.VertexAttrConstants.COLOR]={size:4,data:this.getDrivenColor(a.renderingInfo,a.graphic),offsetIdx:0,strideIdx:4},b.indices[I.VertexAttrConstants.COLOR]=d);this._fastUpdates.enabled&&this._fastUpdates.visualVariables.opacity&&(b.vertexAttributes[I.VertexAttrConstants.OPACITYFEATUREATTRIBUTE]={size:1,data:this.getOpacityFeatureAttribute(a.graphic),
offsetIdx:0,strideIdx:1},b.indices[I.VertexAttrConstants.OPACITYFEATUREATTRIBUTE]=d);return b};p.prototype._createAsOverlay=function(d,c,e,f,g){e=d.graphic;var h=this._getGeometry(e);this._material.renderPriority=this._symbolLayerOrder;var k=h[c],l=this._getOutlineGeometry(h,k),q=[],r=Array(6),n=t.empty(),u=m.vec3f64.create(),h=v.getGeometryVertexDataDraped(l,h.spatialReference,this._context.overlaySR);this._logGeometryCreationWarnings(h,k,c,"LineSymbol3DLayer");if(0<l.length){k=h.vertexData;l=h.geometryData.outlines;
for(h=0;h<l.length;++h){var p=l[h],w=p.index,p=p.count;v.computeBoundingBox(k,w,p,r);if(!v.boundingBoxClipped(r,this._context.clippingExtent)){t.expand(n,r);v.applyOrigin(k,w,p,u);v.setZ(k,w,p,this._getDrapedZ());p=new Float64Array(k.buffer,3*w*k.BYTES_PER_ELEMENT,3*p);w=a.mat4f64.create();b.mat4.translate(w,w,u);var p=this._createGeometryData(d,p,null,"rings"===c),y=new H(p);y.data.layerUid=g;y.data.graphicUid=e.uid;y.material=this._material;y.center=[.5*(r[0]+r[3]),.5*(r[1]+r[4]),0];y.bsRadius=
.5*Math.sqrt((r[3]-r[0])*(r[3]-r[0])+(r[4]-r[1])*(r[4]-r[1]));y.transformation=w;y.name=f;y.uniqueName=f+"#"+p.id;q.push(y)}}return new x(this,q,n)}return null};return p}(y.Graphics3DSymbolLayer);c.Graphics3DLineSymbolLayer=p;var K=m.vec3f64.create(),M=m.vec3f64.create(),T=4/Math.PI;c.default=p})},"esri/views/3d/layers/graphics/lineUtils":function(){define(["require","exports","../../webgl-engine/lib/GeometryData","../../webgl-engine/lib/Util"],function(p,c,n,l){function k(d){var c=d.length;return d[0]===
d[c-3]&&d[1]===d[c-2]&&d[2]===d[c-1]}function d(d,c,b){var a,e;if(b=b&&!k(d)){b=new Float32Array(d.length+3);for(e=0;e<d.length;e++)b[e]=d[e];e=b.length;b[e-3]=d[0];b[e-2]=d[1];b[e-1]=d[2];a=d.length/3+1;e=new Uint32Array(2*(a-1))}else a=d.length/3,e=new Uint32Array(2*(a-1)),b=d;for(var f=d=0;f<a-1;f++)e[d++]=f,e[d++]=f+1;d={};a={};d[h.POSITION]=e;a[h.POSITION]={size:3,data:b,offsetIdx:0,strideIdx:3};c&&(d.mapPos=e,a.mapPos={size:3,data:c,offsetIdx:0,strideIdx:3});return new n(a,d,n.DefaultOffsets,
"line")}Object.defineProperty(c,"__esModule",{value:!0});var h=l.VertexAttrConstants;c.isClosed=k;c.createPolylineGeometryData=d;c.createPolylineGeometry=function(c,f,b,a,e){c=d(c,f,b);c.vertexAttributes[h.COLOR]={size:4,data:a,offsetIdx:0,strideIdx:4};a=new Float32Array(1);a[0]=e;c.vertexAttributes[h.SIZE]={size:1,data:a,offsetIdx:0,strideIdx:1};e=new Uint32Array(c.vertexAttributes[h.POSITION].data.length);c.indices[h.COLOR]=e;c.indices[h.SIZE]=e;return c}})},"esri/views/3d/layers/graphics/Graphics3DMeshFillSymbolLayer":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../Color ../../../../core/compilerUtils ../../../../core/maybe ../../../../core/libs/gl-matrix-2/mat3 ../../../../core/libs/gl-matrix-2/mat3f64 ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4f64 ../../../../geometry/support/aaBoundingBox ../../../../geometry/support/MeshComponent ../../../../geometry/support/webMercatorUtils ../../../../geometry/support/meshUtils/projection ./ElevationAligners ./Graphics3DObject3DGraphicLayer ./Graphics3DSymbolCommonCode ./Graphics3DSymbolLayer ../support/edgeUtils ../support/symbolColorUtils ../../support/debugFlags ../../support/projectionUtils ../../webgl-engine/Stage ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/GeometryData ../../webgl-engine/lib/Object3D ../../webgl-engine/lib/Texture ../../webgl-engine/lib/Util ../../webgl-engine/materials/DefaultMaterial ../../webgl-engine/materials/NativeLineMaterial".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z,A,B,D,C,E,H,G,I,K,M,T,N,S){Object.defineProperty(c,"__esModule",{value:!0});var O=T.VertexAttrConstants;p=function(b){function c(a,d,c,e){a=b.call(this,a,d,c,e)||this;a._edgeStageObjects=new Set;a._materials=new Map;a._textures=new Map;return a}n(c,b);c.prototype.doLoad=function(){return k(this,void 0,void 0,function(){return l(this,function(a){C.DRAW_MESH_GEOMETRY_NORMALS&&(this._debugVertexNormalMaterial=new S({color:[1,0,1,1]},"debugVertexNormal"),
this._debugFaceNormalMaterial=new S({color:[0,1,1,1]},"debugFAceNormal"));return[2]})})};c.prototype.destroy=function(){var a=this;b.prototype.destroy.call(this);this._materials.forEach(function(b){a._context.stage.remove(H.ModelContentType.MATERIAL,b.material.id)});this._textures.forEach(function(b){a._context.stage.remove(H.ModelContentType.TEXTURE,b.id)});this._materials.clear();this._textures.clear()};c.prototype.createGraphics3DGraphic=function(a){var b=a.graphic;if("mesh"!==b.geometry.type)return this.logger.warn("unsupported geometry type for fill on mesh-3d symbol: "+
b.geometry.type),null;if(!this._validateGeometry(b.geometry))return null;var d="graphic"+b.uid,c=this.getGraphicElevationContext(b);return this._createAs3DShape(b,a.renderingInfo,c,d,b.uid)};c.prototype.layerOpacityChanged=function(){var a=this,b=this._getLayerOpacity();this._materials.forEach(function(d){d.material.setParameterValues({layerOpacity:b});var c=d.material.getParameters();a._setMaterialTransparentParameter(c,d);d.material.setParameterValues({transparent:c.transparent})});if(0<this._edgeStageObjects.size){var d=
this._context.stage.renderView.ensureEdgeView(),c=this._getLayerOpacity();this._edgeStageObjects.forEach(function(a){return d.updateAllComponentOpacities(a,[c])})}return!0};c.prototype.layerElevationInfoChanged=function(a,b){return this.updateGraphics3DGraphicElevationInfo(a,b,z.needsElevationUpdates3D)};c.prototype.slicePlaneEnabledChanged=function(a,b){var d=this;this._materials.forEach(function(a){a.material.setParameterValues({slicePlaneEnabled:d._context.slicePlaneEnabled})});if(0<this._edgeStageObjects.size){var c=
this._context.stage.renderView.ensureEdgeView();a=this._createEdgeMaterial(c);if(g.isSome(a)){var e=[a];this._edgeStageObjects.forEach(function(a){return c.updateAllComponentMaterials(a,e,{slicePlaneEnabled:d._context.slicePlaneEnabled},!1)})}}return!0};c.prototype.pixelRatioChanged=function(a,b){return!0};c.prototype._requiresSymbolVertexColors=function(){return this._isPropertyDriven("color")||this._isPropertyDriven("opacity")};c.prototype._colorOrTextureUid=function(a){return a?a instanceof d?
a.toHex():a.contentHash:"-"};c.prototype._materialProperties=function(a,b,d){var c=this._requiresSymbolVertexColors(),e,f,g,m,h,k,l,q,r;b.material&&(f=b.material.color,e=this._colorOrTextureUid(b.material.color),g=b.material.colorTexture,m=this._colorOrTextureUid(b.material.colorTexture),h=b.material.normalTexture,k=this._colorOrTextureUid(b.material.normalTexture),l=b.material.doubleSided,q=b.material.alphaCutoff,r=b.material.alphaMode);b=!!a.vertexAttributes.color;a=!!a.vertexAttributes.tangent;
return{hasSymbolVertexColors:c,hasVertexColors:b,hasVertexTangents:a,color:f,colorTexture:g,normalTexture:h,uid:"vc:"+b+",vt:"+a+",vct"+d+",svc:"+c+",cmuid:"+e+",ctmuid:"+m+",ntmuid:"+k+",ds:"+l+",ac:"+q+",am:"+r}};c.prototype._setInternalColorValueParameters=function(a,b){b.diffuse=d.toUnitRGB(a);b.opacity=a.a};c.prototype._getLoadableTextureResource=function(a){return a.data?a.data instanceof HTMLImageElement?a.data.complete?a.data:a.data.src:a.data:a.url};c.prototype._getInternalTextureId=function(a,
b){var d=this._getLoadableTextureResource(a);if(d){var c=a.contentHash,e=this._textures.get(c);e||(e=new M(d,b+"_"+c+"_tex",{mipmap:!0,wrap:this._castTextureWrap(a.wrap),noUnpackFlip:!0}),this._textures.set(c,e),this._context.stage.add(H.ModelContentType.TEXTURE,e));return e.id}};c.prototype._castTextureWrap=function(a){void 0===a&&(a="repeat");return"string"===typeof a?(a=this._castTextureWrapIndividual(a),{s:a,t:a}):{s:this._castTextureWrapIndividual(a.horizontal),t:this._castTextureWrapIndividual(a.vertical)}};
c.prototype._castTextureWrapIndividual=function(a){switch(a){case "clamp":return 33071;case "mirror":return 33648;default:return 10497}};c.prototype._setInternalMaterialParameters=function(a,b,d){a.color&&this._setInternalColorValueParameters(a.color,d);a.colorTexture&&(d.textureId=this._getInternalTextureId(a.colorTexture,b));a.hasVertexTangents&&a.normalTexture&&(d.normalTextureId=this._getInternalTextureId(a.normalTexture,b))};c.prototype._setExternalMaterialParameters=function(a){var b=this._isPropertyDriven("color"),
c=g.isSome(this.symbolLayer.material)?this.symbolLayer.material.colorMixMode:null;b?a.externalColor=u.vec4f64.ONES:(b=g.isSome(this.symbolLayer.material)?this.symbolLayer.material.color:null,g.isSome(b)?a.externalColor=d.toUnitRGBA(b):(c=null,a.externalColor=u.vec4f64.ONES));c&&(a.colorMixMode=c)};c.prototype._hasTransparentVertexColors=function(a){a=a.vertexAttributes.color;if(!a)return!1;for(var b=3;b<a.length;b+=4)if(255!==a[b])return!0;return!1};c.prototype._getOrCreateMaterial=function(a,b){var d=
b.material&&b.material.color,c=b.material&&b.material.colorTexture,d=this._hasTransparentVertexColors(a)||d&&1>d.a||c&&c.transparent;a=this._materialProperties(a,b,d);if(c=this._materials.get(a.uid))return c.material;var d={material:null,isComponentTransparent:d,alphaMode:b.material?b.material.alphaMode:"opaque"},c=this._getStageIdHint(),e={specular:q.vec3f64.ZEROS,vertexColors:a.hasVertexColors,symbolColors:a.hasSymbolVertexColors,vertexTangents:a.hasVertexTangents,ambient:q.vec3f64.ZEROS,diffuse:q.vec3f64.ONES,
opacity:1,doubleSided:!0,doubleSidedType:"winding-order",cullFace:"none",layerOpacity:this._getLayerOpacity(),slicePlaneEnabled:this._context.slicePlaneEnabled,textureInitTransparent:!0};b.material&&(e.doubleSided=b.material.doubleSided,e.cullFace=b.material.doubleSided?"none":"back",e.textureAlphaCutoff=b.material.alphaCutoff);this._setInternalMaterialParameters(a,c,e);this._setExternalMaterialParameters(e);this._setMaterialTransparentParameter(e,d);b=new N(e,c+"_"+a.uid+"_mat");d.material=b;this._materials.set(a.uid,
d);this._context.stage.add(H.ModelContentType.MATERIAL,b);return b};c.prototype._setMaterialTransparentParameter=function(a,b){var d=this._isPropertyDriven("opacity");a.transparent=d||b.isComponentTransparent||1>a.layerOpacity||1>a.opacity||a.externalColor&&1>a.externalColor[3];a.textureAlphaMode="auto"===b.alphaMode?a.transparent?"maskBlend":"opaque":b.alphaMode};c.prototype._addDebugNormals=function(a,b,d,c){var f,g,h,k,l=b.length,q=a.spatialReference.isGeographic?20015077/180:1,r=.1*Math.max(a.extent.width*
q,a.extent.height*q,a.extent.zmax-a.extent.zmin),n=[],t=[];a=[];for(var q=[],u=0;u<l;u++)for(var p=b[u],v=p.data.getAttribute(O.POSITION),x=p.data.getAttribute(O.NORMAL),w=p.data.getIndices(O.POSITION),p=p.data.getIndices(O.NORMAL),v=v.data,x=x.data,y=0;y<w.length;y++){for(var z=3*w[y],A=3*p[y],B=0;3>B;B++)n.push(v[z+B]);for(B=0;3>B;B++)n.push(v[z+B]+x[A+B]*r);t.push(t.length);t.push(t.length);if(0===y%3){this._calculateFaceNormal(v,w,y,L);this._getFaceVertices(v,w,y,Q,J,P);m.vec3.add(Q,Q,J);m.vec3.add(Q,
Q,P);m.vec3.scale(Q,Q,1/3);for(B=0;3>B;B++)a.push(Q[B]);for(B=0;3>B;B++)a.push(Q[B]+L[B]*r);q.push(q.length);q.push(q.length)}}l=(f={},f[O.POSITION]={data:new Float64Array(n),size:3},f);f=(g={},g[O.POSITION]=new Uint32Array(t),g);g=new I(l,f,void 0,"line");g=new G(g,"debugVertexNormal");g.singleUse=!0;b.push(g);d.push(this._debugVertexNormalMaterial);c.push(e.mat4f64.clone(c[0]));l=(h={},h[O.POSITION]={data:new Float64Array(a),size:3},h);f=(k={},k[O.POSITION]=new Uint32Array(q),k);g=new I(l,f,void 0,
"line");g=new G(g,"debugFaceNormal");g.singleUse=!0;b.push(g);d.push(this._debugFaceNormalMaterial);c.push(e.mat4f64.clone(c[0]))};c.prototype._createAs3DShape=function(a,b,d,c,e){var f=this;a=a.geometry;if("mesh"!==a.type)return null;var m=this._createGeometryInfo(a,b,c);if(!m)return null;b=m.geometries;var h=m.materials,k=m.transformations,m=m.objectTransformation;C.DRAW_MESH_GEOMETRY_NORMALS&&this._addDebugNormals(a,b,h,k);var l=new K({geometries:b,materials:h,transformations:k,castShadow:!0,metadata:{layerUid:this._context.layer.uid,
graphicUid:e},idHint:c});l.objectTransformation=m;var q=function(a){var b=f._context.stage.renderView.ensureEdgeView();b.removeObject(a);f._edgeStageObjects.delete(a);var d=f._createEdgeMaterial(b);g.isSome(d)&&(f._edgeStageObjects.add(a),b.addObject(a,[d],{slicePlaneEnabled:f._context.slicePlaneEnabled},!f._context.isAsync,{mergeGeometries:!0}))};q(l);c=function(a,b,d,c,e){a=v.perObjectElevationAligner(a,b,d,c,e);q(l);return a};e=new y(this,l,b,null,null,c,d);e.needsElevationUpdates=z.needsElevationUpdates3D(d.mode);
d=a.extent.center.clone();d.z=0;e.elevationContext.centerPointInElevationSR=d;e.alignedTerrainElevation=c(e,e.elevationContext,this._context.elevationProvider,this._context.renderCoordsHelper,this._context.featureExpressionInfoContext);return e};c.prototype._createComponentNormals=function(a,b,d,c){var e=d.shading||"flat";switch(e){case "source":return this._createComponentNormalsSource(a,b,d,c);case "flat":return this._createComponentNormalsFlat(a,d,c);case "smooth":return this._createComponentNormalsSmooth(a,
d,c);default:h.neverReached(e)}};c.prototype._createComponentNormalsSource=function(a,b,d,c){if(!b)return this._createComponentNormalsFlat(a,d,c);var e=!1;if(!d.trustSourceNormals)for(d=0;d<c.length;d+=3){this._calculateFaceNormal(a,c,d,L);for(var f=0;3>f;f++){var g=3*c[d+f];Q[0]=b[g+0];Q[1]=b[g+1];Q[2]=b[g+2];0>m.vec3.dot(L,Q)&&(b[g+0]=-b[g+0],b[g+1]=-b[g+1],b[g+2]=-b[g+2],e=!0)}}return{normals:b,indices:c,didFlipNormals:e}};c.prototype._createComponentNormalsFlat=function(a,b,d){b=new Float32Array(d.length);
for(var c=new Uint32Array(3*d.length),e=0;e<d.length;e+=3)for(var f=this._calculateFaceNormal(a,d,e,L),g=0;3>g;g++)b[e+g]=f[g],c[e+g]=e/3;return{normals:b,indices:c,didFlipNormals:!1}};c.prototype._createComponentNormalsSmooth=function(a,b,d){b={};for(var c=0;c<d.length;c+=3)for(var e=this._calculateFaceNormal(a,d,c,L),f=0;3>f;f++){var g=d[c+f],h=b[g];h||(h={normal:q.vec3f64.create(),count:0},b[g]=h);m.vec3.add(h.normal,h.normal,e);h.count++}a=new Float32Array(3*d.length);e=new Uint32Array(3*d.length);
for(c=0;c<d.length;c++){g=d[c];h=b[g];1!==h.count&&(m.vec3.normalize(h.normal,h.normal),h.count=1);for(f=0;3>f;f++)a[3*c+f]=h.normal[f];e[c]=c}return{normals:a,indices:e,didFlipNormals:!1}};c.prototype._getFaceVertices=function(a,b,d,c,e,f){var g=3*b[d+0],m=3*b[d+1];b=3*b[d+2];c[0]=a[g+0];c[1]=a[g+1];c[2]=a[g+2];e[0]=a[m+0];e[1]=a[m+1];e[2]=a[m+2];f[0]=a[b+0];f[1]=a[b+1];f[2]=a[b+2]};c.prototype._calculateFaceNormal=function(a,b,d,c){this._getFaceVertices(a,b,d,Q,J,P);m.vec3.subtract(J,J,Q);m.vec3.subtract(P,
P,Q);m.vec3.cross(Q,J,P);m.vec3.normalize(c,Q);return c};c.prototype._getOrCreateComponents=function(a){return a.components?a.components:R};c.prototype._createPositionBuffer=function(a){var b=a.vertexAttributes.position,d=new Float64Array(b.length);z.reproject(a.vertexAttributes.position,0,a.spatialReference,d,0,this._context.renderSpatialReference,b.length/3);return d};c.prototype._createNormalBuffer=function(a,b){var d=a.vertexAttributes.normal;if(!d)return null;if("local"===this._context.layerView.view.viewingMode)return d;
var c=a.vertexAttributes.position,e=new Float32Array(d.length);return w.projectNormalToECEF(d,c,b,a.spatialReference,e)};c.prototype._createTangentBuffer=function(a,b){var d=a.vertexAttributes.tangent;if(!d)return null;if("local"===this._context.layerView.view.viewingMode)return d;var c=a.vertexAttributes.position,e=new Float32Array(d.length);return w.projectTangentToECEF(d,c,b,a.spatialReference,e)};c.prototype._createColorBuffer=function(a){return a.vertexAttributes.color};c.prototype._createSymbolColorBuffer=
function(a){if(this._requiresSymbolVertexColors()){a=this._getVertexOpacityAndColor(a);var b=g.get(this.symbolLayer,"material","colorMixMode"),d=new Uint8Array(4);D.encodeSymbolColor(a,b,d);return d}return null};c.prototype._createColorIndices=function(a,b){a=new Uint32Array(b.length);for(b=0;b<a.length;b++)a[b]=0;return a};c.prototype._createBuffers=function(a,b){var d=a.vertexAttributes&&a.vertexAttributes.position;if(!d)return this.logger.warn("Mesh geometry must contain position vertex attributes"),
null;var c=a.vertexAttributes.normal,e=a.vertexAttributes.uv,f=a.vertexAttributes.tangent;if(c&&c.length!==d.length)return this.logger.warn("Mesh normal vertex buffer must contain the same number of elements as the position buffer"),null;if(f&&f.length/4!==d.length/3)return this.logger.warn("Mesh tangent vertex buffer must contain the same number of elements as the position buffer"),null;if(e&&e.length/2!==d.length/3)return this.logger.warn("Mesh uv vertex buffer must contain the same number of elements as the position buffer"),
null;d=this._createPositionBuffer(a);c=this._createColorBuffer(a);b=this._createSymbolColorBuffer(b);var f=this._createNormalBuffer(a,d),g=this._createTangentBuffer(a,d);a=this._transformCenterLocal(a,d,f);return{positionBuffer:d,normalBuffer:f,tangentBuffer:g,uvBuffer:e,colorBuffer:c,symbolColorBuffer:b,objectTransformation:a}};c.prototype._transformCenterLocal=function(b,d,c){var g=b.extent.center,h=this._context.renderSpatialReference;V[0]=g.x;V[1]=g.y;V[2]=0;g=e.mat4f64.create();E.computeLinearTransformation(b.spatialReference,
V,g,h);a.mat4.invert(F,g);for(b=0;b<d.length;b+=3)Q[0]=d[b+0],Q[1]=d[b+1],Q[2]=d[b+2],m.vec3.transformMat4(Q,Q,F),d[b+0]=Q[0],d[b+1]=Q[1],d[b+2]=Q[2];if(c)for(f.mat3.fromMat4(Y,g),f.mat3.transpose(Y,Y),b=0;b<c.length;b+=3)Q[0]=c[b+0],Q[1]=c[b+1],Q[2]=c[b+2],m.vec3.transformMat3(Q,Q,Y),c[b+0]=Q[0],c[b+1]=Q[1],c[b+2]=Q[2];return g};c.prototype._validateFaces=function(a,b){a=a.vertexAttributes.position.length/3;if(b=b.faces){for(var d=-1,c=0;c<b.length;c++){var e=b[c];e>d&&(d=e)}if(a<=d)return this.logger.warn("Vertex index "+
d+" is out of bounds of the mesh position buffer"),!1}else if(0!==a%3)return this.logger.warn("Mesh position buffer length must be a multiple of 9 if no component faces are defined (3 values per vertex * 3 vertices per triangle)"),!1;return!0};c.prototype._getOrCreateFaces=function(a,b){if(b.faces)return b.faces;a=new Uint32Array(a.vertexAttributes.position.length/3);for(b=0;b<a.length;b++)a[b]=b;return a};c.prototype._isOutsideClippingArea=function(a){if(!this._context.clippingExtent)return!1;var b=
a.vertexAttributes&&a.vertexAttributes.position;if(!b)return!1;var d=this._context.elevationProvider.spatialReference,c=b.length/3;a.spatialReference.equals(d)||(b=new Float64Array(b.length),z.reproject(a.vertexAttributes.position,0,a.spatialReference,b,0,d,c));z.computeBoundingBox(b,0,c,X);return z.boundingBoxClipped(X,this._context.clippingExtent)};c.prototype._createGeometryInfo=function(a,b,d){var c,f;if(!x.canProject(a,this._context.layerView.view.spatialReference))return this.logger.warn("Geometry spatial reference is not compatible with the view"),
null;if(this._isOutsideClippingArea(a))return null;var g=this._createBuffers(a,b);if(!g)return null;b=g.positionBuffer;for(var m=g.uvBuffer,h=g.colorBuffer,k=g.symbolColorBuffer,l=g.normalBuffer,q=g.tangentBuffer,g=g.objectTransformation,r=[],n=[],t=[],u=!1,p=0,v=this._getOrCreateComponents(a);p<v.length;p++){var w=v[p];if(!this._validateFaces(a,w))return null;var y=this._getOrCreateFaces(a,w);if(0!==y.length){var z=this._createComponentNormals(b,l,w,y);z.didFlipNormals&&(u=!0);var A=(c={},c[O.POSITION]=
{size:3,data:b},c[O.NORMAL]={size:3,data:z.normals},c),z=(f={},f[O.POSITION]=y,f[O.NORMAL]=z.indices,f);h&&(A[O.COLOR]={size:4,data:h},z[O.COLOR]=y);k&&(A[O.SYMBOLCOLOR]={size:4,data:k},z[O.SYMBOLCOLOR]=this._createColorIndices(w,y));a.vertexAttributes.uv&&(A[O.UV0]={size:2,data:m},z[O.UV0]=y);a.vertexAttributes.tangent&&(A[O.TANGENT]={size:4,data:q},z[O.TANGENT]=y);y=new I(A,z);y=new G(y,d+"_mesh");y.singleUse=!0;r.push(y);n.push(e.mat4f64.create());t.push(this._getOrCreateMaterial(a,w))}}u&&this.logger.warn("Normals have been automatically flipped to be consistent with the counter clock wise face winding order. It is better to generate mesh geometries that have consistent normals.");
return{geometries:r,transformations:n,materials:t,objectTransformation:g}};c.prototype._createEdgeMaterial=function(a){var b={opacity:this._getLayerOpacity()};return B.createMaterial(a,this.symbolLayer,b)};return c}(A.default);c.Graphics3DMeshFillSymbolLayer=p;var V=q.vec3f64.create(),Q=q.vec3f64.create(),J=q.vec3f64.create(),P=q.vec3f64.create(),L=q.vec3f64.create(),F=e.mat4f64.create(),Y=b.mat3f64.create(),X=t.create(),R=[new r];c.default=p})},"esri/geometry/support/MeshComponent":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators ./MeshMaterial ./MeshVertexAttributes".split(" "),
function(p,c,n,l,k,d,h,g,f,b){var a=h.getLogger("esri.geometry.support.MeshComponent");return function(c){function e(a){a=c.call(this)||this;a.faces=null;a.material=null;a.shading="source";a.trustSourceNormals=!1;return a}n(e,c);h=e;e.prototype.castFaces=function(d){return b.castArray(d,Uint32Array,[Uint16Array],{loggerTag:".faces\x3d",stride:3},a)};e.prototype.clone=function(){return new h({faces:d.clone(this.faces),shading:this.shading,material:d.clone(this.material),trustSourceNormals:this.trustSourceNormals})};
e.prototype.cloneWithSharedTextures=function(){return new h({faces:d.clone(this.faces),shading:this.shading,material:this.material?this.material.cloneWithSharedTextures():null,trustSourceNormals:this.trustSourceNormals})};var h;l([g.property({json:{write:!0}})],e.prototype,"faces",void 0);l([g.cast("faces")],e.prototype,"castFaces",null);l([g.property({type:f.MeshMaterial,json:{write:!0}})],e.prototype,"material",void 0);l([g.property({type:String,json:{write:!0}})],e.prototype,"shading",void 0);
l([g.property({type:Boolean})],e.prototype,"trustSourceNormals",void 0);return e=h=l([g.subclass("esri.geometry.support.MeshComponent")],e)}(g.declared(k))})},"esri/geometry/support/MeshMaterial":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ./ImageMeshColor ./MeshTexture ./ValueMeshColor".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m){function q(){u.warn('Assigning ImageMeshColor to "MeshMaterial.color" is deprecated. Assigning to "MeshMaterial.colorTexture" instead.')}Object.defineProperty(c,"__esModule",{value:!0});var u=g.getLogger("esri.geometry.support.MeshMaterial");p=function(d){function c(a){a=d.call(this)||this;a.color=null;a.colorTexture=null;a.normalTexture=null;a.alphaMode="auto";a.alphaCutoff=.5;a.doubleSided=!0;return a}n(c,d);g=c;c.prototype.castColor=function(d){if(!d)return d;
if(Array.isArray(d))return new k(d);if(d instanceof k||d instanceof e)return d;if("string"===typeof d){if(t.test(d)||k.named[d])return new k(d);q();this.colorTexture=new e({url:d});return null}return d instanceof HTMLImageElement||d instanceof HTMLCanvasElement||d instanceof ImageData?(q(),this.colorTexture=new e({data:d}),null):d instanceof a?(q(),this.colorTexture=new e({url:d.url,data:d.data}),null):"image"===d.type?(q(),this.colorTexture=new e(d),null):d instanceof m?(u.warn('Assigning ValueMeshColor to "MeshMaterial.color" is deprecated. Automatically converting it to esri.Color.'),
new k(d.value)):b.ensureType(k,d)};c.prototype.castColorTexture=function(a){return a?"string"===typeof a?new e({url:a}):a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof ImageData?new e({data:a}):b.ensureType(e,a):a};c.prototype.readColorTexture=function(a,b,d){if(a)return new e(a)};c.prototype.castNormalTexture=function(a){return a?"string"===typeof a?new e({url:a}):a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof ImageData?new e({data:a}):b.ensureType(e,
a):a};c.prototype.readNormalTexture=function(a,b,d){if(a)return new e(a)};c.prototype.clone=function(){return new g({color:h.clone(this.color),colorTexture:h.clone(this.colorTexture),normalTexture:h.clone(this.normalTexture),alphaMode:this.alphaMode,alphaCutoff:this.alphaCutoff,doubleSided:this.doubleSided})};c.prototype.cloneWithSharedTextures=function(){return new g({color:h.clone(this.color),colorTexture:this.colorTexture,normalTexture:this.normalTexture,alphaMode:this.alphaMode,alphaCutoff:this.alphaCutoff,
doubleSided:this.doubleSided})};var g;l([f.property({type:k,json:{write:!0}})],c.prototype,"color",void 0);l([f.cast("color")],c.prototype,"castColor",null);l([f.property({json:{write:!0}})],c.prototype,"colorTexture",void 0);l([f.cast("colorTexture")],c.prototype,"castColorTexture",null);l([f.reader("colorTexture")],c.prototype,"readColorTexture",null);l([f.property({json:{write:!0}})],c.prototype,"normalTexture",void 0);l([f.cast("normalTexture")],c.prototype,"castNormalTexture",null);l([f.reader("normalTexture")],
c.prototype,"readNormalTexture",null);l([f.property({json:{write:!0}})],c.prototype,"alphaMode",void 0);l([f.property({json:{write:!0}})],c.prototype,"alphaCutoff",void 0);l([f.property({json:{write:!0}})],c.prototype,"doubleSided",void 0);return c=g=l([f.subclass("esri.geometry.support.MeshMaterial")],c)}(f.declared(d));c.MeshMaterial=p;var t=/^\s*(#|rgba?\()/;c.default=p})},"esri/geometry/support/ImageMeshColor":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/compilerUtils ../../core/Identifiable ../../core/Logger ../../core/urlUtils ../../core/accessorSupport/decorators ./MeshColor ../../views/support/screenshotUtils".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a){var e=h.getLogger("esri.geometry.support.ImageMeshColor");return function(b){function d(a){a=b.call(this)||this;a.type="image";e.warn("esri/geometry/support/ImageMeshColor is deprecated since version 4.11. Use esri/geometry/support/MeshTexture instead.");return a}n(d,b);c=d;Object.defineProperty(d.prototype,"url",{get:function(){return this._get("url")||null},set:function(a){this._set("url",a);a&&this._set("data",null)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"data",{get:function(){return this._get("data")||null},set:function(a){this._set("data",a);a&&this._set("url",null)},enumerable:!0,configurable:!0});d.prototype.writeData=function(a,b,d,c){a instanceof HTMLImageElement?a={type:"image-element",src:g.toJSON(a.src,c)}:a instanceof HTMLCanvasElement?(a=a.getContext("2d").getImageData(0,0,a.width,a.height),a={type:"canvas-element",imageData:this.encodeImageData(a)}):a={type:"image-data",imageData:this.encodeImageData(a)};b[d]=a};d.prototype.readData=function(a,
b){switch(a.type){case "image-element":return b=new Image,b.src=a.src,b;case "canvas-element":return a=this.decodeImageData(a.imageData),b=document.createElement("canvas"),b.width=a.width,b.height=a.height,b.getContext("2d").putImageData(a,0,0),b;case "image-data":return this.decodeImageData(a.imageData);default:k.neverReached(a)}};Object.defineProperty(d.prototype,"transparent",{get:function(){var a=this.data,b=this.url;return a instanceof HTMLCanvasElement?this.imageDataContainsTransparent(a.getContext("2d").getImageData(0,
0,a.width,a.height)):a instanceof ImageData?this.imageDataContainsTransparent(a):b&&(a=b.substr(b.length-4,4).toLowerCase(),b=b.substr(0,15).toLocaleLowerCase(),".png"===a||"data:image/png;"===b)?!0:!1},set:function(a){null!=a?this._override("transparent",a):this._clearOverride("transparent")},enumerable:!0,configurable:!0});d.prototype.clone=function(){return new c({url:this.url,data:this.data})};d.prototype.encodeImageData=function(a){for(var b="",d=0;d<a.data.length;d++)b+=String.fromCharCode(a.data[d]);
return{data:btoa(b),width:a.width,height:a.height}};d.prototype.decodeImageData=function(b){for(var d=atob(b.data),c=new Uint8ClampedArray(d.length),e=0;e<d.length;e++)c[e]=d.charCodeAt(e);return a.wrapImageData(c,b.width,b.height)};d.prototype.imageDataContainsTransparent=function(a){for(var b=3;b<a.data.length;b+=4)if(255!==a.data[b])return!0;return!1};var c;l([f.property()],d.prototype,"type",void 0);l([f.property({type:String,json:{write:g.write}})],d.prototype,"url",null);l([f.property({json:{write:{overridePolicy:function(){return{enabled:!this.url}}}}}),
f.property()],d.prototype,"data",null);l([f.writer("data")],d.prototype,"writeData",null);l([f.reader("data")],d.prototype,"readData",null);l([f.property({type:Boolean,dependsOn:["data","url"],json:{write:{overridePolicy:function(){return{enabled:this._isOverridden("transparent")}}}}})],d.prototype,"transparent",null);return d=c=l([f.subclass("esri.geometry.support.ImageMeshColor")],d)}(f.declared(b.default,d.Identifiable))})},"esri/geometry/support/MeshColor":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(p,c,n,l,k,d){Object.defineProperty(c,"__esModule",{value:!0});p=function(c){function g(d){return c.call(this)||this}n(g,c);g.prototype.clone=function(){throw Error("not implemented");};l([d.property({readOnly:!0,json:{read:!1,write:{isRequired:!0,ignoreOrigin:!0,enabled:!0}}})],g.prototype,"type",void 0);return g=l([d.subclass("esri.geometry.support.MeshColor")],g)}(d.declared(k));c.MeshColor=p;c.default=p})},"esri/geometry/support/MeshTexture":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper @dojo/framework/shim/WeakMap ../../core/compilerUtils ../../core/JSONSupport ../../core/urlUtils ../../core/accessorSupport/decorators ../../views/support/screenshotUtils".split(" "),
function(p,c,n,l,k,d,h,g,f,b){var a=new k.default,e=0;return function(c){function m(a){a=c.call(this)||this;a.wrap="repeat";return a}n(m,c);h=m;Object.defineProperty(m.prototype,"url",{get:function(){return this._get("url")||null},set:function(a){this._set("url",a);a&&this._set("data",null)},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"data",{get:function(){return this._get("data")||null},set:function(a){this._set("data",a);a&&this._set("url",null)},enumerable:!0,configurable:!0});
m.prototype.writeData=function(a,b,d,c){a instanceof HTMLImageElement?a={type:"image-element",src:g.toJSON(a.src,c)}:a instanceof HTMLCanvasElement?(a=a.getContext("2d").getImageData(0,0,a.width,a.height),a={type:"canvas-element",imageData:this.encodeImageData(a)}):a={type:"image-data",imageData:this.encodeImageData(a)};b[d]=a};m.prototype.readData=function(a,b){switch(a.type){case "image-element":return b=new Image,b.src=a.src,b;case "canvas-element":return a=this.decodeImageData(a.imageData),b=
document.createElement("canvas"),b.width=a.width,b.height=a.height,b.getContext("2d").putImageData(a,0,0),b;case "image-data":return this.decodeImageData(a.imageData);default:d.neverReached(a)}};Object.defineProperty(m.prototype,"transparent",{get:function(){var a=this.data,b=this.url;return a instanceof HTMLCanvasElement?this.imageDataContainsTransparent(a.getContext("2d").getImageData(0,0,a.width,a.height)):a instanceof ImageData?this.imageDataContainsTransparent(a):b&&(a=b.substr(b.length-4,4).toLowerCase(),
b=b.substr(0,15).toLocaleLowerCase(),".png"===a||"data:image/png;"===b)?!0:!1},set:function(a){null!=a?this._override("transparent",a):this._clearOverride("transparent")},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"contentHash",{get:function(){var b=this,d="string"===typeof this.wrap?this.wrap:"object"===typeof this.wrap?this.wrap.horizontal+"/"+this.wrap.vertical:"",c=function(a){void 0===a&&(a="");return"d:"+a+",t:"+b.transparent+",w:"+d};if(null!=this.url)return c(this.url);
if(null!=this.data){if(this.data instanceof HTMLImageElement)return c(this.data.src);a.has(this.data)||a.set(this.data,++e);return c(a.get(this.data))}return c()},enumerable:!0,configurable:!0});m.prototype.clone=function(){return new h({url:this.url,data:this.data,wrap:this.cloneWrap()})};m.prototype.cloneWrap=function(){return"string"===typeof this.wrap?this.wrap:{horizontal:this.wrap.horizontal,vertical:this.wrap.vertical}};m.prototype.encodeImageData=function(a){for(var b="",d=0;d<a.data.length;d++)b+=
String.fromCharCode(a.data[d]);return{data:btoa(b),width:a.width,height:a.height}};m.prototype.decodeImageData=function(a){for(var d=atob(a.data),c=new Uint8ClampedArray(d.length),e=0;e<d.length;e++)c[e]=d.charCodeAt(e);return b.wrapImageData(c,a.width,a.height)};m.prototype.imageDataContainsTransparent=function(a){for(var b=3;b<a.data.length;b+=4)if(255!==a.data[b])return!0;return!1};var h;l([f.property({type:String,json:{write:g.write}})],m.prototype,"url",null);l([f.property({json:{write:{overridePolicy:function(){return{enabled:!this.url}}}}}),
f.property()],m.prototype,"data",null);l([f.writer("data")],m.prototype,"writeData",null);l([f.reader("data")],m.prototype,"readData",null);l([f.property({type:Boolean,dependsOn:["data","url"],json:{write:{overridePolicy:function(){return{enabled:this._isOverridden("transparent")}}}}})],m.prototype,"transparent",null);l([f.property({json:{write:!0}})],m.prototype,"wrap",void 0);l([f.property({readOnly:!0,dependsOn:["url","data","wrap","transparent"]})],m.prototype,"contentHash",null);return m=h=l([f.subclass("esri.geometry.support.MeshTexture")],
m)}(f.declared(h))})},"esri/geometry/support/ValueMeshColor":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators ./MeshColor".split(" "),function(p,c,n,l,k,d,h,g,f){var b=h.getLogger("esri.geometry.support.ValueMeshColor");return function(a){function c(d){d=a.call(this)||this;d.type="value";d.value=null;b.warn("esri/geometry/support/ValueMeshColor is deprecated since version 4.11. Use esri/Color instead.");
return d}n(c,a);f=c;c.prototype.clone=function(){return new f({value:d.clone(this.value)})};var f;l([g.property()],c.prototype,"type",void 0);l([g.property({type:k})],c.prototype,"value",void 0);return c=f=l([g.subclass("esri.geometry.support.ValueMeshColor")],c)}(g.declared(f.default))})},"esri/geometry/support/MeshVertexAttributes":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators".split(" "),
function(p,c,n,l,k,d,h,g){function f(a,b,d,c){var e=b.loggerTag;b=b.stride;return 0!==a.length%b?(c.error(e,"Invalid array length, expected a multiple of "+b),new d([])):a}function b(a,b,d,c,e){if(!a)return a;if(a instanceof b)return f(a,c,b,e);for(var g=0;g<d.length;g++)if(a instanceof d[g])return f(new b(a),c,b,e);if(Array.isArray(a))return f(new b(a),c,b,e);d=d.map(function(a){return"'"+a.name+"'"});e.error("Failed to set property, expected one of "+d+", but got "+a.constructor.name);return new b([])}
function a(a,b,d){for(var c=Array(a.length),e=0;e<a.length;e++)c[e]=a[e];b[d]=c}Object.defineProperty(c,"__esModule",{value:!0});var e=h.getLogger("esri.geometry.support.MeshVertexAttributes");p=function(c){function f(a){a=c.call(this)||this;a.color=null;a.position=new Float64Array(0);a.uv=null;a.normal=null;a.tangent=null;return a}n(f,c);m=f;f.prototype.castColor=function(a){return b(a,Uint8Array,[Uint8ClampedArray],{loggerTag:".color\x3d",stride:4},e)};f.prototype.castPosition=function(a){a&&a instanceof
Float32Array&&e.warn(".position\x3d","Setting position attribute from a Float32Array may cause precision problems. Consider storing data in a Float64Array or a regular number array");return b(a,Float64Array,[Float32Array],{loggerTag:".position\x3d",stride:3},e)};f.prototype.castUv=function(a){return b(a,Float32Array,[Float64Array],{loggerTag:".uv\x3d",stride:2},e)};f.prototype.castNormal=function(a){return b(a,Float32Array,[Float64Array],{loggerTag:".normal\x3d",stride:3},e)};f.prototype.castTangent=
function(a){return b(a,Float32Array,[Float64Array],{loggerTag:".tangent\x3d",stride:4},e)};f.prototype.clone=function(){return new m({position:d.clone(this.position),uv:d.clone(this.uv),normal:d.clone(this.normal),tangent:d.clone(this.tangent)})};var m;l([g.property({json:{write:a}})],f.prototype,"color",void 0);l([g.cast("color")],f.prototype,"castColor",null);l([g.property({nonNullable:!0,json:{write:a}})],f.prototype,"position",void 0);l([g.cast("position")],f.prototype,"castPosition",null);l([g.property({json:{write:a}})],
f.prototype,"uv",void 0);l([g.cast("uv")],f.prototype,"castUv",null);l([g.property({json:{write:a}})],f.prototype,"normal",void 0);l([g.cast("normal")],f.prototype,"castNormal",null);l([g.property({json:{write:a}})],f.prototype,"tangent",void 0);l([g.cast("tangent")],f.prototype,"castTangent",null);return f=m=l([g.subclass("esri.geometry.support.MeshVertexAttributes")],f)}(g.declared(k));c.MeshVertexAttributes=p;c.castArray=b;c.default=p})},"esri/geometry/support/meshUtils/projection":function(){define("require exports ../../../core/Logger ../../../core/libs/gl-matrix-2/mat3 ../../../core/libs/gl-matrix-2/mat3f64 ../../../core/libs/gl-matrix-2/mat4f64 ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../views/3d/support/projectionUtils ../../../views/3d/support/buffer/BufferView".split(" "),
function(p,c,n,l,k,d,h,g,f,b){function a(a,b,d,c,e,g){if(b){var k=d.count;if(e.isWGS84)for(e=0;e<k;e++)c.getVec(e,m),b.getVec(e,q),f.computeLinearTransformation(f.SphericalECEFSpatialReference,m,u,f.SphericalECEFSpatialReference),l.mat3.fromMat4(t,u),1===a&&l.mat3.transpose(t,t),h.vec3.transformMat3(q,q,t),g.setVec(e,q);else for(e=0;e<k;e++){c.getVec(e,m);b.getVec(e,q);f.computeLinearTransformation(f.SphericalECEFSpatialReference,m,u,f.SphericalECEFSpatialReference);l.mat3.fromMat4(t,u);var r=f.webMercator.y2lat(d.get(e,
1)),r=Math.cos(r);0===a&&(r=1/r);t[0]*=r;t[1]*=r;t[2]*=r;t[3]*=r;t[4]*=r;t[5]*=r;1===a&&l.mat3.transpose(t,t);h.vec3.transformMat3(q,q,t);h.vec3.normalize(q,q);g.setVec(e,q)}return g}}Object.defineProperty(c,"__esModule",{value:!0});var e=n.getLogger("esri.geometry.support.meshUtils.normalProjection");c.projectNormalToECEF=function(d,c,f,g,m){if(!g.isWebMercator&&!g.isWGS84)return e.error("Cannot convert PCS spatial reference buffer to ECEF"),m;a(0,new b.BufferViewVec3f(d.buffer,d.byteOffset),new b.BufferViewVec3f64(c.buffer,
c.byteOffset),new b.BufferViewVec3f64(f.buffer,f.byteOffset),g,new b.BufferViewVec3f(m.buffer,m.byteOffset));return m};c.projectNormalFromECEF=function(d,c,f,g,m){if(!g.isWebMercator&&!g.isWGS84)return e.error("Cannot convert to PCS spatial reference buffer from ECEF"),m;a(1,new b.BufferViewVec3f(d.buffer,d.byteOffset),new b.BufferViewVec3f64(c.buffer,c.byteOffset),new b.BufferViewVec3f64(f.buffer,f.byteOffset),g,new b.BufferViewVec3f(m.buffer,m.byteOffset));return m};c.projectToECEF=function(a,b,
d){f.bufferToBuffer(a,b,0,d,f.SphericalECEFSpatialReference,0,a.length/3);return d};c.projectFromECEF=function(a,b,d){f.bufferToBuffer(a,f.SphericalECEFSpatialReference,0,b,d,0,a.length/3);return b};c.transformBufferInPlace=function(a,b,d){void 0===d&&(d=!1);if(a)for(var c=0;c<a.length;c+=3){for(var e=0;3>e;e++)m[e]=a[c+e];h.vec3.transformMat4(m,m,b);d&&h.vec3.normalize(m,m);for(e=0;3>e;e++)a[c+e]=m[e]}};c.projectTangentToECEF=function(d,c,f,g,m){if(!g.isWebMercator&&!g.isWGS84)return e.error("Cannot convert PCS spatial reference buffer to ECEF"),
m;a(0,new b.BufferViewVec3f(d.buffer,d.byteOffset,16),new b.BufferViewVec3f64(c.buffer,c.byteOffset),new b.BufferViewVec3f64(f.buffer,f.byteOffset),g,new b.BufferViewVec3f(m.buffer,m.byteOffset,16));for(c=3;c<d.length;c+=4)m[c]=d[c];return m};c.projectTangentFromECEF=function(d,c,f,g,m){if(!g.isWebMercator&&!g.isWGS84)return e.error("Cannot convert to PCS spatial reference buffer from ECEF"),m;a(1,new b.BufferViewVec3f(d.buffer,d.byteOffset,16),new b.BufferViewVec3f64(c.buffer,c.byteOffset),new b.BufferViewVec3f64(f.buffer,
f.byteOffset),g,new b.BufferViewVec3f(m.buffer,m.byteOffset,16));for(c=3;c<d.length;c+=4)m[c]=d[c];return m};var m=g.vec3f64.create(),q=g.vec3f64.create(),u=d.mat4f64.create(),t=k.mat3f64.create()})},"esri/views/3d/layers/support/symbolColorUtils":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});c.encodeSymbolColor=function(d,c,f,b){void 0===b&&(b=0);null==d||"ignore"===c?(f[b+0]=255,f[b+1]=255,f[b+2]=255,f[b+3]=255):(f[b+0]=Math.floor(255*d[0]),
f[b+1]=Math.floor(255*d[1]),f[b+2]=Math.floor(255*d[2]),d=Math.floor(d[3]*n),f[b+3]=0===d?0:"tint"===c?d:"replace"===c?d+l:d+k)};c.decodeSymbolColor=function(d,c){void 0===c&&(c=0);var f=0,b="multiply",a=d[c+3];a>k?f=(a-k)/n:a>l?(f=(a-l)/n,b="replace"):0<a&&(f=a/n,b="tint");return{color:[d[c+0]/255,d[c+1]/255,d[c+2]/255,f],colorMixMode:b}};c.isOpaqueSymbolColor=function(c,g){void 0===g&&(g=0);c=c[g+3];return c===l||c===k||c===d};var n=85,l=n,k=2*n,d=3*n})},"esri/views/3d/webgl-engine/materials/NativeLineMaterial":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/Logger ../../../../core/screenUtils ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../support/geometryUtils ../../support/buffer/InterleavedLayout ../lib/ComponentUtils ../lib/GLMaterial ../lib/Material ../lib/Util ./internal/bufferWriters ./internal/MaterialUtil ./renderers/MergedRenderer ../shaders/NativeLinePrograms ../../../webgl/renderState".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w){var v=l.getLogger("esri.views.3d.webgl-engine.materials.NativeLineMaterial");p=function(b){function c(a,d){d=b.call(this,d)||this;d.params=t.copyParameters(a,A);return d}n(c,b);c.prototype.setParameterValues=function(a){var b=this.params,d;for(d in a)b[d]=a[d];this.notifyDirty("matChanged")};c.prototype.getParameters=function(){return this.params};c.prototype.getColor=function(){return this.params.color};c.prototype.intersect=function(a,b,d,c,e,f,g,
m,h){h?this.intersectLineGeometry(a,b,d,c,e,f,g):t.intersectDrapedRenderLineGeometry(a,b,d,c,e,f,1,g)};c.prototype.intersectLineGeometry=function(b,c,e,g,m,k,l,r){if(g.enable.selectionMode&&!a.isAllHidden(c.componentVisibilities,b.componentOffsets))if(q.isTranslationMatrix(e)){c=b.data.getVertexAttr().position.data;m=g.camera;k=O;d.vec2.copy(k,g.point);h.vec3.set(V[0],k[0]-2,k[1]+2,0);h.vec3.set(V[1],k[0]+2,k[1]+2,0);h.vec3.set(V[2],k[0]+2,k[1]-2,0);h.vec3.set(V[3],k[0]-2,k[1]-2,0);for(r=0;4>r;r++)m.unprojectPoint(V[r],
Q[r]);f.plane.fromPoints(m.eye,Q[0],Q[1],J);f.plane.fromPoints(m.eye,Q[1],Q[2],P);f.plane.fromPoints(m.eye,Q[2],Q[3],L);f.plane.fromPoints(m.eye,Q[3],Q[0],F);b=Number.MAX_VALUE;for(r=0;r<c.length-5;r+=3)if(C[0]=c[r]+e[12],C[1]=c[r+1]+e[13],C[2]=c[r+2]+e[14],E[0]=c[r+3]+e[12],E[1]=c[r+4]+e[13],E[2]=c[r+5]+e[14],!(0>f.plane.signedDistance(J,C)&&0>f.plane.signedDistance(J,E)||0>f.plane.signedDistance(P,C)&&0>f.plane.signedDistance(P,E)||0>f.plane.signedDistance(L,C)&&0>f.plane.signedDistance(L,E)||0>
f.plane.signedDistance(F,C)&&0>f.plane.signedDistance(F,E))){m.projectPoint(C,I);m.projectPoint(E,K);if(0>I[2]&&0<K[2]){h.vec3.subtract(H,C,E);var n=m.frustum,t=-f.plane.signedDistance(n.planes[4],C),n=t/h.vec3.dot(H,n.planes[4]);h.vec3.scale(H,H,n);h.vec3.add(C,C,H);m.projectPoint(C,I)}else if(0<I[2]&&0>K[2])h.vec3.subtract(H,E,C),n=m.frustum,t=-f.plane.signedDistance(n.planes[4],E),n=t/h.vec3.dot(H,n.planes[4]),h.vec3.scale(H,H,n),h.vec3.add(E,E,H),m.projectPoint(E,K);else if(0>I[2]&&0>K[2])continue;
I[2]=0;K[2]=0;n=f.lineSegment.distance2(f.lineSegment.fromPoints(I,K,N),k);n<b&&(b=n,h.vec3.copy(M,C),h.vec3.copy(T,E))}e=g.rayBeginPoint;g=g.rayEndPoint;4>b&&(b=Number.MAX_VALUE,f.lineSegment.closestLineSegmentPoint(f.lineSegment.fromPoints(M,T,N),f.lineSegment.fromPoints(e,g,S),G)&&(h.vec3.subtract(G,G,e),b=h.vec3.length(G),h.vec3.scale(G,G,1/b),b/=h.vec3.distance(e,g)),l(b,G))}else v.error("intersection assumes a translation-only matrix")};c.prototype.createBufferWriter=function(){return new D(this.params)};
c.prototype.createRenderer=function(a,b){return new r(a,b,this)};c.prototype.getGLMaterials=function(){return{color:y,depthShadowMap:void 0,normal:void 0,depth:void 0,highlight:z}};return c}(m);var y=function(a){function b(b,d,c){b=a.call(this,b,d)||this;b.updateParameters();return b}n(b,a);b.prototype.updateParameters=function(){this.params=t.copyParameters(this.material.getParameters());this.selectProgram()};b.prototype.selectProgram=function(){var a=this.params;this.program=this.programRep.getProgram(x.colorPass,
{slice:a.slicePlaneEnabled,vertexColors:this.params.vertexColors});this.pipelineState=w.makePipelineState({blending:1>a.color[3]&&w.separateBlendingParams(770,1,771,771),depthTest:{func:513},depthWrite:w.defaultDepthWriteParams,colorWrite:w.defaultColorWriteParams})};b.prototype.beginSlot=function(a){return 5===a};b.prototype.getProgram=function(){return this.program};b.prototype.bind=function(a,b){b=this.program;var d=this.params;a.bindProgram(b);a.setPipelineState(this.pipelineState);b.setUniform4fv("constantColor",
d.color)};b.prototype.release=function(a){};b.prototype.bindView=function(a,b){a=this.program;var d=this.params;t.bindView(b.origin,b.view,a);d.slicePlaneEnabled&&t.bindSlicePlane(b.origin,b.slicePlane,a)};b.prototype.bindInstance=function(a,b){this.program.setUniformMatrix4fv("model",b.transformation)};b.prototype.getDrawMode=function(){return 1};return b}(e),z=function(a){function b(b,d,c){b=a.call(this,b,d)||this;b.updateParameters();return b}n(b,a);b.prototype.updateParameters=function(){this.params=
t.copyParameters(this.material.getParameters());this.selectProgram()};b.prototype.beginSlot=function(a){return 5===a};b.prototype.getProgram=function(){return this.program};b.prototype.selectProgram=function(){this.program=this.programRep.getProgram(x.highlightPass,{slice:this.params.slicePlaneEnabled,vertexColors:this.params.vertexColors});this.pipelineState=w.makePipelineState({depthTest:{func:513},colorWrite:w.defaultColorWriteParams})};b.prototype.bind=function(a,b){a.bindProgram(this.program);
a.setPipelineState(this.pipelineState);t.bindHighlightRendering(a,b,this.program)};b.prototype.release=function(a){};b.prototype.bindView=function(a,b){a=this.program;var d=this.params;t.bindView(b.origin,b.view,a);d.slicePlaneEnabled&&t.bindSlicePlane(b.origin,b.slicePlane,a)};b.prototype.bindInstance=function(a,b){this.program.setUniformMatrix4fv("model",b.transformation)};b.prototype.getDrawMode=function(){return 1};return b}(e),A={color:[1,1,1,1],vertexColors:!1,slicePlaneEnabled:!1},B=b.newLayout().vec3f(q.VertexAttrConstants.POSITION),
D=function(){function a(a){this.vertexBufferLayout=b.newLayout().vec3f(q.VertexAttrConstants.POSITION);a.vertexColors&&(this.vertexBufferLayout=B.vec4u8(q.VertexAttrConstants.COLOR))}a.prototype.allocate=function(a){return this.vertexBufferLayout.createBuffer(a)};a.prototype.elementCount=function(a){return a.indices[q.VertexAttrConstants.POSITION].length};a.prototype.write=function(a,b,d,c){u.writeDefaultAttributes(b,this.vertexBufferLayout,a.transformation,a.invTranspTransformation,d,c)};return a}(),
C=g.vec3f64.create(),E=g.vec3f64.create(),H=g.vec3f64.create(),G=g.vec3f64.create(),I=k.createRenderScreenPointArray3(),K=k.createRenderScreenPointArray3(),M=g.vec3f64.create(),T=g.vec3f64.create(),N=f.lineSegment.create(),S=f.lineSegment.create(),O=g.vec3f64.create(),V=[k.createRenderScreenPointArray3(),k.createRenderScreenPointArray3(),k.createRenderScreenPointArray3(),k.createRenderScreenPointArray3()],Q=[g.vec3f64.create(),g.vec3f64.create(),g.vec3f64.create(),g.vec3f64.create()],J=f.plane.create(),
P=f.plane.create(),L=f.plane.create(),F=f.plane.create();return p})},"esri/views/3d/webgl-engine/shaders/NativeLinePrograms":function(){define(["require","exports","../lib/DefaultVertexAttributeLocations","./sources/resolver","../../../webgl/programUtils"],function(p,c,n,l,k){Object.defineProperty(c,"__esModule",{value:!0});var d=function(d){return k.glslifyDefineMap({SLICE:d.slice,VERTEXCOLORS:d.vertexColors})};c.colorPass={name:"native-line-color",shaders:function(c){return{vertexShader:d(c)+l.resolveIncludes("materials/nativeLine/nativeLine.vert"),
fragmentShader:d(c)+l.resolveIncludes("materials/nativeLine/colorPass.frag")}},attributes:n.Default3D};c.highlightPass={name:"native-line-highlight",shaders:function(c){return{vertexShader:d(c)+l.resolveIncludes("materials/nativeLine/nativeLine.vert"),fragmentShader:d(c)+l.resolveIncludes("materials/nativeLine/highlightPass.frag")}},attributes:n.Default3D}})},"esri/views/3d/layers/graphics/Graphics3DObjectSymbolLayer":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../Color ../../../../core/lang ../../../../core/maybe ../../../../core/screenUtils ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4f64 ../../../../geometry/support/aaBoundingBox ../../../../symbols/support/ObjectSymbol3DLayerResource ./ElevationAligners ./Graphics3DLodInstanceGraphicLayer ./Graphics3DSymbolCommonCode ./Graphics3DSymbolLayer ./graphicUtils ./lodResourceUtils ./objectResourceUtils ./primitiveObjectSymbolUtils ./symbolComplexity ../support/FastSymbolUpdates ../../support/projectionUtils ../../webgl-engine/Stage ../../webgl-engine/lib/Util ../../webgl-engine/lib/lodRendering/LodRenderer ../../webgl-engine/lib/lodRendering/LodResources ../../webgl-engine/materials/DefaultMaterial".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z,A,B,D,C,E,H,G,I,K,M){Object.defineProperty(c,"__esModule",{value:!0});p=function(a){function c(b,d,c,e){b=a.call(this,b,d,c,e)||this;b._optionalFields=[];b._instanceIndexToGraphicUid=new Map;return b}n(c,a);c.prototype.getCachedSize=function(){var a=this._symbolSize;return{width:a[0],depth:a[1],height:a[2]}};c.prototype.doLoad=function(a){return k(this,void 0,void 0,function(){var b,d,c,e;return l(this,function(f){switch(f.label){case 0:b=this._getStageIdHint();
if(!this._isPropertyDriven("size")&&(d=y.validateSymbolLayerSize(this.symbolLayer)))throw Error();c=this.symbolLayer;return this.isByResource?[4,this._prepareModelResources(c.resource.href,a)]:[3,2];case 1:return f.sent(),[3,4];case 2:return e=c.resource?c.resource.primitive:t.defaultPrimitive,[4,this._preparePrimitiveResources(e,b)];case 3:f.sent(),f.label=4;case 4:return[2]}})})};Object.defineProperty(c.prototype,"isByResource",{get:function(){return!(!this.symbolLayer.resource||!this.symbolLayer.resource.href)},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"lodRenderer",{get:function(){return this._lodRenderer},enumerable:!0,configurable:!0});c.prototype._preparePrimitiveResources=function(a,b){return k(this,void 0,void 0,function(){var c,e,k,r,n,t,p,v,w,x,z,A;return l(this,function(l){if(!B.isValidPrimitive(a))throw Error("Unknown object symbol primitive: "+a);c=this.symbolLayer;this._resourceBoundingBox=u.create(B.primitiveBoundingBox(a));this._resourceSize=m.vec3f64.fromArray(u.size(this._resourceBoundingBox));
this._symbolSize=m.vec3f64.fromArray(y.computeSizeWithResourceSize(this._resourceSize,c));e=g.get(this.symbolLayer,"material","color");k=this._getCombinedOpacity(e);r={specular:[0,0,0],opacity:k,transparent:1>k||this._isPropertyDriven("opacity"),instanced:["transformation"],ambient:m.vec3f64.ONES,diffuse:m.vec3f64.ONES,slicePlaneEnabled:this._context.slicePlaneEnabled,sliceHighlightDisabled:!0,castShadows:this.symbolLayer.castShadows};n=this.symbol;"point-3d"===n.type&&n.verticalOffset&&(t=n.verticalOffset,
p=t.screenLength,v=t.minWorldLength,w=t.maxWorldLength,r.verticalOffset={screenLength:f.pt2px(p),minWorldLength:v||0,maxWorldLength:null!=w?w:Infinity},r.castShadows=!1);this._context.screenSizePerspectiveEnabled&&(r.screenSizePerspective=this._context.sharedResources.screenSizePerspectiveSettings);this._isPropertyDriven("color")?r.externalColor=q.vec4f64.ONES:(x=g.isSome(c.material)&&c.material.color,z=g.isSome(x)?d.toUnitRGBA(x):q.vec4f64.ONES,r.externalColor=z);this._fastUpdates=C.initFastSymbolUpdatesState(this._context.renderer,
this._fastVisualVariableConvertOptions());this._fastUpdates.enabled?(h.mixin(r,this._fastUpdates.materialParameters),r.instanced.push("featureAttribute"),this._optionalFields.push("featureAttribute")):this._hasPerInstanceColor()&&(r.instanced.push("color"),this._optionalFields.push("color"));A=new M(r,b+"_objectmat");this._lodResources=B.primitiveLodResources(a,A,b);this._originalOpacities=K.materialsFromLodResources(this._lodResources).map(function(){return 1});if(!this._lodResources)throw Error("Unknown object symbol primitive: "+
a);this.finalizeSymbolResources();this.initializeLodRenderer();this.complexity=this.computeComplexity();return[2]})})};c.prototype._prepareModelResources=function(a,b){return k(this,void 0,void 0,function(){var d,c,e,k,q,r,n,t,p,v,w,x,B,D,L,M,G,P=this;return l(this,function(l){switch(l.label){case 0:return d=["transformation"],c={instanced:d,slicePlaneEnabled:this._context.slicePlaneEnabled,castShadows:this.symbolLayer.castShadows},e={materialParamsMixin:c,streamDataRequester:this._context.streamDataRequester},
this._fastUpdates=C.initFastSymbolUpdatesState(this._context.renderer,this._fastVisualVariableConvertOptions()),this._fastUpdates.enabled?(h.mixin(e.materialParamsMixin,this._fastUpdates.materialParameters),d.push("featureAttribute"),this._optionalFields.push("featureAttribute")):this._hasPerInstanceColor()&&(d.push("color"),this._optionalFields.push("color")),k=this.symbol,"point-3d"===k.type&&k.verticalOffset&&(q=k.verticalOffset,r=q.screenLength,n=q.minWorldLength,t=q.maxWorldLength,e.materialParamsMixin.verticalOffset=
{screenLength:f.pt2px(r),minWorldLength:n||0,maxWorldLength:null!=t?t:Infinity},e.materialParamsMixin.castShadows=!1),e.signal=b,[4,A.fetch(a,e)];case 1:return p=l.sent(),v=z.makeLodResources(p.lods),z.fillEstimatedMinScreenSpaceRadius(v),v.levels.sort(function(a,b){return a.minScreenSpaceRadius-b.minScreenSpaceRadius}),v.levels[0].minScreenSpaceRadius=Math.min(2,v.levels[0].minScreenSpaceRadius),this._lodResources=v,w=this._context,x=this.symbolLayer.material,B=this._getExternalColorParameters(x),
D=g.get(this.symbolLayer,"material","color"),L=this._getCombinedOpacity(D,{hasIntrinsicColor:!0}),M=this._isPropertyDriven("opacity"),G=K.materialsFromLodResources(this._lodResources),this._originalOpacities=G.map(function(a){return a.getParameters().opacity||1}),G.forEach(function(a){var b=a.getParameters();a.setParameterValues(B);var d=b.opacity*L;a.setParameterValues({opacity:d,transparent:1>d||M||b.transparent});w.screenSizePerspectiveEnabled&&a.setParameterValues({screenSizePerspective:w.sharedResources.screenSizePerspectiveSettings})}),
this._resourceBoundingBox=p.referenceBoundingBox,this._resourceSize=m.vec3f64.fromArray(u.size(this._resourceBoundingBox)),this._pivotOffset=m.vec3f64.fromArray(this._lodResources.levels[0].pivotOffset),this._symbolSize=m.vec3f64.fromArray(y.computeSizeWithResourceSize(this._resourceSize,this.symbolLayer)),C.updateFastSymbolUpdatesState(this._fastUpdates,this._context.renderer,this._fastVisualVariableConvertOptions())&&G.forEach(function(a){return a.setParameterValues(P._fastUpdates.materialParameters)}),
this.finalizeSymbolResources(),this.initializeLodRenderer(),this.complexity=this.computeComplexity(),[2]}})})};c.prototype.finalizeSymbolResources=function(){var a=this._context.stage;this._materials=K.materialsFromLodResources(this._lodResources);this._materials.forEach(function(b){a.add(H.ModelContentType.MATERIAL,b)});this._textures=K.texturesFromLodResources(this._lodResources);this._textures.forEach(function(b){a.add(H.ModelContentType.TEXTURE,b)});this._geometries=K.geometriesFromLodResources(this._lodResources);
this._geometries.forEach(function(b){a.add(H.ModelContentType.GEOMETRY,b)})};c.prototype.initializeLodRenderer=function(){var a=this,d=this._context.stage;this._lodRenderer=new I.LodRenderer(this._lodResources,this._optionalFields,{layerUid:this._context.layer.uid,graphicUid:function(b){return a._instanceIndexToGraphicUid.get(b)}},this._fastUpdates.enabled?{applyTransform:function(d,c,e){d.getFeatureAttribute(c,O);b.mat4.copy(e,C.evaluateModelTransform(a._fastUpdates.materialParameters,O,e))},scaleFactor:function(b,
d,c){d.getFeatureAttribute(c,O);return C.evaluateModelTransformScale(b,a._fastUpdates.materialParameters,O)}}:null);this._lodRenderer.slicePlaneEnabled=this._context.slicePlaneEnabled;d.addRenderPlugin(this._lodRenderer.slots,this._lodRenderer)};c.prototype._getExternalColorParameters=function(a){var b={};this._isPropertyDriven("color")?b.externalColor=q.vec4f64.ONES:g.isSome(a)&&g.isSome(a.color)?b.externalColor=d.toUnitRGBA(a.color):(b.externalColor=q.vec4f64.ONES,b.colorMixMode="ignore");return b};
c.prototype.destroy=function(){a.prototype.destroy.call(this);var b=this._context.stage;this._lodRenderer&&(b.removeRenderPlugin(this._lodRenderer),this._lodRenderer.destroy());this._materials&&this._materials.forEach(function(a){return b.remove(H.ModelContentType.MATERIAL,a.id)});this._textures&&this._textures.forEach(function(a){return b.remove(H.ModelContentType.TEXTURE,a.id)});this._geometries&&this._geometries.forEach(function(a){return b.remove(H.ModelContentType.GEOMETRY,a.id)})};c.prototype.createGraphics3DGraphic=
function(a){var b=a.graphic;if(!this._validateGeometry(b.geometry))return null;var d=w.placePointOnGeometry(b.geometry);if(g.isNone(d))return this.logger.warn("unsupported geometry type for icon symbol: "+b.geometry.type),null;var c=this.getGraphicElevationContext(b);return this._createAs3DShape(b,d,a.renderingInfo,c,b.uid)};c.prototype.notifyDestroyGraphicLayer=function(a){this._instanceIndexToGraphicUid.delete(a.instanceIndex)};c.prototype.graphicLayerToGraphicId=function(a){return 0};c.prototype.layerOpacityChanged=
function(){var a=this,b=this._isPropertyDriven("opacity"),d=this.isByResource;this._materials.forEach(function(c,e){var f=g.get(a.symbolLayer,"material","color");e=a._getCombinedOpacity(f,{hasIntrinsicColor:d})*a._originalOpacities[e];c.setParameterValues({opacity:e,transparent:1>e||b})});return!0};c.prototype.layerElevationInfoChanged=function(a,b){return this.updateGraphics3DGraphicElevationInfo(a,b,w.needsElevationUpdates3D)};c.prototype.slicePlaneEnabledChanged=function(a,b){var d=this;this._lodRenderer.slicePlaneEnabled=
this._context.slicePlaneEnabled;this._materials.forEach(function(a){a.setParameterValues({slicePlaneEnabled:d._context.slicePlaneEnabled})});return!0};c.prototype.pixelRatioChanged=function(a,b){return!0};c.prototype.applyRendererDiff=function(a,b){var d=this,c;for(c in a.diff)switch(c){case "visualVariables":if(C.updateFastSymbolUpdatesState(this._fastUpdates,b,this._fastVisualVariableConvertOptions()))this._materials.forEach(function(a){return a.setParameterValues(d._fastUpdates.materialParameters)}),
this._lodRenderer.notifyShaderTransformationChanged();else return!1;break;default:return!1}return!0};c.prototype.computeComplexity=function(){if(!this._lodResources)return a.prototype.computeComplexity.call(this);var b=K.geometriesFromLodLevelResources(this._lodResources.levels[0]).reduce(function(a,b){return a+b.data.getIndices(G.VertexAttrConstants.POSITION).length},0)/3,d=D.defaultSymbolLayerMemoryComplexity(this.symbol,this.symbolLayer);return{primitivesPerFeature:b,primitivesPerCoordinate:0,
estimated:!1,memory:d}};c.prototype._createAs3DShape=function(a,b,d,c,e){a=this.getFastUpdateAttrValues(a);var f=!this._fastUpdates.enabled&&this._hasPerInstanceColor()?y.mixinColorAndOpacity(d.color,d.opacity):null,g=this._context.clippingExtent;E.pointToVector(b,T,this._context.elevationProvider.spatialReference);if(g&&!w.pointInBox2D(T,g))return null;var g=this._requiresTerrainElevation(c),m=this._computeGlobalTransform(b,c,S,g?V:null);d=this._computeLocalTransform(this.symbolLayer,d,N);var h=
this._lodRenderer.instanceData,k=h.addInstance();this._instanceIndexToGraphicUid.set(k,e);h.setLocalTransform(k,d,!1);h.setGlobalTransform(k,m);a&&h.setFeatureAttribute(k,a);f&&h.setColor(k,f);e=new x(this,k,r.perLodInstanceElevationAligner,c);g&&(e.alignedTerrainElevation=V.terrainElevation);e.needsElevationUpdates=w.needsElevationUpdates3D(c.mode);w.extendPointGraphicElevationContext(e,b,this._context.elevationProvider);return e};c.prototype._computeGlobalTransform=function(a,b,d,c){b=w.computeElevation(this._context.elevationProvider,
a,b,this._context.renderCoordsHelper,c);T[0]=a.x;T[1]=a.y;T[2]=b;E.computeLinearTransformation(a.spatialReference,T,d,this._context.renderSpatialReference);return d};c.prototype._computeLocalTransform=function(a,d,c){b.mat4.identity(c);this._applyObjectRotation(d,!1,c);this._applyObjectRotation(a,!0,c);this._applyObjectScale(d,c);this._applyAnchor(a,c);return c};c.prototype._applyObjectScale=function(a,d){this._fastUpdates.enabled&&this._fastUpdates.requiresShaderTransformation||(a=this._isPropertyDriven("size")&&
a.size?a.size:this._symbolSize,a=y.computeObjectScale(a,this._symbolSize,this._resourceSize,this._context.renderCoordsHelper.unitInMeters),1===a[0]&&1===a[1]&&1===a[2]||b.mat4.scale(d,d,a))};c.prototype.prepareSymbolLayerPatch=function(a){if("partial"===a.diff.type){var b=a.diff.diff;this._preparePatchTransform(a,b);this._preparePatchColor(a,b)}};c.prototype.updateGeometry=function(a,b){var d=b&&w.placePointOnGeometry(b);if(g.isNone(d))return!1;b=this.getGeometryElevationMode(b);if(a.elevationContext.mode!==
b)return!1;b=this._requiresTerrainElevation(a.elevationContext);this._computeGlobalTransform(d,a.elevationContext,S,b?V:null);b&&(a.alignedTerrainElevation=V.terrainElevation);this._lodRenderer.instanceData.setGlobalTransform(a.instanceIndex,S,!0);w.extendPointGraphicElevationContext(a,d,this._context.elevationProvider);return!0};c.prototype._preparePatchTransform=function(a,b){var d=this;if(b.heading||b.tilt||b.roll||b.width||b.height||b.depth||b.anchor||b.anchorPosition){var c=function(a,b,d){return(null!=
a&&"complete"===a.type?a.newValue:b)||d},e=c(b.heading,this.symbolLayer.heading,0),f=c(b.tilt,this.symbolLayer.tilt,0),g=c(b.roll,this.symbolLayer.roll,0),h=c(b.width,this.symbolLayer.width,void 0),k=c(b.height,this.symbolLayer.height,void 0),l=c(b.depth,this.symbolLayer.depth,void 0),q=c(b.anchor,this.symbolLayer.anchor,void 0),c=c(b.anchorPosition,this.symbolLayer.anchorPosition,void 0);delete b.heading;delete b.tilt;delete b.roll;delete b.width;delete b.height;delete b.depth;delete b.anchor;delete b.anchorPosition;
var r={heading:e,tilt:f,roll:g,anchor:q,anchorPosition:c};1===this.loadStatus&&a.symbolLayerStatePatches.push(function(){d._symbolSize=m.vec3f64.fromArray(y.computeSizeWithResourceSize(d._resourceSize,{width:h,height:k,depth:l,isPrimitive:d.symbolLayer.isPrimitive}))});a.graphics3DGraphicPatches.push(function(a,b){b=d._computeLocalTransform(r,b,N);d._lodRenderer.instanceData.setLocalTransform(a.instanceIndex,b,!0)})}};c.prototype._preparePatchColor=function(a,b){var c=this;if(b.material&&"partial"===
b.material.type&&(b=b.material.diff,b.color&&"complete"===b.color.type)){var e=b.color.newValue,f=g.isSome(e)?d.toUnitRGBA(e):q.vec4f64.ONES;delete b.color;a.graphics3DGraphicPatches.push(function(a,b){if(c._hasPerInstanceColor())c._lodRenderer.instanceData.setColor(a.instanceIndex,f);else for(a=0,b=c._materials;a<b.length;a++)b[a].setParameterValues({externalColor:f})})}};c.prototype._requiresTerrainElevation=function(a){return"absolute-height"!==a.mode};c.prototype._applyObjectRotation=function(a,
b,d){if(!(this._fastUpdates.enabled&&this._fastUpdates.requiresShaderTransformation&&b))return y.computeObjectRotation(a.heading,a.tilt,a.roll,d)};c.prototype._computeAnchor=function(a){var b=m.vec3f64.create();switch(a.anchor){case "center":e.vec3.copy(b,u.center(this._resourceBoundingBox));e.vec3.negate(b,b);break;case "top":var d=u.center(this._resourceBoundingBox);e.vec3.set(b,-d[0],-d[1],-this._resourceBoundingBox[5]);break;case "bottom":d=u.center(this._resourceBoundingBox);e.vec3.set(b,-d[0],
-d[1],-this._resourceBoundingBox[2]);break;case "relative":var d=u.center(this._resourceBoundingBox),c=u.size(this._resourceBoundingBox);a=(a=a.anchorPosition)?m.vec3f64.fromValues(a.x,a.y,a.z):m.vec3f64.ZEROS;e.vec3.multiply(b,c,a);e.vec3.add(b,b,d);e.vec3.negate(b,b);break;default:this._pivotOffset?e.vec3.negate(b,this._pivotOffset):e.vec3.copy(b,m.vec3f64.ZEROS)}return b};c.prototype._applyAnchor=function(a,d){this._fastUpdates.enabled&&this._fastUpdates.requiresShaderTransformation||(a=this._computeAnchor(a))&&
b.mat4.translate(d,d,a)};c.prototype._hasPerInstanceColor=function(){return this._isPropertyDriven("color")||this._isPropertyDriven("opacity")};c.prototype._fastVisualVariableConvertOptions=function(){var a=this._resourceBoundingBox?m.vec3f64.fromArray(u.size(this._resourceBoundingBox)):m.vec3f64.ONES,b=this._resourceBoundingBox?this._computeAnchor(this.symbolLayer):m.vec3f64.ZEROS,d=this._context.renderCoordsHelper.unitInMeters,c=y.computeObjectScale(this._symbolSize,this._symbolSize,this._resourceSize,
d),e=m.vec3f64.fromValues(this.symbolLayer.tilt||0,this.symbolLayer.roll||0,this.symbolLayer.heading||0);return{modelSize:a,symbolSize:this._symbolSize||m.vec3f64.ONES,unitInMeters:d,transformation:{anchor:b,scale:c,rotation:e}}};return c}(v.default);c.Graphics3DObjectSymbolLayer=p;var T=m.vec3f64.create(),N=a.mat4f64.create(),S=a.mat4f64.create(),O=q.vec4f64.create(),V={verticalDistanceToGround:0,terrainElevation:0};c.default=p})},"esri/views/3d/layers/graphics/Graphics3DLodInstanceGraphicLayer":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/support/aaBoundingBox ./featureExpressionInfoUtils ./Graphics3DGraphicElevationContext ./graphicUtils ../../webgl-engine/lib/HighlightUtils".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m){p=function(){function d(b,d,c,e){this.type="lod-instance";this.alignedTerrainElevation=0;this.needsElevationUpdates=!1;this.graphics3DSymbolLayer=b;this.instanceIndex=d;this.elevationAligner=c;this.elevationContext=new a(e)}d.prototype.initialize=function(a,b){};d.prototype.setVisibility=function(a){var b=this.lodRenderer.instanceData;return a!==b.getVisible(this.instanceIndex)?(b.setVisible(this.instanceIndex,a),!0):!1};d.prototype.destroy=function(){null!=this.instanceIndex&&
(this.lodRenderer.instanceData.removeInstance(this.instanceIndex),this.graphics3DSymbolLayer.notifyDestroyGraphicLayer(this))};d.prototype.alignWithElevation=function(a,d,c){this.elevationAligner&&(b.setContextFeature(this.elevationContext.featureExpressionInfoContext,c),a=this.elevationAligner(this,this.elevationContext,a,d),null!=a&&(this.alignedTerrainElevation=a))};d.prototype.getBSRadius=function(){var a=this.lodRenderer;return a.baseBoundingSphere.radius*a.instanceData.getCombinedMaxScaleFactor(this.instanceIndex)};
d.prototype.getCenterObjectSpace=function(a){void 0===a&&(a=g.vec3f64.create());this.lodRenderer.instanceData.getCombinedLocalTransform(this.instanceIndex,x);return h.vec3.transformMat4(a,this.lodRenderer.baseBoundingSphere.center,x)};d.prototype.getBoundingBoxObjectSpace=function(a){void 0===a&&(a=f.create());this.lodRenderer.instanceData.getCombinedLocalTransform(this.instanceIndex,x);var b=this.lodRenderer.baseBoundingBox;f.empty(a);for(var d=0;8>d;++d)h.vec3.set(u,0===(d&1)?b[0]:b[3],0===(d&2)?
b[1]:b[4],0===(d&4)?b[2]:b[5]),h.vec3.transformMat4(u,u,x),f.expandPointInPlace(a,u);return a};d.prototype.getProjectedBoundingBox=function(a,b,d,c,g){return k(this,void 0,void 0,function(){var m,k,n,p,v,w,y,z,A;return l(this,function(l){switch(l.label){case 0:m=this.getBoundingBoxObjectSpace(g);k=r;n=f.isPoint(m)?1:k.length;this.lodRenderer.instanceData.getGlobalTransform(this.instanceIndex,x);for(p=0;p<n;p++)v=k[p],u[0]=m[v[0]],u[1]=m[v[1]],u[2]=m[v[2]],h.vec3.transformMat4(u,u,x),q[3*p+0]=u[0],
q[3*p+1]=u[1],q[3*p+2]=u[2];if(!a(q,0,n))return[2,null];f.empty(m);w=null;this.calculateRelativeScreenBounds&&(w=this.calculateRelativeScreenBounds());for(p=0;p<3*n;p+=3){for(y=0;3>y;y++)m[y]=Math.min(m[y],q[p+y]),m[y+3]=Math.max(m[y+3],q[p+y]);w&&d.push({location:q.slice(p,p+3),screenSpaceBoundingRect:w})}if(!b)return[3,5];f.center(m,t);if("absolute-height"===this.elevationContext.mode)return[3,5];z=void 0;A=e.demResolutionForBoundingBox(m,b);l.label=1;case 1:return l.trys.push([1,3,,4]),[4,b.service.queryElevation(t[0],
t[1],c,A)];case 2:return z=l.sent(),[3,4];case 3:return l.sent(),z=null,[3,4];case 4:null!=z&&f.offset(m,0,0,-this.alignedTerrainElevation+z),l.label=5;case 5:return[2,m]}})})};d.prototype.addHighlight=function(a,b){var d=this;b=m.generateHighlightId();this.addHighlightId(b);a.addExternal(function(a){d.removeHighlightId(a)},b)};d.prototype.removeHighlight=function(a){this.highlights&&this.highlights.forEach(function(b){return a.remove(b)})};d.prototype.addHighlightId=function(a){this.highlights=this.highlights||
new Set;this.highlights.add(a);this.lodRenderer.instanceData.setHighlight(this.instanceIndex,!0)};d.prototype.removeHighlightId=function(a){this.highlights&&(this.highlights.delete(a),this.lodRenderer.instanceData.setHighlight(this.instanceIndex,0<this.highlights.size),0===this.highlights.size&&(this.highlights=null))};Object.defineProperty(d.prototype,"lodRenderer",{get:function(){return this.graphics3DSymbolLayer.lodRenderer},enumerable:!0,configurable:!0});return d}();var q=[0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],u=g.vec3f64.create(),t=g.vec3f64.create(),r=[[0,1,2],[3,1,2],[0,4,2],[3,4,2],[0,1,5],[3,1,5],[0,4,5],[3,4,5]],x=d.mat4f64.create();return p})},"esri/views/3d/layers/graphics/lodResourceUtils":function(){define(["require","exports","../../../../core/tsSupport/generatorHelper","../../../../core/tsSupport/awaiterHelper","../../webgl-engine/lib/lodRendering/LodResources"],function(p,c,n,l,k){function d(d){var b=[];d.stageResources.geometries.forEach(function(a,c){b.push({material:d.stageResources.materials[c],
geometry:a,textures:d.stageResources.textures})});return{components:b,minScreenSpaceRadius:d.lodThreshold,pivotOffset:d.pivotOffset}}function h(d,b){void 0===b&&(b=g);d=k.computeFaceCount(d);return Math.sqrt(d/(b*Math.PI))}Object.defineProperty(c,"__esModule",{value:!0});c.makeLodLevelResources=d;c.makeLodResources=function(c){return{levels:c.map(function(b){return d(b)})}};c.estimateMinScreenSpaceRadius=h;c.fillEstimatedMinScreenSpaceRadius=function(d){d.levels.forEach(function(b){b.minScreenSpaceRadius||
(b.minScreenSpaceRadius=h(b))})};var g=.05})},"esri/views/3d/layers/graphics/objectResourceUtils":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/tsSupport/assignHelper ../../../../core/mathUtils ../../../../core/maybe ../../../../core/string ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/support/aaBoundingBox ../../glTF/DefaultLoadingContext ../../glTF/esriProvidedModelParameters ../../glTF/loader ../../glTF/internal/indexUtils ./wosrLoader ../../support/buffer/BufferView ../../support/buffer/math ../../support/buffer/utils ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/GeometryData ../../webgl-engine/lib/Texture ../../webgl-engine/materials/DefaultMaterial".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z,A,B,D,C){function E(a){var b=a.match(/(.*\.(gltf|glb))(\?lod=([0-9]+))?$/);return b?{fileType:"gltf",url:b[1],specifiedLodIndex:null!=b[4]?Number(b[4]):null}:a.match(/(.*\.(json|json\.gz))$/)?{fileType:"wosr",url:a,specifiedLodIndex:null}:{fileType:"unknown",url:a,specifiedLodIndex:null}}function H(c,e,f){var m=c.model,h=a.mat4f64.create(),k=[],l=new Map,r=new Map;m.lods.forEach(function(a,n){if(void 0===f||n===f){var t=0,u={stageResources:{textures:[],
materials:[],geometries:[]},lodThreshold:g.isSome(a.lodThreshold)?a.lodThreshold:null,pivotOffset:[0,0,0],numberOfVertices:0,boundingBox:q.empty()};k.push(u);a.parts.forEach(function(f){var k=f.material+(f.attributes.normal?"_normal":"")+(f.attributes.color?"_color":"")+(f.attributes.texCoord0?"_texCoord0":"")+(f.attributes.tangent?"_tangent":""),n=m.materials.get(f.material),p=g.isSome(f.attributes.texCoord0),w=g.isSome(f.attributes.normal);if(!l.has(k)){if(p){if(g.isSome(n.textureColor)&&!r.has(n.textureColor)){var F=
m.textures.get(n.textureColor),L=d({},F.parameters,{preMultiplyAlpha:!0});r.set(n.textureColor,new D(F.data,n.textureColor,L))}g.isSome(n.textureNormal)&&!r.has(n.textureNormal)&&(F=m.textures.get(n.textureNormal),L=d({},F.parameters,{preMultiplyAlpha:!0}),r.set(n.textureNormal,new D(F.data,n.textureNormal,L)));g.isSome(n.textureOcclusion)&&!r.has(n.textureOcclusion)&&(F=m.textures.get(n.textureOcclusion),L=d({},F.parameters,{preMultiplyAlpha:!0}),r.set(n.textureOcclusion,new D(F.data,n.textureOcclusion,
L)));g.isSome(n.textureEmissive)&&!r.has(n.textureEmissive)&&(F=m.textures.get(n.textureEmissive),L=d({},F.parameters,{preMultiplyAlpha:!0}),r.set(n.textureEmissive,new D(F.data,n.textureEmissive,L)));g.isSome(n.textureMetallicRoughness)&&!r.has(n.textureMetallicRoughness)&&(F=m.textures.get(n.textureMetallicRoughness),L=d({},F.parameters,{preMultiplyAlpha:!0}),r.set(n.textureMetallicRoughness,new D(F.data,n.textureMetallicRoughness,L)))}var Z=C.COLOR_GAMMA,F=Math.pow(n.color[0],1/Z),L=Math.pow(n.color[1],
1/Z),M=Math.pow(n.color[2],1/Z),I=Math.pow(n.emissiveFactor[0],1/Z),K=Math.pow(n.emissiveFactor[1],1/Z),Z=Math.pow(n.emissiveFactor[2],1/Z);l.set(k,new C(d({transparent:"BLEND"===n.alphaMode,textureAlphaMode:G(n.alphaMode),textureAlphaCutoff:n.alphaCutoff,diffuse:[F,L,M],ambient:[F,L,M],opacity:n.opacity,doubleSided:n.doubleSided,doubleSidedType:"winding-order",vertexColors:!!f.attributes.color,vertexTangents:!!f.attributes.tangent,normals:w?"default":"screenDerivative",castShadows:!0,receiveSSAO:!0,
textureId:g.isSome(n.textureColor)&&p?r.get(n.textureColor).id:void 0,colorMixMode:n.colorMixMode,normalTextureId:g.isSome(n.textureNormal)&&p?r.get(n.textureNormal).id:void 0,textureAlphaPremultiplied:!0,occlusionTextureId:g.isSome(n.textureOcclusion)&&p?r.get(n.textureOcclusion).id:void 0,emissiveTextureId:g.isSome(n.textureEmissive)&&p?r.get(n.textureEmissive).id:void 0,metallicRoughnessTextureId:g.isSome(n.textureMetallicRoughness)&&p?r.get(n.textureMetallicRoughness).id:void 0,emissiveFactor:[I,
K,Z],metallicFactor:n.metallicFactor,roughnessFactor:n.roughnessFactor,usePBR:!c.meta.isEsriSymbolResource},e),k))}a:{w=f.indices||f.attributes.position.count;switch(f.primitiveType){case 4:F=x.trianglesToTriangles(w);break a;case 5:F=x.triangleStripToTriangles(w);break a;case 6:F=x.triangleFanToTriangles(w);break a}F=void 0}L={};M={};w=f.attributes.position.count;I=z.createBuffer(v.BufferViewVec3f,w);y.vec3.transformMat4(I,f.attributes.position,f.transform);M.position={data:I.typedBuffer,size:I.elementCount};
L.position=F;g.isSome(f.attributes.normal)&&(I=z.createBuffer(v.BufferViewVec3f,w),b.mat4.invert(h,f.transform),b.mat4.transpose(h,h),y.vec3.transformMat4(I,f.attributes.normal,h),M.normal={data:I.typedBuffer,size:I.elementCount},L.normal=F);g.isSome(f.attributes.tangent)&&(I=z.createBuffer(v.BufferViewVec4f,w),b.mat4.invert(h,f.transform),b.mat4.transpose(h,h),y.vec4.transformMat4(I,f.attributes.tangent,h),M.aTangent={data:I.typedBuffer,size:I.elementCount},L.aTangent=F);g.isSome(f.attributes.texCoord0)&&
(I=z.createBuffer(v.BufferViewVec2f,w),z.vec2.normalizeIntegerBuffer(I,f.attributes.texCoord0),M.uv0={data:I.typedBuffer,size:I.elementCount},L.uv0=F);g.isSome(f.attributes.color)&&(I=z.createBuffer(v.BufferViewVec4u8,w),4===f.attributes.color.elementCount?f.attributes.color instanceof v.BufferViewVec4f?y.vec4.scale(I,f.attributes.color,255):f.attributes.color instanceof v.BufferViewVec4u8?z.vec4.copy(I,f.attributes.color):f.attributes.color instanceof v.BufferViewVec4u16&&y.vec4.scale(I,f.attributes.color,
1/256):(z.vec4.fill(I,255,255,255,255),K=new v.BufferViewVec3u8(I.buffer,0,4),f.attributes.color instanceof v.BufferViewVec3f?y.vec3.scale(K,f.attributes.color,255):f.attributes.color instanceof v.BufferViewVec3u8?z.vec3.copy(K,f.attributes.color):f.attributes.color instanceof v.BufferViewVec3u16&&y.vec3.scale(K,f.attributes.color,1/256)),M.color={data:I.typedBuffer,size:I.elementCount},L.color=F);f=new A(new B(M,L),"gltf_"+a.name+"_"+t++);u.stageResources.geometries.push(f);u.stageResources.materials.push(l.get(k));
p&&(g.isSome(n.textureColor)&&u.stageResources.textures.push(r.get(n.textureColor)),g.isSome(n.textureNormal)&&u.stageResources.textures.push(r.get(n.textureNormal)),g.isSome(n.textureOcclusion)&&u.stageResources.textures.push(r.get(n.textureOcclusion)),g.isSome(n.textureEmissive)&&u.stageResources.textures.push(r.get(n.textureEmissive)),g.isSome(n.textureMetallicRoughness)&&u.stageResources.textures.push(r.get(n.textureMetallicRoughness)));u.numberOfVertices+=w;k=f.boundingInfo;q.expand(u.boundingBox,
k.getBBMin());q.expand(u.boundingBox,k.getBBMax())})}});return k}function G(a){switch(a){case "BLEND":return"blend";case "MASK":return"mask";case "OPAQUE":return"opaque";default:return"blend"}}function I(a,b){void 0===a&&(a="");void 0===b&&(b="");var d=f.endsWith(a,"Imposter");a=a.split("__")[0];if(-1!==b.indexOf("/RealisticTrees/")&&(b=t.treeParamsTable[a]))return{crownCenter:b.center,crownDimensions:b.radius,imposter:d}}function K(d){d.meta.isEsriSymbolResource&&d.model.lods.forEach(function(c){var f=
I(c.name,d.meta.uri);f&&(d.customMeta.esriTreeRendering=!0,c.parts.forEach(function(d){var c=d.attributes.normal,k=d.attributes.position,l=k.count;if(!g.isNone(c)){for(var q=m.vec3f64.create(),r=m.vec3f64.create(),n=m.vec3f64.create(),t=z.createBuffer(v.BufferViewVec4u8,l),u=z.createBuffer(v.BufferViewVec3f,l),p=b.mat4.invert(a.mat4f64.create(),d.transform),w=e.vec3.transformMat4(m.vec3f64.create(),f.crownCenter,p),p=e.vec3.transformMat4(m.vec3f64.create(),f.crownDimensions,p),x=0;x<l;x++){k.getVec(x,
r);c.getVec(x,q);e.vec3.subtract(n,r,w);e.vec3.divide(n,n,p);var y=h.clamp(e.vec3.length(n),0,1),y=.6+.4*y*y;e.vec3.lerp(n,n,q,.2);u.setVec(x,n);t.set(x,0,255*y);t.set(x,1,255*y);t.set(x,2,255*y);t.set(x,3,255)}d.attributes.normal=u;d.attributes.color=t}}))})}function M(a){var b=a.model.lods.length;a.meta.isEsriSymbolResource&&a.model.lods.forEach(function(a){if(!g.isSome(a.lodThreshold)){var d=(a.name||"").replace("Imposter","Realistic_LOD0").split("_LOD")[0],c=a.parts.reduce(function(a,b){return a+
b.attributes.position.count},0);a.lodThreshold=T(d,c,b)}})}function T(a,b,d){void 0===a&&(a="");if(1===d)return null;if(a in t.lodThresholdLUT){d=t.lodThresholdLUT[a].vertexCounts;a=t.lodThresholdLUT[a].thresholds;var c=d.length;if(1>=c)return null;if(b<=d[0]){var e=(d[1]-d[0])/(a[1]-a[0]);b-=d[0];return Math.max(0,a[0]+b*e)}if(b>=d[c-1])return e=(d[c-1]-d[c-2])/(a[c-1]-a[c-2]),b-=d[c-1],a[c-1]+b*e;for(var f=1;f<d.length;++f){var g=d[f-1],m=d[f],c=a[f-1],e=a[f];if(b<m)return b=(b-g)/(m-g),c*(1-b)+
e*b}}return null}Object.defineProperty(c,"__esModule",{value:!0});c.fetch=function(a,b){void 0===b&&(b={});return k(this,void 0,void 0,function(){var c,e,f,g,m,h,k,q,n,t;return l(this,function(l){switch(l.label){case 0:return c=E(a),"wosr"!==c.fileType?[3,2]:[4,w.load(c.url,b)];case 1:return e=l.sent(),[2,{lods:[e],referenceBoundingBox:e.boundingBox}];case 2:return f=new u.DefaultLoadingContext(b.streamDataRequester),[4,r.load(f,c.url,b)];case 3:g=l.sent();K(g);M(g);m=d({},b.materialParamsMixin,{treeRendering:g.customMeta.esriTreeRendering});
if(null!=c.specifiedLodIndex)return h=H(g,m,c.specifiedLodIndex),k=h[0].boundingBox,0!==c.specifiedLodIndex&&(q=H(g,m,c.specifiedLodIndex),k=q[0].boundingBox),[2,{lods:h,referenceBoundingBox:k}];n=H(g,m);t=n[0].boundingBox;return[2,{lods:n,referenceBoundingBox:t}]}})})};c.parseUrl=E;c.gltfToEngineResources=H})},"esri/views/3d/glTF/DefaultLoadingContext":function(){define("require exports ../../../core/tsSupport/awaiterHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/assignHelper ../../../request ../../../core/asyncUtils ../../../core/Error ../../../core/maybe ../../../core/promiseUtils ../../../core/urlUtils".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(a){this.streamDataRequester=a}c.prototype.loadJSON=function(a,b){return n(this,void 0,void 0,function(){return l(this,function(d){return[2,this.load("json",a,b)]})})};c.prototype.loadBinary=function(d,c){return n(this,void 0,void 0,function(){return l(this,function(e){return a.isDataProtocol(d)?(b.throwIfAborted(c),[2,a.dataToArrayBuffer(d)]):[2,this.load("binary",d,c)]})})};c.prototype.loadImage=
function(a,b){return n(this,void 0,void 0,function(){return l(this,function(d){return[2,this.load("image",a,b)]})})};c.prototype.load=function(a,c,m){return n(this,void 0,void 0,function(){var k;return l(this,function(l){switch(l.label){case 0:return f.isNone(this.streamDataRequester)?[4,d(c,e[a])]:[3,2];case 1:return[2,l.sent().data];case 2:return[4,h.result(this.streamDataRequester(c,a,m))];case 3:k=l.sent();if(!0===k.ok)return[2,k.value];b.throwIfAbortError(k.error);throw new g("","Request for resource failed: "+
k.error);}})})};return c}();c.DefaultLoadingContext=p;var e={image:{responseType:"image"},binary:{responseType:"array-buffer"},json:void 0}})},"esri/views/3d/glTF/esriProvidedModelParameters":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});c.treeParamsTable={Alder_Buckthorn:{center:[0,0,2.5],radius:[2,2,3.5]},American_Chestnut:{center:[0,0,12],radius:[10,10,10]},American_Sycamore:{center:[0,0,16],radius:[6.3,6.3,11.5]},Apricot:{center:[0,0,5],
radius:[4.5,4.5,4]},Australian_Pine:{center:[0,0,8],radius:[3,3,11.5]},Baldcypress:{center:[0,0,11.5],radius:[4.2,4.2,16.5]},Balsam_Fir:{center:[0,0,2.9],radius:[3,3,9.7]},Basswood:{center:[0,0,19],radius:[9,9,11]},Bay_Laurel:{center:[0,0,1.4],radius:[.6,.6,2.7]},Black_Locust:{center:[0,0,15],radius:[9.5,9.5,9.5]},Blue_Gum_Eucalyptus:{center:[0,0,12],radius:[5,5,10]},Boxwood:{center:[0,0,.5],radius:[.3,.3,.5]},California_Bay:{center:[0,0,16],radius:[9,9,9.6]},California_Incense_Cedar:{center:[0,0,
6.6],radius:[3.8,3.8,14]},California_Redwood:{center:[0,0,55],radius:[6.5,6.5,19]},California_Walnut:{center:[0,0,5.3],radius:[5,5,4.5]},Common_Hawthorn:{center:[0,0,2.8],radius:[1.9,1.9,2.8]},Common_Whitebeam:{center:[0,0,4.5],radius:[2.5,2.5,3.5]},Conker_Tree:{center:[0,0,10],radius:[6,6,10]},Desert_Willow:{center:[0,0,3],radius:[2.4,2.4,2.8]},Douglas_Fir:{center:[0,0,40],radius:[4.5,4.5,22]},European_Beech:{center:[0,0,12],radius:[7.5,7.5,11.5]},European_Larch:{center:[0,0,9],radius:[3,3,9]},Ficus:{center:[0,
0,10],radius:[12,12,18.5]},Field_Elm:{center:[0,0,12.5],radius:[10,10,9.5]},Flannelbush:{center:[0,0,0],radius:[1.3,1.3,1.7]},Flowering_Dogwood:{center:[0,0,2.5],radius:[2.4,2.4,3]},Generic_Unknown:{center:[0,0,11.5],radius:[5,5,6.5]},Giant_Sequoia:{center:[0,0,35.5],radius:[11,11,26]},Japanese_Angelica_Tree:{center:[0,0,3.8],radius:[2.8,2.8,2]},Leyland_Cypress:{center:[0,0,2.8],radius:[1,1,4]},Lodgepole_Pine:{center:[0,0,23.25],radius:[4.7,4.7,19]},Mediterranean_Buckthorn:{center:[0,0,1.5],radius:[1.2,
1.2,2.5]},Mountain_Mahogany:{center:[0,0,2],radius:[1.3,1.3,1.5]},Northern_Red_Oak:{center:[0,0,11.5],radius:[7.2,7.2,9]},Norway_Maple:{center:[0,0,12.2],radius:[6,6,8.2]},Norway_Spruce:{center:[0,0,5],radius:[6.5,6.5,20]},Oval_Leaved_Privet:{center:[0,0,0],radius:[.45,.45,2.95]},Palo_Verde:{center:[0,0,4.25],radius:[4,4,2.75]},Paper_Birch:{center:[0,0,13.25],radius:[5.5,5.5,9.5]},Red_Alder:{center:[0,0,13.25],radius:[5.5,5.5,9.5]},Red_Hickory:{center:[0,0,9],radius:[4.5,4.5,7.5]},Rhododendron_Azaleas:{center:[0,
0,.55],radius:[.4,.4,.35]},Rose:{center:[0,0,.55],radius:[.45,.45,.55]},Ruffle_Palm:{center:[0,0,6.4],radius:[3,3,3]},Sassafras:{center:[0,0,8],radius:[3,3,7]},Scots_Pine:{center:[0,0,18],radius:[3,3,9]},Shadbush:{center:[0,0,1.5],radius:[1.5,1.5,1.5]},Southern_Magnolia:{center:[0,0,10.5],radius:[5.5,5.5,8]},Spanish_Broom:{center:[0,0,1.5],radius:[2.5,2.5,1.5]},Strawberry_Tree:{center:[0,0,4],radius:[2.8,2.8,3.3]},Sugar_Maple:{center:[0,0,8],radius:[4.5,4.5,7]},Sweetgum:{center:[0,0,8],radius:[4,
4,6.5]},Umbrella_Acacia:{center:[0,0,10.8],radius:[15,15,6.8]},Western_Juniper:{center:[0,0,3.2],radius:[2.5,2.5,7]},White_Ash:{center:[0,0,14.5],radius:[9.5,9.5,11]},White_Oak:{center:[0,0,15],radius:[14,14,14]},White_Poplar:{center:[0,0,10],radius:[4.3,4.3,8.2]},White_Willow:{center:[0,0,12],radius:[8.9,8.9,9]},Witch_Hazel:{center:[0,0,1.5],radius:[1.5,1.5,2]}};c.lodThresholdLUT={Alder_Buckthorn__Realistic:{thresholds:[2,65.698,384.294],vertexCounts:[18,2034,8220]},Amazon_Sword_Plant__Realistic:{thresholds:[2,
22.848,88.819,200.491],vertexCounts:[18,246,888,3246]},American_Chestnut__Realistic:{thresholds:[2,27.57,59.244,360.286],vertexCounts:[18,444,1782,10332]},American_Sycamore__Realistic:{thresholds:[2,60.765,228.586],vertexCounts:[18,1740,8562]},Apricot__Realistic:{thresholds:[2,33.695,132.332],vertexCounts:[18,1776,10626]},Australian_Pine__Realistic:{thresholds:[2,131.057],vertexCounts:[18,8094]},Baldcypress__Realistic:{thresholds:[2,31.791,212.226],vertexCounts:[18,1638,10164]},Balsam_Fir__Realistic:{thresholds:[2,
64.674],vertexCounts:[18,10266]},Bamboo__Realistic:{thresholds:[2,22.347,90.113,213.818],vertexCounts:[18,216,978,7740]},Banana_Tree__Realistic:{thresholds:[2,28.096,88.837,345.976],vertexCounts:[18,372,1986,10743]},Basswood__Realistic:{thresholds:[2,59.387,199.555],vertexCounts:[18,1662,7998]},Bay_Laurel__Realistic:{thresholds:[2,28.653,204.352],vertexCounts:[18,1728,10938]},Black_Locust__Realistic:{thresholds:[2,28.546,88.164,229.447],vertexCounts:[18,384,1638,9768]},Blue_Gum_Eucalyptus__Realistic:{thresholds:[2,
56.98,201.358],vertexCounts:[18,1530,9762]},Boxwood__Realistic:{thresholds:[2,28.768,62.215,191.034],vertexCounts:[18,390,1824,9876]},Cabbage_Palm_Fern__Realistic:{thresholds:[2,26.932,215.221],vertexCounts:[18,150,1314]},California_Bay__Realistic:{thresholds:[2,30.627,204.223],vertexCounts:[18,1878,9054]},California_Incense_Cedar__Realistic:{thresholds:[2,30.533,197.262],vertexCounts:[18,1644,11214]},California_Palm__Realistic:{thresholds:[2,30.538,210.616],vertexCounts:[18,612,5760]},California_Redwood__Realistic:{thresholds:[2,
110.805],vertexCounts:[18,10260]},California_Walnut__Realistic:{thresholds:[2,26.702,64.525,199.228],vertexCounts:[18,336,1962,10992]},Coconut_Palm__Realistic:{thresholds:[2,21.77,63.23,199.556],vertexCounts:[18,402,1884,9240]},Common_Hawthorn__Realistic:{thresholds:[2,45.588,205.35],vertexCounts:[18,300,9492]},Common_Whitebeam__Realistic:{thresholds:[2,56.42,186.382],vertexCounts:[18,2142,10524]},Conker_Tree__Realistic:{thresholds:[2,25.977,58.524,195.139],vertexCounts:[18,318,1614,8886]},Date_Palm__Realistic:{thresholds:[2,
31.107,67.609,186.723],vertexCounts:[18,456,2154,9054]},Desert_Willow__Realistic:{thresholds:[2,29.425,59.815,203.238],vertexCounts:[18,408,1686,9720]},Douglas_Fir__Realistic:{thresholds:[2,69.576],vertexCounts:[18,8544]},European_Beech__Realistic:{thresholds:[2,29.854,201.521],vertexCounts:[18,420,7572]},European_Larch__Realistic:{thresholds:[2,65.346],vertexCounts:[18,10314]},Ficus__Realistic:{thresholds:[2,28.768,58.849,210.62],vertexCounts:[18,390,1632,7728]},Field_Elm__Realistic:{thresholds:[2,
34.435,192.436],vertexCounts:[18,1746,10950]},Flannelbush__Realistic:{thresholds:[2,27.408,55.566,196.843],vertexCounts:[18,354,1455,8706]},Flowering_Dogwood__Realistic:{thresholds:[2,28.768,194.687],vertexCounts:[18,390,8664]},Generic_Dead_Tree__Realistic:{thresholds:[2,67.891],vertexCounts:[18,2172]},Generic_Stump__Realistic:{thresholds:[2,19.544,57.757,171.552],vertexCounts:[18,180,1572,2634]},Generic_Unknown__Realistic:{thresholds:[2,32.379,221.987],vertexCounts:[18,1572,9006]},Giant_Sequoia__Realistic:{thresholds:[2,
30.664,204.84],vertexCounts:[18,2160,8232]},Hedgehog_Agave__Realistic:{thresholds:[2,28.546,96.141,228.435],vertexCounts:[18,384,1980,11094]},Japanese_Angelica_Tree__Realistic:{thresholds:[2,25.482,61.287,202.909],vertexCounts:[18,306,1770,7806]},Lacy_Tree_Philodendron__Realistic:{thresholds:[2,28.768,62.974,231.634],vertexCounts:[18,390,1752,10227]},Leyland_Cypress__Realistic:{thresholds:[2,66.246],vertexCounts:[18,10182]},Lily_Of_The_Valley__Realistic:{thresholds:[2,28.322,55.738,198.232],vertexCounts:[18,
378,1464,4152]},Scots_Pine__Realistic:{thresholds:[2,60.554],vertexCounts:[18,7524]},Mediterranean_Buckthorn__Realistic:{thresholds:[2,31.82,211.856],vertexCounts:[18,2196,9030]},Mexican_Palmetto__Realistic:{thresholds:[2,29.425,68.358,212.659],vertexCounts:[18,408,2202,10194]},Mountain_Mahogany__Realistic:{thresholds:[2,31.199,198.614],vertexCounts:[18,1614,8094]},White_Oak__Realistic:{thresholds:[2,15.204,33.801,129.392],vertexCounts:[18,372,1674,9222]},Sugar_Maple__Realistic:{thresholds:[2,28.322,
59.495,216.901],vertexCounts:[18,378,1668,9462]},Norway_Spruce__Realistic:{thresholds:[2,63.101],vertexCounts:[18,9630]},Orchid__Realistic:{thresholds:[2,30.383,63.93,198.664],vertexCounts:[18,435,1926,8346]},Other__Realistic:{thresholds:[2,30.504,194.487],vertexCounts:[18,1572,9006]},Oval_Leaved_Privet__Realistic:{thresholds:[2,59.468],vertexCounts:[18,9162]},Palm_Lily__Realistic:{thresholds:[2,57.977,200.406],vertexCounts:[18,1584,8112]},Palo_Verde__Realistic:{thresholds:[2,65.31,198.124],vertexCounts:[18,
2010,7668]},Paper_Birch__Realistic:{thresholds:[2,117.074],vertexCounts:[18,10578]},Parlour_Palm__Realistic:{thresholds:[2,30.695,60.974,194.832],vertexCounts:[18,444,1752,8388]},Prickly_Pear_Cactus__Realistic:{thresholds:[2,28.657,66.946,214.478],vertexCounts:[18,387,2112,11028]},Red_Alder__Realistic:{thresholds:[2,30.518,192.513],vertexCounts:[18,1770,8274]},Red_Hickory__Realistic:{thresholds:[2,31.604,192.085],vertexCounts:[18,1680,7908]},Rhododendron_Azaleas__Realistic:{thresholds:[2,47.068,192.681],
vertexCounts:[18,1044,8160]},Rose__Realistic:{thresholds:[2,66.085,212.061],vertexCounts:[18,2058,10968]},Ruffle_Palm__Realistic:{thresholds:[2,64.994],vertexCounts:[18,9534]},Saguaro_Cactus__Realistic:{thresholds:[2,34.779,56.703,197.566],vertexCounts:[18,570,1050,1992]},Sassafras__Realistic:{thresholds:[2,110.697],vertexCounts:[18,10944]},Sea_Islands_Yucca__Realistic:{thresholds:[2,61.287,219.899],vertexCounts:[18,1770,10176]},Shadbush__Realistic:{thresholds:[2,26.702,64.03,201.856],vertexCounts:[18,
336,1932,9030]},Snake_Plant__Realistic:{thresholds:[2,23.803,68.265,193.203],vertexCounts:[18,267,2196,5280]},Southern_Magnolia__Realistic:{thresholds:[2,63.431,212.165],vertexCounts:[18,1896,8472]},Spanish_Broom__Realistic:{thresholds:[2,29.854,192.889],vertexCounts:[18,420,7896]},Strawberry_Tree__Realistic:{thresholds:[2,16.772,32.081,186.987],vertexCounts:[18,300,1560,8148]},Sunflower__Realistic:{thresholds:[2,28.768,66.373,194.987],vertexCounts:[18,390,2076,7902]},Sweetgum__Realistic:{thresholds:[2,
31.436,201.223],vertexCounts:[18,1848,7674]},Umbrella_Acacia__Realistic:{thresholds:[2,62.137],vertexCounts:[18,8880]},Western_Juniper__Realistic:{thresholds:[2,62.683],vertexCounts:[18,9120]},White_Ash__Realistic:{thresholds:[2,33.326,192.138],vertexCounts:[18,2070,10542]},White_Poplar__Realistic:{thresholds:[2,30.615,196.71],vertexCounts:[18,1530,9888]},White_Willow__Realistic:{thresholds:[2,62.983],vertexCounts:[18,10422]},Witch_Hazel__Realistic:{thresholds:[2,26.463,66.277,200.916],vertexCounts:[18,
330,2070,10386]},ATM_:{thresholds:[2,46.933],vertexCounts:[150,1038]},Bus_Stop_1_:{thresholds:[2,42.67],vertexCounts:[150,858]},Bus_Stop_2_:{thresholds:[2,46.112],vertexCounts:[138,1002]},Dumpster_:{thresholds:[2,48.006],vertexCounts:[138,1086]},Newspaper_Vending_Machine_:{thresholds:[2,57.203],vertexCounts:[144,1542]},Overhanging_Sidewalk_Light_Off_:{thresholds:[2,43.847],vertexCounts:[141,906]},Overhanging_Sidewalk_Light_On_:{thresholds:[2,43.847],vertexCounts:[141,906]},Overhanging_Street_And_Sidewalk_Light_Off_:{thresholds:[2,
46.524],vertexCounts:[147,1020]},Overhanging_Street_And_Sidewalk_Light_On_:{thresholds:[2,46.524],vertexCounts:[147,1020]},Overhanging_Street_Light_Off_:{thresholds:[2,34.225],vertexCounts:[144,552]},Overhanging_Street_Light_On_:{thresholds:[2,34.225],vertexCounts:[144,552]},Park_Bench_1_:{thresholds:[2,23.669],vertexCounts:[96,264]},Park_Bench_2_:{thresholds:[2,44.71],vertexCounts:[144,942]},Park_Bench_3_:{thresholds:[2,41.917],vertexCounts:[120,828]},Park_Bench_4_:{thresholds:[2,69.923],vertexCounts:[144,
2304]},Payphone_:{thresholds:[2,58.524],vertexCounts:[156,1614]},Picnic_Table_:{thresholds:[2,35.504],vertexCounts:[90,594]},Planter_Circular_:{thresholds:[2,99.368],vertexCounts:[153,4653]},Planter_Square_:{thresholds:[2,65.212],vertexCounts:[150,2004]},Planter_Tapered_:{thresholds:[2,89.669],vertexCounts:[141,3789]},Rock_1_:{thresholds:[2,28.768,50.463],vertexCounts:[132,390,1200]},Rock_2_:{thresholds:[2,43.556,73.127],vertexCounts:[150,894,2520]},Rock_3_:{thresholds:[2,37.931,70.286],vertexCounts:[144,
678,2328]},Rock_4_:{thresholds:[2,41.613,70.738],vertexCounts:[150,816,2358]},Street_Light_Off_:{thresholds:[2,39.734,56.869],vertexCounts:[150,744,1524]},Street_Light_On_:{thresholds:[2,39.734,56.869],vertexCounts:[150,744,1524]},Traffic_Barrier_2_:{thresholds:[2,42.819],vertexCounts:[132,864]},Trash_Bin_1_:{thresholds:[2,50.019],vertexCounts:[132,1179]},Trash_Bin_2_:{thresholds:[2,36.038,63.028],vertexCounts:[108,612,1872]},Trash_Bin_3_:{thresholds:[2,42.371,64.03],vertexCounts:[102,846,1932]},
Trash_Can_1_:{thresholds:[2,58.524,98.628],vertexCounts:[150,1614,4584]},Trash_Can_2_:{thresholds:[2,53.166],vertexCounts:[84,1332]},US_Mailbox_:{thresholds:[2,48.402],vertexCounts:[156,1104]},Ambulance_:{thresholds:[2,67.121,343.733],vertexCounts:[294,3285,13758]},Audi_A6_:{thresholds:[2,63.823,484.156],vertexCounts:[300,4311,14280]},Backhoe_:{thresholds:[2,60.173,391.986],vertexCounts:[453,5895,14679]},BMW_3Series_:{thresholds:[2,68.886,417.563],vertexCounts:[294,4188,14727]},Bobcat_:{thresholds:[2,
61.105,269.127],vertexCounts:[438,4476,14952]},Bus_:{thresholds:[2,63.803,402.682],vertexCounts:[300,4398,14988]},Crane_:{thresholds:[2,65.969,386.67],vertexCounts:[438,4497,14487]},Dumptruck_:{thresholds:[2,66.91,354.365],vertexCounts:[456,6294,14052]},Eurocopter_AS365_:{thresholds:[2,227.817],vertexCounts:[432,14733]},Eurocopter_AS365_Flying_:{thresholds:[2,96.244,380.211],vertexCounts:[306,4365,10575]},Eurocopter_H125_:{thresholds:[2,96.567,378.995],vertexCounts:[438,4440,14763]},Eurocopter_H125_Flying_:{thresholds:[2,
94.002,366.378],vertexCounts:[294,4164,13569]},Firetruck_:{thresholds:[2,65.762,383.645],vertexCounts:[276,4482,14901]},Ford_Edge_:{thresholds:[2,68.763,419.635],vertexCounts:[294,4368,14733]},Ford_Expedition_:{thresholds:[2,62.994,388.251],vertexCounts:[276,4410,14868]},Ford_F150_:{thresholds:[2,60.495,394.682],vertexCounts:[300,4950,14988]},Ford_Fiesta_:{thresholds:[2,64.994,355.46],vertexCounts:[282,4185,14223]},Ford_Focus_Hatchback_:{thresholds:[2,62.072,387.932],vertexCounts:[300,4470,14925]},
Ford_Fusion_:{thresholds:[2,64.485,370.289],vertexCounts:[294,4500,14955]},Ford_Mustang_:{thresholds:[2,64.812,351.721],vertexCounts:[288,4197,14574]},Ford_Taurus_:{thresholds:[2,67.461,379.324],vertexCounts:[282,4404,15042]},Ford_Transit_Commercial_Van_:{thresholds:[2,88.6,384.491],vertexCounts:[276,4443,14721]},Ford_Transit_Connect_:{thresholds:[2,67.006,336.74],vertexCounts:[258,4344,14328]},Mercedes_SClass_:{thresholds:[2,66.188,349.491],vertexCounts:[300,4377,14721]},Motorboat_:{thresholds:[2,
67.436,364.325],vertexCounts:[315,4491,14958]},Motorcycle_:{thresholds:[2,35.435,357.215],vertexCounts:[294,4806,14865]},Police_Car_:{thresholds:[2,68.116,350.794],vertexCounts:[294,3987,14580]},Porsche_Boxter_:{thresholds:[2,67.717,361.95],vertexCounts:[312,6225,14676]},Porsche_Carrera_:{thresholds:[2,66.588,392.685],vertexCounts:[306,4473,14571]},Sailboat_:{thresholds:[2,97.329,383.075],vertexCounts:[294,4464,14937]},Sailboat_Sails_Up_:{thresholds:[2,97.46,360.432],vertexCounts:[300,4476,14967]},
Taxi_:{thresholds:[2,64.415,381.491],vertexCounts:[300,4305,14721]},Taxi_Van_:{thresholds:[2,64.614,364.475],vertexCounts:[288,4341,11949]},Tesla_P7_:{thresholds:[2,58.155],vertexCounts:[300,16062]},Tower_Crane_:{thresholds:[2,106.34,419.821],vertexCounts:[432,4488,14832]},Toyota_Prius_:{thresholds:[2,66.448,357.251],vertexCounts:[288,4266,14370]},Tram_:{thresholds:[2,65.43,369.937],vertexCounts:[420,5610,19605]},Volkswagen_Jetta_Wagon_:{thresholds:[2,65.925,354.416],vertexCounts:[294,4443,14466]},
Traffic_Light_1_:{thresholds:[2,75.315],vertexCounts:[135,2673]},Traffic_Light_3_:{thresholds:[2,49.12],vertexCounts:[132,1137]},Traffic_Light_4_:{thresholds:[2,70.962,115.735],vertexCounts:[96,2373,6312]},Cell_Phone_Antenna_:{thresholds:[2,53.05602049838099,225.75567007367763],vertexCounts:[150,894,4242]},Electricity_Box_:{thresholds:[2,56.48433069112405,207.14360140104995],vertexCounts:[108,744,1026]},Electricity_Meter_:{thresholds:[2,53.4669717168887,215.04066673528195],vertexCounts:[120,384,960]},
Powerline_Pole_:{thresholds:[2,28.11004122822377,58.29783783397482],vertexCounts:[120,840,3678]},Radio_Antenna_:{thresholds:[2,32.2179270951266,462.06696540941175],vertexCounts:[297,1815,9009]},Wind_Turbine_:{thresholds:[2,56.15679308163878,247.66420622007408],vertexCounts:[291,1806,7974]},Bike_Rack_:{thresholds:[2,33.4134686118416,742.2476610265626],vertexCounts:[138,900,3948]},Fire_Hydrant_:{thresholds:[2,30.215510249190537,390.42722821984944],vertexCounts:[156,894,2676]},Fountain_1_:{thresholds:[2,
52.36907652663328,221.4335455931077],vertexCounts:[300,1782,8052]},Fountain_2_:{thresholds:[2,58.20077988776262,254.01846725224388],vertexCounts:[288,1794,8526]},Fountain_3_:{thresholds:[2,30.089436161855176,215.0465007031079],vertexCounts:[306,1800,8880]},Fountain_4_:{thresholds:[2,90.06038366113779,351.6045839690371],vertexCounts:[252,1656,2136]},Mailbox_:{thresholds:[2,52.806020498381045,378.6213345953622],vertexCounts:[150,894,4494]},Sewer_Grate_:{thresholds:[2,32.31186201200472,388.7801192944885],
vertexCounts:[60,492,1788]},Storm_Drain_:{thresholds:[2,93.440164912895,355.73135487536024],vertexCounts:[150,840,3300]},Traffic_Pylon_:{thresholds:[2,59.30348706874729,388.12062237971986],vertexCounts:[138,756,1740]},Airplane_Large_Passenger_:{thresholds:[2,32.63681118513339,229.25055778384916],vertexCounts:[303,1614,7086]},Airplane_Large_Passenger_With_Wheels_:{thresholds:[2,57.56132180109627,219.23679864871204],vertexCounts:[450,2550,9186]},Airplane_Private_:{thresholds:[2,55.15153188839752,218.4051249478359],
vertexCounts:[300,1209,6894]},Airplane_Private_With_Wheels_:{thresholds:[2,54.962671511046956,225.3801611565773],vertexCounts:[366,1737,8454]},Airplane_Propeller_:{thresholds:[2,55.03627391751588,214.63956781455144],vertexCounts:[291,1560,8502]},Airplane_Propeller_With_Wheels_:{thresholds:[2,57.1404638556843,221.48743600008154],vertexCounts:[303,1776,9006]},Airplane_Small_Passenger_:{thresholds:[2,56.98035485213009,217.0648860940108],vertexCounts:[300,1530,8946]},Airplane_Small_Passenger_With_Wheels_:{thresholds:[2,
56.402226419354996,227.53633450087503],vertexCounts:[456,1698,11400]},Cargo_Box_:{thresholds:[2,180.55115902122088,360.2534460453696],vertexCounts:[132,672,3738]},Cargo_Ship_Empty_:{thresholds:[2,58.00721049029622,327.1185961587389],vertexCounts:[444,2616,10896]},Cargo_Ship_Full_:{thresholds:[2,55.386139460867525,346.87126261041203],vertexCounts:[450,2670,10950]},City_Bike_:{thresholds:[2,56.670817449986885,242.3113495346381],vertexCounts:[300,1785,8736]},Delivery_Truck_:{thresholds:[2,34.92797405514993,
120.33485126686935],vertexCounts:[408,2130,13248]},High_Speed_Train_:{thresholds:[2,58.255981072570464,405.19492233117126],vertexCounts:[276,1908,11928]},Mountain_Bike_:{thresholds:[2,30.151936161855172,115.15158622172994],vertexCounts:[294,1800,8994]},Pickup_Truck_Ford_F250_:{thresholds:[2,31.705838007504713,69.25663661786093],vertexCounts:[300,1770,8976]},Pickup_Truck_Toyota_Hilux_:{thresholds:[2,56.84455317543219,128.81569681781366],vertexCounts:[306,1716,9048]},Road_Bike_:{thresholds:[2,44.97251491181105,
127.30122549350301],vertexCounts:[297,1788,8916]},Semi_Trailer_Truck_:{thresholds:[2,35.382538898732484,127.42462492550419],vertexCounts:[282,1740,8997]},Tractor_:{thresholds:[2,33.01181118513338,128.39790644030703],vertexCounts:[306,1614,8961]},Tractor_And_Trailer_:{thresholds:[2,33.18284541984615,130.95719106637375],vertexCounts:[450,2502,12894]},Trailer_:{thresholds:[2,30.327031957706836,119.19765978853422],vertexCounts:[270,1440,9E3]},Train_Europe_:{thresholds:[2,31.15174353437363,105.3408295387661],
vertexCounts:[138,756,3846]},Train_Europe_With_Carriages_:{thresholds:[2,57.97062023935375,355.8054399222865],vertexCounts:[408,2682,10596]},Train_US_:{thresholds:[2,27.776264387000953,61.24231873858716],vertexCounts:[156,618,3648]},Tricycle_:{thresholds:[2,31.87237750582925,132.64683491853526],vertexCounts:[297,1746,8136]},Truck_With_Trailer_:{thresholds:[2,57.64037298915464,361.21271516459444],vertexCounts:[438,2478,13476]},Orange_Tree__Realistic:{thresholds:[2,25.470734736913386,62.118518915365755,
128.10642692525323],vertexCounts:[18,354,1524,10302]},American_Football_Goal_:{thresholds:[2,34.76135530828228,712.2046360848831],vertexCounts:[147,588,2688]},Basketball_Hoop_:{thresholds:[2,52.74512035232253,208.15783725757558],vertexCounts:[123,768,4260]},Jungle_Gym_:{thresholds:[2,47.5885918871016,256.602450987006],vertexCounts:[294,1773,8916]},Slide_:{thresholds:[2,29.23625745590553,729.2078902902748],vertexCounts:[252,1788,7440]},Soccer_Goal_:{thresholds:[2,33.671199284957794,364.5834082156921],
vertexCounts:[138,870,4266]},Swing_:{thresholds:[2,32.70510997459713,449.6062391021012],vertexCounts:[300,1734,7176]},Teeter_Totter_:{thresholds:[2,53.23896332520353,456.4221097287286],vertexCounts:[294,1710,7794]},Balsam_Fir__Schematic:{thresholds:[2,107.63596252927391,859.3878782201409],vertexCounts:[66,126,222]},Umbrella_Acacia__Schematic:{thresholds:[2,28.236981042654023,770.1463507109006],vertexCounts:[138,630,2238]},Sugar_Maple__Schematic:{thresholds:[2,14.35031627906977,881.1466235565822],
vertexCounts:[108,852,3396]},Conker_Tree__Schematic:{thresholds:[2,15.284392361111118,832.0115049504952],vertexCounts:[108,852,3396]},Hedgehog_Agave__Schematic:{thresholds:[2,14.987731203007513,823.8048558262012],vertexCounts:[72,792,3312]},Ruffle_Palm__Schematic:{thresholds:[2,12.135573455233287,817.5737099621688],vertexCounts:[108,852,3396]},Red_Alder__Schematic:{thresholds:[2,14.01284931506851,780.2679999999996],vertexCounts:[108,852,3396]},Shadbush__Schematic:{thresholds:[2,29.80464285714286,
842.6101098901099],vertexCounts:[72,792,3312]},Japanese_Angelica_Tree__Schematic:{thresholds:[2,15.115126024590165,799.501264413519],vertexCounts:[108,852,3396]},Strawberry_Tree__Schematic:{thresholds:[2,15.083150000000003,818.0121967213113],vertexCounts:[108,852,3396]},Paper_Birch__Schematic:{thresholds:[2,10.303635227272727,878.0123272727276],vertexCounts:[108,780,2100]},Orchid__Schematic:{thresholds:[2,26.07269215291752,923.3067065420558],vertexCounts:[108,780,2100]},Boxwood__Schematic:{thresholds:[2,
15.198452928870296,830.9156959761549],vertexCounts:[108,852,3396]},California_Incense_Cedar__Schematic:{thresholds:[2,12.739357933579337,864.1071448275861],vertexCounts:[138,630,2238]},Saguaro_Cactus__Schematic:{thresholds:[2,27.560375000000015,919.7996596551259],vertexCounts:[108,780,2100]},Red_Hickory__Schematic:{thresholds:[2,16.855436823104693,800.57046628131],vertexCounts:[108,852,3396]},American_Chestnut__Schematic:{thresholds:[2,17.239219730941716,846.5782343859651],vertexCounts:[108,852,3396]},
Australian_Pine__Schematic:{thresholds:[2,16.529950965824664,803.2413670133733],vertexCounts:[138,630,2238]},Mountain_Mahogany__Schematic:{thresholds:[2,13.008124060150381,917.9049999999999],vertexCounts:[108,852,3396]},Parlour_Palm__Schematic:{thresholds:[2,14.524522935779814,819.898849909584],vertexCounts:[108,780,2100]},Desert_Willow__Schematic:{thresholds:[2,14.02700704225353,920.7354144884243],vertexCounts:[108,852,3396]},Orange_Tree__Schematic:{thresholds:[2,14.192646264057018,861.1305417111394],
vertexCounts:[108,852,3396]},Coconut_Palm__Schematic:{thresholds:[2,16.367034412955462,902.0106492659056],vertexCounts:[108,852,3396]},Lily_Of_The_Valley__Schematic:{thresholds:[2,51.11744751381218,792.1491071428572],vertexCounts:[138,630,2238]},Palm_Lily__Schematic:{thresholds:[2,15.243925287356316,799.762794117647],vertexCounts:[108,780,2100]},Flowering_Dogwood__Schematic:{thresholds:[2,15.508128172588837,810.379933284989],vertexCounts:[108,852,3396]},Common_Hawthorn__Schematic:{thresholds:[2,15.159807441253282,
889.5056919060053],vertexCounts:[72,792,3312]},Leyland_Cypress__Schematic:{thresholds:[2,14.94957231404959,805.2679669421484],vertexCounts:[108,852,3396]},Amazon_Sword_Plant__Schematic:{thresholds:[2,17.358711448598132,824],vertexCounts:[108,852,3396]},Blue_Gum_Eucalyptus__Schematic:{thresholds:[2,26.441309523809522,820.3575976676384],vertexCounts:[138,630,2238]},European_Beech__Schematic:{thresholds:[2,25.26955788590608,871.8532751677853],vertexCounts:[138,630,2238]},Ficus__Schematic:{thresholds:[2,
15.364387681159425,800.1358897637797],vertexCounts:[108,852,3396]},Alder_Buckthorn__Schematic:{thresholds:[2,16.64437797619048,1028.757943743938],vertexCounts:[108,852,3396]},White_Ash__Schematic:{thresholds:[2,14.981912280701744,776.9208385269121],vertexCounts:[108,852,3396]},Flannelbush__Schematic:{thresholds:[2,15.24620504087194,805.9792635498547],vertexCounts:[72,792,3312]},Generic_Dead_Tree__Schematic:{thresholds:[2,15.068557103064066,858],vertexCounts:[108,852,3396]},Witch_Hazel__Schematic:{thresholds:[2,
15.320549999999995,801.9632958152956],vertexCounts:[108,852,3396]},Sunflower__Schematic:{thresholds:[2,30.66128647686832,796.1051534500516],vertexCounts:[108,852,3396]},California_Walnut__Schematic:{thresholds:[2,16.488717712177117,895.3309873754151],vertexCounts:[108,852,3396]},Western_Juniper__Schematic:{thresholds:[2,26.945806855636135,767.2468292682922],vertexCounts:[138,630,2238]},European_Larch__Schematic:{thresholds:[2,13.155643356643353,830.1452680652685],vertexCounts:[138,630,2238]},Bay_Laurel__Schematic:{thresholds:[2,
14.695218421052633,808.1161693811073],vertexCounts:[138,630,2238]},Oval_Leaved_Privet__Schematic:{thresholds:[2,14.822584645669306,828.4657637795276],vertexCounts:[72,792,3312]},Sweetgum__Schematic:{thresholds:[2,14.500420491803279,792.8281936148301],vertexCounts:[138,630,2238]},Southern_Magnolia__Schematic:{thresholds:[2,15.046679712460072,778.8604087591239],vertexCounts:[108,852,3396]},Banana_Tree__Schematic:{thresholds:[2,14.268900557620823,855.4758067831449],vertexCounts:[108,780,2100]},Prickly_Pear_Cactus__Schematic:{thresholds:[2,
14.461720869565228,817.0421426086955],vertexCounts:[72,720,2016]},Generic_Unknown__Schematic:{thresholds:[2,14.366287644787645,899.208477804681],vertexCounts:[108,852,3396]},Palo_Verde__Schematic:{thresholds:[2,28.513162650602432,932.5919321314955],vertexCounts:[138,630,2238]},Lacy_Tree_Philodendron__Schematic:{thresholds:[2,15.89430837004405,797.5864920353984],vertexCounts:[102,570,2154]},Cabbage_Palm_Fern__Schematic:{thresholds:[2,29.3428324742268,1016],vertexCounts:[102,570,2154]},Date_Palm__Schematic:{thresholds:[2,
13.186208480565373,956.3961600000001],vertexCounts:[108,852,3396]},Bamboo__Schematic:{thresholds:[2,114.71951515151522,843.8529763779525],vertexCounts:[60,132,276]},Norway_Spruce__Schematic:{thresholds:[2,129.71889887640438,911.9744719101127],vertexCounts:[66,126,222]},Scots_Pine__Schematic:{thresholds:[2,31.596748201438846,802.180143884892],vertexCounts:[138,630,2238]},American_Sycamore__Schematic:{thresholds:[2,17.793048780487815,818.0204116094988],vertexCounts:[108,852,3396]},White_Poplar__Schematic:{thresholds:[2,
15.577301587301578,793.0779038047372],vertexCounts:[108,780,2100]},Apricot__Schematic:{thresholds:[2,17.03619453924915,796.0093830508479],vertexCounts:[108,852,3396]},Douglas_Fir__Schematic:{thresholds:[2,6.898190007037297,871.0619788881072],vertexCounts:[126,636,1956]},White_Oak__Schematic:{thresholds:[2,13.248768433179723,895.745945945946],vertexCounts:[108,852,3396]},Mediterranean_Buckthorn__Schematic:{thresholds:[2,15.481177685950412,814.9279016681298],vertexCounts:[108,852,3396]},Rhododendron_Azaleas__Schematic:{thresholds:[2,
14.877305555555564,813.5712917369306],vertexCounts:[108,852,3396]},Black_Locust__Schematic:{thresholds:[2,16.01144497607656,791.7159498154983],vertexCounts:[108,852,3396]},Rose__Schematic:{thresholds:[2,14.787227941176468,800.0478006734006],vertexCounts:[108,852,3396]},Mexican_Palmetto__Schematic:{thresholds:[2,13.546397993311047,909.3318618618619],vertexCounts:[108,852,3396]},White_Willow__Schematic:{thresholds:[2,15.464474625144176,821.6042260668969],vertexCounts:[108,852,3396]},Snake_Plant__Schematic:{thresholds:[2,
116.3567710843375,792.3341835147744],vertexCounts:[60,132,276]},Sassafras__Schematic:{thresholds:[2,28.228858319604583,870.7394179022517],vertexCounts:[138,630,2238]},California_Redwood__Schematic:{thresholds:[2,12.938791007615702,889.7742940831868],vertexCounts:[108,780,2100]},Giant_Sequoia__Schematic:{thresholds:[2,13.939714285714274,828.8460395256916],vertexCounts:[138,630,2238]},Common_Whitebeam__Schematic:{thresholds:[2,15.902902542372882,872.9050708661416],vertexCounts:[108,852,3396]},Spanish_Broom__Schematic:{thresholds:[2,
14.866623996789723,815.3769117174961],vertexCounts:[72,792,3312]},Generic_Stump__Schematic:{thresholds:[2,121.01622222222227,923.740137931034],vertexCounts:[60,132,276]},Baldcypress__Schematic:{thresholds:[2,16.348127777777776,817.8199690358902],vertexCounts:[138,630,2238]},Basswood__Schematic:{thresholds:[2,15.118691605839418,835.9789696969701],vertexCounts:[108,852,3396]},Field_Elm__Schematic:{thresholds:[2,15.185642361111121,804.1571316818777],vertexCounts:[108,852,3396]},California_Bay__Schematic:{thresholds:[2,
14.085977419354833,841.5876923076921],vertexCounts:[108,852,3396]},California_Palm__Schematic:{thresholds:[2,13.896321678321671,843.3262657342657],vertexCounts:[138,630,2238]},Sea_Islands_Yucca__Schematic:{thresholds:[2,28.116965753424623,870.5225410421126],vertexCounts:[102,570,2154]}}})},"esri/views/3d/glTF/loader":function(){define("require exports ../../../core/tsSupport/awaiterHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/assignHelper ../../../core/maybe ../../../core/promiseUtils ../../../core/libs/gl-matrix-2/mat4f64 ./DefaultErrorContext ./LoaderResult ./internal/Resource".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a){function e(a,b){return n(this,void 0,void 0,function(){function d(e,f){return n(this,void 0,void 0,function(){var g,m,h,k,q,n,r,u,p;return l(this,function(l){switch(l.label){case 0:g=c.nodes[e];m=a.getNodeTransform(e);t.warnUnsupportedIf(null!=g.weights,"Morph targets are not supported.");if(null==g.mesh)return[3,4];h=c.meshes[g.mesh];k=0;q=h.primitives;l.label=1;case 1:if(!(k<q.length))return[3,4];n=q[k];return[4,b(n,m,f,h.name)];case 2:l.sent(),l.label=3;case 3:return k++,
[3,1];case 4:r=0,u=g.children||[],l.label=5;case 5:if(!(r<u.length))return[3,8];p=u[r];return[4,d(p,f)];case 6:l.sent(),l.label=7;case 7:return r++,[3,5];case 8:return[2]}})})}var c,e,f,g,m,k,q,r,u,p;return l(this,function(b){switch(b.label){case 0:c=a.json,e=c.scenes[c.scene||0],f=e.nodes,g=1<f.length,m=0,k=f,b.label=1;case 1:if(!(m<k.length))return[3,4];q=k[m];r=c.nodes[q];u=[d(q,0)];r.extensions&&r.extensions.MSFT_lod&&Array.isArray(r.extensions.MSFT_lod.ids)&&!g&&(p=r.extensions.MSFT_lod.ids,
u.push.apply(u,p.map(function(a,b){return d(a,b+1)})));return[4,h.all(u)];case 2:b.sent(),b.label=3;case 3:return m++,[3,1];case 4:return[2]}})})}function m(a,d,c){var e=function(d){var e=c+"_tex_"+(d&&d.id)+(d&&d.name?"_"+d.name:"");if(d&&!a.textures.has(e)){var f=b.makeTextureSource(d.data,{wrap:{s:q(d.wrapS),t:q(d.wrapT)},mipmap:r.some(function(a){return a===d.minFilter}),noUnpackFlip:!0});a.textures.set(e,f)}return e},f=c+"_mat_"+d.id+"_"+d.name;a.materials.has(f)||(d=b.makeMaterialParameters({color:[d.color[0],
d.color[1],d.color[2]],opacity:d.color[3],alphaMode:d.alphaMode,alphaCutoff:d.alphaCutoff,doubleSided:d.doubleSided,colorMixMode:d.ESRI_externalColorMixMode,textureColor:d.colorTexture?e(d.colorTexture):void 0,textureNormal:d.normalTexture?e(d.normalTexture):void 0,textureOcclusion:d.occlusionTexture?e(d.occlusionTexture):void 0,textureEmissive:d.emissiveTexture?e(d.emissiveTexture):void 0,textureMetallicRoughness:d.metallicRoughnessTexture?e(d.metallicRoughnessTexture):void 0,emissiveFactor:[d.emissiveFactor[0],
d.emissiveFactor[1],d.emissiveFactor[2]],metallicFactor:d.metallicFactor,roughnessFactor:d.roughnessFactor}),a.materials.set(f,d));return f}function q(a){if(33071===a||33648===a||10497===a)return a;t.error("Unexpected TextureSampler WrapMode: "+a)}Object.defineProperty(c,"__esModule",{value:!0});var u=0;c.load=function(b,c,f){void 0===f&&(f={});return n(this,void 0,void 0,function(){var h,k,q,r,p=this;return l(this,function(v){switch(v.label){case 0:return[4,a.Resource.load(b,t,c,f)];case 1:return h=
v.sent(),k="gltf_"+u++,q={lods:[],materials:new Map,textures:new Map},r=!(!h.json.asset.extras||"symbolResource"!==h.json.asset.extras.ESRI_type),[4,e(h,function(a,b,c,e){return n(p,void 0,void 0,function(){var r,n,u,p,v,w,y,z,A,B;return l(this,function(l){switch(l.label){case 0:r=a.mode||4;a:switch(r){case 4:case 5:case 6:n=r;break a;default:n=null}return d.isNone(n)?(t.warnUnsupported("Unsupported primitive mode ("+x[r]+"). Skipping primitive."),[2]):[4,h.getMaterial(a,f)];case 1:return u=l.sent(),
v={transform:g.mat4f64.clone(b)},w={},[4,h.getPositionData(a,f)];case 2:return v.attributes=(w.position=l.sent(),w.normal=null,w.texCoord0=null,w.color=null,w.tangent=null,w),[4,h.getIndexData(a,f)];case 3:p=(v.indices=l.sent(),v.primitiveType=n,v.material=m(q,u,k),v);if(!h.hasNormals(a))return[3,5];y=p.attributes;return[4,h.getNormalData(a,f)];case 4:y.normal=l.sent(),l.label=5;case 5:if(!h.hasTangents(a))return[3,7];z=p.attributes;return[4,h.getTangentData(a,f)];case 6:z.tangent=l.sent(),l.label=
7;case 7:if(!h.hasTextureCoordinates(a))return[3,9];A=p.attributes;return[4,h.getTextureCoordinates(a,f)];case 8:A.texCoord0=l.sent(),l.label=9;case 9:if(!h.hasVertexColors(a))return[3,11];B=p.attributes;return[4,h.getVertexColors(a,f)];case 10:B.color=l.sent(),l.label=11;case 11:return q.lods[c]=q.lods[c]||{parts:[],name:e,lodThreshold:null},q.lods[c].parts.push(p),[2]}})})})];case 2:return v.sent(),[2,{model:q,meta:{isEsriSymbolResource:r,uri:h.uri},customMeta:{}}]}})})};var t=new f.DefaultErrorContext,
r=[9987,9985],x="POINTS LINES LINE_LOOP LINE_STRIP TRIANGLES TRIANGLE_STRIP TRIANGLE_FAN".split(" ")})},"esri/views/3d/glTF/DefaultErrorContext":function(){define(["require","exports","../../../core/Logger"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});var l=n.getLogger("esri.views.3d.glTF");p=function(){function c(){}c.prototype.error=function(d){throw Error("[glTF loader]"+d);};c.prototype.errorUnsupported=function(d){this.error("[Unsupported Feature] "+d)};c.prototype.errorUnsupportedIf=
function(d,c){d&&this.error("[Unsupported Feature] "+c)};c.prototype.assert=function(d,c){d||this.error(c)};c.prototype.warn=function(d){l.warn(d)};c.prototype.warnUnsupported=function(d){this.warn("[Unsupported Feature] "+d)};c.prototype.warnUnsupportedIf=function(d,c){d&&this.warnUnsupported(c)};return c}();c.DefaultErrorContext=p})},"esri/views/3d/glTF/LoaderResult":function(){define(["require","exports","../../../core/tsSupport/assignHelper"],function(p,c,n){Object.defineProperty(c,"__esModule",
{value:!0});c.makeMaterialParameters=function(c){void 0===c&&(c={});return n({color:[1,1,1],opacity:1,alphaMode:"OPAQUE",alphaCutoff:.5,doubleSided:!1,castShadows:!0,receiveShadows:!0,receiveAmbientOcclustion:!0,textureColor:null,textureNormal:null,textureOcclusion:null,textureEmissive:null,textureMetallicRoughness:null,emissiveFactor:[0,0,0],metallicFactor:1,roughnessFactor:1,colorMixMode:"multiply"},c)};c.makeTextureSource=function(c,k){void 0===k&&(k={});return{data:c,parameters:n({wrap:n({s:10497,
t:10497},k.wrap),noUnpackFlip:!0,mipmap:!1},k)}}})},"esri/views/3d/glTF/internal/Resource":function(){define("require exports ../../../../core/tsSupport/awaiterHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/assignHelper ../../../../core/compilerUtils ../../../../core/promiseUtils ../../../../core/string ../../../../core/urlUtils ../../../../core/Version ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/quat ../../../../core/libs/gl-matrix-2/quatf64 ./BinaryStreamReader ./fillDefaults ./pathUtils ../../support/buffer/BufferView ../../support/buffer/utils".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w){function v(a){switch(a.componentType){case 5120:return new x.BufferViewVec2i8(a.raw,a.byteOffset,a.byteStride,a.byteOffset+a.byteStride*a.entryCount);case 5121:return new x.BufferViewVec2u8(a.raw,a.byteOffset,a.byteStride,a.byteOffset+a.byteStride*a.entryCount);case 5122:return new x.BufferViewVec2i16(a.raw,a.byteOffset,a.byteStride,a.byteOffset+a.byteStride*a.entryCount);case 5123:return new x.BufferViewVec2u16(a.raw,a.byteOffset,a.byteStride,a.byteOffset+
a.byteStride*a.entryCount);case 5125:return new x.BufferViewVec2u32(a.raw,a.byteOffset,a.byteStride,a.byteOffset+a.byteStride*a.entryCount);case 5126:return new x.BufferViewVec2f(a.raw,a.byteOffset,a.byteStride,a.byteOffset+a.byteStride*a.entryCount);default:d.neverReached(a.componentType)}}function y(a){return n(this,void 0,void 0,function(){return l(this,function(b){return[2,h.create(function(b,d){var c=new Blob([a]),e=new FileReader;e.onload=function(){b(JSON.parse(e.result))};e.onerror=function(a){d(a)};
e.readAsText(c)})]})})}function z(a,b){return n(this,void 0,void 0,function(){return l(this,function(d){return[2,h.create(function(d,c){var e=new Blob([a],{type:b}),f=URL.createObjectURL(e),g=new Image;g.addEventListener("load",function(){URL.revokeObjectURL(f);d(g)});g.addEventListener("error",function(a){URL.revokeObjectURL(f);c(a)});g.src=f})]})})}Object.defineProperty(c,"__esModule",{value:!0});var A;p=function(){function d(a,b,d,c,e){this.context=a;this.errorContext=b;this.uri=d;this.json=c;
this.glbBuffer=e;this.bufferCache=new Map;this.textureCache=new Map;this.materialCache=new Map;this.nodeParentMap=new Map;this.nodeTransformCache=new Map;this.baseUri=r.splitURI(this.uri).dirPart;this.checkVersionSupported();this.checkRequiredExtensionsSupported();b.errorUnsupportedIf(null==c.scenes,"Scenes must be defined.");b.errorUnsupportedIf(null==c.meshes,"Meshes must be defined");b.errorUnsupportedIf(null==c.nodes,"Nodes must be defined.");this.computeNodeParents()}d.load=function(a,b,c,e){return n(this,
void 0,void 0,function(){var f,m,h,k,q,r;return l(this,function(l){switch(l.label){case 0:return g.endsWith(c,".gltf")?[4,a.loadJSON(c,e)]:[3,2];case 1:return f=l.sent(),[2,new d(a,b,c,f)];case 2:return g.endsWith(c,".glb")?[4,a.loadBinary(c,e)]:[3,5];case 3:return m=l.sent(),[4,d.parseGLB(b,m)];case 4:return h=l.sent(),[2,new d(a,b,c,h.json,h.binaryData)];case 5:return[4,a.loadBinary(c,e)];case 6:return k=l.sent(),q=new u.BinaryStreamReader(k),4<=q.remainingBytes()&&1179937895===q.readUint32()?[4,
d.parseGLB(b,k)]:[3,8];case 7:return h=l.sent(),[2,new d(a,b,c,h.json,h.binaryData)];case 8:return[4,a.loadJSON(c,e)];case 9:return r=l.sent(),[2,new d(a,b,c,r)]}})})};d.parseGLB=function(a,b){return n(this,void 0,void 0,function(){var d,c,e,f,g,m,h,k,q;return l(this,function(l){switch(l.label){case 0:d=new u.BinaryStreamReader(b),a.assert(12<=d.remainingBytes(),"GLB binary data is insufficiently large."),c=d.readUint32(),e=d.readUint32(),f=d.readUint32(),a.assert(1179937895===c,"Magic first 4 bytes do not fit to expected GLB value."),
a.assert(b.byteLength>=f,"GLB binary data is smalller than header specifies."),a.errorUnsupportedIf(2!==e,"Only GLB container version 2 is supported."),g=0,l.label=1;case 1:if(!(8<=d.remainingBytes()))return[3,5];k=d.readUint32();q=d.readUint32();if(0!==g)return[3,3];a.assert(1313821514===q,"First GLB chunck must be JSON.");a.assert(0<=k,"No JSON data found.");return[4,y(d.readUint8Array(k))];case 2:return m=l.sent(),[3,4];case 3:1===g?(a.errorUnsupportedIf(5130562!==q,"Second GLB chunck expected to be BIN."),
h=d.readUint8Array(k)):a.warnUnsupported("More than 2 GLB chunks detected. Skipping."),l.label=4;case 4:return g+=1,[3,1];case 5:return m||a.error("No GLB JSON chunk detected."),[2,{json:m,binaryData:h}]}})})};d.prototype.getBuffer=function(a,b){return n(this,void 0,void 0,function(){var d,c,e,f;return l(this,function(g){switch(g.label){case 0:return d=this.json.buffers[a],c=this.errorContext,null==d.uri?(c.assert(null!=this.glbBuffer,"GLB buffer not present"),[2,this.glbBuffer]):(e=this.bufferCache.get(a))?
[3,2]:[4,this.context.loadBinary(this.resolveUri(d.uri),b)];case 1:f=g.sent(),e=new Uint8Array(f),this.bufferCache.set(a,e),c.assert(e.byteLength===d.byteLength,"Buffer byte lengths should match."),g.label=2;case 2:return[2,e]}})})};d.prototype.getAccessor=function(a,b){return n(this,void 0,void 0,function(){var d,c,e,f,g,m,h,k;return l(this,function(l){switch(l.label){case 0:return d=this.json.accessors[a],c=this.errorContext,c.errorUnsupportedIf(null==d.bufferView,"An accessor bufferView is required."),
c.errorUnsupportedIf(d.type in["MAT2","MAT3","MAT4"],"AttributeType "+d.type+" is not supported"),e=this.json.bufferViews[d.bufferView],[4,this.getBuffer(e.buffer,b)];case 1:return f=l.sent(),g=E[d.type],m=H[d.componentType],h=g*m,k=e.byteStride||h,[2,{raw:f.buffer,byteStride:k,byteOffset:f.byteOffset+(e.byteOffset||0)+(d.byteOffset||0),entryCount:d.count,isDenselyPacked:k===h,componentCount:g,componentByteSize:m,componentType:d.componentType,min:d.min,max:d.max,normalized:!!d.normalized}]}})})};
d.prototype.getIndexData=function(a,b){return n(this,void 0,void 0,function(){var d;return l(this,function(c){switch(c.label){case 0:return null==a.indices?[2,null]:[4,this.getAccessor(a.indices,b)];case 1:d=c.sent();if(d.isDenselyPacked)switch(d.componentType){case 5121:return[2,new Uint8Array(d.raw,d.byteOffset,d.entryCount)];case 5123:return[2,new Uint16Array(d.raw,d.byteOffset,d.entryCount)];case 5125:return[2,new Uint32Array(d.raw,d.byteOffset,d.entryCount)]}else switch(d.componentType){case 5121:return[2,
w.scalar.makeDense(this.wrapAccessor(x.BufferViewUint8,d))];case 5123:return[2,w.scalar.makeDense(this.wrapAccessor(x.BufferViewUint16,d))];case 5125:return[2,w.scalar.makeDense(this.wrapAccessor(x.BufferViewUint32,d))]}return[2]}})})};d.prototype.getPositionData=function(a,b){return n(this,void 0,void 0,function(){var d,c;return l(this,function(e){switch(e.label){case 0:return d=this.errorContext,d.errorUnsupportedIf(null==a.attributes.POSITION,"POSITION vertex data is required."),[4,this.getAccessor(a.attributes.POSITION,
b)];case 1:return c=e.sent(),d.errorUnsupportedIf(5126!==c.componentType,"[POSITION attribute] Expected type FLOAT, found "+G[c.componentType]),d.errorUnsupportedIf(3!==c.componentCount,"POSITION attribute must have 3 components."),[2,this.wrapAccessor(x.BufferViewVec3f,c)]}})})};d.prototype.getNormalData=function(a,b){return n(this,void 0,void 0,function(){var d,c;return l(this,function(e){switch(e.label){case 0:return d=this.errorContext,d.errorUnsupportedIf(null==a.attributes.NORMAL,"NORMAL vertex data is required."),
[4,this.getAccessor(a.attributes.NORMAL,b)];case 1:return c=e.sent(),d.errorUnsupportedIf(5126!==c.componentType,"[NORMAL attribute] Expected type FLOAT, found "+G[c.componentType]),d.errorUnsupportedIf(3!==c.componentCount,"NORMAL attribute must have 3 components."),[2,this.wrapAccessor(x.BufferViewVec3f,c)]}})})};d.prototype.getTangentData=function(a,b){return n(this,void 0,void 0,function(){var d,c;return l(this,function(e){switch(e.label){case 0:return d=this.errorContext,d.errorUnsupportedIf(null==
a.attributes.TANGENT,"TANGENT vertex data is required."),[4,this.getAccessor(a.attributes.TANGENT,b)];case 1:return c=e.sent(),d.errorUnsupportedIf(5126!==c.componentType,"[TANGENT attribute] Expected type FLOAT, found "+G[c.componentType]),d.errorUnsupportedIf(4!==c.componentCount,"NORMAL attribute must have 4 components."),[2,new x.BufferViewVec4f(c.raw,c.byteOffset,c.byteStride,c.byteOffset+c.byteStride*c.entryCount)]}})})};d.prototype.getTextureCoordinates=function(a,b){return n(this,void 0,void 0,
function(){var d,c;return l(this,function(e){switch(e.label){case 0:return d=this.errorContext,d.errorUnsupportedIf(null==a.attributes.TEXCOORD_0,"TEXCOORD_0 vertex data is required."),[4,this.getAccessor(a.attributes.TEXCOORD_0,b)];case 1:c=e.sent();d.errorUnsupportedIf(2!==c.componentCount,"TEXCOORD_0 attribute must have 2 components.");if(5126===c.componentType)return[2,this.wrapAccessor(x.BufferViewVec2f,c)];d.errorUnsupportedIf(!c.normalized,"[TEXCOORD_0 attribute] Integer ComponentTypes are only supported for a normalized accessor.");
return[2,v(c)]}})})};d.prototype.hasNormals=function(a){return!!a.attributes.NORMAL};d.prototype.hasVertexColors=function(a){return!!a.attributes.COLOR_0};d.prototype.hasTextureCoordinates=function(a){return!!a.attributes.TEXCOORD_0};d.prototype.hasTangents=function(a){return!!a.attributes.TANGENT};d.prototype.getVertexColors=function(a,b){return n(this,void 0,void 0,function(){var d,c;return l(this,function(e){switch(e.label){case 0:return d=this.errorContext,d.errorUnsupportedIf(null==a.attributes.COLOR_0,
"COLOR_0 vertex data is required."),[4,this.getAccessor(a.attributes.COLOR_0,b)];case 1:c=e.sent();d.errorUnsupportedIf(4!==c.componentCount&&3!==c.componentCount,"COLOR_0 attribute must have 3 or 4 components.");if(4===c.componentCount){if(5126===c.componentType)return[2,this.wrapAccessor(x.BufferViewVec4f,c)];if(5121===c.componentType)return[2,this.wrapAccessor(x.BufferViewVec4u8,c)];if(5123===c.componentType)return[2,this.wrapAccessor(x.BufferViewVec4u16,c)]}else if(3===c.componentCount){if(5126===
c.componentType)return[2,this.wrapAccessor(x.BufferViewVec3f,c)];if(5121===c.componentType)return[2,this.wrapAccessor(x.BufferViewVec3u8,c)];if(5123===c.componentType)return[2,this.wrapAccessor(x.BufferViewVec3u16,c)]}d.errorUnsupported("[COLOR_0 attribute] Unsupported component type: "+G[c.componentType]);return[2]}})})};d.prototype.getMaterial=function(a,b){return n(this,void 0,void 0,function(){var d,c,e,f,g,m,h,k,q,r,n;return l(this,function(l){switch(l.label){case 0:d=this.errorContext;if(c=
this.materialCache.get(a.material))return[3,12];e=null!=a.material?t.material(this.json.materials[a.material]):t.material();f=e.pbrMetallicRoughness;g=this.hasVertexColors(a);m=void 0;if(!f.baseColorTexture)return[3,2];d.errorUnsupportedIf(0!==(f.baseColorTexture.texCoord||0),"Only TEXCOORD_0 is supported");return[4,this.getTexture(f.baseColorTexture.index,b)];case 1:m=l.sent(),l.label=2;case 2:h=void 0;if(!e.normalTexture)return[3,5];if(0===(e.normalTexture.texCoord||0))return[3,3];d.warnUnsupported("Only TEXCOORD_0 is supported for normal map");
return[3,5];case 3:return[4,this.getTexture(e.normalTexture.index,b)];case 4:h=l.sent(),l.label=5;case 5:k=void 0;if(!e.occlusionTexture)return[3,7];d.errorUnsupportedIf(0!==(e.occlusionTexture.texCoord||0),"Only TEXCOORD_0 is supported");return[4,this.getTexture(e.occlusionTexture.index,b)];case 6:k=l.sent(),l.label=7;case 7:q=void 0;if(!e.emissiveTexture)return[3,9];d.errorUnsupportedIf(0!==(e.emissiveTexture.texCoord||0),"Only TEXCOORD_0 is supported");return[4,this.getTexture(e.emissiveTexture.index,
b)];case 8:q=l.sent(),l.label=9;case 9:r=void 0;if(!f.metallicRoughnessTexture)return[3,11];d.errorUnsupportedIf(0!==(f.metallicRoughnessTexture.texCoord||0),"Only TEXCOORD_0 is supported");return[4,this.getTexture(f.metallicRoughnessTexture.index,b)];case 10:r=l.sent(),l.label=11;case 11:n=null!=a.material?a.material:-1,c={alphaMode:e.alphaMode,alphaCutoff:e.alphaCutoff,color:f.baseColorFactor,doubleSided:!!e.doubleSided,colorTexture:m,normalTexture:h,name:e.name,id:n,occlusionTexture:k,emissiveTexture:q,
emissiveFactor:e.emissiveFactor,metallicFactor:f.metallicFactor,roughnessFactor:f.roughnessFactor,metallicRoughnessTexture:r,vertexColors:g,ESRI_externalColorMixMode:e.extras.ESRI_externalColorMixMode},l.label=12;case 12:return[2,c]}})})};d.prototype.getTexture=function(a,b){return n(this,void 0,void 0,function(){var d,c,e,f,g,m,h,k;return l(this,function(l){switch(l.label){case 0:d=this.errorContext;c=this.json.textures[a];e=t.textureSampler(null!=c.sampler?this.json.samplers[c.sampler]:{});d.errorUnsupportedIf(null==
c.source,"source must be defined for a texture");f=this.json.images[c.source];if(g=this.textureCache.get(a))return[3,6];m=void 0;return f.uri?[4,this.context.loadImage(this.resolveUri(f.uri),b)]:[3,2];case 1:return m=l.sent(),[3,5];case 2:return d.errorUnsupportedIf(null==f.bufferView,"Image bufferView must be defined."),d.errorUnsupportedIf(null==f.mimeType,"Image mimeType must be defined."),h=this.json.bufferViews[f.bufferView],[4,this.getBuffer(h.buffer,b)];case 3:return k=l.sent(),d.errorUnsupportedIf(null!=
h.byteStride,"byteStride not supported for image buffer"),[4,z(new Uint8Array(k.buffer,k.byteOffset+(h.byteOffset||0),h.byteLength),f.mimeType)];case 4:m=l.sent(),l.label=5;case 5:g={data:m,wrapS:e.wrapS,wrapT:e.wrapT,minFilter:e.minFilter,name:f.name,id:a},this.textureCache.set(a,g),l.label=6;case 6:return[2,g]}})})};d.prototype.getNodeTransform=function(b){if(void 0===b)return D;var d=this.nodeTransformCache.get(b);if(!d){var d=this.getNodeTransform(this.getNodeParent(b)),c=this.json.nodes[b];if(c.matrix)d=
a.mat4.multiply(e.mat4f64.create(),d,c.matrix);else if(c.translation||c.rotation||c.scale)d=e.mat4f64.clone(d),c.translation&&a.mat4.translate(d,d,c.translation),c.rotation&&(C[3]=m.quat.getAxisAngle(C,c.rotation),a.mat4.rotate(d,d,C[3],C)),c.scale&&a.mat4.scale(d,d,c.scale);this.nodeTransformCache.set(b,d)}return d};d.prototype.wrapAccessor=function(a,b){return new a(b.raw,b.byteOffset,b.byteStride,b.byteOffset+b.byteStride*(b.entryCount-1)+b.componentByteSize*b.componentCount)};d.prototype.resolveUri=
function(a){return f.makeAbsolute(a,this.baseUri)};d.prototype.getNodeParent=function(a){return this.nodeParentMap.get(a)};d.prototype.checkVersionSupported=function(){b.Version.parse(this.json.asset.version,"glTF").validate(B)};d.prototype.checkRequiredExtensionsSupported=function(){var a=this.json,b=this.errorContext;a.extensionsRequired&&0!==a.extensionsRequired.length&&b.errorUnsupportedIf(!0,"Extensions: "+a.extensionsRequired.join(", "))};d.prototype.computeNodeParents=function(){var a=this;
this.json.nodes.forEach(function(b,d){b.children&&b.children.forEach(function(b){a.nodeParentMap.set(b,d)})})};return d}();c.Resource=p;var B=new b.Version(2,0,"glTF"),D=a.mat4.fromXRotation(e.mat4f64.create(),Math.PI/2),C=q.quatf64.create(),E={SCALAR:1,VEC2:2,VEC3:3,VEC4:4},H=(A={},A[5120]=1,A[5121]=1,A[5122]=2,A[5123]=2,A[5126]=4,A[5125]=4,A),G={5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5125:"UNSIGNED_INT",5126:"FLOAT"}})},"esri/core/libs/gl-matrix-2/quat":function(){define(["require",
"exports","./math/quat"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.quat=n})},"esri/core/libs/gl-matrix-2/math/quat":function(){define("require exports ../factories/mat3f64 ../factories/quatf64 ../factories/vec3f64 ./common ./vec3 ./vec4".split(" "),function(p,c,n,l,k,d,h,g){function f(a,b,d){d*=.5;var c=Math.sin(d);a[0]=c*b[0];a[1]=c*b[1];a[2]=c*b[2];a[3]=Math.cos(d);return a}function b(a,b,d){var c=b[0],e=b[1],f=b[2];b=b[3];var g=d[0],m=d[1],h=d[2];d=d[3];a[0]=c*d+b*g+e*
h-f*m;a[1]=e*d+b*m+f*g-c*h;a[2]=f*d+b*h+c*m-e*g;a[3]=b*d-c*g-e*m-f*h;return a}function a(a,b,c,e){var f=b[0],g=b[1],m=b[2];b=b[3];var h=c[0],k=c[1],l=c[2];c=c[3];var q,r,n;r=f*h+g*k+m*l+b*c;0>r&&(r=-r,h=-h,k=-k,l=-l,c=-c);1-r>d.EPSILON?(q=Math.acos(r),n=Math.sin(q),r=Math.sin((1-e)*q)/n,e=Math.sin(e*q)/n):r=1-e;a[0]=r*f+e*h;a[1]=r*g+e*k;a[2]=r*m+e*l;a[3]=r*b+e*c;return a}function e(a,b){var d=b[0]+b[4]+b[8];if(0<d)d=Math.sqrt(d+1),a[3]=.5*d,d=.5/d,a[0]=(b[5]-b[7])*d,a[1]=(b[6]-b[2])*d,a[2]=(b[1]-
b[3])*d;else{var c=0;b[4]>b[0]&&(c=1);b[8]>b[3*c+c]&&(c=2);var e=(c+1)%3,f=(c+2)%3,d=Math.sqrt(b[3*c+c]-b[3*e+e]-b[3*f+f]+1);a[c]=.5*d;d=.5/d;a[3]=(b[3*e+f]-b[3*f+e])*d;a[e]=(b[3*e+c]+b[3*c+e])*d;a[f]=(b[3*f+c]+b[3*c+f])*d}return a}Object.defineProperty(c,"__esModule",{value:!0});c.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};c.setAxisAngle=f;c.getAxisAngle=function(a,b){var c=2*Math.acos(b[3]),e=Math.sin(c/2);e>d.EPSILON?(a[0]=b[0]/e,a[1]=b[1]/e,a[2]=b[2]/e):(a[0]=1,a[1]=0,a[2]=0);
return c};c.multiply=b;c.rotateX=function(a,b,d){d*=.5;var c=b[0],e=b[1],f=b[2];b=b[3];var g=Math.sin(d);d=Math.cos(d);a[0]=c*d+b*g;a[1]=e*d+f*g;a[2]=f*d-e*g;a[3]=b*d-c*g;return a};c.rotateY=function(a,b,d){d*=.5;var c=b[0],e=b[1],f=b[2];b=b[3];var g=Math.sin(d);d=Math.cos(d);a[0]=c*d-f*g;a[1]=e*d+b*g;a[2]=f*d+c*g;a[3]=b*d-e*g;return a};c.rotateZ=function(a,b,d){d*=.5;var c=b[0],e=b[1],f=b[2];b=b[3];var g=Math.sin(d);d=Math.cos(d);a[0]=c*d+e*g;a[1]=e*d-c*g;a[2]=f*d+b*g;a[3]=b*d-f*g;return a};c.calculateW=
function(a,b){var d=b[0],c=b[1];b=b[2];a[0]=d;a[1]=c;a[2]=b;a[3]=Math.sqrt(Math.abs(1-d*d-c*c-b*b));return a};c.slerp=a;c.random=function(a){var b=d.RANDOM(),c=d.RANDOM(),e=d.RANDOM(),f=Math.sqrt(1-b),b=Math.sqrt(b);a[0]=f*Math.sin(2*Math.PI*c);a[1]=f*Math.cos(2*Math.PI*c);a[2]=b*Math.sin(2*Math.PI*e);a[3]=b*Math.cos(2*Math.PI*e);return a};c.invert=function(a,b){var d=b[0],c=b[1],e=b[2];b=b[3];var f=d*d+c*c+e*e+b*b,f=f?1/f:0;a[0]=-d*f;a[1]=-c*f;a[2]=-e*f;a[3]=b*f;return a};c.conjugate=function(a,
b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=b[3];return a};c.fromMat3=e;c.fromEuler=function(a,b,d,c){var e=.5*Math.PI/180;b*=e;d*=e;c*=e;e=Math.sin(b);b=Math.cos(b);var f=Math.sin(d);d=Math.cos(d);var g=Math.sin(c);c=Math.cos(c);a[0]=e*d*c-b*f*g;a[1]=b*f*c+e*d*g;a[2]=b*d*g-e*f*c;a[3]=b*d*c+e*f*g;return a};c.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};c.copy=g.copy;c.set=g.set;c.add=g.add;c.mul=b;c.scale=g.scale;c.dot=g.dot;c.lerp=g.lerp;c.length=g.length;c.len=c.length;c.squaredLength=
g.squaredLength;c.sqrLen=c.squaredLength;c.normalize=g.normalize;c.exactEquals=g.exactEquals;c.equals=g.equals;c.rotationTo=function(a,b,d){var e=h.dot(b,d);if(-.999999>e)return h.cross(m,q,b),1E-6>h.len(m)&&h.cross(m,u,b),h.normalize(m,m),f(a,m,Math.PI),a;if(.999999<e)return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a;h.cross(m,b,d);a[0]=m[0];a[1]=m[1];a[2]=m[2];a[3]=1+e;return c.normalize(a,a)};var m=k.create(),q=k.fromValues(1,0,0),u=k.fromValues(0,1,0);c.sqlerp=function(b,d,c,e,f,g){a(t,d,f,g);a(r,c,e,g);a(b,
t,r,2*g*(1-g));return b};var t=l.create(),r=l.create();c.setAxes=function(a,b,d,f){var g=x;g[0]=d[0];g[3]=d[1];g[6]=d[2];g[1]=f[0];g[4]=f[1];g[7]=f[2];g[2]=-b[0];g[5]=-b[1];g[8]=-b[2];return c.normalize(a,e(a,g))};var x=n.create()})},"esri/views/3d/glTF/internal/BinaryStreamReader":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(c){this.data=c;this.offset4=0;this.dataUint32=new Uint32Array(this.data,0,Math.floor(this.data.byteLength/
4))}c.prototype.readUint32=function(){var c=this.offset4;this.offset4+=1;return this.dataUint32[c]};c.prototype.readUint8Array=function(c){var k=4*this.offset4;this.offset4+=c/4;return new Uint8Array(this.data,k,c)};c.prototype.remainingBytes=function(){return this.data.byteLength-4*this.offset4};return c}();c.BinaryStreamReader=p})},"esri/views/3d/glTF/internal/fillDefaults":function(){define(["require","exports","../../../../core/tsSupport/assignHelper"],function(p,c,n){Object.defineProperty(c,
"__esModule",{value:!0});var l={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1},k={pbrMetallicRoughness:l,emissiveFactor:[0,0,0],alphaMode:"OPAQUE",alphaCutoff:.5,doubleSided:!1},d={ESRI_externalColorMixMode:"tint"};c.material=function(c){void 0===c&&(c={});var f=n({},l,c.pbrMetallicRoughness),b=n({},d,c.extras);switch(b.ESRI_externalColorMixMode){case "multiply":case "tint":case "ignore":break;default:b.ESRI_externalColorMixMode="tint"}return n({},k,c,{pbrMetallicRoughness:f,extras:b})};
var h={magFilter:9729,minFilter:9987,wrapS:10497,wrapT:10497};c.textureSampler=function(d){return n({},h,d)}})},"esri/views/3d/glTF/internal/pathUtils":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});c.splitURI=function(c){var l,k;c.replace(/^(.*\/)?([^/]*)$/,function(d,c,g){l=c||"";k=g||"";return""});return{dirPart:l,filePart:k}}})},"esri/views/3d/glTF/internal/indexUtils":function(){define(["require","exports","../../../../core/typedArrayUtil",
"../../webgl-engine/lib/geometryDataUtils"],function(p,c,n,l){function k(d){return l.generateDefaultIndexArray(d)}Object.defineProperty(c,"__esModule",{value:!0});c.linearIndexArray=k;c.trianglesToTriangles=function(d){return"number"===typeof d?k(d):n.isUint16Array(d)||n.isUint8Array(d)?new Uint32Array(d):d};c.triangleStripToTriangles=function(d){var c="number"===typeof d?d:d.length;if(3>c)return new Uint32Array(0);var c=c-2,g=new Uint32Array(3*c);if("number"===typeof d)for(var f=0,b=0;b<c;b+=1)0===
b%2?(g[f++]=b,g[f++]=b+1):(g[f++]=b+1,g[f++]=b),g[f++]=b+2;else for(b=f=0;b<c;b+=1){if(0===b%2)var a=d[b],e=d[b+1],m=d[b+2];else a=d[b+1],e=d[b],m=d[b+2];g[f++]=a;g[f++]=e;g[f++]=m}return g};c.triangleFanToTriangles=function(d){var c="number"===typeof d?d:d.length;if(3>c)return new Uint32Array(0);var c=c-2,g=new Uint32Array(3*c);if("number"===typeof d){for(var f=0,b=0;b<c;++b)g[f++]=0,g[f++]=b+1,g[f++]=b+2;return g}for(var a=d[0],e=d[1],b=f=0;b<c;++b){var m=d[b+2];g[f++]=a;g[f++]=e;e=g[f++]=m}return g}})},
"esri/views/3d/layers/graphics/wosrLoader":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../request ../../../../core/asyncUtils ../../../../core/Error ../../../../core/lang ../../../../core/Logger ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/Version ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/support/aaBoundingBox ../../support/imageUtils ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/GeometryData ../../webgl-engine/lib/Texture ../../webgl-engine/materials/DefaultMaterial".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v){function y(b,c){return k(this,void 0,void 0,function(){var f,g;return l(this,function(m){switch(m.label){case 0:return(f=a.isSome(c)&&c.streamDataRequester)?[2,z(b,f,c)]:[4,h.result(d(b,a.unwrap(c)))];case 1:g=m.sent();if(!0===g.ok)return[2,g.value.data];e.throwIfAbortError(g.error);A(g.error);return[2]}})})}function z(a,b,d){return k(this,void 0,void 0,function(){var c;return l(this,function(f){switch(f.label){case 0:return[4,h.result(b(a,"json",
d))];case 1:c=f.sent();if(!0===c.ok)return[2,c.value];e.throwIfAbortError(c.error);A(c.error.details.url);return[2]}})})}function A(a){throw new g("","Request for object resource failed: "+a);}function B(b,d){return k(this,void 0,void 0,function(){var c,e,g,h,k,n,t,u,p,w,y,z,A,B,Z,I,K,ba,ha,W,ea,ga,ma,qa,na,pa,sa,ia,va,Aa,za,xa,Ba,Fa,Ea;return l(this,function(l){switch(l.label){case 0:return g=[],h=[],k=[],n=[],t=m.Version.parse(b.version||"1.0","wosr"),G.validate(t),u="meshsymbol_"+b.model.name,
p=b.textureDefinitions,[4,C(u,p,d)];case 1:w=l.sent();for(y in w)n.push(w[y].engineTexObj);z=b.model.geometries;A=b.materialDefinitions;for(Z=B=0;Z<z.length;Z++){var F=I=z[Z],L=F.params,M=L.topology;l=!0;L.vertexAttributes||(H.warn("Geometry must specify vertex attributes"),l=!1);switch(L.topology){case "PerAttributeArray":break;case "Indexed":case null:case void 0:M=L.faces;if(!M)H.warn("Indexed geometries must specify faces"),l=!1;else if(L.vertexAttributes){var J=void 0;for(J in L.vertexAttributes)(L=
M[J])&&L.values?(null!=L.valueType&&"UInt32"!==L.valueType&&(H.warn("Unsupported indexed geometry indices type '"+L.valueType+"', only UInt32 is currently supported"),l=!1),null!=L.valuesPerElement&&1!==L.valuesPerElement&&(H.warn("Unsupported indexed geometry values per element '"+L.valuesPerElement+"', only 1 is currently supported"),l=!1)):(H.warn("Indexed geometry does not specify face indices for '"+J+"' attribute"),l=!1)}break;default:H.warn("Unsupported topology '"+M+"'"),l=!1}F.params.material||
(H.warn("Geometry requires material"),l=!1);F=F.params.vertexAttributes;L=void 0;for(L in F)F[L].values||(H.warn("Geometries with externally defined attributes are not yet supported"),l=!1);if(l){l=I.params;c=l.material;e=l.texture;K=I.params.vertexAttributes;ba={};for(ha in K)W=K[ha],ea=W.values,ba[ha]={data:ea,size:W.valuesPerElement};ga={};if("PerAttributeArray"===I.params.topology){l=ma=ba.position.data.length/ba.position.size;F=new Uint32Array(l);for(L=0;L<l;L++)F[L]=L;qa=F;for(na in ba)ga[na]=
qa}else for(sa in pa=I.params.faces,pa)ga[sa]=new Uint32Array(pa[sa].values);ia=e?w[e]:null;va=k[c]?k[c][e]:null;va||(Aa=c.substring(c.lastIndexOf("/")+1),za=A[Aa].params,1===za.transparency&&(za.transparency=0),xa=ia&&ia.alphaChannelUsage,Ba=0<za.transparency||"transparency"===xa||"maskAndTransparency"===xa,Fa={ambient:q.vec3f64.fromArray(za.diffuse),diffuse:q.vec3f64.fromArray(za.diffuse),specular:[0,0,0],opacity:1-(za.transparency||0),transparent:Ba,textureAlphaMode:ia?E(ia.alphaChannelUsage):
void 0,textureAlphaCutoff:.33,textureId:ia?ia.engineTexObj.id:void 0,textureInitTransparent:!0,doubleSided:!0,cullFace:"none",flipV:!1,colorMixMode:za.externalColorMixMode||"tint",textureAlphaPremultiplied:!0},a.isSome(d)&&d.materialParamsMixin&&f.mixin(Fa,d.materialParamsMixin),va=new v(Fa,u),k[c]||(k[c]={}),k[c][e]=va);h.push(va);Ea=new r(new x(ba,ga),u);B+=ga.position?ga.position.length:0;g.push(Ea)}}return[2,{stageResources:{textures:n,materials:h,geometries:g},pivotOffset:b.model.pivotOffset,
boundingBox:D(g),numberOfVertices:B,lodThreshold:null}]}})})}function D(a){var b=u.empty();a.forEach(function(a){a=a.boundingInfo;u.expand(b,a.getBBMin());u.expand(b,a.getBBMax())});return b}function C(b,d,c){return k(this,void 0,void 0,function(){var f,g,m,h,k,q,r,n;return l(this,function(l){switch(l.label){case 0:f=[];g=function(g){var m=d[g],h=m.images[0].data;if(!h)return H.warn("Externally referenced texture data is not yet supported"),"continue";var h=m.encoding+";base64,"+h,k="/textureDefinitions/"+
g,l={noUnpackFlip:!0,wrap:{s:10497,t:10497},preMultiplyAlpha:!0};g=a.isSome(c)&&c.disableTextures?e.resolve(null):t.requestImage(h,c);f.push(g.then(function(a){return{refId:k,engineTexObj:new w(a,b,l),alphaChannelUsage:"rgba"===m.channels?m.alphaChannelUsage||"transparency":"none"}}))};for(m in d)g(m);return[4,e.all(f)];case 1:h=l.sent();k={};q=0;for(r=h;q<r.length;q++)n=r[q],k[n.refId]=n;return[2,k]}})})}function E(a){switch(a){case "mask":return"mask";case "maskAndTransparency":return"maskBlend";
case "none":return"opaque";case "transparency":return"blend";default:return"blend"}}Object.defineProperty(c,"__esModule",{value:!0});var H=b.getLogger("esri.views.3d.layers.graphics.objectResourceUtils");c.load=function(a,b){return k(this,void 0,void 0,function(){var d;return l(this,function(c){switch(c.label){case 0:return[4,y(a,b)];case 1:return d=c.sent(),[2,B(d,b)]}})})};c.createStageResources=B;var G=new m.Version(1,2,"wosr")})},"esri/views/3d/support/buffer/math":function(){define(["require",
"exports","./math/vec3","./math/vec4"],function(p,c,n,l){Object.defineProperty(c,"__esModule",{value:!0});c.vec3=n;c.vec4=l})},"esri/views/3d/support/buffer/math/vec4":function(){define(["require","exports","./common"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.transformMat4=function(c,k,d){if(c.count!==k.count)n.logger.error("source and destination buffers need to have the same number of elements");else{var h=c.count,g=d[0],f=d[1],b=d[2],a=d[3],e=d[4],m=d[5],l=d[6],u=d[7],
t=d[8],r=d[9],p=d[10],w=d[11],v=d[12],y=d[13],z=d[14];d=d[15];var A=c.typedBuffer;c=c.typedBufferStride;var B=k.typedBuffer;k=k.typedBufferStride;for(var D=0;D<h;D++){var C=D*c,E=D*k,H=B[E],G=B[E+1],I=B[E+2],E=B[E+3];A[C]=g*H+e*G+t*I+v*E;A[C+1]=f*H+m*G+r*I+y*E;A[C+2]=b*H+l*G+p*I+z*E;A[C+3]=a*H+u*G+w*I+d*E}}};c.transformMat3=function(c,k,d){if(c.count!==k.count)n.logger.error("source and destination buffers need to have the same number of elements");else{var h=c.count,g=d[0],f=d[1],b=d[2],a=d[3],e=
d[4],m=d[5],l=d[6],u=d[7];d=d[8];var t=c.typedBuffer;c=c.typedBufferStride;var r=k.typedBuffer;k=k.typedBufferStride;for(var p=0;p<h;p++){var w=p*c,v=p*k,y=r[v],z=r[v+1],A=r[v+2],v=r[v+3];t[w]=g*y+a*z+l*A;t[w+1]=f*y+e*z+u*A;t[w+2]=b*y+m*z+d*A;t[w+3]=v}}};c.scale=function(c,k,d){var h=Math.min(c.count,k.count),g=c.typedBuffer;c=c.typedBufferStride;var f=k.typedBuffer;k=k.typedBufferStride;for(var b=0;b<h;b++){var a=b*c,e=b*k;g[a]=d*f[e];g[a+1]=d*f[e+1];g[a+2]=d*f[e+2];g[a+3]=d*f[e+3]}}})},"esri/views/3d/webgl-engine/lib/lodRendering/LodRenderer":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/libs/gl-matrix-2/mat4f64 ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../../../core/libs/gl-matrix-2/vec4f64 ../../../../../geometry/support/aaBoundingBox ../../../support/debugFlags ../../../support/buffer/glUtil ../Camera ../DefaultVertexAttributeLocations ../intersectorUtils ../Util ./InstanceData ./InstanceOctree ./LevelSelector ./RenderInstanceData ./utils ../../materials/DefaultMaterial ../../materials/internal/MaterialUtil ../../../../webgl/BufferObject ../../../../webgl/Util ../../../../webgl/VertexArrayObject".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z,A,B){function D(a,b,d,c){w.encodeDoubleVec3(a.modelOrigin,b,d.modelOriginHi,d.modelOriginLo,c);d.model.copyFrom(c,a.model,b);d.modelNormal.copyFrom(c,a.modelNormal,b);a.color&&d.color&&d.color.copyFrom(c,a.color,b);a.featureAttribute&&d.featureAttribute&&d.featureAttribute.copyFrom(c,a.featureAttribute,b)}Object.defineProperty(c,"__esModule",{value:!0});var C=function(a){var b=a.baseBoundingSphere.radius;a=a.levels.map(function(a){return a.minScreenSpaceRadius});
return new r.LevelSelector(b,a)};c.setLevelSelectorFactory=function(a){C=a};var E=function(){function a(a,d){this.glMaterials={};var c=a.rctx,f=d.geometry;d=d.material;var g=f.data.toRenderData();this.materialRep=a.materialRep;d.setParameterValues({instancedDoublePrecision:!0});a=d.createBufferWriter();var m=a.vertexBufferLayout,h=a.elementCount(g),k=a.allocate(h);a.write({},g,k,0);this.geometry=f;this.material=d;this.glMaterials=w.acquireGLMaterials(d,this.materialRep);this.vertexBufferLayout=m;
this.vbo=z.createVertex(c,35044,k.buffer);this.vao=new B(c,e.Default3D,{geometry:b.glLayout(m)},{geometry:this.vbo});this.vertexCount=h}a.prototype.destroy=function(){w.releaseGLMaterials(this.material,this.materialRep);this.vbo.dispose();this.vao.dispose()};Object.defineProperty(a.prototype,"boundingInfo",{get:function(){return this.geometry.boundingInfo},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"triangleCount",{get:function(){return this.vertexCount/3},enumerable:!0,configurable:!0});
a.prototype.intersect=function(a,b,d,c,e,f){var g=this.geometry.id,h=e.toString();this.material.intersect(this.geometry,null,a.transform.transform,a,d,c,function(d,c,k,l,q,r){if(0<=d&&(null==b||b(a.rayBeginPoint,a.rayEndPoint,d))){q={type:"external",metadata:{layerUid:f.layerUid,graphicUid:f.graphicUid(e)}};if(null==a.results.min.drapedLayerOrder||l>=a.results.min.drapedLayerOrder)if(null==a.results.min.dist||d<a.results.min.dist)a.results.min.set(q,h,d,c,a.transform.transform,l,null,g,k),a.results.min.intersector=
"LodRenderer";if(null==a.results.max.drapedLayerOrder||l>=a.results.max.drapedLayerOrder)if(null==a.results.max.dist||d>a.results.max.dist)a.results.max.set(q,h,d,c,a.transform.transform,l,null,g,k),a.results.min.intersector="LodRenderer";a.enable.storeAll&&(r=new m.IntersectorResult(a.results.min.ray),r.set(q,h,d,c,a.transform.transform,l,null,g,k),r.intersector="LodRenderer",a.results.all.push(r))}},null)};return a}();c.LodComponentData=E;var H=function(){function a(a,b){var d=this;this.components=
[];this.minScreenSpaceRadius=b.minScreenSpaceRadius;b.components.forEach(function(b){d.components.push(new E(a,b))})}a.prototype.destroy=function(){this.components.forEach(function(a){a.destroy()})};a.prototype.intersect=function(a,b,d,c,e,f){this.components.forEach(function(g){g.intersect(a,b,d,c,e,f)})};Object.defineProperty(a.prototype,"boundingBox",{get:function(){if(!this._boundingBox){var a=g.empty();this.components.forEach(function(b){g.expand(a,b.boundingInfo.bbMin);g.expand(a,b.boundingInfo.bbMax)});
this._boundingBox=a}return this._boundingBox},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"boundingSphere",{get:function(){if(!this._boundingSphere){var a=this.boundingBox,b=d.vec3f64.create();g.center(a,b);this._boundingSphere={center:b,radius:.5*g.diameter(a)}}return this._boundingSphere},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"triangleCount",{get:function(){return this.components.reduce(function(a,b){return a+b.triangleCount},0)},enumerable:!0,configurable:!0});
return a}();c.LodLevelData=H;p=function(){function g(d,e,f,g){var m=this;this._levels=[];this._renderInstanceData=[];this._highlightRenderInstanceData=[];this._instanceIndex=0;this._slicePlaneEnabled=!1;this._enableLevelSelection=!0;this._lastCamera=new a;this._updateCyclesWithStaticCamera=-1;this._needFullCycle=!1;this._symbol=d;this._optionalFields=e;this._metadata=f;this._instanceBufferLayout=v.getInstanceBufferLayout({instancedDoublePrecision:!0,instanced:e});this._glInstanceBufferLayout=b.glLayout(this._instanceBufferLayout,
{divisor:1});this._instanceData=new u.InstanceData(this._optionalFields,g);this._instanceData.on("instance-added",function(a){m.requestUpdateCycle()});this._instanceData.on("instance-removed",function(a){m.requestUpdateCycle()});this._instanceData.on("instance-transform-changed",function(a){m.requestUpdateCycle()});this._instanceData.on("instance-visibility-changed",function(a){m.requestUpdateCycle(!0)});this._instanceData.on("instance-highlight-changed",function(a){m.requestUpdateCycle(!0)});this._enableLevelSelection=
1<this._symbol.levels.length;c.lodRenderers.push(this)}g.prototype.destroy=function(){c.lodRenderers.splice(c.lodRenderers.indexOf(this),1)};Object.defineProperty(g.prototype,"levels",{get:function(){return this._levels},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"baseBoundingBox",{get:function(){return this._levels[this._levels.length-1].boundingBox},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"baseBoundingSphere",{get:function(){return this._levels[this._levels.length-
1].boundingSphere},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"baseMaterial",{get:function(){return this._levels[this._levels.length-1].components[0].material},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"slicePlaneEnabled",{get:function(){return this._slicePlaneEnabled},set:function(a){this._slicePlaneEnabled=a},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"intersectionHandlerId",{get:function(){return this._metadata.layerUid},enumerable:!0,
configurable:!0});Object.defineProperty(g.prototype,"instanceData",{get:function(){return this._instanceData},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"memoryUsage",{get:function(){var a={cpu:0,gpu:0};this._renderInstanceData.forEach(function(b){b=b.memoryUsage;a.cpu+=b.cpu;a.gpu+=b.gpu});this._highlightRenderInstanceData.forEach(function(b){b=b.memoryUsage;a.cpu+=b.cpu;a.gpu+=b.gpu});return a},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"renderStats",
{get:function(){var a=this,b=this._instanceData.size,d=[];this._levels.forEach(function(b,c){c=a._renderInstanceData[c].size+a._highlightRenderInstanceData[c].size;b=b.triangleCount;d.push({renderedInstances:c,renderedTriangles:c*b,trianglesPerInstance:b})});return{totalInstances:b,renderedInstances:d.reduce(function(a,b){return a+b.renderedInstances},0),renderedTriangles:d.reduce(function(a,b){return a+b.renderedTriangles},0),levels:d}},enumerable:!0,configurable:!0});g.prototype.initializeRenderContext=
function(a){var b=this,d=a.rctx;this._symbol.levels.forEach(function(c){b._levels.push(new H(a,c));b._renderInstanceData.push(new x.RenderInstanceData(d,b._instanceBufferLayout));b._highlightRenderInstanceData.push(new x.RenderInstanceData(d,b._instanceBufferLayout))});this._levelSelector=C(this)};g.prototype.uninitializeRenderContext=function(a){this.invalidateOctree();this._levels.forEach(function(a){a.destroy()});this._renderInstanceData.forEach(function(a){a.destroy()});this._highlightRenderInstanceData.forEach(function(a){a.destroy()})};
Object.defineProperty(g.prototype,"slots",{get:function(){return[6,8]},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"needsHighlight",{get:function(){return 0<this._highlightRenderInstanceData.reduce(function(a,b){return a+b.size},0)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"needsRender",{get:function(){return this.needsUpdates()},enumerable:!0,configurable:!0});g.prototype.prepareRender=function(a){this.runUpdates(a)};g.prototype.render=function(a){var b=
a.rctx,d=6===a.slot?5:8===a.slot?7:null;if(d){if(!this.baseMaterial.isVisible()||!this.baseMaterial.isVisibleInPass(a.pass))return!1;var c=a.camera,c={view:c.viewMatrix,proj:c.projectionMatrix,origin:[0,0,0],viewInvTransp:c.viewInverseTransposeMatrix,lightingData:a.lightingData,viewport:c.viewport,fovY:c.fovY,nearFar:[c.near,c.far],shadowMap:a.shadowMap,shadowMappingEnabled:!!a.shadowMap&&a.shadowMap.enabled,ssaoEnabled:!!a.ssaoHelper&&a.ssaoHelper.enabled,pixelRatio:c.pixelRatio,slicePlane:a.sliceHelper&&
a.sliceHelper.plane,cameraAboveGround:c.aboveGround,hudVisibilityTexture:a.offscreenRenderingHelper?a.offscreenRenderingHelper.hudVisibilityTexture:null};b.bindVAO();for(b=0;b<this._levels.length;++b)this.renderLevel(a,d,c,a.isHighlightPass?this._highlightRenderInstanceData[b]:this._renderInstanceData[b],b);return!0}};g.prototype.intersect=function(a,b,c,e,f){var g=this;if(this.baseMaterial.isVisible()){f=d.vec3f64.create();k.vec3.subtract(f,e,c);var m=function(d){g._instanceData.getCombinedModelTransform(d,
K);a.transform.set(K);k.vec3.transformMat4(M,c,a.transform.inverse);k.vec3.transformMat4(T,e,a.transform.inverse);var f=g._instanceData.getState(d),m=g._instanceData.getLodLevel(d);q.assert(f&u.StateFlags.ACTIVE,"invalid instance state");q.assert(0<=m&&m<g._levels.length,"invaid lod level");g._levels[m].intersect(a,b,M,T,d,g._metadata)};this.baseMaterial.getParameters().verticalOffset?this.octree.forEach(m):this.octree.forEachAlongRay(c,f,m)}};g.prototype.queryDepthRange=function(a){return this.queryDepthRangeOctree(a)};
g.prototype.notifyShaderTransformationChanged=function(){this.invalidateOctree()};g.prototype.requestUpdateCycle=function(a){void 0===a&&(a=!1);this._updateCyclesWithStaticCamera=-1;a&&(this._needFullCycle=!0)};g.prototype.needsUpdates=function(){return 0<this._instanceData.size&&1>this._updateCyclesWithStaticCamera};g.prototype.runUpdates=function(a){if(!f.LOD_INSTANCE_RENDERER_DISABLE_UPDATES){if(this._enableLevelSelection){var b=a.equals(this._lastCamera);this._lastCamera.copyFrom(a);b||this.requestUpdateCycle()}b=
this._needFullCycle?this._instanceData.size:2E3;this._needFullCycle=!1;this.updateInstances(a,b)}};Object.defineProperty(g.prototype,"octree",{get:function(){this._octree||(this._octree=this.buildOctree());return this._octree},enumerable:!0,configurable:!0});g.prototype.invalidateOctree=function(){this._octree&&(this._octree.destroy(),this._octree=null)};g.prototype.buildOctree=function(){for(var a=new t.InstanceOctree(this._instanceData,this.baseBoundingSphere),b=this._instanceData,b=b.view?b.view.state:
null,d=0;d<this._instanceData.capacity;++d)b.get(d)&u.StateFlags.ACTIVE&&a.addInstance(d);return a};g.prototype.queryDepthRangeOctree=function(a){var b=a.eye,d=a.viewForward,c=this.octree.findClosest(d,"front-to-back",a.frustum),e=this.octree.findClosest(d,"back-to-front",a.frustum);return null!=c&&null!=e?(this._instanceData.view.boundingSphere.getVec(c,I),k.vec3.subtract(I,I,b),c=k.vec3.dot(I,d)-I[3],this._instanceData.view.boundingSphere.getVec(e,I),k.vec3.subtract(I,I,b),b=k.vec3.dot(I,d)+I[3],
{near:Math.max(a.near,c),far:Math.min(a.far,b)}):{near:Infinity,far:-Infinity}};g.prototype.startUpdateCycle=function(){this._updateCyclesWithStaticCamera++;this._renderInstanceData.forEach(function(a){a.startUpdateCylce()});this._highlightRenderInstanceData.forEach(function(a){a.startUpdateCylce()})};g.prototype.updateInstances=function(a,b){var d=this._enableLevelSelection,c=this._levelSelector;c.updateCamera(a);this._renderInstanceData.forEach(function(a){a.beginUpdate()});this._highlightRenderInstanceData.forEach(function(a){a.beginUpdate()});
a=this._instanceData;var e=this._instanceData.view,f=a.capacity,g=this._instanceIndex;b=Math.min(a.size,b);for(var m=0;m<b;++m){0===g&&this.startUpdateCycle();var h=e.state.get(g),k=0;if(h&u.StateFlags.ALLOCATED){var l=e.lodLevel.get(g);h&u.StateFlags.ACTIVE&&this._renderInstanceData[l].freeTail();h&u.StateFlags.HIGHLIGHT_ACTIVE&&this._highlightRenderInstanceData[l].freeTail();if(h&u.StateFlags.REMOVE)a.freeInstance(g);else if(h&u.StateFlags.VISIBLE){l=0;d&&(e.modelOrigin.getVec(g,G),l=c.selectLevel(G,
a.getCombinedMedianScaleFactor(g)));k=h&~(u.StateFlags.ACTIVE|u.StateFlags.HIGHLIGHT_ACTIVE|u.StateFlags.TRANSFORM_CHANGED);if(0<=l){var q=this._renderInstanceData[l],r=q.allocateHead();D(e,g,q.view,r);k|=u.StateFlags.ACTIVE;h&u.StateFlags.HIGHLIGHT&&(q=this._highlightRenderInstanceData[l],r=q.allocateHead(),D(e,g,q.view,r),k|=u.StateFlags.HIGHLIGHT_ACTIVE)}e.state.set(g,k);e.lodLevel.set(g,l)}else k=h&~(u.StateFlags.ACTIVE|u.StateFlags.HIGHLIGHT_ACTIVE|u.StateFlags.TRANSFORM_CHANGED),e.state.set(g,
k);this._octree&&(l=!!(h&u.StateFlags.ACTIVE),k=!!(k&u.StateFlags.ACTIVE),!l&&k?this._octree.addInstance(g):l&&!k?this._octree.removeInstance(g):l&&k&&h&u.StateFlags.TRANSFORM_CHANGED&&(this._octree.removeInstance(g),this._octree.addInstance(g)));g=(g+1)%f}else g=(g+1)%f,b++}this._instanceIndex=g;this._renderInstanceData.forEach(function(a){a.endUpdate()});this._highlightRenderInstanceData.forEach(function(a){a.endUpdate()})};g.prototype.renderLevel=function(a,b,d,c,e){var f=this;this._levels[e].components.forEach(function(g){f.renderComponent(a,
b,d,c,g,e)})};g.prototype.renderComponent=function(a,b,d,c,g,m){var h=g.glMaterials[a.pass];if(h&&h.beginSlot(b)&&h.isVisible()&&h.isVisibleInPass(a.pass)&&0!==c.size){var k=a.rctx,l=k.capabilities.instancing,r=h.getDrawMode();d.origin=[0,0,0];h.bind(k,d);k.bindVAO(g.vao);b=h.getProgram();A.assertCompatibleVertexAttributeLocations(g.vao,b);a.isHighlightPass&&(k.bindTexture(a.offscreenRenderingHelper?a.offscreenRenderingHelper.depthTexture:null,5),b.setUniform1i("depthTex",5),b.setUniform4f("highlightViewportPixelSz",
0,0,1/d.viewport[2],1/d.viewport[3]));h.bindView(k,d);f.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL&&0===a.pass&&(b.setUniform4fv("externalColor",N[Math.min(m,N.length-1)]),b.setUniform1i("colorMixMode",y.colorMixModes.replace));a=c.capacity;m=c.headIndex;b=c.tailIndex;var n=c.firstIndex,t=this._glInstanceBufferLayout,u=function(a,b){A.bindVertexBufferLayout(k,e.Default3D,c.buffer,t,a);l.drawArraysInstanced(r,0,g.vertexCount,b-a);A.unbindVertexBufferLayout(k,e.Default3D,c.buffer,t)};g.material.getParameters().transparent&&
null!=n?m>b?(q.assert(n>=b&&n<=m,"invalid firstIndex"),u(n,m),u(b,n)):m<b&&(n<=m?(q.assert(0<=n&&n<=m,"invalid firstIndex"),u(n,m),u(b,a),u(0,n)):(q.assert(n>=b&&n<=a,"invalid firstIndex"),u(n,a),u(0,m),u(b,n))):m>b?u(b,m):m<b&&(u(0,m),u(b,a));k.bindVAO(null);h.release(k,d)}};return g}();c.LodRenderer=p;c.lodRenderers=[];var G=d.vec3f64.create(),I=h.vec4f64.create(),K=l.mat4f64.create(),M=d.vec3f64.create(),T=d.vec3f64.create(),N=[[1,0,1,1],[0,0,1,1],[0,1,0,1],[1,1,0,1],[1,0,0,1]]})},"esri/views/3d/webgl-engine/lib/lodRendering/InstanceData":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/Evented ../../../../../core/libs/gl-matrix-2/mat3 ../../../../../core/libs/gl-matrix-2/mat3f64 ../../../../../core/libs/gl-matrix-2/mat4 ../../../../../core/libs/gl-matrix-2/mat4f64 ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../support/mathUtils ../../../support/buffer/BufferView ../../../support/buffer/InterleavedLayout ../Util".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q){Object.defineProperty(c,"__esModule",{value:!0});var u;(function(a){a[a.ALLOCATED=1]="ALLOCATED";a[a.ACTIVE=2]="ACTIVE";a[a.VISIBLE=4]="VISIBLE";a[a.HIGHLIGHT=8]="HIGHLIGHT";a[a.HIGHLIGHT_ACTIVE=16]="HIGHLIGHT_ACTIVE";a[a.REMOVE=32]="REMOVE";a[a.TRANSFORM_CHANGED=64]="TRANSFORM_CHANGED"})(u=c.StateFlags||(c.StateFlags={}));var t=function(){return function(a){this.localTransform=a.getField("localTransform",e.BufferViewMat4f64);this.globalTransform=a.getField("globalTransform",
e.BufferViewMat4f64);this.modelOrigin=a.getField("modelOrigin",e.BufferViewVec3f64);this.model=a.getField("model",e.BufferViewMat3f);this.modelNormal=a.getField("modelNormal",e.BufferViewMat3f);this.modelScaleFactors=a.getField("modelScaleFactors",e.BufferViewVec2f);this.boundingSphere=a.getField("boundingSphere",e.BufferViewVec4f64);this.color=a.getField("color",e.BufferViewVec4f);this.featureAttribute=a.getField("featureAttribute",e.BufferViewVec4f);this.state=a.getField("state",e.BufferViewUint8);
this.lodLevel=a.getField("lodLevel",e.BufferViewUint8)}}();c.View=t;p=function(b){function d(a,d){var c=b.call(this)||this;c._capacity=0;c._size=0;c._next=0;var e=m.newLayout().mat4f64("localTransform").mat4f64("globalTransform").vec4f64("boundingSphere").vec3f64("modelOrigin").mat3f("model").mat3f("modelNormal").vec2f("modelScaleFactors");0<=a.indexOf("color")&&(e=e.vec4f("color"));0<=a.indexOf("featureAttribute")&&(e=e.vec4f("featureAttribute"));e=e.u8("state").u8("lodLevel").alignTo(8);c._layout=
e;c._shaderTransformation=d;return c}n(d,b);Object.defineProperty(d.prototype,"capacity",{get:function(){return this._capacity},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"buffer",{get:function(){return this._buffer.buffer},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0});d.prototype.addInstance=
function(){this._size+1>this._capacity&&this.grow();var a=this.findSlot();this._view.state.set(a,u.ALLOCATED);this._size++;this.emit("instance-added",{index:a});return a};d.prototype.removeInstance=function(a){var b=this._view.state;q.assert(0<=a&&a<this._capacity&&b.get(a)&u.ALLOCATED,"invalid instance handle");this.getStateFlag(a,u.ACTIVE)?this.setStateFlags(a,u.REMOVE):this.freeInstance(a);this.emit("instance-removed",{index:a})};d.prototype.freeInstance=function(a){var b=this._view.state;q.assert(0<=
a&&a<this._capacity&&b.get(a)&u.ALLOCATED,"invalid instance handle");b.set(a,0);this._size--};d.prototype.setLocalTransform=function(a,b,d){void 0===d&&(d=!0);this._view.localTransform.setMat(a,b);d&&this.updateModelTransform(a)};d.prototype.getLocalTransform=function(a,b){this._view.localTransform.getMat(a,b)};d.prototype.setGlobalTransform=function(a,b,d){void 0===d&&(d=!0);this._view.globalTransform.setMat(a,b);d&&this.updateModelTransform(a)};d.prototype.getGlobalTransform=function(a,b){this._view.globalTransform.getMat(a,
b)};d.prototype.updateModelTransform=function(b){var d=this._view,c=w,e=v;d.localTransform.getMat(b,y);d.globalTransform.getMat(b,z);var g=h.mat4.multiply(z,z,y);f.vec3.set(c,g[12],g[13],g[14]);d.modelOrigin.setVec(b,c);k.mat3.fromMat4(e,g);d.model.setMat(b,e);c=a.scaleFromMatrix(w,g);c.sort();d.modelScaleFactors.set(b,0,c[1]);d.modelScaleFactors.set(b,1,c[2]);k.mat3.invert(e,e);k.mat3.transpose(e,e);d.modelNormal.setMat(b,e);this.setStateFlags(b,u.TRANSFORM_CHANGED);this.emit("instance-transform-changed",
{index:b})};d.prototype.getModelTransform=function(a,b){var d=this._view;d.model.getMat(a,v);d.modelOrigin.getVec(a,w);b[0]=v[0];b[1]=v[1];b[2]=v[2];b[3]=0;b[4]=v[3];b[5]=v[4];b[6]=v[5];b[7]=0;b[8]=v[6];b[9]=v[7];b[10]=v[8];b[11]=0;b[12]=w[0];b[13]=w[1];b[14]=w[2];b[15]=1};d.prototype.applyShaderTransformation=function(a,b){this._shaderTransformation&&this._shaderTransformation.applyTransform(this,a,b)};d.prototype.getCombinedModelTransform=function(a,b){this.getModelTransform(a,b);this._shaderTransformation&&
this._shaderTransformation.applyTransform(this,a,b);return b};d.prototype.getCombinedLocalTransform=function(a,b){this._view.localTransform.getMat(a,b);this._shaderTransformation&&this._shaderTransformation.applyTransform(this,a,b);return b};d.prototype.getCombinedMaxScaleFactor=function(a){var b=this._view.modelScaleFactors.get(a,1);this._shaderTransformation&&(a=this._shaderTransformation.scaleFactor(w,this,a),b*=Math.max(a[0],a[1],a[2]));return b};d.prototype.getCombinedMedianScaleFactor=function(a){var b=
this._view.modelScaleFactors.get(a,0);this._shaderTransformation&&(a=this._shaderTransformation.scaleFactor(w,this,a),a.sort(),b*=a[1]);return b};d.prototype.getModel=function(a,b){this._view.model.getMat(a,b)};d.prototype.setFeatureAttribute=function(a,b){this._view.featureAttribute.setVec(a,b)};d.prototype.getFeatureAttribute=function(a,b){this._view.featureAttribute.getVec(a,b)};d.prototype.setColor=function(a,b){this._view.color.setVec(a,b)};d.prototype.getColor=function(a,b){this._view.color.getVec(a,
b)};d.prototype.setVisible=function(a,b){b!==this.getVisible(a)&&(this.setStateFlag(a,u.VISIBLE,b),this.emit("instance-visibility-changed",{index:a}))};d.prototype.getVisible=function(a){return this.getStateFlag(a,u.VISIBLE)};d.prototype.setHighlight=function(a,b){b!==this.getHighlight(a)&&(this.setStateFlag(a,u.HIGHLIGHT,b),this.emit("instance-highlight-changed",{index:a}))};d.prototype.getHighlight=function(a){return this.getStateFlag(a,u.HIGHLIGHT)};d.prototype.getState=function(a){return this._view.state.get(a)};
d.prototype.getLodLevel=function(a){return this._view.lodLevel.get(a)};d.prototype.countFlags=function(a){for(var b=0,d=0;d<this._capacity;++d)this.getState(d)&a&&++b;return b};d.prototype.setStateFlags=function(a,b){var d=this._view.state;b|=d.get(a);d.set(a,b)};d.prototype.clearStateFlags=function(a,b){var d=this._view.state;b=d.get(a)&~b;d.set(a,b)};d.prototype.setStateFlag=function(a,b,d){d?this.setStateFlags(a,b):this.clearStateFlags(a,b)};d.prototype.getStateFlag=function(a,b){return!!(this._view.state.get(a)&
b)};d.prototype.grow=function(){var a=Math.max(r,Math.floor(this._capacity*x)),b=this._layout.createBuffer(a);if(this._buffer){var d=new Uint8Array(this._buffer.buffer);(new Uint8Array(b.buffer)).set(d)}this._capacity=a;this._buffer=b;this._view=new t(this._buffer)};d.prototype.findSlot=function(){for(var a=this._view.state,b=this._next;a.get(b)&u.ALLOCATED;)b=(b+1)%this._capacity;this._next=(b+1)%this._capacity;return b};return d}(l);c.InstanceData=p;var r=1024,x=2,w=b.vec3f64.create(),v=d.mat3f64.create(),
y=g.mat4f64.create(),z=g.mat4f64.create()})},"esri/views/3d/webgl-engine/lib/lodRendering/InstanceOctree":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/libs/gl-matrix-2/mat4f64 ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../support/mathUtils ../Octree".split(" "),function(p,c,n,l,k,d,h,g){Object.defineProperty(c,"__esModule",{value:!0});p=function(c){function b(a,b){var e=c.call(this,[0,0,0],1,{getCenter:function(a){var b=
e._instanceData.view.boundingSphere,d=e._tmpCenter;d[0]=b.get(a,0);d[1]=b.get(a,1);d[2]=b.get(a,2);return d},getRadius:function(a){return e._instanceData.view.boundingSphere.get(a,3)}},{maximumDepth:25})||this;e._tmpCenter=d.vec3f64.create();e._tmpMat4=l.mat4f64.create();e._instanceData=a;e._boundingSphere=b;return e}n(b,c);b.prototype.addInstance=function(a){var b=this._instanceData.view.boundingSphere,d=this._instanceData.getCombinedModelTransform(a,this._tmpMat4),c=k.vec3.transformMat4(this._tmpCenter,
this._boundingSphere.center,d),d=this._boundingSphere.radius*h.maxScale(d);b.set(a,0,c[0]);b.set(a,1,c[1]);b.set(a,2,c[2]);b.set(a,3,d);this.add(a)};b.prototype.removeInstance=function(a){this.remove(a)};return b}(g);c.InstanceOctree=p})},"esri/views/3d/webgl-engine/lib/lodRendering/LevelSelector":function(){define(["require","exports","../Camera"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(c,d){this.thresholdScale=1;this._camera=new n;this._worldSpaceRadius=
c;this._thresholds=d.map(function(d){return d})}c.prototype.updateCamera=function(c){this._camera.copyFrom(c)};c.prototype.selectLevel=function(c,d){c=this._camera.computeScreenPixelSizeAt(c);d=this._worldSpaceRadius*d/c;c=this._thresholds;for(var h=-1,g=0;g<c.length;++g)d>=c[g]*this.thresholdScale&&(h=g);return h};return c}();c.LevelSelector=p})},"esri/views/3d/webgl-engine/lib/lodRendering/RenderInstanceData":function(){define(["require","exports","../../../support/buffer/BufferView","../Util",
"./BackedBufferObject"],function(p,c,n,l,k){Object.defineProperty(c,"__esModule",{value:!0});var d=function(){return function(a){this.modelOriginHi=a.getField("modelOriginHi",n.BufferViewVec3f);this.modelOriginLo=a.getField("modelOriginLo",n.BufferViewVec3f);this.model=a.getField("model",n.BufferViewMat3f);this.modelNormal=a.getField("modelNormal",n.BufferViewMat3f);this.color=a.getField("instanceColor",n.BufferViewVec4f);this.featureAttribute=a.getField("instanceFeatureAttribute",n.BufferViewVec4f)}}();
c.View=d;p=function(){function c(a,b){this._tailIndex=this._headIndex=0;this._captureFirstIndex=!0;this._updating=!1;this._prevHeadIndex=0;this._resized=!1;this._rctx=a;this._instanceBufferLayout=b;this._elementSize=b.stride;this._capacity=1}c.prototype.destroy=function(){this._buffer&&this._buffer.destroy()};Object.defineProperty(c.prototype,"buffer",{get:function(){return this._buffer.buffer},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"view",{get:function(){return this._view},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"capacity",{get:function(){return this._capacity},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"size",{get:function(){var a=this._headIndex,b=this._tailIndex;return a>=b?a-b:a+this._capacity-b},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isEmpty",{get:function(){return this._headIndex===this._tailIndex},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isFull",{get:function(){return this._tailIndex===
(this._headIndex+1)%this._capacity},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"headIndex",{get:function(){return this._headIndex},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"tailIndex",{get:function(){return this._tailIndex},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"firstIndex",{get:function(){return this._firstIndex},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"memoryUsage",{get:function(){return this._buffer?
this._buffer.memoryUsage:{cpu:0,gpu:0}},enumerable:!0,configurable:!0});c.prototype.reset=function(){this._tailIndex=this._headIndex=0;this._firstIndex=null};c.prototype.startUpdateCylce=function(){this._captureFirstIndex=!0};c.prototype.beginUpdate=function(){l.assert(!this._updating,"already updating");this._updating=!0;this._prevHeadIndex=this._headIndex};c.prototype.endUpdate=function(){l.assert(this._updating,"not updating");this.size<f*this.capacity&&this.shrink();this._resized?(this._buffer.transferAll(),
this._resized=!1):this.transferRange(this._prevHeadIndex,this._headIndex);this._updating=!1};c.prototype.allocateHead=function(){l.assert(this._updating,"not updating");this.isFull&&this.grow();var a=this.headIndex;this._captureFirstIndex&&(this._firstIndex=a,this._captureFirstIndex=!1);this.incrementHead();l.assert(this._headIndex!==this._tailIndex,"invalid pointers");return a};c.prototype.freeTail=function(){l.assert(this._updating,"not updating");l.assert(0<this.size,"invalid size");var a=this._tailIndex===
this._firstIndex;this.incrementTail();a&&(this._firstIndex=this._tailIndex)};c.prototype.grow=function(){this.resize(Math.max(h,Math.floor(this._capacity*g)))};c.prototype.shrink=function(){a&&this.resize(Math.max(h,Math.floor(this._capacity*b)))};c.prototype.resize=function(a){l.assert(this._updating,"not updating");if(a!==this._capacity){var b=new k(this._rctx,34962,35044,this._elementSize,a);if(this._buffer){this._firstIndex&&(this._firstIndex=(this._firstIndex+this._capacity-this._tailIndex)%
this._capacity);var c=this.size,e=this.compactInstances(b);l.assert(e===c,"invalid compaction");this._buffer.destroy();this._tailIndex=0;this._headIndex=e;this._prevHeadIndex=0}this._resized=!0;this._capacity=a;this._buffer=b;this._view=new d(this._instanceBufferLayout.createView(this._buffer.array))}};c.prototype.compactInstances=function(a){var b=this._headIndex,d=this._tailIndex;return d<b?(this._buffer.copyRange(d,b,a),b-d):d>b?(this._buffer.copyRange(d,this._capacity,a),0<b&&this._buffer.copyRange(0,
b,a,this._capacity-d),b+(this._capacity-d)):0};c.prototype.incrementHead=function(a){void 0===a&&(a=1);this._headIndex=(this._headIndex+a)%this._capacity};c.prototype.incrementTail=function(a){void 0===a&&(a=1);this._tailIndex=(this._tailIndex+a)%this._capacity};c.prototype.transferRange=function(a,b){a<b?this._buffer.transferRange(a,b):a>b&&(0<b&&this._buffer.transferRange(0,b),this._buffer.transferRange(a,this._capacity))};return c}();c.RenderInstanceData=p;var h=1024,g=2,f=.3,b=.5,a=!0})},"esri/views/3d/webgl-engine/lib/lodRendering/BackedBufferObject":function(){define(["require",
"exports","../../../../webgl/BufferObject"],function(p,c,n){return function(){function c(c,d,h,g,f){this._elementSize=g;this._buffer=new n(c,d,h);this.resize(f)}c.prototype.destroy=function(){this._buffer.dispose()};Object.defineProperty(c.prototype,"elementSize",{get:function(){return this._elementSize},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"capacity",{get:function(){return this._capacity},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"array",{get:function(){return this._array},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"buffer",{get:function(){return this._buffer},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"memoryUsage",{get:function(){return{cpu:this._capacity*this._elementSize,gpu:this._capacity*this._elementSize}},enumerable:!0,configurable:!0});c.prototype.copyRange=function(c,d,h,g){void 0===g&&(g=0);c=new Uint8Array(this.array,c*this.elementSize,(d-c)*this.elementSize);(new Uint8Array(h.array,g*this.elementSize)).set(c)};
c.prototype.transferAll=function(){this._buffer.setData(this._array)};c.prototype.transferRange=function(c,d){c*=this._elementSize;this._buffer.setSubData(this._array,c,c,d*this._elementSize)};c.prototype.resize=function(c){var d=c*this._elementSize,h=new ArrayBuffer(d);this._array&&(c>=this._capacity?(new Uint8Array(h)).set(new Uint8Array(this._array)):(new Uint8Array(h)).set((new Uint8Array(this._array)).subarray(0,c*this._elementSize)));this._array=h;this._buffer.setData(d);this._capacity=c};return c}()})},
"esri/views/3d/webgl-engine/lib/lodRendering/utils":function(){define(["require","exports","../doublePrecisionUtils"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.acquireGLMaterials=function(d,c){var g={};g[0]=c.acquire(d,"color");g[3]=c.acquire(d,"depthShadowMap");g[2]=c.acquire(d,"normal");g[1]=c.acquire(d,"depth");g[4]=c.acquire(d,"highlight");return g};c.releaseGLMaterials=function(d,c){c.release(d.id,"color");c.release(d.id,"depthShadowMap");c.release(d.id,"normal");c.release(d.id,
"depth");c.release(d.id,"highlight")};c.encodeDoubleVec3=function(d,c,g,f,b){l[0]=d.get(c,0);l[1]=d.get(c,1);l[2]=d.get(c,2);n.encodeDoubleArray(l,k,3);g.set(b,0,k[0]);f.set(b,0,k[1]);g.set(b,1,k[2]);f.set(b,1,k[3]);g.set(b,2,k[4]);f.set(b,2,k[5])};var l=new Float64Array(3),k=new Float32Array(6)})},"esri/views/3d/layers/graphics/Graphics3DPathSymbolLayer":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/Error ../../../../core/lang ../../../../core/maybe ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec2f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f32 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../layers/graphics/dehydratedFeatures ./Graphics3DObject3DGraphicLayer ./Graphics3DSymbolCommonCode ./Graphics3DSymbolLayer ./graphicUtils ../support/FastSymbolUpdates ../../support/mathUtils ../../support/projectionUtils ../../webgl-engine/Stage ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/Object3D ../../webgl-engine/lib/pathGeometryUtils ../../webgl-engine/materials/DefaultMaterial ../../webgl-engine/materials/PathMaterial".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z,A,B,D,C,E,H){function G(a,b,d,c,f,g,m,h){switch(b){case "world":c=0;for(f=a.vertices;c<f.length;c++)b=f[c],e.vec3.add(P,b.pos,a.offset),d.worldUpAtPosition(P,J),b.setFrameFromUpVector(J),b.computeRotationAxisAndAngleFromUpVector();break;case "terrain":for(var k=0,l=a.vertices;k<l.length;k++){var r=b=l[k],n=a.offset,q=c,t=f,u=d,p=g,x=m,w=h,v=P;e.vec3.set(J,r.posGS[0]+w,r.posGS[1],r.posGS[2]);K(J,q,t,u,p,x,F);e.vec3.set(J,r.posGS[0],r.posGS[1]+w,
r.posGS[2]);K(J,q,t,u,p,x,Y);e.vec3.add(J,r.pos,n);e.vec3.subtract(O,F,J);e.vec3.normalize(O,O);e.vec3.subtract(V,Y,J);e.vec3.normalize(V,V);e.vec3.cross(Q,O,V);e.vec3.copy(v,Q);b.setFrameFromUpVector(P);b.computeRotationAxisAndAngleFromUpVector()}break;case "path":for(e.vec3.add(P,a.vertices[0].pos,a.offset),d.worldUpAtPosition(P,J),C.computeMinimumRotationTangentFrame(a,J),d=0,a=a.vertices;d<a.length;d++)b=a[d],c=y.sign(e.vec3.dot(b.frame.right,b.vRight)),e.vec3.cross(b.rotationFrame.up,b.vRight,
b.vLeft),e.vec3.scale(b.rotationFrame.up,b.rotationFrame.up,c),e.vec3.normalize(b.rotationFrame.up,b.rotationFrame.up),f=e.vec3.dot(b.rotationFrame.up,b.frame.up),g=e.vec3.dot(b.rotationFrame.up,b.frame.right),e.vec3.scale(P,b.frame.up,-g),e.vec3.scale(L,b.frame.right,f),e.vec3.add(P,P,L),e.vec3.normalize(b.rotationFrame.right,P),e.vec3.negate(P,b.vLeft),b.rotationAngle=-c*(Math.PI-y.acos(e.vec3.dot(P,b.vRight))),b.maxStretchDistance=Math.abs(Math.min(b.vLeftLength,b.vRightLength)/Math.cos(.5*(Math.PI-
b.rotationAngle)))}}function I(a,b,d){switch(a){case "symbolValue":return d;case "proportional":return b;default:return a}}function K(a,b,d,c,e,f,g){z.bufferToBuffer(a,e,0,J,f,0,1);z.bufferToBuffer(J,f,0,g,c.spatialReference,0,1);N.x=J[0];N.y=J[1];N.z=J[2];a=r.computeElevation(d,N,b,c,null);c.setAltitude(a,g)}function M(a,b,d,c){a=a.stageObject;var f=a.getGeometryRecords(),g=f.length,m=0,h=N.spatialReference=d.spatialReference;T.spatialReference=c.spatialReference;for(var k=0;k<g;k++){var l=f[k].geometry,
q=l.metadata,n=q.pathGeometry,t=n.builder.path,u=q.geometrySR;S.spatialReference=u;for(var p=t,x=b,w=d,v=c,y=0,z=0,A=p.vertices;z<A.length;z++){var B=A[z];N.x=B.posES[0];N.y=B.posES[1];N.z=B.posES[2];var C=r.computeElevation(w,N,x,v,R),y=y+R.terrainElevation;e.vec3.add(J,B.pos,p.offset);v.setAltitude(C,J);e.vec3.subtract(B.pos,J,p.offset)}p.updatePathVertexInformation();m+=y/p.vertices.length;"world"!==t.upVector&&G(t,q.upVectorAlignment,c,b,d,u,h,q.stencilWidth);n.onPathChanged();l.invalidateBoundingInfo();
a.geometryVertexAttrsUpdated(k)}return m/g}Object.defineProperty(c,"__esModule",{value:!0});p=function(c){function m(b,d,e,f){b=c.call(this,b,d,e,f)||this;b._intrinsicSize=a.vec2f64.fromValues(1,1);b.upVectorAlignment="path";b.stencilWidth=.1;return b}n(m,c);m.prototype.doLoad=function(){return d(this,void 0,void 0,function(){var a,d,c,e,m,l,r,n,t,u,p,x,y,z;return k(this,function(k){a=f.isSome(this.symbolLayer.width)?this.symbolLayer.width:f.isSome(this.symbolLayer.height)?this.symbolLayer.height:
this.symbolLayer.size;d=f.isSome(this.symbolLayer.height)?this.symbolLayer.height:a;this._vvConvertOptions={modelSize:[1,1,1],symbolSize:[a,1,d],unitInMeters:this._context.renderCoordsHelper.unitInMeters,transformation:{anchor:[0,0,0],scale:[1,1,1],rotation:[0,0,0]},supportedTypes:{size:!0,color:!0,opacity:!0,rotation:!1}};this._fastUpdates=this._context.renderer&&this._context.renderer.visualVariables&&0<this._context.renderer.visualVariables.length?v.initFastSymbolUpdatesState(this._context.renderer,
this._vvConvertOptions):{enabled:!1};c=this.symbolLayer.anchor||"center";this.upVectorAlignment="path";"heading"===this.symbolLayer.profileRotation&&(this.upVectorAlignment="world");e=this.symbolLayer.profile||"circle";switch(e){default:this._profile=C.Profile.circle(X);break;case "quad":this._profile=C.Profile.rect()}m=[0,0];"center"!==c&&(m={left:[.5,0],right:[-.5,0],top:[0,-.5],bottom:[0,.5]}[c],this._profile.translate(m[0],m[1]));l=this.symbolLayer.join||"simple";switch(l){case "round":this._extruder=
new C.MiterExtruder(0,3);break;case "bevel":this._extruder=new C.MiterExtruder(0,1);break;case "miter":this._extruder=new C.MiterExtruder(.8*Math.PI,1);break;default:this._extruder=new C.SimpleExtruder}r=this.symbolLayer.cap||"butt";switch(r){case "none":this._startCap=new C.NoCapBuilder;this._endCap=new C.NoCapBuilder;break;default:this._startCap=new C.TriangulationCapBuilder(this._profile,0);this._endCap=new C.TriangulationCapBuilder(this._profile,0,!0);break;case "square":this._startCap=new C.TriangulationCapBuilder(this._profile,
-.5);this._endCap=new C.TriangulationCapBuilder(this._profile,.5,!0);break;case "round":n="quad"===e?!0:!1,this._startCap=new C.RoundCapBuilder({profile:this._profile,flip:!1,breakNormals:n}),this._endCap=new C.RoundCapBuilder({profile:this._profile,flip:!0,breakNormals:n})}t=this._getStageIdHint();u=f.get(this.symbolLayer,"material","color");p=this._getCombinedOpacityAndColor(u);x=q.vec3f64.fromArray(p);y=p[3];z={diffuse:x,ambient:x,opacity:y,transparent:1>y||this._isPropertyDriven("opacity"),vertexColors:!1,
slicePlaneEnabled:this._context.slicePlaneEnabled,castShadows:this.symbolLayer.castShadows,cullFace:"none"===r?"none":void 0};if(!this._isPropertyDriven("size")&&(b.vec2.set(this._intrinsicSize,a,d),!w.isValidSize(this._intrinsicSize[0])||!w.isValidSize(this._intrinsicSize[1])))throw new h("graphics3dpathsymbollayer:invalid-size","Symbol sizes may not be negative values");this._fastUpdates.enabled&&this._fastUpdates.visualVariables.size||b.vec2.scale(this._intrinsicSize,this._intrinsicSize,1/this._context.renderCoordsHelper.unitInMeters);
this._fastUpdates.enabled?(g.mixin(z,this._fastUpdates.materialParameters,{size:[this._intrinsicSize[0],this._intrinsicSize[1],0]}),this._material=new H(z,t+"_pathmat")):(z.vertexColors=this._isPropertyDriven("color")||this._isPropertyDriven("opacity"),this._material=new E(z,t+"_pathmat"));this._context.stage.add(A.ModelContentType.MATERIAL,this._material);return[2]})})};m.prototype.destroy=function(){c.prototype.destroy.call(this);this._material&&(this._context.stage.remove(A.ModelContentType.MATERIAL,
this._material.id),this._material=null)};m.prototype.createGraphics3DGraphic=function(a){var b=a.graphic;if("polyline"!==b.geometry.type)return this.logger.warn("unsupported geometry type for path symbol: "+b.geometry.type),null;if(!this._validateGeometry(b.geometry))return null;var d="graphic"+b.uid,c=this.getGraphicElevationContext(b);return this._createAs3DShape(b,a.renderingInfo,c,d,b.uid)};m.prototype.layerOpacityChanged=function(){var a=f.get(this.symbolLayer,"material","color"),a=this._getCombinedOpacity(a),
b=1>a||this._isPropertyDriven("opacity");this._material.setParameterValues({opacity:a,transparent:b});return!0};m.prototype.layerElevationInfoChanged=function(a,b,d){var c=this;a.forEach(function(a){var d=b(a);d&&(a=c.getGraphicElevationContext(a.graphic),d.needsElevationUpdates=r.needsElevationUpdates3D(a.mode),d.elevationContext.set(a))});return!0};m.prototype.slicePlaneEnabledChanged=function(a,b){this._material.setParameterValues({slicePlaneEnabled:this._context.slicePlaneEnabled});return!0};
m.prototype.pixelRatioChanged=function(a,b){return!0};m.prototype.applyRendererDiff=function(a,b){for(var d in a.diff)switch(d){case "visualVariables":if(v.updateFastSymbolUpdatesState(this._fastUpdates,b,this._vvConvertOptions))this._material.setParameterValues(this._fastUpdates.materialParameters);else return!1;break;default:return!1}return!0};m.prototype.getVertexData=function(a){for(var b=0,d=a.paths,c=[],e=a.spatialReference,f=this._context.elevationProvider.spatialReference,g=this._context.renderSpatialReference,
m=0;m<d.length;m++)var h=d[m],b=b+h.length;for(var m=new Float64Array(3*b),k=new Float64Array(3*b),l=new Float64Array(3*b),n=0,q=0;q<d.length;q++){h=d[q];c.push({index:n,numVertices:h.length});for(var t=0;t<h.length;t++){var u=h[t];m[n++]=u[0];m[n++]=u[1];m[n++]=a.hasZ?u[2]:0}}a=!0;e.equals(f)?r.copyVertices(m,0,k,0,b):a=r.reproject(m,0,e,k,0,f,b);f.equals(g)?r.copyVertices(k,0,l,0,b):r.reproject(k,0,f,l,0,g,b);return{pathVertexDataInfos:c,vertexDataGS:m,vertexDataES:k,vertexDataRS:l,projectionSuccess:a,
terrainElevation:0}};m.prototype._createAs3DShape=function(a,b,d,c,f){var g=a.geometry,m=[],h=[],k=[],l=g.spatialReference,n=this._context.elevationProvider.spatialReference,q=Array(6),u=this._context.renderCoordsHelper;S.spatialReference=l;N.spatialReference=n;g=this.getVertexData(g);if(!g.projectionSuccess)return this.logger.warn("PathSymbol3DLayer geometry failed to be created (failed to project geometry to view spatial reference)"),null;if(0<g.pathVertexDataInfos.length){for(var p=0;p<g.pathVertexDataInfos.length;++p){var w=
g.pathVertexDataInfos[p],v=w.index,w=w.numVertices;if(2>w)this.logger.warn("PathSymbol3DLayer geometry failed to be created (paths should contain at least 2 vertices)");else{if(this._context.clippingExtent&&(r.computeBoundingBox(g.vertexDataES,v,w,q),r.boundingBoxClipped(q,this._context.clippingExtent)))continue;for(var y=[],z=v;z<v+3*w;){var A=z++,F=z++,L=z++,Z=new C.PathVertex;e.vec3.set(Z.posGS,g.vertexDataGS[A],g.vertexDataGS[F],g.vertexDataGS[L]);e.vec3.set(Z.posES,g.vertexDataES[A],g.vertexDataES[F],
g.vertexDataES[L]);N.x=Z.posES[0];N.y=Z.posES[1];N.z=Z.posES[2];var E=r.computeElevation(this._context.elevationProvider,N,d,u,null);e.vec3.set(J,g.vertexDataRS[A],g.vertexDataRS[F],g.vertexDataRS[L]);u.setAltitude(E,J);e.vec3.set(Z.pos,J[0],J[1],J[2]);y.push(Z)}v=new C.Path(y);G(v,this.upVectorAlignment,this._context.renderCoordsHelper,d,this._context.elevationProvider,l,n,this.stencilWidth);v=new C.Builder(v,this._profile,this._extruder,this._startCap,this._endCap);w=null;this._fastUpdates.enabled?
(z=this._fastUpdates.visualVariables,w=z.size?x.getAttributeValue(z.size.field,a):0,y=z.color?x.getAttributeValue(z.color.field,a):0,z=z.opacity?x.getAttributeValue(z.opacity.field,a):0,w=new C.FastUpdatePathGeometry(v,w,y,z)):(w=[this._intrinsicSize[0],this._intrinsicSize[1]],this._isPropertyDriven("size")&&(w[0]*=I(b.size[0],b.size[2],this.symbolLayer.width),w[1]*=I(b.size[2],b.size[0],this.symbolLayer.height)),y=null,this._isPropertyDriven("color")&&(y=b.color),this._isPropertyDriven("opacity")&&
null!=b.opacity&&(y=y?[y[0],y[1],y[2],b.opacity]:[1,1,1,b.opacity]),v=new C.StaticPathGeometry(v),v.bakeVertexPositions(w),y&&v.bakeVertexColors(y),v.computeNormals(),w=v);v=w.createGeometryData();v=new B(v,c+"path"+p);y={pathGeometry:w,geometrySR:l,upVectorAlignment:this.upVectorAlignment,stencilWidth:this.stencilWidth};v.singleUse=!0;v.metadata=y;m.push(v);h.push(this._material);k.push(w.xform)}}a={layerUid:this._context.layer.uid,graphicUid:f};if(0<m.length)return c=new D({geometries:m,materials:h,
transformations:k,castShadow:!0,metadata:a,idHint:c}),m=new t(this,c,m,null,null,M,d),m.alignedTerrainElevation=g.terrainElevation,m.needsElevationUpdates=r.needsElevationUpdates3D(d.mode),m}else this.logger.warn("PathSymbol3DLayer geometry failed to be created (no paths were defined)");return null};return m}(x.Graphics3DSymbolLayer);c.Graphics3DPathSymbolLayer=p;var T=u.makeDehydratedPoint(0,0,0,null),N=u.makeDehydratedPoint(0,0,0,null),S=u.makeDehydratedPoint(0,0,0,null),O=q.vec3f64.create(),V=
q.vec3f64.create(),Q=q.vec3f64.create(),J=q.vec3f64.create(),P=m.vec3f32.create(),L=m.vec3f32.create(),F=q.vec3f64.create(),Y=q.vec3f64.create(),X=10,R={verticalDistanceToGround:0,terrainElevation:0};c.default=p})},"esri/views/3d/webgl-engine/lib/pathGeometryUtils":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/extendsHelper ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec2f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../support/geometryUtils ../../support/mathUtils ./GeometryData ./GeometryUtil ./Util ../materials/internal/MaterialUtil ../shaders/PathPrograms".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r){var x;(function(c){function n(){return{up:b.vec3f64.create(),right:b.vec3f64.create()}}function p(a,b,d){a[0]=d[0]*b.right[0]+d[1]*b.up[0];a[1]=d[0]*b.right[1]+d[1]*b.up[1];a[2]=d[0]*b.right[2]+d[1]*b.up[2]}c.makeFrame=n;c.profileSpaceToVertexSpace=p;var x=function(){function a(){this.pos=b.vec3f64.create();this.posES=b.vec3f64.create();this.posGS=b.vec3f64.create();this.vRight=b.vec3f64.create();this.vLeft=b.vec3f64.create();this.frame=n();this.rotationFrame=
n();this.rotationAngle=0}a.prototype.setFrameFromUpVector=function(a){f.vec3.copy(this.frame.up,a);f.vec3.add(B,this.vLeft,this.vRight);f.vec3.normalize(B,B);f.vec3.scale(A,this.frame.up,f.vec3.dot(B,this.frame.up));f.vec3.subtract(E,B,A);f.vec3.normalize(E,E);f.vec3.cross(this.frame.right,E,this.frame.up)};a.prototype.computeRotationAxisAndAngleFromUpVector=function(){f.vec3.copy(this.rotationFrame.up,this.frame.up);var a=f.vec3.dot(this.rotationFrame.up,this.frame.up),b=f.vec3.dot(this.rotationFrame.up,
this.frame.right);f.vec3.scale(A,this.frame.up,-b);f.vec3.scale(B,this.frame.right,a);f.vec3.add(A,A,B);f.vec3.normalize(this.rotationFrame.right,A);f.vec3.scale(A,this.frame.up,f.vec3.dot(this.frame.up,this.vLeft));f.vec3.subtract(A,this.vLeft,A);f.vec3.negate(A,A);f.vec3.normalize(A,A);f.vec3.scale(B,this.frame.up,f.vec3.dot(this.frame.up,this.vRight));f.vec3.subtract(B,this.vRight,B);f.vec3.normalize(B,B);f.vec3.cross(D,this.rotationFrame.up,this.vLeft);this.rotationAngle=e.sign(f.vec3.dot(D,this.vRight))*
(Math.PI-e.acos(f.vec3.dot(A,B)));this.maxStretchDistance=Math.abs(Math.min(this.vLeftLength,this.vRightLength)/Math.cos(.5*(Math.PI-this.rotationAngle)))};return a}();c.PathVertex=x;x=function(){function a(){this.vertices=[];this.vertexIndices=[];this.poles=[];this.poleIndices=[];this.uvIndices=this.uvs=null}a.prototype.addVertex=function(a,b){void 0===b&&(b=0);this.vertices.push(g.vec2f64.clone(a));this.poleIndices.push(b);return this.vertices.length-1};a.prototype.addUV=function(a){this.uvs||(this.uvs=
[],this.uvIndices=[]);this.uvs.push(a);return this.uvs.length-1};a.prototype.addPole=function(a){this.poles.push(g.vec2f64.clone(a));return this.poles.length-1};a.prototype.addSegment=function(a,b,d,c){void 0===d&&(d=null);void 0===c&&(c=null);this.vertexIndices.push(a);this.vertexIndices.push(b);null!==d&&null!==c&&(this.uvIndices.push(d),this.uvIndices.push(c))};Object.defineProperty(a.prototype,"numSegments",{get:function(){return this.vertexIndices.length/2},enumerable:!0,configurable:!0});a.prototype.hasUV=
function(){return null!=this.uvs};a.prototype.translate=function(a,b){for(var d=0,c=this.vertices;d<c.length;d++){var e=c[d];e[0]+=a;e[1]+=b}d=0;for(c=this.poles;d<c.length;d++)e=c[d],e[0]+=a,e[1]+=b};a.circle=function(b){void 0===b&&(b=20);var d=new a;d.addPole(g.vec2f64.fromValues(0,0));for(var c=0;c<b;++c){var e=2*c*Math.PI/b;d.addVertex(g.vec2f64.fromValues(.5*Math.cos(e),.5*Math.sin(e)));d.addUV(c/b)}d.addUV(1);for(c=0;c<b-1;++c)d.addSegment(c,c+1,c,c+1);d.addSegment(b-1,0,b-1,b);return d};a.rect=
function(){var b=new a,d=g.vec2f64.fromValues(-.5,-.5),c=g.vec2f64.fromValues(.5,-.5),e=g.vec2f64.fromValues(.5,.5),f=g.vec2f64.fromValues(-.5,.5);b.addPole(g.vec2f64.fromValues(0,.5));b.addPole(g.vec2f64.fromValues(0,.5));b.addPole(g.vec2f64.fromValues(0,-.5));b.addPole(g.vec2f64.fromValues(0,-.5));b.addUV(0);b.addUV(1);b.addVertex(d,3);b.addVertex(c,3);b.addSegment(0,1,0,1);b.addVertex(c,2);b.addVertex(e,1);b.addSegment(2,3,0,1);b.addVertex(e,0);b.addVertex(f,0);b.addSegment(4,5,0,1);b.addVertex(f,
1);b.addVertex(d,2);b.addSegment(6,7,0,1);return b};return a}();c.Profile=x;x=function(){function a(a){this.vertices=[];this.offset=b.vec3f64.create();this.xform=d.mat4f64.create();this.vertices=a;f.vec3.copy(this.offset,this.vertices[Math.floor((a.length-1)/2)].pos);a=0;for(var c=this.vertices;a<c.length;a++){var e=c[a];f.vec3.subtract(e.pos,e.pos,this.offset)}k.mat4.translate(this.xform,this.xform,this.offset);this.updatePathVertexInformation()}a.prototype.updatePathVertexInformation=function(){var a=
this.vertices.length,b=this.vertices[0];b.index=0;f.vec3.set(b.vLeft,0,0,0);b.vLeftLength=0;f.vec3.subtract(b.vRight,this.vertices[1].pos,b.pos);b.vRightLength=f.vec3.length(b.vRight);f.vec3.normalize(b.vRight,b.vRight);for(var d=b,c=1;c<a;++c)b=this.vertices[c],b.index=c,f.vec3.copy(b.vLeft,d.vRight),b.vLeftLength=d.vRightLength,c<a-1?(f.vec3.subtract(b.vRight,this.vertices[c+1].pos,b.pos),b.vRightLength=f.vec3.length(b.vRight),f.vec3.normalize(b.vRight,b.vRight)):(f.vec3.copy(b.vRight,b.vLeft),
b.vRightLength=b.vLeftLength),d=b};return a}();c.Path=x;c.computeMinimumRotationTangentFrame=function(d,c){var e=null,g=d.vertices.length,m=b.vec3f64.create(),h=b.vec3f64.create(),k=b.vec3f64.create(),l=b.vec3f64.create(),r=b.vec3f64.create(),n=b.vec3f64.create(),t=a.plane.create(),u=d.vertices[0];f.vec3.copy(h,c);f.vec3.set(m,0,1,0);q.makeOrthoBasisDirUpFallback(u.vRight,h,m,m,k,h,.99619469809);f.vec3.copy(u.frame.up,h);f.vec3.copy(u.frame.right,k);e=u;for(c=1;c<g;++c){u=d.vertices[c];f.vec3.add(r,
u.vLeft,u.vRight);var p=f.vec3.length(r);0<p?(p=1/Math.sqrt(p),r[0]*=p,r[1]*=p,r[2]*=p):(r[0]=u.vRight[0],r[1]=u.vRight[1],r[2]=u.vRight[2]);f.vec3.add(n,e.pos,e.frame.up);a.plane.fromPositionAndNormal(u.pos,r,t);a.plane.intersectRay(t,a.ray.wrap(n,u.vLeft),l)?(f.vec3.subtract(l,l,u.pos),f.vec3.normalize(h,l),f.vec3.cross(k,r,h),f.vec3.normalize(k,k)):q.makeOrthoBasisDirUpFallback(r,e.frame.up,e.frame.right,m,k,h,.99619469809);f.vec3.copy(u.frame.up,h);f.vec3.copy(u.frame.right,k);e=u}};x=function(){return function(){}}();
c.Extruder=x;x=function(){function a(){}a.prototype.numProfilesPerJoin=function(){return 1};a.prototype.extrude=function(a,b,d){for(var c=0;c<b.vertices.length;++c)p(w,a.frame,b.vertices[c]),d(a.index,a.frame,w,!1)};return a}();c.SimpleExtruder=x;x=function(){function a(a,b){void 0===a&&(a=.8*Math.PI);void 0===b&&(b=1);this.cutoffAngle=a;this.numBendSubdivisions=b}a.prototype.numProfilesPerJoin=function(){return this.numBendSubdivisions+1};a.prototype.extrude=function(a,b,d){var c=H,e=G,g=a.frame;
f.vec3.copy(e.up,g.up);f.vec3.copy(e.right,g.right);if(0<Math.abs(a.rotationAngle)){var g=f.vec3.dot(e.right,a.rotationFrame.up),m=f.vec3.dot(e.right,a.rotationFrame.right),h=f.vec3.dot(e.up,a.rotationFrame.up),l=f.vec3.dot(e.up,a.rotationFrame.right),m=m/Math.cos(.5*a.rotationAngle),l=l/Math.cos(.5*a.rotationAngle);f.vec3.scale(B,a.rotationFrame.up,g);f.vec3.scale(e.right,a.rotationFrame.right,m);f.vec3.add(e.right,e.right,B);f.vec3.scale(B,a.rotationFrame.up,h);f.vec3.scale(e.up,a.rotationFrame.right,
l);f.vec3.add(e.up,e.up,B)}if(Math.abs(a.rotationAngle)>=this.cutoffAngle)for(g=0;g<this.numBendSubdivisions+1;++g)for(k.mat4.identity(I),k.mat4.rotate(I,I,.5*-a.rotationAngle+g*a.rotationAngle/this.numBendSubdivisions,a.rotationFrame.up),h=c,l=a.frame,m=I,f.vec3.transformMat4(h.up,l.up,m),f.vec3.transformMat4(h.right,l.right,m),h=0;h<b.vertices.length;++h)p(w,a.frame,b.vertices[h]),l=f.vec3.dot(w,a.rotationFrame.right),(l=0<=l*a.rotationAngle)?(p(w,c,b.vertices[h]),d(a.index,c,w,!1)):(p(w,e,b.vertices[h]),
d(a.index,a.frame,w,!0));else for(g=0;g<this.numBendSubdivisions+1;++g)for(h=0;h<b.vertices.length;++h)p(w,a.frame,b.vertices[h]),l=f.vec3.dot(w,a.rotationFrame.right),l=0<=l*a.rotationAngle,p(w,e,b.vertices[h]),d(a.index,a.frame,w,l?!1:!0)};return a}();c.MiterExtruder=x;var K={generateUV:!1},x=function(){function a(){}a.prototype.rebuildConnectingProfileGeometry=function(a,b,d){for(var c=0;c<b.vertices.length;++c)p(w,a.frame,b.vertices[c]),d(a.index,a.frame,w,y,0)};return a}();c.CapBuilder=x;var O=
function(a){function b(){return a.call(this)||this}l(b,a);b.prototype.getNumVertices=function(){return 0};b.prototype.getNumIndices=function(){return 0};b.prototype.rebuildCapGeometry=function(a,b){};b.prototype.buildTopology=function(a,b){};return b}(x);c.NoCapBuilder=O;O=function(a){function b(b,d,c){void 0===d&&(d=0);void 0===c&&(c=!1);var e=a.call(this)||this;e.profile=b;e.profilePlaneOffset=d;e.flip=c;return e}l(b,a);b.prototype.getNumVertices=function(){return this.profile.vertices.length};
b.prototype.getNumIndices=function(){return 3*this.profile.numSegments};b.prototype.rebuildConnectingProfileGeometry=function(a,b,d){var c=A;f.vec3.cross(c,a.frame.up,a.frame.right);for(var e=0;e<b.vertices.length;++e)p(w,a.frame,b.vertices[e]),d(a.index,a.frame,w,c,this.profilePlaneOffset)};b.prototype.rebuildCapGeometry=function(a,b){this.rebuildConnectingProfileGeometry(a,this.profile,b)};b.prototype.buildTopology=function(a,b){a=this.vertexBufferStart+this.profile.vertexIndices[0];for(var d=1;d<
this.profile.numSegments;++d){var c=this.vertexBufferStart+this.profile.vertexIndices[2*d+0],e=this.vertexBufferStart+this.profile.vertexIndices[2*d+1];this.flip?b(e,c,a):b(a,c,e)}};return b}(x);c.TriangulationCapBuilder=O;x=function(a){function b(b){var d=a.call(this)||this;d.flip=!1;d.breakNormals=!1;d.numSegments=3;d.profile=b.profile;d.flip=b.flip;d.breakNormals=b.breakNormals;return d}l(b,a);b.prototype.getNumVertices=function(){var a=0,a=this.profile.vertices.length*(this.numSegments-1);this.breakNormals&&
(a+=this.profile.vertices.length);return a+=this.profile.poles.length};b.prototype.getNumIndices=function(){var a;a=0+2*this.profile.numSegments*(this.numSegments-1);for(var b=0;b<this.profile.numSegments;++b)a=this.profile.poleIndices[this.profile.vertexIndices[2*b+0]]===this.profile.poleIndices[this.profile.vertexIndices[2*b+1]]?a+1:a+2;return 3*a};b.prototype.rebuildCapGeometry=function(a,b){var d=a.frame,c=A;f.vec3.cross(c,d.up,d.right);for(var e=this.flip?.5:-.5,g=0;g<this.profile.poles.length;++g)p(w,
d,this.profile.poles[g]),b(a.index,d,w,c,e);if(this.breakNormals)for(g=0;g<this.profile.vertices.length;++g)p(w,d,this.profile.vertices[g]),b(a.index,d,w,c,0);for(g=0;g<this.numSegments-1;++g)for(var m=1-(g+1)/this.numSegments,k=Math.sin(m*Math.PI*.5),m=Math.cos(m*Math.PI*.5),l=0;l<this.profile.vertices.length;++l){var r=z,n=this.profile.poles[this.profile.poleIndices[l]];h.vec2.subtract(r,this.profile.vertices[l],n);h.vec2.scale(r,r,k);h.vec2.add(r,r,n);p(w,d,r);b(a.index,d,w,c,e*m)}};b.prototype.buildTopology=
function(a,b){a=this.breakNormals?this.vertexBufferStart+this.profile.poles.length:this.firstProfileVertexIndex;for(var d=this.breakNormals?this.vertexBufferStart+this.profile.poles.length+this.profile.vertices.length:this.vertexBufferStart+this.profile.poles.length,c=0;c<this.profile.numSegments;++c){for(var e=this.profile.vertexIndices[2*c+0],f=this.profile.vertexIndices[2*c+1],g=this.vertexBufferStart+this.profile.poleIndices[e],m=this.vertexBufferStart+this.profile.poleIndices[f],h=a+e,k=a+f,
l=0;l<this.numSegments-1;++l){var r=d+l*this.profile.vertices.length+e,n=d+l*this.profile.vertices.length+f;this.flip?(b(r,k,h),b(k,r,n)):(b(h,k,r),b(n,r,k));h=r;k=n}this.flip?(b(g,k,h),g!==m&&b(g,m,k)):(b(h,k,g),g!==m&&b(k,m,g))}};return b}(x);c.RoundCapBuilder=x;x=function(){function a(a,b,d,c,e,f){void 0===f&&(f=K);this.options=f;this.numUVTotal=this.numNormalsTotal=this.numVerticesTotal=this.numExtrusionProfiles=this._triangleCount=this._extrusionVertexCount=0;this.profile=b;this.path=a;this.extruder=
d;this.startCap=c;this.endCap=e;a=this.path.vertices.length-2;this.numExtrusionProfiles=d.numProfilesPerJoin()*a+2;this.numNormalsTotal=this.numVerticesTotal=b.vertices.length*this.numExtrusionProfiles;this.startCap.vertexBufferStart=this.numVerticesTotal;b=this.startCap.getNumVertices();this.numVerticesTotal+=b;this.numNormalsTotal+=b;this.endCap.vertexBufferStart=this.numVerticesTotal;b=this.endCap.getNumVertices();this.numVerticesTotal+=b;this.numNormalsTotal+=b;this.profileRightAxisData=new Float32Array(4*
this.numVerticesTotal);this.profileUpAxisData=new Float32Array(4*this.numVerticesTotal);this.pathVertexData=new Float32Array(1*this.numVerticesTotal);this.auxVectorData=new Float32Array(3*this.numVerticesTotal);this.profile.hasUV()&&this.options.generateUV&&(this.numUVTotal=this.profile.uvs.length,this.uvData=new Float32Array(2*this.numUVTotal));this.originData=new Float32Array(3*this.path.vertices.length);this.rebuildGeometry();this.buildTopology()}a.prototype.emitVertex=function(a,b,d,c){var e=
f.vec3.dot(d,b.right);this.profileRightAxisData[4*this._extrusionVertexCount+0]=b.right[0]*e;this.profileRightAxisData[4*this._extrusionVertexCount+1]=b.right[1]*e;this.profileRightAxisData[4*this._extrusionVertexCount+2]=b.right[2]*e;d=f.vec3.dot(d,b.up);this.profileUpAxisData[4*this._extrusionVertexCount+0]=b.up[0]*d;this.profileUpAxisData[4*this._extrusionVertexCount+1]=b.up[1]*d;this.profileUpAxisData[4*this._extrusionVertexCount+2]=b.up[2]*d;this.pathVertexData[this._extrusionVertexCount]=a;
c?(a=this.path.vertices[a],this.auxVectorData[3*this._extrusionVertexCount+0]=a.rotationFrame.right[0]*a.maxStretchDistance,this.auxVectorData[3*this._extrusionVertexCount+1]=a.rotationFrame.right[1]*a.maxStretchDistance,this.auxVectorData[3*this._extrusionVertexCount+2]=a.rotationFrame.right[2]*a.maxStretchDistance):(this.auxVectorData[3*this._extrusionVertexCount+0]=0,this.auxVectorData[3*this._extrusionVertexCount+1]=0,this.auxVectorData[3*this._extrusionVertexCount+2]=0);++this._extrusionVertexCount};
a.prototype.emitCapVertex=function(a,b,d,c,e){var g=f.vec3.dot(d,b.right);this.profileRightAxisData[4*this._extrusionVertexCount+0]=b.right[0]*g;this.profileRightAxisData[4*this._extrusionVertexCount+1]=b.right[1]*g;this.profileRightAxisData[4*this._extrusionVertexCount+2]=b.right[2]*g;d=f.vec3.dot(d,b.up);this.profileUpAxisData[4*this._extrusionVertexCount+0]=b.up[0]*d;this.profileUpAxisData[4*this._extrusionVertexCount+1]=b.up[1]*d;this.profileUpAxisData[4*this._extrusionVertexCount+2]=b.up[2]*
d;this.pathVertexData[this._extrusionVertexCount]=a;this.auxVectorData[3*this._extrusionVertexCount+0]=c[0]*e;this.auxVectorData[3*this._extrusionVertexCount+1]=c[1]*e;this.auxVectorData[3*this._extrusionVertexCount+2]=c[2]*e;++this._extrusionVertexCount};a.prototype.emitTriangle=function(a,b,d){this.vertexIndices[3*this._triangleCount+0]=a;this.vertexIndices[3*this._triangleCount+1]=b;this.vertexIndices[3*this._triangleCount+2]=d;this.pathVertexIndices[3*this._triangleCount+0]=this.pathVertexData[a];
this.pathVertexIndices[3*this._triangleCount+1]=this.pathVertexData[b];this.pathVertexIndices[3*this._triangleCount+2]=this.pathVertexData[d];this.normalIndices[3*this._triangleCount+0]=a;this.normalIndices[3*this._triangleCount+1]=b;this.normalIndices[3*this._triangleCount+2]=d;++this._triangleCount};a.prototype.rebuildGeometry=function(){for(var a=this.emitVertex.bind(this),b=this.emitCapVertex.bind(this),d=this._extrusionVertexCount=0,c=this.path.vertices;d<c.length;d++){var e=c[d];this.originData[3*
e.index+0]=e.pos[0];this.originData[3*e.index+1]=e.pos[1];this.originData[3*e.index+2]=e.pos[2]}this.startCap.rebuildConnectingProfileGeometry(this.path.vertices[0],this.profile,b);for(d=1;d<this.path.vertices.length-1;++d)this.extruder.extrude(this.path.vertices[d],this.profile,a);this.endCap.rebuildConnectingProfileGeometry(this.path.vertices[this.path.vertices.length-1],this.profile,b);this.startCap.rebuildCapGeometry(this.path.vertices[0],b);this.endCap.rebuildCapGeometry(this.path.vertices[this.path.vertices.length-
1],b);if(this.profile.hasUV()&&this.options.generateUV)for(d=0;d<this.profile.uvs.length;++d)this.uvData[2*d+0]=this.profile.uvs[d],this.uvData[2*d+1]=0};a.prototype.buildTopology=function(){var a=this.emitTriangle.bind(this);this._triangleCount=0;var b=this.profile.vertices.length,d=this.profile.numSegments,c=this.numExtrusionProfiles-1,e=d*c*6;this.startCap.indexBufferStart=e;this.startCap.firstProfileVertexIndex=0;e+=this.startCap.getNumIndices();this.endCap.indexBufferStart=e;this.endCap.firstProfileVertexIndex=
b*(this.numExtrusionProfiles-1);e+=this.endCap.getNumIndices();this.vertexIndices=new Uint32Array(e);this.normalIndices=new Uint32Array(e);this.pathVertexIndices=new Uint32Array(e);this.profile.hasUV()&&this.options.generateUV&&(this.uvIndices=new Uint32Array(e));for(e=0;e<d;++e)for(var f=this.profile.vertexIndices[2*e],g=this.profile.vertexIndices[2*e+1],m=0;m<c;++m){var h=m*b+f,k=(m+1)*b+g,l=m*b+g;a(h,(m+1)*b+f,k);a(h,k,l)}this.startCap.buildTopology(this.path.vertices[0],a);this.endCap.buildTopology(this.path.vertices[this.path.vertices.length-
1],a)};a.prototype.onPathChanged=function(){this.rebuildGeometry()};return a}();c.Builder=x;x=function(){function a(a){this.builder=a}Object.defineProperty(a.prototype,"xform",{get:function(){return this.builder.path.xform},enumerable:!0,configurable:!0});a.prototype.onPathChanged=function(){this.builder.onPathChanged()};return a}();c.PathGeometry=x;var V=function(a){function b(b){b=a.call(this,b)||this;b.vertexAttributePosition=null;b.vertexAttributeNormal=null;b.vertexAttributeColor=null;b.vertexAttributePosition=
new Float32Array(3*b.builder.numVerticesTotal);b.vertexAttributeNormal=new Float32Array(3*b.builder.numNormalsTotal);b.vertexAttributeColor=new Uint8Array(4);b.vertexAttributeColor[0]=255;b.vertexAttributeColor[1]=255;b.vertexAttributeColor[2]=255;b.vertexAttributeColor[3]=255;return b}l(b,a);b.prototype.bakeVertexColors=function(a){this.vertexAttributeColor[0]=255*a[0];this.vertexAttributeColor[1]=255*a[1];this.vertexAttributeColor[2]=255*a[2];this.vertexAttributeColor[3]=255*(3<a.length?a[3]:1)};
b.prototype.bakeVertexPositions=function(a){this.size=a;for(var b=0;b<this.builder.numVerticesTotal;++b){var d=this.builder.pathVertexData[b],c=0===d||d===this.builder.path.vertices.length-1,g=v;f.vec3.set(g,this.builder.originData[3*d+0],this.builder.originData[3*d+1],this.builder.originData[3*d+2]);d=A;f.vec3.set(d,this.builder.profileRightAxisData[4*b+0]*a[0]+this.builder.profileUpAxisData[4*b+0]*a[1],this.builder.profileRightAxisData[4*b+1]*a[0]+this.builder.profileUpAxisData[4*b+1]*a[1],this.builder.profileRightAxisData[4*
b+2]*a[0]+ +this.builder.profileUpAxisData[4*b+2]*a[1]);if(c)c=B,f.vec3.set(c,this.builder.auxVectorData[3*b+0]*a[0],this.builder.auxVectorData[3*b+1]*a[0],this.builder.auxVectorData[3*b+2]*a[0]),f.vec3.add(d,d,c);else{var c=B,m=D;f.vec3.set(c,this.builder.auxVectorData[3*b+0],this.builder.auxVectorData[3*b+1],this.builder.auxVectorData[3*b+2]);var h=f.vec3.length(c);f.vec3.normalize(c,c);var k=f.vec3.dot(d,c),l=e.sign(k);f.vec3.scale(m,c,k);f.vec3.subtract(m,d,m);Math.abs(k)>h&&(f.vec3.scale(c,c,
h*l),f.vec3.add(d,c,m))}this.vertexAttributePosition[3*b+0]=g[0]+d[0];this.vertexAttributePosition[3*b+1]=g[1]+d[1];this.vertexAttributePosition[3*b+2]=g[2]+d[2]}};b.prototype.computeNormals=function(){for(var a=this.builder.vertexIndices,b=this.vertexAttributePosition,d=a.length/3,c=0;c<this.vertexAttributeNormal.length;++c)this.vertexAttributeNormal[c]=0;for(var c=this.builder.profile.numSegments*(this.builder.numExtrusionProfiles-1)*2,e=0;e<c;e+=2){var g=this.builder.vertexIndices[3*e+0],m=this.builder.vertexIndices[3*
e+1],h=this.builder.vertexIndices[3*e+2],k=this.builder.vertexIndices[3*e+5];f.vec3.set(A,b[3*g+0],b[3*g+1],b[3*g+2]);f.vec3.set(B,b[3*m+0],b[3*m+1],b[3*m+2]);f.vec3.set(D,b[3*h+0],b[3*h+1],b[3*h+2]);f.vec3.subtract(B,B,A);f.vec3.subtract(D,D,A);f.vec3.normalize(B,B);f.vec3.normalize(D,D);f.vec3.cross(C,B,D);this.vertexAttributeNormal[3*g+0]+=C[0];this.vertexAttributeNormal[3*g+1]+=C[1];this.vertexAttributeNormal[3*g+2]+=C[2];this.vertexAttributeNormal[3*m+0]+=C[0];this.vertexAttributeNormal[3*m+
1]+=C[1];this.vertexAttributeNormal[3*m+2]+=C[2];this.vertexAttributeNormal[3*h+0]+=C[0];this.vertexAttributeNormal[3*h+1]+=C[1];this.vertexAttributeNormal[3*h+2]+=C[2];this.vertexAttributeNormal[3*k+0]+=C[0];this.vertexAttributeNormal[3*k+1]+=C[1];this.vertexAttributeNormal[3*k+2]+=C[2]}for(;e<d;++e)g=a[3*e+0],m=a[3*e+1],h=a[3*e+2],f.vec3.set(A,b[3*g+0],b[3*g+1],b[3*g+2]),f.vec3.set(B,b[3*m+0],b[3*m+1],b[3*m+2]),f.vec3.set(D,b[3*h+0],b[3*h+1],b[3*h+2]),f.vec3.subtract(B,B,A),f.vec3.subtract(D,D,
A),f.vec3.normalize(B,B),f.vec3.normalize(D,D),f.vec3.cross(C,B,D),this.vertexAttributeNormal[3*g+0]+=C[0],this.vertexAttributeNormal[3*g+1]+=C[1],this.vertexAttributeNormal[3*g+2]+=C[2],this.vertexAttributeNormal[3*m+0]+=C[0],this.vertexAttributeNormal[3*m+1]+=C[1],this.vertexAttributeNormal[3*m+2]+=C[2],this.vertexAttributeNormal[3*h+0]+=C[0],this.vertexAttributeNormal[3*h+1]+=C[1],this.vertexAttributeNormal[3*h+2]+=C[2];a=this.vertexAttributeNormal.length/3;for(c=0;c<a;++c)f.vec3.set(A,this.vertexAttributeNormal[3*
c+0],this.vertexAttributeNormal[3*c+1],this.vertexAttributeNormal[3*c+2]),f.vec3.normalize(A,A),this.vertexAttributeNormal[3*c+0]=A[0],this.vertexAttributeNormal[3*c+1]=A[1],this.vertexAttributeNormal[3*c+2]=A[2]};b.prototype.createGeometryData=function(){var a={};a[u.VertexAttrConstants.POSITION]=this.builder.vertexIndices;a[u.VertexAttrConstants.NORMAL]=this.builder.normalIndices;this.vertexAttributeColor&&(a[u.VertexAttrConstants.COLOR]=new Uint32Array(a[u.VertexAttrConstants.POSITION].length));
var b={};b[u.VertexAttrConstants.POSITION]={size:3,data:this.vertexAttributePosition};b[u.VertexAttrConstants.NORMAL]={size:3,data:this.vertexAttributeNormal};this.vertexAttributeColor&&(b[u.VertexAttrConstants.COLOR]={size:4,data:this.vertexAttributeColor});return new m(b,a,m.DefaultOffsets,"triangle")};b.prototype.onPathChanged=function(){a.prototype.onPathChanged.call(this);this.bakeVertexPositions(this.size);this.computeNormals()};b.prototype.intersect=function(a,b,d){var c=this.builder.vertexIndices;
t.intersectTriangles(a,b,0,c.length/3,c,{size:3,offsetIdx:0,strideIdx:3,data:this.vertexAttributePosition},void 0,d)};return b}(x);c.StaticPathGeometry=V;x=function(a){function b(b,d,c,e){var f=a.call(this,b)||this;f.sizeAttributeValue=d;f.colorAttributeValue=c;f.opacityAttributeValue=e;f.vvData=null;f.data=null;f.baked=new V(b);f.baked.bakeVertexPositions([1,1]);f.baked.computeNormals();f.data=new Float32Array(9*f.builder.numVerticesTotal);for(var g=0;g<f.builder.numVerticesTotal;++g){var m=9*g;
f.data[m+0]=b.profileRightAxisData[4*g+0];f.data[m+1]=b.profileRightAxisData[4*g+1];f.data[m+2]=b.profileRightAxisData[4*g+2];f.data[m+3]=b.profileUpAxisData[4*g+0];f.data[m+4]=b.profileUpAxisData[4*g+1];f.data[m+5]=b.profileUpAxisData[4*g+2];f.data[m+6]=b.auxVectorData[3*g+0];f.data[m+7]=b.auxVectorData[3*g+1];f.data[m+8]=b.auxVectorData[3*g+2]}f.vvData=new Float32Array(4*f.builder.path.vertices.length);for(g=0;g<f.builder.path.vertices.length;++g)f.vvData[4*g+0]=d,f.vvData[4*g+1]=c,f.vvData[4*g+
2]=e,f.vvData[4*g+3]=0===g||g===f.builder.path.vertices.length-1?1:0;return f}l(b,a);b.prototype.createGeometryData=function(){var a={};a[r.VertexAttrConstants.POSITION]=this.builder.pathVertexIndices;a[r.VertexAttrConstants.NORMAL]=this.builder.normalIndices;a[r.VertexAttrConstants.PATHGEOMETRYINFO]=this.builder.vertexIndices;a[r.VertexAttrConstants.FEATUREVALUE]=this.builder.pathVertexIndices;var b={};b[r.VertexAttrConstants.POSITION]={size:3,data:this.builder.originData};b[r.VertexAttrConstants.NORMAL]=
{size:3,data:this.baked.vertexAttributeNormal};b[r.VertexAttrConstants.PATHGEOMETRYINFO]={size:9,data:this.data};b[r.VertexAttrConstants.FEATUREVALUE]={size:4,data:this.vvData};return new m(b,a,m.DefaultOffsets,"triangle")};return b}(x);c.FastUpdatePathGeometry=x})(x||(x={}));var w=b.vec3f64.create(),v=b.vec3f64.create(),y=b.vec3f64.fromValues(0,0,0),z=g.vec2f64.create(),A=b.vec3f64.create(),B=b.vec3f64.create(),D=b.vec3f64.create(),C=b.vec3f64.create(),E=b.vec3f64.create(),H=x.makeFrame(),G=x.makeFrame(),
I=d.mat4f64.create();return x})},"esri/views/3d/webgl-engine/shaders/PathPrograms":function(){define(["require","exports","./sources/resolver","../../../webgl/programUtils"],function(p,c,n,l){Object.defineProperty(c,"__esModule",{value:!0});c.VertexAttrConstants={POSITION:"position",NORMAL:"normal",NORMALCOMPRESSED:"normalCompressed",UV0:"uv0",SYMBOLCOLOR:"symbolColor",COMPONENTINDEX:"componentIndex",FEATUREVALUE:"featureValue",PATHGEOMETRYINFO:"pathGeometryInfo"};c.vertexAttributeLocations={position:0,
normal:1,normalCompressed:1,uv0:2,symbolColor:5,componentIndex:5,featureValue:6,pathGeometryInfo:8};var k=function(d){return l.glslifyDefineMap({SYMBOLVERTEXCOLORS:d.symbolColors,FLIPV:d.flipV,DOUBLESIDED:d.doubleSided,WINDINGORDERDOUBLESIDED:d.windowOrderDoubleSided,RECEIVE_SHADOWS:d.receiveShadows,RECEIVE_SSAO:d.receiveSSAO,VV_SIZE:d.vvSize,VV_COLOR:d.vvColor,VV_OPACITY:d.vvOpacity,SCREEN_SIZE_PERSPECTIVE:d.screenSizePerspective,SLICE:d.slice,COMPRESSED_NORMALS:d.compressedNormals,COMPONENTCOLORS:d.componentColor,
TRANSPARENCY_DISCARD:d.transparencyDiscard,BIAS_SHADOWMAP:d.shadowMap,WIREFRAME:d.wireframe})};c.colorPass={name:"path-color",shaders:function(d){return{vertexShader:k(d)+n.resolveIncludes("materials/pathMaterial/colorPass.vert"),fragmentShader:k(d)+n.resolveIncludes("materials/pathMaterial/colorPass.frag")}},attributes:c.vertexAttributeLocations};c.depthPass={name:"path-depth",shaders:function(d){return{vertexShader:k(d)+n.resolveIncludes("materials/pathMaterial/depthPass.vert"),fragmentShader:k(d)+
n.resolveIncludes("materials/pathMaterial/depthPass.frag")}},attributes:c.vertexAttributeLocations};c.normalPass={name:"path-normal",shaders:function(d){return{vertexShader:k(d)+n.resolveIncludes("materials/pathMaterial/normalPass.vert"),fragmentShader:k(d)+n.resolveIncludes("materials/pathMaterial/normalPass.frag")}},attributes:c.vertexAttributeLocations};c.highlightPass={name:"path-highlight",shaders:function(d){return{vertexShader:k(d)+n.resolveIncludes("materials/pathMaterial/highlightPass.vert"),
fragmentShader:k(d)+n.resolveIncludes("materials/pathMaterial/highlightPass.frag")}},attributes:c.vertexAttributeLocations}})},"esri/views/3d/webgl-engine/materials/PathMaterial":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/extendsHelper ../../../../core/mathUtils ../../../../geometry/support/aaBoundingBox ../../support/buffer/BufferView ../../support/buffer/InterleavedLayout ../lib/GLMaterial ../lib/Material ../lib/Util ./VisualVariableMaterialParameters ./internal/bufferWriters ./internal/MaterialUtil ./internal/MaterialUtil ./renderers/MergedRenderer ../shaders/PathPrograms ../../../webgl/renderState".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x){function w(a,b){b.vvSizeEnabled&&(a.setUniform3fv("vvSizeMinSize",b.vvSizeMinSize),a.setUniform3fv("vvSizeMaxSize",b.vvSizeMaxSize),a.setUniform3fv("vvSizeOffset",b.vvSizeOffset),a.setUniform3fv("vvSizeFactor",b.vvSizeFactor));b.vvColorEnabled&&(a.setUniform1fv("vvColorValues",b.vvColorValues),a.setUniform4fv("vvColorColors",b.vvColorColors));b.vvOpacityEnabled&&(a.setUniform1fv("vvOpacityValues",b.vvOpacityValues),a.setUniform1fv("vvOpacityOpacities",
b.vvOpacityOpacities))}var v=a.assert;p=function(a){function b(d,c){c=a.call(this,c)||this;c.supportsEdges=!0;c.params=u.copyParameters(d,C);c.vertexBufferLayout=b.getVertexBufferLayout(c.params);return c}l(b,a);b.prototype.isVisibleInPass=function(a){return 3===a?this.params.castShadows:!0};b.prototype.isVisible=function(){var b=this.params;if(!a.prototype.isVisible.call(this)||0===b.layerOpacity)return!1;var d=b.symbolColors,c="replace"===b.colorMixMode,e=0<b.opacity,f=b.externalColor&&0<b.externalColor[3];
return b.vvColorEnabled||d?c?!0:e:c?f:e};b.prototype.setParameterValues=function(a){var b=this.params,d;for(d in a)b[d]=a[d];this.notifyDirty("matChanged")};b.prototype.getParameters=function(){return this.params};b.prototype.intersect=function(a,b,c,e,f,g,m,h){if(a.metadata){b=a.metadata.pathGeometry;c=[this.params.size[0],this.params.size[1]];if(this.params.vvSizeEnabled){h=this.params.vvSizeOffset;var l=this.params.vvSizeFactor,r=this.params.vvSizeMinSize,n=this.params.vvSizeMaxSize,q=b.sizeAttributeValue;
c[0]*=k.clamp(h[0]+q*l[0],r[0],n[0]);c[1]*=k.clamp(h[1]+q*l[1],r[1],n[1])}h=Math.max(c[0],c[1]);a=d.fromValues(a.boundingInfo.bbMin[0]-h,a.boundingInfo.bbMin[1]-h,a.boundingInfo.bbMin[2]-h,a.boundingInfo.bbMax[0]+h,a.boundingInfo.bbMax[1]+h,a.boundingInfo.bbMax[2]+h);h=[g[0]-f[0],g[1]-f[1],g[2]-f[2]];l=Math.sqrt(h[0]*h[0]+h[1]*h[1]+h[2]*h[2]);u.intersectAabbInvDir(a,f,[l/h[0],l/h[1],l/h[2]],e.tolerance)&&(b.baked.size&&b.baked.size[0]===c[0]&&b.baked.size[1]===c[1]||b.baked.bakeVertexPositions(c),
b.baked.intersect(f,g,m))}};b.prototype.createBufferWriter=function(){return new E(this.vertexBufferLayout)};b.prototype.createRenderer=function(a,b){return new t(a,b,this,r.vertexAttributeLocations)};b.prototype.getGLMaterials=function(){return{color:y,depth:z,depthShadowMap:this.params.castShadows?A:null,normal:B,highlight:D}};b.getVertexBufferLayout=function(a){var b=g.newLayout().vec3f(r.VertexAttrConstants.POSITION).vec3f(r.VertexAttrConstants.NORMAL),b=b.mat3f(r.VertexAttrConstants.PATHGEOMETRYINFO);
if(a.vvColorEnabled||a.vvSizeEnabled||a.vvOpacityEnabled)b=b.vec4f(r.VertexAttrConstants.FEATUREVALUE);a.symbolColors&&(b=b.vec4u8(r.VertexAttrConstants.SYMBOLCOLOR));return b};return b}(b);var y=function(a){function b(b,d,c){c=this;var e=b.getParameters();c=a.call(this,b,d)||this;c.params=u.copyParameters(e);c.slot=c.params.transparent?7:5;c._createPrograms();c.selectPipeline();return c}l(b,a);b.prototype._createPrograms=function(){var a=this;this.programs=q.BindParametersMap.create(this.params,
function(b){return a._createProgram(b)})};b.prototype._createProgram=function(a){var b=this.params;return this.programRep.getProgram(r.colorPass,{symbolColors:b.symbolColors,flipV:b.flipV,doubleSided:b.doubleSided&&"normal"===b.doubleSidedType,windowOrderDoubleSided:b.doubleSided&&"winding-order"===b.doubleSidedType,receiveShadows:a.receiveShadows,receiveSSAO:a.receiveSSAO,vvSize:b.vvSizeEnabled,vvColor:b.vvColorEnabled,vvOpacity:b.vvOpacityEnabled,verticalOffset:null!==b.verticalOffset,screenSizePerspective:null!==
b.screenSizePerspective,slice:b.slicePlaneEnabled,compressedNormals:b.compressedNormals,transparencyDiscard:b.transparent,wireframe:b.wireframe})};b.prototype.selectPipeline=function(){var a=this.params;this.pipelineState=x.makePipelineState({blending:a.transparent&&x.separateBlendingParams(770,1,771,771),culling:G(a),polygonOffset:a.polygonOffset&&H,depthTest:{func:513},depthWrite:x.defaultDepthWriteParams,colorWrite:x.defaultColorWriteParams})};b.prototype.beginSlot=function(a){return a===this.slot};
b.prototype.getProgram=function(){return this.program||this.getPrograms()[0]};b.prototype.getPrograms=function(){return q.BindParametersMap.programs(this.programs)};b.prototype.updateParameters=function(){this.params=u.copyParameters(this.material.getParameters());this.slot=this.params.transparent?7:5;this._createPrograms();this.selectPipeline()};b.prototype.bind=function(a,b){var d=this.params,c=this.program=q.BindParametersMap.lookup(this.programs,b);a.bindProgram(c);a.setPipelineState(this.pipelineState);
c.setUniform3fv("size",d.size);c.setUniform3fv("ambient",d.ambient);c.setUniform3fv("diffuse",d.diffuse);c.setUniform3fv("specular",d.specular);c.setUniform4fv("externalColor",d.externalColor);c.setUniform1i("colorMixMode",u.colorMixModes[d.colorMixMode]);c.setUniform1f("opacity",d.opacity);c.setUniform1f("layerOpacity",d.layerOpacity);u.bindVerticalOffset(d.verticalOffset,b,c);u.bindScreenSizePerspective(d.screenSizePerspective,c);w(c,d)};b.prototype.release=function(a,b){};b.prototype.bindView=
function(a,b){a=this.program=q.BindParametersMap.lookup(this.programs,b);var d=this.params,c=b.origin;u.bindView(c,b.view,a);u.bindCamPos(c,b.viewInvTransp,a);d.slicePlaneEnabled&&u.bindSlicePlane(c,b.slicePlane,a);b.shadowMappingEnabled&&b.shadowMap.bindView(a,c)};b.prototype.bindInstance=function(a,b){a=this.program;a.setUniformMatrix4fv("model",b.transformation);a.setUniformMatrix4fv("modelNormal",b.transformationNormal)};b.prototype.getDrawMode=function(){return this.params.wireframe?1:4};return b}(f),
z=function(a){function b(b,d,c,e){void 0===e&&(e=!1);b=a.call(this,b,d)||this;b.biased=e;b.updateParameters();return b}l(b,a);b.prototype.beginSlot=function(a){return a===this.slot};b.prototype.getProgram=function(){return this.program};b.prototype.selectProgram=function(){var a=this.params;this.program=this.programRep.getProgram(r.depthPass,{flipV:a.flipV,shadowMap:this.biased,vvSize:a.vvSizeEnabled,vvColor:a.vvColorEnabled,vvOpacity:a.vvOpacityEnabled,verticalOffset:null!==a.verticalOffset,screenSizePerspective:null!==
a.screenSizePerspective,slice:a.slicePlaneEnabled,transparencyDiscard:a.transparent});this.pipelineState=x.makePipelineState({culling:G(a),polygonOffset:a.polygonOffset&&H,depthTest:{func:513},depthWrite:x.defaultDepthWriteParams,colorWrite:x.defaultColorWriteParams})};b.prototype.selectSlot=function(){this.slot=this.params.transparent?7:5};b.prototype.updateParameters=function(){this.params=u.copyParameters(this.material.getParameters());this.selectProgram();this.selectSlot()};b.prototype.bind=function(a,
b){var d=this.program,c=this.params;a.bindProgram(d);a.setPipelineState(this.pipelineState);d.setUniform3fv("size",c.size);d.setUniform2fv("nearFar",b.nearFar);u.bindVerticalOffset(c.verticalOffset,b,d);u.bindScreenSizePerspective(c.screenSizePerspective,d);w(d,c)};b.prototype.release=function(a){};b.prototype.bindView=function(a,b){a=this.program;var d=this.params,c=b.origin;u.bindView(c,b.view,a);d.slicePlaneEnabled&&u.bindSlicePlane(b.origin,b.slicePlane,a);d.screenSizePerspective&&u.bindCamPos(c,
b.viewInvTransp,a)};b.prototype.bindInstance=function(a,b){this.program.setUniformMatrix4fv("model",b.transformation)};b.prototype.getDrawMode=function(){return this.params.wireframe?1:4};return b}(f),A=function(a){function b(b,d,c){return a.call(this,b,d,c,!0)||this}l(b,a);return b}(z),B=function(a){function b(b,d,c){b=a.call(this,b,d)||this;b.updateParameters();return b}l(b,a);b.prototype.beginSlot=function(a){return a===this.slot};b.prototype.getProgram=function(){return this.program};b.prototype.selectProgram=
function(){var a=this.params;this.program=this.programRep.getProgram(r.normalPass,{flipV:a.flipV,vvSize:a.vvSizeEnabled,vvColor:a.vvColorEnabled,vvOpacity:a.vvOpacityEnabled,verticalOffset:null!==a.verticalOffset,screenSizePerspective:null!==a.screenSizePerspective,slice:a.slicePlaneEnabled,compressedNormals:a.compressedNormals,transparencyDiscard:a.transparent});this.pipelineState=x.makePipelineState({polygonOffset:a.polygonOffset&&H,culling:G(a),depthTest:{func:513},depthWrite:x.defaultDepthWriteParams,
colorWrite:x.defaultColorWriteParams})};b.prototype.selectSlot=function(){this.slot=this.params.transparent?7:5};b.prototype.updateParameters=function(){this.params=u.copyParameters(this.material.getParameters());this.selectProgram();this.selectSlot()};b.prototype.bind=function(a,b){var d=this.program,c=this.params;a.bindProgram(d);a.setPipelineState(this.pipelineState);d.setUniform3fv("size",c.size);u.bindVerticalOffset(c.verticalOffset,b,d);u.bindScreenSizePerspective(c.screenSizePerspective,d);
w(d,c)};b.prototype.release=function(a){};b.prototype.bindView=function(a,b){a=this.program;var d=this.params,c=b.origin;u.bindView(c,b.view,a);a.setUniformMatrix4fv("viewNormal",b.viewInvTransp);d.slicePlaneEnabled&&u.bindSlicePlane(b.origin,b.slicePlane,a);d.screenSizePerspective&&u.bindCamPos(c,b.viewInvTransp,a)};b.prototype.bindInstance=function(a,b){a=this.program;a.setUniformMatrix4fv("model",b.transformation);a.setUniformMatrix4fv("modelNormal",b.transformationNormal)};b.prototype.getDrawMode=
function(){return this.params.wireframe?1:4};return b}(f),D=function(a){function b(b,d,c){b=a.call(this,b,d)||this;b.updateParameters();return b}l(b,a);b.prototype.beginSlot=function(a){return a===this.slot};b.prototype.getProgram=function(){return this.program};b.prototype.selectProgram=function(){var a=this.params;this.program=this.programRep.getProgram(r.highlightPass,{flipV:a.flipV,vvSize:a.vvSizeEnabled,vvColor:a.vvColorEnabled,vvOpacity:a.vvOpacityEnabled,verticalOffset:null!==a.verticalOffset,
screenSizePerspective:null!==a.screenSizePerspective,slice:a.slicePlaneEnabled,transparencyDiscard:a.transparent});this.pipelineState=x.makePipelineState({polygonOffset:a.polygonOffset&&H,culling:G(a),depthTest:{func:513},depthWrite:x.defaultDepthWriteParams,colorWrite:x.defaultColorWriteParams})};b.prototype.selectSlot=function(){this.slot=this.params.transparent?7:5};b.prototype.updateParameters=function(){this.params=u.copyParameters(this.material.getParameters());this.selectProgram();this.selectSlot()};
b.prototype.bind=function(a,b){var d=this.program,c=this.params;a.bindProgram(d);a.setPipelineState(this.pipelineState);d.setUniform3fv("size",c.size);u.bindVerticalOffset(c.verticalOffset,b,d);u.bindScreenSizePerspective(c.screenSizePerspective,d);w(d,c)};b.prototype.release=function(a){};b.prototype.bindView=function(a,b){a=this.program;var d=this.params,c=b.origin;u.bindView(c,b.view,a);d.slicePlaneEnabled&&u.bindSlicePlane(b.origin,b.slicePlane,a);d.screenSizePerspective&&u.bindCamPos(c,b.viewInvTransp,
a)};b.prototype.bindInstance=function(a,b){a=this.program;a.setUniformMatrix4fv("model",b.transformation);a.setUniformMatrix4fv("modelNormal",b.transformationNormal)};b.prototype.getDrawMode=function(){return this.params.wireframe?1:4};return b}(f),C=n({size:[1,1,1],wireframe:!1,ambient:[.2,.2,.2],diffuse:[.8,.8,.8],specular:[0,0,0],externalColor:[1,1,1,1],colorMixMode:"multiply",opacity:1,layerOpacity:1,symbolColors:!1,flipV:!1,doubleSided:!1,doubleSidedType:"normal",cullFace:void 0,compressedNormals:!1,
receiveSSAO:!0,castShadows:!0,verticalOffset:null,screenSizePerspective:null,slicePlaneEnabled:!1,transparent:!1,polygonOffset:!1},e.Default),E=function(){function a(a){this.vertexBufferLayout=a}a.prototype.allocate=function(a){return this.vertexBufferLayout.createBuffer(a)};a.prototype.elementCount=function(a){return a.indices[r.VertexAttrConstants.POSITION].length};a.prototype.write=function(a,b,d,c){if(r.VertexAttrConstants.PATHGEOMETRYINFO in b.vertexAttr){var e=b.vertexAttr[r.VertexAttrConstants.PATHGEOMETRYINFO],
f=b.indices[r.VertexAttrConstants.PATHGEOMETRYINFO];v(9===e.size);var g=d.getField(r.VertexAttrConstants.PATHGEOMETRYINFO,h.BufferViewMat3f);if(g)m.writeBufferMat3f(f,e.data,g,c);else throw Error("unable to acquire view for "+r.VertexAttrConstants.PATHGEOMETRYINFO);}if(this.vertexBufferLayout.hasField(r.VertexAttrConstants.FEATUREVALUE)&&r.VertexAttrConstants.FEATUREVALUE in b.vertexAttr)if(e=b.vertexAttr[r.VertexAttrConstants.FEATUREVALUE],f=b.indices[r.VertexAttrConstants.FEATUREVALUE],v(4===e.size),
g=d.getField(r.VertexAttrConstants.FEATUREVALUE,h.BufferViewVec4f))m.writeBufferVec4(f,e.data,g,c);else throw Error("unable to acquire view for "+r.VertexAttrConstants.FEATUREVALUE);m.writeDefaultAttributes(b,this.vertexBufferLayout,a.transformation,a.invTranspTransformation,d,c)};return a}(),H={factor:2,units:2},G=function(a){var b;b=a.slicePlaneEnabled?!1:a.cullFace?"none"!==a.cullFace:!a.transparent&&!a.doubleSided;return b&&{face:"front"===a.cullFace?1028:1029,mode:2305}};return p})},"esri/views/3d/layers/graphics/Graphics3DPolygonFillSymbolLayer":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../Color ../../../../core/maybe ../../../../core/screenUtils ../../../../core/libs/earcut/earcut ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/Polygon ../../../../geometry/support/aaBoundingBox ./constants ./ElevationAligners ./Graphics3DDrapedGraphicLayer ./Graphics3DObject3DGraphicLayer ./Graphics3DSymbolCommonCode ./Graphics3DSymbolLayer ./graphicUtils ./lineUtils ../../webgl-engine/Stage ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/GeometryData ../../webgl-engine/lib/Object3D ../../webgl-engine/lib/RenderGeometry ../../webgl-engine/lib/Util ../../webgl-engine/materials/ColorMaterial ../../webgl-engine/materials/NativeLineMaterial ../../webgl-engine/materials/RibbonLineMaterial".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z,A,B,D,C,E,H,G,I,K){Object.defineProperty(c,"__esModule",{value:!0});p=function(c){function e(a,b,d,e){a=c.call(this,a,b,d,e)||this;a._elevationOptions={supportsOffsetAdjustment:!1,supportsOnTheGround:!0};return a}n(e,c);e.prototype.doLoad=function(){return k(this,void 0,void 0,function(){return l(this,function(a){this._prepareFillResources();this._prepareOutlineResources();return[2]})})};e.prototype._prepareFillResources=function(){var a=this._getStageIdHint(),
b=h.get(this.symbolLayer,"material","color"),b=this._getCombinedOpacityAndColor(b),b={color:b,transparent:1>b[3]||this._isPropertyDriven("opacity"),polygonOffset:!1,vertexColors:!0,slicePlaneEnabled:this._context.slicePlaneEnabled};this._material=new G(b,a+"_colormat");this._context.stage.add(A.ModelContentType.MATERIAL,this._material)};e.prototype._prepareOutlineResources=function(){var a=this.symbolLayer.outline;if(this._hasOutline=!!(h.isSome(a)&&a.size&&0<a.size&&h.isSome(a.color))){var b=this._getStageIdHint()+
"_outline",d=this._getOutlineColor(),a=g.pt2px(h.isSome(a)?a.size:0),c=this._context.slicePlaneEnabled;this._outlineMaterial=1.5<=a?new K({width:a,color:d,polygonOffset:!0,slicePlaneEnabled:c},b+"_ribbonlinemat"):new I({color:d,slicePlaneEnabled:c},b+"_nativelinemat");this._context.stage.add(A.ModelContentType.MATERIAL,this._outlineMaterial)}};e.prototype.destroy=function(){c.prototype.destroy.call(this);this._material&&(this._context.stage.remove(A.ModelContentType.MATERIAL,this._material.id),this._material=
null);this._outlineMaterial&&(this._context.stage.remove(A.ModelContentType.MATERIAL,this._outlineMaterial.id),this._outlineMaterial=null)};e.prototype.createGraphics3DGraphic=function(a){var b=a.graphic,d=b.geometry.type;if("polyline"!==d&&"polygon"!==d&&"extent"!==d)return this.logger.warn("unsupported geometry type for fill symbol: "+d),null;if(!this._validateGeometry(b.geometry))return null;d="graphic"+b.uid;a=this._getVertexOpacityAndColor(a.renderingInfo,Uint8Array,255);var c=this.getGraphicElevationContext(b);
return"on-the-ground"===c.mode?this._createAsOverlay(b,a,c,d):this._createAs3DShape(b,a,c,d,b.uid)};e.prototype.layerOpacityChanged=function(){var a=this._material.getColor(),b=h.get(this.symbolLayer,"material","color"),b=this._getCombinedOpacity(b);this._material.setColor([a[0],a[1],a[2],b]);this._material.setTransparent(1>b||this._isPropertyDriven("opacity"));this._outlineMaterial&&(a=this._outlineMaterial.getColor(),a={color:[a[0],a[1],a[2],this._getOutlineOpacity()]},this._outlineMaterial.setParameterValues(a));
return!0};e.prototype.layerElevationInfoChanged=function(a,b,d){var c=this._elevationContext.mode;if(null==d||null==c)return!1;if("on-the-ground"===d&&"on-the-ground"===c)return!0;if(d!==c&&("on-the-ground"===d||"on-the-ground"===c))return!1;var e=w.needsElevationUpdates2D(c);return this.updateGraphics3DGraphicElevationInfo(a,b,function(){return e})};e.prototype.slicePlaneEnabledChanged=function(a,b){this._material.setParameterValues({slicePlaneEnabled:this._context.slicePlaneEnabled});this._outlineMaterial&&
this._outlineMaterial.setParameterValues({slicePlaneEnabled:this._context.slicePlaneEnabled});return!0};e.prototype.pixelRatioChanged=function(a,b){return!0};e.prototype.setDrawOrder=function(a,b,d){this.updateSymbolLayerOrder(a,b);this._material&&(this._material.renderPriority=a+b/2,d.add(this._material.id));this._outlineMaterial&&(this._outlineMaterial.renderPriority=a,d.add(this._outlineMaterial.id))};e.prototype._createAs3DShape=function(a,b,d,c,e){var f=this._getPolyGeometry(a);a=f.rings;var g=
this._getOutlineGeometry(f,a),f=w.getGeometryVertexData3D(g,f.hasZ,f.spatialReference,this._context.renderSpatialReference,this._context.elevationProvider,this._context.renderCoordsHelper,d);N.idHint=c;N.color=b;N.data=f;var m;this._hasOutline&&(m=new f.vertexData.constructor(f.vertexData));N.outNum=0;N.outGeometries=[];N.outTransforms=[];N.outMaterials=[];this._createAs3DShapeFill(N);N.data.vertexData=m;this._createAs3DShapeOutline(N);this._logGeometryCreationWarnings(N.data,a,"rings","FillSymbol3DLayer");
if(0===N.outNum)return null;b=new C({geometries:N.outGeometries,materials:N.outMaterials,transformations:N.outTransforms,castShadow:!1,metadata:{layerUid:this._context.layer.uid,graphicUid:e},idHint:c});b=new x(this,b,N.outGeometries,null,null,t.perVertexElevationAligner,d);b.alignedTerrainElevation=f.terrainElevation;b.needsElevationUpdates=w.needsElevationUpdates2D(d.mode);return b};e.prototype._createAs3DShapeFill=function(d){for(var c=d.data.geometryData.polygons,e=d.data.eleVertexData,g=d.data.vertexData,
m=function(m){var k=c[m];m=k.count;var l=k.index;if(h._context.clippingExtent&&(w.computeBoundingBox(e,l,m,M),w.boundingBoxClipped(M,h._context.clippingExtent)))return"continue";var r=new Float64Array(e.buffer,3*l*e.BYTES_PER_ELEMENT,3*m),n=new Float64Array(g.buffer,3*l*g.BYTES_PER_ELEMENT,3*m),k=k.holeIndices.map(function(a){return a-l}),k=f(r,k,3);if(0===k.length)return"continue";w.applyOrigin(g,l,m,T);m=h._createFillGeometry(k,0,n,r,d.color);m=new B(m,d.idHint);m.singleUse=!0;r=a.mat4f64.create();
b.mat4.translate(r,r,T);d.outGeometries.push(m);d.outMaterials.push(h._material);d.outTransforms.push(r);d.outNum++},h=this,k=0;k<c.length;++k)m(k)};e.prototype._createAs3DShapeOutline=function(d){if(this._hasOutline)for(var c=d.data.geometryData.outlines,e=d.data.eleVertexData,f=d.data.vertexData,g=0;g<c.length;++g){var m=c[g],h=m.index,k=m.count;if(this._context.clippingExtent&&(w.computeBoundingBox(e,h,k,M),w.boundingBoxClipped(M,this._context.clippingExtent)))continue;w.applyOrigin(f,h,k,T);m=
new Float64Array(e.buffer,3*h*e.BYTES_PER_ELEMENT,3*k);h=new Float64Array(f.buffer,3*h*f.BYTES_PER_ELEMENT,3*k);h=z.createPolylineGeometry(h,m,!1,u.WHITE,1);h=new B(h,d.idHint+"outline"+g);h.singleUse=!0;m=a.mat4f64.create();b.mat4.translate(m,m,T);d.outGeometries.push(h);d.outMaterials.push(this._outlineMaterial);d.outTransforms.push(m);d.outNum++}};e.prototype._createAsOverlay=function(a,b,d,c){var e=this._getPolyGeometry(a);d=e.rings;var f=this._getOutlineGeometry(e,d);this._material.renderPriority=
this._symbolLayerOrder+this._symbolLayerOrderDelta/2;this._hasOutline&&(this._outlineMaterial.renderPriority=this._symbolLayerOrder);e=w.getGeometryVertexDataDraped(f,e.spatialReference,this._context.overlaySR);N.idHint=c;N.color=b;N.data=e;var g;this._hasOutline&&(g=new e.vertexData.constructor(e.vertexData));N.outNum=0;N.outGeometries=[];N.outBoundingBox=q.empty();N.layerUid=this._context.layer.uid;N.graphicsUid=a.uid;this._createAsOverlayFill(N);N.data.vertexData=g;this._createAsOverlayOutline(N);
this._logGeometryCreationWarnings(N.data,d,"rings","FillSymbol3DLayer");return 0<N.outNum?new r(this,N.outGeometries,N.outBoundingBox):null};e.prototype._createAsOverlayFill=function(d){for(var c=d.data.vertexData,e=d.data.geometryData.polygons,g=function(g){var h=e[g];g=h.count;var k=h.index,l=new Float64Array(c.buffer,3*k*c.BYTES_PER_ELEMENT,3*g),h=h.holeIndices.map(function(a){return a-k}),l=f(l,h,3);if(0===l.length)return"continue";w.computeBoundingBox(c,k,g,M);if(w.boundingBoxClipped(M,m._context.clippingExtent))return"continue";
q.expand(d.outBoundingBox,M);w.applyOrigin(c,k,g,T);w.setZ(c,k,g,m._getDrapedZ());g=a.mat4f64.create();b.mat4.translate(g,g,T);l=m._createFillGeometry(l,k,c,null,d.color);h=new E(l);h.data.layerUid=d.layerUid;h.data.graphicUid=d.graphicsUid;h.material=m._material;var r=M;h.center=[.5*(r[0]+r[3]),.5*(r[1]+r[4]),0];h.bsRadius=.5*Math.sqrt((r[3]-r[0])*(r[3]-r[0])+(r[4]-r[1])*(r[4]-r[1]));h.transformation=g;h.name=d.idHint;h.uniqueName=d.idHint+"#"+l.id;d.outGeometries.push(h);d.outNum++},m=this,h=0;h<
e.length;++h)g(h)};e.prototype._createAsOverlayOutline=function(d){if(this._hasOutline)for(var c=d.data.vertexData,e=d.data.geometryData.outlines,f=0;f<e.length;++f){var g=e[f],m=g.index,g=g.count;w.computeBoundingBox(c,m,g,M);if(!w.boundingBoxClipped(M,this._context.clippingExtent)){q.expand(d.outBoundingBox,M);w.applyOrigin(c,m,g,T);w.setZ(c,m,g,this._getDrapedZ());g=new Float64Array(c.buffer,3*m*c.BYTES_PER_ELEMENT,3*g);m=a.mat4f64.create();b.mat4.translate(m,m,T);var g=z.createPolylineGeometry(g,
null,!0,u.WHITE,1),h=new E(g);h.data.layerUid=d.layerUid;h.data.graphicUid=d.graphicsUid;h.material=this._outlineMaterial;var k=M;h.center=[.5*(k[0]+k[3]),.5*(k[1]+k[4]),0];h.bsRadius=.5*Math.sqrt((k[3]-k[0])*(k[3]-k[0])+(k[4]-k[1])*(k[4]-k[1]));h.transformation=m;h.name=d.idHint+"outline";h.uniqueName=d.idHint+"outline#"+g.id;d.outGeometries.push(h);d.outNum++}}};e.prototype._getOutlineGeometry=function(a,b){return b};e.prototype._getOutlineOpacity=function(){var a=this._getLayerOpacity(),b=h.get(this.symbolLayer,
"outline","color");return a*(h.isSome(b)?b.a:0)};e.prototype._getOutlineColor=function(){var a=h.get(this.symbolLayer,"outline","color"),b=this._getOutlineOpacity();return y.mixinColorAndOpacity(h.isSome(a)?d.toUnitRGB(a):null,b)};e.prototype._getPolyGeometry=function(a){a=a.geometry;return"extent"===a.type?m.fromExtent(a):a};e.prototype._createFillGeometry=function(a,b,d,c,e){for(var f=a.length,g=new Uint32Array(f),m=new Uint32Array(f),h=0;h<f;h++)g[h]=a[h]+b,m[h]=0;a={};b={};a[H.VertexAttrConstants.POSITION]=
g;a[H.VertexAttrConstants.COLOR]=m;b[H.VertexAttrConstants.POSITION]={size:3,data:d};b[H.VertexAttrConstants.COLOR]={size:4,data:e};c&&(b.mapPos={size:3,data:c},a.mapPos=g);return new D(b,a)};return e}(v.default);c.Graphics3DPolygonFillSymbolLayer=p;var M=q.create(),T=e.vec3f64.create(),N={idHint:null,color:null,data:null,outNum:0,outBoundingBox:null,outGeometries:null,outMaterials:null,outTransforms:null};c.default=p})},"esri/views/3d/layers/graphics/Graphics3DTextSymbolLayer":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/Error ../../../../core/maybe ../../../../core/screenUtils ../../../../core/libs/gl-matrix-2/vec2f64 ../../../../symbols/callouts/calloutUtils ./ElevationAligners ./Graphics3DObject3DGraphicLayer ./Graphics3DSymbolCommonCode ./Graphics3DSymbolLayer ./graphicUtils ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/lib/TextRenderParameters ../../webgl-engine/lib/TextTexture ../../webgl-engine/materials/HUDMaterial".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v){function y(a,b,d){a&&a.forEach(function(a){var c=b(a);c&&d(c,a.graphic)})}Object.defineProperty(c,"__esModule",{value:!0});var z=[0,0,1];p=function(c){function q(a,b,d,e){a=c.call(this,a,b,d,e)||this;a._elevationOptions={supportsOffsetAdjustment:!0,supportsOnTheGround:!1};return a}n(q,c);q.prototype.doLoad=function(){return k(this,void 0,void 0,function(){var a;return l(this,function(b){if(!this._isPropertyDriven("size")&&(a=u.validateSymbolLayerSize(this.symbolLayer.size)))throw new d("graphics3dtextsymbollayer:invalid-size",
a);this._createTextRenderParameters();return[2]})})};q.prototype._createTextRenderParameters=function(){this._textRenderParameters=x.default.fromSymbol(this.symbolLayer,this._context.layerView.view.pixelRatio)};q.prototype.destroy=function(){c.prototype.destroy.call(this)};q.prototype.createGraphics3DGraphic=function(a){a=a.graphic;var d=m.placePointOnGeometry(a.geometry);if(h.isNone(d))return this.logger.warn("unsupported geometry type for text symbol: "+a.geometry.type),null;var c=this.symbolLayer.text;
if(!c)return null;var e=b.isCalloutSupport(this.symbol)&&this.symbol.hasVisibleVerticalOffset()?this.symbol:null;return this._createAs3DShape(a,d,c,e)};q.prototype.createLabel=function(a,b,d,c){a=a.graphic;var e=m.placePointOnGeometry(a.geometry);if(h.isNone(e))return this.logger.warn("unsupported geometry type for label: "+a.geometry.type),null;var f=b.text;return f?this._createAs3DShape(a,e,f,b,b,d,c):null};q.prototype.getGraphicElevationContext=function(a,b){void 0===b&&(b=0);a=c.prototype.getGraphicElevationContext.call(this,
a);a.addOffsetRenderUnits(b);return a};q.prototype.layerOpacityChanged=function(){this.logger.warn("layer opacity change not yet implemented in Graphics3DTextSymbolLayer");return!1};q.prototype.layerElevationInfoChanged=function(a,b){var d=this;y(a,b,function(a,b){d.updateGraphicElevationContext(b,a)});return!0};q.prototype.slicePlaneEnabledChanged=function(a,b){var d=this;y(a,b,function(a){var b=0;for(a=a.stageObject.geometryRecords;b<a.length;b++)a[b].material.setParameterValues({slicePlaneEnabled:d._context.slicePlaneEnabled})});
return!0};q.prototype.pixelRatioChanged=function(a,b){return!1};q.prototype.updateGraphicElevationContext=function(a,b){a=this.getGraphicElevationContext(a,b.metadata.elevationOffset);b.elevationContext.set(a);b.needsElevationUpdates=m.needsElevationUpdates2D(a.mode)||"absolute-height"===a.mode};q.prototype._defaultElevationInfoNoZ=function(){return A};q.prototype._createAs3DShape=function(b,d,c,k,l,n,q){void 0===l&&(l=B);var p=this.getGraphicElevationContext(b,l.elevationOffset),x=this._context.layer.id+
"_label_"+b.uid,y="polyline"===h.get(b.geometry,"type"),A=b.uid;b=this._context.stage.renderView.renderingContext;var C=u.namedAnchorToHUDMaterialAnchorPos[l.anchor in u.namedAnchorToHUDMaterialAnchorPos?l.anchor:"center"];b=h.isNone(q)?new w(b,c,this._textRenderParameters,x):null;C={occlusionTest:!0,screenOffset:l.screenOffset,anchorPos:C,polygonOffset:!0,color:[1,1,1,1],centerOffsetUnits:l.centerOffsetUnits,debugDrawBorder:l.debugDrawBorder,drawInSecondSlot:!0};h.isSome(b)&&(C.textureId=b.id,C.texCoordScale=
b.texcoordScale);h.isSome(q)&&(C.textureId=q.textureId);if(h.isSome(k)&&h.isSome(k.verticalOffset)){k=k.verticalOffset;var D=k.minWorldLength,G=k.maxWorldLength;C.verticalOffset={screenLength:g.pt2px(k.screenLength),minWorldLength:D||0,maxWorldLength:null!=G?G:Infinity}}this._context.screenSizePerspectiveEnabled&&(k=this._context.sharedResources,D=k.screenSizePerspectiveSettings,C.screenSizePerspective=k.screenSizePerspectiveSettingsLabels.overridePadding(this._textRenderParameters.haloSize),C.screenSizePerspectiveAlignment=
D);y&&(C.shaderPolygonOffset=1E-4);C.slicePlaneEnabled=this._context.slicePlaneEnabled;y=null;k=JSON.stringify(C);h.isSome(n)?(y=n.getMaterial(k),null==y&&(y=new v(C,x),n.addMaterial(k,y))):y=new v(C,x);y=[y];q=r.createPointGeometry(z,l.translation,void 0,h.isSome(b)?[b.displayWidth,b.displayHeight]:[0,0],l.centerOffset,h.isSome(q)?[0,0]:null);q=[new t(q,x)];x=m.createStageObjectForPoint(this._context,d,q,y,null,null,p,x,this._context.layer.uid,A,!0);if(null===x)return null;A=a.perObjectElevationAligner;
n=new e(this,x.object,q,h.isNone(n)?y:null,h.isSome(b)?[b]:null,A,p);n.alignedTerrainElevation=x.terrainElevation;n.needsElevationUpdates=m.needsElevationUpdates2D(p.mode)||"absolute-height"===p.mode;var p=h.isSome(b)?b:l,H=p.displayWidth,F=p.displayHeight;n.getScreenSize=function(a){void 0===a&&(a=f.vec2f64.create());a[0]=H;a[1]=F;return a};n.metadata={labelText:c,elevationOffset:l.elevationOffset};m.extendPointGraphicElevationContext(n,d,this._context.elevationProvider);return n};return q}(q.default);
c.Graphics3DTextSymbolLayer=p;var A={mode:"relative-to-ground",offset:0},B={text:null,translation:[0,0,0],elevationOffset:0,centerOffset:[0,0,0,1],screenOffset:[0,0],anchor:"center",verticalOffset:null,centerOffsetUnits:null,debugDrawBorder:!1,displayWidth:0,displayHeight:0};c.default=p})},"esri/views/3d/webgl-engine/lib/TextRenderParameters":function(){define("require exports ../../../../Color ../../../../core/maybe ../../../../core/screenUtils ../../../../core/libs/gl-matrix-2/factories/vec4f64".split(" "),
function(p,c,n,l,k,d){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(d){this.definition=d;this.key=JSON.stringify(d);this.haloSize=Math.round(d.halo.size);this.fillStyle=this.colorToRGBA(d.color);this.haloStyle=this.colorToRGB(d.halo.color)}c.prototype.colorToRGB=function(d){return"rgb("+d.slice(0,3).map(function(d){return Math.floor(255*d)}).toString()+")"};c.prototype.colorToRGBA=function(d){return"rgba("+d.slice(0,3).map(function(d){return Math.floor(255*d)}).toString()+
","+d[3]+")"};c.fromSymbol=function(g,f){void 0===f&&(f=1);var b=l.get(g,"material","color"),b=l.isSome(b)?n.toUnitRGBA(b):d.ZEROS,a=g.halo,e=null!=g.size?k.pt2px(g.size):12;g={family:g.font&&g.font.family?g.font.family:"sans-serif",weight:g.font&&g.font.weight?g.font.weight:"normal",style:g.font&&g.font.style?g.font.style:"normal"};a=l.isSome(a)&&l.isSome(a.color)&&0<a.size?{size:k.pt2px(a.size),color:n.toUnitRGBA(a.color)}:{size:0,color:d.ZEROS};return new c({size:e,color:b,font:g,halo:a,pixelRatio:f})};
return c}();c.TextRenderParameters=p;c.default=p})},"esri/views/3d/webgl-engine/lib/TextTexture":function(){define("require exports ../../../../core/mathUtils ./TextRenderer ./Texture ../../../webgl/Texture ../../../webgl/capabilities/isWebGL2Context".split(" "),function(p,c,n,l,k,d,h){var g={canvas:null};return function(){function c(b,a,d,c){this._idHint=c;this._requiresPowerOfTwo=!h.default(b.gl);this._renderer=new l.default(a,d)}Object.defineProperty(c.prototype,"id",{get:function(){null==this._id&&
(this._id=k.idGen.gen(this._idHint));return this._id},enumerable:!0,configurable:!0});c.prototype.deferredLoading=function(){return!1};c.prototype.getWidth=function(){return this._renderer.renderedWidth};c.prototype.getHeight=function(){return this._renderer.renderedHeight};Object.defineProperty(c.prototype,"textureWidth",{get:function(){var b=this.getWidth();return this._requiresPowerOfTwo?n.nextHighestPowerOfTwo(b):b},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"textureHeight",
{get:function(){var b=this.getHeight();return this._requiresPowerOfTwo?n.nextHighestPowerOfTwo(b):b},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"displayWidth",{get:function(){return this._renderer.displayWidth},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"displayHeight",{get:function(){return this._renderer.displayHeight},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"texcoordScale",{get:function(){return[this._renderer.renderedWidth/
this.textureWidth,this._renderer.renderedHeight/this.textureHeight]},enumerable:!0,configurable:!0});c.prototype.initializeThroughRender=function(b,a){var c=l.getTextHelperCanvas(g,this.textureWidth,this.textureHeight),f=c.getContext("2d");f.save();a.samplingMode=9987;a.wrapMode=33071;a.flipped=!0;a.preMultiplyAlpha=!0;a.hasMipmap=!0;this._renderer.render(f,0,this.textureHeight-this._renderer.renderedHeight);b=new d(b,a,c);f.restore();return b};c.prototype.setUnloadFunc=function(b){this._unloadFunc=
b};c.prototype.unload=function(){this._unloadFunc&&(this._unloadFunc(this._id),this._unloadFunc=null)};return c}()})},"esri/views/3d/webgl-engine/lib/TextRenderer":function(){define(["require","exports","../../../../core/maybe","./TextRenderParameters"],function(p,c,n,l){function k(b,a,d){b.canvas||(b.canvas=document.createElement("canvas"));b.canvas.width=a;b.canvas.height=d;return b.canvas}Object.defineProperty(c,"__esModule",{value:!0});p=function(){function b(a,b,d){void 0===d&&(d=2048);this.text=
a;this.maxSize=d;this._displayWidth=this._renderPixelRatio=null;this.parameters=b instanceof l.default?b:new l.default(b);this.key=this.parameters.key+"--"+a;this.textLines=a.split(/\r?\n/);this.lineHeight=this.computeLineHeight()}Object.defineProperty(b.prototype,"displayWidth",{get:function(){n.isNone(this._displayWidth)&&(this._displayWidth=this.computeTextWidth());return this._displayWidth},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"displayHeight",{get:function(){return this.lineHeight*
this.textLines.length},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"renderedWidth",{get:function(){return Math.round(this.displayWidth*this.renderPixelRatio)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"renderedHeight",{get:function(){return Math.round(this.displayHeight*this.renderPixelRatio)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"renderedLineHeight",{get:function(){return Math.round(this.lineHeight*this.renderPixelRatio)},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"renderedFontSize",{get:function(){return this.parameters.definition.size*this.renderPixelRatio},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"renderedHaloSize",{get:function(){return this.parameters.haloSize*this.renderPixelRatio},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"renderPixelRatio",{get:function(){if(n.isNone(this._renderPixelRatio)){var a=this.parameters.definition.pixelRatio;
this._renderPixelRatio=0<this.maxSize?Math.min(a,Math.min(this.maxSize/(this.displayWidth*a),this.maxSize/(this.displayHeight*a))):a}return this._renderPixelRatio},enumerable:!0,configurable:!0});b.prototype.render=function(a,b,d){void 0===b&&(b=0);void 0===d&&(d=0);var c=this.renderedLineHeight,e=this.renderedHaloSize,f=a.textAlign,g=this.renderedWidth,f=("center"===f?.5*g:"right"===f?g:0)+e;a.save();0<e&&this.renderHalo(a,f,e,b,d);this.setFontProperties(a,this.renderedFontSize);d+=e;b+=f;e=0;for(f=
this.textLines;e<f.length;e++)g=f[e],a.globalCompositeOperation="destination-out",a.fillStyle="rgb(0, 0, 0)",a.fillText(g,b,d),a.globalCompositeOperation="source-over",a.fillStyle=this.parameters.fillStyle,a.fillText(g,b,d),d+=c;a.restore()};b.prototype.renderHalo=function(a,b,d,c,h){var e=this.renderedWidth,m=this.renderedHeight,l=k(g,Math.max(e,f),Math.max(m,f)),n=l.getContext("2d");n.clearRect(0,0,e,m);this.setFontProperties(n,this.renderedFontSize);n.fillStyle=this.parameters.haloStyle;n.strokeStyle=
this.parameters.haloStyle;var q=3>this.renderedHaloSize;n.lineJoin=q?"miter":"round";q?this.renderHaloEmulated(n,b,d):this.renderHaloNative(n,b,d);a.globalAlpha=this.parameters.definition.halo.color[3];a.drawImage(l,0,0,e,m,c,h,e,m);a.globalAlpha=1};b.prototype.renderHaloEmulated=function(a,b,c){for(var e=this.renderedLineHeight,f=this.renderedHaloSize,g=0,m=this.textLines;g<m.length;g++){for(var h=m[g],k=0,l=d;k<l.length;k++){var n=l[k];a.fillText(h,b+f*n[0],c+f*n[1])}c+=e}};b.prototype.renderHaloNative=
function(a,b,d){for(var c=this.renderedLineHeight,e=this.renderedHaloSize,f=0,g=this.textLines;f<g.length;f++){for(var m=g[f],h=2*e,k=0;5>k;k++)a.lineWidth=(.6+.1*k)*h,a.strokeText(m,b,d);d+=c}};b.prototype.setFontProperties=function(a,b){var d=this.parameters.definition.font;a.font=d.style+" "+d.weight+" "+b+"px "+d.family+", sans-serif";a.textAlign="left";a.textBaseline="top"};b.prototype.computeTextWidth=function(){var a=k(g,f,f).getContext("2d");this.setFontProperties(a,this.parameters.definition.size);
for(var b=0,d=0,c=this.textLines;d<c.length;d++)b=Math.max(b,a.measureText(c[d]).width);d=this.parameters.definition.font;if("italic"===d.style||"oblique"===d.style||"string"===typeof d.weight&&("bold"===d.weight||"bolder"===d.weight)||"number"===typeof d.weight&&600<d.weight)b+=.3*a.measureText("A").width;b+=2*this.parameters.haloSize;return Math.round(b)};b.prototype.computeLineHeight=function(){return Math.floor(1.275*this.parameters.definition.size+2*this.parameters.haloSize)};return b}();c.TextRenderer=
p;for(var d=[],h=0;360>h;h+=22.5)d.push([Math.cos(Math.PI*h/180),Math.sin(Math.PI*h/180)]);c.getTextHelperCanvas=k;var g={canvas:null},f=512;c.default=p})},"esri/views/3d/layers/graphics/Graphics3DWaterSymbolLayer":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../Color ../../../../core/maybe ../../../../core/unitUtils ../../../../core/libs/earcut/earcut ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec2f64 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4 ../../../../core/libs/gl-matrix-2/math/common ../../../../geometry/Polygon ../../../../geometry/support/aaBoundingBox ../../../../geometry/support/aaBoundingRect ./ElevationAligners ./Graphics3DDrapedGraphicLayer ./Graphics3DObject3DGraphicLayer ./Graphics3DSymbolCommonCode ./Graphics3DSymbolLayer ../../webgl-engine/Stage ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/GeometryData ../../webgl-engine/lib/Object3D ../../webgl-engine/lib/RenderGeometry ../../webgl-engine/lib/Util ../../webgl-engine/materials/WaterMaterial ../../webgl-engine/materials/internal/waterMaterialUtils".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z,A,B,D,C,E,H,G,I,K,M,T){Object.defineProperty(c,"__esModule",{value:!0});p=function(c){function u(a,b,d,e){return c.call(this,a,b,d,e)||this}l(u,c);u.prototype.doLoad=function(){return d(this,void 0,void 0,function(){var a,b;return k(this,function(d){a=T.waterParameterDefaultsLocal;b=n({},a);this._updateMaterialParameters(b);b.isDraped=!0;this._drapedMaterial=new M.WaterMaterial(b,"waterDraped");this._context.stage.add(C.ModelContentType.MATERIAL,
this._drapedMaterial);this._updateMaterialParameters(a);this._material=new M.WaterMaterial(a,"water");this._context.stage.add(C.ModelContentType.MATERIAL,this._material);return[2]})})};u.prototype.destroy=function(){c.prototype.destroy.call(this);this._material&&(this._context.stage.remove(C.ModelContentType.MATERIAL,this._material.id),this._material=null);this._drapedMaterial&&(this._context.stage.remove(C.ModelContentType.MATERIAL,this._drapedMaterial.id),this._drapedMaterial=null)};u.prototype.createGraphics3DGraphic=
function(a){a=a.graphic;var b=a.geometry.type;if("polyline"!==b&&"polygon"!==b&&"extent"!==b)return this.logger.warn("unsupported geometry type for water symbol: "+b),null;if(!this._validateGeometry(a.geometry))return null;var b="graphic"+a.uid,d=this.getGraphicElevationContext(a);return"on-the-ground"===d.mode?this._createAsOverlay(a,b):this._createAs3DShape(a,d,b,a.uid)};u.prototype.layerOpacityChanged=function(){var a=this._material.color,b=this._getCombinedOpacity(this.symbolLayer.color,{hasIntrinsicColor:!0});
this._material.color=[a[0],a[1],a[2],b];this._material.setTransparent(1>b||this._isPropertyDriven("opacity"));this._drapedMaterial.color=[a[0],a[1],a[2],b];this._drapedMaterial.setTransparent(1>b||this._isPropertyDriven("opacity"));return!0};u.prototype.layerElevationInfoChanged=function(a,b,d){var c=this._elevationContext.mode;if(null==d||null==c)return!1;if("on-the-ground"===d&&"on-the-ground"===c)return!0;if(d!==c&&("on-the-ground"===d||"on-the-ground"===c))return!1;var e=B.needsElevationUpdates2D(c);
return this.updateGraphics3DGraphicElevationInfo(a,b,function(){return e})};u.prototype.slicePlaneEnabledChanged=function(a,b){this._material.setParameterValues({slicePlaneEnabled:this._context.slicePlaneEnabled});this._drapedMaterial.setParameterValues({slicePlaneEnabled:this._context.slicePlaneEnabled});return!0};u.prototype.pixelRatioChanged=function(a,b){return!0};u.prototype.setDrawOrder=function(a,b,d){this.updateSymbolLayerOrder(a,b);this._material&&(this._material.renderPriority=a+b/2,d.add(this._material.id));
this._drapedMaterial&&(this._drapedMaterial.renderPriority=a+b/2,d.add(this._drapedMaterial.id))};u.prototype._createAs3DShape=function(a,b,d,c){a=this._getPolyGeometry(a);var e=this._getOutlineGeometry(a.rings);a=B.getGeometryVertexData3D(e,a.hasZ,a.spatialReference,this._context.renderSpatialReference,this._context.elevationProvider,this._context.renderCoordsHelper,b);e=a.vertexData.length/3;a.uvCoords=new Float64Array(2*e);J.idHint=d;J.data=a;J.outNum=0;J.outGeometries=[];J.outTransforms=[];J.outMaterials=
[];this._create3DShapeGeometries(J);if(0===J.outNum)return null;this._createUVCoordsFromVertices(J.data.uvCoords,J.data.eleVertexData,e,this._context.elevationProvider.spatialReference);d=new G({geometries:J.outGeometries,materials:J.outMaterials,transformations:J.outTransforms,castShadow:!1,metadata:{layerUid:this._context.layer.uid,graphicUid:c},idHint:d});d=new A(this,d,J.outGeometries,null,null,y.perVertexElevationAligner,b);d.alignedTerrainElevation=a.terrainElevation;d.needsElevationUpdates=
B.needsElevationUpdates2D(b.mode);return d};u.prototype._createUVCoordsFromVertices=function(a,b,d,c){c=f.getMetersPerUnitForSR(c);v.empty(S);for(var e=0;e<d;e++)m.vec2.set(O,b[3*e+0],b[3*e+1]),v.expandPointInPlace(S,O);t.vec4.scale(S,S,c);e=S[1]%u.unitSizeOfTexture;N[0]=S[0]-S[0]%u.unitSizeOfTexture;N[1]=S[1]-e;for(e=0;e<d;e++)a[2*e+0]=(b[3*e+0]*c-N[0])/u.unitSizeOfTexture,a[2*e+1]=(b[3*e+1]*c-N[1])/u.unitSizeOfTexture};u.prototype._create3DShapeGeometries=function(d){for(var c=d.data.geometryData.polygons,
f=d.data.eleVertexData,g=d.data.vertexData,m=d.data.uvCoords,h=function(h){var l=c[h];h=l.count;var n=l.index;if(k._context.clippingExtent&&(B.computeBoundingBox(f,n,h,V),B.boundingBoxClipped(V,k._context.clippingExtent)))return"continue";var r=new Float64Array(f.buffer,3*n*f.BYTES_PER_ELEMENT,3*h),q=new Float64Array(g.buffer,3*n*g.BYTES_PER_ELEMENT,3*h),t=new Float64Array(m.buffer,2*n*m.BYTES_PER_ELEMENT,2*h),l=l.holeIndices.map(function(a){return a-n}),l=b(r,l,3);if(0===l.length)return"continue";
B.applyOrigin(g,n,h,Q);h=k._createWaterGeometry(l,q,t,r);h=new E(h,d.idHint);h.singleUse=!0;r=e.mat4f64.create();a.mat4.translate(r,r,Q);d.outGeometries.push(h);d.outMaterials.push(k._material);d.outTransforms.push(r);d.outNum++},k=this,l=0;l<c.length;++l)h(l)};u.prototype._createWaterGeometry=function(a,b,d,c){for(var e=a.length,f=new Uint32Array(e),g=0;g<e;g++)f[g]=a[g];a={};e={};a[K.VertexAttrConstants.POSITION]=f;a[K.VertexAttrConstants.UV0]=f;e[K.VertexAttrConstants.POSITION]={size:3,data:b};
e[K.VertexAttrConstants.UV0]={size:2,data:d};c&&(e.mapPos={size:3,data:c},a.mapPos=f);return new H(e,a)};u.prototype._updateMaterialParameters=function(a){var b=this.symbolLayer.color;g.isSome(b)&&(a.color=h.toUnitRGBA(b));b=this._getCombinedOpacity(b,{hasIntrinsicColor:!0});a.color=[a.color[0],a.color[1],a.color[2],b];a.transparent=1>b||this._isPropertyDriven("opacity");a.waveDirection=g.isSome(this.symbolLayer.waveDirection)?u.headingVectorFromAngle(this.symbolLayer.waveDirection):q.vec2f64.fromValues(0,
0);b=T.wavePresets[this.symbolLayer.waveStrength+"-"+this.symbolLayer.waterbodySize];a.waveStrength=b.waveStrength;a.waveTextureRepeat=b.textureRepeat;a.waveVelocity=b.waveVelocity;a.flowStrength=b.perturbationStrength};u.prototype._createAsOverlay=function(a,b){var d=this._getPolyGeometry(a),c=d.rings,e=this._getOutlineGeometry(c);this._drapedMaterial.renderPriority=this._symbolLayerOrder+this._symbolLayerOrderDelta/2;e=B.getGeometryVertexDataDraped(e,d.spatialReference,this._context.overlaySR);
J.idHint=b;J.data=e;b=e.vertexData.length/3;e.uvCoords=new Float64Array(2*b);J.outNum=0;J.outGeometries=[];J.outBoundingBox=w.empty();J.layerUid=this._context.layer.uid;J.graphicsUid=a.uid;this._createAsOverlayWater(J);if(0===J.outNum)return null;this._createUVCoordsFromVertices(J.data.uvCoords,J.data.vertexData,b,d.spatialReference);this._logGeometryCreationWarnings(J.data,c,"rings","WaterSymbol3DLayer");return 0<J.outNum?new z(this,J.outGeometries,J.outBoundingBox):null};u.prototype._createAsOverlayWater=
function(d){for(var c=d.data.vertexData,f=d.data.uvCoords,g=function(g){var h=g.count,k=g.index,l=new Float64Array(c.buffer,3*k*c.BYTES_PER_ELEMENT,3*h),n=new Float64Array(f.buffer,2*k*f.BYTES_PER_ELEMENT,2*h);g=g.holeIndices.map(function(a){return a-k});g=b(l,g,3);if(0===g.length)return"continue";B.computeBoundingBox(c,k,h,V);if(B.boundingBoxClipped(V,m._context.clippingExtent))return"continue";w.expand(d.outBoundingBox,V);B.applyOrigin(c,k,h,Q);B.setZ(c,k,h,m._getDrapedZ());h=e.mat4f64.create();
a.mat4.translate(h,h,Q);l=m._createWaterGeometry(g,l,n,null);n=new I(l);n.data.layerUid=d.layerUid;n.data.graphicUid=d.graphicsUid;n.material=m._drapedMaterial;g=V;n.center=[.5*(g[0]+g[3]),.5*(g[1]+g[4]),0];n.bsRadius=.5*Math.sqrt((g[3]-g[0])*(g[3]-g[0])+(g[4]-g[1])*(g[4]-g[1]));n.transformation=h;n.name=d.idHint;n.uniqueName=d.idHint+"#"+l.id;d.outGeometries.push(n);d.outNum++},m=this,h=0,k=d.data.geometryData.polygons;h<k.length;h++)g(k[h])};u.prototype._getOutlineGeometry=function(a){return a};
u.prototype._getPolyGeometry=function(a){a=a.geometry;return"extent"===a.type?x.fromExtent(a):a};u.headingVectorFromAngle=function(a){var b=q.vec2f64.create();a=r.toRadian(a);b[0]=Math.sin(a);b[1]=Math.cos(a);return b};u.unitSizeOfTexture=100;return u}(D.default);c.Graphics3DWaterSymbolLayer=p;var N=q.vec2f64.create(),S=v.create(),O=q.vec2f64.create(),V=w.create(),Q=u.vec3f64.create(),J={idHint:null,data:null,outNum:0,outBoundingBox:null,outGeometries:null,outMaterials:null,outTransforms:null};c.default=
p})},"esri/views/3d/webgl-engine/materials/WaterMaterial":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../lib/Material ./WaterGLMaterial ./internal/MaterialUtil ./internal/PositionUVBufferWriter ./internal/waterMaterialUtils ./renderers/MergedRenderer".split(" "),function(p,c,n,l,k,d,h,g,f){Object.defineProperty(c,"__esModule",{value:!0});p=function(b){function a(a,c){c=b.call(this,c)||this;c.animationSupported=!0;c.params=d.copyParameters(a,g.waterParameterDefaultsLocal);
return c}n(a,b);a.prototype.setParameterValues=function(a){var b=this.params;console.log("setParameterValues",a);for(var d in a)b[d]=a[d];this.notifyDirty("matChanged")};a.prototype.getParameters=function(){return this.params};Object.defineProperty(a.prototype,"color",{get:function(){return this.params.color},set:function(a){this.params.color=a;this.notifyDirty("matChanged")},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"waveDirection",{get:function(){return this.params.waveDirection},
set:function(a){this.params.waveDirection=a;this.notifyDirty("matChanged")},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"polygonOffset",{get:function(){return[this.params.polygonOffset.factor,this.params.polygonOffset.units]},set:function(a){this.params.polygonOffset=a?{factor:a[0],units:a[1]}:null;this.notifyDirty("matChanged")},enumerable:!0,configurable:!0});a.prototype.setTransparent=function(a){this.params.transparent=a;this.notifyDirty("matChanged")};a.prototype.getTransparent=
function(){return this.params.transparent};Object.defineProperty(a.prototype,"draped",{set:function(a){this.params.isDraped=a;this.notifyDirty("matChanged")},enumerable:!0,configurable:!0});a.prototype.intersect=function(a,b,c,f,g,h,k,l,n){d.intersectTriangleGeometry(a,b,c,f,g,h,k,n)};a.prototype.getGLMaterials=function(){return{color:this.params.isDraped?k.WaterDrapedGLMaterial:k.WaterGLMaterial,depthShadowMap:void 0,normal:k.WaterNormalGLMaterial,depth:void 0,highlight:void 0}};a.prototype.createBufferWriter=
function(){return new h};a.prototype.createRenderer=function(a,b){return new f(a,b,this)};return a}(l);c.WaterMaterial=p})},"esri/views/3d/webgl-engine/materials/internal/PositionUVBufferWriter":function(){define(["require","exports","../../../support/buffer/InterleavedLayout","../../lib/Util","./bufferWriters"],function(p,c,n,l,k){var d=n.newLayout().vec3f(l.VertexAttrConstants.POSITION).vec2f(l.VertexAttrConstants.UV0);return function(){function c(){this.vertexBufferLayout=d}c.prototype.allocate=
function(c){return d.createBuffer(c)};c.prototype.elementCount=function(d){return d.indices[l.VertexAttrConstants.POSITION].length};c.prototype.write=function(c,f,b,a){k.writeDefaultAttributes(f,d,c.transformation,c.invTranspTransformation,b,a)};return c}()})},"esri/views/3d/layers/graphics/Graphics3DWebStyleSymbol":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ./Loadable ./symbolComplexity".split(" "),
function(p,c,n,l,k,d,h){return function(d){function c(b,a){var c=d.call(this)||this;c.symbol=b;c.convert=a;c.graphics3DSymbol=null;c.referenced=0;return c}n(c,d);c.prototype.whenSymbolLayerSize=function(b){return k(this,void 0,void 0,function(){return l(this,function(a){switch(a.label){case 0:return[4,this.load()];case 1:return a.sent(),[2,this.graphics3DSymbol.whenSymbolLayerSize(b)]}})})};c.prototype.doLoad=function(b){return k(this,void 0,void 0,function(){var a;return l(this,function(d){switch(d.label){case 0:return[4,
this.symbol.fetchSymbol({signal:b})];case 1:return a=d.sent(),a.id=this.symbol.id,this.graphics3DSymbol=this.convert(a),[4,this.graphics3DSymbol.load()];case 2:return d.sent(),[2]}})})};c.prototype.createGraphics3DGraphic=function(b){return this.graphics3DSymbol.createGraphics3DGraphic(b,this)};Object.defineProperty(c.prototype,"complexity",{get:function(){return this.graphics3DSymbol?this.graphics3DSymbol.complexity:h.emptySymbolComplexity},enumerable:!0,configurable:!0});c.prototype.globalPropertyChanged=
function(b,a){return this.graphics3DSymbol.globalPropertyChanged(b,a)};c.prototype.applyRendererDiff=function(b,a){return this.graphics3DSymbol.applyRendererDiff(b,a)};c.prototype.prepareSymbolPatch=function(b){this.graphics3DSymbol&&this.graphics3DSymbol.prepareSymbolPatch(b)};c.prototype.updateGeometry=function(b,a){return this.graphics3DSymbol?this.graphics3DSymbol.updateGeometry(b,a):!1};c.prototype.getFastUpdateStatus=function(){return this.graphics3DSymbol?this.graphics3DSymbol.getFastUpdateStatus():
{loading:1,fast:0,slow:0}};c.prototype.setDrawOrder=function(b,a){this.graphics3DSymbol&&this.graphics3DSymbol.setDrawOrder(b,a)};c.prototype.destroy=function(){this.graphics3DSymbol&&this.graphics3DSymbol.destroy();this.graphics3DSymbol=void 0;this.abortLoad()};Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0===this.graphics3DSymbol},enumerable:!0,configurable:!0});return c}(d.Loadable)})},"esri/views/3d/layers/graphics/labelPlacement":function(){define("require exports ../../../../core/compilerUtils ../../../../core/Logger ../../../../core/maybe ../../../../core/scheduling ../../../../core/libs/gl-matrix-2/vec2f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4f64 ../../../../geometry/support/aaBoundingBox ./graphicSymbolUtils ../../webgl-engine/materials/HUDMaterial".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m){function q(a){return e.getGraphics3DSymbol(a.graphics3DGraphic.graphics3DSymbol).symbol.symbolLayers.getItemAt(0)}function u(a){var b=a.graphics3DGraphic.graphic.geometry;if(k.isNone(b))return null;b=b.type;switch(b){case "polyline":case "extent":case "multipoint":return{placement:"center-center",normalizedOffset:null,anchor:"center"};case "polygon":return"extrude"===q(a).type?z["above-center"]:{placement:"center-center",normalizedOffset:null,anchor:"center"};case "point":return z["above-center"];
case "mesh":return z["above-center"];default:n.neverReached(b)}}function t(a,b){null==y&&(v.log(a,b),y=d.schedule(function(){y.remove();y=null}))}function r(a,b,d){d=d.graphics3DGraphic._graphics[0].getBoundingBoxObjectSpace(E);d=f.vec3f64.fromValues(d[3]-d[0],d[4]-d[1],d[5]-d[2]);a.centerOffset[0]=1.1*Math.sqrt(d[0]*d[0]+d[1]*d[1])/2*b.normalizedOffset[0];var c=a.translation[2],e=d[2]/2*b.normalizedOffset[1];a.translation[2]=e*(1.1-1);a.elevationOffset=c+e;d=g.vec3.length(d);a.centerOffset[2]=1.1*
d/2*b.normalizedOffset[2]}function x(a){var b=a.labelClass.labelPlacement,d=a.labelSymbol,c=a.graphics3DGraphic,f=e.getGraphics3DSymbol(c.graphics3DSymbol).symbol;a=z[b]||u(a);if("point-3d"===f.type&&f.supportsCallout()&&f.hasVisibleVerticalOffset()&&!c.isDraped())return{placement:null,hasLabelVerticalOffset:!1,verticalOffset:w(f.verticalOffset),anchor:null,normalizedOffset:null};if(d&&d.hasVisibleVerticalOffset()&&("point-3d"!==f.type||!f.supportsCallout()||!f.verticalOffset||c.isDraped())){a:switch(a.placement){case "above-center":c=
!0;break a;default:c=!1}return c?{placement:"above-center",verticalOffset:w(d.verticalOffset),anchor:"bottom",normalizedOffset:[0,a.normalizedOffset[1],0],hasLabelVerticalOffset:!0}:(t("error","Callouts and vertical offset on labels are currently only supported with 'above-center' label placement (not with "+b+" placement)"),null)}return{placement:null,verticalOffset:null,anchor:null,normalizedOffset:null,hasLabelVerticalOffset:!1}}function w(a){return{screenLength:a.screenLength,minWorldLength:a.minWorldLength,
maxWorldLength:a.maxWorldLength}}Object.defineProperty(c,"__esModule",{value:!0});var v=l.getLogger("esri.views.3d.layers.graphics.labelPlacement"),y=null;c.get=function(d){var c=x(d);if(k.isNone(c))return null;var e;if(c.anchor)e=c;else{var g=d.labelClass.labelPlacement,l=z[g];e=l||u(d);g&&!l&&t("warn","the requested label placement '"+g+"' is not currently supported in SceneView");g=d.graphics3DGraphic.graphic.geometry;if(k.isNone(g))e=null;else switch(g=g.type,g){case "polyline":case "polygon":case "extent":case "multipoint":d.labelClass.labelPlacement&&
(t("warn","the requested label placement '"+e.placement+"' is currently unsupported for '"+g+"' geometries in SceneView"),e=u(d));break;case "point":case "mesh":break;default:n.neverReached(g)}}if(k.isNone(e))return null;g=!!c.hasLabelVerticalOffset;c={anchor:e.anchor,verticalOffset:c.verticalOffset,screenOffset:h.vec2f64.create(),centerOffset:b.vec4f64.fromValues(0,0,0,-1),centerOffsetUnits:"world",translation:f.vec3f64.create(),elevationOffset:0,hasLabelVerticalOffset:g};g=d.graphics3DGraphic.graphic.geometry;
if(k.isNone(g))d=null;else{switch(g.type){case "point":g=d.graphics3DGraphic;l=q(d);g.getCenterObjectSpace(c.translation);switch(l.type){case "icon":case "text":l=d.graphics3DGraphic;g=l._graphics[0].getScreenSize();l.isDraped()?c.hasLabelVerticalOffset||"center"===c.anchor||(z[d.labelClass.labelPlacement]&&t("warn","the requested placement '"+e.placement+"' is currently unsupported for draped graphics"),c.anchor="center"):(l=void 0,void 0===l&&(l=C),d=d.graphics3DGraphic._graphics[0].stageObject.getGeometryRecords()[0].material,
d instanceof m?(d=d.getParameters().anchorPos,l[0]=2*(d[0]-.5),l[1]=2*(d[1]-.5)):(l[0]=0,l[1]=0),d=l,D[0]=g[0]/2*(e.normalizedOffset[0]-d[0]),D[1]=g[1]/2*(e.normalizedOffset[1]-d[1]),c.screenOffset[0]=D[0],c.hasLabelVerticalOffset?(c.centerOffset[1]=D[1],c.centerOffsetUnits="screen"):c.screenOffset[1]=D[1]);break;case "object":r(c,e,d)}break;case "polygon":switch(q(d).type){case "extrude":d.graphics3DGraphic._graphics[0].getBoundingBoxObjectSpace(E),a.center(E,c.translation),c.translation[2]=a.height(E)/
2,r(c,e,d)}break;case "mesh":r(c,e,d)}d=c}return d};var z={"above-center":{placement:"above-center",normalizedOffset:[0,1,0],anchor:"bottom"},"above-left":{placement:"above-left",normalizedOffset:[-1,1,0],anchor:"bottom-right"},"above-right":{placement:"above-right",normalizedOffset:[1,1,0],anchor:"bottom-left"},"below-center":{placement:"below-center",normalizedOffset:[0,-1,2],anchor:"top"},"below-left":{placement:"below-left",normalizedOffset:[-1,-1,0],anchor:"top-right"},"below-right":{placement:"below-right",
normalizedOffset:[1,-1,0],anchor:"top-left"},"center-center":{placement:"center-center",normalizedOffset:[0,0,1],anchor:"center"},"center-left":{placement:"center-left",normalizedOffset:[-1,0,0],anchor:"right"},"center-right":{placement:"center-right",normalizedOffset:[1,0,0],anchor:"left"}},A={"above-center":["default","esriServerPointLabelPlacementAboveCenter"],"above-left":["esriServerPointLabelPlacementAboveLeft"],"above-right":["esriServerPointLabelPlacementAboveRight"],"below-center":["esriServerPointLabelPlacementBelowCenter"],
"below-left":["esriServerPointLabelPlacementBelowLeft"],"below-right":["esriServerPointLabelPlacementBelowRight"],"center-center":["esriServerPointLabelPlacementCenterCenter"],"center-left":["esriServerPointLabelPlacementCenterLeft"],"center-right":["esriServerPointLabelPlacementCenterRight"]};p=function(a){var b=z[a];A[a].forEach(function(a){z[a]=b})};for(var B in A)p(B);Object.freeze&&(Object.freeze(z),Object.keys(z).forEach(function(a){Object.freeze(z[a]);Object.freeze(z[a].normalizedOffset)}));
var D=[0,0],C=[0,0],E=a.create()})},"esri/views/3d/webgl-engine/lib/MaterialCollection":function(){define(["require","exports","./ModelContentType"],function(p,c,n){return function(){function c(c){this.materials={};this.stage=c}c.prototype.getMaterial=function(c){return this.materials[c]};c.prototype.addMaterial=function(c,d){this.materials[c]=d;this.stage.add(n.MATERIAL,d)};c.prototype.dispose=function(){for(var c in this.materials)this.stage.remove(n.MATERIAL,this.materials[c].id);this.materials=
{}};return c}()})},"esri/views/3d/webgl-engine/lib/TextTextureAtlas":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/Accessor ../../../../core/iteratorUtils ../../../../core/mathUtils ../../../../core/accessorSupport/decorators ./ModelContentType ./Texture ../../../webgl/Texture".split(" "),function(p,c,n,l,k,d,h,g,f,b,a){Object.defineProperty(c,"__esModule",{value:!0});p=function(c){function k(a){a=c.call(this)||
this;a.dirty=!1;a.needsClear=!1;a.elementsToAdd=new Map;a.elementsToRemove=new Map;a.elementsToRender=new Map;a.elements=new Map;a.stageObjects=new Map;return a}n(k,c);r=k;k.prototype.initialize=function(){this.id=b.idGen.gen(this.idHint);this.stage=this.view._stage;this.scheduler=this.view.resourceController.scheduler;this.canvas=this.create2DCanvas();this.ctx=this.canvas.getContext("2d");this.stage.add(f.TEXTURE,this);var a=this.computeAtlasResolution(this.view.width,this.view.height);this.createAtlasRegion(a);
this.update2DCanvasSize();this.resetAtlasCursor()};k.prototype.setUnloadFunc=function(a){this.unloadFunc=a};k.prototype.unload=function(){null!=this.unloadFunc&&(this.unloadFunc(this.id),this.unloadFunc=null)};k.prototype.deferredLoading=function(){return!1};k.prototype.getWidth=function(){return this.atlas.size.width};k.prototype.getHeight=function(){return this.atlas.size.height};k.prototype.initializeThroughRender=function(b,d){var c=this;d.wrapMode=33071;d.samplingMode=9987;d.flipped=!0;d.preMultiplyAlpha=
!0;d.hasMipmap=!0;this.glTexture=new a(b,d,this.canvas);this.frameWorker=this.scheduler.registerTask(12,function(a){return c.run(c.makeRunContext(a))},function(){return c.dirty});return this.glTexture};k.prototype.dispose=function(){this.elementsToRender=this.elementsToRemove=this.elementsToAdd=this.elements=null;this.frameWorker&&(this.frameWorker.remove(),this.frameWorker=null);this.glTexture&&(this.glTexture=null,this.stage.remove(f.TEXTURE,this.id));this.canvas.width=0;this.canvas.height=0;this.ctx=
this.canvas=null};k.prototype.create2DCanvas=function(){var a=document.createElement("canvas");a.setAttribute("id","canvas2d");a.setAttribute("style","display:none");a.setAttribute("width",(512).toString());a.setAttribute("height",(512).toString());return a};k.prototype.update2DCanvasSize=function(){this.canvas.setAttribute("width",this.atlas.size.width.toString());this.canvas.setAttribute("height",this.atlas.size.height.toString())};k.prototype.createAtlasRegion=function(a){void 0===a&&(a=512);this.atlas=
{size:{width:a,height:a},cursor:{x:0,y:0},lineHeight:0}};k.prototype.computeAtlasResolution=function(a,b){a=Math.max(a,b);a=h.nextHighestPowerOfTwo(a+256);return a=Math.min(a,4096)};k.prototype.resizeAtlas=function(a,b){b=b||a;var d=this.atlas;d.size.width=a;d.size.height=b;this.glTexture&&this.glTexture.resize(a,b);this.update2DCanvasSize()};k.prototype.resetAtlasCursor=function(){var a=this.atlas;a.cursor.x=e;a.cursor.y=e+m;a.lineHeight=0;this.needsClear=!0};k.prototype.getAtlasUsage=function(){var a=
this.atlas;return(a.cursor.x+a.cursor.y*a.size.width)/(a.size.width*a.size.height)};k.prototype.getExpectedAtlasUsage=function(){var a=this.elementsToRemove.size,b=this.elementsToAdd.size,d=this.elements.size;return this.getAtlasUsage()/d*(d+b-a)};k.prototype.addAtlasElement=function(a,b,d,c){var e=this.atlas,f=a.textRenderer,g=f.renderedWidth,m=f.renderedHeight,h=f.displayWidth,f=f.displayHeight;a.placement.offset.x=e.cursor.x;a.placement.offset.y=e.cursor.y;a.placement.size.width=g;a.placement.size.height=
m;a.placement.size.displayWidth=h;a.placement.size.displayHeight=f;a.placement.uvMinMax=[a.placement.offset.x/e.size.width,1-(a.placement.offset.y+m)/e.size.height,(a.placement.offset.x+g)/e.size.width,1-a.placement.offset.y/e.size.height];e.cursor.x+=d;e.lineHeight=Math.max(e.lineHeight,c);this.elements.set(b,a)};k.prototype.removeAtlasElement=function(a){if(a&&this.elements.has(a.textId)){var b=a.placement.offset,d=a.placement.size;this.ctx.clearRect(b.x,b.y,d.width,d.height);this.elements.delete(a.textId)}};
k.prototype.ensureStageObjects=function(a){var b=this.stageObjects.get(a);b||(b=new Set,this.stageObjects.set(a,b));return b};k.prototype.addStageObject=function(a,b){this.ensureStageObjects(a).add(b)};k.prototype.removeStageObject=function(a,b){(a=this.stageObjects.get(a))&&a.delete(b)&&(b.geometries[0].data.vertexAttributes.size.data=new Float32Array([0,0]),b.geometryVertexAttrsUpdated(0))};k.prototype.processAdditionRequest=function(a,b){var d=this.atlas,c=a.textId,f=a.textRenderer.renderedWidth+
e,g=a.textRenderer.renderedHeight+e+m;b=b.repackingEnabled;if(d.cursor.x+f<d.size.width&&d.cursor.y+g<d.size.height)this.addAtlasElement(a,c,f,g),this.elementsToRender.set(c,a),this.elementsToAdd.delete(c);else if(d.cursor.y+g+d.lineHeight<d.size.height)d.cursor.x=e,d.cursor.y+=d.lineHeight,d.lineHeight=0,this.addAtlasElement(a,c,f,g),this.elementsToRender.set(c,a),this.elementsToAdd.delete(c);else{a=this.getExpectedAtlasUsage();(c=.85<a&&4096>d.size.width)&&this.resizeAtlas(2*d.size.width,2*d.size.height);
if(!b||!c&&.95<a&&4096===d.size.width)return this.processRemovals(),0;this.repack();return 1}return 0};k.prototype.processRemovals=function(){var a=this;this.elementsToRemove.forEach(function(b,d){var c=a.stageObjects.get(d);c&&0!==c.size||a.removeAtlasElement(b);c&&0===c.size&&a.stageObjects.delete(d)});this.elementsToRemove.clear()};k.prototype.repack=function(){var a=this;this.processRemovals();this.elements.forEach(function(b,d){b.rendered=!1;a.elementsToAdd.set(d,b)});this.elements.clear();this.resetAtlasCursor();
this.elementsToRender.clear()};k.prototype.processRenderingRequest=function(a){this.ctx.clearRect(a.placement.offset.x,a.placement.offset.y,a.placement.size.width,a.placement.size.height);a.textRenderer.render(this.ctx,a.placement.offset.x,a.placement.offset.y);var b=this.stageObjects.get(a.textId);b&&b.forEach(function(b){b.geometries[0].data.vertexAttributes.uv0.data=new Float32Array(a.placement.uvMinMax);b.geometries[0].data.vertexAttributes.size.data=new Float32Array([a.placement.size.displayWidth,
a.placement.size.displayHeight]);b.geometryVertexAttrsUpdated(0)});a.rendered=!0};k.prototype.run=function(a){var b=this;if(this.glTexture){var c=a.budget,e=!1;d.everyMap(this.elementsToAdd,function(d,c){return(d=b.elements.get(c))&&d.rendered?((d=b.stageObjects.get(c))&&d.forEach(function(a){var d=a.geometries[0].data.vertexAttributes,e=b.elements.get(c);d.uv0.data=new Float32Array(e.placement.uvMinMax);d.size.data=new Float32Array([e.placement.size.displayWidth,e.placement.size.displayHeight]);
a.geometryVertexAttrsUpdated(0)}),b.elementsToAdd.delete(c),!0):1===b.processAdditionRequest(b.elementsToAdd.get(c),a)?(e=!0,!1):!0});if(e)a.budget=null,a.repackingEnabled=!1,this.run(a);else{var f=!1;0<this.elementsToRender.size&&this.needsClear&&(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.needsClear=!1);d.everyMap(this.elementsToRender,function(a,d){b.processRenderingRequest(a);b.elementsToRender.delete(d);f=!0;return c&&(c.madeProgress(),c.done)?!1:!0});f&&this.glTexture.setData(this.canvas);
this.dirty=0<this.elementsToRender.size;this.dirty||(r.test.orderedRepackingEnabled&&this.repackOrdered(),this.notifyChange("updating"))}}};k.prototype.makeRunContext=function(a){void 0===a&&(a=null);q.budget=a;q.repackingEnabled=!0;return q};k.prototype.addTextTexture=function(a,b){var d=a.key;this.elementsToAdd.has(d)||this.elementsToAdd.set(d,{textId:d,placement:{offset:{x:0,y:0},size:{width:0,height:0,displayWidth:0,displayHeight:0},uvMinMax:[]},textRenderer:a,rendered:!1});this.addStageObject(d,
b);this.elementsToRemove.delete(d);this.setDirty()};k.prototype.removeTextTexture=function(a,b){a=a.key;this.elementsToRemove.set(a,this.elements.get(a));this.removeStageObject(a,b)};Object.defineProperty(k.prototype,"textureId",{get:function(){return this.id},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"isDirty",{get:function(){return this.dirty},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"updating",{get:function(){return this.isDirty},enumerable:!0,configurable:!0});
k.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.notifyChange("updating"))};Object.defineProperty(k.prototype,"test",{get:function(){return{elements:this.elements,stageObjects:this.stageObjects,elementsToRemove:this.elementsToRemove,atlas:this.atlas,resizeAtlas:this.resizeAtlas.bind(this)}},enumerable:!0,configurable:!0});k.prototype.repackOrdered=function(){if(0!==this.elements.size){var a=[];this.elements.forEach(function(b,d){return a.push({element:b,key:d})});for(var b=!0,d=0;d<
a.length-1;d++)if(0<a[d].key.localeCompare(a[d+1].key)){b=!1;break}if(!b){a.sort(function(a,b){return a.key.localeCompare(b.key)});this.elements.clear();for(b=0;b<a.length;b++)d=a[b],this.elements.set(d.key,d.element);this.repack();this.setDirty()}}};var r;k.test={orderedRepackingEnabled:!1};l([g.property({constructOnly:!0})],k.prototype,"idHint",void 0);l([g.property({constructOnly:!0})],k.prototype,"view",void 0);l([g.property({type:Boolean,readOnly:!0})],k.prototype,"updating",null);return k=r=
l([g.subclass("esri.views.3d.webgl-engine.lib.TextTextureAtlas")],k)}(g.declared(k));c.TextTextureAtlas=p;var e=2,m=2,q={budget:null,repackingEnabled:!0};c.default=p})},"esri/views/3d/layers/support/FeatureTileTree3D":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/Accessor ../../../../core/Collection ../../../../core/Handles ../../../../core/Logger ../../../../core/PooledArray ../../../../core/watchUtils ../../../../core/accessorSupport/decorators ../../../../geometry/support/aaBoundingRect ./FeatureTileDescriptor3D ./FeatureTileMeasurements3D ../../support/projectionUtils ../../../support/index".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t){Object.defineProperty(c,"__esModule",{value:!0});var r=g.getLogger("esri.views.3d.layers.support.FeatureTileFetcher3D");p=function(c){function g(a){a=c.call(this,a)||this;a.tiles=new d;a.tileSize=512;a.idToTile=new Map;a.handles=new h;a.clients=new Set;a._dirty=!1;a._newTiles=new f;return a}n(g,c);Object.defineProperty(g.prototype,"tilingScheme",{get:function(){var a=this.tilingSchemeOwner.tilingScheme;return a?a.clone():null},enumerable:!0,configurable:!0});
Object.defineProperty(g.prototype,"filterExtent",{set:function(a){if(a&&!a.spatialReference.equals(this.viewState.spatialReference))r.error("#extent","extent spatial reference needs to be in the same spatial reference as the view");else{var b=this._get("filterExtent");b===a||b&&a&&b.equals(a)||(a=a?a.clone():null,this._set("filterExtent",a),this._setDirty())}},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"filterExtentRect",{get:function(){if(!this.filterExtent||!this.tilingScheme)return null;
var a=e.create();u.extentToBoundingRect(this.filterExtent,a,this.tilingScheme.spatialReference);return a},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"rootTileIds",{get:function(){return this.filterExtentRect?this.tilingScheme.rootTilesInExtent(this.filterExtentRect):[[0,0,0]]},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"suspended",{set:function(a){a!==this._get("suspended")&&(this._set("suspended",a),this._setDirty())},enumerable:!0,configurable:!0});
Object.defineProperty(g.prototype,"updating",{get:function(){return this._dirty||!!this._pendingTiles},enumerable:!0,configurable:!0});g.prototype.initialize=function(){var a=this;this.handles.add(this.watch(["tilingScheme","tileSize"],function(){return a._reset()},!0));this.handles.add(b.init(this,["tileSize","cameraOnSurface.location","tilingScheme","viewState.camera","focus.locationOnSurface"],function(){return a._setDirty()}));this.scheduler&&(this._frameWorker=this.scheduler.registerTask(12,
function(b){return a._update(b)},function(){return a.updating}))};g.prototype.destroy=function(){this._frameWorker&&(this._frameWorker.remove(),this._frameWorker=null);this.handles&&(this.handles.destroy(),this.handles=null)};g.prototype.addClient=function(){var a=this,b=x++;this.clients.add(b);1===this.clients.size&&this._setDirty();return{remove:function(){return a._removeClient(b)}}};g.prototype._removeClient=function(a){this.clients.delete(a);this._hasClients||this._clear()};Object.defineProperty(g.prototype,
"_hasClients",{get:function(){return 0<this.clients.size},enumerable:!0,configurable:!0});g.prototype._setDirty=function(){!this._hasClients||this.suspended||this._dirty||(this._frameWorker?(this._dirty=!0,this.notifyChange("updating")):this._update(t.noBudget))};g.prototype._clear=function(){this.tiles.removeAll();this.idToTile.clear();this._reset();this._dirty=!1;this.notifyChange("updating")};g.prototype._update=function(a){this._dirty=!1;this._pendingTiles||(this._startUpdate(a),this._frameWorker&&
(this._frameWorker.priority=1));this._subdivideTilesForView(a);!this._pendingTiles&&this._frameWorker&&(this._frameWorker.priority=12);this.notifyChange("updating")};g.prototype._startUpdate=function(a){this.suspended||(this.tilingScheme?(this._tileMeasurements||(this._tileMeasurements=new q.FeatureTileMeasurements3D({renderCoordsHelper:this.renderCoordsHelper,tilingScheme:this.tilingScheme,tileSize:this.tileSize,maxVerticalScreenSize:v})),a=this.cameraOnSurface.location,this._tileMeasurements.begin(this.viewState.camera,
this.focus?this.focus.locationOnSurface:a,a.z),this._pendingTiles=this._getRootTiles()):this._clear())};g.prototype._reset=function(){this._newTiles.clear();this._pendingTiles=this._tileMeasurements=null;this._setDirty()};g.prototype._getRootTiles=function(){var a=this;return this.rootTileIds.map(function(b){return new m.FeatureTileDescriptor3D(b[0],b[1],b[2],a.tilingScheme)})};g.prototype._purgeHorizonTiles=function(a){a.sort(function(a,b){a=a.measures.screen.rect;b=b.measures.screen.rect;return a[1]+
a[3]-(b[1]+b[3])});e.empty(w);for(var b=0;b<a.length;b++)if(e.expand(w,a.data[b].measures.screen.rect),e.height(w)>v)return a.data.slice(b,a.length);return[]};g.prototype._subdivideTilesForView=function(a){var b;if(this._pendingTiles){for(;0<this._pendingTiles.length&&!a.done;){var d=this._pendingTiles.pop();a.madeProgress();if(!this.filterExtentRect||e.intersects(this.filterExtentRect,d.extent))this._tileMeasurements.updateTile(d),0!==d.measures.visibility&&(d.measures.shouldSplit?(this.tilingScheme.ensureMaxLod(d.lij[0]+
1),(b=this._pendingTiles).push.apply(b,d.getChildren())):this._newTiles.push(d))}0===this._pendingTiles.length&&(this._updateTiles(this._purgeHorizonTiles(this._newTiles)),this._newTiles.clear(),this._tileMeasurements.end(),this._pendingTiles=null)}};g.prototype._updateTiles=function(a){for(var b=this,d=0,c=this.tiles.items;d<c.length;d++)c[d].used=!1;a=a.filter(function(a){var d=b.idToTile.get(a.id);d?(d.copyMeasurementsFrom(a),d.used=!0):b.idToTile.set(a.id,a);return!d});d=this.tiles.items.filter(function(a){return a.used?
!1:(b.idToTile.delete(a.id),!0)});this.tiles.removeMany(d);this.tiles.addMany(a);this.sortTiles()};g.prototype.sortTiles=function(){this.tiles.sort(function(a,b){return a.measures.visibility!==b.measures.visibility?2===a.measures.visibility?-1:1:a.measures.distance-b.measures.distance});this.tiles.forEach(function(a,b){return a.loadPriority=b})};l([a.property({constructOnly:!0})],g.prototype,"scheduler",void 0);l([a.property({constructOnly:!0})],g.prototype,"renderCoordsHelper",void 0);l([a.property({constructOnly:!0})],
g.prototype,"tilingSchemeOwner",void 0);l([a.property({constructOnly:!0})],g.prototype,"cameraOnSurface",void 0);l([a.property({constructOnly:!0})],g.prototype,"focus",void 0);l([a.property({constructOnly:!0})],g.prototype,"viewState",void 0);l([a.property()],g.prototype,"tiles",void 0);l([a.property()],g.prototype,"tileSize",void 0);l([a.property({readOnly:!0,dependsOn:["tilingSchemeOwner.tilingScheme"]})],g.prototype,"tilingScheme",null);l([a.property()],g.prototype,"filterExtent",null);l([a.property({readOnly:!0,
dependsOn:["filterExtent","tilingScheme"]})],g.prototype,"filterExtentRect",null);l([a.property({readOnly:!0,dependsOn:["filterExtentRect"]})],g.prototype,"rootTileIds",null);l([a.property({value:!1})],g.prototype,"suspended",null);l([a.property({readOnly:!0})],g.prototype,"updating",null);return g=l([a.subclass("esri.views.3d.layers.support.FeatureTileTree3D")],g)}(a.declared(k));c.FeatureTileTree3D=p;var x=0,w=e.create(),v=10;c.default=p})},"esri/views/3d/layers/support/FeatureTileDescriptor3D":function(){define(["require",
"exports","../../../../geometry/support/aaBoundingRect"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(c,d,h,g){void 0===g&&(g=null);this.lij=[0,0,0];this.extent=n.create();this.loadPriority=this.resolution=0;this.measures={visibility:2,screen:{rect:n.create()},distance:0,shouldSplit:!1};this.used=!1;g&&this.acquire(c,d,h,g)}c.prototype.acquire=function(k,d,h,g){this.tilingScheme=g;this.id=c.id(k,d,h);this.lij[0]=k;this.lij[1]=d;this.lij[2]=h;g.getExtent(k,
d,h,this.extent);this.resolution=g.resolutionAtLevel(k)};c.prototype.release=function(){this.tilingScheme=null};c.prototype.getChildren=function(k){var d=this.lij[0]+1,h=2*this.lij[1],g=2*this.lij[2];if(!k)return[new c(d,h,g,this.tilingScheme),new c(d,h+1,g,this.tilingScheme),new c(d,h,g+1,this.tilingScheme),new c(d,h+1,g+1,this.tilingScheme)];k[0].acquire(d,h,g,this.tilingScheme);k[1].acquire(d,h+1,g,this.tilingScheme);k[2].acquire(d,h,g+1,this.tilingScheme);k[3].acquire(d,h+1,g+1,this.tilingScheme);
return k};c.prototype.copyMeasurementsFrom=function(c){this.measures.visibility=c.measures.visibility;this.measures.shouldSplit=c.measures.shouldSplit;this.measures.distance=c.measures.distance;n.set(c.measures.screen.rect,this.measures.screen.rect)};c.id=function(c,d,h){return c+"/"+d+"/"+h};return c}();c.FeatureTileDescriptor3D=p;c.default=p})},"esri/views/3d/layers/support/FeatureTileMeasurements3D":function(){define("require exports ../../../../core/screenUtils ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/support/aaBoundingRect ./FeatureTileVisibility3D ../../support/geometryUtils ../../webgl-engine/lib/Camera".split(" "),
function(p,c,n,l,k,d,h,g,f){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(a){this.camera=new f;this.pointOfInterestInMap=[0,0];this.screenRect=d.create();this.tileSize=a.tileSize;this.maxVerticalScreenSize=a.maxVerticalScreenSize;this.renderCoordsHelper=a.renderCoordsHelper;this.tilingScheme=a.tilingScheme;this.visibility=new h.FeatureTileVisibility3D({renderCoordsHelper:a.renderCoordsHelper})}c.prototype.begin=function(a,b,c){this.camera.copyFrom(a);this.z=c;this.pointOfInterestInMap[0]=
b.x;this.pointOfInterestInMap[1]=b.y;d.fromValues(0,0,a.fullWidth,a.fullHeight,this.screenRect);this.visibility.begin(this.camera,c)};c.prototype.end=function(){this.visibility.end()};c.prototype.updateTile=function(a){a.measures.visibility=this.visibility.calculate(a);0!==a.measures.visibility&&this.updateScreenMeasure(a);this.updateDistanceMeasure(a)};c.prototype.updateDistanceMeasure=function(a){a.measures.distance=d.distance(a.extent,this.pointOfInterestInMap)};c.prototype.updateScreenMeasure=
function(a){var b=e,c=1<<b,f=a.measures.screen.rect;d.empty(f);for(var g=0,m=a.lij[0]+b,h=a.lij[1]<<b,b=a.lij[2]<<b,k=this.tileSizeWithBias(a),k=k*k,l=!1,n=0;n<c;n++){for(var r=0;r<c&&!(l=this.computeScreenArea(a,m,h+n,b+r,f),g+=l.area,l=g>k&&d.height(f)>this.maxVerticalScreenSize);r++);if(l)break}a.measures.shouldSplit=g>k};c.prototype.tileSizeWithBias=function(a){return 1===a.measures.visibility?this.tileSize*m:this.tileSize};c.prototype.computeScreenArea=function(c,e,f,m,h){var k=q.points;this.projectToScreen(e,
f,m,1===c.measures.visibility,k);d.empty(b);for(c=0;4>c;c++)d.expandPointInPlace(b,k[c]);d.expand(h,b);d.intersection(b,this.screenRect,a);q.screenOverlap=d.area(a)/d.area(b);q.area=g.triangle.areaPoints2d(k[0],k[1],k[2])+g.triangle.areaPoints2d(k[0],k[2],k[3]);return q};c.prototype.projectToScreen=function(a,b,d,c,e){this.tilingScheme.ensureMaxLod(a);this.tilingScheme.getExtent(a,b,d,u);this.toRenderCoords(u,0,3,r[0]);this.toRenderCoords(u,2,3,r[1]);this.toRenderCoords(u,2,1,r[2]);this.toRenderCoords(u,
0,1,r[3]);c&&(this.projectToPlane(r,this.camera.frustum.planes[4]),this.projectToPlane(r,this.camera.frustum.planes[3]),this.projectToPlane(r,this.camera.frustum.planes[2]));for(a=0;4>a;a++)this.camera.projectPoint(r[a],w),this.camera.renderToScreen(w,e[a])};c.prototype.projectToPlane=function(a,b){for(var d=0;4>d;d++)x[d]=g.plane.signedDistance(b,a[d]);d=Math.max(x[0],x[1],x[2],x[3]);if(0<d)for(b=l.vec3.scale(t,b,-d),d=0;4>d;d++)l.vec3.add(a[d],a[d],b)};c.prototype.toRenderCoords=function(a,b,d,
c){t[0]=a[b];t[1]=a[d];t[2]=this.z;this.renderCoordsHelper.toRenderCoords(t,this.tilingScheme.spatialReference,c);return c};return c}();c.FeatureTileMeasurements3D=p;var b=d.create(),a=d.create(),e=2,m=5,q={points:[n.createScreenPointArray(),n.createScreenPointArray(),n.createScreenPointArray(),n.createScreenPointArray()],area:0,screenOverlap:0},u=d.create(),t=k.vec3f64.create(),r=[k.vec3f64.create(),k.vec3f64.create(),k.vec3f64.create(),k.vec3f64.create()],x=[0,0,0,0],w=n.createRenderScreenPointArray3();
c.default=p})},"esri/views/3d/layers/support/FeatureTileVisibility3D":function(){define("require exports ../../../../core/ObjectPool ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ./FeatureTileDescriptor3D ../../state/Frustum ../../support/FrustumExtentIntersection ../../support/geometryUtils ../../support/mathUtils".split(" "),function(p,c,n,l,k,d,h,g,f,b){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function d(a){this.surfaceElevation=0;this.cache=
new Map;a=a.renderCoordsHelper;this.frustum=new h.Frustum({renderCoordsHelper:a});this.extendedFrustum=new h.Frustum({renderCoordsHelper:a});this.intersector=new g.FrustumExtentIntersection({renderCoordsHelper:a});this.renderCoordsHelper=a}d.prototype.begin=function(a,b){this.surfaceElevation=b;this.aboveGround=this.renderCoordsHelper.getAltitude(a.eye)>b;this.frustum.update(a);this.shortenFrustumFarPlane(this.frustum);this.updateExtendedFrustum(a,b)};d.prototype.end=function(){this.cache.clear()};
d.prototype.calculate=function(b){if(this.allTilesInvisible)return 0;var d="global"===this.renderCoordsHelper.type&&b.lij[0]>=a&&b.lij[0]<e,c=this.getOrCalculateSingleTileVisibility(b,!d);return 0!==c&&d?this.calculateAggregatedChildrenVisibility(b):c};d.prototype.shortenFrustumFarPlane=function(a){for(var b=a.mutablePoints,d=0,c=h.Frustum.nearFarLineIndices;d<c.length;d++){var e=c[d],f=e[1],e=b[e[0]];l.vec3.subtract(u,b[f],e);l.vec3.scale(u,u,q);l.vec3.add(b[f],e,u)}a.updatePoints(b)};d.prototype.calculateAggregatedChildrenVisibility=
function(a){var b=0,d=this.cache.get(a.id);if(null!=d)return d;d=t.acquire();a.getChildren(d);for(var c=0;c<d.length;c++){var e=this.calculate(d[c]);if(0!==e&&(b=e,2===e))break}t.release(d);this.cache.set(a.id,b);return b};d.prototype.getOrCalculateSingleTileVisibility=function(a,b){var d=this.cache.get(a.id);if(null!=d)return d;d=this.calculateSingleTileVisibility(a);b&&this.cache.set(a.id,d);return d};d.prototype.calculateSingleTileVisibility=function(a){if(!this.aboveGround&&"global"===this.renderCoordsHelper.type&&
a.lij[0]<m){if(0===this.calculateSingleTileVisibilitySided(a,!1))return this.calculateSingleTileVisibilitySided(a,!0)}else return this.calculateSingleTileVisibilitySided(a,this.aboveGround)};d.prototype.calculateSingleTileVisibilitySided=function(a,b){this.intersector.update(a.extent,a.tilingScheme.spatialReference,this.surfaceElevation,b);return this.intersector.isVisibleInFrustum(this.extendedFrustum)?this.intersector.isVisibleInFrustum(this.frustum,!0)?2:1:0};d.prototype.updateExtendedFrustum=
function(a,d){var c=this.renderCoordsHelper;this.extendedFrustum.update(a);this.shortenFrustumFarPlane(this.extendedFrustum);var e=this.renderCoordsHelper.worldUpAtPosition(a.eye,u);this.aboveGround||l.vec3.negate(e,e);e=b.acos(-l.vec3.dot(e,a.viewForward));this.allTilesInvisible=e>(Math.PI+a.fovY)/2;if(!this.allTilesInvisible&&(this.hasExtendedFrustum=e>a.fovY/2)){a=this.extendedFrustumParameters(d);d=this.extendedFrustum.mutablePoints;for(e=0;4>e;e++){var g=a.pointIndices[e],m=d[g],h=c.getAltitude(m);
if(a.needsAltitudeAdjustment(h)){this.renderCoordsHelper.worldUpAtPosition(m,u);switch(g){case 4:case 7:case 0:case 3:f.plane.projectVector(this.extendedFrustum.planes[0],u,u);break;case 5:case 6:case 1:case 2:f.plane.projectVector(this.extendedFrustum.planes[1],u,u)}l.vec3.scale(u,u,a.direction);this.renderCoordsHelper.intersectInfiniteManifold(f.ray.wrap(m,u),a.zWithMargin,m)}}this.extendedFrustum.updatePoints(d);0>l.vec3.dot(this.extendedFrustum.planes[4],this.frustum.planes[4])&&(c=this.extendedFrustum.mutablePoints,
this.aboveGround?(a=[c[1],c[0]],c[0]=a[0],c[1]=a[1]):(a=[c[2],c[3]],c[3]=a[0],c[2]=a[1]),this.extendedFrustum.updatePoints(c))}};d.prototype.extendedFrustumParameters=function(a){return this.aboveGround?this.extendedFrustumParametersAboveSurface(a,1):this.extendedFrustumParametersBelowSurface(a,1)};d.prototype.extendedFrustumParametersAboveSurface=function(a,b){var d=a-b;return{zWithMargin:d,pointIndices:h.Frustum.planePointIndices.bottom,direction:-1,needsAltitudeAdjustment:function(a){return a>
d}}};d.prototype.extendedFrustumParametersBelowSurface=function(a,b){var d=a+b;return{zWithMargin:d,pointIndices:h.Frustum.planePointIndices.top,direction:1,needsAltitudeAdjustment:function(a){return a<d}}};return d}();c.FeatureTileVisibility3D=p;var a=2,e=6,m=12,q=.95,u=k.vec3f64.create(),t=new n(Array,function(a){4!==a.length&&(a[0]=new d.FeatureTileDescriptor3D,a[1]=new d.FeatureTileDescriptor3D,a[2]=new d.FeatureTileDescriptor3D,a[3]=new d.FeatureTileDescriptor3D)},function(a){a[0].release();
a[1].release();a[2].release();a[3].release()});c.default=p})},"esri/views/3d/state/Frustum":function(){define("require exports ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../support/mathUtils ../support/geometryUtils/frustum".split(" "),function(p,c,n,l,k,d){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(c){this.frustum=d.create();this.lines=Array(12);this.origin=l.vec3f64.create();this.direction=l.vec3f64.create();this._altitude=null;this.renderCoordsHelper=
c?c.renderCoordsHelper:null;for(c=0;12>c;c++)this.lines[c]={origin:null,direction:l.vec3f64.create(),endpoint:null}}Object.defineProperty(c.prototype,"planes",{get:function(){return this.frustum.planes},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"points",{get:function(){return this.frustum.points},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"mutablePoints",{get:function(){return this.frustum.points},enumerable:!0,configurable:!0});c.prototype.update=function(c){d.fromMatrix(c.viewMatrix,
c.projectionMatrix,this.frustum);n.vec3.copy(this.origin,c.eye);n.vec3.copy(this.direction,c.viewForward);this._altitude=this.renderCoordsHelper.getAltitude(this.origin);this.updateLines()};c.prototype.updatePoints=function(c){for(var f=0;f<this.frustum.points.length;f++)n.vec3.copy(this.frustum.points[f],c[f]);d.recomputePlanes(this.frustum);this.updateLines()};Object.defineProperty(c.prototype,"altitude",{get:function(){return this._altitude},enumerable:!0,configurable:!0});c.prototype.intersectsSphere=
function(c){return d.intersectsSphere(this.frustum.planes,c)};c.prototype.intersectsRay=function(c){return d.intersectsRay(this.frustum.planes,c)};c.prototype.intersectsLineSegment=function(c,f){return d.intersectsLineSegment(this.frustum.planes,c,f)};c.prototype.intersectsPoint=function(c){return d.intersectsPoint(this.frustum.planes,c)};c.prototype.updateLines=function(){for(var d=this.frustum.points,c=0;4>c;c++){var b=c,a=c+4;this.updateLine(this.lines[c],d[b],d[a]);this.updateLine(this.lines[c+
4],d[b],3===c?d[0]:d[b+1]);this.updateLine(this.lines[c+8],d[a],3===c?d[4]:d[a+1])}};c.prototype.updateLine=function(d,c,b){d.origin=c;d.endpoint=b;k.directionFromTo(d.direction,c,b)};c.planePointIndices=d.planePointIndices;c.nearFarLineIndices=[[0,4],[1,5],[2,6],[3,7]];return c}();c.Frustum=p;c.default=p})},"esri/views/3d/support/FrustumExtentIntersection":function(){define("require exports ../../../core/compilerUtils ../../../core/libs/gl-matrix-2/mat4 ../../../core/libs/gl-matrix-2/mat4f64 ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ./earthUtils ./geometryUtils ./intersectionUtils ./mathUtils ./projectionUtils".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q){Object.defineProperty(c,"__esModule",{value:!0});p=.5*Math.PI;var u=p/Math.PI*180,t=p*b.earthRadius,r=.9*b.earthRadius;b=function(){function b(b){this.renderCoordsHelper=b.renderCoordsHelper;this.extent=Array(4);this.planes=Array(6);this.maxSpan=0;this.center={origin:h.vec3f64.create(),direction:h.vec3f64.create()};for(b=0;4>b;b++)this.extent[b]={origin:h.vec3f64.create(),direction:h.vec3f64.create(),cap:{next:null,direction:h.vec3f64.create()}},this.planes[b]=
a.plane.create();this.planes[4]=a.plane.create();this.planes[5]=a.plane.create();this.planesWithoutFar=this.planes.slice(0,5)}b.prototype.update=function(b,c,e,f){void 0===f&&(f=!0);var g=this.extent;this.toRenderBoundingExtent(b,c,e);d.vec3.add(this.center.origin,g[0].origin,g[2].origin);d.vec3.scale(this.center.origin,this.center.origin,.5);this.renderCoordsHelper.worldUpAtPosition(this.center.origin,this.center.direction);f||d.vec3.scale(this.center.direction,this.center.direction,-1);for(e=0;4>
e;e++){var h=g[e];this.renderCoordsHelper.worldUpAtPosition(h.origin,h.direction);var k=g[3===e?0:e+1];h.cap.next=k.origin;m.directionFromTo(h.cap.direction,h.origin,k.origin);a.plane.fromVectorsAndPoint(h.direction,h.cap.direction,h.origin,this.planes[e]);f||d.vec3.scale(h.direction,h.direction,-1)}a.plane.fromVectorsAndPoint(g[0].cap.direction,g[1].cap.direction,g[0].origin,this.planes[4]);f?a.plane.negate(this.planes[4],this.planes[5]):(a.plane.copy(this.planes[4],this.planes[5]),a.plane.negate(this.planes[4],
this.planes[4]));this.maxSpan=Math.max(Math.abs(b[0]-b[2]),Math.abs(b[1]-b[3]));this.maxSpanSpatialReference=c};b.prototype.isVisibleInFrustum=function(b,d){void 0===d&&(d=!1);if(null==b)return!1;if("global"===this.renderCoordsHelper.type){if(this.maxSpan>(this.maxSpanSpatialReference.isGeographic?u:t))return!0;if(b.altitude>=r)return this.isVisibleInFrustumGlobal(b)}if(0===this.maxSpan){var c=this.extent[0];return!d&&b.intersectsRay(a.ray.wrap(c.origin,c.direction))?!0:!1}for(var f=0;f<this.extent.length;f++)if(c=
this.extent[f],!d&&b.intersectsRay(a.ray.wrap(c.origin,c.direction))||b.intersectsLineSegment(a.lineSegment.fromPoints(c.origin,c.cap.next,A),c.cap.direction))return!0;d=d?this.planes:this.planesWithoutFar;for(f=0;f<b.lines.length;f++)if(c=b.lines[f],e.frustumLineSegment(d,c.origin,c.endpoint,c.direction))return!0;return!1};b.prototype.toRenderBoundingExtentGlobal=function(a,b,c){f.center(a,w);w[2]=c;q.computeLinearTransformation(b,w,v,this.renderCoordsHelper.spatialReference);l.mat4.invert(y,v);
g.empty(z);for(var e=0,h=x;e<h.length;e++)for(var k=h[e],n=k.x0,r=k.x1,t=k.y0,k=k.y1,u=0;5>u;u++){var p=u/4;w[0]=m.lerp(a[n],a[r],p);w[1]=m.lerp(a[t],a[k],p);w[2]=c;q.vectorToVector(w,b,w,this.renderCoordsHelper.spatialReference);d.vec3.transformMat4(w,w,y);g.expandPointInPlace(z,w)}d.vec3.set(this.extent[0].origin,z[0],z[1],z[2]);d.vec3.set(this.extent[1].origin,z[3],z[1],z[2]);d.vec3.set(this.extent[2].origin,z[3],z[4],z[2]);d.vec3.set(this.extent[3].origin,z[0],z[4],z[2]);for(u=0;4>u;++u)d.vec3.transformMat4(this.extent[u].origin,
this.extent[u].origin,v)};b.prototype.toRenderBoundingExtentLocal=function(a,b,c){d.vec3.set(this.extent[0].origin,a[0],a[1],c);d.vec3.set(this.extent[1].origin,a[2],a[1],c);d.vec3.set(this.extent[2].origin,a[2],a[3],c);d.vec3.set(this.extent[3].origin,a[0],a[3],c)};b.prototype.toRenderBoundingExtent=function(a,b,d){switch(this.renderCoordsHelper.type){case "global":this.toRenderBoundingExtentGlobal(a,b,d);break;case "local":this.toRenderBoundingExtentLocal(a,b,d);break;default:n.neverReached(this.renderCoordsHelper.type)}};
b.prototype.isVisibleInFrustumGlobal=function(a){if(0>d.vec3.dot(this.center.direction,a.direction))return!0;for(var b=0;4>b;b++)if(0>d.vec3.dot(this.extent[b].direction,a.direction))return!0;return!1};return b}();c.FrustumExtentIntersection=b;var x=[{x0:0,y0:1,x1:2,y1:1},{x0:0,y0:3,x1:2,y1:3},{x0:0,y0:1,x1:0,y1:3},{x0:2,y0:1,x1:2,y1:3}],w=h.vec3f64.create(),v=k.mat4f64.create(),y=k.mat4f64.create(),z=g.create(),A=a.lineSegment.create();c.default=b})},"esri/views/support/index":function(){define(["require",
"exports","./Scheduler"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.noBudget=n.noBudget})},"esri/views/support/Scheduler":function(){define("require exports @dojo/framework/shim/number ../../core/maybe ../../core/now ../../core/PooledArray".split(" "),function(p,c,n,l,k,d){function h(b){return new g.Budget(b)}Object.defineProperty(c,"__esModule",{value:!0});c.newScheduler=function(b){return new g.Scheduler(b)};c.newBudget=h;var g;(function(b){var a=function(){function a(a){this._now=
a;this._budget=null;this._state=1;this._tasks=new d;this._runQueue=new d;this._load=0;this._idleStateCallbacks=new d;this._idleUpdatesStartFired=!1;this._maxReschedule=f;this._forceTask=!1;this._safetyBudget=0;this._budget=new b.Budget(a);var c=this;this._test={state:void 0,FRAME_SAFETY_BUDGET:1,idleBudget:100,get budget(){return c._budget.budget},elapsed:0}}a.prototype.registerTask=function(a,b,d){var c=this,e={update:b,needsUpdate:d,priority:a,schedule:a};this._tasks.push(e);return{remove:function(){return c._removeTask(e)},
set priority(a){e.priority=a;0!==e.schedule&&(e.schedule=a)}}};a.prototype.registerIdleStateCallbacks=function(a,b){var d=this,c={idleBegin:a,idleEnd:b};this._idleStateCallbacks.push(c);2===this.state&&this._idleUpdatesStartFired&&c.idleBegin();var e=this;return{remove:function(){return d._removeIdleStateCallbacks(c)},set idleBegin(a){e._idleUpdatesStartFired&&(c.idleEnd(),2===e._state&&a());c.idleBegin=a},set idleEnd(a){c.idleEnd=a}}};Object.defineProperty(a.prototype,"now",{get:function(){return this._now()},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"load",{get:function(){return this._load},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"state",{get:function(){return l.isNone(this._test.state)?this._state:this._test.state},set:function(a){this._state!==a&&(this._state=a,2!==this.state&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forEach(function(a){return a.idleEnd()})))},enumerable:!0,configurable:!0});a.prototype.updateBudget=
function(a){var b=2===this.state,d=a.frameDuration;switch(this.state){case 2:d=100;break;case 1:d=Math.max(33,a.frameDuration);break;case 0:d=a.frameDuration}this._safetyBudget=b?0:1;d-=a.elapsedFrameTime+this._safetyBudget;this._test.elapsed=0;if(!b&&0>d&&!this._forceTask)return this._forceTask=!0,!1;d=Math.max(d,5);this._budget.reset(d,b);this._maxReschedule=f;return this._schedule()};a.prototype.frame=function(){this._forceTask=!1;switch(this.state){case 2:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=
!0,this._idleStateCallbacks.forEach(function(a){return a.idleBegin()}));this._idleFrame();break;case 1:this._movingFrame();break;default:this._run()}this._test.elapsed=this._budget.elapsed};a.prototype._removeIdleStateCallbacks=function(a){this._idleUpdatesStartFired&&a.idleEnd();this._idleStateCallbacks.removeUnordered(a)};a.prototype._removeTask=function(a){this._tasks.removeUnordered(a);this._runQueue.removeUnordered(a)};a.prototype._idleFrame=function(){this._run()};a.prototype._movingFrame=function(){this._run()};
a.prototype._schedule=function(){var a=this;if(0>=this._maxReschedule)return!1;this._runQueue.forEach(function(a){a.needsUpdate()||(c.push(a),a.schedule=a.priority)});this._runQueue.removeUnorderedMany(c.data,c.length);c.clear();for(var b=function(){var b=0,c=0;d._tasks.forEach(function(d){if(d.needsUpdate())switch(++b,c=Math.max(c,d.priority),d.schedule){case 0:break;case 1:d.schedule=0;a._runQueue.push(d);break;default:--d.schedule}});if(0===b)return d._load*=.9,{value:!1};d._maxReschedule===f&&
(d._maxReschedule=c,d._load=.9*d._load+b*(1-.9));--d._maxReschedule},d=this;0===this._runQueue.length;){var e=b();if("object"===typeof e)return e.value}return!0};a.prototype._run=function(){do for(;0<this._runQueue.length;){var a=this._runQueue.pop();this._budget.resetProgress();a.update(this._budget);a.schedule=a.priority;if(0>=this._budget.remaining)return}while(this._schedule())};Object.defineProperty(a.prototype,"test",{get:function(){return this._test},enumerable:!0,configurable:!0});return a}();
b.Scheduler=a;var c=new d,a=function(){function a(a){this.now=a;this._budget=this._begin=0;this._didWork=this._idle=!1;this._enabled=!0}a.prototype.run=function(a){if(this.done)return!1;!0===a()&&(this._didWork=!0);return!0};Object.defineProperty(a.prototype,"done",{get:function(){return this._didWork&&this.elapsed>=this._budget&&this._enabled},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"budget",{get:function(){return this._budget},enumerable:!0,configurable:!0});a.prototype.madeProgress=
function(){this._didWork=!0};Object.defineProperty(a.prototype,"idleFrame",{get:function(){return this._idle},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"enabled",{get:function(){return this._enabled},set:function(a){this._enabled=a},enumerable:!0,configurable:!0});a.prototype.reset=function(a,b){this._begin=this.now();this._budget=a;this._idle=b;this._didWork=!1};Object.defineProperty(a.prototype,"remaining",{get:function(){return Math.max(this._budget-this.elapsed,0)},enumerable:!0,
configurable:!0});Object.defineProperty(a.prototype,"elapsed",{get:function(){return this.now()-this._begin},enumerable:!0,configurable:!0});a.prototype.resetProgress=function(){this._didWork=!1};Object.defineProperty(a.prototype,"hasProgressed",{get:function(){return this._didWork},enumerable:!0,configurable:!0});return a}();b.Budget=a})(g||(g={}));c.noBudget=function(){var b=h(k);b.enabled=!1;return b}();var f=n.MAX_SAFE_INTEGER})},"esri/views/3d/layers/support/FeatureTileTree3DDebugger":function(){define("require exports ../../../../Graphic ../../../../core/Handles ../../../../core/watchUtils ../../../../symbols/FillSymbol3DLayer ../../../../symbols/PointSymbol3D ../../../../symbols/PolygonSymbol3D ../../../../symbols/TextSymbol3DLayer ../../support/mathUtils".split(" "),
function(p,c,n,l,k,d,h,g,f,b){Object.defineProperty(c,"__esModule",{value:!0});var a=[[0,179,255],[117,62,128],[0,104,255],[215,189,166],[32,0,193],[98,162,206],[102,112,129],[52,125,0],[142,118,246],[138,83,0],[92,122,255],[122,55,83],[0,142,255],[81,40,179],[0,200,244],[13,24,127],[0,170,147],[19,58,241],[22,44,35]];p=function(){function c(b){var c=this;this.view=b;this.graphics=[];this.handles=new l;this._enabled=!0;this.symbols=a.map(function(a){return new g(new d({material:{color:[a[0],a[1],
a[2],.6]},outline:{color:"black",size:1}}))});this.handles.add([b.featureTiles.addClient(),k.on(b.featureTiles,"tiles","change",function(){return c.update()},function(){return c.update()})])}Object.defineProperty(c.prototype,"enabled",{get:function(){return this._enabled},set:function(a){this._enabled=a;this.update()},enumerable:!0,configurable:!0});c.prototype.destroy=function(){this.handles&&(this.handles.destroy(),this.handles=null);this.view&&(this.clear(),this.view=null)};c.prototype.update=
function(){var a=this;this.clear();if(this._enabled){var d=this.view.featureTiles,c=d.tilingScheme,e=d.tiles.toArray().sort(function(a,b){return a.loadPriority-b.loadPriority});e.forEach(function(d,g){var m=d.lij,k=m[0],l=m[1],r=m[2],q=c.getExtentGeometry(k,l,r),m=new n({geometry:q,symbol:a.symbols[k%a.symbols.length]}),t=g/(e.length-1);g=b.lerp(0,200,t);var t=b.lerp(20,6,t),u=d.loadPriority>=e.length;d=new n({geometry:q.center,symbol:new h({verticalOffset:{screenLength:40/.75},callout:{type:"line",
color:"white",border:{color:"black"}},symbolLayers:[new f({text:k+"/"+l+"/"+r+" ("+d.loadPriority+")",halo:{color:"white",size:1/.75},material:{color:[g,u?0:g,u?0:g]},size:t/.75})]})});a.graphics.push(m,d);a.view.graphics.addMany([m,d])})}};c.prototype.clear=function(){this.view.graphics.removeMany(this.graphics);this.graphics=[]};return c}();c.FeatureTileTree3DDebugger=p;c.default=p})},"esri/views/3d/layers/support/MemoryManagedLayerView":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,
"__esModule",{value:!0});c.isMemoryManagedLayerView=function(c){return"function"===typeof c.getUsedMemory}})},"esri/views/3d/state/ViewState":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/Evented ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/vec3f64 ../../ViewAnimation ./Constraints ./controllers/AnimationController ./controllers/CameraController ../support/earthUtils ../support/PropertiesPool ../webgl-engine/lib/Camera".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u){Object.defineProperty(c,"__esModule",{value:!0});p=function(c){function k(a){a=c.call(this,a)||this;a.propertiesPool=new q.default({camera:u},a);a.lastSeenCameraProjectionValues=new u;a.events=new d;a.updateQueue=[];a.processingUpdates=!1;return a}n(k,c);k.prototype.destroy=function(){this.cameraController=null;this.propertiesPool&&(this.propertiesPool.destroy(),this.propertiesPool=null)};k.prototype.normalizeCtorArgs=function(a){return{camera:this.createInitialCamera(a.viewingMode),
mode:a.viewingMode,spatialReference:a.spatialReference,constraints:new b.default({mode:a.viewingMode})}};Object.defineProperty(k.prototype,"animation",{get:function(){return this.cameraController instanceof a.AnimationController?this.cameraController.viewAnimation:null},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"camera",{get:function(){return this._get("camera")},set:function(a){a!==t&&t.copyFrom(a);t.markViewDirty();t.computeUp(this.mode);r.camera=t;this.events.emit("before-camera-change",
r);a=this._get("camera");this.cameraProjectionChanged(this.lastSeenCameraProjectionValues,t)&&(this.lastSeenCameraProjectionValues.copyFrom(t),x.camera=this.lastSeenCameraProjectionValues,this.events.emit("camera-projection-changed",x));a&&a.equals(t)||this._set("camera",this.propertiesPool.get("camera").copyFrom(t))},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"isGlobal",{get:function(){return!this.isLocal},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"isLocal",
{get:function(){return"local"===this.mode},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"interacting",{get:function(){return!!this.cameraController&&this.cameraController.isInteractive},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"cameraController",{get:function(){return this._get("cameraController")},set:function(a){var b=this;this.stopActiveCameraController()?(a&&(a.watch("state",function(d){if(d===e.State.Finished||d===e.State.Stopped)b._set("cameraController",
null),b.updateCamera(function(b){return a.onControllerEnd(b)})},!0),a.onControllerStart(this.camera)),this._set("cameraController",a)):a&&(a.state=e.State.Rejected)},enumerable:!0,configurable:!0});k.prototype.switchCameraController=function(a){this.cameraController=a;return a.state!==e.State.Rejected};k.prototype.stopActiveCameraController=function(){return this.cameraController&&!this.cameraController.stopController()?!1:!0};k.prototype.cameraChanged=function(){this.updateCamera(function(){})};
k.prototype.updateCamera=function(a){this.updateQueue.push(a);this.processUpdateQueue()};k.prototype.processUpdateQueue=function(){if(0!==this.updateQueue.length&&!this.processingUpdates){this.processingUpdates=!0;var a=this.updateQueue.shift();t.copyFrom(this._get("camera"));a(t);this.camera=t;this.processingUpdates=!1;this.processUpdateQueue()}};k.prototype.createInitialCamera=function(a){return"global"===a?new u(g.vec3f64.fromValues(4*m.earthRadius,0,0),g.vec3f64.fromValues(m.earthRadius,0,0),
g.vec3f64.fromValues(0,0,1)):new u(g.vec3f64.fromValues(0,0,100),g.vec3f64.fromValues(0,0,0),g.vec3f64.fromValues(0,1,0))};k.prototype.cameraProjectionChanged=function(a,b){return a.fov!==b.fov||a.fullViewport[0]!==b.fullViewport[0]||a.fullViewport[1]!==b.fullViewport[1]||a.fullViewport[2]!==b.fullViewport[2]||a.fullViewport[3]!==b.fullViewport[3]||a.padding[0]!==b.padding[0]||a.padding[1]!==b.padding[1]||a.padding[2]!==b.padding[2]||a.padding[3]!==b.padding[3]?!0:!1};l([h.property({readOnly:!0,type:f,
dependsOn:["cameraController"]})],k.prototype,"animation",null);l([h.property({type:u})],k.prototype,"camera",null);l([h.property({constructOnly:!0})],k.prototype,"constraints",void 0);l([h.property({readOnly:!0})],k.prototype,"events",void 0);l([h.property({readOnly:!0,dependsOn:["isLocal"]})],k.prototype,"isGlobal",null);l([h.property({readOnly:!0,dependsOn:["mode"]})],k.prototype,"isLocal",null);l([h.property({constructOnly:!0})],k.prototype,"mode",void 0);l([h.property({constructOnly:!0})],k.prototype,
"spatialReference",void 0);l([h.property({readOnly:!0,dependsOn:["cameraController"]})],k.prototype,"interacting",null);l([h.property()],k.prototype,"cameraController",null);return k=l([h.subclass("esri.views.3d.state.ViewState")],k)}(h.declared(k));c.ViewState=p;var t=new u,r={camera:null},x={camera:null};c.default=p})},"esri/views/3d/support/PropertiesPool":function(){define(["require","exports","../../../core/ReentrantObjectPool","../../../core/accessorSupport/watch"],function(p,c,n,l){Object.defineProperty(c,
"__esModule",{value:!0});p=function(){function c(d,c){var g=this;this.owner=c;this.properties={};this.afterDispatchHandle=null;for(var f in d)c=new n.ReentrantObjectPool(d[f],null,null,2,2),this.properties[f]={pool:c,acquired:[]};this.afterDispatchHandle=l.afterDispatch(function(){return g.release()})}c.prototype.destroy=function(){this.afterDispatchHandle&&(this.afterDispatchHandle.remove(),this.afterDispatchHandle=null);for(var d in this.properties){for(var c=this.properties[d],g=0,f=c.acquired;g<
f.length;g++){var b=f[g];l.isValueInUse(b)||c.pool.release(b)}c.pool.destroy();c.pool=null;c.acquired=null}this.owner=this.properties=null};c.prototype.get=function(d){var c=this.owner._get(d);d=this.properties[d];var g=d.pool.acquire();for(d.acquired.push(g);g===c;)d.acquired.push(g),g=d.pool.acquire();return g};c.prototype.release=function(){for(var d in this.properties){for(var c=this.properties[d],g=0,f=0,b=c.acquired;f<b.length;f++){var a=b[f];l.isValueInUse(a)?c.acquired[g++]=a:c.pool.release(a)}c.acquired.length=
g}};return c}();c.PropertiesPool=p;c.default=p})},"esri/views/3d/state/ViewStateManager":function(){define("require exports ../../../core/tsSupport/assignHelper ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../Camera ../../../Viewpoint ../../../core/Accessor ../../../core/Error ../../../core/Handles ../../../core/Logger ../../../core/maybe ../../../core/promiseUtils ../../../core/scheduling ../../../core/screenUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/vec4 ../../../core/libs/gl-matrix-2/vec4f64 ../../../geometry/Extent ../../../geometry/Point ../../../geometry/support/webMercatorUtils ../camera/constraintUtils ../camera/intersectionUtils ./ConstraintsManager ./Frustum ./controllers/PointToPointAnimationController ./controllers/SurfaceCollisionCorrectionController ../support/cameraUtils ../support/PropertiesPool ../support/viewpointUtils ../webgl-engine/lib/Camera ../../animation/easing".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z,A,B,D,C,E,H,G,I,K,M,T,N,S){Object.defineProperty(c,"__esModule",{value:!0});var O=m.getLogger("esri.views.3d.state.ViewStateManager");p=function(b){function c(a){a=b.call(this)||this;a.propertiesPool=new M.default({frustum:H.default},a);a.handles=new e;a.cameraSetByUser=!1;a.internalSetOrder=[];a.immediateGoToController=null;a.animatedGoToController=null;a.ready=!1;a.updateDevicePixelRatio=null;return a}l(c,b);Object.defineProperty(c.prototype,
"camera",{get:function(){return this.ready?K.internalToExternal(this.view,this.view.state.camera):this._get("camera")},set:function(a){this.updatePropertyBeforeReady("camera",a)||this.setStateCamera(K.externalToInternal(this.view,a),{applyConstraints:!1})||O.error("#camera\x3d","Invalid camera",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"center",{get:function(){return this.ready?this.view.pointsOfInterest.centerOnContent.location:this._get("center")},set:function(a){this.updatePropertyBeforeReady("center",
a)||(a?this.isCompatible(a)?this.setStateCamera(this.centerToCamera(a),{applyConstraints:!0})?this.view.pointsOfInterest.centerOnContent.update():O.error("#center\x3d","Invalid center",a):O.error("#center\x3d","Center has an incompatible spatial reference (center: "+(a.spatialReference?a.spatialReference.wkid:"none")+", view: "+this.view.spatialReference.wkid+")",a):O.error("#center\x3d","Center may not be null or undefined"))},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"extent",
{get:function(){return this.ready?K.toExtent(this.view,null,null,null,P):this._get("extent")},set:function(a){this.updatePropertyBeforeReady("extent",a)||(a?this.isCompatible(a)?this.setStateCamera(this.extentToCamera(a),{applyConstraints:!0})||O.error("#extent\x3d","Invalid extent",a):O.error("#extent\x3d","Extent has an incompatible spatial reference (extent: "+(a.spatialReference?a.spatialReference.wkid:"none")+", view: "+this.view.spatialReference.wkid+")",a):O.error("#extent\x3d","Extent may not be null or undefined"))},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"frustum",{get:function(){var a=this.propertiesPool.get("frustum");a.renderCoordsHelper=this.view.renderCoordsHelper;a.update(this.view.state.camera);return a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"hasInitialView",{get:function(){return!!this.view.get("map.initialViewProperties.viewpoint")},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"scale",{get:function(){if(!this.ready)return this._get("scale");
var a=this.view.pointsOfInterest.centerOnContent;return K.distanceToScale(this.view,a.distance,a.location.latitude)},set:function(a){this.updatePropertyBeforeReady("scale",a)||this.setStateCamera(this.scaleToCamera(a),{applyConstraints:!0})||O.error("#scale\x3d","Invalid scale",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"padding",{get:function(){if(!this.ready)return this._get("padding");var a=this.view.state.camera,b=a.padding,d=a.pixelRatio,a=this._get("padding"),c=b[0]/
d,e=b[1]/d,f=b[2]/d,b=b[3]/d;return null!=a&&a.top===c&&a.right===e&&a.bottom===f&&a.left===b?a:{top:c,right:e,bottom:f,left:b}},set:function(a){this.updatePropertyBeforeReady("padding",a)||(this.paddingToArray(a,this.view.state.camera.pixelRatio,F),this.view.state.updateCamera(function(a){return a.padding=F}))},enumerable:!0,configurable:!0});c.prototype.paddingToArray=function(a,b,d){a?v.vec4.set(d,a.top||0,a.right||0,a.bottom||0,a.left||0):v.vec4.set(d,0,0,0,0);for(a=0;4>a;a++)d[a]=Math.round(d[a]*
b)};Object.defineProperty(c.prototype,"screenCenter",{get:function(){var a=this.padding;return r.createScreenPoint((this.view.width-(a.left+a.right))/2+a.left,(this.view.height-(a.top+a.bottom))/2+a.top)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"viewpoint",{get:function(){return this.ready?T.fromCamera(this.view,this.camera):this._get("viewpoint")},set:function(a){if(!this.updatePropertyBeforeReady("viewpoint",a))if(a)if(this.isCompatible(a))this.setStateCamera(this.viewpointToCamera(a),
{applyConstraints:!a.camera})||O.error("#viewpoint\x3d","Invalid viewpoint",a);else{var b=a.camera?a.camera.position:a.targetGeometry,b=b&&b.spatialReference;O.error("#viewpoint\x3d","Viewpoint has an incompatible spatial reference (viewpoint: "+(b?b.wkid:"none")+", view: "+this.view.spatialReference.wkid+")",a)}else O.error("#viewpoint\x3d","Viewpoint may not be null or undefined")},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"zoom",{get:function(){return this.ready?K.scaleToZoom(this.view,
this.scale):this._get("zoom")},set:function(a){this.updatePropertyBeforeReady("zoom",a)||this.setStateCamera(this.zoomToCamera(a),{applyConstraints:!0})||O.error("#zoom\x3d","Invalid zoom",a)},enumerable:!0,configurable:!0});c.prototype.initialize=function(){var a=this;this.handles.add([this.view.watch("state.camera",function(b){return a.cameraChangedSync(b)},!0),x.on(this.view,"state.events","before-camera-change",function(b){return a.beforeCameraChangeHandle(b.camera)})]);x.once(this.view,"state.camera",
function(b){return a.updateCameraElevation(b)});this.handles.add(t.addFrameTask({prepare:function(){return a.prepareFrame()}}));this.handles.add(this.view.watch("state.cameraController",function(){a.cameraSetByUser=!0;a.handles.remove(Y);a.cancelImmediateGoTo()}));this.handles.add(x.on(this.view,"state.events","camera-projection-changed",function(){return a.notifyChange("scale")}))};c.prototype.destroy=function(){this.handles&&(this.handles.destroy(),this.handles=null);this.propertiesPool&&(this.propertiesPool.destroy(),
this.propertiesPool=null)};c.prototype.init=function(){var a=this;this.constraintsManager=new E.default({view:this.view});this.prepareFrame();var b=this.getInitialProperties();this.cameraSetByUser=!1;this._set("ready",!0);for(var d=0;d<b.length;d++){var c=b[d];this.set(c.name,c.value)}this.cameraSetByUser||((b=this.view.get("map.initialViewProperties.viewpoint")||this.view.initialExtent)&&this.isCompatible(b)?this.setInitialView(b):"local"===this.view.state.mode&&this.handles.add(x.whenOnce(this.view.basemapTerrain,
"ready",function(){a.handles.remove(Y);a.setInitialView(a.view.groundExtent)}),Y))};c.prototype.deinit=function(){this.ready&&(this._override("padding",this.padding),this.cancelImmediateGoTo(),this.cancelAnimatedGoTo(),this._set("ready",!1),this._clearOverride("hasInitialView"),this.internalSetOrder.length=0,this.cameraSetByUser=!1,this.handles.remove(Y),this.constraintsManager&&(this.constraintsManager.destroy(),this.constraintsManager=null))};c.prototype.goTo=function(a,b){return h(this,void 0,
void 0,function(){var c;return d(this,function(d){c=n({animate:!0},b);return c.animate?[2,this.goToAnimated(a,c)]:[2,this.goToImmediate(a,c)]})})};c.prototype.debugSetCameraOnContent=function(){this.setStateCamera(C.cameraOnContentAlongViewDirection(this.view),{applyConstraints:!1})};c.prototype.step=function(a){var b=this.view.state,d=b&&this.view.state.cameraController;d&&(b.updateCamera(function(b){d.stepController(a,b)}),d.steppingFinished&&d.finishController())};c.prototype.cancelImmediateGoTo=
function(){var a=this.immediateGoToController;q.isSome(a)&&(this.immediateGoToController=null,a.abort())};c.prototype.cancelAnimatedGoTo=function(){var a=this.animatedGoToController;q.isSome(a)&&(this.animatedGoToController=null,a.abort())};c.prototype.getInitialProperties=function(){for(var a=this,b=new Set,d=[],c=0,e=Q;c<e.length;c++){var f=e[c],g=f.propertyName,f=f.overrides,h=b.has(g),m=this._isOverridden(g);!h&&m&&d.push({name:g,value:this._get(g)});this._clearOverride(g);(h||m)&&f.forEach(function(a){return b.add(a)})}return d.sort(function(b,
d){b=a.internalSetOrder.indexOf(b.name);d=a.internalSetOrder.indexOf(d.name);return b<d?-1:b>d?1:0})};c.prototype.setInitialView=function(a){if(a&&!this.cameraSetByUser)if(a instanceof g)this.setStateCamera(K.externalToInternal(this.view,a),{applyConstraints:!1});else if(a instanceof f)if(a.targetGeometry instanceof z){var b=K.fromExtent(this.view,a.targetGeometry,0,.5,K.OrientationMode.LOCKED);this.setStateCamera(K.externalToInternal(this.view,b),{applyConstraints:!0})}else b={applyConstraints:!a.camera},
a=this.viewpointToCamera(a),this.setStateCamera(a,b);else b=K.fromExtent(this.view,a,0,.5,K.OrientationMode.LOCKED),this.setStateCamera(K.externalToInternal(this.view,b),{applyConstraints:!0})};c.prototype.updatePropertyBeforeReady=function(a,b){if(!this.ready){this._override(a,b);var d=this.internalSetOrder.indexOf(a);-1!==d&&(this.internalSetOrder=this.internalSetOrder.splice(d,1));b&&(this.internalSetOrder.push(a),-1!==V.indexOf(a)&&this._override("hasInitialView",!0));return!0}return!1};c.prototype.isCompatible=
function(a){return a?a instanceof f?a.camera?this.isCompatible(a.camera):this.isCompatible(a.targetGeometry):a instanceof g?this.isCompatible(a.position):a.spatialReference&&B.canProject(a.spatialReference,this.view.spatialReference):!1};c.prototype.getPreservingHeadingTilt=function(a){void 0===a&&(a=J);this.cameraSetByUser?(a.heading=this.camera.heading,a.tilt=this.camera.tilt):(a.heading=0,a.tilt=.5);return a};c.prototype.centerPointAtDistanceToCamera=function(a,b,d){void 0===d&&(d=L);var c=this.getPreservingHeadingTilt();
return(a=K.getObserverForPointAtDistance(this.view,c.heading,c.tilt,a,b,K.OrientationMode.ADJUST))?(d.copyFrom(this.view.state.camera),d.eye=a.eye,d.center=a.center,d.up=a.up,d):null};c.prototype.centerToCamera=function(a){var b=this.view.pointsOfInterest.centerOnContent;b.update();return this.centerPointAtDistanceToCamera(a,b.distance)};c.prototype.extentToCamera=function(a){var b=this.getPreservingHeadingTilt();a=K.fromExtent(this.view,a,b.heading,b.tilt,K.OrientationMode.ADJUST,P);return K.externalToInternal(this.view,
a)};c.prototype.scaleToCamera=function(a){if(null==a)return null;var b=this.view.pointsOfInterest.centerOnContent;b.update();var d=b.renderLocation;a=K.scaleToDistance(this.view,a,b.location.latitude);return this.centerPointAtDistanceToCamera(d,a)};c.prototype.zoomToCamera=function(a){return this.scaleToCamera(K.zoomToScale(this.view,a))};c.prototype.viewpointToCamera=function(a){return(a=T.toCamera(this.view,a))?K.externalToInternal(this.view,a):null};c.prototype.setStateCamera=function(a,b){var d=
this;if(!a||!this.view.state.stopActiveCameraController())return!1;this.cameraSetByUser=!0;this.cancelImmediateGoTo();this.view.state.updateCamera(function(c){c.copyFrom(a);b.applyConstraints&&D.applyAll(d.view,c)});b.applyConstraints||(this.view.state.cameraController=new I.SurfaceCollisionCorrectionController({view:this.view,desiredCamera:a}));return!0};c.prototype.prepareFrame=function(){var a=this.view,b=a.container,d=a.canvas;if(b&&d){q.isSome(this.updateDevicePixelRatio)&&this.updateDevicePixelRatio();
var a=this.view.pixelRatio,c=Math.round(b.clientWidth*a),b=Math.round(b.clientHeight*a);0!==c&&0!==b&&(d.width=c,d.height=b,this.view.state&&(d=this.view.state.camera,d.fullWidth!==c||d.fullHeight!==b||d.pixelRatio!==a))&&(L.copyFrom(d),L.pixelRatio!==a&&(this.paddingToArray(this.padding,a,F),L.padding=F),L.fullWidth=c,L.fullHeight=b,L.pixelRatio=a,this.view.state.camera=L)}};c.prototype.beforeCameraChangeHandle=function(a){this.updateCameraElevation(a)};c.prototype.cameraChangedSync=function(a){a&&
this.view._stage&&this.view._stage.setCamera(a)};c.prototype.updateCameraElevation=function(a){var b=this.view.basemapTerrain&&this.view.basemapTerrain.spatialReference,d=this.view.renderCoordsHelper.getAltitude(a.eye),b=b?C.surfaceElevationBelowEye(this.view,a):0;a.relativeElevation=d-b};c.prototype.createGoToCamera=function(b,c){return h(this,void 0,void 0,function(){var e,h,m,k,l,n,r,q;return d(this,function(d){switch(d.label){case 0:return[4,x.whenOnce(this,"ready",c.signal,!0)];case 1:return d.sent(),
u.throwIfAborted(c),[4,T.create(this.view,b,c.signal)];case 2:e=d.sent();h=!!(b instanceof f&&b.camera||b instanceof g);m=e.camera;if(!this.isCompatible(m))throw n=(l=(k=m.position)&&k.spatialReference)?l.wkid:"none",r=this.view.spatialReference.wkid,new a("goto:incompatible-spatialreference","Resulting camera has an incompatible spatial reference (camera: "+n+", view: "+r+")",{camera:m});q=K.externalToInternal(this.view,m);if(!q)throw new a("goto:invalid-camera","Resulting camera is invalid");return[2,
{viewpoint:e,camera:q,isFullySpecified:h}]}})})};c.prototype.cancellableGoTo=function(a,b){var d=this,c,e=function(){d.view.state.cameraController===a&&a.active&&a.asyncResult===c&&a.stopController()};return u.create(function(d,f){c={resolve:d,reject:f};a.asyncResult=c;u.onAbort(b,e)},e)};c.prototype.goToImmediate=function(b,c){return h(this,void 0,void 0,function(){var e,f,g,h=this;return d(this,function(d){this.cancelAnimatedGoTo();this.cancelImmediateGoTo();e=u.createAbortController();u.onAbort(c,
function(){return e.abort()});f=this.createGoToCamera(b,n({},c,{signal:e.signal}));g=function(){h.immediateGoToController===e&&(h.immediateGoToController=null)};this.immediateGoToController=e;return[2,f.then(function(a){g();h.setStateCamera(a.camera,{applyConstraints:!a.isFullySpecified})}).catch(function(b){g();!u.isAbortError(b)&&b instanceof a&&b.message&&O.error("#goTo()","Failed to create camera from target, "+b.message[0].toLowerCase()+b.message.slice(1));throw b;})]})})};c.prototype.goToAnimatedBeforeReady=
function(a,b){return h(this,void 0,void 0,function(){var c;return d(this,function(d){switch(d.label){case 0:return this.cancelAnimatedGoTo(),c=u.createAbortController(),u.onAbort(b,function(){return c.abort()}),this.animatedGoToController=c,b=n({},b,{signal:c.signal}),[4,x.whenOnce(this.view,"ready",c.signal)];case 1:return d.sent(),this.animatedGoToController=null,[2,this.goToAnimated(a,b)]}})})};c.prototype.goToAnimated=function(b,c){return h(this,void 0,void 0,function(){var e,f,g,m,k,l,n=this;
return d(this,function(r){this.cancelAnimatedGoTo();if(!this.ready)return[2,this.goToAnimatedBeforeReady(b,c)];e=this.view.state.cameraController;e instanceof G.PointToPointAnimationController&&(e.updateStateFromViewAnimation(),e.active&&(f=e));null==f&&(f=new G.PointToPointAnimationController(this.view.state,this.view.sceneIntersectionHelper));g=f.viewAnimation;m=this.createGoToCamera(b,c);g.update(m.then(function(a){return a.viewpoint}));if(f!==e&&!this.view.state.switchCameraController(f))return g.stop(),
O.error("#goTo()","Cannot start an animation while interacting"),[2,u.reject(new a("view:goto-cannot-interrupt","Cannot start an animation while interacting"))];k=g.target;l=function(){return n.view.state.cameraController===f&&f.viewAnimation.target===k&&f.active};m.then(function(a){var b=a.viewpoint,e=a.camera,m=a.isFullySpecified;return h(n,void 0,void 0,function(){var a,h;return d(this,function(d){switch(d.label){case 0:if(!l())return[2];f.viewAnimation.update(b);k=f.viewAnimation.target;m?(a=
new I.SurfaceCollisionCorrectionController({view:this.view,desiredCamera:e}),D.applySurfaceCollision(this.view,e,1)):D.applyAll(this.view,e);f.begin(e,this.internalAnimateOptions(c));return[4,g.when()];case 1:return d.sent(),h=this.view.state.cameraController,a&&(h&&h.active?h instanceof G.PointToPointAnimationController&&h.viewAnimation.target===k&&(this.view.state.cameraController=a):f.viewAnimation.target===k&&(this.view.state.cameraController=a)),[2]}})})}).catch(function(b){!u.isAbortError(b)&&
b instanceof a&&b.message&&O.error("#goTo()","Failed to create camera from target, "+b.message[0].toLowerCase()+b.message.slice(1));if(l())throw n.view.state.cameraController.stopController(),b;});return[2,this.cancellableGoTo(f,c)]})})};c.prototype.internalAnimateOptions=function(a){var b={};a&&(null!=a.speedFactor&&(b.speedFactor=a.speedFactor),null!=a.duration&&(b.duration=a.duration/1E3),null!=a.maxDuration&&(b.maxDuration=a.maxDuration/1E3),null!=a.easing&&(b.easing="string"===typeof a.easing?
S.named[a.easing]:a.easing));return b};k([w.property({type:g,dependsOn:["view.state.camera","ready"]})],c.prototype,"camera",null);k([w.property({type:A,dependsOn:["view.pointsOfInterest.centerOnContent.location","ready"]})],c.prototype,"center",null);k([w.property({type:z,dependsOn:["view.state.camera","ready"]})],c.prototype,"extent",null);k([w.property({readOnly:!0,dependsOn:["view.state.camera","ready"]})],c.prototype,"frustum",null);k([w.property({readOnly:!0,dependsOn:["view.map.initialViewProperties?.viewpoint"]})],
c.prototype,"hasInitialView",null);k([w.property({readOnly:!0,type:Boolean})],c.prototype,"ready",void 0);k([w.property({dependsOn:["view.pointsOfInterest.centerOnContent.distance","ready"],type:Number})],c.prototype,"scale",null);k([w.property({dependsOn:["view.state.camera","ready"]})],c.prototype,"padding",null);k([w.property({readOnly:!0,dependsOn:["view.width","view.height","padding"]})],c.prototype,"screenCenter",null);k([w.property({constructOnly:!0})],c.prototype,"view",void 0);k([w.property({type:f,
dependsOn:["camera","ready"]})],c.prototype,"viewpoint",null);k([w.property({type:Number,dependsOn:["scale"]})],c.prototype,"zoom",null);k([w.property({constructOnly:!0})],c.prototype,"updateDevicePixelRatio",void 0);return c=k([w.subclass("esri.views.3d.state.ViewStateManager")],c)}(w.declared(b));c.ViewStateManager=p;var V="camera viewpoint extent scale center zoom".split(" "),Q=[{propertyName:"camera",overrides:["viewpoint"]},{propertyName:"viewpoint",overrides:["extent"]},{propertyName:"extent",
overrides:["center","scale"]},{propertyName:"scale",overrides:["zoom"]},{propertyName:"center",overrides:[]},{propertyName:"zoom",overrides:[]},{propertyName:"padding",overrides:[]}],J={heading:0,tilt:0},P=new g,L=new N,F=y.vec4f64.create(),Y="pending-initial-view";c.default=p})},"esri/views/3d/state/ConstraintsManager":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/Handles ../../../core/watchUtils ../../../core/accessorSupport/decorators ../camera/constraintUtils ../camera/intersectionUtils ./NearFarHeuristic ./SurfaceCollisionConstraint ../support/mathUtils".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m){Object.defineProperty(c,"__esModule",{value:!0});p=function(c){function k(b){var e=c.call(this)||this;e.handles=new d;e.nearFarHeuristic=a.createNearFarHeuristic(b.view.state.mode,b.view.basemapTerrain,b.view.renderCoordsHelper.spatialReference);return e}n(k,c);k.prototype.initialize=function(){var a=this;this.handles.add([this.view.watch(["constraints.clipDistance.near","constraints.clipDistance.far"],function(){return a.handleClipDistanceNearFarChanged()}),this.view.watch("constraints.clipDistance.mode",
function(){return a.handleClipDistanceModeChanged()}),this.view.state.events.on("before-camera-change",function(b){return a.cameraUpdateNearFar(b.camera)}),this.view.watch("dataExtent",function(){return a.updateNearFar()},!0)]);this.handles.add([this.view.watch(["constraints.altitude.min","constraints.altitude.max"],function(){return a.handleAltitudeMinMaxChanged()},!0)]);this.handles.add([this.view.watch("constraints.tilt.max",function(){return a.handleTiltMaxChanged()},!0),this.view.watch("constraints.tilt.mode",
function(){return a.handleTiltModeChanged()},!0),this.view.watch("state.camera",function(){return a.tiltAutoUpdateMax()},!0)]);this.handles.add(this.view.watch(["map.ground.navigationConstraint.type","constraints.collision.enabled"],function(){return a.updateCollision()},!0));this.view.state.isLocal&&this.handles.add(h.init(this.view,"dataExtent",function(b){return a.updateLocalSurfaceDistance(b)}));this.updateNearFar();"local"!==this.view.state.mode&&this.updateAltitude();this.updateTilt();this.updateCollision();
this._set("surfaceCollisionConstraint",new e.default({view:this.view}))};k.prototype.destroy=function(){this.handles&&(this.handles.destroy(),this.handles=null);this.surfaceCollisionConstraint&&(this.surfaceCollisionConstraint.destroy(),this._set("surfaceCollisionConstraint",null))};k.prototype.handleClipDistanceNearFarChanged=function(){var a=this,b=this.view.constraints&&this.view.constraints.clipDistance;b&&"auto"!==b.mode&&this.view.state.updateCamera(function(d){a.cameraUpdateNearFarManual(d,
b);return!0})};k.prototype.handleClipDistanceModeChanged=function(){this.updateNearFar()};k.prototype.updateNearFar=function(){var a=this;this.view.state.updateCamera(function(b){a.cameraUpdateNearFar(b);return!0})};k.prototype.cameraUpdateNearFar=function(a){var b=this.view.constraints&&this.view.constraints.clipDistance;"manual"===(b?b.mode:"auto")?this.cameraUpdateNearFarManual(a,b):this.cameraUpdateNearFarAuto(a,b)};k.prototype.cameraUpdateNearFarAuto=function(a,d){this.nearFarHeuristic.compute(a.eye,
a.center,this.view.dataExtent,b.surfaceElevationBelowEye(this.view,a),a);d&&d.autoUpdate(a.near,a.far)};k.prototype.cameraUpdateNearFarManual=function(a,b){b&&(a.near=b.near,a.far=b.far)};k.prototype.updateCollision=function(){var a=this.view.map&&this.view.map.ground&&this.view.map.ground.navigationConstraint,b=this.view.constraints&&this.view.constraints.collision.enabled,a=a?"stay-above"===a.type:b,b=this.view.state.constraints.collision;a!==b.enabled&&((b.enabled=a)&&this.reapplyConstraints(8),
(a=this.view.constraints&&this.view.constraints.tilt)&&"auto"!==a.mode||this.updateTiltAuto(a))};k.prototype.handleAltitudeMinMaxChanged=function(){this.updateAltitude()};k.prototype.updateAltitude=function(){var a=this.view.constraints&&this.view.constraints.altitude;this.view.state.constraints.altitude=a&&"local"!==this.view.state.mode?{min:a.min,max:a.max}:null;this.reapplyConstraints()};k.prototype.handleTiltModeChanged=function(){this.updateTilt()};k.prototype.handleTiltMaxChanged=function(){var a=
this.view.constraints&&this.view.constraints.tilt;a&&"auto"!==a.mode&&(this.updateTiltManual(a),this.reapplyConstraints())};k.prototype.updateTilt=function(){var a=this.view.constraints&&this.view.constraints.tilt;"manual"===(a?a.mode:"auto")?this.updateTiltManual(a):this.updateTiltAuto(a);this.reapplyConstraints()};k.prototype.updateTiltManual=function(a){var b=this.view.state.constraints;b.tilt=b.createConstantMaxTilt(m.deg2rad(a.max))};k.prototype.updateTiltAuto=function(a){a=this.view.state.constraints;
a.tilt=a.createDefaultTilt();this.tiltAutoUpdateMax()};k.prototype.tiltAutoUpdateMax=function(){var a=this.view.constraints&&this.view.constraints.tilt;if(a&&"auto"===a.mode){var b=this.view.state.constraints;b.tilt&&(b=b.tilt(this.view.state.camera.distance).max,a.autoUpdate(m.rad2deg(b)))}};k.prototype.updateLocalSurfaceDistance=function(a){var b=Math.max(a.width,a.height);0>=b||(a.hasZ&&(b=Math.max(b,a.zmax-a.zmin)),a=this.view.state,b=3*b/Math.atan(a.camera.fov/2),b!==a.constraints.distance&&
(a.constraints.distance=b))};k.prototype.reapplyConstraints=function(a){var b=this;void 0===a&&(a=15);this.view.state.updateCamera(function(d){return f.applyAll(b.view,d,{selection:a,interactionType:0,interactionFactor:null,interactionStartCamera:null,interactionDirection:null,tiltMode:0})})};l([g.property({constructOnly:!0})],k.prototype,"view",void 0);l([g.property({readOnly:!0})],k.prototype,"surfaceCollisionConstraint",void 0);return k=l([g.subclass("esri.views.3d.state.ConstraintsManager")],
k)}(g.declared(k));c.ConstraintsManager=p;c.default=p})},"esri/views/3d/state/NearFarHeuristic":function(){define("require exports ../../../core/mathUtils ../../../core/unitUtils ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../support/earthUtils ../support/mathUtils".split(" "),function(p,c,n,l,k,d,h,g){function f(a,b,d,c){d=m/d;a/b>d?(c.far=a,c.near=c.far/b):(c.near=d,c.far=c.near*b);return c}Object.defineProperty(c,"__esModule",{value:!0});c.createNearFarHeuristic=
function(d,c,e){return"global"===d?new a:new b(c,e)};var b=function(){function a(a,b){this.elevationProvider=a;this.unitInMeters=l.getMetersPerUnitForSR(b)}a.prototype.compute=function(a,b,d,c,m){m||(m={near:0,far:0});var l=h.earthRadius,p=a[2]*this.unitInMeters,x=p;c=p-c;var w=this.elevationProvider?this.elevationProvider.getElevationBounds():null;w&&(p=0<=c?x-this.unitInMeters*w[0]:this.unitInMeters*w[1]-x);x=Math.max(d.xmax-d.xmin,d.ymax-d.ymin,4*Math.max(d.xmax-d.xmin,d.ymax-d.ymin));k.vec3.subtract(r,
b,a);t[0]=0<r[0]?d.xmax:d.xmin;t[1]=0<r[1]?d.ymax:d.ymin;t[2]=0<r[2]?x/2:-x/2;k.vec3.subtract(t,t,a);k.vec3.normalize(r,r);a=1.1*k.vec3.dot(t,r)*this.unitInMeters;l=Math.sqrt(p*(p+2*l));d=Math.max(d.xmax-d.xmin,d.ymax-d.ymin);b=d*u*this.unitInMeters;p=n.clamp((p-b)/(d*q*this.unitInMeters-b),0,1);p=g.lerp(l,a,p*p*p);p*=Math.max(Math.log(Math.abs(c)),1);p=Math.min(p,Math.max(34064E4,x));p/=this.unitInMeters;return f(p,e,this.unitInMeters,m)};return a}(),a=function(){function a(){}a.prototype.compute=
function(a,b,d,c,e){e||(e={near:0,far:0});b=h.earthRadius;a=k.vec3.length(a)-b;a=Math.max(Math.abs(a-c),Math.abs(a));c=Math.sqrt(a*(a+2*(b+Math.min(0,c))));a=n.clamp(2E4-(Math.log(a)-7.983)/9.011*19E3,1E3,2E4);return f(1.2*c,a,1,e)};return a}(),e=2E4,m=2,q=.001,u=1E-4,t=d.vec3f64.create(),r=d.vec3f64.create()})},"esri/views/3d/state/SurfaceCollisionConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/Handles ../../../core/accessorSupport/decorators ../camera/constraintUtils ../camera/intersectionUtils".split(" "),
function(p,c,n,l,k,d,h,g,f){Object.defineProperty(c,"__esModule",{value:!0});p=function(b){function a(a){a=b.call(this)||this;a.handles=new d;return a}n(a,b);a.prototype.initialize=function(){var a=this;this.handles.add(this.view.basemapTerrain.on("elevation-change",function(b){return a.handleElevationChangeEvent(b)}))};a.prototype.destroy=function(){this.handles&&(this.handles.destroy(),this.handles=null)};a.prototype.handleElevationChangeEvent=function(a){if(this.view.state.cameraController)return!1;
f.eyeWithinExtent(this.view,this.view.state.camera,a.extent,a.spatialReference)&&this.applyToCurrentCamera()};a.prototype.applyToCurrentCamera=function(){var a=this;this.view.state.updateCamera(function(b){g.applySurfaceCollision(a.view,b,1)})};l([h.property({constructOnly:!0})],a.prototype,"view",void 0);return a=l([h.subclass("esri.views.3d.state.ElevationCollisionConstraint")],a)}(h.declared(k));c.SurfaceCollisionConstraint=p;c.default=p})},"esri/views/3d/state/controllers/SurfaceCollisionCorrectionController":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/Handles ../../camera/constraintUtils ../../camera/intersectionUtils ./CameraController".split(" "),
function(p,c,n,l,k,d,h){Object.defineProperty(c,"__esModule",{value:!0});p=function(c){function f(b){var a=c.call(this)||this;a.handles=new l;a.view=b.view;a.desiredCamera=b.desiredCamera.clone();return a}n(f,c);Object.defineProperty(f.prototype,"canStop",{get:function(){return!0},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"constraintEnabled",{get:function(){return this.view.state.constraints.collision.enabled},enumerable:!0,configurable:!0});f.prototype.onControllerStart=function(b){var a=
this;c.prototype.onControllerStart.call(this,b);this.handles.add(this.view.basemapTerrain.on("elevation-change",function(b){return a.handleElevationChangeEvent(b)}));this.applyCorrection()};f.prototype.onControllerEnd=function(b){this.handles.removeAll();this.view=null;c.prototype.onControllerEnd.call(this,b)};f.prototype.handleElevationChangeEvent=function(b){d.eyeWithinExtent(this.view,this.desiredCamera,b.extent,b.spatialReference)&&this.applyCorrection()};f.prototype.applyCorrection=function(){var b=
this;this.view.state.updateCamera(function(a){a.copyViewFrom(b.desiredCamera);k.applySurfaceCollision(b.view,a,1)||b.constraintEnabled||(b.state=h.State.Stopped)})};return f}(h.CameraController);c.SurfaceCollisionCorrectionController=p})},"esri/views/3d/support/viewpointUtils":function(){define("require exports ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../Camera ../../../geometry ../../../Graphic ../../../Viewpoint ../../../core/asyncUtils ../../../core/compilerUtils ../../../core/Error ../../../core/maybe ../../../core/promiseUtils ../../../core/libs/gl-matrix-2/mat3 ../../../core/libs/gl-matrix-2/mat3f64 ../../../core/libs/gl-matrix-2/mat4f64 ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/webMercatorUtils ../camera/intersectionUtils ./cameraUtils ./geometryUtils ./mathUtils ./projectionUtils".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z,A,B,D,C){function E(a){return 360-D.cyclicalDeg.normalize(a)}function H(a){return D.cyclicalDeg.normalize(360-a)}function G(a,b){a&&a.resolver&&(null==b?a.resolver.reject():a.resolver.resolve(b));return b}function I(a,b,c,e){if(!b)return G(e);var f=a.spatialReference||d.SpatialReference.WGS84;if(b.camera){a=b.get("camera.position.spatialReference");if(!y.canProject(a,f))return G(e);b=b.camera.clone();a.equals(f)||(b.position=y.project(b.position,
f));return G(e,b)}var g=b.get("targetGeometry.spatialReference");if(g&&!y.canProject(g,f))return G(e);f=A.internalToExternal(a,a.state.camera);g=A.OrientationMode.ADJUST;null!=b.rotation&&(f.heading=E(b.rotation),g=A.OrientationMode.LOCKED);null!=c&&(f.tilt=c);if("point"===b.targetGeometry.type){c=b.targetGeometry;var h=void 0,m=b.targetGeometry.clone(),h=null!=b.scale?A.scaleToDistance(a,b.scale,c.latitude):a.state.camera.distance;return A.fromCenterDistance(a,m,h,f,g,e)}return A.fromExtent(a,b.targetGeometry.extent,
f.heading,f.tilt,g,e)}function K(a,b){return null==b.scale&&null!=b.zoom?A.zoomToScale(a,b.zoom):b.scale}function M(a,b){var d=!1;null!=b.heading?(a.heading=b.heading,d=!0):null!=b.rotation&&(a.heading=E(b.rotation),d=!0);null!=b.tilt&&(a.tilt=b.tilt,d=!0);null!=b.fov&&(a.fov=b.fov);return d}function T(a,b,c){var e=a.spatialReference||d.SpatialReference.WGS84;b=b||A.externalToInternal(a,c.camera);c.targetGeometry=C.vectorToPoint(b.center,a.renderSpatialReference,e);c.scale=A.computeScale(a,b);c.rotation=
H(c.camera.heading);return c}function N(d,c,e){if(c){if(!y.canProject(c.spatialReference,d.spatialReference))throw new a("viewpointutils:incompatible-spatialreference","Spatial reference ("+(c.spatialReference?c.spatialReference.wkid:"unknown")+") is incompatible with the view ("+d.spatialReference.wkid+")",{geometry:c});var f=[];if(!c.hasZ&&d.basemapTerrain){var g=void 0;switch(c.type){case "point":g=c;break;case "multipoint":case "polyline":case "mesh":g=c.extent.center;break;case "extent":g=c.center;
break;case "polygon":g=c.centroid;break;default:b.neverReached(c)}g&&y.canProject(g,d.basemapTerrain.spatialReference)?X[2]=d.basemapTerrain.getElevation(g)||0:X[2]=0}(0,ma[c.type])(c,function(a){f.push(a[0],a[1],a[2])},X);var h=f.length/3;if(0!==h&&(g=Array(f.length),C.bufferToBuffer(f,c.spatialReference,0,g,d.spatialReference,0,h)))for(c.hasZ&&(e.hasZ=!0),d=0;d<g.length;d+=3)c.hasZ?(X[0]=g[d+0],X[1]=g[d+1],X[2]=g[d+2]):(X[0]=g[d+0],X[1]=g[d+1]),w.expand(e.boundingBox,X)}}function S(a,b,d,c){return l(this,
void 0,void 0,function(){var g,h,m,k,l;return n(this,function(n){switch(n.label){case 0:return[4,a.whenViewForGraphic(b)];case 1:return g=n.sent(),!e.isNone(g)&&"whenGraphicBounds"in g?[4,f.result(g.whenGraphicBounds(b,{minDemResolution:d}))]:(N(a,b.geometry,c),[2]);case 2:h=n.sent();if(!1===h.ok)return N(a,b.geometry,c),[2];m=h.value;k=m.screenSpaceObjects;l=m.boundingBox;w.expand(c.boundingBox,l);k&&k.forEach(function(a){c.screenSpaceObjects.push(a)});isFinite(l[2])&&(c.hasZ=!0);return[2]}})})}
function O(a,b,c,e){return l(this,void 0,void 0,function(){var f,g;return n(this,function(k){switch(k.label){case 0:return Array.isArray(b)&&2===b.length&&(f=b[0],g=b[1],"number"===typeof f&&"number"===typeof g)?(ga.x=f,ga.y=g,ga.z=void 0,ga.spatialReference=a.spatialReference.isGeographic?a.spatialReference:d.SpatialReference.WGS84,N(a,ga,e),[2]):b&&"function"===typeof b.map?[4,m.eachAlways(b.map(function(b){return O(a,b,c,e)}))]:[3,2];case 1:return k.sent(),[2];case 2:if(!(b instanceof d.BaseGeometry))return[3,
3];N(a,b,e);return[3,5];case 3:return b instanceof h?[4,S(a,b,c,e)]:[3,5];case 4:k.sent(),k.label=5;case 5:return[2]}})})}function V(a,b,d,c,e){return l(this,void 0,void 0,function(){var f,g,h;return n(this,function(m){switch(m.label){case 0:if(b.camera)return[2,Q(a,d,b.camera,e)];e.scale=b.scale;e.rotation=b.rotation;e.targetGeometry=b.targetGeometry?b.targetGeometry.clone():null;e.camera=null;null!=d.heading?e.rotation=H(d.heading):null!=d.rotation&&(e.rotation=d.rotation);f=K(a,d);null!=f&&(e.scale=
f);g=A.createAsyncContext(c);I(a,e,d.tilt,g);h=e;return[4,g.resolver.promise];case 1:return h.camera=m.sent(),[2,e]}})})}function Q(a,b,d,c){c.camera=d.clone();c.camera.fov=a.camera.fov;b=a.spatialReference;d=c.camera.position.spatialReference;if(!y.canProject(d,b))return null;d.equals(b)||(c.camera.position=y.project(c.camera.position,b));return T(a,null,c)}function J(b,c,e,f,g){return l(this,void 0,void 0,function(){var h,m,k,l,q,t;return n(this,function(n){switch(n.label){case 0:if(!e)throw new a("createfromcenter",
"invalid point");g.targetGeometry=e.clone();h=z.cameraOnContentAlongViewDirection(b);if(c.position){n=g.targetGeometry;var u=h,p=b.renderSpatialReference;C.pointToVector(c.position,ha,p);C.pointToVector(n,W,p);g.targetGeometry=new d.Point(n);g.camera.position=new d.Point(c.position);r.vec3.subtract(ba,W,ha);A.directionToHeadingTilt(b,ha,ba,u.up,g.camera);g.scale=A.distanceToScale(b,r.vec3.distance(ha,W),g.targetGeometry.latitude);g.rotation=H(g.camera.heading);return[2,g]}c.zoomFactor&&(m=h.distance/
c.zoomFactor,k=r.vec3.scale(X,h.viewForward,-m),r.vec3.add(h.eye,h.center,k),h.markViewDirty(),g.scale=A.distanceToScale(b,m,e.latitude));A.internalToExternal(b,h,g.camera);l=M(g.camera,c)?A.OrientationMode.LOCKED:A.OrientationMode.ADJUST;if(c.zoomFactor)return[3,2];g.scale=K(b,c);null==g.scale&&(C.pointToVector(e,X,b.renderSpatialReference),B.frustum.intersectsPoint(h.frustum.planes,X)?g.scale=A.distanceToScale(b,r.vec3.distance(h.eye,X),e.latitude):g.scale=A.computeScale(b,h));q=A.createAsyncContext(f);
A.fromCenterScale(b,g.targetGeometry,g.scale,g.camera,l,q);t=g;return[4,q.resolver.promise];case 1:t.camera=n.sent(),n.label=2;case 2:return[2,g]}})})}function P(a,b,d,c){return l(this,void 0,void 0,function(){var e,f;return n(this,function(g){e=z.cameraOnContentAlongViewDirection(a);f=C.vectorToPoint(e.center,a.renderSpatialReference,ga,a.spatialReference);return[2,J(a,b,f,d,c)]})})}function L(a,b,d,c,e){return l(this,void 0,void 0,function(){var f,g,h,m;return n(this,function(k){switch(k.label){case 0:return e.targetGeometry=
d.clone(),f=z.cameraOnContentAlongViewDirection(a),A.internalToExternal(a,f,e.camera),g=M(e.camera,b)?A.OrientationMode.LOCKED:A.OrientationMode.ADJUST,h=A.createAsyncContext(c),A.fromExtent(a,d,e.camera.heading,e.camera.tilt,g,h),m=e,[4,h.resolver.promise];case 1:return m.camera=k.sent(),[2,e]}})})}function F(a,b,d,c,e,f,g){return l(this,void 0,void 0,function(){var h,m,k,l,t;return n(this,function(n){switch(n.label){case 0:g.targetGeometry=d.clone();n=h=z.cameraOnContentAlongViewDirection(a);var u=
0;d.hasZ?u=d.z:a.basemapTerrain&&(u=a.basemapTerrain.getElevation(d));r.vec3.set(X,d.x,d.y,u);C.computeLinearTransformation(a.spatialReference,X,R,a.renderSpatialReference);q.mat3.fromMat4(Z,R);q.mat3.transpose(Z,Z);w.empty(da);for(var p=[[0,1,2],[3,1,2],[0,4,2],[3,4,2],[0,1,5],[3,1,5],[0,4,5],[3,4,5]],x=0;x<p.length;x++){var v=p[x],y=c[v[2]];isFinite(y)||(y=u);r.vec3.set(X,c[v[0]],c[v[1]],y);C.vectorToVector(X,a.spatialReference,X,a.renderSpatialReference);w.expand(da,r.vec3.transformMat3(X,X,Z))}u=
w.width(da);p=w.height(da);x=w.depth(da);v=1/Math.tan(n.fovY/2);m=Math.max(.5*Math.sqrt(u*u+x*x)*Math.max(v,1/Math.tan(n.fovX/2))+.5*p,.5*p*v+.5*Math.max(u,x))/e;A.internalToExternal(a,h,g.camera);k=M(g.camera,b)?A.OrientationMode.LOCKED:A.OrientationMode.ADJUST;g.scale=A.distanceToScale(a,m,g.targetGeometry.latitude);l=A.createAsyncContext(f);A.fromCenterScale(a,g.targetGeometry,g.scale,g.camera,k,l);t=g;return[4,l.resolver.promise];case 1:return t.camera=n.sent(),[2,g]}})})}function Y(a){a&&(a.rotation=
H(a.camera.heading));return a}Object.defineProperty(c,"__esModule",{value:!0});c.DEFAULT_FRAME_COVERAGE=.66;c.rotationToHeading=E;c.headingToRotation=H;c.toCamera=I;c.fromInternalCamera=function(a,b,d){d||(d=new g({camera:new k}));A.internalToExternal(a,b,d.camera);return T(a,b,d)};c.fromCamera=function(a,b,d){d||(d=new g);d.camera=b.clone();return T(a,null,d)};c.create=function(b,e,f){return l(this,void 0,void 0,function(){var h,m,l,q,t,u,p,x,y,B,C,D,G;return n(this,function(n){switch(n.label){case 0:if(e&&
b.spatialReference){n={target:null};if("declaredClass"in e||Array.isArray(e))n.target=e;else{for(var E in e)n[E]=e[E];e.center&&!n.target&&(n.target=e.center)}h=n}else h=null;if(!h)throw new a("viewpointutils-create:no-target","Missing target for creating viewpoint");m=new g({camera:new k({fov:b.camera.fov})});return h.target instanceof g?[4,V(b,h.target,h,f,m)]:[3,2];case 1:return l=n.sent(),[2,Y(l)];case 2:if(h.target instanceof k)return[2,Y(Q(b,h,h.target,m))];q=null!=h.scale||null!=h.zoom;if(!(h.target instanceof
d.Extent))return[3,6];t=h.target.xmin===h.target.xmax||h.target.ymin===h.target.ymax;if(!q&&!t)return[3,4];u=Y;return[4,J(b,h,h.target.center,f,m)];case 3:return[2,u.apply(void 0,[n.sent()])];case 4:return p=Y,[4,L(b,h,h.target,f,m)];case 5:return[2,p.apply(void 0,[n.sent()])];case 6:return x={boundingBox:w.empty(),hasZ:!1,screenSpaceObjects:[]},y=q?A.scaleToResolution(b,K(b,h)):void 0,[4,O(b,h.target,y,x)];case 7:n.sent();if(!isFinite(x.boundingBox[0]))return[3,11];w.center(x.boundingBox,X);ga.x=
X[0];ga.y=X[1];ga.z=X[2];ga.spatialReference=b.spatialReference;t=void 0;isFinite(ga.z)&&x.hasZ?t=w.isPoint(x.boundingBox):(ga.z=void 0,t=v.isPoint(w.toRect(x.boundingBox,ja)));if(!q&&!t)return[3,9];B=Y;return[4,J(b,h,ga,f,m)];case 8:return[2,B.apply(void 0,[n.sent()])];case 9:E=x.screenSpaceObjects;n=c.DEFAULT_FRAME_COVERAGE;if(E.length){for(var I=Number.NEGATIVE_INFINITY,H=0;H<E.length;H++)var M=E[H].screenSpaceBoundingRect,I=Math.max(I,Math.abs(M[0]),Math.abs(M[1]),Math.abs(M[2]),Math.abs(M[3]));
C=n-I/Math.min(b.width,b.height)*2}else C=n;D=Y;return[4,F(b,h,ga,x.boundingBox,C,f,m)];case 10:return[2,D.apply(void 0,[n.sent()])];case 11:if(h.position)return E=h,n=m,I=z.cameraOnContentAlongViewDirection(b),r.vec3.copy(ba,I.viewForward),A.directionToHeadingTilt(b,I.eye,ba,I.up,ea),n.camera.position=new d.Point(E.position),n.camera.heading=null!=E.heading?E.heading:ea.heading,n.camera.tilt=null!=E.tilt?E.tilt:ea.tilt,E=T(b,null,n),[2,Y(E)];G=Y;return[4,P(b,h,f,m)];case 12:return[2,G.apply(void 0,
[n.sent()])]}})})};var X=x.vec3f64.create(),R=t.mat4f64.create(),Z=u.mat3f64.create(),da=w.create(),ja=v.create(),ba=x.vec3f64.create(),ha=x.vec3f64.create(),W=x.vec3f64.create(),ea={heading:0,tilt:0},ga=new d.Point,ma={point:function(a,b,d){d[0]=a.x;d[1]=a.y;a.hasZ&&(d[2]=a.z);b(d)},polygon:function(a,b,d){for(var c=a.hasZ,e=0;e<a.rings.length;e++)for(var f=a.rings[e],g=0;g<f.length;g++)d[0]=f[g][0],d[1]=f[g][1],c&&(d[2]=f[g][2]),b(d)},polyline:function(a,b,d){for(var c=a.hasZ,e=0;e<a.paths.length;e++)for(var f=
a.paths[e],g=0;g<f.length;g++)d[0]=f[g][0],d[1]=f[g][1],c&&(d[2]=f[g][2]),b(d)},multipoint:function(a,b,d){var c=a.points;a=a.hasZ;for(var e=0;e<c.length;e++)d[0]=c[e][0],d[1]=c[e][1],a&&(d[2]=c[e][2]),b(d)},extent:function(a,b,d){a.hasZ?(b(r.vec3.set(d,a.xmin,a.ymin,a.zmin)),b(r.vec3.set(d,a.xmax,a.ymin,a.zmin)),b(r.vec3.set(d,a.xmin,a.ymax,a.zmin)),b(r.vec3.set(d,a.xmax,a.ymax,a.zmin)),b(r.vec3.set(d,a.xmin,a.ymin,a.zmax)),b(r.vec3.set(d,a.xmax,a.ymin,a.zmax)),b(r.vec3.set(d,a.xmin,a.ymax,a.zmax)),
b(r.vec3.set(d,a.xmax,a.ymax,a.zmax))):(b(r.vec3.set(d,a.xmin,a.ymin,d[2])),b(r.vec3.set(d,a.xmax,a.ymin,d[2])),b(r.vec3.set(d,a.xmin,a.ymax,d[2])),b(r.vec3.set(d,a.xmax,a.ymax,d[2])))},mesh:function(a,b,d){if(a=a.vertexAttributes&&a.vertexAttributes.position)for(var c=0;c<a.length;c+=3)b(r.vec3.set(d,a[c+0],a[c+1],a[c+2]))}}})},"esri/views/3d/state/helpers/SceneIntersectionHelper":function(){define("require exports ../../../../core/maybe ../../../../core/screenUtils ../../../../core/libs/gl-matrix-2/vec3 ../../support/geometryUtils ../../support/stack ../../webgl-engine/lib/Intersector ../../webgl-engine/lib/intersectorUtils".split(" "),
function(p,c,n,l,k,d,h,g,f){function b(a,b,d){for(var c=0;c<a.length;c++){var e=a[c];b&&!b(e)||d.push(e)}return d}Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(a,b,c){this.viewingMode=a;this.layerProvider=b;this.view=c;this.tmpIntersector=new g(this.viewingMode);this.tmpRay=d.ray.create();this.externalIntersectionHandlers=new Set;this.intersectionTolerance=g.DEFAULT_TOLERANCE;this.validateHUDIntersector=new g(this.viewingMode);this.validateHUDIntersector.enable.hud=!1}c.prototype.intersectScreen=
function(a,b,d,c){return this.intersectRay(this.getPickRay(a,this.tmpRay),b,d,c)};c.prototype.intersectScreenFreePointFallback=function(a,b,d,c){return this.intersectRayFreePointFallback(this.getPickRay(a,this.tmpRay),b,d,c)};c.prototype.intersectRay=function(a,b,d,c){c=this.computeIntersection(a,d,!1,c||this.tmpIntersector);b=c?(a=c.results.min)?a.getIntersectionPoint(b):!1:!1;return b};c.prototype.intersectRayFreePointFallback=function(a,b,d,c){return this.intersectRay(a,b,d,c)||this.intersectRayFreePointLocal(a,
b)};c.prototype.intersectIntersectorScreen=function(a,b,d,c,e){void 0===c&&(c=!1);void 0===e&&(e=!1);return this.computeIntersection(this.getPickRay(a,this.tmpRay),d,c,b,e)};c.prototype.intersectToolIntersectorScreen=function(a,b,d){a=this.getPickRay(a,this.tmpRay);var c=this.computeIntersection(a,d,!0,b),e=c.results.min;this.view.basemapTerrain&&this.view.basemapTerrain.isOpaque()||e.hasIntersectionPoint&&"TerrainRenderer"!==e.intersector||(c=this.computeIntersection(a,d,!1,b));return c};c.prototype.setTolerance=
function(a){void 0===a&&(a=g.DEFAULT_TOLERANCE);this.intersectionTolerance=a};c.prototype.addIntersectionHandler=function(a){this.externalIntersectionHandlers.add(a)};c.prototype.removeIntersectionHandler=function(a){this.externalIntersectionHandlers.delete(a)};c.prototype.getPickRay=function(a,b){void 0===b&&(b=d.ray.create());return d.ray.fromScreen(this.view.state.camera,a,b)};c.prototype.intersectRayFreePointLocal=function(a,b){if("local"!==this.viewingMode)return!1;var d=this.view.dataExtent,
c=Math.max(d.xmax-d.xmin,d.ymax-d.ymin,8*Math.max(d.xmax-d.xmin,d.ymax-d.ymin));if(0===c)return k.vec3.add(b,a.origin,k.vec3.normalize(h.sv3d.get(),a.direction)),!0;var e=this.view.state.camera,f=Math.max(0,d.xmin-e.eye[0],e.eye[0]-d.xmax),d=Math.max(0,d.ymin-e.eye[1],e.eye[1]-d.ymax),e=c/Math.max(1,Math.pow(Math.max(0,Math.log(c/(Math.abs(e.relativeElevation)+Number.MIN_VALUE))),2)),e=Math.max(e,Math.min(Math.sqrt(f*f+d*d),c)),c=k.vec3.scale(h.sv3d.get(),a.direction,e/k.vec3.length(a.direction));
k.vec3.add(b,a.origin,c);return!0};c.prototype.computeIntersection=function(b,d,c,e,n){var m=this,q=this.view.state.camera,r=l.castRenderScreenPointArray3(h.sv3d.get());q.projectPoint(b.origin,r);var t=this.prepareFilters(d,a);e=e||new g(this.viewingMode);e.enable.storeAll=d&&d.allEnabled;e.enable.storeTerrainResults=t.filterLayerUid(f.TERRAIN_ID);e.enable.selectOpaqueTerrainOnly=!d||!("include"in d||"exclude"in d);var u=b.origin,p=k.vec3.add(h.sv3d.get(),b.origin,b.direction);e.intersect(t.layers,
u,p,r,q,this.intersectionTolerance,c,null);var B=(b=this.view.slicePlane)?f.sliceFilterPredicate(b):null;e.intersect(t.sliceableLayers,u,p,r,q,this.intersectionTolerance,c,B,!1);var D=d&&d.terrainLocationFeedbackEnabled||n;this.externalIntersectionHandlers.forEach(function(a){if(a.intersectionHandlerId===f.TERRAIN_ID){if(!D&&!t.filterLayerUid(f.TERRAIN_ID))return}else if(!t.filterLayerUid(a.intersectionHandlerId))return;a.intersect(e,a.slicePlaneEnabled?B:null,u,p,r)});d=h.sv3d.get();n&&e.results.terrain.getIntersectionPoint(d)&&
(n=this.view._stage.renderView.getDrapedRenderer(),b=h.sv3d.get(),this.view.renderCoordsHelper.fromRenderCoords(d,b,this.view.spatialReference),b[2]=this.view.basemapTerrain.getElevation(d)||0,n.intersect(e,b,t.filterRenderGeometry));e.sortResults();n=e.results.hud;if(n.hasIntersectionPoint){var C=l.castRenderScreenPointArray3(h.sv3d.get()),E=h.sv3d.get(),H=h.sv3d.get();this.unprojectHUDResultRay(n.center,C,E,H);d=k.vec3.distance(n.center,E)/k.vec3.distance(E,H)*.99;this.validateHUDIntersector.intersect(t.layers,
E,H,C,q,this.intersectionTolerance,c,null);this.validateHUDIntersector.intersect(t.sliceableLayers,E,H,C,q,this.intersectionTolerance,c,B,!1);this.externalIntersectionHandlers.forEach(function(a){t.filterLayerUid(a.intersectionHandlerId)&&a.intersect(m.validateHUDIntersector,a.slicePlaneEnabled?B:null,E,H,C)});c=this.validateHUDIntersector.results.min;if(null==c.dist||d<=c.dist)e.results.min.copyFrom(n),e.results.all.splice(0,0,n)}return e};c.prototype.prepareFilters=function(a,d){var c=[],e=[];this.layerProvider.forEachLayer(function(a){a.isPickable&&
(a.isSliceable?e:c).push(a)});d.include=a&&a.include;d.exclude=a&&a.exclude;d.layers.length=0;d.sliceableLayers.length=0;b(c,d.filterLayer,d.layers);b(e,d.filterLayer,d.sliceableLayers);return d};c.prototype.unprojectHUDResultRay=function(a,b,d,c){var e=this.view.state.camera;e.projectPoint(a,b);a=l.castRenderScreenPointArray3(h.sv3d.get());a[0]=b[0];a[1]=b[1];a[2]=0;e.unprojectPoint(a,d);a[2]=1;e.unprojectPoint(a,c)};return c}();c.SceneIntersectionHelper=p;var a={include:null,exclude:null,layers:[],
sliceableLayers:[],filterLayer:function(b){return a.filterLayerUid(b.apiLayerUid)},filterLayerUid:function(b){var d=a.include,c=a.exclude;return n.isNone(b)?null==d&&null==c:(null==d||d.has(b))&&(null==c||!c.has(b))},filterRenderGeometry:function(b){return a.filterLayerUid(b.data.layerUid)}}})},"esri/views/3d/support/CombinedElevationProvider":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/awaiterHelper ../../../core/tsSupport/generatorHelper ../../../core/Accessor ../../../core/Evented ../../../core/promiseUtils ../../../core/accessorSupport/decorators ../../../layers/graphics/dehydratedFeatures ../layers/graphics/ElevationQuery".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e){return function(d){function c(a){a=d.call(this)||this;a.providers={im:[],ground:[],scene:[]};a.handles=new Map;return a}n(c,d);c.prototype.getElevation=function(a,b){var d=-Infinity,c=!0;"scene"===b&&(d=this._updateElevation(d,this.providers.im,a,b),isFinite(d)&&(c=!1));c&&(d=this._updateElevation(d,this.providers.ground,a,b));"scene"===b&&(d=this._updateElevation(d,this.providers.scene,a,b));return isFinite(d)?d:null};c.prototype._updateElevation=function(a,b,d,
c){for(var e=0;e<b.length;e++){var f=b[e].getElevation(d,c);null!=f&&(a=Math.max(f,a))}return a};c.prototype.queryElevation=function(b,d,c,g){var h=this;void 0===c&&(c=0);this._elevationService||(this._elevationService=new e.ElevationQuery(this.view.spatialReference,function(){return h.view.map&&h.view.map.ground},{maximumAutoTileRequests:4}));var m=f.createResolver();(a.isPoint(b)?this._elevationService.queryElevation(b.x,b.y,d,c):this._elevationService.queryElevation(b[0],b[1],d,c)).then(function(a){"scene"===
g&&(a=h._updateElevation(a,h.providers.scene,b,g));m.resolve(isFinite(a)?a:null)}).catch(function(a){f.isAbortError(a)?m.reject(a):m.resolve(h.getElevation(b))});return m.promise};c.prototype.register=function(a,b){var d=this;this.handles.set(b,b.on("elevation-change",function(a){return d.emit("elevation-change",a)}));this.providers[a].push(b)};c.prototype.unregister=function(a){this.handles.has(a)&&(this.handles.get(a).remove(),this.handles.delete(a));for(var b=0,d=Object.keys(this.providers);b<
d.length;b++){var c=d[b],e=this.providers[c].indexOf(a);-1<e&&this.providers[c].splice(e,1)}};l([b.property({constructOnly:!0})],c.prototype,"view",void 0);l([b.property({readOnly:!0,aliasOf:"view.basemapTerrain.spatialReference"})],c.prototype,"spatialReference",void 0);return c=l([b.subclass("esri.views.3d.support.CombinedElevationProvider")],c)}(b.declared(h,g))})},"esri/views/3d/layers/graphics/ElevationQuery":function(){define("require exports ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/tsSupport/assignHelper ../../../../geometry ../../../../core/arrayUtils ../../../../core/asyncUtils ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/scheduling".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function a(a,b){this.spatialReference=a;this.view=b;this.point=new d.Point;this.point.spatialReference=a}a.prototype.getElevation=function(a,b,d){this.point.x=a;this.point.y=b;return this.view.elevationProvider.getElevation(this.point,d)};a.prototype.queryElevation=function(a,b,d,c,e){return l(this,void 0,void 0,function(){return n(this,function(f){this.point.x=a;this.point.y=b;return[2,this.view.elevationProvider.queryElevation(this.point,
d,c,e)]})})};return a}();c.ViewElevationProvider=p;p=function(){function c(a,b,d){this.spatialReference=a;this._getElevationQueryProvider=b;this._queries=[];this._isScheduled=!1;this._queryOptions=k({},d,{ignoreInvisibleLayers:!0})}c.prototype.queryElevation=function(a,d,c,e,f){void 0===e&&(e=0);return l(this,void 0,void 0,function(){var f=this;return n(this,function(g){return[2,b.create(function(g,m){var k={x:a,y:d,minDemResolution:e,result:{resolve:g,reject:m},signal:c};f._queries.push(k);b.onAbort(c,
function(){h.remove(f._queries,k);m(b.createAbortError())});f._scheduleDoQuery()})]})})};c.prototype._scheduleDoQuery=function(){var b=this;this._isScheduled||(a.schedule(function(){return b._doQuery()}),this._isScheduled=!0)};c.prototype._doQuery=function(){return l(this,void 0,void 0,function(){var a,c,e,h,l,p,w,v,y,z,A,B;return n(this,function(m){switch(m.label){case 0:this._isScheduled=!1;a=this._queries;this._queries=[];if(0===a.length)return[2];c=a.map(function(a){return[a.x,a.y]});e=a.reduce(function(a,
b){return Math.min(a,b.minDemResolution)},Infinity);h=new d.Multipoint({points:c,spatialReference:this.spatialReference});l=this._getElevationQueryProvider();if(!l)return a.forEach(function(a,b){return a.result.reject()}),[2];p=1<a.length&&a.some(function(a){return!!a.signal})?b.createAbortController():null;w=f.isSome(p)?p.signal:a[0].signal;f.isSome(p)&&(v=0,a.forEach(function(d){return b.onAbort(d.signal,function(){v++;d.result.reject(b.createAbortError());v===a.length&&p.abort()})}));y=k({},this._queryOptions,
{minDemResolution:e,signal:w});return[4,g.result(l.queryElevation(h,y))];case 1:z=m.sent();for(A=0;A<a.length;A++)B=a[A],f.isSome(B.signal)&&B.signal.aborted?B.result.reject(b.createAbortError()):!1===z.ok?B.result.reject(z.error):B.result.resolve(z.value.geometry.points[A][2]);return[2]}})})};return c}();c.ElevationQuery=p})},"esri/views/3d/support/DisplayQualityProfile":function(){define(["require","exports","../../../core/has"],function(p,c,n){function l(){var c=!!n("esri-mobile");return{low:{graphics3D:{maxTotalNumberOfFeatures:25E3,
maxTotalNumberOfPrimitives:85E4},sceneService:{"3dObject":{lodFactor:.2},point:{lodFactor:1},integratedMesh:{lodFactor:.6},pointCloud:{lodFactor:.5},uncompressedTextureDownsamplingEnabled:!0},tiledSurface:{lodBias:-1,angledSplitBias:.5},antialiasingEnabled:!1,memoryLimit:200,additionalCacheMemory:0,frameRate:0,maximumRenderResolution:null,maximumPixelRatio:1},medium:{graphics3D:{maxTotalNumberOfFeatures:5E4,maxTotalNumberOfPrimitives:17E5},sceneService:{"3dObject":{lodFactor:1},point:{lodFactor:1},
integratedMesh:{lodFactor:1},pointCloud:{lodFactor:1},uncompressedTextureDownsamplingEnabled:c},tiledSurface:{lodBias:0,angledSplitBias:1},antialiasingEnabled:!0,memoryLimit:c?400:500,additionalCacheMemory:c?0:100,frameRate:0,maximumRenderResolution:null,maximumPixelRatio:1},high:{graphics3D:{maxTotalNumberOfFeatures:5E4,maxTotalNumberOfPrimitives:17E5},sceneService:{"3dObject":{lodFactor:1},point:{lodFactor:1},integratedMesh:{lodFactor:1},pointCloud:{lodFactor:1},uncompressedTextureDownsamplingEnabled:!1},
tiledSurface:{lodBias:0,angledSplitBias:1},antialiasingEnabled:!0,memoryLimit:c?600:1E3,additionalCacheMemory:0,frameRate:0,maximumRenderResolution:c?null:4096,maximumPixelRatio:c?1:null}}}p=function(){function c(){}c.isValidProfile=function(d){return d in c.profiles};c.getDefaultProfile=function(){return n("esri-iPhone")?"low":"medium"};c.apply=function(d,h){d=c.profiles[d];h.graphics3D.maxTotalNumberOfFeatures=d.graphics3D.maxTotalNumberOfFeatures;h.graphics3D.maxTotalNumberOfPrimitives=d.graphics3D.maxTotalNumberOfPrimitives;
h.sceneService["3dObject"].lodFactor=d.sceneService["3dObject"].lodFactor;h.sceneService.point.lodFactor=d.sceneService.point.lodFactor;h.sceneService.integratedMesh.lodFactor=d.sceneService.integratedMesh.lodFactor;h.sceneService.pointCloud.lodFactor=d.sceneService.pointCloud.lodFactor;h.sceneService.uncompressedTextureDownsamplingEnabled=d.sceneService.uncompressedTextureDownsamplingEnabled;h.tiledSurface.lodBias=d.tiledSurface.lodBias;h.tiledSurface.angledSplitBias=d.tiledSurface.angledSplitBias;
h.antialiasingEnabled=d.antialiasingEnabled;h.memoryLimit=d.memoryLimit;h.additionalCacheMemory=d.additionalCacheMemory;h.frameRate=d.frameRate;h.maximumRenderResolution=d.maximumRenderResolution;h.maximumPixelRatio=d.maximumPixelRatio};c.debug={reset:function(){var d=l(),h;for(h in d)c.profiles[h]=d[h]}};return c}();(p||(p={})).profiles=l();return p})},"esri/views/3d/support/HighlightOptions":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Color ../../../core/Accessor ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/vec4f32".split(" "),
function(p,c,n,l,k,d,h,g){return function(d){function b(){var a=null!==d&&d.apply(this,arguments)||this;a.color=new k([0,255,255]);a.haloOpacity=1;a.fillOpacity=.25;return a}n(b,d);b.toEngineOptions=function(a){var b=k.toUnitRGBA(a.color);return{color:g.vec4f32.fromValues(b[0],b[1],b[2],b[3]),haloOpacity:a.haloOpacity,haloOpacityOccluded:.25*a.haloOpacity,fillOpacity:a.fillOpacity,fillOpacityOccluded:.25*a.fillOpacity}};l([h.property({type:k})],b.prototype,"color",void 0);l([h.property()],b.prototype,
"haloOpacity",void 0);l([h.property()],b.prototype,"fillOpacity",void 0);return b=l([h.subclass("esri.views.3d.support.HighlightOptions")],b)}(h.declared(d))})},"esri/views/3d/support/index":function(){define(["require","exports","./ResourceController","./MemoryController"],function(p,c,n,l){Object.defineProperty(c,"__esModule",{value:!0});c.newResourceController=n.newResourceController;c.newMemoryController=l.newMemoryController;p=c.ClientType||(c.ClientType={});p.TERRAIN="terrain";p.SCENE="scene";
p.SYMBOLOGY="symbology"})},"esri/views/3d/support/ResourceController":function(){define("require exports ../../../core/Handles ../../../core/now ../../../core/scheduling ./index ./MemoryController ./StreamDataLoader ../../support/Scheduler".split(" "),function(p,c,n,l,k,d,h,g,f){Object.defineProperty(c,"__esModule",{value:!0});c.newResourceController=function(a,d){void 0===d&&(d=l);return new b.ResourceController(a,d)};var b;(function(a){function b(a){var b={},c;for(c in d.ClientType)b[d.ClientType[c]]=
0;b[d.ClientType.TERRAIN]=15;b[d.ClientType.SCENE]=20;b[d.ClientType.SYMBOLOGY]=5;return new g.default(b,a)}var c=function(){function a(a,d){void 0===d&&(d=l);var c=this;this._view=a;this._streamDataLoader=this._memoryController=this._scheduler=null;this._lastTargetChangeTime=0;this._handles=new n;this._frameTask=null;this._lastTargetChangeTime=d();this._scheduler=f.newScheduler(d);this._memoryController=h.newMemoryController(this._view);this._streamDataLoader=b(this._scheduler);this._handles.add(this._view.watch("state.camera",
function(){return c._cameraChangedHandler()},!0));this._frameTask=k.addFrameTask({update:function(a){return c.frame(a)}})}a.prototype.destroy=function(){this._handles.remove();this._frameTask&&(this._frameTask.remove(),this._frameTask=null);this._streamDataLoader&&(this._streamDataLoader.destroy(),this._streamDataLoader=null);this._memoryController.destroy();this._scheduler=this._memoryController=null};Object.defineProperty(a.prototype,"updating",{get:function(){return this._memoryController.updating},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"scheduler",{get:function(){return this._scheduler},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"memoryController",{get:function(){return this._memoryController},enumerable:!0,configurable:!0});a.prototype.createStreamDataRequester=function(a){var b=this;return function(d,c,e){return b._streamDataLoader.request(d,c,a,e)}};Object.defineProperty(a.prototype,"hasPendingDownloads",{get:function(){return this._streamDataLoader&&
this._streamDataLoader.hasPendingDownloads},enumerable:!0,configurable:!0});a.prototype.frame=function(a){if(!this._view.suspended){if(this._view.stateManager&&(this._view.stateManager.step(a.deltaTime/1E3),!this._scheduler))return;this._scheduler.state=this.state;this._scheduler.updateBudget(a)?(this._memoryController.update(),this._scheduler.frame()):this._memoryController.updating&&this._memoryController.update()}};a.prototype._cameraChangedHandler=function(){this._lastTargetChangeTime=this._scheduler.now;
this._scheduler.state=this.state;this.memoryController.notifyViewChanged()};Object.defineProperty(a.prototype,"state",{get:function(){return this._scheduler.now-this._lastTargetChangeTime>q?2:this._view.animation?0:1},enumerable:!0,configurable:!0});return a}();a.ResourceController=c;var q=300})(b||(b={}))})},"esri/views/3d/support/MemoryController":function(){define("require exports ../../../core/Evented ../../../core/Logger ../../../core/MemCache ../layers/support/MemoryManagedLayerView".split(" "),
function(p,c,n,l,k,d){Object.defineProperty(c,"__esModule",{value:!0});var h=l.getLogger("esri.views.3d.support.MemoryController");c.newMemoryController=function(d){return new g(d)};var g=function(){function c(b){this._view=b;this.events=new n;this.minQuality=.1;this._maxMemory=500;this._additionalCacheMemory=100;this._quality=1;this._downscaleMemoryUsed=this._stableQuality=0;this._canFastRecover=!1;this._memoryPredicted=this._memoryUsed=0;this._cacheStorage=new k.MemCacheStorage;this._updating=!1}
c.prototype.destroy=function(){this.events=null};c.prototype.getMemCache=function(b,a){return new k.MemCache(b,this._cacheStorage,a)};Object.defineProperty(c.prototype,"maxMemory",{get:function(){return this._maxMemory},set:function(b){null!=b&&0<b&&(this._stableQuality=0,this._canFastRecover=!1,this._maxMemory<b&&this._updateQuality(1),this._maxMemory=b)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"additionalCacheMemory",{set:function(b){null!=b&&0<=b&&(this._additionalCacheMemory=
b)},enumerable:!0,configurable:!0});c.prototype.disableMemCache=function(){this._additionalCacheMemory=-4096};Object.defineProperty(c.prototype,"memoryFactor",{get:function(){return this._quality},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"updating",{get:function(){return this._updating},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"usedMemory",{get:function(){return this._memoryUsed},enumerable:!0,configurable:!0});c.prototype.notifyViewChanged=function(){this._stableQuality=
0};c.prototype.update=function(){this._updateMemory();if(!(0>=this._memoryPredicted)||this._updating){var b=this._layersUpdating();if(.6>this._memoryPredicted&&this._canFastRecover)this._stableQuality=this._downscaleMemoryUsed=0,this._canFastRecover=!1,this._updateQuality(1);else if(b){if(this._quality<=this.minQuality)return;if(1.1<this._memoryPredicted||1<this._memoryUsed)0<this._stableQuality?(this._downscaleMemoryUsed=0,this._updateQuality(this._stableQuality)):this._downscaleMemoryUsed<this._memoryUsed&&
(this._updateQuality(this._quality/1.3),this._downscaleMemoryUsed=this._memoryUsed)}else this._downscaleMemoryUsed=0,1<this._memoryUsed?(this._stableQuality=0,this._canFastRecover=!1,b=this._updateQuality(this._quality/1.3),this._downscaleMemoryUsed=this._memoryPredicted):this._stableQuality!==this._quality&&(.75>this._memoryUsed&&1>this._quality?(this._stableQuality=this._quality,b=this._updateQuality(this._quality+.1*(.75-this._memoryUsed+.1))):1>this._quality&&(this._canFastRecover=!0));this.updating!==
b&&(this._updating=b,this.events.emit("updating-changed",this.updating))}};c.prototype._updateQuality=function(b){b=Math.min(Math.max(b,this.minQuality),1);if(b===this._quality)return!1;this._quality=b;this.events.emit("quality-changed",this._quality);return!0};c.prototype._layersUpdating=function(){return this._view.allLayerViews.some(function(b){return!!b.updating})};c.prototype._updateMemory=function(){var b=this,a=0,c=0;this._view.basemapTerrain&&this._view.basemapTerrain.getUsedMemory&&(a+=this._view.basemapTerrain.getUsedMemory());
var f=this._view._stage&&this._view._stage.renderView&&this._view._stage.renderView.edgeView;f&&(a+=f.getUsedMemory());this._view.allLayerViews&&this._view.allLayerViews.forEach(function(e){if(d.isMemoryManagedLayerView(e)){var f=e.ignoresMemoryFactor()?b._quality:1;a+=e.getUsedMemory()*f;c+=e.getUnloadedMemory()*f}});var g=null==this._warnMemoryUsage||Math.round(10*a)!==Math.round(10*this._warnMemoryUsage),f=1048576*this._maxMemory;if(a>f&&g){this._warnMemoryUsage=a;var g=function(a){return(a/1048576).toLocaleString(void 0,
{maximumFractionDigits:1})+" MB"},k=Math.round(100*this._quality);h.warn("Memory Limit exceeded! Limit: "+g(f)+" Current: "+g(a)+" Projected: "+g(a+c)+" Quality: "+k+"%")}this._memoryUsed=a/f;this._memoryPredicted=(a+c)/f;this._cacheStorage.maxSize=Math.max(0,f-a+1048576*this._additionalCacheMemory);this.events.emit("memory-used",this._memoryUsed)};Object.defineProperty(c.prototype,"test",{get:function(){return{cacheStorage:this._cacheStorage}},enumerable:!0,configurable:!0});return c}()})},"esri/views/3d/support/StreamDataLoader":function(){define("require exports ../../../request ../../../core/arrayUtils ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/now ../../../core/promiseUtils ./AsyncQuotaRoundRobinQueue ../webgl-engine/lib/Util".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(a,d){var c=this;this.tasks=new Map;this.doneQueue=[];this.loadQueue=new b.AsyncQuotaRoundRobinQueue(this.startLoading.bind(this),this.doneLoadingCallback,this,a);d&&(this.taskHandle=d.registerTask(1,function(a){return c.update(a)},function(){return 0<c.doneQueue.length}))}c.prototype.destroy=function(){this.taskHandle&&(this.taskHandle.remove(),this.taskHandle=null);this.tasks.forEach(function(a){a.abortController&&
a.abortController.abort()});this.loadQueue.clear();this.tasks=this.doneQueue=this.loadQueue=null};c.prototype.request=function(a,b,d,c){var e=this,g=f.createResolver(),m=h.isSome(c)&&c.uid||a,k=this.createOrUpdateTask(a,b,d,m,g);f.onAbort(c,function(){return e.cancelRequest(k,g)});return g.promise};c.prototype.createTask=function(a,b,d,c,e){a={url:a,docType:b,clientType:d,key:c,result:null,status:1,resourceRequest:null,abortController:null,resolvers:[],_cancelledInQueue:!1,startTime:0,duration:0,
size:0};this.updateTask(a,e);this.tasks.set(c,a);this.loadQueue.push(a);return a};c.prototype.cancelRequest=function(a,b){l.removeUnordered(a.resolvers,b);b.reject(f.createAbortError());0===a.resolvers.length&&(2===a.status&&(a.status=4,this.loadQueue.workerCancelled(a),a.abortController.abort(),a.resourceRequest=null,a.abortController=null),a.status=4,this.tasks.delete(a.key))};Object.defineProperty(c.prototype,"hasPendingDownloads",{get:function(){return 0<this.tasks.size},enumerable:!0,configurable:!0});
c.prototype.taskKey=function(a,b,d){return a+":"+b+":"+d};c.prototype.updateTask=function(a,b){a.resolvers.push(b)};c.prototype.createOrUpdateTask=function(a,b,d,c,e){c=this.taskKey(c,b,d);var f=this.tasks.get(c);return f?(this.updateTask(f,e),f):this.createTask(a,b,d,c,e)};c.prototype.doneLoadingCallback=function(b,d){a.assert(2===b.status);b.status=3;this.taskHandle?this.doneQueue.push({task:b,err:d}):this.doneLoading(b,d)};c.prototype.update=function(a){for(;!a.done&&0<this.doneQueue.length;){var b=
this.doneQueue.shift();3!==b.task.status&&(b.err=b.err||f.createAbortError());this.doneLoading(b.task,b.err);a.madeProgress()}};c.prototype.doneLoading=function(a,b){for(var c=a.result instanceof HTMLImageElement?0:a.resolvers.length,e=0,g=a.resolvers;e<g.length;e++){var h=g[e];if(b)f.isAbortError(b)?h.reject(b):h.reject(new k("stream-data-loader:request-error","Failed to request resource at '"+a.url+"'. "+b,{url:a.url,error:b}));else{--c;var m=0>=c?a.result:d.clone(a.result);h.resolve(m)}}this.tasks.delete(a.key)};
c.prototype.startLoading=function(a,b){if(4===a.status)return!1;a.status=2;var d,c;switch(a.docType){case "binary":c="array-buffer";d=0;break;case "image":c="image";break;default:c="json"}a.startTime=g();a.abortController=f.createAbortController();a.resourceRequest=n(a.url,{responseType:c,timeout:d,signal:a.abortController.signal});a.resourceRequest.then(function(d){a.duration=g()-a.startTime;a.size="binary"===a.docType?d.data.byteLength:0;a.result=d.data;a.abortController=null;b(a)},function(d){2===
a.status&&b(a,d)});return!0};Object.defineProperty(c.prototype,"test",{get:function(){return{loadQueue:this.loadQueue}},enumerable:!0,configurable:!0});return c}();c.StreamDataLoader=p;c.default=p})},"esri/views/3d/support/AsyncQuotaRoundRobinQueue":function(){define(["require","exports","../../../core/arrayUtils","../webgl-engine/lib/Util"],function(p,c,n,l){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(d,c,g,f){this.workerFunc=d;this.robin=0;this.type2id={};this.tasks=
[];this.typeNumWorkers=[];this.typeWorkerQuota=[];this.typeStatistics=[];this.numTypes=this.maxTotalNumWorkers=this.totalNumWorkers=0;for(var b in f)this.type2id[b]=this.tasks.length,this.tasks.push([]),this.typeNumWorkers.push(0),this.typeStatistics.push({requests:0,size:0,duration:0,speed:0}),this.typeWorkerQuota.push(f[b]),this.maxTotalNumWorkers+=f[b];this.numTypes=this.tasks.length;var a=this;this.taskCallback=function(b){b._cancelledInQueue||(c.apply(g,arguments),a.taskFinished(b))}}c.prototype.setWorkerQuota=
function(d){l.assert(n.equals(Object.keys(this.typeWorkerAllocation),Object.keys(d)));this.typeWorkerAllocation=d;this.maxTotalNumWorkers=0;for(var c in d)this.typeWorkerQuota[this.type2id[c]]=d[c],this.maxTotalNumWorkers+=d[c]};c.prototype.push=function(d){var c=this.type2id[d.clientType];this.totalNumWorkers<this.maxTotalNumWorkers?(this.typeNumWorkers[c]++,this.totalNumWorkers++,this.workerFunc(d,this.taskCallback)):this.tasks[c].push(d)};c.prototype._getStatsForType=function(d){d=this.type2id[d];
return{quota:this.typeWorkerQuota[d],workers:this.typeNumWorkers[d],queueSize:this.tasks[d].length,requestStats:this.typeStatistics[d]}};c.prototype.removeTasks=function(d,c){for(var g=[],f=0,b=this.tasks[this.type2id[c]];f<b.length;f++){var a=b[f];-1===d.indexOf(a)&&g.push(a)}this.tasks[this.type2id[c]]=g};c.prototype.workerCancelled=function(d){this.taskFinished(d);d._cancelledInQueue=!0};c.prototype.clear=function(){for(var d=0;d<this.tasks.length;d++)this.tasks[d]=[]};c.prototype.taskFinished=
function(d){var c=this.type2id[d.clientType];this.typeNumWorkers[c]--;this.totalNumWorkers--;this.typeStatistics[c].requests++;this.typeStatistics[c].size+=d.size||0;this.typeStatistics[c].duration+=d.duration||0;this.typeStatistics[c].speed=0<this.typeStatistics[c].duration?this.typeStatistics[c].size/this.typeStatistics[c].duration:0;l.assert(0<=this.typeNumWorkers[c]);this.next()};c.prototype.next=function(){var d=this.robin,c=!1;do this.typeNumWorkers[d]<this.typeWorkerQuota[d]&&this.processQueue(d)&&
(c=!0),d=(d+1)%this.numTypes;while(!c&&d!==this.robin);if(!c){do this.processQueue(d)&&(c=!0),d=(d+1)%this.numTypes;while(!c&&d!==this.robin)}this.robin=d};c.prototype.processQueue=function(d){for(;0<this.tasks[d].length;)if(this.workerFunc(this.tasks[d].shift(),this.taskCallback))return this.typeNumWorkers[d]++,this.totalNumWorkers++,!0;return!1};Object.defineProperty(c.prototype,"test",{get:function(){var d=this;return{set workerFunc(c){d.workerFunc=c}}},enumerable:!0,configurable:!0});return c}();
c.AsyncQuotaRoundRobinQueue=p})},"esri/views/3d/support/MapCoordsHelper":function(){define("require exports ../../../geometry ../../../core/Error ../../../core/promiseUtils ../../../core/unitUtils ../../../portal/support/geometryServiceUtils ../../../tasks/support/ProjectParameters".split(" "),function(p,c,n,l,k,d,h,g){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(b,a,c){void 0===c&&(c=null);var e=this;this.spatialReference=a;this.unitInMeters=d.getMetersPerUnitForSR(this.spatialReference);
(this.geometryService=c)||h.create(b&&b.get("portalItem")).then(function(a){e.geometryService=a}).catch(function(){})}c.prototype.toGeographic=function(b){var a=this,d=!0;if(!this.geometryService)return k.reject(new l("mapcoordshelper:missing-geometry-service","Must specify geometryService in esri/config"));Array.isArray(b[0])&&"number"!==typeof b[0]||(b=[b],d=!1);b=b.map(function(b){return b instanceof n.Point?b:new n.Point(b,a.spatialReference)});b=new g({geometries:b,outSpatialReference:n.SpatialReference.WGS84});
return this.geometryService.project(b).then(function(a){a=a.map(function(a){if("point"===a.type)return[a.x,a.y]});return d?a:a[0]})};c.prototype.canProject=function(){return!!this.geometryService};return c}();c.MapCoordsHelper=p;c.default=p})},"esri/portal/support/geometryServiceUtils":function(){define("require exports ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../config ../../core/Error ../Portal ../PortalItem ../../tasks/GeometryService ../../tasks/support/ProjectParameters @dojo/framework/shim/Promise".split(" "),
function(p,c,n,l,k,d,h,g,f,b){function a(a,b){void 0===a&&(a=null);return l(this,void 0,void 0,function(){var c;return n(this,function(e){switch(e.label){case 0:if(k.geometryServiceUrl)return[2,new f({url:k.geometryServiceUrl})];if(!a)throw new d("internal:geometry-service-url-not-configured");a.isInstanceOf(g)?c=a.portal||h.getDefault():a.isInstanceOf(h)&&(c=a);return[4,c.load({signal:b})];case 1:e.sent();if(c.helperServices&&c.helperServices.geometry&&c.helperServices.geometry.url)return[2,new f({url:c.helperServices.geometry.url})];
throw new d("internal:geometry-service-url-not-configured");}})})}Object.defineProperty(c,"__esModule",{value:!0});c.create=a;c.projectGeometry=function(c,f,g,h){void 0===g&&(g=null);return l(this,void 0,void 0,function(){var e,k,m;return n(this,function(l){switch(l.label){case 0:return[4,a(g,h)];case 1:return e=l.sent(),k=new b,k.geometries=[c],k.outSpatialReference=f,[4,e.project(k,{signal:h})];case 2:if((m=l.sent())&&Array.isArray(m)&&1===m.length)return[2,m[0]];throw new d("internal:geometry-service-projection-failed");
}})})}})},"esri/views/3d/support/QualitySettings":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(p,c,n,l,k,d){var h=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.minTotalNumberOfFeatures=2E3;b.maxTotalNumberOfFeatures=5E4;b.maxTotalNumberOfPrimitives=17E5;return b}n(b,a);l([d.property()],b.prototype,"minTotalNumberOfFeatures",
void 0);l([d.property()],b.prototype,"maxTotalNumberOfFeatures",void 0);l([d.property()],b.prototype,"maxTotalNumberOfPrimitives",void 0);return b=l([d.subclass("esri.views.3d.support.QualitySettings.Graphics3DSettings")],b)}(d.declared(k)),g=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.lodFactor=1;return b}n(b,a);l([d.property()],b.prototype,"lodFactor",void 0);return b=l([d.subclass("esri.views.3d.support.QualitySettings.LoDFactorSettings")],b)}(d.declared(k)),f=function(a){function b(){var b=
null!==a&&a.apply(this,arguments)||this;b["3dObject"]=new g;b.point=new g;b.integratedMesh=new g;b.pointCloud=new g;b.uncompressedTextureDownsamplingEnabled=!1;return b}n(b,a);l([d.property({type:g})],b.prototype,"3dObject",void 0);l([d.property({type:g})],b.prototype,"point",void 0);l([d.property({type:g})],b.prototype,"integratedMesh",void 0);l([d.property({type:g})],b.prototype,"pointCloud",void 0);l([d.property()],b.prototype,"uncompressedTextureDownsamplingEnabled",void 0);return b=l([d.subclass("esri.views.3d.support.QualitySettings.SceneServiceSettings")],
b)}(d.declared(k)),b=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.lodBias=0;b.angledSplitBias=1;return b}n(b,a);l([d.property()],b.prototype,"lodBias",void 0);l([d.property()],b.prototype,"angledSplitBias",void 0);return b=l([d.subclass("esri.views.3d.support.QualitySettings.TiledSurfaceSettings")],b)}(d.declared(k));return function(a){function c(){var d=null!==a&&a.apply(this,arguments)||this;d.graphics3D=new h;d.sceneService=new f;d.tiledSurface=new b;d.antialiasingEnabled=
!0;return d}n(c,a);l([d.property({type:h})],c.prototype,"graphics3D",void 0);l([d.property({type:f})],c.prototype,"sceneService",void 0);l([d.property({type:b})],c.prototype,"tiledSurface",void 0);l([d.property()],c.prototype,"antialiasingEnabled",void 0);l([d.property()],c.prototype,"memoryLimit",void 0);l([d.property()],c.prototype,"additionalCacheMemory",void 0);l([d.property()],c.prototype,"frameRate",void 0);l([d.property()],c.prototype,"maximumRenderResolution",void 0);l([d.property()],c.prototype,
"maximumPixelRatio",void 0);return c=l([d.subclass("esri.views.3d.support.QualitySettings.QualitySettings")],c)}(d.declared(k))})},"esri/views/3d/support/RenderCoordsHelper":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/compilerUtils ../../../core/unitUtils ../../../core/libs/gl-matrix-2/mat4 ../../../core/libs/gl-matrix-2/vec3 ../../../geometry/SpatialReference ../../../layers/graphics/dehydratedFeatures ./earthUtils ./geometryUtils ./projectionUtils ./stack ./geometryUtils/coordinateSystem".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(a,b,d,c){this.type=a;this.spatialReference=b;this.unitInMeters=d;this.coordinateSystem=c;this.tmpCoordinateSystem=q.create(c)}Object.defineProperty(c.prototype,"extent",{set:function(a){a&&q.setExtent(this.coordinateSystem,a,this.coordinateSystem)},enumerable:!0,configurable:!0});c.prototype.getAltitude=function(a){return q.altitudeAt(this.coordinateSystem,a)};c.prototype.setAltitude=function(a,
b){q.setAltitudeAt(this.coordinateSystem,b,a,b)};c.prototype.setAltitudeOfTransformation=function(a,b){q.setAltitudeOfTransformation(this.coordinateSystem,b,a,b)};c.prototype.worldUpAtPosition=function(a,b){return q.normalAt(this.coordinateSystem,a,b)};c.prototype.worldBasisAtPosition=function(a,b,d){return q.axisAt(this.coordinateSystem,a,b,d)};c.prototype.basisMatrixAtPosition=function(a,b){var c=this.worldBasisAtPosition(a,0,m.sv3d.get()),e=this.worldBasisAtPosition(a,1,m.sv3d.get());a=this.worldBasisAtPosition(a,
2,m.sv3d.get());d.mat4.set(b,c[0],c[1],c[2],0,e[0],e[1],e[2],0,a[0],a[1],a[2],0,0,0,0,1);return b};c.prototype.intersectManifoldClosestSilhouette=function(a,b,d){q.elevate(this.coordinateSystem,b,this.tmpCoordinateSystem);q.intersectRayClosestSilhouette(this.tmpCoordinateSystem,a,d);return d};c.prototype.intersectManifold=function(a,b,d){q.elevate(this.coordinateSystem,b,this.tmpCoordinateSystem);b=m.sv3d.get();return q.intersectRay(this.tmpCoordinateSystem,a,b)?(h.vec3.copy(d,b),!0):!1};c.prototype.intersectInfiniteManifold=
function(b,d,c){if("global"===this.type)return this.intersectManifold(b,d,c);q.elevate(this.coordinateSystem,d,this.tmpCoordinateSystem);d=this.tmpCoordinateSystem.value;var e=m.sv3d.get();return a.plane.intersectRay(d.plane,b,e)?(h.vec3.copy(c,e),!0):!1};c.prototype.toRenderCoords=function(a,b,d){return f.isPoint(a)?e.pointToVector(a,b,this.spatialReference):e.vectorToVector(a,b,d,this.spatialReference)};c.prototype.fromRenderCoords=function(a,b,d){return f.isPoint(b)?e.vectorToPoint(a,this.spatialReference,
b,d):b instanceof g?e.vectorToPoint(a,this.spatialReference,b):e.vectorToVector(a,this.spatialReference,b,d)};c.createGlobal=function(d){void 0===d&&(d=e.SphericalECEFSpatialReference);var f=q.fromValues(a.sphere,a.sphere.fromValues(b.earthRadius,[0,0,0]));return new c("global",d,1,f)};c.createLocal=function(b){var d=q.fromValues(a.boundedPlane,a.boundedPlane.fromValues([0,0,0],[u,0,0],[0,u,0])),e=k.getMetersPerUnitForSR(b);return new c("local",b,e,d)};c.createMode=function(a,b){switch(a){case "local":return c.createLocal(b);
case "global":return c.createGlobal();default:l.neverReached(a)}};return c}();c.RenderCoordsHelper=p;var u=Math.pow(2,50)})},"esri/views/3d/support/SharedSymbolResources":function(){define("require exports ../../../core/arrayUtils ../../../core/Handles ./index ./TextureCollection ../webgl-engine/lib/screenSizePerspectiveUtils".split(" "),function(p,c,n,l,k,d,h){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(b){this.streamDataRequester=this.textures=null;this.graphicsOwners=
[];this.screenSizePerspectiveHandles=null;var a=k.ClientType.SYMBOLOGY;this.viewState=b.viewState;this.stage=b.stage;this.pointsOfInterest=b.pointsOfInterest;this.resourceController=b.resourceController;this.streamDataRequester=this.resourceController.createStreamDataRequester(a);this.textures=new d.default(this.streamDataRequester,b.stage,{preMultiplyAlpha:!0,wrap:{s:33071,t:33071}});this.screenSizePerspectiveSettings=h.getSettings(b.viewingMode);this.screenSizePerspectiveSettingsLabels=h.getLabelSettings(b.viewingMode)}
c.prototype.destroy=function(){this.textures.destroy();this.streamDataRequester=this.textures=null};c.prototype.addGraphicsOwner=function(b){var a=this;if(!b)return{remove:function(){}};this.graphicsOwners.push(b);var d="layer"in b?b.watch("layer.screenSizePerspectiveEnabled",function(){return a.updateScreenSizePerspectiveEnabled()}):null;this.updateScreenSizePerspectiveEnabled();return{remove:function(){d&&(d.remove(),n.removeUnordered(a.graphicsOwners,b),a.updateScreenSizePerspectiveEnabled())}}};
c.prototype.updateScreenSizePerspectiveEnabled=function(){var b=this,a=this.graphicsOwners.some(function(a){return!0===a.get("layer.screenSizePerspectiveEnabled")});a&&!this.screenSizePerspectiveHandles?(this.screenSizePerspectiveHandles=new l,a=function(){return b.updateScreenSizePerspectiveSettings()},this.screenSizePerspectiveHandles.add([this.pointsOfInterest.centerOnSurfaceInfrequent.watch("distance",a,!0),this.viewState.events.on("camera-projection-changed",a)]),this.updateScreenSizePerspectiveSettings()):
!a&&this.screenSizePerspectiveHandles&&(this.screenSizePerspectiveHandles.destroy(),this.screenSizePerspectiveHandles=null)};c.prototype.updateScreenSizePerspectiveSettings=function(){g.distance=this.pointsOfInterest.centerOnSurfaceInfrequent.distance;g.fovY=this.viewState.camera.fovY;this.screenSizePerspectiveSettings.update(g);this.screenSizePerspectiveSettingsLabels.update(g);this.stage.renderView.setNeedsRender()};return c}();c.SharedSymbolResources=p;var g={distance:0,fovY:0};c.default=p})},
"esri/views/3d/support/TextureCollection":function(){define("require exports ../../../core/tsSupport/assignHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/maybe ../../../core/promiseUtils ../../../core/scheduling ../../../core/urlUtils ../webgl-engine/Stage ../webgl-engine/lib/Texture".split(" "),function(p,c,n,l,k,d,h,g,f,b,a){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(a,b,d,c){void 0===c&&(c=g.schedule);this._streamDataRequester=
a;this._stage=b;this._textureOptions=d;this._schedule=c;this._textureRequests=new Map}c.prototype.destroy=function(){var a=this;this._textureRequests.forEach(function(b){return a.releaseTextureRequest(b)});this._textureRequests=null};c.prototype.fromUrl=function(a,b,c){return k(this,void 0,void 0,function(){var e,f,g,k,m,n=this;return l(this,function(l){h.throwIfAborted(c);e=d.isSome(c)&&c.signal;f=this.makeUid(a,b);g=this._textureRequests.get(f);g||(k=h.createAbortController(),m=this._streamDataRequester(a,
"image",{uid:f,signal:k.signal}),g={referenceCount:0,texture:null,textureAsync:null,abortController:k},this._textureRequests.set(f,g),g.textureAsync=m.then(function(d){d=n.createTexture(a,d,b);g.texture=d;g.abortController=null;n.addToStage(d);return{uid:f,texture:d}},function(a){g.abortController=null;throw a;}));g.referenceCount++;return[2,h.create(function(a,b){h.onAbort(e,function(){b(h.createAbortError())});g.textureAsync.then(a,b)}).catch(function(a){n.release(f);throw a;})]})})};c.prototype.fromData=
function(a,b){a=this.makeUid(a);var d=this._textureRequests.get(a);d||(d={referenceCount:0,texture:b(),textureAsync:null,abortController:null},this.addToStage(d.texture),this._textureRequests.set(a,d));d.referenceCount++;return{uid:a,texture:d.texture}};c.prototype.release=function(a){var b=this;if(this._textureRequests){var d=this._textureRequests.get(a);d?(1>d.referenceCount&&console.warn("TextureCollection: reference count is \x3c 1 for "+a),d.referenceCount--,1>d.referenceCount&&this._schedule(function(){return b.releaseNow(a)})):
console.warn("TextureCollection: texture doesn't exist: '"+a+"'")}};Object.defineProperty(c.prototype,"test",{get:function(){return{textureRequests:this._textureRequests}},enumerable:!0,configurable:!0});c.prototype.releaseNow=function(a){if(this._textureRequests){var b=this._textureRequests.get(a);!b||0<b.referenceCount||(this.releaseTextureRequest(b),this._textureRequests.delete(a))}};c.prototype.releaseTextureRequest=function(a){a.texture?this.removeFromStage(a.texture):a.abortController&&(a.abortController.abort(),
a.abortController=null)};c.prototype.createTexture=function(b,d,c){f.isSVG(b)&&(c||0===d.width&&0===d.height)&&(b=d.width?d.height/d.width:1,c=c||64,1<b?(d.width=Math.round(c/b),d.height=c):(d.width=c,d.height=Math.round(c*b)));c=n({},this._textureOptions,{width:d.width,height:d.height,powerOfTwoResizeMode:2});return new a(d,"symbol",c)};c.prototype.addToStage=function(a){this._stage.add(b.ModelContentType.TEXTURE,a)};c.prototype.removeFromStage=function(a){this._stage.remove(b.ModelContentType.TEXTURE,
a.id)};c.prototype.makeUid=function(a,b){return null!=b?a+"."+b+"px":a};return c}();c.TextureCollection=p;c.default=p})},"esri/views/3d/support/pointsOfInterest/PointsOfInterest":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/tsSupport/assignHelper @dojo/framework/shim/Set ../../../../core/Accessor ../../../../core/Handles ../../../../core/accessorSupport/decorators ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/Point ../PropertiesPool ./CameraOnSurface ./CenterOnSurface ./ContentGeometryUpdates ./disposeMembers ./Focus ./StableSurfaceCenter ./SurfaceGeometryUpdates ../../webgl-engine/lib/Intersector ../../webgl-engine/lib/intersectorUtils".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z){Object.defineProperty(c,"__esModule",{value:!0});var A=Array;p=function(c){function h(b){b=c.call(this,b)||this;b.handles=new g;b.surfaceAltitudeAtCenter=0;b.surfaceAltitudeAtCenterDirty=!0;b.surfaceAltitudeAtCenterWithContent=0;b.surfaceAltitudeAtCenterWithContentDirty=!0;b.propertiesPool=new m.default({pointOfView:e,renderPointOfView:A},b);b.renderPointOfView=a.vec3f64.create();return b}n(h,c);h.prototype.initialize=function(){var a=this,b=this.view,
c=b.state,e=b.basemapTerrain,f=b.renderCoordsHelper,b=b.map;this.surfaceIntersector=new y(c.mode);this.surfaceIntersector.enable.backfacesTerrain=c.isGlobal?!1:!0;this.surfaceIntersector.enable.invisibleTerrain=!1;this.contentIntersector=new y(c.mode);this.contentIntersectorOptions={exclude:new d.Set([z.TERRAIN_ID])};var g=this.estimateSurfaceAltitudeAtCenter.bind(this),h={state:c,scheduler:this.view.resourceController.scheduler,surface:e,renderCoordsHelper:f};this._set("centerOnSurfaceInfrequent",
new u.default(k({},h,{priority:30,estimateSurfaceAltitudeAtCenter:g})));this._set("centerOnSurfaceFrequent",new u.default(k({},h,{priority:6,estimateSurfaceAltitudeAtCenter:g})));this._set("centerOnContent",new u.default(k({},h,{priority:6,estimateSurfaceAltitudeAtCenter:this.estimateSurfaceAltitudeAtCenterWithContent.bind(this)})));this._set("cameraOnSurface",new q.default(k({},h,{priority:30,map:b})));this._set("surfaceGeometryUpdates",new v.default(k({},h,{centerOnSurfaces:[this.centerOnSurfaceFrequent,
this.centerOnContent,this.centerOnSurfaceInfrequent]})));this._set("contentGeometryUpdates",new t.default({contentLayerViews:this.view.allLayerViews,renderCoordsHelper:f}));this._set("surfaceOrigin",new w.default({view:this.view}));this._set("focus",new x.default({state:c,surface:e,renderCoordsHelper:f,centerOnSurface:this.centerOnSurfaceFrequent}));this.handles.add([c.watch("camera",function(b){return a.cameraChanged(b)},!0),e.watch("extent",function(){return a.updateCenterPointsOfInterest()}),this.surfaceGeometryUpdates.events.on("request-update",
function(){return a.updateCenterPointsOfInterest()}),this.contentGeometryUpdates.events.on("request-update",function(){return a.updateCenterOnContent()})]);this.cameraChanged(this.view.state.camera);this.centerOnContent.update();this.centerOnSurfaceFrequent.update();this.centerOnSurfaceInfrequent.update();this.cameraOnSurface.update()};h.prototype.destroy=function(){r.default(this,"handles","centerOnSurfaceInfrequent","centerOnSurfaceFrequent","cameraOnSurface","centerOnContent","surfaceOrigin","focus",
"propertiesPool")};Object.defineProperty(h.prototype,"pointOfView",{get:function(){var a=this.propertiesPool.get("pointOfView");this.view.renderCoordsHelper.fromRenderCoords(this.renderPointOfView,a,this.view.state.spatialReference);return a},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"updating",{get:function(){return this.surfaceGeometryUpdates.updating||this.centerOnContent.updating||this.centerOnSurfaceInfrequent.updating||this.centerOnSurfaceFrequent.updating||this.cameraOnSurface.updating||
this.focus.updating},enumerable:!0,configurable:!0});h.prototype.estimateSurfaceAltitudeAtCenterWithContent=function(){if(!this.surfaceAltitudeAtCenterWithContentDirty)return this.surfaceAltitudeAtCenterWithContent;this.surfaceAltitudeAtCenterWithContentDirty=!1;this.view.sceneIntersectionHelper.intersectRay(this.view.state.camera.ray,B,this.contentIntersectorOptions,this.contentIntersector)?this.surfaceAltitudeAtCenterWithContent=this.view.renderCoordsHelper.getAltitude(B):this.surfaceAltitudeAtCenterWithContent=
this.estimateSurfaceAltitudeAtCenter();return this.surfaceAltitudeAtCenterWithContent};h.prototype.estimateSurfaceAltitudeAtCenter=function(){if(!this.view.basemapTerrain)return 0;if(!this.surfaceAltitudeAtCenterDirty)return this.surfaceAltitudeAtCenter;this.surfaceAltitudeAtCenterDirty=!1;var a=this.view.state.camera;this.surfaceIntersector.intersect(null,a.eye,a.center,null,a,null,!1);this.view.basemapTerrain.intersect(this.surfaceIntersector,null,a.eye,a.center);this.surfaceIntersector.results.min.getIntersectionPoint(B)&&
(this.surfaceAltitudeAtCenter=this.view.renderCoordsHelper.getAltitude(B));return this.surfaceAltitudeAtCenter};h.prototype.cameraChanged=function(a){this.updateCenterPointsOfInterest();a=a.eye;b.vec3.equals(this.renderPointOfView,a)||this._set("renderPointOfView",b.vec3.copy(this.propertiesPool.get("renderPointOfView"),a))};h.prototype.updateCenterPointsOfInterest=function(){this.surfaceAltitudeAtCenterWithContentDirty=this.surfaceAltitudeAtCenterDirty=!0;this.centerOnSurfaceFrequent.updateRenderLocation();
this.centerOnSurfaceInfrequent.updateRenderLocation();this.cameraOnSurface.updateRenderLocation();this.focus.updateRenderLocation();this.centerOnContent.updateRenderLocation()};h.prototype.updateCenterOnContent=function(){this.surfaceAltitudeAtCenterWithContentDirty=!0;this.centerOnContent.updateRenderLocation()};Object.defineProperty(h.prototype,"test",{get:function(){var a=this;return{update:function(){a.surfaceGeometryUpdates.update();a.centerOnSurfaceFrequent.update();a.centerOnSurfaceInfrequent.update()},
surfaceGeometryUpdates:this.surfaceGeometryUpdates}},enumerable:!0,configurable:!0});l([f.property({readOnly:!0})],h.prototype,"centerOnContent",void 0);l([f.property({readOnly:!0})],h.prototype,"centerOnSurfaceFrequent",void 0);l([f.property({readOnly:!0})],h.prototype,"centerOnSurfaceInfrequent",void 0);l([f.property({readOnly:!0})],h.prototype,"cameraOnSurface",void 0);l([f.property({readOnly:!0})],h.prototype,"focus",void 0);l([f.property({readOnly:!0})],h.prototype,"surfaceOrigin",void 0);l([f.property({readOnly:!0})],
h.prototype,"contentGeometryUpdates",void 0);l([f.property({readOnly:!0,dependsOn:["renderPointOfView"]})],h.prototype,"pointOfView",null);l([f.property({readOnly:!0})],h.prototype,"renderPointOfView",void 0);l([f.property({readOnly:!0})],h.prototype,"surfaceGeometryUpdates",void 0);l([f.property({constructOnly:!0})],h.prototype,"view",void 0);l([f.property({readOnly:!0,dependsOn:"surfaceGeometryUpdates.updating centerOnContent.updating centerOnSurfaceInfrequent.updating centerOnSurfaceFrequent.updating cameraOnSurface.updating focus.updating".split(" ")})],
h.prototype,"updating",null);return h=l([f.subclass("esri.views.3d.support.PointsOfInterest")],h)}(f.declared(h));c.PointsOfInterest=p;var B=a.vec3f64.create();c.default=p})},"esri/views/3d/support/pointsOfInterest/CameraOnSurface":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/promiseUtils ../../../../core/watchUtils ../../../../core/accessorSupport/decorators ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/Point ../PropertiesPool ./PointOfInterest".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e){Object.defineProperty(c,"__esModule",{value:!0});var m=Array;p=function(c){function e(d){d=c.call(this,d)||this;d._dirty=!1;d._propertiesPool=new a.default({location:b,renderLocation:m},d);d._estimatedSurfaceAltitude=0;d._pendingElevationQueryController=null;d.renderLocation=f.vec3f64.create();return d}n(e,c);e.prototype.initialize=function(){var a=this;this.handles.add(this.scheduler.registerTask(this.priority,function(){return a._measureSurfaceAltitude()},function(){return a._needsUpdate()}));
this._measureSurfaceAltitude();if(this.map){var b=function(){return a._setDirty()};this.handles.add([d.on(this.map,"ground.layers","change",b,b,b)])}};e.prototype.destroy=function(){this._cancelPendingRequest();this._propertiesPool.destroy();this._propertiesPool=null};Object.defineProperty(e.prototype,"location",{get:function(){var a=this._propertiesPool.get("location");this.renderCoordsHelper.fromRenderCoords(this.renderLocation,a,this.state.spatialReference);return a},enumerable:!0,configurable:!0});
Object.defineProperty(e.prototype,"updating",{get:function(){return this._dirty||null!=this._pendingElevationQueryController},enumerable:!0,configurable:!0});e.prototype.updateRenderLocation=function(){this._setDirty();this._updateRenderLocation()};e.prototype.update=function(){this._measureSurfaceAltitude();this._updateRenderLocation()};e.prototype._setDirty=function(){this._dirty||(this._dirty=!0,this.notifyChange("updating"))};e.prototype._needsUpdate=function(){return!this._pendingElevationQueryController&&
this._dirty};e.prototype._cancelPendingRequest=function(){var a=this._pendingElevationQueryController;a&&(this._pendingElevationQueryController=null,a.abort(),this.notifyChange("updating"))};e.prototype._measureSurfaceAltitude=function(){var a=this;this._cancelPendingRequest();this._dirty=!1;this.notifyChange("updating");if(this.map&&this.map.ground){this.renderCoordsHelper.fromRenderCoords(this.state.camera.eye,u,this.state.spatialReference);var b=k.createAbortController();this.map.ground.queryElevation(u,
{signal:b.signal}).then(function(b){return a._updateSurfaceAltitude(b.geometry.z)}).catch(function(b){k.isAbortError(b)||a._updateSurfaceAltitude(0)}).catch(function(){}).then(function(){a._pendingElevationQueryController===b&&(a._pendingElevationQueryController=null,a.notifyChange("updating"));b=null});this._pendingElevationQueryController=b}else this._updateSurfaceAltitude(0)};e.prototype._updateSurfaceAltitude=function(a){this._estimatedSurfaceAltitude!==a&&(this._estimatedSurfaceAltitude=a,this._updateRenderLocation())};
e.prototype._updateRenderLocation=function(){g.vec3.copy(q,this.state.camera.eye);this.renderCoordsHelper.setAltitude(this._estimatedSurfaceAltitude,q);g.vec3.equals(this._get("renderLocation"),q)||this._set("renderLocation",g.vec3.copy(this._propertiesPool.get("renderLocation"),q))};l([h.property({constructOnly:!0})],e.prototype,"scheduler",void 0);l([h.property({constructOnly:!0})],e.prototype,"priority",void 0);l([h.property({readOnly:!0,dependsOn:["renderLocation"]})],e.prototype,"location",null);
l([h.property({constructOnly:!0})],e.prototype,"map",void 0);l([h.property({readOnly:!0})],e.prototype,"renderLocation",void 0);l([h.property({readOnly:!0})],e.prototype,"updating",null);return e=l([h.subclass("esri.views.3d.support.CameraOnSurface")],e)}(h.declared(e.PointOfInterest));c.CameraOnSurface=p;var q=f.vec3f64.create(),u=new b;c.default=p})},"esri/views/3d/support/pointsOfInterest/PointOfInterest":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/Accessor ../../../../core/Handles ../../../../core/accessorSupport/decorators ./disposeMembers".split(" "),
function(p,c,n,l,k,d,h,g){Object.defineProperty(c,"__esModule",{value:!0});p=function(c){function b(a){a=c.call(this)||this;a.handles=new d;return a}n(b,c);b.prototype.destroy=function(){g.default(this,"handles")};l([h.property({constructOnly:!0})],b.prototype,"renderCoordsHelper",void 0);l([h.property({constructOnly:!0})],b.prototype,"surface",void 0);l([h.property({constructOnly:!0})],b.prototype,"state",void 0);return b=l([h.subclass("esri.views.3d.support.PointOfInterest")],b)}(h.declared(k));
c.PointOfInterest=p;c.default=p})},"esri/views/3d/support/pointsOfInterest/disposeMembers":function(){define(["require","exports","../../../../core/Accessor"],function(p,c,n){function l(c){for(var d=[],h=1;h<arguments.length;h++)d[h-1]=arguments[h];if(c instanceof n&&c.destroyed)try{throw Error("instance is already destroyed");}catch(b){console.warn(b.stack)}else for(h=0;h<d.length;h++){var g=d[h];if(!(g in c))throw Error("Property '"+g+"' does not exist and cannot be disposed");var f=c[g];f&&("function"===
typeof f.destroy?f.destroy():"function"===typeof f.dispose?f.dispose():"function"===typeof f.remove&&f.remove());c instanceof n&&g in c.__accessor__.metadatas?c._set(g,null):c[g]=null}}Object.defineProperty(c,"__esModule",{value:!0});c.disposeMembers=l;c.default=l})},"esri/views/3d/support/pointsOfInterest/CenterOnSurface":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/mathUtils ../../../../core/accessorSupport/decorators ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/Point ../debugFlags ../earthUtils ../PropertiesPool ./PointOfInterest".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m){Object.defineProperty(c,"__esModule",{value:!0});var q=Array;p=function(c){function m(a){a=c.call(this,a)||this;a.propertiesPool=new e.default({location:f,renderLocation:q},a);a.currentSurfaceAltitude=0;a.latestSurfaceAltitude=0;a.distance=0;a.renderLocation=g.vec3f64.create();a.updating=!1;return a}n(m,c);m.prototype.initialize=function(){var a=this;this._frameWorker=this.scheduler.registerTask(this.priority,function(){return a._measureSurfaceAltitude()},function(){return a.updating});
this._measureSurfaceAltitude()};m.prototype.destroy=function(){this._frameWorker&&(this._frameWorker.remove(),this._frameWorker=null);this.propertiesPool.destroy();this.propertiesPool=null};Object.defineProperty(m.prototype,"location",{get:function(){var a=this.propertiesPool.get("location");this.renderCoordsHelper.fromRenderCoords(this.renderLocation,a,this.state.spatialReference);return a},enumerable:!0,configurable:!0});m.prototype.updateRenderLocation=function(){this._set("updating",!0);this._updateRenderLocation()};
m.prototype.update=function(){this._measureSurfaceAltitude();this._updateRenderLocation()};Object.defineProperty(m.prototype,"estimatedSurfaceAltitude",{get:function(){return this.latestSurfaceAltitude},enumerable:!0,configurable:!0});m.prototype._measureSurfaceAltitude=function(){this.latestSurfaceAltitude=this.estimateSurfaceAltitudeAtCenter();this._updateRenderLocation();this._set("updating",!1)};m.prototype._updateRenderLocation=function(){var a=t,b=this.calculateSurfaceIntersection(this.currentSurfaceAltitude,
a),d=this.currentSurfaceAltitude!==this.latestSurfaceAltitude;!b&&d&&(b=this.calculateSurfaceIntersection(this.latestSurfaceAltitude,a))&&(this.currentSurfaceAltitude=this.latestSurfaceAltitude);d=r;b&&this.latestSurfaceAltitudeChangesDistanceSignificantly(a,d)&&(h.vec3.copy(a,d),this.currentSurfaceAltitude=this.latestSurfaceAltitude);b?(b=h.vec3.distance(this.state.camera.eye,a),b!==this._get("distance")&&this._set("distance",b)):(b=this.state.camera,h.vec3.scale(a,b.viewForward,this._get("distance")),
h.vec3.add(a,a,b.eye));h.vec3.equals(this._get("renderLocation"),a)||this._set("renderLocation",h.vec3.copy(this.propertiesPool.get("renderLocation"),a))};m.prototype.calculateSurfaceIntersection=function(b,d){var c=this.state.camera;if(!this.renderCoordsHelper.intersectManifold(c.ray,b,d))return!1;if(this.state.isGlobal){b=a.earthRadius+b;var e=h.vec3.squaredLength(c.eye),f=e<b*b,g=h.vec3.distance(c.eye,d);f&&g>a.earthRadius/4&&(h.vec3.scale(d,c.viewForward,b-Math.sqrt(e)),h.vec3.add(d,d,c.eye))}else if(c=
this.surface.ready&&this.surface.extent)d[0]=k.clamp(d[0],c[0],c[2]),d[1]=k.clamp(d[1],c[1],c[3]);return!0};m.prototype.latestSurfaceAltitudeChangesDistanceSignificantly=function(a,d){if(this.latestSurfaceAltitude===this.currentSurfaceAltitude||null==a)return!1;if(this.calculateSurfaceIntersection(this.latestSurfaceAltitude,d)){var c=this.state.camera.eye;a=h.vec3.distance(c,a);d=h.vec3.distance(c,d);if(b.TESTS_DISABLE_UPDATE_THROTTLE_THRESHOLDS||Math.abs(d-a)/a>u)return!0}return!1};l([d.property({constructOnly:!0})],
m.prototype,"scheduler",void 0);l([d.property({constructOnly:!0})],m.prototype,"priority",void 0);l([d.property({readOnly:!0})],m.prototype,"distance",void 0);l([d.property({constructOnly:!0})],m.prototype,"estimateSurfaceAltitudeAtCenter",void 0);l([d.property({readOnly:!0,dependsOn:["renderLocation"]})],m.prototype,"location",null);l([d.property({readOnly:!0})],m.prototype,"renderLocation",void 0);l([d.property({readOnly:!0})],m.prototype,"updating",void 0);return m=l([d.subclass("esri.views.3d.support.CenterOnSurface")],
m)}(d.declared(m.PointOfInterest));c.CenterOnSurface=p;var u=.05,t=g.vec3f64.create(),r=g.vec3f64.create();c.default=p})},"esri/views/3d/support/pointsOfInterest/ContentGeometryUpdates":function(){define(["require","exports","../../../../core/Evented","../../../../core/Handles"],function(p,c,n,l){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function d(d){this.handles=new l;this.events=new n;this.contentLayerViews=d.contentLayerViews;this.handles.add(this.contentLayerViews.on("change",
this.layerViewsChanged.bind(this)));this.layerViewsChanged({added:this.contentLayerViews.toArray(),removed:[],moved:[],target:this.contentLayerViews})}d.prototype.destroy=function(){this.handles&&(this.handles.destroy(),this.handles=null)};d.prototype.layerViewsChanged=function(d){var c=this;d.added.forEach(function(d){"esri.views.3d.layers.SceneLayerView3D"===d.declaredClass&&c.handles.add(d.on("visible-geometry-changed",c.contentChanged.bind(c)),d.uid)});d.removed.forEach(function(d){return c.handles.remove(d.uid)})};
d.prototype.contentChanged=function(){this.events.emit("request-update",k)};return d}();c.ContentGeometryUpdates=p;var k={};c.default=p})},"esri/views/3d/support/pointsOfInterest/Focus":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/mathUtils ../../../../core/screenUtils ../../../../core/accessorSupport/decorators ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/Point ../geometryUtils ../PropertiesPool ./PointOfInterest".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m){Object.defineProperty(c,"__esModule",{value:!0});var q=Array;p=function(c){function f(a){a=c.call(this,a)||this;a.propertiesPool=new e.default({locationOnSurface:b,renderLocationOnSurface:q},a);a.centerOnSurface=null;return a}n(f,c);f.prototype.destroy=function(){this.propertiesPool.destroy();this.propertiesPool=null};Object.defineProperty(f.prototype,"locationOnSurface",{get:function(){var a=this.propertiesPool.get("locationOnSurface");this.renderCoordsHelper.fromRenderCoords(this.renderLocationOnSurface,
a,this.state.spatialReference);return a},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"renderLocationOnSurface",{get:function(){var a=this.centerOnSurface.renderLocation,b=this.renderCoordsHelper,d=this.calculateScreenHorizontalEdgeOnSurface(x);g.vec3.subtract(u,a,this.state.camera.eye);g.vec3.normalize(u,u);b.worldUpAtPosition(a,t);var c=Math.abs(Math.acos(g.vec3.dot(t,u))-.5*Math.PI),b=this.propertiesPool.get("renderLocationOnSurface"),c=1-k.clamp(c/(.5*Math.PI),0,1);g.vec3.lerp(b,
a,d,c*c*c);return b},enumerable:!0,configurable:!0});f.prototype.calculateScreenHorizontalEdgeOnSurface=function(b){var c=this.state.camera,e=this.renderCoordsHelper.getAltitude(this.centerOnSurface.renderLocation),f=this.renderCoordsHelper.getAltitude(c.eye)>=e,h=c.getRenderCenter(d.createRenderScreenPointArray3());h[1]=f?c.padding[2]:c.fullHeight-c.padding[0];c.unprojectPoint(h,r);g.vec3.subtract(r,r,c.eye);f=g.vec3.normalize(r,r);if(this.renderCoordsHelper.intersectManifold(a.ray.wrap(c.eye,f),
e,b))return b;g.vec3.copy(b,c.eye);this.renderCoordsHelper.setAltitude(e,b);return b};f.prototype.updateRenderLocation=function(){};l([h.property({constructOnly:!0})],f.prototype,"centerOnSurface",void 0);l([h.property({readOnly:!0,dependsOn:["renderLocationOnSurface"]})],f.prototype,"locationOnSurface",null);l([h.property({readOnly:!0,dependsOn:["centerOnSurface.renderLocation"]})],f.prototype,"renderLocationOnSurface",null);l([h.property({readOnly:!0,aliasOf:"centerOnSurface.updating"})],f.prototype,
"updating",void 0);return f=l([h.subclass("esri.views.3d.support.CenterOnSurface")],f)}(h.declared(m.PointOfInterest));c.Focus=p;var u=f.vec3f64.create(),t=f.vec3f64.create(),r=f.vec3f64.create(),x=f.vec3f64.create();c.default=p})},"esri/views/3d/support/pointsOfInterest/StableSurfaceCenter":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/Accessor ../../../../core/Handles ../../../../core/promiseUtils ../../../../core/watchUtils ../../../../core/accessorSupport/decorators ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/Point ../../../../geometry/support/aaBoundingRect".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e){Object.defineProperty(c,"__esModule",{value:!0});p=function(c){function k(a){a=c.call(this,a)||this;a.location=null;a._updateController=null;a._handles=new d;return a}n(k,c);Object.defineProperty(k.prototype,"renderLocation",{get:function(){if(!this.location)return null;var a=b.vec3f64.create();this.view.renderCoordsHelper.toRenderCoords(this.location,a);return a},enumerable:!0,configurable:!0});k.prototype.initialize=function(){var a=this;this.view.state.isLocal&&
(this._handles.add([this.watch(["surfaceView.spatialReference","surfaceView.extent"],function(){return a._update()}),g.on(this,"surface.layers","change",function(){return a._update()})]),this._update())};k.prototype.destroy=function(){this._handles.destroy()};k.prototype._update=function(){var b=this;this._updateController&&(this._updateController.abort(),this._updateController=null);if(this.surfaceView&&this.surfaceView.extent&&this.surfaceView.spatialReference){var d=e.center(this.surfaceView.extent),
d=new a({x:d[0],y:d[1],z:0,spatialReference:this.surfaceView.spatialReference});this.surface&&0<this.surface.layers.length?(this._set("location",null),this._updateController=h.createAbortController(),this.surface.queryElevation(d,{noDataValue:0,signal:this._updateController.signal}).then(function(a){b._updateController=null;b._set("location",a.geometry)}).catch(function(a){h.isAbortError(a)||a&&"elevation-query:invalid-layer"===a.name||console.error("StableSurfaceCenter failed to update: ",a)})):
this._set("location",d)}else this._set("location",null)};l([f.property({constructOnly:!0})],k.prototype,"view",void 0);l([f.property({readOnly:!0,aliasOf:"view.map.ground"})],k.prototype,"surface",void 0);l([f.property({readOnly:!0,aliasOf:"view.basemapTerrain"})],k.prototype,"surfaceView",void 0);l([f.property({readOnly:!0})],k.prototype,"location",void 0);l([f.property({readOnly:!0,dependsOn:["location"]})],k.prototype,"renderLocation",null);return k=l([f.subclass("esri.views.3d.terrain.StableSurfaceCenter")],
k)}(f.declared(k));c.StableSurfaceCenter=p;c.default=p})},"esri/views/3d/support/pointsOfInterest/SurfaceGeometryUpdates":function(){define("require exports ../../../../core/tsSupport/decorateHelper ../../../../core/tsSupport/declareExtendsHelper ../../../../core/Accessor ../../../../core/Evented ../../../../core/Handles ../../../../core/accessorSupport/decorators ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/support/aaBoundingRect".split(" "),function(p,c,n,l,k,d,h,g,f,b){Object.defineProperty(c,
"__esModule",{value:!0});p=function(c){function f(){var a=null!==c&&c.apply(this,arguments)||this;a.handles=new h;a._tileGeometryUpdateExtent=b.empty();a._tileGeometryUpdateSpatialReference=null;a.events=new d;a.updating=!1;return a}l(f,c);f.prototype.initialize=function(){var a=this;this.handles.add([this.surface.on("elevation-change",function(b){return a._tileGeometryChanged(b)}),this.scheduler.registerTask(1,function(){return a.update()},function(){return a.updating})])};f.prototype.destroy=function(){this.handles&&
(this.handles.destroy(),this.handles=null)};f.prototype.update=function(){this.updating&&(this._centerIntersectsExtent(this._tileGeometryUpdateExtent,this._tileGeometryUpdateSpatialReference)&&this.events.emit("request-update",a),b.empty(this._tileGeometryUpdateExtent),this._set("updating",!1))};f.prototype._tileGeometryChanged=function(a){this._tileGeometryUpdateSpatialReference=a.spatialReference;b.expand(this._tileGeometryUpdateExtent,a.tile.extent);this._set("updating",!0)};f.prototype._furthestCenterOnSurface=
function(){for(var a=this.centerOnSurfaces[0],b=1;b<this.centerOnSurfaces.length;b++){var d=this.centerOnSurfaces[b];d.distance>a.distance&&(a=d)}return a};f.prototype._centerIntersectsExtent=function(a,d){var c=this.state.camera.eye,f=q,g=this._furthestCenterOnSurface();this.renderCoordsHelper.fromRenderCoords(c,e,d);this.renderCoordsHelper.fromRenderCoords(g.renderLocation,m,d);e[0]<m[0]?(f[0]=e[0],f[2]=m[0]):(f[0]=m[0],f[2]=e[0]);e[1]<m[1]?(f[1]=e[1],f[3]=m[1]):(f[1]=m[1],f[3]=e[1]);return b.intersects(f,
a)};n([g.property({constructOnly:!0})],f.prototype,"state",void 0);n([g.property({constructOnly:!0})],f.prototype,"centerOnSurfaces",void 0);n([g.property({constructOnly:!0})],f.prototype,"renderCoordsHelper",void 0);n([g.property({constructOnly:!0})],f.prototype,"scheduler",void 0);n([g.property({constructOnly:!0})],f.prototype,"surface",void 0);n([g.property({readOnly:!0})],f.prototype,"updating",void 0);return f=n([g.subclass("esri.views.3d.support.SurfaceGeometryUpdates")],f)}(g.declared(k));
c.SurfaceGeometryUpdates=p;var a={},e=f.vec3f64.create(),m=f.vec3f64.create(),q=b.empty();c.default=p})},"esri/views/3d/terrain/TerrainSurface":function(){define("require exports ../../../core/tsSupport/assignHelper ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Color ../../../core/Accessor ../../../core/arrayUtils ../../../core/asyncUtils ../../../core/CollectionFlattener ../../../core/Evented ../../../core/Handles ../../../core/Logger ../../../core/mathUtils ../../../core/ObjectPool ../../../core/PooledArray ../../../core/promiseUtils ../../../core/promiseUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/mat4 ../../../core/libs/gl-matrix-2/mat4f64 ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../core/libs/gl-matrix-2/vec4f64 ../../../geometry/support/aaBoundingRect ../../../layers/support/LercWorker ../../2d/engine/vectorTiles/VectorTileDisplayObject3D ../support/geometryUtils ../support/index ../support/projectionUtils ./ElevationData ./ElevationTileAgent ./MapTileAgent ./OverlayManager ./PlanarPatch ./SphericalPatch ./SurfaceExtentHelper ./SurfaceTilingSchemeLogic ./TerrainConst ./TerrainRenderer ./terrainUtils ./TilemapOnlyTile ./tileUtils ./tileUtils ./UpsampleInfo ../../webgl/Texture ../../webgl/Util".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z,A,B,D,C,E,H,G,I,K,M,T,N,S,O,V,Q,J,P,L,F,Y,X,R,Z,da,ja){function ba(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]}function ha(a,b){var d=!1;b=b||a;var c=0;for(a=a.children;c<a.length;c++){var e=a[c];if(e){for(var f in e.layerInfo)for(var g in e.layerInfo[f]){var h=e.layerInfo[f][g].upsampleFromTile;if(h&&h.tile===b)return!0}d=d||ha(e,b)}}return d}var W=m.getLogger("esri.views.3d.terrain.TerrainSurface");p=function(a){function c(b,d){d=a.call(this)||
this;d.defaultTileBackground=P.DEFAULT_TILE_BACKGROUND;d.hideSkirtsDistanceFromExtentMargin=ea;d.hideSkirtsMinimumCameraTilt=ga;d.hideSkirtsMaximumCameraTilt=ma;d._clippingExtent=null;d._dataExtent=null;d._elevationBounds=[0,0];d._rootExtent=C.create();d._iteratorPool=new u(R.IteratorPreorder);d._postorderIterator=new R.IteratorPostorder;d.visible=!1;d.suspended=!1;d._pendingUpdates=!1;d._asyncWorkItems=0;d._lvPendingUpdates=!1;d._updateNextFrame=0;d._memoryUsed=0;d._overlayOpacity=1;d._eyePosRenderSR=
B.vec3f64.create();d._eyePosSurfaceSR=B.vec3f64.create();d._splitLimits=[0,0,0,0,0,0];d._frustum=G.frustum.create();d._viewProjectionMatrix=z.mat4f64.create();d._layerViews=[[],[]];d._layerIndexByLayerViewId=[{},{}];d._basemapLayerViewHandles={};d._handles=new e;d._lowPrioUpdates=new t;d._topLevelTilemapOnlyTiles=Array(P.TILEMAP_SIZE_EXP+1);d._upsampleInfoPool=new u(Z);d._getElevationData={spatialReference:null,rootTiles:null};d.loaded=!1;d.maxTextureScale=1.2;d.rootTiles=null;d.backgroundImage=P.DEFAULT_TILE_BACKGROUND;
d.backgroundColor=null;d._lercWorker=E.acquireInstance(b.resourceController.scheduler);for(b=0;b<d._topLevelTilemapOnlyTiles.length;b++)d._topLevelTilemapOnlyTiles[b]=new Y([b-P.TILEMAP_SIZE_EXP,0,0],d._upsampleInfoPool);return d}l(c,a);c.prototype.normalizeCtorArgs=function(a,b){this._view=a;this._stage=a._stage;this._set("manifold",b);return{}};c.prototype.initialize=function(){var a=this;this._tilePool="planar"===this.manifold?new u(O):new u(V);this._memCache=this._view.resourceController.memoryController.getMemCache("esri.views.3d.terrain",
function(b){return a._renderer.releaseTileGeometry(b.renderData)});this._renderer=new L(this.manifold,this._memCache);this._renderer.loaded=this._setLoaded.bind(this);this._renderer.install(this._view._stage);w.init(this,"_background",function(){a._renderer.setTileBackground(a._background)});this._handles.add(this._view.watch("pointsOfInterest",function(b){a._renderer.pointsOfInterest=b}));this._set("overlayManager",new S.OverlayManager({terrainSurface:this,view:this._view}));this._handles.add(this.watch("overlayManager.hasHighlights",
this._handleHasHighlights.bind(this)),"overlayManager");var d={layers:this._view.map.allLayers,layerViews:this._view.allLayerViews,spatialReference:this._view.spatialReference};this.extentHelper="spherical"===this.manifold?new Q.SurfaceExtentHelperGlobal(d):new Q.SurfaceExtentHelperLocal(d);this._handles.add(w.init(this.extentHelper,"stencilEnabledExtents",function(b){a._renderer.setStencilEnabledLayerExtents(b)}),"extentHelper");d=this._view.defaultsFromMap?new b({root:this._view.map,rootCollectionNames:this._view.defaultsFromMap.mapCollectionPaths,
getChildrenFunction:function(a){return a.layers}}):this._view.map.allLayers;d=new J({layers:d,extentHelper:this.extentHelper,manifold:this.manifold,viewSpatialReference:this._view.spatialReference});this._set("tilingSchemeLogic",d);this._handles.add([this.tilingSchemeLogic.watch("tilingScheme",this._updateTilingSchemeAndExtent.bind(this),!0),this.tilingSchemeLogic.watch("extent",this._updateTilingSchemeAndExtent.bind(this),!0)],"tilingSchemeLogic");this._updateTilingSchemeAndExtent();this._streamDataRequester=
this._view.resourceController.createStreamDataRequester(I.ClientType.TERRAIN);this._handles.add(this._view.resourceController.scheduler.registerTask(1,function(b){return a._frame(b)},function(){return a.ready&&(a._pendingUpdates||a._lvPendingUpdates)}));this._viewChangeUpdate=this._viewChangeUpdate.bind(this);this._view.resourceController.memoryController.events.on("quality-changed",function(){return a._viewChangeUpdate()});this._handles.add([this._view.on("resize",this._viewChangeUpdate),this._view.watch("state.camera",
this._viewChangeUpdate,!0),this._view.watch("qualitySettings.tiledSurface.lodBias",this._viewChangeUpdate),this._view.watch("clippingArea",this._clippingChanged.bind(this))],"view");this._handles.add(this._view.allLayerViews.on("change",this._handleLayerViewChanges.bind(this)),"allLayerViews");this._handleLayerViewChanges({added:this._view.allLayerViews.toArray(),removed:[],moved:[],target:this._view.allLayerViews});this._updateClippingExtent();this.notifyChange("extent")};c.prototype.destroy=function(){this._handles.destroy();
E.releaseInstance(this._lercWorker);this._lercWorker=null;this._removeAllTiles();this._memCache.destroy();this._memCache=null;this.tilingSchemeLogic.destroy();this._set("tilingSchemeLogic",null);this.extentHelper.destroy();this.extentHelper=null;for(var a in this._basemapLayerViewHandles)this._unregisterTiledLayerView(a);this._streamDataRequester=null;this.overlayManager&&(this.overlayManager.destroy(),this._set("overlayManager",null));this._tilePool.destroy();this._tilePool=null;T.Pool.prune(0);
N.Pool.prune(0);this._renderer.destroy(this._stage);this._renderer=null;this._iteratorPool.destroy();this._stage=this._view=this._iteratorPool=null;this._upsampleInfoPool.destroy();this._upsampleInfoPool=null};Object.defineProperty(c.prototype,"renderer",{get:function(){return this._renderer},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"frustum",{get:function(){return this._frustum},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"upsampleInfoPool",{get:function(){return this._upsampleInfoPool},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"cullBackFaces",{set:function(a){this._renderer.cullBackFaces=a;this._set("cullBackFaces",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"extent",{get:function(){return this._clippingExtent||this._rootExtent},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"baseOpacity",{set:function(a){this._renderer.opaque=1<=a;this._set("baseOpacity",a);this._updateTileTextures(!0)},enumerable:!0,configurable:!0});
Object.defineProperty(c.prototype,"ready",{get:function(){return!!this.rootTiles},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"renderOrder",{set:function(a){this._renderer.renderOrder=a;this._set("renderOrder",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"skirtScale",{set:function(a){this._renderer.skirtScale=a;this._set("skirtScale",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"spatialReference",{get:function(){var a=this.tilingScheme&&
this.tilingScheme.spatialReference||null;return this._getElevationData.spatialReference=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"_background",{get:function(){return null!=this.backgroundColor?this.backgroundColor:this.backgroundImage},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"slicePlaneEnabled",{set:function(a){this._renderer.slicePlaneEnabled=a;this._set("slicePlaneEnabled",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"velvetOverground",{set:function(a){a!==this.velvetOverground&&(this._renderer.velvetOvergroundEnabled=a);this._set("velvetOverground",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"wireframe",{set:function(a){this._renderer.setWireframe(a);this._set("wireframe",a)},enumerable:!0,configurable:!0});c.prototype.setVisibility=function(a){a!==this.visible&&(this.visible=a,this._renderer.setVisibility(a),this.setUpdatesDisabled(!a),a&&this._viewChangeUpdate())};c.prototype.isVisible=
function(){return this.visible&&this.ready};c.prototype.isOpaque=function(){return this._renderer.isOpaque()};c.prototype.setUpdatesDisabled=function(a){(this.suspended=a)||this._viewChangeUpdate()};c.prototype.intersect=function(a,b,d,c){this._renderer.intersect(a,b,d,c,null)};c.prototype.getElevation=function(a){var b=this._getElevationData.rootTiles;if(!b||!b.length||0===b[0].layerInfo[P.LayerClass.ELEVATION].length)return null;var d=qa;if(Array.isArray(a))d=a;else if("point"===a.type&&!K.pointToVector(a,
d,this._getElevationData.spatialReference))return W.error("TerrainSurface.getElevation(): could not project given point to tiling scheme coordinate system"),null;for(var c=0;c<b.length;c++)if(a=b[c],X.isPosWithinTile(a,d)){for(;a&&!a.renderData;)b=0,d[0]>.5*(a.extent[0]+a.extent[2])&&(b+=1),d[1]<.5*(a.extent[1]+a.extent[3])&&(b+=2),a=a.children[b];if(b=(b=a.renderData)&&b.geometryState?b.geometryState.samplerData:null)return M.sample(d[0],d[1],b);break}return null};c.prototype.getElevationBounds=
function(){return this._elevationBounds};c.prototype.getScale=function(a){if(this.tilingScheme){if(!K.pointToVector(a,qa,this.spatialReference))return W.error("TerrainSurface.getElevation(): could not project given point to tiling scheme coordinate system"),null;var b=this.rootTiles;if(b)for(var d=0;d<b.length;d++)if(a=b[d],X.isPosWithinTile(a,qa)){for(;null!=a.children[0];)b=0,qa[0]>a.children[0].extent[2]&&(b+=1),qa[1]<a.children[0].extent[1]&&(b+=2),a=a.children[b];return this._getLodBiasCorrectedScale(a.lij[0])}}return 1E100};
c.prototype.queryVisibleScaleRange=function(a,b,d,c){b=b?this.tilingScheme.levelAtScale(b):0;d=d?this.tilingScheme.levelAtScale(d):Infinity;var e=this._getLodBias();this._renderer.queryVisibleLevelRange(a,b+e,d+e,c)};c.prototype._setLoaded=function(){this.loaded||this._set("loaded",!0)};c.prototype._updateTilingSchemeAndExtent=function(){var a=this.tilingSchemeLogic.extent,b=a&&!C.equals(a,this._dataExtent);b&&(this._dataExtent?C.set(this._dataExtent,a):this._dataExtent=C.create(a));var a=this.tilingSchemeLogic.tilingScheme,
d=a!==this.tilingScheme;d&&(F.weakAssert(!!a,"tiling scheme cannot be reset to undefined"),this.tilingScheme&&this._removeAllTiles(),this._set("tilingScheme",a),this._updateClippingExtent(),a&&(this._updateTiledLayers(),this._renderer.setTileSize(a.pixelSize[0]),this.overlayManager.setSpatialReference(a.spatialReference,"spherical"===this.manifold)));(b||d)&&this._updateRootTiles()};c.prototype._acquireTile=function(a,b,d,c){var e=this._tilePool.acquire();pa[0]=a;pa[1]=b;pa[2]=d;e.init(pa,c,this);
return e};c.prototype._updateRootTiles=function(){var a=this,b=this._clippingExtent||this._dataExtent,d=this.tilingScheme;if(b&&d){this._memCache.clear();var c=na,e=d.rootTilesInExtent(b,c,Infinity),f=function(b){b=a._acquireTile(0,b[1],b[2],null);b.shouldSplit(a._splitLimits,a._eyePosRenderSR)===P.TileUpdate.SPLIT&&b.setPendingUpdate(P.TileUpdate.SPLIT);a._loadTile(b);return b};if(this.rootTiles){if(e.length>P.MAX_ROOT_TILES){W.warn(P.TOO_MANY_ROOT_TILES_AFTER_CHANGE_ERROR);return}var b=this.rootTiles.map(function(a){return a.lij}),
h=g.difference(b,e,ba);if(0<h.removed.length||0<h.added.length){var k=this.rootTiles.filter(function(b){return-1<g.findIndex(h.removed,ba.bind(null,b.lij))?(a._purgeTile(b),!1):!0});h.added.forEach(function(a){return k.push(f(a))});this._setRootTiles(k)}}else e.length>P.MAX_ROOT_TILES&&(W.warn(P.TOO_MANY_ROOT_TILES_FOR_LAYER_ERROR),e=d.rootTilesInExtent(b,c,P.MAX_ROOT_TILES)),this._setRootTiles(e.map(function(a){return f(a)}));C.equals(c,this._rootExtent)||(this._rootExtent=C.create(c),this._hasFixedExtent()||
this.notifyChange("extent"));this.setVisibility(!0);this._viewChangeUpdate();this.overlayManager.setOverlayPlacementDirty();this.notifyChange("ready")}};c.prototype._setRootTiles=function(a){this._set("rootTiles",a);this._getElevationData.rootTiles=a;this._renderer.setRootTiles(this.rootTiles)};c.prototype._viewChangeUpdate=function(){this._stage&&!this.suspended&&this.tilingScheme&&this.visible&&(this._updateViewDependentParameters(),this._updateSkirts(),this._updateOverlayOpacity(this._eyePosSurfaceSR[2]),
this._updateTiles())};c.prototype._updateClippingStatus=function(a){a.updateClippingStatus(this._clippingExtent)&&a.resetPendingUpdate(P.TileUpdate.GEOMETRY)&&this._updateTileGeometry(a)};c.prototype._updateTiles=function(a){void 0===a&&(a=this.rootTiles);if(a){var b=this._iteratorPool.acquire();b.reset(a);var d=this._splitLimits,c;X.hasVisibleSiblings(a)?(a=this._elevationBounds[0],c=this._elevationBounds[1]):(a=Infinity,c=-Infinity);for(;!b.done;){var e=b.next();this._updateClippingStatus(e);e.updateVisibility();
if(e.visible){e.updateScreenDepth(this._viewProjectionMatrix);e.renderData&&(a=Math.min(e.elevationBounds[0],a),c=Math.max(e.elevationBounds[1],c));var f=e.shouldSplit(d,this._eyePosRenderSR);if(f===P.TileUpdate.SPLIT){e.resetPendingUpdate(P.TileUpdate.MERGE);e.isLeaf&&(e.setPendingUpdate(P.TileUpdate.SPLIT),b.skipSubtree());this._pendingUpdates=this._pendingUpdates||e.hasPendingUpdates;continue}e.resetPendingUpdate(P.TileUpdate.SPLIT)&&e.updateAgentSuspension();f===P.TileUpdate.VSPLITMERGE&&e.updateAgents(P.LayerClass.ELEVATION)}b.skipSubtree();
if(!e.renderData){e.setPendingUpdate(P.TileUpdate.MERGE);e.resetPendingUpdate(P.TileUpdate.SPLIT);f=this._iteratorPool.acquire();for(f.resetOne(e);!f.done;){var g=f.next();this._updateClippingStatus(g);g.updateVisibility();g.visible&&g.updateScreenDepth(this._viewProjectionMatrix)}this._iteratorPool.release(f)}this._pendingUpdates=this._pendingUpdates||e.hasPendingUpdates}this._iteratorPool.release(b);isFinite(a)&&isFinite(c)&&(this._elevationBounds[0]!==a||this._elevationBounds[1]!==c)&&(this._elevationBounds[0]=
a,this._elevationBounds[1]=c,this.emit("elevation-bounds-change",null))}};c.prototype._updateViewDependentParameters=function(){var a=this._view.state.camera,b=Math.tan(.5*a.fovX),d=Math.tan(.5*a.fovY),c=this.tilingScheme.pixelSize,e=Math.pow(2,-this._getLodBias())*a.pixelRatio;this._splitLimits[0]=b;this._splitLimits[1]=c[0]/a.width*this.maxTextureScale*e;this._splitLimits[2]=d;this._splitLimits[3]=c[1]/a.height*this.maxTextureScale*e;this._splitLimits[4]=this.tilingScheme.getMaxLod();this._splitLimits[5]=
this._view.qualitySettings.tiledSurface.angledSplitBias;G.frustum.copy(a.frustum,this._frustum);y.mat4.multiply(this._viewProjectionMatrix,a.projectionMatrix,a.viewMatrix);A.vec3.copy(this._eyePosRenderSR,a.eye);K.vectorToVector(this._eyePosRenderSR,this._view.renderSpatialReference,this._eyePosSurfaceSR,this.spatialReference)};c.prototype._updateSkirts=function(){F.autoUpdateSkirtsVisibility(this,this._eyePosSurfaceSR,this._view.state.camera.near)};c.prototype._setLayerViewsUpdating=function(){for(var a=
0;a<P.LayerClass.COUNT;a++)for(var b=0,d=this._layerViews[a];b<d.length;b++)d[b].updatingChanged(this._pendingUpdates)};c.prototype._updateTileGeometry=function(a){a.updateVisibility();this._renderer.updateTileGeometry(a);this._elevationUpdate(a);this._memoryUsed=0};c.prototype._elevationUpdate=function(a){sa.spatialReference=this.spatialReference;sa.tile=a;sa.extent=a.extent;this.emit("elevation-change",sa);C.containsPoint(a.extent,this._eyePosSurfaceSR)&&this._updateSkirts()};c.prototype._frame=
function(a){var b=this;this._frameTraversal(a);a.run(function(){X.sortTiles(b._renderer.renderOrder,b._lowPrioUpdates);return!1});this._processElevation(a)&&this._processTextures(a)&&!this._view.resourceController.hasPendingDownloads&&0===this._asyncWorkItems||(this._pendingUpdates=!0);this.isVisible()&&this.overlayManager&&this.overlayManager.needsUpdate()&&(a.done?this._pendingUpdates=!0:(this.overlayManager.updateOverlays(),this._updateOverlayOpacity(this._eyePosSurfaceSR[2])));this._lowPrioUpdates.clear();
(this._pendingUpdates||20===++this._updateNextFrame)&&this._updatedThrottledPendingUpdates()};c.prototype._updatedThrottledPendingUpdates=function(){this._lvPendingUpdates!==this._pendingUpdates&&(this._setLayerViewsUpdating(),this._lvPendingUpdates=this._pendingUpdates,this._updateNextFrame=0)};c.prototype._frameTraversal=function(a){if(!this.suspended&&this._pendingUpdates){this._lowPrioUpdates.clear();this._pendingUpdates=!1;var b=this._iteratorPool.acquire();b.reset(this.rootTiles);for(var d=
0,c=!1,e=[];!b.done&&!a.done;){var f=b.next(),d=d+f.memoryUsed;f.resetPendingUpdate(P.TileUpdate.MERGE)?(this._mergeTile(f),a.madeProgress(),b.skipSubtree()):f.resetPendingUpdate(P.TileUpdate.SPLIT)?(this._splitTile(f)&&(c=this._pendingUpdates=!0,e.push(f)),a.madeProgress(),b.skipSubtree()):f.hasPendingUpdates&&this._lowPrioUpdates.push(f);this._pendingUpdates=this._pendingUpdates||f.hasPendingUpdates;b.done&&(b.reset(e),e.length=0)}this._pendingUpdates=this._pendingUpdates||!b.done;!c&&b.done&&(this._memoryUsed=
d);this._iteratorPool.release(b)}};c.prototype._processElevation=function(a){for(var b=this,d=function(d){var e=c._lowPrioUpdates.data[d];if(!a.run(function(){if(e.resetPendingUpdate(P.TileUpdate.GEOMETRY))return b._updateTileGeometry(e),!0}))return{value:!1}},c=this,e=0;e<this._lowPrioUpdates.length;++e){var f=d(e);if("object"===typeof f)return f.value}return!0};c.prototype._processTextures=function(a){for(var b=this,d=function(d){var e=c._lowPrioUpdates.data[d];if(!a.run(function(){return e.resetPendingUpdate(P.TileUpdate.TEXTURE)?
(b._renderer.updateTileTexture(e),b._memoryUsed=0,!0):!1}))return{value:!1}},c=this,e=0;e<this._lowPrioUpdates.length;++e){var f=d(e);if("object"===typeof f)return f.value}return!0};c.prototype._updateClippingExtent=function(){if(!this.spatialReference)return!1;var a=C.create(),b=null;K.extentToBoundingRect(this._view.clippingArea,a,this.spatialReference)&&(b=a);if(C.equals(b,this._clippingExtent))return!1;this._memCache.clear();this._clippingExtent=b;this._renderer.clippingExtent=b;this.notifyChange("extent");
this.updateTileOverlayParams();this.overlayManager.setOverlayPlacementDirty();return!0};c.prototype._clippingChanged=function(){this._updateClippingExtent()&&this._updateRootTiles()};c.prototype._getLodBias=function(){return this._view.qualitySettings.tiledSurface.lodBias-(1-this._view.resourceController.memoryController.memoryFactor)*P.MAX_MEMORY_LOD_BIAS};c.prototype._getLodBiasCorrectedScale=function(a){var b=this.tilingScheme.levels;a=q.clamp(a-this._getLodBias(),0,b.length-1);var d=a-Math.floor(a);
return b[Math.floor(a)].scale*(1-d)+b[Math.ceil(a)].scale*d};c.prototype._cancelTilemapRequests=function(a){var b=0;for(a=a.layerInfo;b<a.length;b++){var d=a[b];if(d)for(var c=0;c<d.length;c++)d[c].abortTilemapRequest()}};c.prototype._removeAllTiles=function(){var a=this;this.rootTiles&&(this.rootTiles.forEach(function(b){return a._purgeTile(b)}),this._setRootTiles(null),this.notifyChange("ready"));for(var b=0;b<this._topLevelTilemapOnlyTiles.length;b++)this._cancelTilemapRequests(this._topLevelTilemapOnlyTiles[b]);
this.setVisibility(!1)};c.prototype._purgeChildTiles=function(a){for(var b in a.children){var d=a.children[b];null!=d&&(a.children[b]=null,this._purgeTile(d))}};c.prototype._purgeTile=function(a){this._purgeChildTiles(a);a.unload(this._renderer);this._cancelTilemapRequests(a);a.dispose();this._tilePool.release(a)};c.prototype._splitTile=function(a){var b=a.lij[0]+1,d=2*a.lij[1],c=2*a.lij[2];a.children[0]=this._createTile(b,d,c,a);a.children[1]=this._createTile(b,d,c+1,a);a.children[2]=this._createTile(b,
d+1,c,a);a.children[3]=this._createTile(b,d+1,c+1,a);a.unload(this._renderer);ia.spatialReference=this.spatialReference;ia.extent=a.extent;ia.scale=this._getLodBiasCorrectedScale(b);this.emit("scale-change",ia);return a.children[0].hasPendingUpdate(P.TileUpdate.SPLIT)||a.children[1].hasPendingUpdate(P.TileUpdate.SPLIT)||a.children[2].hasPendingUpdate(P.TileUpdate.SPLIT)||a.children[3].hasPendingUpdate(P.TileUpdate.SPLIT)};c.prototype._createTile=function(a,b,d,c){F.weakAssert(!!c,"_createTile sanity check");
a=this._acquireTile(a,b,d,c);a.updateClippingStatus(this._clippingExtent);a.visible&&(a.updateScreenDepth(this._viewProjectionMatrix),a.shouldSplit(this._splitLimits,this._eyePosRenderSR)===P.TileUpdate.SPLIT&&a.setPendingUpdate(P.TileUpdate.SPLIT));this._loadTile(a);return a};c.prototype._mergeTile=function(a){F.weakAssert(!a.renderData,"_mergeTile sanity check");F.weakAssert(!a.hasPendingUpdate(P.TileUpdate.SPLIT),"_mergeTile sanity check");this._loadTile(a);this._purgeChildTiles(a);ia.spatialReference=
this.spatialReference;ia.extent=a.extent;ia.scale=this._getLodBiasCorrectedScale(a.lij[0]);this.emit("scale-change",ia)};c.prototype._loadTile=function(a){a.load(this._renderer);this.overlayManager&&this.overlayManager.hasOverlays()&&this.overlayManager.setOverlayParamsOfTile(a,a.renderData,this._overlayOpacity);this._elevationUpdate(a)};c.prototype._handleHasHighlights=function(a){this._renderer.setNeedsHighlight(a)};c.prototype._elevationDataUpdated=function(a,b){var d=a.layerInfo[P.LayerClass.ELEVATION][b],
c=[a],e=a.lij[0],f=this._iteratorPool.acquire();for(f.reset(c);!f.done;){var g=f.next();g.findElevationBoundsForLayer(b,e);g.computeElevationBounds()}this._iteratorPool.release(f);a.dataArrived(b,P.LayerClass.ELEVATION,d.data);this._updateTiles(c)};c.prototype._handleLayerViewChanges=function(a){var b=this,d=!1;a.added.forEach(function(a){var c=a.layer;F.isTiledLayerView(a)?(b._registerTiledLayer(a),c.loaded&&(d=!0),a.updatingChanged(b._pendingUpdates)):a.supportsDraping&&b.overlayManager&&b.overlayManager.registerLayerView(a)});
a.removed.forEach(function(a){F.isTiledLayerView(a)?(d=!0,b._unregisterTiledLayerView(a.uid)):a.supportsDraping&&b.overlayManager&&b.overlayManager.unregisterLayerView(a)});(d=d||0<a.moved.filter(F.isTiledLayerView).length)&&this._updateTiledLayers()};c.prototype._registerTiledLayer=function(a){var b=this,d=[];d.push(a.watch("suspended",function(){return b._updateTiledLayers()}));d.push(a.watch("fullOpacity",function(){return b._updateTileTextures(!1)}));a.on("data-changed",function(){var d=F.isElevationLayerView(a)?
P.LayerClass.ELEVATION:P.LayerClass.MAP,c=b._layerIndexByLayerViewId[d][a.uid];null!=c&&b._invalidateLayerData(c,d)});this._basemapLayerViewHandles[a.uid]=d};c.prototype._unregisterTiledLayerView=function(a){var b=this._basemapLayerViewHandles[a];if(b){for(var d=0;d<b.length;d++)b[d].remove();delete this._basemapLayerViewHandles[a]}};c.prototype._updateTiledLayers=function(){var a=this;if(this.tilingScheme&&!this._view.suspended){var b=this._view.allLayerViews,d=[[],[]],c=null,e=C.empty();b.forEach(function(b){var f=
b.layer;if(f&&!b.suspended&&F.isTiledLayerView(b)){var g=b.fullExtent;g?a.tilingScheme.compatibleWith(b.tileInfo)?(C.expand(e,g),F.isElevationLayerView(b)?d[P.LayerClass.ELEVATION].push(b):(f=b.displayLevelRange,Infinity!==f.maxLevel&&(null===c||f.maxLevel>c)&&(c=f.maxLevel),d[P.LayerClass.MAP].push(b))):W.warn("Terrain: tiling scheme of layer "+f.id+" is incompatible with other tiled layers, will not be drawn"):W.warn("Terrain: Map or elevation layer does not have fullExtent: "+f.id)}},this);for(var b=
function(a){var b=f._layerViews[a],c=d[a];c.reverse();var e=c.length,g=b.length!==e,h=Array(e),k=Array(b.length);f._layerIndexByLayerViewId[a]={};for(var m=0;m<e;m++){f._layerIndexByLayerViewId[a][c[m].uid]=m;var l=b.indexOf(c[m]);h[m]=l;m!==l&&(g=!0);-1<l&&(k[l]=m)}if(g){f._topLevelTilemapOnlyTiles.forEach(function(b){return b.modifyLayers(k,h,a)});b=f._postorderIterator;for(b.reset(f.rootTiles);!b.done;)b.next().modifyLayers(k,h,a);f._layerViews[a]=c;a===P.LayerClass.ELEVATION&&f._memCache.clear();
for(b.reset(f.rootTiles);!b.done;)c=b.next(),c.restartAgents(a),a===P.LayerClass.ELEVATION&&c.computeElevationBounds();f._updateTiles()}},f=this,g=0;g<P.LayerClass.COUNT;g++)b(g);this.tilingScheme.ensureMaxLod(c)&&this._viewChangeUpdate()}};c.prototype._hasFixedExtent=function(){return!!this._clippingExtent};c.prototype.layerViewByIndex=function(a,b){return this._layerViews[b][a]};c.prototype.numLayers=function(a){return this._layerViews[a].length};c.prototype._updateTileTextures=function(a){var b=
this._iteratorPool.acquire();for(b.reset(this.rootTiles);!b.done;){var d=b.next();d.updateAgents(P.LayerClass.MAP);a&&this.renderer.updateTileTexture(d)}this._iteratorPool.release(b)};c.prototype._invalidateLayerData=function(a,b){var d=this._iteratorPool.acquire();for(d.reset(this.rootTiles);!d.done;)d.next().removeLayerAgent(a,b);for(d.reset(this.rootTiles);!d.done;)d.next().invalidateLayerData(a,b);this._iteratorPool.release(d);b===P.LayerClass.ELEVATION&&this._memCache.clear()};c.prototype.setPendingUpdates=
function(){this._pendingUpdates=!0;this._updatedThrottledPendingUpdates()};c.prototype.requestTileData=function(a,b,d,c){var e=this,f=this.layerViewByIndex(b,d),g=f.layer;if(g.tilemapCache&&!F.isVectorTileLayerView(f)){var h=this.getTilemapTile(a),k=h.layerInfo[d][b];if(k.tilemap){if(!h.hasDataAvailable(a,b,d))return this._dispatchDataEvent(a,"dataMissing",d,f,{notInTilemap:!0}),x.reject()}else return k.tilemapRequestPromise||(k.tilemapRequestAbort=x.createAbortController(),k.tilemapRequestPromise=
this.requestTilemap(h,b,d,f,g,{signal:k.tilemapRequestAbort.signal})),++this._asyncWorkItems,k.tilemapRequestPromise.catch(function(){}).then(function(){--e._asyncWorkItems;k.tilemapRequestPromise=null;k.tilemapRequestAbort=null;x.throwIfAborted(c);var b=e._layerIndexByLayerViewId[d][f.uid];if(null!=b){if(h.hasDataAvailable(a,b,d))return e._requestTileData(a,b,d,f,c);e._dispatchDataEvent(a,"dataMissing",d,f,{notInTilemap:!0});return x.reject()}})}return this._requestTileData(a,b,d,f,c)};c.prototype._requestTileData=
function(a,b,d,c,e){return d===P.LayerClass.ELEVATION?this._requestElevationTileData(a,b,d,c,e):this._requestMapTileData(a,b,d,c,e)};c.prototype._requestElevationTileData=function(a,b,d,c,e){var f=this;if(F.isElevationLayerView(c)){var g=function(e){f._asyncWorkItems--;var g=f._layerIndexByLayerViewId[d][c.uid];null==g?W.warn("TerrainSurface: received data from unknown layer %d %s",d,a.lij.toString()):(g=a.layerInfo[d][g],f._memoryUsed=0,g.data=M.create(a.lij,a.extent,e),f._elevationDataUpdated(a,
b),f._pendingUpdates=!0)},h=function(b){f._asyncWorkItems--;x.isAbortError(b)||f._dispatchDataEvent(a,"dataMissing",d,c,b)};this._asyncWorkItems++;if(F.useFetchTileForLayer(c.layer))return c.layer.fetchTile(a.lij[0],a.lij[1],a.lij[2],{noDataValue:P.ELEVATION_NODATA_VALUE,signal:e.signal}).then(function(a){return g(a)},h);var k=c.getTileUrl(a.lij[0],a.lij[1],a.lij[2]);return this._streamDataRequester(k,"binary",e).then(function(a){return f._lercWorker.decode(a,{noDataValue:P.ELEVATION_NODATA_VALUE},
e.signal)}).then(function(a){g({values:a.pixelData,width:a.width,height:a.height,noDataValue:a.noDataValue,minValue:a.minValue,maxValue:a.maxValue})}).catch(function(a){return h(a)})}F.weakAssert(!1,"_requestElevationTileData can only be called for elevation layer views")};c.prototype._requestMapTileData=function(a,b,d,c,e){var g=this;++this._asyncWorkItems;var h=function(b){--g._asyncWorkItems;g._dispatchDataEvent(a,"dataArrived",d,c,b)};b=function(b){--g._asyncWorkItems;x.isAbortError(b)||g._dispatchDataEvent(a,
"dataMissing",d,c,b)};if(F.isVectorTileLayerView(c)){var k=c.tileHandler,m=c.schemaHelper.getLevelRowColumn(a.lij);return f.safeCast(k.getVectorTile3D(m[0],m[1],m[2],0)).then(function(a){r.isAborted(e)?--g._asyncWorkItems:h(a)},b)}if(F.useFetchTileForLayer(c.layer)&&F.isTileLayerView(c))return c.layer.fetchTile(a.lij[0],a.lij[1],a.lij[2],e).then(h,b);k=c.getTileUrl(a.lij[0],a.lij[1],a.lij[2]);null!=c.refreshInterval&&c.refreshTimestamp&&(k+=(-1<k.indexOf("?")?"\x26":"?")+"_ts\x3d"+c.refreshTimestamp);
return this._streamDataRequester(k,"image",e).then(h,b)};c.prototype.requestTilemap=function(a,b,d,c,e,f){var g=this;return e.tilemapCache.fetchTilemap(a.lij[0]+P.TILEMAP_SIZE_EXP,a.lij[1]<<P.TILEMAP_SIZE_EXP,a.lij[2]<<P.TILEMAP_SIZE_EXP,n({},f,{timeout:6E3})).then(function(e){b=g._layerIndexByLayerViewId[d][c.uid];null!=b&&(a.layerInfo[d][b].tilemap=e)}).catch(function(a){})};c.prototype.getTilemapTile=function(a){var b=a.lij[0];return b>P.TILEMAP_SIZE_EXP?X.getTileNLevelsUp(a,P.TILEMAP_SIZE_EXP):
this._topLevelTilemapOnlyTiles[b]};c.prototype._dispatchDataEvent=function(a,b,d,c,e){c=this._layerIndexByLayerViewId[d][c.uid];if(null!=c)a[b](c,d,e);else W.warn("TerrainSurface: received data from unknown layer")};c.prototype.updateTileOverlayParams=function(){if(this.rootTiles){var a=this._iteratorPool.acquire();for(a.reset(this.rootTiles);!a.done;){var b=a.next();b.renderData&&this.overlayManager&&this.overlayManager.setOverlayParamsOfTile(b,b.renderData,this._overlayOpacity)}this._iteratorPool.release(a);
this._renderer.setNeedsRender()}};c.prototype._updateOverlayOpacity=function(a){if(this.overlayManager&&(a=this.overlayManager.updateOpacity(a),!isNaN(a)&&a!==this._overlayOpacity)){var b=this._iteratorPool.acquire();for(b.reset(this.rootTiles);!b.done;){var d=b.next();d.renderData&&(d.renderData.overlayOpacity=a)}this._iteratorPool.release(b);this._overlayOpacity=a;this._renderer.setNeedsRender()}};c.prototype.getStats=function(){var a={numNodes:0,numLeaves:0,numVisible:0,numVisiblePerLevel:[]},
b=this._iteratorPool.acquire();for(b.reset(this.rootTiles);!b.done;){var d=b.next();a.numNodes++;d.renderData&&(a.numLeaves++,d.visible&&(a.numVisible++,d=d.lij[0],a.numVisiblePerLevel[d]=null==a.numVisiblePerLevel[d]?1:a.numVisiblePerLevel[d]+1))}this._iteratorPool.release(b);return a};c.prototype.getUsedMemory=function(){if(!this.tilingScheme)return 0;if(0<this._memoryUsed)return this._memoryUsed;var a=this._iteratorPool.acquire();for(a.reset(this.rootTiles);!a.done;){var b=a.next();this._memoryUsed+=
b.memoryUsed}this._iteratorPool.release(a);return this._memoryUsed};c.prototype.getMemoryUsage=function(){if(!this.tilingScheme)return{};var a=0,b=0,d=0,c=0,e=0,f=0,g=this._iteratorPool.acquire();g.reset(this.rootTiles);for(var h=this.tilingScheme.pixelSize,h=h[0]*h[1]*4;!g.done;){for(var k=g.next(),m=ha(k),l=0,n=k.layerInfo[P.LayerClass.MAP];l<n.length;l++){var q=n[l],q=q.data,r=0,p=0;q instanceof da?r+=ja.getGpuMemoryUsage(q):q instanceof HTMLImageElement?p+=h:q instanceof H&&(f+=q.getGpuMemoryUsage(),
d+=q.getCpuMemoryUsage());k.renderData||m?(a+=p,c+=r):(b+=p,e+=r)}m=0;for(l=k.layerInfo[P.LayerClass.ELEVATION];m<l.length;m++)q=l[m],q=q.data,a+=q?h:0;k.renderData&&(q=k.renderData.textureDescriptor,c+=q?ja.getGpuMemoryUsage(q):0,k=k.renderData.estimatedGeometryMemoryUsage,f+=k,d+=k)}this._iteratorPool.release(g);return{cpuVisibleImageData:a,cpuInvisibleImageData:b,cpuGeometryData:d,gpuVisibleImageData:c,gpuInvisibleImageData:e,gpuGeometryData:f}};c.prototype.getTile=function(a){var b=a.split("/").map(function(a){return+a});
if(0===b[0])return this.rootTiles.forEach(function(a){if(a.lij[1]===b[1]&&a.lij[2]===b[2])return a}),null;var d=Math.pow(2,b[0]),c=Math.floor(b[1]/d),e=Math.floor(b[2]/d),f;this.rootTiles.some(function(a){return a.lij[1]===c&&a.lij[2]===e?(f=a,!0):!1});if(f){for(d=1<<b[0]-1;f.lij[0]<b[0];){var g=b[1]&d?2:0;0<(b[2]&d)&&g++;if(!f.children[g])return console.log("Tile "+a+" doesn't exist, smallest ancestor is "+X.tile2str(f)),null;f=f.children[g];d>>=1}F.weakAssert(f.lij[0]===b[0]&&f.lij[1]===b[1]&&f.lij[2]===
b[2],"not the right tile?");return f}return null};c.prototype.setBorders=function(a){this._renderer.renderPatchBorders=a};c.prototype.setDisableRendering=function(a){this._renderer.renderingDisabled=a};Object.defineProperty(c.prototype,"test",{get:function(){var a=this;return{renderer:this._renderer,lercWorker:this._lercWorker,mergeTile:function(b){return a._mergeTile(b)},updateTiles:function(b){return a._updateTiles(b)}}},enumerable:!0,configurable:!0});k([v.property({value:!1})],c.prototype,"cullBackFaces",
null);k([v.property({readOnly:!0})],c.prototype,"extent",null);k([v.property({readOnly:!0})],c.prototype,"loaded",void 0);k([v.property({value:1})],c.prototype,"baseOpacity",null);k([v.property({readOnly:!0})],c.prototype,"overlayManager",void 0);k([v.property({readOnly:!0})],c.prototype,"manifold",void 0);k([v.property()],c.prototype,"maxTextureScale",void 0);k([v.property({readOnly:!0})],c.prototype,"ready",null);k([v.property({value:1})],c.prototype,"renderOrder",null);k([v.property({readOnly:!0})],
c.prototype,"rootTiles",void 0);k([v.property({value:!0})],c.prototype,"skirtScale",null);k([v.property({readOnly:!0,dependsOn:["tilingScheme.spatialReference"]})],c.prototype,"spatialReference",null);k([v.property({})],c.prototype,"backgroundImage",void 0);k([v.property({type:d})],c.prototype,"backgroundColor",void 0);k([v.property({dependsOn:["backgroundColor","backgroundImage"]})],c.prototype,"_background",null);k([v.property({value:!1})],c.prototype,"slicePlaneEnabled",null);k([v.property({readOnly:!0})],
c.prototype,"tilingScheme",void 0);k([v.property({readOnly:!0,aliasOf:"tilingSchemeLogic.tilingSchemeLocked"})],c.prototype,"tilingSchemeLocked",void 0);k([v.property({readOnly:!0,aliasOf:"tilingSchemeLogic.tilingSchemeDone"})],c.prototype,"tilingSchemeDone",void 0);k([v.property({readOnly:!0})],c.prototype,"tilingSchemeLogic",void 0);k([v.property({value:!0})],c.prototype,"velvetOverground",null);k([v.property({value:!1})],c.prototype,"wireframe",null);return c=k([v.subclass("esri.views.3d.terrain.TerrainSurface")],
c)}(v.declared(h,a));var ea=1.2,ga=80/180*Math.PI,ma=110/180*Math.PI,qa=D.vec4f64.create(),na=C.create(),pa=[0,0,0],sa={spatialReference:null,tile:null,extent:null},ia={spatialReference:null,extent:null,scale:0};return p})},"esri/layers/support/LercWorker":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/extendsHelper ../../core/promiseUtils ../../core/requireUtils ../../core/workers module".split(" "),function(p,c,n,l,k,d,h,g){function f(){return k.create(function(a){return p(["./rasterFormats/LercCodec"],
a)})}Object.defineProperty(c,"__esModule",{value:!0});var b=function(){function a(){}a.prototype._decode=function(a){return f().then(function(b){b=b.decode;b=b(a.buffer,a.options);return{result:b,transferList:[b.pixelData.buffer]}})};return a}(),a=function(a){function b(b){var c=a.call(this)||this;c.scheduler=b;c._threadInitialized=k.create(function(a,e){h.open(d.getAbsMid("./LercWorker",p,g),{strategy:"dedicated",scheduler:b}).then(function(b){void 0===c._thread?(c._thread=b,a()):(b.close(),e())})});
return c}l(b,a);b.prototype.destroy=function(){this._thread&&this._thread.close();this._thread=null};Object.defineProperty(b.prototype,"test",{get:function(){return{threadInitialized:this._threadInitialized}},enumerable:!0,configurable:!0});b.prototype.decode=function(a,b,d){return a&&0!==a.byteLength?this._thread?this._thread.invoke("_decode",{buffer:a,options:b},{transferList:[a],signal:d}):f().then(function(d){d=d.decode;return d(a,b)}):k.resolve(null)};return b}(b);c.LercWorkerMaster=a;var e=
new Map;c.acquireInstance=function(b){var d=e.get(b);d||(d={instance:new a(b),ref:0},e.set(b,d));++d.ref;return d.instance};c.releaseInstance=function(a){if(null!=a){a=a.scheduler;var b=e.get(a);b&&0>=--b.ref&&(b.instance.destroy(),e.delete(a))}};c.default=function(){return new b}})},"esri/views/2d/engine/vectorTiles/VectorTileDisplayObject3D":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/libs/gl-matrix-2/mat4f32 ../../../../core/libs/gl-matrix-2/vec2f32 ../../../../geometry/support/spatialReferenceUtils ../../../webgl ./RenderBucket ../../tiling/TileKey".split(" "),
function(p,c,n,l,k,d,h,g,f){var b="fillVertexBuffer fillDDVertexBuffer fillIndexBuffer outlineVertexBuffer outlineDDVertexBuffer outlineIndexBuffer lineVertexBuffer lineDDVertexBuffer lineIndexBuffer iconVertexBuffer iconDDVertexBuffer iconIndexBuffer textVertexBuffer textDDVertexBuffer textIndexBuffer circleVertexBuffer circleIndexBuffer".split(" ");return function(){function a(){for(var a,b=[],d=0;d<arguments.length;d++)b[d]=arguments[d];this._renderBuckets=[];this._symbolUpdateData=this._vectorTileData=
null;this.coords=[0,0];this.bounds=[0,0,0,0];this.tileTransform={transform:l.mat4f32.create(),displayCoord:k.vec2f32.create()};this.stencilData={mask:0,reference:0};this.triangleCount=0;0<b.length&&(a=this.acquire).call.apply(a,[this].concat(b))}a.prototype.reset=function(){f.pool.release(this.key);this.key=null;this.coords[0]=0;this.coords[1]=0;this.bounds[0]=0;this.bounds[1]=0;this.bounds[2]=0;this.bounds[3]=0;this.resolution=null;this.rotation=0;this.id=this.client=this.styleLayers=this._vectorTileData=
null;this.tileTransform.transform.fill(0);this.tileTransform.displayCoord.fill(0);this.stencilData.mask=0;this.stencilData.reference=0;this._renderBuckets.length=0;this.context=this._symbolUpdateData=null;this.triangleCount=0;this.refKeys=null};a.prototype.acquire=function(a,b,c,f){this.key=a;var e=b.lodAt(a.level),e=null!==e?e.resolution:0,g=b.size[0]*e,h=b.origin,k=a.col*g,m=a.row*g,l=b.spatialReference,n=0;l&&(l._isWrappable?l._isWrappable():l.isWrappable)&&(l=d.getInfo(l),n=l.valid[1]-l.valid[0]);
k=h.x+k+a.world*n;h=h.y-m;this.coords[0]=k;this.coords[1]=h;this.bounds[0]=k;this.bounds[1]=h;this.bounds[2]=k+g;this.bounds[3]=h-g;this.widthInPixels=b.size[1];this.coordRange=4096;this.resolution=e;this.rotation=f;this.styleLayers=c;this.id=a.id};a.prototype.setData=function(a,b,d){this._vectorTileData=a;this.client=b;this.refKeys=d};a.prototype.dispose=function(){for(var a="fillVertexArrayObject fillDDVertexArrayObject outlineVertexArrayObject lineVertexArrayObject lineDDVertexArrayObject iconVertexArrayObject iconDDVertexArrayObject textVertexArrayObject textDDVertexArrayObject circleVertexArrayObject fillVertexBuffer fillDDVertexBuffer fillIndexBuffer outlineVertexBuffer outlineDDVertexBuffer outlineIndexBuffer lineVertexBuffer lineDDVertexBuffer lineIndexBuffer iconVertexBuffer iconDDVertexBuffer iconIndexBuffer textVertexBuffer textDDVertexBuffer textIndexBuffer circleVertexBuffer circleIndexBuffer texture".split(" "),
b=0;b<a.length;++b){var d=a[b];this[d]&&(this[d].dispose(),this[d]=null)}this._renderBuckets.length=0};a.prototype.getCpuMemoryUsage=function(){return null!=this._vectorTileData&&this._vectorTileData.bufferData?this._vectorTileData.bufferData.reduce(function(a,b){return a+b.byteLength},0)+this._vectorTileData.bufferDataInfo.byteLength+this._vectorTileData.bucketDataInfo.byteLength:0};a.prototype.getGpuMemoryUsage=function(){var a=this,d=b.reduce(function(b,d){return a[d]?b+a[d].size:b},0);this.texture&&
(d+=this.texture.descriptor.width*this.texture.descriptor.height*4);return d};a.prototype.attachWithContext=function(a){this.context=a};a.prototype._commitChanges=function(){this._vectorTileData&&(this.dispose(),this._createRenderBuckets(),this._createBufferObjects(),this._vectorTileData=null)};a.prototype._createRenderBuckets=function(){for(var a=new Uint32Array(this._vectorTileData.bucketDataInfo),b=a.length,d=0;d<b;){var c=a[d];switch(a[d+1]){case 0:var f=new g.BackgroundRenderBucket;f.layerID=
c;this._renderBuckets.push(f);d+=2;break;case 1:f=new g.FillRenderBucket;f.layerID=c;f.triangleElementStart=a[d+2];f.triangleElementCount=a[d+3];f.outlineElementStart=a[d+4];f.outlineElementCount=a[d+5];this._renderBuckets.push(f);d+=6;break;case 2:f=new g.LineRenderBucket;f.layerID=c;f.triangleElementStart=a[d+2];f.triangleElementCount=a[d+3];this._renderBuckets.push(f);d+=4;break;case 3:f=new g.SymbolRenderBucket;f.layerID=c;f.isSDF=0!==a[d+2];var h=d+3,c=a[h];h++;if(0<c)for(var k=void 0,l=void 0,
n=void 0,p=0;p<c;p++)k=a[h],l=a[h+1],n=a[h+2],f.markerPerPageElementsMap.set(k,[l,n]),h+=3;var z=a[h];h++;if(0<z)for(n=l=k=void 0,p=0;p<z;p++)k=a[h],l=a[h+1],n=a[h+2],f.glyphPerPageElementsMap.set(k,[l,n]),h+=3;this._renderBuckets.push(f);d+=5+3*c+3*z;break;case 4:f=new g.CircleRenderBucket;f.layerID=c;f.triangleElementStart=a[d+2];f.triangleElementCount=a[d+3];this._renderBuckets.push(f);d+=4;break;default:console.error("Bad bucket type!"),d+=2}}};a._createBufferToObject=function(){var a=[];a[1]=
{create:h.BufferObject.createVertex,var:"fillVertexBuffer"};a[2]={create:h.BufferObject.createVertex,var:"fillDDVertexBuffer"};a[3]={create:h.BufferObject.createIndex,var:"fillIndexBuffer"};a[4]={create:h.BufferObject.createVertex,var:"outlineVertexBuffer"};a[5]={create:h.BufferObject.createVertex,var:"outlineDDVertexBuffer"};a[6]={create:h.BufferObject.createIndex,var:"outlineIndexBuffer"};a[7]={create:h.BufferObject.createVertex,var:"lineVertexBuffer"};a[8]={create:h.BufferObject.createVertex,var:"lineDDVertexBuffer"};
a[9]={create:h.BufferObject.createIndex,var:"lineIndexBuffer"};a[10]={create:h.BufferObject.createVertex,var:"iconVertexBuffer"};a[11]={create:h.BufferObject.createVertex,var:"iconDDVertexBuffer"};a[12]={create:h.BufferObject.createIndex,var:"iconIndexBuffer"};a[13]={create:h.BufferObject.createVertex,var:"textVertexBuffer"};a[14]={create:h.BufferObject.createVertex,var:"textDDVertexBuffer"};a[15]={create:h.BufferObject.createIndex,var:"textIndexBuffer"};a[16]={create:h.BufferObject.createVertex,
var:"circleVertexBuffer"};a[17]={create:h.BufferObject.createIndex,var:"circleIndexBuffer"};return a};a.prototype._createBufferObjects=function(){for(var b=this.context,d=new Uint32Array(this._vectorTileData.bufferDataInfo),c=d.length,f=0,g=0;g<c;g+=2,f++){var h=d[g];if(!(0>=d[g+1]||0===this._vectorTileData.bufferData[f].byteLength)){var k=a.bufferToObject[h];k?this[k.var]?this[k.var].setData(this._vectorTileData.bufferData[f]):this[k.var]=k.create(b,35044,this._vectorTileData.bufferData[f]):console.error("Bad buffer type "+
h)}}};a.prototype.render=function(a){var b=this.context,d=a.renderer;if(b&&d){this._commitChanges();var c=a.drawphase;this._symbolUpdateData&&(this._updateSymbolData(a,this._symbolUpdateData),this._symbolUpdateData=null);b.setStencilFunction(514,this.stencilData.reference,this.stencilData.mask);var e=this.styleLayers,f,g=void 0!==a.layerOpacity?a.layerOpacity:1;if(0!==g){var h=this._renderBuckets.length;if(0===c)for(var k=h-1;0<=k;k--){var l=this._renderBuckets[k];f=e.layers[l.layerID];if(!l||!f)break;
1!==l.type&&0!==l.type||!l.hasData()||(this.triangleCount+=d.renderBucket(b,l,a.displayLevel,a.requiredLevel,c,this,f,g))}else for(k=0;k<h;k++){l=this._renderBuckets[k];f=e.layers[l.layerID];if(!l||!f)break;l.hasData()&&(this.triangleCount+=d.renderBucket(b,l,a.displayLevel,a.requiredLevel,c,this,f,g))}}}};a.prototype._updateSymbolData=function(a,b){if(!b||!b.bucketDataInfo)return!0;a=new Uint32Array(b.bucketDataInfo);var d=a.length;if(0===d)return!0;if(this.context){for(var c=this.context,e=new Uint32Array(b.bufferDataInfo),
f=e.length,k=0,m=0;m<f;m+=2,k++)switch(e[m]){case 10:this.iconVertexBuffer&&(this.iconVertexBuffer.dispose(),this.iconVertexBuffer=null);this.iconVertexBuffer=h.BufferObject.createVertex(c,35044,b.bufferData[k]);break;case 11:this.iconDDVertexBuffer&&(this.iconDDVertexBuffer.dispose(),this.iconDDVertexBuffer=null);this.iconDDVertexBuffer=h.BufferObject.createVertex(c,35044,b.bufferData[k]);break;case 12:this.iconIndexBuffer&&(this.iconIndexBuffer.dispose(),this.iconIndexBuffer=null);this.iconIndexBuffer=
h.BufferObject.createIndex(c,35044,b.bufferData[k]);break;case 13:this.textVertexBuffer&&(this.textVertexBuffer.dispose(),this.textVertexBuffer=null);this.textVertexBuffer=h.BufferObject.createVertex(c,35044,b.bufferData[k]);break;case 14:this.textDDVertexBuffer&&(this.textDDVertexBuffer.dispose(),this.textDDVertexBuffer=null);this.textDDVertexBuffer=h.BufferObject.createVertex(c,35044,b.bufferData[k]);break;case 15:this.textIndexBuffer&&(this.textIndexBuffer.dispose(),this.textIndexBuffer=null),
this.textIndexBuffer=h.BufferObject.createIndex(c,35044,b.bufferData[k])}b=[];for(c=0;c<this._renderBuckets.length;c++)this._renderBuckets[c]instanceof g.SymbolRenderBucket||b.push(this._renderBuckets[c]);this._renderBuckets=b;for(c=0;c<d;){f=a[c];e=new g.SymbolRenderBucket;e.layerID=f;e.isSDF=0!==a[c+2];this.styleLayers.layers.length>e.layerID&&this.styleLayers.layers[e.layerID].type===e.type&&b.push(e);var l=c+3,f=a[l];l++;if(0<f)for(var n=m=k=void 0,p=0;p<f;p++)k=a[l],m=a[l+1],n=a[l+2],e.markerPerPageElementsMap.set(k,
[m,n]),l+=3;var A=a[l];l++;if(0<A)for(n=m=k=void 0,p=0;p<A;p++)k=a[l],m=a[l+1],n=a[l+2],e.glyphPerPageElementsMap.set(k,[m,n]),l+=3;c+=5+3*f+3*A}this.iconVertexArrayObject&&(this.iconVertexArrayObject.dispose(),this.iconVertexArrayObject=null);this.iconDDVertexArrayObject&&(this.iconDDVertexArrayObject.dispose(),this.iconDDVertexArrayObject=null);this.textVertexArrayObject&&(this.textVertexArrayObject.dispose(),this.textVertexArrayObject=null);this.textDDVertexArrayObject&&(this.textDDVertexArrayObject.dispose(),
this.textDDVertexArrayObject=null);return!0}};a.bufferToObject=a._createBufferToObject();return a}()})},"esri/views/webgl":function(){define("require exports ./webgl/BufferObject ./webgl/enums ./webgl/FramebufferObject ./webgl/Program ./webgl/RenderingContext ./webgl/ShaderCompiler ./webgl/Texture ./webgl/VertexArrayObject ./webgl/ProgramCache ./webgl/programUtils ./webgl/context-util".split(" "),function(p,c,n,l,k,d,h,g,f,b,a,e,m){Object.defineProperty(c,"__esModule",{value:!0});c.BufferObject=n;
c.enums=l;c.FramebufferObject=k;c.Program=d;c.RenderingContext=h;c.ShaderCompiler=g;c.Texture=f;c.VertexArrayObject=b;c.ProgramCache=a.ProgramCache;c.createProgram=e.createProgram;c.glslifyDefineMap=e.glslifyDefineMap;c.createContextOrErrorHTML=m.createContextOrErrorHTML})},"esri/views/webgl/ProgramCache":function(){define(["require","exports","./programUtils"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(c){this._programCacheByTemplate=new Map;this._rctx=
c}c.prototype.dispose=function(){this._programCacheByTemplate.forEach(function(c){c.programs.forEach(function(d){d.dispose()})});this._programCacheByTemplate=null};c.prototype.getProgram=function(c,d){var h=this;this._programCacheByTemplate.has(c)||this.addProgramTemplate(c,function(d){return n.createProgram(h._rctx,c,d)});return this.getProgramTemplateInstance(c,d)};c.prototype.addProgramTemplate=function(c,d){this._programCacheByTemplate.set(c,{constructor:d,programs:new Map})};c.prototype.getProgramTemplateInstance=
function(c,d){if(c=this._programCacheByTemplate.get(c)){var h=d?JSON.stringify(d):"default";c.programs.has(h)||(d=c.constructor(d),c.programs.set(h,d));return c.programs.get(h)}return null};return c}();c.ProgramCache=p})},"esri/views/2d/engine/vectorTiles/RenderBucket":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});p=function(){return function(c){this.type=c}}();c.RenderBucket=p;var l=function(c){function d(){var d=
c.call(this,2)||this;d.triangleElementStart=0;d.triangleElementCount=0;return d}n(d,c);d.prototype.hasData=function(){return 0<this.triangleElementCount};d.prototype.triangleCount=function(){return this.triangleElementCount/3};return d}(p);c.LineRenderBucket=l;l=function(c){function d(){var d=c.call(this,1)||this;d.triangleElementStart=0;d.triangleElementCount=0;d.outlineElementStart=0;d.outlineElementCount=0;return d}n(d,c);d.prototype.hasData=function(){return 0<this.triangleElementCount||0<this.outlineElementCount};
d.prototype.triangleCount=function(){return(this.triangleElementCount+this.outlineElementCount)/3};return d}(p);c.FillRenderBucket=l;l=function(c){function d(){var d=c.call(this,3)||this;d.markerPerPageElementsMap=new Map;d.glyphPerPageElementsMap=new Map;d.isSDF=!1;return d}n(d,c);d.prototype.hasData=function(){return 0<this.markerPerPageElementsMap.size||0<this.glyphPerPageElementsMap.size};d.prototype.triangleCount=function(){var d=0;this.markerPerPageElementsMap.forEach(function(c){d+=c[1]});
this.glyphPerPageElementsMap.forEach(function(c){d+=c[1]});return d/3};return d}(p);c.SymbolRenderBucket=l;l=function(c){function d(){var d=c.call(this,4)||this;d.triangleElementStart=0;d.triangleElementCount=0;return d}n(d,c);d.prototype.hasData=function(){return 0<this.triangleElementCount};d.prototype.triangleCount=function(){return this.triangleElementCount/3};return d}(p);c.CircleRenderBucket=l;p=function(c){function d(){return c.call(this,0)||this}n(d,c);d.prototype.hasData=function(){return!0};
d.prototype.triangleCount=function(){return 2};return d}(p);c.BackgroundRenderBucket=p})},"esri/views/2d/tiling/TileKey":function(){define(["require","exports","../../../core/ObjectPool"],function(p,c,n){return function(){function c(c,d,h,g){this.set(c,d,h,g)}c.from=function(k,d,h,g){return c.pool.acquire(k,d,h,g)};c.getId=function(c,d,h,g){return"object"===typeof c?c.level+"/"+c.row+"/"+c.col+"/"+c.world:c+"/"+d+"/"+h+"/"+g};Object.defineProperty(c.prototype,"key",{get:function(){return this},enumerable:!0,
configurable:!0});Object.defineProperty(c.prototype,"id",{get:function(){return this.toString()},enumerable:!0,configurable:!0});c.prototype.equals=function(c){return this.level===c.level&&this.row===c.row&&this.col===c.col&&this.world===c.world};c.prototype.release=function(){this.world=this.col=this.row=this.level=0};c.prototype.set=function(c,d,h,g){null==c?this.world=this.col=this.row=this.level=0:"object"===typeof c?(this.level=c.level||0,this.row=c.row||0,this.col=c.col||0,this.world=c.world||
0):"string"===typeof c?(c=c.split("/"),d=c[1],h=c[2],g=c[3],this.level=parseFloat(c[0]),this.row=parseFloat(d),this.col=parseFloat(h),this.world=parseFloat(g)):(this.level=+c,this.row=+d,this.col=+h,this.world=+g||0);return this};c.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world};c.prototype.getChildKeys=function(){var k=this.level+1,d=this.row<<1,h=this.col<<1,g=this.world;return[c.pool.acquire(k,d,h,g),c.pool.acquire(k,d,h+1,g),c.pool.acquire(k,d+1,h,g),
c.pool.acquire(k,d+1,h+1,g)]};c.prototype.compareRowMajor=function(c){return this.row<c.row?-1:this.row>c.row?1:this.col<c.col?-1:this.col>c.col?1:0};c.sort=function(k){return k.map(function(d){return c.from(d)}).sort(function(d,c){return d.compareRowMajor(c)}).map(function(d){return d.id})};c.pool=new n(c,!0,null,25,50);return c}()})},"esri/views/3d/terrain/ElevationData":function(){define(["require","exports","../../../core/mathUtils","../support/mathUtils","./TerrainConst"],function(p,c,n,l,k){return function(){function d(d,
c,f,b){this.samplerData=null;this.level=d;this.i=c;this.j=f;this.extent=b}d.prototype.computeMinMaxValue=function(d,c,f,b){var a=Infinity,e=-Infinity;d-=this.level;var g=Math.pow(2,d);if(Math.floor(c/g)===this.i&&Math.floor(f/g)===this.j&&0<d){var h=this.samplerData.width,n=this.samplerData.pixelData,p=.5*k.ELEVATION_NODATA_VALUE;d=(h-1)/g;f=(f-this.j*g)*d;var r=(c-this.i*g)*d;if(1>d){var x=Math.floor(f),w=Math.floor(r),v=x+w*h;c=n[v];var g=n[v+1],y=n[v+h],v=n[v+h+1];if(c+g+y+v<p)return a=f-x,p=r-
w,e=l.bilerp(c,g,y,v,a,p),h=l.bilerp(c,g,y,v,a+d,p),n=l.bilerp(c,g,y,v,a,p+d),d=l.bilerp(c,g,y,v,a+d,p+d),b[0]=Math.min(e,h,n,d),b[1]=Math.max(e,h,n,d),b;f=x;r=w;d=1}else f=Math.floor(f),r=Math.floor(r),d=Math.ceil(d);for(c=f;c<=f+d;c++)for(g=r;g<=r+d;g++)v=c+g*h,y=n[v],y<p?(a=Math.min(a,y),e=Math.max(e,y)):(a=0<a?0:a,e=0>e?0:e)}b[0]=a;b[1]=e;return b};d.create=function(c,g,f){c=new d(c[0],c[1],c[2],g);g=f.noDataValue;var b=f.minValue,a=f.maxValue;if(null==b||null==a){for(var e=f.values,b=Infinity,
a=-Infinity,h=!0,k=0;k<e.length;k++){var l=e[k];l!==g&&(b=l<b?l:b,a=l>a?l:a,h=!1)}h&&(a=b=0)}a=-3E38<a?a:0;c.samplerData={pixelData:f.values,width:f.width,height:f.height,minValue:b,maxValue:a,noDataValue:g,safeWidth:.99999999*(f.width-1),dx:(f.width-1)/(c.extent[2]-c.extent[0]),dy:(f.width-1)/(c.extent[3]-c.extent[1]),x0:c.extent[0],y1:c.extent[3]};c.bounds=[b,a];return c};d.sample=function(d,c,f){for(var b=0;b<f.length;b++){var a=f[b];if(a){var e=a.safeWidth,g=a.width,h=a.pixelData,l=n.clamp(a.dy*
(a.y1-c),0,e),a=n.clamp(a.dx*(d-a.x0),0,e),e=Math.floor(l),p=Math.floor(a),r=e*g+p,x=r+g,w=h[r],g=h[x],r=h[r+1],h=h[x+1];if(w+g+r+h<.5*k.ELEVATION_NODATA_VALUE)return l-=e,a-=p,d=w+(r-w)*a,d+(g+(h-g)*a-d)*l}}return null};return d}()})},"esri/views/3d/terrain/ElevationTileAgent":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/ObjectPool ./TerrainConst ./TileAgent".split(" "),function(p,c,n,l,k,d){return function(d){function c(){var c=null!==d&&d.apply(this,arguments)||
this;c._scaleRangeEnabled=!1;return c}n(c,d);c.prototype._desiredMinLevelDelta=function(){return k.ELEVATION_DESIRED_RESOLUTION_LEVEL-(this.tile.vlevel-this.tile.lij[0])};c.Pool=new l(c);return c}(d)})},"esri/views/3d/terrain/TileAgent":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./TerrainConst","./tileUtils"],function(p,c,n,l,k){var d=Error("Abstract method called on TileAgent");p=function(){function d(){}d.prototype.init=function(d,c,b,a){this.tile=d;this._layerIdx=
c;this._layerClass=b;this._suspended=a;this._tileLayerInfo=d.getLayerInfo(c,b);this._tileRequested=null;d=this._findAncestorWithData();this._setUpsampleTile(d)};d.prototype.startLoading=function(){return this._requestNext()};d.prototype.dispose=function(){this._tileRequested&&(this._tileRequested.unrequestLayerData(this._layerIdx,this._layerClass,this),this._tileRequested=null);this._tileLayerInfo=this.tile=null};d.prototype.setSuspension=function(d){d!==this._suspended&&((this._suspended=d)?this._tileRequested&&
(this._tileRequested.unrequestLayerData(this._layerIdx,this._layerClass,this),this._tileRequested=null):this._tileLayerInfo.data||this.update())};d.prototype.update=function(){var d=this._findAncestorWithData();this._setUpsampleTile(d);return this._requestNext()};d.prototype.dataArrived=function(d){this._setUpsampleTile(d);this._tileRequested=null;d===this.tile?this.tile.updateRenderData(this._layerClass):this._requestNext()};d.prototype.dataMissing=function(d){this._tileRequested=null;this._tileLayerInfo.disposeData();
this._requestNext()};d.prototype._agentDone=function(){this.tile.agentDone(this._layerIdx,this._layerClass);this.dispose()};d.prototype._requestNext=function(){if(this._suspended)return!0;var d=this._findNextDownload();if(this._tileRequested){if(d===this._tileRequested)return!0;this._tileRequested.unrequestLayerData(this._layerIdx,this._layerClass,this);this._tileRequested=null}d?d.requestLayerData(this._layerIdx,this._layerClass,this)&&(this._tileRequested=d):this._agentDone();return!!this._tileRequested};
d.prototype._findNextDownload=function(){for(var d=this._layerIdx,c=this._layerClass,b=this.tile.surface.layerViewByIndex(d,c),a=b.layer,e=b.dataLevelRange,b=e.minLevel,e=e.maxLevel,h=this._desiredMinLevelDelta(),n=l.START_LOADING_LEVEL_DELTA+h,p=this._scaleRangeEnabled?k.fallsWithinLayer:function(){return!0},t,r=this.tile,x=0,w=this._tileLayerInfo.upsampleFromTile,w=w?w.tile.lij[0]:-1,v=this.tile.surface,y=v.getTilemapTile(r);r&&p(r,a,!1)&&r.lij[0]>=b;){var z=r.lij[0],A=r.layerInfo[c][d];if(A.data&&
x>=h){z>w&&this._setUpsampleTile(r);A.dataInvalidated&&(t=r);break}if((!y||y.hasDataAvailable(r,d,c))&&z<=e&&!A.data&&!A.dataMissing){if(!t||0===z%l.LOADING_LEVEL_MODULO||this.tile.lij[0]-t.lij[0]<h)t=r;if(x>=n)break}(r=r.parent)&&y&&(y=y.parent||v.getTilemapTile(r));x++}t&&this.tile.lij[0]-t.lij[0]<h&&this._tileLayerInfo.upsampleFromTile&&(t=null);return t};d.prototype._findAncestorWithData=function(){for(var d=this.tile.vlevel,c=this._desiredMinLevelDelta(),b,a=this.tile;a;a=a.parent)if(a.hasLayerData(this._layerIdx,
this._layerClass)){if(d-a.lij[0]>=c)return a;b=a}return b};d.prototype._setUpsampleTile=function(d){this._tileLayerInfo.setUpsampleInfo(this.tile,d);this.tile.updateRenderData(this._layerClass)};Object.defineProperty(d.prototype,"test",{get:function(){var d=this;return{findNextDownload:function(){return d._findNextDownload()},tileLayerInfo:this._tileLayerInfo}},enumerable:!0,configurable:!0});return d}();c=function(c){function g(){return null!==c&&c.apply(this,arguments)||this}n(g,c);g.prototype._desiredMinLevelDelta=
function(){throw d;};return g}(p);(p||(p={})).DONE=new c;return p})},"esri/views/3d/terrain/tileUtils":function(){define(["require","exports","../../../core/PooledArray"],function(p,c,n){function l(d){return d[0]+"/"+d[1]+"/"+d[2]}function k(d,c){c(d);for(var b=0;4>b;b++){var a=d.children[b];a&&k(a,c)}}function d(c,f){for(var b=0;4>b;b++){var a=c.children[b];a&&d(a,f)}f(c)}function h(d,c,b){d=d.screenDepth;c=c.screenDepth;return d<c?-b:d>c?b:0}Object.defineProperty(c,"__esModule",{value:!0});p=function(){function d(){this.q=
new n;this._last=null;this.done=!0}d.prototype.resetOne=function(d){this.q.clear();this.q.push(d);this._last=null;this.done=!1};d.prototype.reset=function(d){this.q.clear();d&&this.q.pushArray(d);this._last=null;this.done=0===this.q.length};d.prototype.skipSubtree=function(){this._last=null;0===this.q.length&&(this.done=!0)};d.prototype.next=function(){if(this.done)return null;if(this._last){var d=this._last.children;if(d[0])for(var b=3;0<=b;b--){var a=d[b];a&&this.q.push(a)}}this._last=this.q.pop();
0!==this.q.length||this._last.children[0]||(this.done=!0);return this._last};return d}();c.IteratorPreorder=p;p=function(){function d(){this.q=new n;this.done=!0}d.prototype.reset=function(d){this.q.clear();if(d)for(this.q.pushArray(d),d=0;d<this.q.length;++d)for(var b=this.q.data[d],a=0;4>a;a++){var c=b.children[a];c&&this.q.push(c)}this.done=0===this.q.length};d.prototype.next=function(){var d=this.q.pop();this.done=0===this.q.length;return d};return d}();c.IteratorPostorder=p;c.lij2str=l;c.tile2str=
function(d){return l(d.lij)};c.traverseTilesPreorder=function(d,c){if(Array.isArray(d))for(var b=0;b<d.length;b++)k(d[b],c);else k(d,c)};c.traverseTilesPostorder=function(c,f){if(Array.isArray(c))for(var b=0;b<c.length;b++)d(c[b],f);else d(c,f)};c.findParentByLIJ=function(d,c){for(;d;d=d.parent)if(d.hasLij(c))return d;return null};c.fallsWithinLayer=function(d,c,b){if(!c)return!1;var a=c.fullExtent,e=d.extent;if(b){if(e[0]<a.xmin||e[1]<a.ymin||e[2]>a.xmax||e[3]>a.ymax)return!1}else if(a.xmin>e[2]||
a.ymin>e[3]||a.xmax<e[0]||a.ymax<e[1])return!1;d=d.surface.tilingScheme.levels[d.lij[0]].scale;return 0<c.minScale&&d>1.00000001*c.minScale||0<c.maxScale&&d<.99999999*c.maxScale?!1:!0};c.isPosWithinTile=function(d,c){d=d.extent;return c[0]>=d[0]&&c[1]>=d[1]&&c[0]<=d[2]&&c[1]<=d[3]};c.getTileNLevelsUp=function(d,c){for(;c--;)d=d.parent;return d};c.nextTileInAncestry=function(d,c){var b=d.lij[0]-c.lij[0]-1,a=d.lij[2]>>b,e=0;d.lij[1]>>b&1&&(e+=2);a&1&&(e+=1);return c.children[e]};c.sortTiles=function(d,
c){c.sort(function(b,a){return h(b,a,d)})};c.compareTiles=h;c.computeUpsampleInfo=function(d,c,b){for(var a=1,e=0,f=0;d!==c;)if(a*=.5,e*=.5,f*=.5,d.lij[2]&1&&(e+=.5),0===(d.lij[1]&1)&&(f+=.5),d=d.parent,null==d)throw Error("tile was not a descendant of upsampleTile");b.init(c,e,f,a)};c.hasVisibleSiblings=function(d){for(var c=0;c<d.length;c++){var b=d[c],a=b.parent;if(a)for(var e=0;4>e;e++){var g=a.children[e];if(g&&g!==b&&g.visible)return!0}}return!1}})},"esri/views/3d/terrain/MapTileAgent":function(){define(["require",
"exports","../../../core/tsSupport/extendsHelper","../../../core/ObjectPool","./TileAgent"],function(p,c,n,l,k){return function(d){function c(){var c=d.call(this)||this;c._scaleRangeEnabled=!0;return c}n(c,d);c.prototype._desiredMinLevelDelta=function(){return 0};c.Pool=new l(c);return c}(k)})},"esri/views/3d/terrain/OverlayManager":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Graphic ../../../core/Accessor ../../../core/Handles ../../../core/has ../../../core/Logger ../../../core/mathUtils ../../../core/maybe ../../../core/scheduling ../../../core/screenUtils ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/vec2 ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../core/libs/gl-matrix-2/vec4 ../../../core/libs/gl-matrix-2/vec4f64 ../../../geometry/Point ../../../geometry/support/aaBoundingRect ../../../symbols/SimpleMarkerSymbol ../state/utils/viewUtils ../support/animationUtils ../support/debugFlags ../support/debugFlags ../support/earthUtils ../support/mathUtils ../support/projectionUtils ../support/stack ../webgl-engine/lib/Intersector ../webgl-engine/lib/localOrigin".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z,A,B,D,C,E,H,G,I,K,M){Object.defineProperty(c,"__esModule",{value:!0});var T=[[-.1,-2,3.9,2],[-.1,-3.9,3.9,.1],[-2,-3.9,2,.1],[-3.9,-3.9,.1,.1],[-3.9,-2,.1,2],[-3.9,-.1,.1,3.9],[-2,-.1,2,3.9],[-.1,-.1,3.9,3.9]],N=f.getLogger("esri.views.3d.OverlayManager"),S;p=function(d){function c(){var a=null!==d&&d.apply(this,arguments)||this;a._handles=new h;a._overlaySR=null;a._renderSR=null;a._overlaySREqualsRenderSR=!0;a._connectedLayers={};a._overlays=null;
a._scale=0;a._placementDirty=!1;a._drawTexturesDirty=!1;a._isSpherical=!1;a._latestOriginId=0;a._maxResolution=g("esri-mobile")?2048:4096;a._animationTimeLast=0;a.opacity=0;return a}n(c,d);Object.defineProperty(c.prototype,"hasHighlights",{get:function(){return this._renderer.hasHighlights},enumerable:!0,configurable:!0});c.prototype.initialize=function(){var a=this;this._stage=this.view._stage;this._renderer=this._stage.renderView.getDrapedRenderer();this._renderer.onHasHighlightsChanged=function(){return a.onHasHighlightsChanged()};
this._renderer.onContentChanged=function(){return a.setDrawTexturesDirty()};this._renderer.forceUpdate=function(b){a.updateOverlays(b);a._drawOverlayTextures()};this.groundIntersector=new K(this.view.viewingMode);this.groundIntersector.enable.backfacesTerrain=!0;this.groundIntersector.enable.invisibleTerrain=!0;this.groundIntersector.enable.hud=!1;this._handles.add([this.view.watch(["pointsOfInterest.renderPointOfView","pointsOfInterest.centerOnSurfaceFrequent.location","pixelRatio"],function(){return a.setOverlayPlacementDirty()}),
this.terrainSurface.on("elevation-change",function(){return a.setOverlayPlacementDirty()}),this.view.on("resize",function(){return a.setOverlayPlacementDirty()}),e.addFrameTask({preRender:function(b){a.hasOverlays()&&(a._checkAnimationNeedsRedraw(b),a._drawOverlayTextures())}})])};c.prototype.destroy=function(){for(var a in this._connectedLayers)this.unregisterLayerView(this._connectedLayers[a].layerView);this._disposeOverlays();this._handles&&(this._handles.destroy(),this._handles=null)};c.prototype.onHasHighlightsChanged=
function(){this.setOverlayPlacementDirty();this.notifyChange("hasHighlights")};c.prototype.hasOverlays=function(){return!!this._overlays};c.prototype.setSpatialReference=function(a,b){(this._overlaySR=a)?(this._renderSR=this.view.renderSpatialReference,this._overlaySREqualsRenderSR=this._overlaySR.equals(this._renderSR),this._longitudeCyclical=(this._isSpherical=b)?a.isWebMercator?new H.Cyclical(-2.0037508342788905E7,2.0037508342788905E7):new H.Cyclical(-180,180):null):(this._disposeOverlays(),this._longitudeCyclical=
null)};c.prototype.registerLayerView=function(a){var b=this,d=a.layer.uid;if(this._connectedLayers[d])N.warn("[OverlayManager#registerLayerView]: Layer "+d+" is already connected");else{var c=a.on("draped-data-change",function(){return b.setOverlayPlacementDirty()});this._connectedLayers[d]={eventHandles:[c],layerView:a};a.setDrapingExtent&&this._overlays&&this._overlays.forEach(function(d,c){a.setDrapingExtent(c,d.extent,b._overlaySR,d.resolution,d.renderLocalOrigin,d.pixelRatio)});this.setOverlayPlacementDirty();
this._setLayerViewOverlayUpdating(a,!0)}};c.prototype.unregisterLayerView=function(a){for(var b in this._connectedLayers){var d=this._connectedLayers[b];if(d.layerView===a){if(d.eventHandles)for(var c=0;c<d.eventHandles.length;c++)d.eventHandles[c].remove();delete this._connectedLayers[b];this.setOverlayPlacementDirty();a.destroyed||(a.overlayUpdating=!1)}}};c.prototype.setOverlayPlacementDirty=function(){this._placementDirty||(this._placementDirty=!0,this._setOverlayUpdating(!0))};c.prototype._setLayerViewOverlayUpdating=
function(a,b){if(!b||!a.suspended&&a.hasDraped)a.overlayUpdating=b};c.prototype._setOverlayUpdating=function(b){for(var d in this._connectedLayers)this._setLayerViewOverlayUpdating(this._connectedLayers[d].layerView,b);d=this.view.graphicsView;a.isSome(d)&&(d.overlayUpdating=b);this.terrainSurface.setPendingUpdates()};c.prototype.updateOverlays=function(a){void 0===a&&(a=this.view.state.camera);if(this._overlaySR){var d;d=b.nextHighestPowerOfTwo(Math.max(a.fullWidth,a.fullHeight)+256);var c=Math.min(d,
this._maxResolution);this._computeOverlayExtents(a,d,L);this._initOverlays();this._updateOverlay(0,L.inner,c,1);this._updateOverlay(1,L.outer,c,y.width(L.inner)/y.width(L.outer));this.opacity=1;this.terrainSurface.updateTileOverlayParams();this._placementDirty=!1;this.setDrawTexturesDirty()}};c.prototype._updateOverlay=function(a,b,d,c){var e=this._overlays[a],f;a:{f=e.extent;for(var g=D.TESTS_DISABLE_UPDATE_THROTTLE_THRESHOLDS?0:1E-5*Math.max(b[2]-b[0],b[3]-b[1],f[2]-f[0],f[3]-f[1]),h=0;4>h;h++)if(Math.abs(f[h]-
b[h])>g){f=!0;break a}f=!1}if(f||d!==e.resolution||e.pixelRatio!==c){y.set(e.extent,b);e.resolution=d;e.pixelRatio=c;c=y.center(e.extent);e.renderLocalOrigin=M.fromValues(c[0],c[1],0,"OV_"+this._latestOriginId++);for(var k in this._connectedLayers)c=this._connectedLayers[k].layerView,c.setDrapingExtent&&c.setDrapingExtent(a,b,this._overlaySR,d,e.renderLocalOrigin,e.pixelRatio)}};c.prototype.needsUpdate=function(){return this._placementDirty&&!!this._overlaySR};c.prototype.updateOpacity=function(a){if(!this._overlays)return 1;
var d=this._scale;return 3.5*a<d?Math.sqrt(b.clamp((a-d/10)/(d/3.5-d/10),0,1)):1};c.prototype.setOverlayParamsOfTile=function(a,b,d){var c=this._overlays[0],e=this._overlays[1];a=y.intersection(a.extent,a.surface.extent,F);this._rectInsideRect(a,c.extent)?(this._setTileOverlayData(a,c,b.overlays[0]),this._invalidateTileOverlayData(b.overlays[1])):this._rectanglesOverlap(a,c.extent)?(this._setTileOverlayData(a,c,b.overlays[0]),this._setTileOverlayData(a,e,b.overlays[1])):(this._rectanglesOverlap(a,
e.extent)?this._setTileOverlayData(a,e,b.overlays[0]):this._invalidateTileOverlayData(b.overlays[0]),this._invalidateTileOverlayData(b.overlays[1]));b.overlayOpacity=void 0!==d?d:1};c.prototype.overlayPixelSizeInMapUnits=function(a){if(!this._overlays)return 0;var b=this._overlays[0],d=this._overlays[1];a=this._pointIsInExtent(a,b.extent)?b:d;return(a.extent[2]-a.extent[0])/a.resolution};c.prototype._setTileOverlayData=function(a,b,d){var c=b.extent;d.texScale[0]=(a[2]-a[0])/(c[2]-c[0]);d.texScale[1]=
(a[3]-a[1])/(c[3]-c[1]);var e=a[0];if(this._longitudeCyclical){var e=this._longitudeCyclical.minimalMonotonic(c[0],e),f=this._longitudeCyclical.minimalMonotonic(c[0],a[2]);e>f&&(e=f-(a[2]-a[0]))}d.texOffset[0]=(e-c[0])/(c[2]-c[0]);d.texOffset[1]=(a[1]-c[1])/(c[3]-c[1]);d.renderTargetId=b.valid?b.renderTargetId:null;d.highlightRenderTargetId=b.highlightValid?b.highlightRenderTargetId:null;d.waterMaskRenderTargetId=b.waterMaskValid?b.waterMaskRenderTargetId:null};c.prototype._invalidateTileOverlayData=
function(a){a.renderTargetId=null;a.highlightRenderTargetId=null;a.waterMaskRenderTargetId=null};c.prototype._createEmptyOverlay=function(a){var b=this._renderer.createRenderTarget("overlay"+a,!0,8,9987),d=this._renderer.createRenderTarget("overlayHighlight"+a,!1,8,9987);a=this._renderer.createRenderTarget("overlayWaterMask"+a,!0,8,9987);return{extent:y.create(),resolution:0,renderTargetId:b,valid:!1,highlightRenderTargetId:d,highlightValid:!1,waterMaskRenderTargetId:a,waterMaskValid:!1,renderLocalOrigin:M.fromValues(0,
0,0,"O"),pixelRatio:1}};c.prototype._initOverlays=function(){this._overlays||(this._overlays=[this._createEmptyOverlay(0),this._createEmptyOverlay(1)])};c.prototype._disposeOverlays=function(){var a=this;this._overlays&&(this._overlays.forEach(function(b){a._renderer.disposeRenderTarget(b.renderTargetId);a._renderer.disposeRenderTarget(b.highlightRenderTargetId);a._renderer.disposeRenderTarget(b.waterMaskRenderTargetId)}),this._overlays=null)};c.prototype._checkAnimationNeedsRedraw=function(a){a.time-
this._animationTimeLast<B.DESIRED_DRAPED_ANIMATION_MS||(this._animationTimeLast=a.time,this._renderer.updateAnimations(a.time)&&(this._drawTexturesDirty=!0))};c.prototype.setDrawTexturesDirty=function(){this._overlays?this._drawTexturesDirty||(this._drawTexturesDirty=!0,this._setOverlayUpdating(!0)):this.setOverlayPlacementDirty()};c.prototype._intersectGroundFromView=function(a,b,d,c){var e=m.createRenderScreenPointArray3(b*a.fullWidth,d*a.fullHeight,1),e=a.unprojectPoint(e,I.sv3d.get());b=m.createRenderScreenPointArray3(b*
a.fullWidth,d*a.fullHeight,0);b=a.unprojectPoint(b,I.sv3d.get());this.groundIntersector.intersect([],b,e,null,a,null,!1);this.view.basemapTerrain.intersect(this.groundIntersector,null,b,e);return this.groundIntersector.results.min.getIntersectionPoint(c)};c.prototype._findHorizonBasedPointOfInterest=function(a,d,c){var e=.5;if("global"===this.view.viewingMode){e=r.vec3f64.clone(a.eye);t.vec3.normalize(e,e);t.vec3.negate(e,e);d=t.vec3.length(d);d=Math.asin(d/t.vec3.length(a.eye));var f=Math.acos(t.vec3.dot(a.viewForward,
e)),e=b.clamp((d-(f-.5*a.fovY))/a.fovY,0,1);d=b.clamp((-d-(f-.5*a.fovY))/a.fovY,0,1);e=1===e&&0===d?.5:d+.55*(e-d)}else e=w.vec4f64.fromValues(0,Math.tan(.5*Math.PI-Math.acos(-a.viewForward[2])),1,0),e=x.vec4.transformMat4(e,e,a.projectionMatrix)[1],e=b.clamp(.5+.5*e,0,1),e=1===e||0===e?.5:0<a.eye[2]?.55*e:1-.55*(1-e);return this._intersectGroundFromView(a,.5,e,c)?!0:!1};c.prototype._computeOverlayExtents=function(a,b,d){var c=this.terrainSurface.extent,e=this.view.pointsOfInterest.centerOnSurfaceFrequent.renderLocation,
f=r.vec3f64.create();this._findHorizonBasedPointOfInterest(a,e,f)||t.vec3.copy(f,e);this._scale=this.view.renderCoordsHelper.getAltitude(a.eye);var g=t.vec3.distance(a.eye,f),e=A.viewAngle(this.view.renderCoordsHelper,e,a.eye),e=Math.PI/2-Math.abs(e-Math.PI/2);if(C.OVERLAY_SHOW_CENTER){var h=new z({color:[255,0,0],outline:{color:[255,255,255],width:2}}),m=new v;G.vectorToPoint(f,this._renderSR,m,this._overlaySR);h=new k({geometry:m,symbol:h});void 0!==S&&this.view.graphics.remove(S);this.view.graphics.add(h);
S=h}this._overlaySREqualsRenderSR||G.vectorToVector(f,this._renderSR,f,this._overlaySR);b=b*a.perRenderPixelRatio*g/2;m=!1;g=Infinity;this._isSpherical&&(this._overlaySR.isWebMercator?(b/=Math.cos(G.webMercator.y2lat(f[1])),g=this.terrainSurface.extent[3],g*=.999):(m=!0,b/=E.metersPerDegree,g=90),b>=g&&(b=g,f[1]=0,this._overlaySR.isWebMercator&&(f[0]=0)));h=1;m&&(h=1/Math.max(.2,Math.cos(Math.abs(H.deg2rad(f[1])))),180<b*h&&(h=180/b));var l=b*h,m=d.inner;m[0]=f[0]-l;m[1]=f[1]-b;m[2]=f[0]+l;m[3]=f[1]+
b;this._isSpherical&&this._shiftExtentToFitBounds(m,Infinity,g);d=d.outer;y.set(d,m);6*l>c[2]-c[0]?y.set(d,c):e<=.25*Math.PI?(d[0]-=l,d[1]-=b,d[2]+=l,d[3]+=b):(G.vectorToVector(a.eye,this._renderSR,P,this._overlaySR),u.vec2.subtract(J,f,P),a=-Math.atan2(J[1],J[0])+.125*Math.PI,0>a&&(a+=2*Math.PI),x.vec4.scale(J,T[Math.floor(a/(.25*Math.PI))],2*b),J[0]*=h,J[2]*=h,x.vec4.add(d,d,J));this._isSpherical&&(d[0]=this._longitudeCyclical.clamp(d[0]),d[2]=this._longitudeCyclical.clamp(d[2]),d[1]=Math.max(d[1],
-g),d[3]=Math.min(d[3],g));!this._isSpherical&&c&&(a=y.intersection(m,c,F),c=y.intersection(d,c,Y),y.contains(a,c)&&(d[2]=d[0],d[3]=d[1]))};c.prototype._drawOverlayTextures=function(){if(this._drawTexturesDirty){var a=this._drawOverlay(0),b=this._drawOverlay(1);0!==a&&0!==b||this.terrainSurface.updateTileOverlayParams();this._setOverlayUpdating(!1);this._stage.renderView.setNeedsRender();this._drawTexturesDirty=!1}};c.prototype._drawOverlay=function(a){var b=this._overlays[a],d=b.valid,c=b.highlightValid,
e=b.waterMaskValid,f=b.extent,g=b.resolution,h=b.pixelRatio,k=this._longitudeCyclical?f[2]>this._longitudeCyclical.max:!1,m=this._longitudeCyclical?f[0]<this._longitudeCyclical.min:!1;if(k||m){O.views=Q;var m=Math.round((k?this._longitudeCyclical.max-f[0]:this._longitudeCyclical.min-f[0])/(f[2]-f[0])*g),l=O.views[0];x.vec4.set(l.viewport,0,0,m,g);x.vec4.set(l.extent,f[0],f[1],this._longitudeCyclical.max,f[3]);k||(l.extent[0]+=this._longitudeCyclical.range);l=O.views[1];x.vec4.set(l.viewport,m,0,g-
m,g);x.vec4.set(l.extent,this._longitudeCyclical.min,f[1],f[2],f[3]);k&&(l.extent[2]-=this._longitudeCyclical.range)}else O.views=V,y.set(O.views[0].extent,f),x.vec4.set(O.views[0].viewport,0,0,g,g);O.width=g;O.height=g;O.pixelRatio=h*this.view.state.camera.pixelRatio;O.index=a;g=this._renderer;a=g.draw(b.renderTargetId,O);f=g.drawHighlights(b.highlightRenderTargetId,O);g=g.drawNormals(b.waterMaskRenderTargetId,O);b.valid=a;b.highlightValid=f;b.waterMaskValid=g;return a!==d||f!==c||g!==e?0:1};c.prototype._rectanglesOverlap=
function(a,b){return this._longitudeCyclical?(this._longitudeCyclical.contains(b[0],b[2],a[0])||this._longitudeCyclical.contains(b[0],b[2],a[2])||this._longitudeCyclical.contains(a[0],a[2],b[0]))&&!(a[1]>b[3]||a[3]<b[1]):y.intersects(a,b)};c.prototype._rectInsideRect=function(a,b){return this._longitudeCyclical?this._longitudeCyclical.contains(b[0],b[2],a[0])&&this._longitudeCyclical.contains(b[0],b[2],a[2])&&a[1]>b[1]&&a[3]<b[3]:y.contains(b,a)};c.prototype._pointIsInExtent=function(a,b){if(this._longitudeCyclical)return this._longitudeCyclical.contains(b[0],
b[2],a.x)&&a.y>=b[1]&&a.y<=b[3];var d=a.x;a=a.y;return d>b[0]&&d<b[2]&&a>b[1]&&a<b[3]};c.prototype._shiftExtentToFitBounds=function(a,b,d){var c=0,e=0;a[0]<-b?c=a[0]+b:a[2]>b&&(c=b-a[2]);a[1]<-d?e=a[1]+d:a[3]>d&&(e=d-a[3]);y.offset(a,c,e)};Object.defineProperty(c.prototype,"test",{get:function(){return{overlays:this._overlays,renderer:this._renderer}},enumerable:!0,configurable:!0});l([q.property()],c.prototype,"view",void 0);l([q.property()],c.prototype,"terrainSurface",void 0);l([q.property({type:Boolean})],
c.prototype,"hasHighlights",null);return c=l([q.subclass("esri.views.3d.terrain.OverlayManager")],c)}(q.declared(d));c.OverlayManager=p;var O={width:0,height:0,pixelRatio:0,views:null,index:0},V=[{viewport:y.create(),extent:y.create()}],Q=[V[0],{viewport:y.create(),extent:y.create()}],J=w.vec4f64.create(),P=r.vec3f64.create(),L={inner:y.create(),outer:y.create()},F=y.create(),Y=y.create()})},"esri/views/3d/terrain/PlanarPatch":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/libs/gl-matrix-2/vec3f64 ../../../geometry/support/aaBoundingBox ../support/geometryUtils ../support/mathUtils ./PatchGeometryFactory ./Tile".split(" "),
function(p,c,n,l,k,d,h,g,f){return function(b){function a(d,c,f){var e=b.call(this,a.NumSubdivisionsAtLevel)||this;e.up=l.vec3f64.unitZ();void 0!==d&&e.init(d,c,f);return e}n(a,b);a.prototype.init=function(a,d,c){b.prototype.init.call(this,a,d,c);this.edgeLen=this.extent[2]-this.extent[0];this.edgeLen2=this.edgeLen*this.edgeLen;this.curvatureHeight=0;this.centerAtSeaLevel[0]=h.lerp(this.extent[0],this.extent[2],.5);this.centerAtSeaLevel[1]=h.lerp(this.extent[1],this.extent[3],.5);this.centerAtSeaLevel[2]=
0;this.updateRadiusAndCenter()};a.prototype.updateRadiusAndCenter=function(){b.prototype.updateRadiusAndCenter.call(this);var a=(this.extent[2]-this.extent[0])*Math.SQRT1_2,d=.5*(this.elevationBounds[0]-this.elevationBounds[1]);this.radius=Math.sqrt(a*a+d*d)};a.prototype._isVisible=function(){return this.intersectsClippingArea&&d.frustum.intersectsAABB(this.surface.frustum.planes,k.wrap(this.extent[0],this.extent[1],this.elevationBounds[0],this.extent[2],this.extent[3],this.elevationBounds[1]))};
a.prototype.createGeometry=function(a,b,d){g.createPlanarGlobePatch(a,this.extent,b,this.renderData,d);this.updateMemoryUsed()};a.NumSubdivisionsAtLevel=[2,2,2,2,2,2,2,2];return a}(f)})},"esri/views/3d/terrain/PatchGeometryFactory":function(){define("require exports ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../core/libs/gl-matrix-2/vec4 ../../../geometry/support/aaBoundingBox ../support/earthUtils ../support/mathUtils ../support/buffer/BufferPool ../support/buffer/InterleavedLayout ./ElevationData ./TerrainConst ../webgl-engine/lib/Util ../webgl-engine/materials/internal/MaterialUtil".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q){function u(a,b,d,c){var e=0<(d&2),f=b+(c?1024:0)+(e?2048:0),g=y.get(f);if(!g){var g=b-1,h=b-1,k=b*b,m=2*g+2*h,l=g*h*6,n=6*m,r=6*(2*g+h-1);c&&(l*=2,n*=2,r*=2);for(var m=65536<k+m?new Uint32Array(l+n):new Uint16Array(l+n),q=0,p=0,t=l,u,w,v,z,A=0,B=0;B<=h;B++){e&&(A=0===B?r:B===h?-r:0);for(var t=t+A,C=0;C<=g;C++)v=x(C,B,g,h),-1<v&&(z=0===B&&C!==g?1:C===g&&B!==h?g+1:B===h&&0!==C?-1:0===C&&0!==B?-(g+1):0,0!==z&&(u=q,w=k+v,v=k+(0===C&&1===B?0:v+1),z=q+z,c?(m[t+0]=u,
m[t+1]=w,m[t+2]=w,m[t+3]=v,m[t+4]=v,m[t+5]=u,m[t+6]=v,m[t+7]=z,m[t+8]=z,m[t+9]=u,m[t+10]=u,m[t+11]=v,t+=12):(m[t+0]=u,m[t+1]=w,m[t+2]=v,m[t+3]=v,m[t+4]=z,m[t+5]=u,t+=6))),++q,C<g&&B<h&&(u=B*(g+1)+C,w=u+1,v=w+(g+1),z=v-1,c?(m[p+0]=u,m[p+1]=w,m[p+2]=w,m[p+3]=v,m[p+4]=v,m[p+5]=u,m[p+6]=v,m[p+7]=z,m[p+8]=z,m[p+9]=u,m[p+10]=u,m[p+11]=v,p+=12):(m[p+0]=u,m[p+1]=w,m[p+2]=v,m[p+3]=v,m[p+4]=z,m[p+5]=u,p+=6));t-=A}g={values:m,numSurfaceIndices:l,numSkirtIndices:n};y.set(f,g)}a.indices=g.values;a.numSurfaceIndices=
g.numSurfaceIndices;a.numSkirtIndices=g.numSkirtIndices;a.numWithoutSkirtIndices=a.numSurfaceIndices+(d?6*(b-1)*(c?2:1):0)}function t(a,b,d,c){a<c[0]&&(c[0]=a);a>c[3]&&(c[3]=a);b<c[1]&&(c[1]=b);b>c[4]&&(c[4]=b);d<c[2]&&(c[2]=d);d>c[5]&&(c[5]=d)}function r(a,b){var d=b>a?1:0;return 2+4*d+(1-2*d)*(a+b)}function x(a,b,d,c){return 0===b?a:a===d?d+b:b===c?d+c+(d-a):0===a&&0<b?2*d+c+(c-b):-1}Object.defineProperty(c,"__esModule",{value:!0});var w=b.newLayout().vec3f(m.VertexAttrConstants.POSITION).vec2f(m.VertexAttrConstants.UV0),
v=new f.BufferPool(function(a){return w.createBuffer(a)},function(a){return a.count});c.clearCaches=function(){v.clear();y.clear()};c.releaseGeometry=function(a){v.release(a.vertexAttributes);a.vertexAttributes=null;a.indices=null};c.createSphericalGlobePatch=function(b,c,f,m,l,n,q,p){var w=n[0],y=n[1],z=n[2];n=n[3];var G=.1*h.earthRadius*(n-y),L=b.numVertsPerRow-1,F=b.numVertsPerRow-1,H=b.numVertsPerRow*b.numVertsPerRow,E=v.acquire(H+(2*L+2*F)),I=E.position.typedBuffer,M=E.uv0.typedBuffer,K=m.geometryInfo.boundingBox;
d.empty(K);var T=c[2]-c[0],N=c[3]-c[1],O=z-w,z=f[0],S=f[1];f=f[2];for(var ea=0;ea<=L;ea++){var ga=ea/L,ma=w+ga*O;A[ea]=Math.sin(ma);B[ea]=Math.cos(ma);D[ea]=ga;C[ea]=c[0]+ga*T}w=q&&!!(p&1);T=q&&!!(p&2);for(ma=O=0;ma<=F;ma++){var qa=ma/F,ea=g.lerp(y,n,qa),na=Math.cos(ea),pa=Math.sin(ea),sa=void 0;q?(sa=h.halfEarthRadius*Math.log((1+pa)/(1-pa)),qa=(sa-c[1])/N):sa=180*ea/Math.PI;for(ea=0;ea<=L;ea++){var ga=D[ea],ia=A[ea],va=B[ea],Aa=h.earthRadius;b.samplerData&&(Aa+=a.sample(C[ea],sa,b.samplerData)||
0);va=va*na*Aa-z;ia=ia*na*Aa-S;Aa=pa*Aa-f;t(va,ia,Aa,K);var za=e.GEOMETRY_VERTEX_STRIDE*O;I[za+0]=va;I[za+1]=ia;I[za+2]=Aa;M[za+0]=ga;M[za+1]=qa;za=x(ea,ma,L,F);if(-1<za){var za=e.GEOMETRY_VERTEX_STRIDE*(H+za),xa=w&&0===ma?-1:T&&ma===F?1:0,va=0===xa?va:-z,ia=0===xa?ia:-S,Aa=0===xa?Aa:h.earthRadius*xa-f;I[za+0]=va;I[za+1]=ia;I[za+2]=Aa;M[za+0]=0===xa?r(ga,qa):ga;M[za+1]=0===xa?G:qa;0!==xa&&t(va,ia,Aa,K)}++O}}m.geometryInfo.numVertsPerRow=b.numVertsPerRow;m.geometryInfo.vertexAttributes=E;m.geometryInfo.skirtLength=
G;k.vec4.set(m.geometryInfo.uvOffsetAndScale,0,0,1,1);u(m.geometryInfo,b.numVertsPerRow,q?p:0,l)};c.createPlanarGlobePatch=function(b,c,f,g,h){var m=c[0],l=c[1],n=c[2]-m,q=c[3]-l,p=b.clippingArea,w=p?Math.max(0,(p[0]-c[0])/n):0,y=p?Math.max(0,(p[1]-c[1])/q):0,z=p?Math.min(1,(p[2]-c[0])/n):1;c=p?Math.min(1,(p[3]-c[1])/q):1;var A=z>w?1/(z-w):1,B=c>y?1/(c-y):1,C=-w*A,D=-y*B,G=.1*n,H=b.numVertsPerRow-1,E=b.numVertsPerRow-1,I=b.numVertsPerRow*b.numVertsPerRow,M=v.acquire(I+(2*H+2*E)),K=M.position.typedBuffer,
T=M.uv0.typedBuffer,ga=g.geometryInfo.boundingBox;d.empty(ga);for(var ma=0,qa=0;qa<=E;qa++){var na=qa/E,pa=D+na*B,na=l+na*q;p&&(na<p[1]?(na=p[1],pa=0):na>p[3]&&(na=p[3],pa=1));for(var sa=0;sa<=H;sa++){var ia=sa/H,va=C+ia*A,ia=m+ia*n;p&&(ia<p[0]?(ia=p[0],va=0):ia>p[2]&&(ia=p[2],va=1));var Aa=b.samplerData?a.sample(ia,na,b.samplerData)||0:0,ia=ia-f[0],za=na-f[1],Aa=Aa-f[2];t(ia,za,Aa,ga);var xa=e.GEOMETRY_VERTEX_STRIDE*ma;K[xa+0]=ia;K[xa+1]=za;K[xa+2]=Aa;T[xa+0]=va;T[xa+1]=pa;xa=x(sa,qa,H,H);-1<xa&&
(xa=e.GEOMETRY_VERTEX_STRIDE*(I+xa),K[xa+0]=ia,K[xa+1]=za,K[xa+2]=Aa,T[xa+0]=r(va,pa),T[xa+1]=G);++ma}}g.geometryInfo.numVertsPerRow=b.numVertsPerRow;g.geometryInfo.vertexAttributes=M;g.geometryInfo.skirtLength=G;k.vec4.set(g.geometryInfo.uvOffsetAndScale,w,y,z-w,c-y);u(g.geometryInfo,b.numVertsPerRow,0,h)};var y=new Map,z=Math.pow(2,-52);c.intersectSkirts=function(a,b,d,c,e,f,g,h){var k=f.position;f=f.uv0;var m=a[0],l=a[1];a=a[2];var r=b[0]-m,p=b[1]-l;for(b=b[2]-a;d<c;d++){var t=3*d,u=3*d+1,w=3*
d+2,x=k.get(e[t],0),v=k.get(e[t],1),y=k.get(e[t],2),A=k.get(e[u],0),B=k.get(e[u],1),C=k.get(e[u],2),D=k.get(e[w],0),G=k.get(e[w],1),I=k.get(e[w],2),t=f.get(e[t],0),u=f.get(e[u],0),w=f.get(e[w],0);2<=t&&(n.vec3.set(E,x,v,y),g(E),x+=E[0],v+=E[1],y+=E[2]);2<=u&&(n.vec3.set(E,A,B,C),g(E),A+=E[0],B+=E[1],C+=E[2]);2<=w&&(n.vec3.set(E,D,G,I),g(E),D+=E[0],G+=E[1],I+=E[2]);var A=A-x,B=B-v,C=C-y,D=D-x,G=G-v,I=I-y,t=p*I-G*b,u=b*D-I*r,M=r*G-D*p,w=A*t+B*u+C*M,x=m-x,K=l-v,T=a-y,y=K*C-B*T,v=T*A-C*x,N=x*B-A*K;if(w>
z){x=x*t+K*u+T*M;if(0>x||x>w)continue;t=r*y+p*v+b*N;if(0>t||x+t>w)continue}else if(w<-z){x=x*t+K*u+T*M;if(0<x||x<w)continue;t=r*y+p*v+b*N;if(0<t||x+t<w)continue}else continue;y=(D*y+G*v+I*N)/w;0<=y&&(A=q.computeNormal(A,B,C,D,G,I,H),h(y,A,d))}};var A=Array(e.MAX_PATCH_TESSELATION+1),B=Array(e.MAX_PATCH_TESSELATION+1),D=Array(e.MAX_PATCH_TESSELATION+1),C=Array(e.MAX_PATCH_TESSELATION+1),E=l.vec3f64.create(),H=l.vec3f64.create()})},"esri/views/3d/support/buffer/BufferPool":function(){define(["require",
"exports","../../../../core/PooledArray"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(c,d){this._factoryCallback=c;this._lengthCallback=d;this._pool=new Map}c.prototype.acquire=function(c){var d=this._pool.get(c);if(d&&0!==d.length)return d.pop();try{return this._factoryCallback(c)}catch(g){var d=window.performance&&window.performance.memory,h="";d&&(h="\n  totalJSHeapSize: "+d.totalJSHeapSize+", usedJSHeapSize: "+d.usedJSHeapSize+", jsHeapSizeLimit: "+
d.jsHeapSizeLimit);console.log("Array allocation of size "+c+" failed: "+g+h);throw g;}};c.prototype.release=function(c){var d=this._lengthCallback(c),h=this._pool.get(d);h||(h=new n({shrink:!0}),this._pool.set(d,h));h.push(c)};c.prototype.clear=function(){this._pool.clear()};Object.defineProperty(c.prototype,"test",{get:function(){return{size:this._pool.size}},enumerable:!0,configurable:!0});return c}();c.BufferPool=p})},"esri/views/3d/terrain/Tile":function(){define("require exports ../../../core/arrayUtils ../../../core/promiseUtils ../../../core/libs/gl-matrix-2/vec2 ../../../core/libs/gl-matrix-2/vec2f64 ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../core/libs/gl-matrix-2/vec4 ../../../core/libs/gl-matrix-2/vec4f64 ../../../geometry/support/aaBoundingRect ../../2d/engine/vectorTiles/VectorTileDisplayObject3D ../support/mathUtils ./ElevationTileAgent ./MapTileAgent ./TerrainConst ./terrainUtils ./TileAgent ./TilePerLayerInfo ./tileUtils ../../webgl/Texture ../../webgl/Util".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z){function A(a){a.dispose();a instanceof q?q.Pool.release(a):a instanceof u&&u.Pool.release(a)}var B=r.weakAssert,D=g.vec3f64.create(),C=g.vec3f64.create(),E=b.vec4f64.create();return function(){function b(b){this._numSubdivisionAtLevel=b;this.lij=[0,0,0];this._dirty=!0;this.extent=a.create();this._elevationBounds=d.vec2f64.create();this.children=[null,null,null,null];this.layerInfo=Array(t.LayerClass.COUNT);this.extentInRadians=a.create();this.centerAtSeaLevel=
g.vec3f64.create();this.center=g.vec3f64.create();this.up=g.vec3f64.zeros();this._intersectsClippingArea=this._isWithinClippingArea=!0;this._clippingArea=null;this._memoryUsed=this.radius=this.edgeLen2=this.edgeLen=this.renderOrder=this.screenDepth=this._maxTesselation=0}Object.defineProperty(b.prototype,"memoryUsed",{get:function(){return this._memoryUsed},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"maxTesselation",{get:function(){return this._maxTesselation},enumerable:!0,
configurable:!0});Object.defineProperty(b.prototype,"numSubdivisionsAtLevel",{get:function(){return this._numSubdivisionAtLevel},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"isWithinClippingArea",{get:function(){return this._isWithinClippingArea},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"intersectsClippingArea",{get:function(){return this._intersectsClippingArea},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"clippingArea",{get:function(){return this._clippingArea},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"surface",{get:function(){return this._surface},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"elevationBounds",{get:function(){return this._elevationBounds},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"visible",{get:function(){if(this._dirty){var a=this._isVisible();a!==this._visible&&
(this._visible=a,this.updateAgentSuspension(),this._visible=a);this._dirty=!1}return this._visible},enumerable:!0,configurable:!0});b.prototype.init=function(a,b,d){this.lij[0]=a[0];this.lij[1]=a[1];this.lij[2]=a[2];d.tilingScheme.getExtent(a[0],a[1],a[2],this.extent,this.extentInRadians);this._intersectsClippingArea=this._isWithinClippingArea=!0;this._clippingArea=null;this.radius=this.edgeLen2=this.edgeLen=0;this.vlevel=a?a[0]:0;b&&b._elevationBounds?k.vec2.copy(this.elevationBounds,b.elevationBounds):
k.vec2.set(this.elevationBounds,0,0);this._pendingUpdates=0;this.renderData=null;this.screenDepth=0;this._visible=!1;this._dirty=!0;this._parent=b;this._surface=d;for(a=0;4>a;a++)this.children[a]=null;for(a=0;a<t.LayerClass.COUNT;a++){b=d.numLayers(a);var c=this.layerInfo[a];this.layerInfo[a]?c.length=b:(c=Array(b),this.layerInfo[a]=c);for(var e=0;e<b;e++)c[e]=w.TilePerLayerInfo.makeEmptyLayerInfo(a,this._surface.upsampleInfoPool,c[e]),a===t.LayerClass.ELEVATION&&this.findElevationBoundsForLayer(e,
-1)}this.computeElevationBounds();this._maxTesselation=Math.min(d.tilingScheme.pixelSize[0],t.MAX_PATCH_TESSELATION)};b.prototype.dispose=function(){B(!this.renderData,"tile.renderData was not unloaded");this._parent&&B(-1===this._parent.children.indexOf(this),"still linked");for(var a=0;a<t.LayerClass.COUNT;a++)for(var b=0,d=this.layerInfo[a];b<d.length;b++)d[b].dispose();this._surface=this._parent=null;this._memoryUsed=0};b.prototype.updateMemoryUsed=function(){for(var a=this._surface.tilingScheme.pixelSize,
a=a[0]*a[1]*4,b=this._memoryUsed=0,d=this.layerInfo[t.LayerClass.MAP];b<d.length;b++){var c=d[b],c=c.data;c instanceof y?this._memoryUsed+=z.getGpuMemoryUsage(c):c instanceof HTMLImageElement?this._memoryUsed+=a:c instanceof e&&(this._memoryUsed+=c.getGpuMemoryUsage()+c.getCpuMemoryUsage())}b=0;for(d=this.layerInfo[t.LayerClass.ELEVATION];b<d.length;b++)c=d[b],this._memoryUsed+=c.data?a:0;this.renderData&&(this._memoryUsed+=this.renderData.estimatedGeometryMemoryUsage,a=this.renderData.textureDescriptor)&&
(this._memoryUsed+=z.getGpuMemoryUsage(a))};b.prototype.updateScreenDepth=function(a){h.vec3.copy(E,this.center);E[3]=1;f.vec4.transformMat4(E,E,a);this.screenDepth=E[2]/E[3]};b.prototype.shouldSplit=function(a,b){var d=this.lij[0];h.vec3.subtract(D,this.center,b);var c=h.vec3.squaredLength(D),e=a[4];if(this.edgeLen2>c&&d<e)return t.TileUpdate.SPLIT;var f=a[1],c=2*Math.sqrt(c),g=this.edgeLen/(a[0]*c);return g<f?this.vlevel!==this.lij[0]?(this.vlevel=this.lij[0],t.TileUpdate.VSPLITMERGE):t.TileUpdate.NONE:
d>=e?(a=d+Math.ceil(-m.log2(f/g)),a!==this.vlevel?(this.vlevel=a,t.TileUpdate.VSPLITMERGE):t.TileUpdate.NONE):6<d&&(h.vec3.scale(C,this.up,h.vec3.dot(this.up,D)),h.vec3.subtract(C,C,D),d=h.vec3.squaredLength(C),d>this.radius*this.radius&&(h.vec3.scale(C,C,this.radius/Math.sqrt(d)),h.vec3.add(C,C,this.center),h.vec3.subtract(C,b,C),b=this._elevationBounds[1]-this._elevationBounds[0],Math.min(1,(Math.abs(h.vec3.dot(C,this.up))+.5*b+this.curvatureHeight)/h.vec3.length(C))*(this.edgeLen/(a[2]*c))<.1/
a[5]*a[3]))?t.TileUpdate.NONE:t.TileUpdate.SPLIT};b.prototype.load=function(a){for(var b=null==this.renderData&&a.loadCachedElevationData(this),d=0;d<t.LayerClass.COUNT;d++)if(this.layerInfo[d])if(d===t.LayerClass.ELEVATION&&b)for(var c=0,e=this.layerInfo[d];c<e.length;c++)e[c].loadingAgent=x.DONE;else this._createOrUpdateAgents(0,d);a.loadTile(this)};b.prototype.unload=function(a){a.unloadTile(this,this.elevationDone);for(a=0;a<t.LayerClass.COUNT;a++)for(var b=0,d=this.layerInfo[a];b<d.length;b++){var c=
d[b];c.loadingAgent&&c.loadingAgent!==x.DONE&&(A(c.loadingAgent),c.loadingAgent=null);c.pendingUpdates=0}this._pendingUpdates&=~t.TileUpdate.GEOMETRY;this._pendingUpdates&=~t.TileUpdate.TEXTURE};b.prototype.updateClippingStatus=function(b){if(a.equals(b,this._clippingArea))return!1;var d=this._intersectsClippingArea,c=this._isWithinClippingArea;b?(this._intersectsClippingArea=this.intersectsExtent(b),this._isWithinClippingArea=this.isWithinExtent(b)):this._isWithinClippingArea=this._intersectsClippingArea=
!0;this._clippingArea=b;this._dirty=!0;b=c&&this._isWithinClippingArea;d=!c&&!d&&!this._isWithinClippingArea&&!this._intersectsClippingArea;!this.renderData||b||d||this.setPendingUpdate(t.TileUpdate.GEOMETRY);return!0};b.prototype.updateVisibility=function(){this._dirty=!0};b.prototype.getLayerInfo=function(a,b){return this.layerInfo[b][a]};b.prototype.hasLayerData=function(a,b){return(a=this.layerInfo[b][a])&&a.data&&!a.dataInvalidated};b.prototype.hasDataAvailable=function(a,b,d){return(b=this.layerInfo[d][b].tilemap)?
"unavailable"!==b.getAvailability(a.lij[1],a.lij[2]):!0};Object.defineProperty(b.prototype,"hasPendingUpdates",{get:function(){return 0!==this._pendingUpdates},enumerable:!0,configurable:!0});b.prototype.isSuspended=function(a){return this.hasPendingUpdate(t.TileUpdate.SPLIT)?!0:a===t.LayerClass.ELEVATION?!1:!this.visible};Object.defineProperty(b.prototype,"elevationDone",{get:function(){if(this.hasPendingUpdate(t.TileUpdate.GEOMETRY))return!1;for(var a=0,b=this.layerInfo[t.LayerClass.ELEVATION];a<
b.length;a++){var d=b[a];if(d.loadingAgent!==x.DONE||!d.upsampleFromTile)return!1}return!0},enumerable:!0,configurable:!0});b.prototype.hasPendingUpdate=function(a){return(this._pendingUpdates&a)===a};b.prototype.setPendingUpdate=function(a){this._pendingUpdates|=a;this._surface.setPendingUpdates()};b.prototype.resetPendingUpdate=function(a){return this.hasPendingUpdate(a)?(this._pendingUpdates&=~a,!0):!1};b.prototype.requestLayerData=function(a,b,d){var c=this;t.TILE_LOADING_DEBUGLOG&&console.log("tile %s layer %d/%d requested by tile %s",
this.lij.toString(),b,a,d.tile.lij.toString());var e=this.layerInfo[b][a];if(-1<e.waitingAgents.indexOf(d))return console.warn("agent already requested this piece of map data (tile %s, agent tile %s, layer: %d/%d)",this.lij.toString(),d.tile.lij.toString(),b,a),!0;e.waitingAgents.push(d);if(e.data&&!e.dataInvalidated)return console.warn("agent requested existing data (tile %s, agent tile %s, layer: %d/%d)",this.lij.toString(),d.tile.lij.toString(),b,a),setTimeout(function(){return d.dataArrived(c)},
0),!0;if(e.requestPromise)return!0;e.requestAbort=l.createAbortController();var f=this._surface.requestTileData(this,a,b,e.requestAbort);if(!f)return e.requestAbort=null,!1;a=function(){e.requestPromise===f&&(e.requestPromise=null,e.requestAbort=null)};e.requestPromise=f;f.then(a,a);return!!e.requestPromise};b.prototype.descendants=function(a){a||(a=[]);for(var b=0;4>b;b++){var d=this.children[b];d&&(d.descendants(a),a.unshift(this.children[b]))}return a};Object.defineProperty(b.prototype,"isLeaf",
{get:function(){return!this.children[0]&&!this.children[1]&&!this.children[2]&&!this.children[3]},enumerable:!0,configurable:!0});b.prototype.hasLij=function(a){return this.lij[0]===a[0]&&this.lij[1]===a[1]&&this.lij[2]===a[2]};b.prototype.findByLij=function(a){if(this.hasLij(a))return this;for(var b=0;4>b;b++){var d=this.children[b];if(d&&(d=d.findByLij(a)))return d}return null};b.prototype.unrequestLayerData=function(a,b,d){t.TILE_LOADING_DEBUGLOG&&console.log("tile %s layer %d/%d canceled by tile %s",
this.lij.toString(),b,a,d.tile.lij.toString());var c=this.layerInfo[b][a],e=c.waitingAgents;d=null!=n.removeUnordered(e,d);B(d,"agent has not requested this piece of map data");1>e.length&&(c.abortRequest(),t.TILE_LOADING_DEBUGLOG&&console.log("tile %s layer %d/%d request/loading canceled",this.lij.toString(),b,a),this.updateMemoryUsed())};b.prototype.dataArrived=function(a,b,d){a=this.layerInfo[b][a];a.data=d;a.dataInvalidated=!1;for(d=0;d<a.waitingAgents.length;d++)a.waitingAgents[d].dataArrived(this);
a.waitingAgents.length=0;this.updateMemoryUsed()};b.prototype.dataMissing=function(a,b,d){d.notInTilemap||console.error("Tile %s layer %d/%d error",this.lij.toString(),b,a);a=this.layerInfo[b][a];a.dataMissing=!0;for(b=0;b<a.waitingAgents.length;b++)a.waitingAgents[b].dataMissing(this);a.waitingAgents.length=0;this.updateMemoryUsed()};b.prototype.updateRenderData=function(a){switch(a){case t.LayerClass.MAP:return this.updateTexture();case t.LayerClass.ELEVATION:return this.updateGeometry()}};b.prototype.updateTexture=
function(){this.renderData&&(this._pendingUpdates|=t.TileUpdate.TEXTURE,this._surface.setPendingUpdates())};b.prototype.updateGeometry=function(){this.setPendingUpdate(t.TileUpdate.GEOMETRY);for(var a=0,b=this.layerInfo[t.LayerClass.ELEVATION];a<b.length;a++)b[a].pendingUpdates|=t.TileUpdate.GEOMETRY;this._surface.setPendingUpdates()};b.prototype.invalidateLayerData=function(a,b){this.layerInfo[b][a].invalidateSourceData();this.restartAgents(b)};b.prototype.computeElevationBounds=function(){k.vec2.set(this._elevationBounds,
Number.MAX_VALUE,-Number.MAX_VALUE);for(var a=!1,b=0,d=this.layerInfo[t.LayerClass.ELEVATION];b<d.length;b++){var c=d[b];c.elevationBounds&&(this._elevationBounds[0]=Math.min(this._elevationBounds[0],c.elevationBounds[0]),this._elevationBounds[1]=Math.max(this._elevationBounds[1],c.elevationBounds[1]),a=!0)}a||k.vec2.set(this._elevationBounds,0,0);this.updateRadiusAndCenter()};b.prototype.updateRadiusAndCenter=function(){h.vec3.scale(C,this.up,.5*(this._elevationBounds[0]+this._elevationBounds[1]));
h.vec3.add(this.center,this.centerAtSeaLevel,C)};b.prototype.findElevationBoundsForLayer=function(a,b){var d=this.layerInfo[t.LayerClass.ELEVATION][a];if(!d.elevationBounds||d.elevationBounds[2]<b)if(b=this._surface.layerViewByIndex(a,t.LayerClass.ELEVATION),v.fallsWithinLayer(this,b.layer,!1)){b=!1;if(d.data){var c=d.data;k.vec2.copy(E,c.bounds);E[2]=this.lij[0];b=!0}else{for(var e=0,f=void 0,c=void 0,g=this._parent;g&&(!c||e<t.ELEVATION_DESIRED_RESOLUTION_LEVEL)&&!(e=this.vlevel-g.lij[0],f=c||f,
c=g.layerInfo[t.LayerClass.ELEVATION][a].data,!c&&f&&e>=t.ELEVATION_DESIRED_RESOLUTION_LEVEL);g=g._parent);if(c=c||f)c.computeMinMaxValue(this.lij[0],this.lij[1],this.lij[2],E),Infinity!==E[0]&&(E[2]=c.level,b=!0)}b&&(d.elevationBounds?h.vec3.copy(d.elevationBounds,E):d.elevationBounds=[E[0],E[1],E[2]])}};b.prototype.modifyLayers=function(a,b,d){for(var c=this.layerInfo[d],e=0;e<c.length;e++){var f=c[e];f.loadingAgent&&f.loadingAgent!==x.DONE&&(A(f.loadingAgent),f.loadingAgent=null);f.waitingAgents.length=
0}if(d===t.LayerClass.MAP)for(e=0;e<c.length;++e)void 0===a[e]&&c[e].dispose();a=b.length;f=Array(a);for(e=0;e<a;e++){var g=b[e];f[e]=-1<g?c[g]:w.TilePerLayerInfo.makeEmptyLayerInfo(d,this._surface.upsampleInfoPool)}this.layerInfo[d]=f;this.updateMemoryUsed()};b.prototype.restartAgents=function(a){this.renderData&&(this._createOrUpdateAgents(0,a),this.updateRenderData(a))};b.prototype.updateAgents=function(a){if(this.renderData){for(var b=this.layerInfo[a],d=0;d<b.length;d++){var c=b[d];c.loadingAgent===
x.DONE&&(c.loadingAgent=null)}this._createOrUpdateAgents(0,a)}};b.prototype.updateAgentSuspension=function(){for(var a=0;a<t.LayerClass.COUNT;a++)for(var b=this.isSuspended(a),d=0,c=this.layerInfo[a];d<c.length;d++){var e=c[d];e.loadingAgent&&e.loadingAgent!==x.DONE&&(e.loadingAgent.setSuspension(b),e.loadingAgent===x.DONE&&this.updateRenderData(a))}};b.prototype.removeLayerAgent=function(a,b){a=this.layerInfo[b][a];a.loadingAgent&&a.loadingAgent!==x.DONE&&a.loadingAgent.dispose();a.loadingAgent=
null};b.prototype.agentDone=function(a,b){var d=this.layerInfo[b][a];d.loadingAgent=x.DONE;d.data||d.upsampleFromTile||this._createOrUpdateAgents(a+1,b)};b.prototype._createOrUpdateAgents=function(a,b){for(var d=this.isSuspended(b),c=this.layerInfo[b];a<c.length;++a){var e=c[a],f=!1,g=this._surface.layerViewByIndex(a,b);if(e.loadingAgent)e.loadingAgent!==x.DONE&&e.loadingAgent.setSuspension(d),e.loadingAgent!==x.DONE&&(f=e.loadingAgent.update());else if(v.fallsWithinLayer(this,g.layer,!1)){var f=
e,h=a,k=b,m=d,l=k===t.LayerClass.ELEVATION?q.Pool.acquire():u.Pool.acquire();l.init(this,h,k,m);f.loadingAgent=l;(f=e.loadingAgent.startLoading())?e.loadingAgent===x.DONE&&this.setPendingUpdate(t.TileUpdate.GEOMETRY):(A(e.loadingAgent),e.loadingAgent=x.DONE)}e.loadingAgent===x.DONE&&this.updateRenderData(b);if(f&&g.isOpaque)break}};b.prototype.isWithinExtent=function(a){var b=this.extent;return b[0]>=a[0]&&a[2]>=b[2]&&b[1]>=a[1]&&a[3]>=b[3]};b.prototype.intersectsExtent=function(a){var b=this.extent;
return b[2]>=a[0]&&a[2]>=b[0]&&b[3]>=a[1]&&a[3]>=b[1]};return b}()})},"esri/views/3d/terrain/terrainUtils":function(){define("require exports ../../../layers/ElevationLayer ../../../layers/TileLayer ../../../layers/VectorTileLayer ../../../support/basemapDefinitions ./terrainUtilsPlanar ./terrainUtilsSpherical".split(" "),function(p,c,n,l,k,d,h,g){function f(a){return a&&"esri.views.3d.layers.TileLayerView3D"===a.declaredClass}function b(a){return a&&"esri.views.3d.layers.VectorTileLayerView3D"===
a.declaredClass}function a(a){return a&&"esri.views.3d.layers.WMTSLayerView3D"===a.declaredClass}function e(a){return a&&"esri.views.3d.layers.ElevationLayerView3D"===a.declaredClass}function m(){t={};for(var a in d)d[a].baseMapLayers.forEach(function(a){t[a.url]=19});t["//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"]=20}function q(a,b,d,c){return u["local"===c||"planar"===c?"planar":"spherical"].checkIfTileInfoSupportedForViewSR(a,b,d)}Object.defineProperty(c,"__esModule",
{value:!0});var u={planar:h,spherical:g};c.weakAssert=function(a,b){a||console.warn("Terrain: "+b)};c.autoUpdateSkirtsVisibility=function(a,b,d){var c=u[a.manifold],e,f=c.isInsideExtent(a,b);f?e=a.getElevation(b):(e=a.getElevationBounds(),e=.5*(e[0]+e[1]));e=b[2]-e;d=.9*Math.abs(e)<d?0:0>e?-1:1;f||(c.isInsideExtent(a,b,a.hideSkirtsDistanceFromExtentMargin)?(b=c.tiltToExtentEdge(a,b),b>a.hideSkirtsMinimumCameraTilt&&b<a.hideSkirtsMaximumCameraTilt&&(d=0)):d=0);a.skirtScale=d};c.isTiledLayer=function(a){return a&&
"base-tile"===a.type||"tile"===a.type||"elevation"===a.type||"base-elevation"===a.type||"open-street-map"===a.type||"web-tile"===a.type||"wmts"===a.type||"vector-tile"===a.type};c.isVectorTileLayer=function(a){return a&&a.isInstanceOf(k)};c.isTileLayerView=f;c.isVectorTileLayerView=b;c.isWMTSLayerView=a;c.isElevationLayerView=e;c.isTiledLayerView=function(d){return d&&(f(d)||e(d)||b(d)||a(d))};c.useFetchTileForLayer=function(a){return a.fetchTile&&!(a.fetchTile===l.prototype.fetchTile||a.fetchTile===
n.prototype.fetchTile)};var t=null;c.getKnownTiledServiceLevelCap=function(a){t||m();a=a&&a.replace(/https?:/,"");return a in t?t[a]:Infinity};c.prepareKnownTiledServiceLevelCaps=m;c.checkIfTileInfoSupportedForView=q;c.getTiledLayerInfo=function(a,b,d){var c,e;if("wmts"===a.type){if(a=a.activeLayer){var f=a.tileMatrixSet;if(f)c=f.tileInfo,e=f.fullExtent;else if(a=a.tileMatrixSets)if(a=a.find(function(a){return null==q(a.tileInfo,a.fullExtent,b,d)}))return{tileInfo:a.tileInfo,fullExtent:a.fullExtent}}}else c=
"vector-tile"===a.type?a.compatibleTileInfo256:a.tileInfo,e=a.fullExtent;return c&&e&&null==q(c,e,b,d)?{tileInfo:c,fullExtent:e}:{tileInfo:null,fullExtent:null}}})},"esri/layers/ElevationLayer":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../request ../core/Error ../core/Logger ../core/maybe ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators ../geometry/HeightModelInfo ./Layer ./mixins/ArcGISCachedService ./mixins/OperationalLayer ./mixins/PortalLayer ./support/commonProperties ./support/LercWorker".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y){var z=b.getLogger("esri.layers.ElevationLayer");return function(b){function c(a){a=b.call(this)||this;a.copyright=null;a.heightModelInfo=null;a.path=null;a.opacity=1;a.operationalLayerType="ArcGISTiledElevationServiceLayer";a.type="elevation";a.url=null;a.version=null;a._lercWorker=y.acquireInstance();return a}l(c,b);c.prototype.normalizeCtorArgs=function(a,b){return"string"===typeof a?n({url:a},b):a};c.prototype.destroy=function(){y.releaseInstance(this._lercWorker);
this._lercWorker=null};Object.defineProperty(c.prototype,"minScale",{get:function(){},set:function(a){this.constructed&&z.warn(this.declaredClass+".minScale support has been removed (since 4.5)")},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"maxScale",{get:function(){},set:function(a){this.constructed&&z.warn(this.declaredClass+".maxScale support has been removed (since 4.5)")},enumerable:!0,configurable:!0});c.prototype.readVersion=function(a,b){(a=b.currentVersion)||(a=9.3);
return a};c.prototype.load=function(b){var d=this,c=a.isSome(b)?b.signal:null;this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"],supportsData:!1,validateItem:function(a){for(var b=0;b<a.typeKeywords.length;b++)if("elevation 3d layer"===a.typeKeywords[b].toLowerCase())return!0;throw new f("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}' ",{type:"Image Service",expectedType:"Image Service Elevation 3D Layer"});}},b).then(function(){return d._fetchImageService(c)},
function(){return d._fetchImageService(c)}));return this.when()};c.prototype.fetchTile=function(a,b,d,c){var e=this;void 0===c&&(c={});null!=c&&"number"===typeof c&&(z.warn("Passing noDataValue directly as a parameter is deprecated, use { noDataValue } options object instead (since 4.12)"),c={noDataValue:c});var f={responseType:"array-buffer",signal:c.signal},h={noDataValue:c.noDataValue,returnFileInfo:!0};return this.load().then(function(){return e._fetchTileAvailability(a,b,d,c)}).then(function(){return g(e.getTileUrl(a,
b,d),f)}).then(function(a){return e._lercWorker.decode(a.data,h,c.signal)}).then(function(a){return{values:a.pixelData,width:a.width,height:a.height,maxZError:a.fileInfo.maxZError,noDataValue:a.noDataValue,minValue:a.minValue,maxValue:a.maxValue}})};c.prototype.getTileUrl=function(a,b,d){var c=m.objectToQuery(n({},this.parsedUrl.query,{blankTile:!this.tilemapCache&&this.supportsBlankTile?!1:null}));return this.parsedUrl.path+"/tile/"+a+"/"+b+"/"+d+(c?"?"+c:"")};c.prototype.queryElevation=function(a,
b){var d=this;return this._importElevationQuery().then(function(c){return(new c.ElevationQuery).query(d,a,b)})};c.prototype.createElevationSampler=function(a,b){var d=this;return this._importElevationQuery().then(function(c){return(new c.ElevationQuery).createSampler(d,a,b)})};c.prototype.importLayerViewModule=function(a){return h(this,void 0,void 0,function(){return d(this,function(b){switch(a.type){case "2d":return[2,e.reject(new f("elevation-layer:view-not-supported","ElevationLayer is only supported in 3D"))];
case "3d":return[2,e.create(function(a){return p(["../views/3d/layers/ElevationLayerView3D"],a)})]}return[2]})})};c.prototype._fetchTileAvailability=function(a,b,d,c){return this.tilemapCache?this.tilemapCache.fetchAvailability(a,b,d,c):e.resolve("unknown")};c.prototype._fetchImageService=function(a){return h(this,void 0,void 0,function(){var b,c;return d(this,function(d){switch(d.label){case 0:if(this.resourceInfo)return[2,this.resourceInfo];b={query:n({f:"json"},this.parsedUrl.query),responseType:"json",
signal:a};return[4,g(this.parsedUrl.path,b)];case 1:return c=d.sent(),c.ssl&&(this.url=this.url.replace(/^http:/i,"https:")),this.read(c.data,{origin:"service",url:this.parsedUrl}),[2]}})})};c.prototype._importElevationQuery=function(){return e.create(function(a){p(["./support/ElevationQuery"],a)})};k([q.property({json:{read:{source:"copyrightText"}}})],c.prototype,"copyright",void 0);k([q.property({readOnly:!0,type:u})],c.prototype,"heightModelInfo",void 0);k([q.property({type:String,json:{origins:{"web-scene":{read:!0,
write:!0}},read:!1}})],c.prototype,"path",void 0);k([q.property({type:["show","hide"]})],c.prototype,"listMode",void 0);k([q.property({json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},portalItem:{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],c.prototype,"minScale",null);k([q.property({json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},portalItem:{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],c.prototype,"maxScale",null);k([q.property({json:{read:!1,write:!1,
origins:{"web-document":{read:!1,write:!1}}}})],c.prototype,"opacity",void 0);k([q.property({type:["ArcGISTiledElevationServiceLayer"]})],c.prototype,"operationalLayerType",void 0);k([q.property()],c.prototype,"resourceInfo",void 0);k([q.property({json:{read:!1},value:"elevation",readOnly:!0})],c.prototype,"type",void 0);k([q.property(v.url)],c.prototype,"url",void 0);k([q.property()],c.prototype,"version",void 0);k([q.reader("version",["currentVersion"])],c.prototype,"readVersion",null);return c=
k([q.subclass("esri.layers.ElevationLayer")],c)}(q.declared(t,r,x,w))})},"esri/layers/VectorTileLayer":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../request ../core/Error ../core/global ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/urlUtils ../core/urlUtils ../core/accessorSupport/decorators ../geometry/Extent ../geometry/SpatialReference ./Layer ./mixins/ArcGISCachedService ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/ScaleRangeLayer ./support/SpriteSource ./support/TileInfo ./support/TilemapCache ./support/vectorTileLayerLoader ../portal/support/jsonContext ../views/2d/engine/vectorTiles/SchemaHelper ../views/2d/engine/vectorTiles/tileInfoUtils ../views/2d/engine/vectorTiles/style/StyleRepository".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z,A,B,D,C,E,H,G,I){return function(a){function c(b,d){b=a.call(this)||this;b._spriteSourceMap=new Map;b.currentStyleInfo=null;b.style=null;b.isReference=null;b.operationalLayerType="VectorTileLayer";b.type="vector-tile";b.url=null;return b}l(c,a);c.prototype.normalizeCtorArgs=function(a,b){return"string"===typeof a?n({url:a},b):a};c.prototype.load=function(a){var b=this,c=this.loadFromPortal({supportedTypes:["Vector Tile Service"],supportsData:!1},
a).then(function(){return h(b,void 0,void 0,function(){var b,c;return d(this,function(d){switch(d.label){case 0:if(!this.portalItem||!this.portalItem.id)return[2];b=this.portalItem.itemUrl+"/resources/styles/root.json";return[4,g(b,n({},a,{query:{f:"json"}}))];case 1:return c=d.sent(),c.data&&this.read({url:b},E.createForItem(this.portalItem)),[2]}})})}).then(function(){return b.loadStyle(null,a)},function(){return b.loadStyle(null,a)});this.addResolvingPromise(c);return this.when()};Object.defineProperty(c.prototype,
"attributionDataUrl",{get:function(){var a=this.currentStyleInfo;return(a=a&&a.serviceUrl&&q.urlToObject(a.serviceUrl))?this._getDefaultAttribution(a.path):null},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"capabilities",{get:function(){var a=this._getPrimarySource();return a?a.capabilities:{operations:{supportsExportTiles:!1,supportsTileMap:!1},exportTiles:null}},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"fullExtent",{get:function(){var a=this._getPrimarySource();
return a?a.fullExtent:null},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"parsedUrl",{get:function(){return this.serviceUrl?m.urlToObject(this.serviceUrl):null},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"serviceUrl",{get:function(){return this.currentStyleInfo&&this.currentStyleInfo.serviceUrl||null},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"spatialReference",{get:function(){return this.tileInfo&&this.tileInfo.spatialReference||
null},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"styleUrl",{get:function(){return this.currentStyleInfo&&this.currentStyleInfo.styleUrl||null},enumerable:!0,configurable:!0});c.prototype.writeStyleUrl=function(a,b){a&&q.isProtocolRelative(a)&&(a="https:"+a);b.styleUrl=a};Object.defineProperty(c.prototype,"tileIndexType",{get:function(){var a=this._getPrimarySource();return a?a.type:""},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"tileIndexUrl",{get:function(){var a=
this._getPrimarySource();return a?a.tileMapURL:""},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"tileInfo",{get:function(){var a=[],b;for(b in this.sourceNameToSource)a.push(this.sourceNameToSource[b]);b=this._getPrimarySource().tileInfo;if(1<a.length)for(var d=0;d<a.length;d++)G.areSchemasOverlapping(b,a[d].tileInfo)&&(b=G.unionTileInfos(b,a[d].tileInfo));return b},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"tilemapCache",{get:function(){var a=this._getPrimarySource();
return a?a.capabilities.operations.supportsTileMap?a.tilemapCache:null:null},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"tileServers",{get:function(){var a=this._getPrimarySource();return a?a.tileServers:[]},enumerable:!0,configurable:!0});c.prototype.readVersion=function(a,b){return b.version?parseFloat(b.version):parseFloat(b.currentVersion)};Object.defineProperty(c.prototype,"compatibleTileInfo256",{get:function(){return H.create256x256CompatibleTileInfo(this.tileInfo)},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"compatibleTileInfo512",{get:function(){return H.create512x512CompatibleTileInfo(this.tileInfo)},enumerable:!0,configurable:!0});c.prototype.loadSpriteSource=function(a,b){void 0===a&&(a=1);return h(this,void 0,void 0,function(){var c,f;return d(this,function(d){this._spriteSourceMap.has(a)||(c=new A.default(this.styleRepository.sprite,a),this._spriteSourceMap.set(a,c.load()));f=this._spriteSourceMap.get(a);return[2,e.create(function(a,
d){f.then(a,d);e.onAbortOrThrow(b,d)})]})})};c.prototype.loadStyle=function(a,c){return h(this,void 0,void 0,function(){var f,g,h,k=this;return d(this,function(d){f=a||this.style||this.url;if(this._loadingPromise&&"string"===typeof f&&this.url===f&&e.isAborted(this._abortController))return[2,this._loadingPromise];(g=this._abortController)&&g.abort();h=e.createAbortController();this._loadingPromise=e.create(function(a,d){var g={signal:h.signal};k._getSourceAndStyle(f,g).then(function(){k.loadSpriteSource(b.devicePixelRatio||
1,g);a()}).catch(d);e.onAbort(c,function(){h.abort()})});this._abortController=h;return[2,this._loadingPromise]})})};c.prototype.getStyleLayerId=function(a){return this.styleRepository.getStyleLayerId(a)};c.prototype.getPaintProperties=function(a){return this.styleRepository.getPaintProperties(a)};c.prototype.setPaintProperties=function(a,b){var d=this.styleRepository.isPainterDataDriven(a),c=this.styleRepository.setPaintProperties(a,b),e=this.styleRepository.isPainterDataDriven(a);this.emit("paint-change",
{layer:c,paint:b});(d||e)&&this.emit("layout-change",{layer:c,layout:this.styleRepository.getLayoutProperties(a)})};c.prototype.getLayoutProperties=function(a){return this.styleRepository.getLayoutProperties(a)};c.prototype.setLayoutProperties=function(a,b){a=this.styleRepository.setLayoutProperties(a,b);this.emit("layout-change",{layer:a,layout:b})};c.prototype.getTileUrl=function(a,b,d){var c=this.tileServers[b%this.tileServers.length];return c=c.replace(/\{z\}/gi,a.toString()).replace(/\{y\}/gi,
b.toString()).replace(/\{x\}/gi,d.toString())};c.prototype.write=function(a,b){return b&&b.origin&&!this.styleUrl?(b.messages&&b.messages.push(new f("vectortilelayer:unsupported","VectorTileLayer ("+this.title+", "+this.id+") with style defined by JSON only are not supported",{layer:this})),null):this.inherited(arguments,[a,b])};c.prototype.importLayerViewModule=function(a){return h(this,void 0,void 0,function(){return d(this,function(b){switch(a.type){case "2d":return[2,e.create(function(a){return p(["../views/2d/layers/VectorTileLayerView2D"],
a)})];case "3d":return[2,e.create(function(a){return p(["../views/3d/layers/VectorTileLayerView3D"],a)})]}return[2]})})};c.prototype._getSourceAndStyle=function(a,b){return h(this,void 0,void 0,function(){var c;return d(this,function(d){switch(d.label){case 0:return a?[4,C.loadMetadata(a,b)]:[2,e.reject(Error("invalid style!"))];case 1:return c=d.sent(),this._set("currentStyleInfo",{serviceUrl:c.serviceUrl,styleUrl:c.styleUrl,spriteUrl:c.spriteUrl,glyphsUrl:c.glyphsUrl,style:c.style,layerDefinition:c.layerDefinition}),
"string"===typeof a?(this.url=a,this.style=null):(this.url=null,this.style=a),this._set("sourceNameToSource",c.sourceNameToSource),this._set("primarySourceName",c.primarySourceName),this._set("styleRepository",new I(c.style,c)),this.read(c.layerDefinition,{origin:"service"}),[2]}})})};c.prototype._getDefaultAttribution=function(a){var b=a.match(/^https?:\/\/(basemaps|basemapsbeta|basemapsdev)\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i);if(b&&(a=b[3]&&
b[3].toLowerCase()))for(var b=b[2]||"",d=0,c="OpenStreetMap_v2 OpenStreetMap_Export_v2 OpenStreetMap_FTS_v2 OpenStreetMap_GCS_v2 World_Basemap World_Basemap_v2 World_Basemap_Export_v2 World_Basemap_GCS_v2 World_Basemap_WGS84".split(" ");d<c.length;d++){var e=c[d];if(-1<e.toLowerCase().indexOf(a))return q.normalize("//static.arcgis.com/attribution/Vector"+b+"/"+e)}};c.prototype._getPrimarySource=function(){return this.sourceNameToSource&&this.primarySourceName in this.sourceNameToSource?this.sourceNameToSource[this.primarySourceName]:
null};k([u.property({readOnly:!0,dependsOn:["currentStyleInfo"]})],c.prototype,"attributionDataUrl",null);k([u.property({type:["show","hide"]})],c.prototype,"listMode",void 0);k([u.property({json:{read:!1},readOnly:!0,dependsOn:["sourceNameToSource","primarySourceName"]})],c.prototype,"capabilities",null);k([u.property({readOnly:!0})],c.prototype,"currentStyleInfo",void 0);k([u.property({json:{read:!1},readOnly:!0,type:t,dependsOn:["sourceNameToSource","primarySourceName"]})],c.prototype,"fullExtent",
null);k([u.property()],c.prototype,"style",void 0);k([u.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}}})],c.prototype,"isReference",void 0);k([u.property({type:["VectorTileLayer"]})],c.prototype,"operationalLayerType",void 0);k([u.property({readOnly:!0,dependsOn:["serviceUrl"]})],c.prototype,"parsedUrl",null);k([u.property({readOnly:!0,dependsOn:["currentStyleInfo"]})],c.prototype,"serviceUrl",null);k([u.property({type:r,dependsOn:["tileInfo"],
readOnly:!0})],c.prototype,"spatialReference",null);k([u.property({readOnly:!0})],c.prototype,"styleRepository",void 0);k([u.property({readOnly:!0})],c.prototype,"sourceNameToSource",void 0);k([u.property({readOnly:!0})],c.prototype,"primarySourceName",void 0);k([u.property({type:String,readOnly:!0,dependsOn:["currentStyleInfo"],json:{write:{ignoreOrigin:!0},origins:{"web-document":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],c.prototype,"styleUrl",null);k([u.writer(["portal-item","web-document"],
"styleUrl")],c.prototype,"writeStyleUrl",null);k([u.property({json:{read:!1},readOnly:!0,dependsOn:["sourceNameToSource","primarySourceName"]})],c.prototype,"tileIndexType",null);k([u.property({json:{read:!1},readOnly:!0,dependsOn:["sourceNameToSource","primarySourceName"]})],c.prototype,"tileIndexUrl",null);k([u.property({json:{read:!1,origins:{service:{read:!1}}},readOnly:!0,type:B,dependsOn:["sourceNameToSource","primarySourceName"]})],c.prototype,"tileInfo",null);k([u.property({json:{read:!1},
readOnly:!0,type:D,dependsOn:["sourceNameToSource","primarySourceName"]})],c.prototype,"tilemapCache",null);k([u.property({json:{read:!1},readOnly:!0,dependsOn:["sourceNameToSource","primarySourceName"]})],c.prototype,"tileServers",null);k([u.property({json:{read:!1},readOnly:!0,value:"vector-tile"})],c.prototype,"type",void 0);k([u.property({json:{origins:{"web-document":{read:{source:"styleUrl"}},"portal-item":{read:{source:"url"}}},write:!1,read:!1}})],c.prototype,"url",void 0);k([u.property({readOnly:!0})],
c.prototype,"version",void 0);k([u.reader("version",["version","currentVersion"])],c.prototype,"readVersion",null);k([u.property({readOnly:!0,dependsOn:["tileInfo"]})],c.prototype,"compatibleTileInfo256",null);k([u.property({readOnly:!0,dependsOn:["tileInfo"]})],c.prototype,"compatibleTileInfo512",null);return c=k([u.subclass("esri.layers.VectorTileLayer")],c)}(u.declared(x,v,y,z,a,w))})},"esri/layers/support/SpriteSource":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../request ../../core/promiseUtils".split(" "),
function(p,c,n,l,k,d,h,g,f){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function b(a,b){this.baseURL=a;this.devicePixelRatio=b;this._isRetina=!1;this._spritesData={};this.height=this.width=this.image=null;this.loadStatus="not-loaded"}Object.defineProperty(b.prototype,"spriteNames",{get:function(){var a=[],b;for(b in this._spritesData)a.push(b);a.sort();return a},enumerable:!0,configurable:!0});b.prototype.getSpriteInfo=function(a){return this._spritesData[a]};b.prototype.load=function(a){return h(this,
void 0,void 0,function(){return d(this,function(b){switch(b.label){case 0:f.throwIfAborted(a);this.loadStatus="loading";if(!this.baseURL)return[2,f.resolve(this)];b.label=1;case 1:return b.trys.push([1,3,,4]),[4,this._loadSprites(a)];case 2:return b.sent(),this.loadStatus="loaded",[3,4];case 3:return b.sent(),this.loadStatus="failed",[3,4];case 4:return[2,this]}})})};b.prototype._loadSprites=function(a){var b=this;this._isRetina=1.15<this.devicePixelRatio?!0:!1;var d=this.baseURL,c=this._isRetina?
"@2x":"",h=""+d+c+".png";return f.all([g(d+c+".json",a),g(h,k({responseType:"image"},a))]).then(function(a){var d=a[0];a=a[1];var c=Object.keys(d.data);if(!c||0===c.length||1===c.length&&"_ssl"===c[0]||!a||!a.data)return b._spritesData=b.image=null,b.width=b.height=0,f.resolve(null);b._spritesData=d.data;d=a.data;b.width=d.width;b.height=d.height;a=document.createElement("canvas");c=a.getContext("2d");a.width=d.width;a.height=d.height;c.drawImage(d,0,0,d.width,d.height);d=c.getImageData(0,0,d.width,
d.height);d=new Uint8Array(d.data);for(c=0;c<d.length;c+=4)a=d[c+3]/255,d[c]*=a,d[c+1]*=a,d[c+2]*=a;b.image=d})};return b}();c.default=p})},"esri/layers/support/vectorTileLayerLoader":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../config ../../request ../../core/promiseUtils ../../core/urlUtils ../../views/2d/engine/vectorTiles/style/VectorTileSource".split(" "),function(p,c,n,l,k,d,h,g,f,b){function a(a){a&&
(a=f.getOrigin(a),t&&-1===t.indexOf(a)&&t.push(a))}function e(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];for(var b=void 0,d=0;d<a.length;++d)f.isProtocolRelative(a[d])?b&&(b=b.split("://")[0]+":"+a[d].trim()):b=f.isAbsolute(a[d])?a[d]:f.join(b,a[d]);return b}function m(b,d,c,e,m){return k(this,void 0,void 0,function(){var k,r,p,t,w,v;return l(this,function(l){switch(l.label){case 0:g.throwIfAborted(m);if("string"!==typeof c)return[3,2];t=f.normalize(c);a(t);w=f.urlToObject(t);return[4,
h(w.path,n({query:{f:"json"},responseType:"json"},m))];case 1:return p=l.sent(),r=k=t,[3,3];case 2:p={data:c},k=c.jsonUrl||null,r=e,l.label=3;case 3:return v=p.data,p.ssl&&(k&&(k=k.replace(/^http:/i,"https:")),r&&(r=r.replace(/^http:/i,"https:"))),v.sources?(b.styleUrl=k||null,[2,q(b,v,r,m)]):v.sources?[2,g.reject("You must specify the URL or the JSON for a service or for a style.")]:b.sourceUrl?[2,u(b,v,r,!1,d,m)]:(b.sourceUrl=k||null,[2,u(b,v,r,!0,d,m)])}})})}function q(b,d,c,h){return k(this,void 0,
void 0,function(){var k,n,q,r,p,t;return l(this,function(l){switch(l.label){case 0:k=c?f.removeFile(c):f.appBaseUrl;b.styleBase=k;b.style=d;b.styleUrl&&a(b.styleUrl);n=[];if(!d.sources||!d.sources.esri)return[3,3];q=d.sources.esri;return q.url?[4,m(b,"esri",e(k,q.url),void 0,h)]:[3,2];case 1:return l.sent(),[3,3];case 2:n.push(m(b,"esri",q,k,h)),l.label=3;case 3:r=0;for(p=Object.keys(d.sources);r<p.length;r++)t=p[r],"esri"!==t&&"vector"===d.sources[t].type&&(d.sources[t].url?n.push(m(b,t,e(k,d.sources[t].url),
void 0,h)):n.push(m(b,t,d.sources[t],k,h)));return[4,g.all(n)];case 4:return l.sent(),[2]}})})}function u(d,c,h,n,q,p){return k(this,void 0,void 0,function(){var k,r,t,u;return l(this,function(l){k=h?f.removeTrailingSlash(h)+"/":f.appBaseUrl;l=k;if(c.hasOwnProperty("tileInfo"))r=c;else{for(var w={xmin:-2.0037507067161843E7,ymin:-2.0037507067161843E7,xmax:2.0037507067161843E7,ymax:2.0037507067161843E7,spatialReference:{wkid:102100}},v=78271.51696400007,x=2.958287637957775E8,y=[],z=c.hasOwnProperty("minzoom")?
parseFloat(c.minzoom):0,A=c.hasOwnProperty("maxzoom")?parseFloat(c.maxzoom):16,B=0;B<=A;B++)B>=z&&y.push({level:B,scale:x,resolution:v}),v/=2,x/=2;v=0;for(x=c.tiles;v<x.length;v++)a(e(l,x[v]));r={capabilities:"TilesOnly",initialExtent:w,fullExtent:w,minScale:y[0].scale,maxScale:y[y.length-1].scale,tiles:c.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-2.0037508342787E7,y:2.0037508342787E7},lods:y,spatialReference:{wkid:102100}}}}t=new b(q,k,r);if(!n&&d.primarySourceName in d.sourceNameToSource){u=
d.sourceNameToSource[d.primarySourceName];if(!u.isCompatibleWith(t))return[2,g.resolve()];null!=t.fullExtent&&(null!=u.fullExtent?u.fullExtent.union(t.fullExtent):u.fullExtent=t.fullExtent.clone());u.tileInfo.lods.length<t.tileInfo.lods.length&&(u.tileInfo=t.tileInfo)}n?(d.sourceBase=k,d.source=c,d.validatedSource=r,d.primarySourceName=q,d.sourceUrl&&a(d.sourceUrl)):a(k);d.sourceNameToSource[q]=t;return d.style?[2]:null==c.defaultStyles?[2,g.reject()]:"string"===typeof c.defaultStyles?[2,m(d,"",e(k,
c.defaultStyles,"root.json"),void 0,p)]:[2,m(d,"",c.defaultStyles,e(k,"root.json"),p)]})})}Object.defineProperty(c,"__esModule",{value:!0});var t=d.defaults&&d.defaults.io.corsEnabledServers;c.loadMetadata=function(b,d){return k(this,void 0,void 0,function(){var c,g,h,k,n,q;return l(this,function(l){switch(l.label){case 0:return c={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,styleUrl:null,sourceNameToSource:{},primarySourceName:""},g="string"===typeof b?
[b,null]:[null,b.jsonUrl],h=g[0],k=g[1],n=h?f.urlToObject(h):null,[4,m(c,"esri",b,k,d)];case 1:return l.sent(),q={layerDefinition:c.validatedSource,url:h,parsedUrl:n,serviceUrl:c.sourceUrl,style:c.style,styleUrl:c.styleUrl,spriteUrl:c.style.sprite&&e(c.styleBase,c.style.sprite),glyphsUrl:c.style.glyphs&&e(c.styleBase,c.style.glyphs),sourceNameToSource:c.sourceNameToSource,primarySourceName:c.primarySourceName},a(q.spriteUrl),a(q.glyphsUrl),[2,q]}})})}})},"esri/views/2d/engine/vectorTiles/style/VectorTileSource":function(){define("require exports ../../../../../core/tsSupport/generatorHelper ../../../../../core/tsSupport/awaiterHelper ../../../../../core/lang ../../../../../core/urlUtils ../../../../../geometry/Extent ../../../../../layers/support/serviceTileInfoProperty ../../../../../layers/support/TilemapCache ../TileIndex".split(" "),
function(p,c,n,l,k,d,h,g,f,b){return function(){function a(a,c,l){this.tileMapURL="";this.fullExtent=this.tileIndex=this.capabilities=this.tileInfo=this.parsedUrl=this.tilemapCache=null;this.name=a;if(this.sourceUrl=c)this.parsedUrl=d.urlToObject(this.sourceUrl);a=k.clone(l);var e=a.tiles;c&&e.forEach(function(a,b){d.isAbsolute(a)||(e[b]=d.join(c,a))});this.tileServers=e;l.tileMap&&(this.tileMapURL=d.join(c,l.tileMap));var m=l.capabilities&&l.capabilities.split(",").map(function(a){return a.toLowerCase().trim()}),
n=!!l.exportTilesAllowed,m=!!m&&-1!==m.indexOf("tilemap"),q=n&&l.hasOwnProperty("maxExportTilesCount")?l.maxExportTilesCount:0;this.capabilities={operations:{supportsExportTiles:n,supportsTileMap:m},exportTiles:n?{maxExportTilesCount:+q}:null};this.tileInfo=g.readServiceTileInfo(a.tileInfo,a,null,{ignoreMinMaxLOD:!0});m&&(this.type="vector-tile",this.tilemapCache=new f({layer:this}),this.tileIndex=new b(this.tilemapCache));this.fullExtent=h.fromJSON(l.fullExtent)}a.prototype.getRefKey=function(a,
b){return l(this,void 0,void 0,function(){return n(this,function(d){return this.tileIndex?[2,this.tileIndex.dataKey(a,b)]:[2,a]})})};a.prototype.getSourceTileUrl=function(a,b,d){var c=this.tileServers[b%this.tileServers.length];return c=c.replace(/\{z\}/gi,a.toString()).replace(/\{y\}/gi,b.toString()).replace(/\{x\}/gi,d.toString())};a.prototype.isCompatibleWith=function(a){var b=this.tileInfo;a=a.tileInfo;if(!b.spatialReference.equals(a.spatialReference)||!b.origin.equals(a.origin)||Math.round(b.dpi)!==
Math.round(a.dpi))return!1;b=b.lods;a=a.lods;for(var d=Math.min(b.length,a.length),c=0;c<d;c++){var e=b[c],f=a[c];if(e.level!==f.level||Math.round(e.scale)!==Math.round(f.scale))return!1}return!0};return a}()})},"esri/views/2d/engine/vectorTiles/TileIndex":function(){define(["require","exports","../../../../core/promiseUtils","../../../../layers/support/TilemapCache","../../tiling/TileKey"],function(p,c,n,l,k){return function(){function d(d){if(d instanceof l)this._tilemapCache=d;else if(d&&"index"in
d)this._tilemap=d.index;else throw Error("Invalid tilemap!");}d.prototype.dataKey=function(d,c){if(this._tilemapCache){var f=d.level,b=d.row,a=d.col,e=new k(d);return this._tilemapCache.fetchAvailabilityUpsample(f,b,a,e,c).then(function(){return e}).catch(function(d){if(n.isAbortError(d))throw d;e.level=f;e.row=b;e.col=a;return e})}return this._getIndexedDataKey(d)};d.prototype.forEach=function(d,c,f,b,a){this._callback=a;this._maxLevel=c+d;this._forEach(this._tilemap,c,f,b)};d.prototype._forEach=
function(d,c,f,b){0!==d&&(this._callback(c,f,b),c!==this._maxLevel&&"object"===typeof d&&(this._forEach(d[0],c+1,2*f,2*b),this._forEach(d[1],c+1,2*f,2*b+1),this._forEach(d[2],c+1,2*f+1,2*b),this._forEach(d[3],c+1,2*f+1,2*b+1)))};d.prototype._getIndexedDataKey=function(d){var c=[d];if(0>d.level||0>d.row||0>d.col||0<d.row>>d.level||0<d.col>>d.level)return n.resolve(null);for(;0!==d.level;)d=new k(d.level-1,d.row>>1,d.col>>1,d.world),c.push(d);d=this._tilemap;var f=c.pop(),b,a;if(1===d)return n.resolve(f);
for(;c.length;)if(b=c.pop(),a=(b.col&1)+((b.row&1)<<1),d){if(0===d[a]){f=null;break}if(1===d[a]){f=b;break}f=b;d=d[a]}return n.resolve(f)};return d}()})},"esri/portal/support/jsonContext":function(){define(["require","exports","../../core/urlUtils","../Portal"],function(p,c,n,l){Object.defineProperty(c,"__esModule",{value:!0});c.createForItem=function(c){return{origin:"portal-item",url:n.urlToObject(c.itemUrl),portal:c.portal||l.getDefault()}}})},"esri/views/2d/engine/vectorTiles/SchemaHelper":function(){define(["require",
"exports","../../../../layers/support/LOD","../../../../layers/support/TileInfo"],function(p,c,n,l){return function(){function c(d,c){this.lockedSchemaPixelSize=d;this.isGCS=c}c.prototype.getLevelRowColumn=function(d){return this.isGCS?[d[0],d[1]>>1,d[2]>>1]:256===this.lockedSchemaPixelSize&&0<d[0]?[d[0]-1,d[1]>>1,d[2]>>1]:d};c.prototype.adjustLevel=function(d){return this.isGCS?d:256===this.lockedSchemaPixelSize?0<d?d-1:0:d};c.prototype.getShift=function(d,c){var g=0,f=0;if(256===this.lockedSchemaPixelSize||
this.isGCS)d[2]%2&&(g=2*c),d[1]%2&&(f=2*c);return[g,f]};c.prototype.getScale=function(d){if(this.isGCS){if(512===this.lockedSchemaPixelSize)return 2}else if(256===this.lockedSchemaPixelSize&&0===d)return.5;return 1};c.create256x256CompatibleTileInfo=function(d){if(!d)return null;if(256===d.size[0]&&256===d.size[1])return d;for(var c=d.spatialReference.isGeographic,g=[],f=d.lods.length,b=0;b<f;b++){var a=d.lods[b];g.push(new n({level:a.level,scale:a.scale,resolution:c?a.resolution:2*a.resolution}))}return new l({size:[256,
256],dpi:d.dpi,format:d.format,compressionQuality:d.compressionQuality,origin:d.origin,spatialReference:d.spatialReference,lods:g})};c.create512x512CompatibleTileInfo=function(d){if(!d||256===d.size[0]||256===d.size[1])return null;for(var c=[],g=d.lods.length,f=0;f<g;f++){var b=d.lods[f];c.push(new n({level:b.level,scale:b.scale,resolution:.5*b.resolution}))}return new l({size:[512,512],dpi:d.dpi,format:d.format,compressionQuality:d.compressionQuality,origin:d.origin,spatialReference:d.spatialReference,
lods:c})};return c}()})},"esri/views/2d/engine/vectorTiles/tileInfoUtils":function(){define(["require","exports","../../../../layers/support/TileInfo"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.areSchemasOverlapping=function(c,k){if(c===k)return!0;if(!c&&null!=k||null!=c&&!k||!c.spatialReference.equals(k.spatialReference)||c.dpi!==k.dpi)return!1;var d=c.origin,h=k.origin;if(1E-6<=Math.abs(d.x-h.x)||1E-6<=Math.abs(d.y-h.y))return!1;c.lods[0].scale>k.lods[0].scale?(d=c,c=k):
d=k;for(k=d.lods[0].scale;k>=c.lods[c.lods.length-1].scale-1E-6;k/=2)if(1E-6>Math.abs(k-c.lods[0].scale))return!0;return!1};c.unionTileInfos=function(c,k){if(c===k)return c;if(!c&&null!=k)return k;if(null!=c&&!k)return c;var d=c.size[0],h=c.format,g=c.dpi,f={x:c.origin.x,y:c.origin.y},b=c.spatialReference.toJSON(),a=c.lods[0].scale>k.lods[0].scale?c.lods[0]:k.lods[0];c=(c.lods[c.lods.length-1].scale<=k.lods[k.lods.length-1].scale?c.lods[c.lods.length-1]:k.lods[k.lods.length-1]).scale;k=[];for(var e=
a.scale,a=a.resolution,m=0;e>c;)k.push({level:m,resolution:a,scale:e}),m++,e/=2,a/=2;return new n({size:[d,d],dpi:g,format:h||"pbf",origin:f,lods:k,spatialReference:b})}})},"esri/views/2d/engine/vectorTiles/style/StyleRepository":function(){define(["require","exports","../../../../../core/has","./StyleLayer"],function(p,c,n,l){return function(){function c(d,h){this._layerByName={};this.styleJSON=d;this.version=parseFloat(d.version);this.sprite=h?h.spriteUrl:d.sprite;this.glyphs=h?h.glyphsUrl:d.glyphs;
if(n("stable-symbol-rendering")){var g=(d.layers||[]).filter(function(d){return d.layout&&d.layout["text-font"]})[0];g&&(d.layers||[]).forEach(function(d){d.layout&&d.layout["text-font"]&&(d.layout["text-font"]=g.layout["text-font"])})}if(this.layers=(d.layers||[]).map(c._create))for(d=void 0,h=0;h<this.layers.length;h++)d=this.layers[h],this._layerByName[d.id.toLowerCase()]=d;this._identifyRefLayers()}c.prototype.isPainterDataDriven=function(d){return(d=this._layerByName[d.toLowerCase()])?d.isPainterDataDriven():
!1};c.prototype.getStyleLayerId=function(d){return d>=this.layers.length?null:this.layers[d].id};c.prototype.getLayoutProperties=function(d){return(d=this._layerByName[d.toLowerCase()])?d.layout:null};c.prototype.getPaintProperties=function(d){return(d=this._layerByName[d.toLowerCase()])?d.paint:null};c.prototype.setPaintProperties=function(d,h){d=this._layerByName[d.toLowerCase()];if(!d)return"";var g=this.layers.indexOf(d);this.styleJSON.layers[g].paint=h;h=c._recreateLayer({id:d.id,type:d.typeName,
source:d.source,sourceLayer:d["source-layer"],minzoom:d.minzoom,maxzoom:d.maxzoom,filter:d.filter,layout:d.layout,paint:h},d);this.layers[g]=h;this._layerByName[d.id.toLowerCase()]=h;return d.id};c.prototype.setLayoutProperties=function(d,h){d=this._layerByName[d.toLowerCase()];if(!d)return"";var g=this.layers.indexOf(d);this.styleJSON.layers[g].layout=h;h=c._recreateLayer({id:d.id,type:d.typeName,source:d.source,sourceLayer:d["source-layer"],minzoom:d.minzoom,maxzoom:d.maxzoom,filter:d.filter,layout:h,
paint:d.paint},d);this.layers[g]=h;this._layerByName[d.id.toLowerCase()]=h;return d.id};c.prototype._identifyRefLayers=function(){for(var d=[],c=[],g=0,f=0,b=this.layers;f<b.length;f++){var a=b[f];if(1===a.type){var e=a,k=a.source+"|"+a.sourceLayer,k=k+("|"+JSON.stringify(a.layout&&a.layout.visibility)),k=k+("|"+JSON.stringify(a.minzoom)),k=k+("|"+JSON.stringify(a.maxzoom)),k=k+("|"+JSON.stringify(a.filter));if(e.hasDataDrivenFill||e.hasDataDrivenOutline)k+="|"+JSON.stringify(g);d.push({key:k,layer:a})}2===
a.type&&(e=a,k=a.source+"|"+a.sourceLayer,k+="|"+JSON.stringify(a.layout&&a.layout.visibility),k+="|"+JSON.stringify(a.minzoom),k+="|"+JSON.stringify(a.maxzoom),k+="|"+JSON.stringify(a.filter),k+="|"+JSON.stringify(a.layout&&a.layout["line-cap"]),k+="|"+JSON.stringify(a.layout&&a.layout["line-join"]),e.hasDataDrivenLine&&(k+="|"+JSON.stringify(g)),c.push({key:k,layer:a}));++g}this._assignRefLayers(d);this._assignRefLayers(c)};c.prototype._assignRefLayers=function(d){d.sort(function(a,b){return a.key<
b.key?-1:a.key>b.key?1:0});for(var c,g,f=d.length,b=0;b<f;b++){var a=d[b];if(a.key===c)a.layer.refLayerId=g;else if(c=a.key,g=a.layer.id,1===a.layer.type&&!a.layer.getPaintProperty("fill-outline-color"))for(var e=b+1;e<f;e++){var k=d[e];if(k.key===c){if(k.layer.getPaintProperty("fill-outline-color")){d[b]=k;d[e]=a;g=k.layer.id;break}}else break}}};c._create=function(d,c,g){c=1-1/(g.length+1)*(1+c);switch(d.type){case "background":return new l.BackgroundStyleLayer(0,d,c);case "fill":return new l.FillStyleLayer(1,
d,c);case "line":return new l.LineStyleLayer(2,d,c);case "symbol":return new l.SymbolStyleLayer(3,d,c);case "raster":throw Error("Unsupported vector tile raster layer");case "circle":return new l.CircleStyleLayer(4,d,c)}throw Error("Unknown vector tile layer");};c._recreateLayer=function(d,c){switch(d.type){case "background":return new l.BackgroundStyleLayer(0,d,c.z);case "fill":return new l.FillStyleLayer(1,d,c.z);case "line":return new l.LineStyleLayer(2,d,c.z);case "symbol":return new l.SymbolStyleLayer(3,
d,c.z);case "raster":throw Error("Unsupported vector tile raster layer");case "circle":return new l.CircleStyleLayer(4,d,c.z)}};return c}()})},"esri/views/2d/engine/vectorTiles/style/StyleLayer":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ./Filter ./StyleDefinition ./StyleProperty ../../webgl/definitions".split(" "),function(p,c,n,l,k,d,h){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(b,a,d){this.type=b;this.typeName=a.type;this.id=a.id;
this.source=a.source;this.sourceLayer=a["source-layer"];this.minzoom=a.minzoom;this.maxzoom=a.maxzoom;this.filter=a.filter;this.layout=a.layout;this.paint=a.paint;this.z=d;switch(b){case 0:this._layoutDefinition=k.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=k.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=k.StyleDefinition.fillLayoutDefinition;this._paintDefinition=k.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=k.StyleDefinition.lineLayoutDefinition;
this._paintDefinition=k.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=k.StyleDefinition.symbolLayoutDefinition;this._paintDefinition=k.StyleDefinition.symbolPaintDefinition;break;case 4:this._layoutDefinition=k.StyleDefinition.circleLayoutDefinition,this._paintDefinition=k.StyleDefinition.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout);this._paintProperties=this._parsePaint(this.paint)}c.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?
this._featureFilter:this._featureFilter=l.createFilter(this.filter)};c.prototype.getLayoutProperty=function(b){var a=this._layoutProperties;if(a)return a[b]};c.prototype.getPaintProperty=function(b){var a=this._paintProperties;if(a)return a[b]};c.prototype.getLayoutValue=function(b,a,d){var c,e=this._layoutProperties;e&&(e=e[b])&&(c=e.getValue(a,d));b=this._layoutDefinition[b];void 0===c&&(c=b["default"]);"enum"===b.type&&(c=b.values.indexOf(c));return c};c.prototype.getPaintValue=function(b,a,d){var c,
e=this._paintProperties;e&&(e=e[b])&&(c=e.getValue(a,d));b=this._paintDefinition[b];void 0===c&&(c=b["default"]);"enum"===b.type&&(c=b.values.indexOf(c));return c};c.prototype.isPainterDataDriven=function(){var b=this._paintProperties;if(b)for(var a in b)if(b[a].isDataDriven)return!0;return!1};c.prototype._parseLayout=function(b){var a={},c;for(c in b){var f=this._layoutDefinition[c];f&&(a[c]=new d(c,f,b[c]))}return a};c.prototype._parsePaint=function(b){var a={},c;for(c in b){var f=this._paintDefinition[c];
f&&(a[c]=new d(c,f,b[c]))}return a};return c}();c.StyleLayer=p;var g=function(d){function b(a,b,c){return d.call(this,a,b,c)||this}n(b,d);return b}(p);c.BackgroundStyleLayer=g;g=function(d){function b(a,b,c){a=d.call(this,a,b,c)||this;b=a.getPaintProperty("fill-color");a.hasDataDrivenColor=b?b.isDataDriven:!1;b=a.getPaintProperty("fill-opacity");a.hasDataDrivenOpacity=b?b.isDataDriven:!1;a.hasDataDrivenFill=a.hasDataDrivenColor||a.hasDataDrivenOpacity;b=a.getPaintProperty("fill-outline-color");a.outlineUsesFillColor=
!b;a.hasDataDrivenOutlineColor=b?b.isDataDriven:!1;a.hasDataDrivenOutline=(b?a.hasDataDrivenOutlineColor:a.hasDataDrivenColor)||a.hasDataDrivenOpacity;return a}n(b,d);return b}(p);c.FillStyleLayer=g;g=function(d){function b(a,b,c){a=d.call(this,a,b,c)||this;c=a.getPaintProperty("line-color");a.hasDataDrivenColor=c?c.isDataDriven:!1;c=a.getPaintProperty("line-opacity");a.hasDataDrivenOpacity=c?c.isDataDriven:!1;c=a.getPaintProperty("line-width");a.hasDataDrivenWidth=c?c.isDataDriven:!1;a.hasDataDrivenLine=
a.hasDataDrivenColor||a.hasDataDrivenOpacity||a.hasDataDrivenWidth;b=b.paint["line-width"];b||(b=k.StyleDefinition.linePaintDefinition["line-width"].default);a.isThinLine=!a.hasDataDrivenWidth&&"number"===typeof b&&b<h.THIN_LINE_THRESHOLD;return a}n(b,d);return b}(p);c.LineStyleLayer=g;g=function(d){function b(a,b,c){a=d.call(this,a,b,c)||this;b=a.getPaintProperty("icon-color");a.hasDataDrivenIconColor=b?b.isDataDriven:!1;b=a.getPaintProperty("icon-opacity");a.hasDataDrivenIconOpacity=b?b.isDataDriven:
!1;b=a.getLayoutProperty("icon-size");a.hasDataDrivenIconSize=b?b.isDataDriven:!1;a.hasDataDrivenIcon=a.hasDataDrivenIconColor||a.hasDataDrivenIconOpacity||a.hasDataDrivenIconSize;b=a.getPaintProperty("text-color");a.hasDataDrivenTextColor=b?b.isDataDriven:!1;b=a.getPaintProperty("text-opacity");a.hasDataDrivenTextOpacity=b?b.isDataDriven:!1;b=a.getLayoutProperty("text-size");a.hasDataDrivenTextSize=b?b.isDataDriven:!1;a.hasDataDrivenText=a.hasDataDrivenTextColor||a.hasDataDrivenTextOpacity||a.hasDataDrivenTextSize;
return a}n(b,d);return b}(p);c.SymbolStyleLayer=g;p=function(d){function b(a,b,c){a=d.call(this,a,b,c)||this;b=a.getPaintProperty("circle-radius");a.hasDataDrivenRadius=b?b.isDataDriven:!1;b=a.getPaintProperty("circle-color");a.hasDataDrivenColor=b?b.isDataDriven:!1;b=a.getPaintProperty("circle-opacity");a.hasDataDrivenOpacity=b?b.isDataDriven:!1;b=a.getPaintProperty("circle-stroke-width");a.hasDataDrivenStrokeWidth=b?b.isDataDriven:!1;b=a.getPaintProperty("circle-stroke-color");a.hasDataDrivenStrokeColor=
b?b.isDataDriven:!1;b=a.getPaintProperty("circle-stroke-opacity");a.hasDataDrivenStrokeOpacity=b?b.isDataDriven:!1;b=a.getPaintProperty("circle-blur");a.hasDataDrivenBlur=b?b.isDataDriven:!1;return a}n(b,d);return b}(p);c.CircleStyleLayer=p;p=function(){return function(d,b,a){this.cap=d.getLayoutValue("line-cap",b,a);this.join=d.getLayoutValue("line-join",b,a);this.miterLimit=d.getLayoutValue("line-miter-limit",b,a);this.roundLimit=d.getLayoutValue("line-round-limit",b,a)}}();c.LineLayout=p;p=function(){return function(d,
b,a,c){this.allowOverlap=d.getLayoutValue("icon-allow-overlap",b,c);this.ignorePlacement=d.getLayoutValue("icon-ignore-placement",b,c);this.optional=d.getLayoutValue("icon-optional",b,c);this.rotationAlignment=d.getLayoutValue("icon-rotation-alignment",b,c);this.size=d.getLayoutValue("icon-size",b,c);this.rotate=d.getLayoutValue("icon-rotate",b,c);this.padding=d.getLayoutValue("icon-padding",b,c);this.keepUpright=d.getLayoutValue("icon-keep-upright",b,c);this.offset=d.getLayoutValue("icon-offset",
b,c);2===this.rotationAlignment&&(this.rotationAlignment=a?0:1)}}();c.IconLayout=p;p=function(){return function(d,b,a,c){this.allowOverlap=d.getLayoutValue("text-allow-overlap",b,c);this.ignorePlacement=d.getLayoutValue("text-ignore-placement",b,c);this.optional=d.getLayoutValue("text-optional",b,c);this.rotationAlignment=d.getLayoutValue("text-rotation-alignment",b,c);this.fontArray=d.getLayoutValue("text-font",b,c);this.maxWidth=d.getLayoutValue("text-max-width",b,c);this.lineHeight=d.getLayoutValue("text-line-height",
b,c);this.letterSpacing=d.getLayoutValue("text-letter-spacing",b,c);this.justify=d.getLayoutValue("text-justify",b,c);this.anchor=d.getLayoutValue("text-anchor",b,c);this.maxAngle=d.getLayoutValue("text-max-angle",b,c);this.size=d.getLayoutValue("text-size",b,c);this.rotate=d.getLayoutValue("text-rotate",b,c);this.padding=d.getLayoutValue("text-padding",b,c);this.keepUpright=d.getLayoutValue("text-keep-upright",b,c);this.transform=d.getLayoutValue("text-transform",b,c);this.offset=d.getLayoutValue("text-offset",
b,c);2===this.rotationAlignment&&(this.rotationAlignment=a?0:1)}}();c.TextLayout=p})},"esri/views/2d/engine/vectorTiles/style/Filter":function(){define(["require","exports"],function(p,c){return function(){function c(l,k,d){this._op=l;"$type"===k?(this._val=d instanceof Array?d.map(function(d){return c._types.indexOf(d)}):c._types.indexOf(d),this._op+=11):(this._key=k,this._val=d)}c.prototype.filter=function(c){switch(this._op){case 0:return this._val;case 1:return c.values[this._key]===this._val;
case 2:return c.values[this._key]!==this._val;case 3:return c.values[this._key]<this._val;case 4:return c.values[this._key]>this._val;case 5:return c.values[this._key]<=this._val;case 6:return c.values[this._key]>=this._val;case 7:return-1!==this._val.indexOf(c.values[this._key]);case 8:return-1===this._val.indexOf(c.values[this._key]);case 9:for(var k=0,d=this._val;k<d.length;k++){var h=d[k];if(h.filter(c))return!0}return!1;case 10:k=0;for(d=this._val;k<d.length;k++)if(h=d[k],!h.filter(c))return!1;
return!0;case 11:k=0;for(d=this._val;k<d.length;k++)if(h=d[k],h.filter(c))return!1;return!0;case 12:return c.type===this._val;case 13:return c.type!==this._val;case 14:return c.type<this._val;case 15:return c.type>this._val;case 16:return c.type>=this._val;case 17:return c.type<=this._val;case 18:return-1!==this._val.indexOf(c.type);case 19:return-1===this._val.indexOf(c.type);case 20:return void 0!==c.values[this._key];case 21:return void 0===c.values[this._key]}};c.createFilter=function(l){if(!l)return new c(0,
void 0,!0);var k=l[0];if(1>=l.length)return new c(0,void 0,"any"!==k);switch(k){case "\x3d\x3d":return new c(1,l[1],l[2]);case "!\x3d":return new c(2,l[1],l[2]);case "\x3e":return new c(4,l[1],l[2]);case "\x3c":return new c(3,l[1],l[2]);case "\x3e\x3d":return new c(6,l[1],l[2]);case "\x3c\x3d":return new c(5,l[1],l[2]);case "in":return new c(7,l[1],l.slice(2));case "!in":return new c(8,l[1],l.slice(2));case "any":return new c(9,void 0,l.slice(1).map(c.createFilter.bind(this)));case "all":return new c(10,
void 0,l.slice(1).map(c.createFilter.bind(this)));case "none":return new c(11,void 0,l.slice(1).map(c.createFilter.bind(this)));case "has":return new c(20,l[1],void 0);case "!has":return new c(21,l[1],void 0);default:throw Error("invalid operator: "+k);}};c._types=["Unknown","Point","LineString","Polygon"];return c}()})},"esri/views/2d/engine/vectorTiles/style/StyleDefinition":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(){}
c.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}};c.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}};c.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"},"line-cap":{type:"enum",values:["butt","round","square"],default:"butt"},"line-join":{type:"enum",values:["bevel","round","miter"],default:"miter"},"line-miter-limit":{type:"number",default:2},"line-round-limit":{type:"number",
default:1.05}};c.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"},"symbol-placement":{type:"enum",values:["point","line"],default:"point"},"symbol-spacing":{type:"number",minimum:1,default:250},"symbol-avoid-edges":{type:"boolean",default:!1},"icon-image":{type:"string"},"icon-allow-overlap":{type:"boolean",default:!1},"icon-ignore-placement":{type:"boolean",default:!1},"icon-optional":{type:"boolean",default:!1},"icon-rotation-alignment":{type:"enum",values:["map",
"viewport","auto"],default:"auto"},"icon-size":{type:"number",minimum:0,default:1},"icon-rotate":{type:"number",default:0},"icon-padding":{type:"number",minimum:0,default:2},"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-field":{type:"string"},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:"auto"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},
"text-size":{type:"number",minimum:0,default:16},"text-max-width":{type:"number",minimum:0,default:10},"text-line-height":{type:"number",default:1.2},"text-letter-spacing":{type:"number",default:0},"text-justify":{type:"enum",values:["left","center","right"],default:"center"},"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),default:"center"},"text-max-angle":{type:"number",minimum:0,default:45},"text-rotate":{type:"number",default:0},
"text-padding":{type:"number",minimum:0,default:2},"text-keep-upright":{type:"boolean",default:!0},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],default:"none"},"text-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-allow-overlap":{type:"boolean",default:!1},"text-ignore-placement":{type:"boolean",default:!1},"text-optional":{type:"boolean",default:!1}};c.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}};c.backgroundPaintDefinition=
{"background-opacity":{type:"number",minimum:0,maximum:1,default:1},"background-color":{type:"color",default:[0,0,0,1]},"background-pattern":{type:"string"}};c.fillPaintDefinition={"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-antialias":{type:"boolean",default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-translate":{type:"array",value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",values:["map",
"viewport"],default:"map"},"fill-pattern":{type:"string"}};c.linePaintDefinition={"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-color":{type:"color",default:[0,0,0,1]},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"line-width":{type:"number",minimum:0,default:1},"line-gap-width":{type:"number",minimum:0,default:0},"line-offset":{type:"number",default:0},"line-blur":{type:"number",
minimum:0,default:0},"line-dasharray":{type:"array",value:"number",default:[]},"line-pattern":{type:"string"}};c.symbolPaintDefinition={"icon-opacity":{type:"number",minimum:0,maximum:1,default:1},"icon-color":{type:"color",default:[0,0,0,1]},"icon-halo-color":{type:"color",default:[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,default:0},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-translate":{type:"array",value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",
values:["map","viewport"],default:"map"},"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-color":{type:"color",default:[0,0,0,1]},"text-halo-color":{type:"color",default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-halo-blur":{type:"number",minimum:0,default:0},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"}};c.rasterPaintDefinition={"raster-opacity":{type:"number",
minimum:0,maximum:1,default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,default:0},"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}};c.circlePaintDefinition={"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",
minimum:0,default:5},"circle-color":{type:"color",default:[0,0,0,1]},"circle-blur":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,default:1}};return c}();c.StyleDefinition=p})},"esri/views/2d/engine/vectorTiles/style/StyleProperty":function(){define(["require",
"exports","../../../../../Color","../GeometryUtils"],function(p,c,n,l){return function(){function c(d,h,g){this.isDataDriven=!1;switch(h.type){case "number":d=!0;break;case "color":d=!0;g=c._parseColor(g);break;case "array":d="number"===h.value;break;default:d=!1}null==g&&(g=h.default);d&&"interval"===g.type&&(d=!1);var f=g&&g.stops&&0<g.stops.length;if(f)for(var b=0,a=g.stops;b<a.length;b++){var e=a[b];e[1]=this._validate(e[1],h)}if(this.isDataDriven=g?!!g.property:!1)if(void 0!==g.default&&(g.default=
this._validate(g.default,h)),f)switch(g.type){case "identity":this.getValue=this._buildIdentity(g,h);break;case "categorical":this.getValue=this._buildCategorical(g,h);break;default:this.getValue=d?this._buildInterpolate(g,h):this._buildInterval(g,h)}else this.getValue=this._buildIdentity(g,h);else f?this.getValue=d?this._buildZoomInterpolate(g):this._buildZoomInterval(g):(g=this._validate(g,h),this.getValue=this._buildSimple(g))}c.prototype._validate=function(c,h){if("number"===h.type){if(c<h.minimum)return h.minimum;
if(c>h.maximum)return h.maximum}return c};c.prototype._buildSimple=function(c){return function(){return c}};c.prototype._buildIdentity=function(d,h){var g=this;return function(f,b){var a;b&&(a=b.values[d.property],"color"===h.type&&(a=c._parseColor(a)));void 0===a&&(a=d.default);return void 0!==a?g._validate(a,h):h.default}};c.prototype._buildCategorical=function(c,h){var d=this;return function(f,b){var a;b&&(a=b.values[c.property]);a=d._categorical(a,c.stops);return void 0!==a?a:void 0!==c.default?
c.default:h.default}};c.prototype._buildInterval=function(c,h){var d=this;return function(f,b){var a;b&&(a=b.values[c.property]);return"number"===typeof a?d._interval(a,c.stops):void 0!==c.default?c.default:h.default}};c.prototype._buildInterpolate=function(c,h){var d=this;return function(f,b){var a;b&&(a=b.values[c.property]);return"number"===typeof a?d._interpolate(a,c.stops,c.base||1):void 0!==c.default?c.default:h.default}};c.prototype._buildZoomInterpolate=function(c){var d=this;return function(g){return d._interpolate(g,
c.stops,c.base||1)}};c.prototype._buildZoomInterval=function(c){var d=this;return function(g){return d._interval(g,c.stops)}};c.prototype._categorical=function(c,h){for(var d=h.length,f=0;f<d;f++)if(h[f][0]===c)return h[f][1]};c.prototype._interval=function(c,h){for(var d=h.length,f=0,b=0;b<d;b++)if(h[b][0]<=c)f=b;else break;return h[f][1]};c.prototype._interpolate=function(c,h,g){for(var d,b,a=h.length,e=0;e<a;e++){var k=h[e];if(k[0]<=c)d=k;else{b=k;break}}if(d&&b){e=b[0]-d[0];c-=d[0];g=1===g?c/
e:(Math.pow(g,c)-1)/(Math.pow(g,e)-1);if(Array.isArray(d[1])){d=d[1];b=b[1];c=[];for(e=0;e<d.length;e++)c.push(l.interpolate(d[e],b[e],g));return c}return l.interpolate(d[1],b[1],g)}if(d)return d[1];if(b)return b[1]};c._isEmpty=function(c){for(var d in c)if(c.hasOwnProperty(d))return!1;return!0};c._parseColor=function(d){if(Array.isArray(d))return d;if("string"===typeof d){if(d=new n(d),!this._isEmpty(d))return n.toUnitRGBA(d)}else return d&&d.default&&(d.default=c._parseColor(d.default)),d&&d.stops&&
(d.stops=d.stops.map(function(d){return[d[0],c._parseColor(d[1])]})),d};return c}()})},"esri/views/2d/engine/vectorTiles/GeometryUtils":function(){define(["require","exports"],function(p,c){function n(c,d){c%=d;return 0<=c?c:c+d}Object.defineProperty(c,"__esModule",{value:!0});c.C_INFINITY=Number.POSITIVE_INFINITY;c.C_PI=Math.PI;c.C_2PI=2*c.C_PI;c.C_PI_BY_2=c.C_PI/2;c.C_RAD_TO_256=128/c.C_PI;c.C_256_TO_RAD=c.C_PI/128;c.C_DEG_TO_256=256/360;c.C_DEG_TO_RAD=c.C_PI/180;c.C_SQRT2=1.414213562;c.C_SQRT2_INV=
1/c.C_SQRT2;var l=1/Math.LN2;c.positiveMod=n;c.radToByte=function(k){return n(k*c.C_RAD_TO_256,256)};c.degToByte=function(k){return n(k*c.C_DEG_TO_256,256)};c.log2=function(c){return Math.log(c)*l};c.sqr=function(c){return c*c};c.interpolate=function(c,d,h){return c*(1-h)+d*h};c.between=function(c,d,h){return c>=d&&c<=h||c>=h&&c<=d}})},"esri/views/2d/engine/webgl/definitions":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});c.WEBGL_MAX_STOPS=8;
c.WEBGL_MAX_INNER_STOPS=c.WEBGL_MAX_STOPS-2;c.NAN_MAGIC_NUMBER=1E-30;c.EXTRUDE_SCALE=64;c.PICTURE_FILL_COLOR=4294967295;c.TILE_SIZE=512;c.ANGLE_FACTOR_256=256/360;c.DEBUG_LABELS=!1;c.COLLISION_BUCKET_SIZE=128;c.DOT_DENSITY_MAX_FIELDS=8;c.COLLISION_MAX_ZOOM_DELTA=3;c.COLLISION_EARLY_REJECT_BUCKET_SIZE=16;c.COLLISION_BOX_PADDING=8;c.COLLISION_TILE_BOX_SIZE=c.TILE_SIZE/c.COLLISION_BUCKET_SIZE;c.COLLISION_PLACEMENT_PADDING=8;c.HEURISTIC_GLYPHS_PER_LINE=50;c.HEURISTIC_GLYPHS_PER_FEATURE=10;c.GLYPH_SIZE=
24;c.TEXT_LINE_HEIGHT=1.2*c.GLYPH_SIZE;c.TEXT_MAX_WIDTH=10*c.GLYPH_SIZE;c.TEXT_SPACING=0;c.AVERAGE_GLYPH_MOSAIC_ITEM={metrics:{width:15,height:17,left:0,top:-7,advance:14}};c.ATTRIBUTE_STORE_TEXTURE_SIZE=1024;c.TEXTURE_BINDING_SPRITE_ATLAS=0;c.TEXTURE_BINDING_GLYPH_ATLAS=0;c.TEXTURE_BINDING_HIGHLIGHT_0=2;c.TEXTURE_BINDING_HIGHLIGHT_1=3;c.TEXTURE_BINDING_ATTRIBUTE_DATA_0=4;c.TEXTURE_BINDING_ATTRIBUTE_DATA_1=5;c.TEXTURE_BINDING_ATTRIBUTE_DATA_2=6;c.TEXTURE_BINDING_RENDERER_0=7;c.TEXTURE_BINDING_RENDERER_1=
8;c.MAX_FILTERS=2;c.FILTER_FLAG_0=1;c.EFFECT_FLAG_0=2;c.THIN_LINE_THRESHOLD=2.5})},"esri/views/3d/terrain/terrainUtilsPlanar":function(){define("require exports ../../../core/Error ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../geometry/support/aaBoundingRect ./TerrainConst ./TilingScheme".split(" "),function(p,c,n,l,k,d,h,g){function f(c,d,e,f){l.vec3.copy(b,e);b[f]=d[f];f=l.vec3.subtract(b,b,d);var g=l.vec3.subtract(a,c,d),g=l.vec3.dot(g,f),h=l.vec3.dot(f,f);
d=0>=g?d:h<=g?e:l.vec3.add(b,d,l.vec3.scale(f,f,g/h));c=l.vec3.subtract(b,c,d);return Math.PI/2-Math.atan(c[2]/Math.sqrt(c[0]*c[0]+c[1]*c[1]))}Object.defineProperty(c,"__esModule",{value:!0});var b=k.vec3f64.create(),a=k.vec3f64.create(),e=k.vec3f64.create(),m=k.vec3f64.create();c.isInsideExtent=function(a,b,c){void 0===c&&(c=0);a=a.extent;return 0===c?d.containsPoint(a,b):d.containsPointWithMargin(a,b,c*Math.min(a[2]-a[0],a[3]-a[1]))};c.tiltOnEdge=f;c.tiltToExtentEdge=function(a,b){var c=a.getElevationBounds();
a=a.extent;c=.5*(c[0]+c[1]);e[0]=a[0];e[1]=a[1];e[2]=c;m[0]=a[2];m[1]=a[3];m[2]=c;a=c=Infinity;b[0]<e[0]?c=f(b,e,m,0):b[0]>m[0]&&(c=f(b,m,e,0));b[1]<e[1]?a=f(b,e,m,1):b[1]>m[1]&&(a=f(b,m,e,1));return Math.min(c,a)};c.checkIfTileInfoSupportedForViewSR=function(a,b,c){if(a.spatialReference.isGeographic)return new n("tilingscheme:local-gcs-not-supported","Geographic coordinate systems are not supported in local scenes");var e=g.checkUnsupported(a);if(e)return e;var f=a.lods,e=f[0].resolution*Math.pow(2,
f[0].level),k=[e*a.size[0],e*a.size[1]],m=[a.origin.x,a.origin.y];b=d.fromExtent(b);var l=d.create();g.computeRowColExtent(b,k,m,l);k=(l[2]-l[0])*(l[3]-l[1]);k>h.MAX_ROOT_TILES?(f=f[0].scale*Math.pow(2,f[0].level),e=Math.max((b[3]-b[1])/a.size[1],(b[2]-b[0])/a.size[0])*f/e,b=Math.floor(Math.log(e)/Math.log(10)),e=Math.ceil(e/Math.pow(10,b))*Math.pow(10,b),e=new n("tilingscheme:too-many-root-tiles","Scale of level 0 of the tiling scheme (1:"+Math.floor(f).toLocaleString()+") is too large for the layer's extent. Suggested scale: 1:"+
e.toLocaleString()+".",{level0Scale:f,suggestedLevel0Scale:e,requiredNumRootTiles:k,allowedNumRootTiles:h.MAX_ROOT_TILES})):e=null;return e?e:c&&!a.spatialReference.equals(c)?new n("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the local scene"):null}})},"esri/views/3d/terrain/terrainUtilsSpherical":function(){define(["require","exports","../../../core/Error","../support/projectionUtils","./TilingScheme"],function(p,c,n,l,k){Object.defineProperty(c,
"__esModule",{value:!0});c.isInsideExtent=function(c,h,g){void 0===g&&(g=0);return!0};c.tiltToExtentEdge=function(c,h){return 0};c.checkIfTileInfoSupportedForViewSR=function(c,h,g){h=c.lods.length-1;if(c.spatialReference.isWebMercator){if(!k.makeWebMercatorAuxiliarySphere(h).compatibleWith(c))return new n("tilingscheme:incompatible-global-web-mercator","The tiling scheme is not compatible with the ArcGIS Online Web Mercator tiling scheme")}else if(l.canProjectToWGS84ComparableLonLat(c.spatialReference)){if(!k.makeGCSWithTileSize(c.spatialReference,
c.size[1],h).compatibleWith(c))return c.spatialReference.isWGS84?new n("tilingscheme:incompatible-global-wgs84","The tiling scheme is not compatible with the ArcGIS Online WGS84 tiling scheme"):new n("tilingscheme:incompatible-global","The tiling scheme is not compatible with the ArcGIS Online tiling scheme")}else return new n("tilingscheme:global-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in global scenes");if(g&&!c.spatialReference.equals(g))return new n("tilingscheme:spatial-reference-mismatch",
"The tiling scheme does not match the spatial reference of the global scene")}})},"esri/views/3d/terrain/TilePerLayerInfo":function(){define(["require","exports","./TerrainConst","./TileAgent","./tileUtils"],function(p,c,n,l,k){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(c,d){this._pool=d;this.waitingAgents=[];this.requestAbort=this.requestPromise=this.loadingAgent=this._upsampleFromTile=this.tilemapRequestAbort=this.tilemapRequestPromise=this.tilemap=this.data=null;this.pendingUpdates=
0;this.elevationBounds=void 0;this.init(c)}c.prototype.init=function(c){this.waitingAgents.length=0;this.data=null;this.dataInvalidated=this.dataMissing=!1;this.tilemapRequestAbort=this.tilemapRequestPromise=this.tilemap=null;this._unsetUpsampleInfo();this.requestAbort=this.requestPromise=this.loadingAgent=null;this.pendingUpdates=0;c===n.LayerClass.ELEVATION&&(this.elevationBounds=null)};c.prototype.invalidateSourceData=function(){this.tilemap=null;this.dataInvalidated=!0;this.dataMissing=!1;this._unsetUpsampleInfo()};
c.prototype.abortRequest=function(){this.requestPromise&&(this.requestAbort.abort(),this.requestAbort=this.requestPromise=null)};c.prototype.abortTilemapRequest=function(){this.tilemapRequestPromise&&(this.tilemapRequestAbort.abort(),this.tilemapRequestAbort=this.tilemapRequestPromise=null)};c.prototype.dispose=function(){this.loadingAgent&&this.loadingAgent!==l.DONE&&(this.loadingAgent.dispose(),this.loadingAgent=null);this.abortRequest();this.abortTilemapRequest();this.tilemap=null;this._unsetUpsampleInfo();
this.pendingUpdates=0;this.disposeData()};c.prototype.disposeData=function(){this.data&&this.data.hasOwnProperty("dispose")&&this.data.dispose();this.data=null};Object.defineProperty(c.prototype,"upsampleFromTile",{get:function(){return this._upsampleFromTile},enumerable:!0,configurable:!0});c.prototype._unsetUpsampleInfo=function(){this._upsampleFromTile&&(this._pool.release(this._upsampleFromTile),this._upsampleFromTile=null)};c.prototype.setUpsampleInfo=function(c,d){if(c===d||null==d)this._unsetUpsampleInfo();
else{if(null==this._upsampleFromTile)this._upsampleFromTile=this._pool.acquire();else if(this._upsampleFromTile.tile===d)return;k.computeUpsampleInfo(c,d,this._upsampleFromTile)}};c.makeEmptyLayerInfo=function(d,g,f){return f?(f.init(d),f):new c(d,g)};return c}();c.TilePerLayerInfo=p})},"esri/views/3d/terrain/SphericalPatch":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../support/earthUtils ../support/geometryUtils ../support/mathUtils ../support/projectionUtils ./PatchGeometryFactory ./Tile".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a){return function(a){function c(b,d,e){var f=a.call(this,c.NumSubdivisionsAtLevel)||this;f.obb=Array(8);f.isWebMercator=!1;for(var g=0;8>g;g++)f.obb[g]=k.vec3f64.create();void 0!==b&&f.init(b,d,e);return f}n(c,a);c.prototype.init=function(b,c,e){a.prototype.init.call(this,b,c,e);this.isWebMercator=e.tilingScheme.spatialReference.isWebMercator;c=this.extentInRadians[0];e=this.extentInRadians[1];var h=this.extentInRadians[2],m=this.extentInRadians[3];b=b[0];var n=g.lerp(e,
m,.5),q=g.lerp(c,h,.5);this.edgeLen=(h-c)*Math.cos(0===b?0:Math.min(Math.abs(e),Math.abs(m)))*d.earthRadius;this.edgeLen2=this.edgeLen*this.edgeLen;this.curvatureHeight=d.earthRadius-Math.sqrt(d.earthRadius*d.earthRadius-this.edgeLen2/4);f.wgs84ComparableLonLatToECEF(this.centerAtSeaLevel,q,n,0);c=k.vec3f64.fromArray(this.centerAtSeaLevel);l.vec3.normalize(c,this.centerAtSeaLevel);this.up=c;this._updateOBB();this.updateRadiusAndCenter()};c.prototype.updateRadiusAndCenter=function(){if(0===this.lij[0])l.vec3.set(this.center,
0,0,0),this.radius=d.earthRadius+this.elevationBounds[1];else{a.prototype.updateRadiusAndCenter.call(this);var b=Math.max(l.vec3.squaredDistance(this.center,this.obb[0]),l.vec3.squaredDistance(this.center,this.obb[1]));this.radius=Math.sqrt(b)}};c.prototype._isVisible=function(){if(!this.intersectsClippingArea)return!1;var a=this.surface.frustum.planes;if(10>this.lij[0])return h.frustum.intersectsSphere(a,h.sphere.wrap(this.radius,this.center));for(var b=this.obb,c=0;6>c;c++){for(var d=void 0,d=0;8>
d&&!h.plane.isPointOutside(a[c],b[d]);d++);if(8===d)return!1}return!0};c.prototype.computeElevationBounds=function(){a.prototype.computeElevationBounds.call(this);this._updateOBB()};c.prototype.createGeometry=function(a,c,d){var e=this._isPole(this.lij[1],this.lij[0]);b.createSphericalGlobePatch(a,this.extent,c,this.renderData,d,this.extentInRadians,this.isWebMercator,e);this.updateMemoryUsed()};c.prototype._updateOBB=function(){for(var a=this.extentInRadians,b=this.obb,c=0;2>c;c++){var e=this.elevationBounds[c],
g=4*c;f.wgs84ComparableLonLatToECEF(b[g++],a[0],a[1],e);f.wgs84ComparableLonLatToECEF(b[g++],a[0],a[3],e);f.wgs84ComparableLonLatToECEF(b[g++],a[2],a[3],e);f.wgs84ComparableLonLatToECEF(b[g++],a[2],a[1],e)}this.isWebMercator&&(a=this._isPole(this.lij[1],this.lij[0]),2===a?(l.vec3.set(b[1],0,0,d.earthRadius),l.vec3.set(b[2],0,0,d.earthRadius),l.vec3.set(b[5],0,0,d.earthRadius),l.vec3.set(b[6],0,0,d.earthRadius)):1===a&&(l.vec3.set(b[0],0,0,-d.earthRadius),l.vec3.set(b[3],0,0,-d.earthRadius),l.vec3.set(b[4],
0,0,-d.earthRadius),l.vec3.set(b[7],0,0,-d.earthRadius)))};c.prototype._isPole=function(a,b){var c=0;a===(1<<b)-1&&(c+=1);0===a&&(c+=2);return c};c.NumSubdivisionsAtLevel=[128,64,32,16,16,8,8,4];return c}(a)})},"esri/views/3d/terrain/SurfaceExtentHelper":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/Handles ../../../core/accessorSupport/decorators ../../../geometry/support/aaBoundingRect ../../../geometry/support/webMercatorUtils ./TerrainConst ./terrainUtils".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a){function e(a,b){a&&!a.spatialReference.equals(b)&&(a=f.canProject(a.spatialReference,b)?f.project(a,b):null);return a}Object.defineProperty(c,"__esModule",{value:!0});p=function(a){function b(b){b=a.call(this,b)||this;b._changeListeners=new d;return b}n(b,a);b.prototype.initialize=function(){var a=this;this._changeListeners.add([this.layerViews.on("change",function(){return a.notifyChange("stencilEnabledExtents")})])};b.prototype.destroy=function(){this._changeListeners.destroy();
this._changeListeners=null};Object.defineProperty(b.prototype,"layerViewsExtent",{get:function(){return this._computeLayerViewsExtent()},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"tiledLayersExtent",{get:function(){return this._computeTiledLayersExtent()},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"stencilEnabledExtents",{get:function(){return this._computeStencilEnabledExtents(this.layerViews,this.spatialReference)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"spatialReference",{set:function(a){this.tilingScheme||this._set("spatialReference",a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"tilingScheme",{set:function(a){this._set("tilingScheme",a);this._set("spatialReference",a.spatialReference)},enumerable:!0,configurable:!0});b.prototype._computeStencilEnabledExtents=function(a,b){var c=[],d=0;for(a=a.items;d<a.length;d++){var f=a[d].layer;"IntegratedMeshLayer"===f.operationalLayerType&&null!=b&&(f=e(f.fullExtent,b),null!=f&&c.push(g.fromExtent(f)))}return c};
l([h.property({readOnly:!0})],b.prototype,"layerViewsExtent",null);l([h.property({readOnly:!0,dependsOn:["spatialReference","tilingScheme"]})],b.prototype,"tiledLayersExtent",null);l([h.property({readOnly:!0,dependsOn:["spatialReference"]})],b.prototype,"stencilEnabledExtents",null);l([h.property()],b.prototype,"spatialReference",null);l([h.property()],b.prototype,"tilingScheme",null);l([h.property()],b.prototype,"defaultTiledLayersExtent",void 0);l([h.property({constructOnly:!0})],b.prototype,"layers",
void 0);l([h.property({constructOnly:!0})],b.prototype,"layerViews",void 0);return b=l([h.subclass("esri.views.3d.terrain.SurfaceExtentHelperBase")],b)}(h.declared(k));k=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}n(c,a);c.prototype._computeLayerViewsExtent=function(){return this._getGlobalExtent()};c.prototype._computeTiledLayersExtent=function(){return this._getGlobalExtent()};c.prototype._getGlobalExtent=function(){return this.spatialReference.isWebMercator?b.WEBMERCATOR_WORLD_EXTENT:
b.GEOGRAPHIC_WORLD_EXTENT};l([h.property({dependsOn:["spatialReference"]})],c.prototype,"layerViewsExtent",void 0);return c=l([h.subclass("esri.views.3d.terrain.SurfaceExtentHelperGlobal")],c)}(h.declared(p));c.SurfaceExtentHelperGlobal=k;p=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}n(c,b);c.prototype.initialize=function(){var a=this;this._changeListeners.add([this.layers.on("change",function(){return a.notifyChange("tiledLayersExtent")}),this.layerViews.on("change",function(){return a.notifyChange("layerViewsExtent")})])};
c.prototype._computeLayerViewsExtent=function(){var a=g.empty(),b=this.spatialReference;this.layerViews.forEach(function(c){c.isResolved()&&(c=c.fullExtentInLocalViewSpatialReference||c.layer.fullExtent,(c=e(c,b))&&g.expand(a,c))});var c=g.allFinite(a)?a:null,d=this._get("layerViewsExtent");return g.equals(c,d)?d:c};c.prototype._computeTiledLayersExtent=function(){var b=this.tilingScheme;if(!b)return null;var c=this.spatialReference,d=g.empty();this.layers.forEach(function(e){if(e.loaded&&a.isTiledLayer(e)){var f=
a.getTiledLayerInfo(e,c,"local");e=f.tileInfo;f=f.fullExtent;e&&b.compatibleWith(e)&&f&&f.spatialReference.equals(c)&&g.expand(d,f)}});this.defaultTiledLayersExtent&&g.expand(d,this.defaultTiledLayersExtent);var e=g.allFinite(d)?d:null,f=this._get("tiledLayersExtent");return g.equals(e,f)?f:e};return c=l([h.subclass("esri.views.3d.terrain.SurfaceExtentHelperLocal")],c)}(h.declared(p));c.SurfaceExtentHelperLocal=p})},"esri/views/3d/terrain/SurfaceTilingSchemeLogic":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/Handles ../../../core/accessorSupport/decorators ../support/projectionUtils ./terrainUtils ./TilingScheme".split(" "),
function(p,c,n,l,k,d,h,g,f,b){return function(a){function c(b){b=a.call(this,b)||this;b._changeHandles=new d;return b}n(c,a);c.prototype.initialize=function(){var a=this;this._changeHandles.add(this.layers.on("change",function(){return a._update()}));this._changeHandles.add(this.extentHelper.watch("layerViewsExtent",function(){return a._setAdHocTilingScheme()}));this._update();this.tilingSchemeLocked||this._setAdHocTilingScheme()};c.prototype.destroy=function(){this._changeHandles.destroy();this._changeHandles=
null};c.prototype._update=function(){var a=this;this._waitTask=null;if(!this.tilingSchemeLocked){this._set("tilingSchemeDone",!1);var c=this.layers.find(function(b){return f.isTiledLayer(b)?b.isFulfilled()?b.isRejected()?!1:!!f.getTiledLayerInfo(b,a.viewSpatialReference,a.manifold).tileInfo:!0:!1});if(c)if(c.isResolved()){var d=f.getTiledLayerInfo(c,this.viewSpatialReference,this.manifold).tileInfo,d=new b(d),c=f.getKnownTiledServiceLevelCap(c.url);Infinity>c&&d.capMaxLod(c);this._set("tilingSchemeDone",
!0);this._lockTilingScheme(d)}else this._updateWhen(c);else this._set("tilingSchemeDone",!0)}};c.prototype._updateWhen=function(a){var b=this,c=a.when().catch(function(a){return a}).then(function(){c===b._waitTask&&b._update()});this._waitTask=c};c.prototype._lockTilingScheme=function(a){var c=this;if("spherical"===this.manifold){var d=a.levels.length-1;a.spatialReference.isWebMercator?a=b.makeWebMercatorAuxiliarySphere(d):g.canProjectToWGS84ComparableLonLat(a.spatialReference)&&(a=b.makeGCSWithTileSize(a.spatialReference,
a.pixelSize[0],d))}this.tilingSchemeLocked=!0;this.tilingScheme=a;this.extentHelper.tilingScheme=this.tilingScheme;this._updateTiledLayerExtent();this._changeHandles.removeAll();this._changeHandles.add(this.extentHelper.watch("tiledLayersExtent",function(){return c._updateTiledLayerExtent()}))};c.prototype._updateTiledLayerExtent=function(){this.extent=this.extentHelper.tiledLayersExtent};c.prototype._setAdHocTilingScheme=function(){if("spherical"===this.manifold){var a=this.extentHelper.spatialReference;
a.isWebMercator?this.tilingScheme=b.WebMercatorAuxiliarySphere:g.canProjectToWGS84ComparableLonLat(a)&&(this.tilingScheme=b.makeGCSWithTileSize(a,256));this.extent=this.extentHelper.layerViewsExtent}else if(a=this.extentHelper.layerViewsExtent)this.tilingScheme=b.fromExtent(a,this.extentHelper.spatialReference),this.extent=a};l([h.property()],c.prototype,"tilingScheme",void 0);l([h.property()],c.prototype,"extent",void 0);l([h.property({value:!1})],c.prototype,"tilingSchemeLocked",void 0);l([h.property({readOnly:!0,
value:!1})],c.prototype,"tilingSchemeDone",void 0);l([h.property({constructOnly:!0})],c.prototype,"viewSpatialReference",void 0);l([h.property({constructOnly:!0})],c.prototype,"layers",void 0);l([h.property({constructOnly:!0})],c.prototype,"extentHelper",void 0);l([h.property({constructOnly:!0})],c.prototype,"manifold",void 0);return c=l([h.subclass("esri.views.3d.terrain.SurfaceTilingSchemeLogic")],c)}(h.declared(k))})},"esri/views/3d/terrain/TerrainRenderer":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/assignHelper ../../../Color ../../../core/maybe ../../../core/ObjectPool ../../../core/PooledArray ../../../core/libs/gl-matrix-2/mat4 ../../../core/libs/gl-matrix-2/mat4f64 ../../../core/libs/gl-matrix-2/vec2f64 ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../core/libs/gl-matrix-2/vec4 ../../../core/libs/gl-matrix-2/vec4f64 ../../../geometry/support/aaBoundingBox ../support/imageUtils ../support/buffer/BufferView ./PatchGeometryFactory ./PatchRenderData ./TerrainConst ./TileRenderer ./tileUtils ../webgl-engine/lib/glUtil3D ../webgl-engine/lib/intersectorUtils ../webgl-engine/lib/screenSizePerspectiveUtils ../webgl-engine/lib/tracer ../webgl-engine/lib/Util ../webgl-engine/materials/internal/MaterialUtil ../webgl-engine/shaders/TerrainRendererPrograms ../../webgl/renderState ../../webgl/Util".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z,A,B,D,C,E,H,G,I,K,M){var T=H.assert,N=b.mat4f64.create(),S=a.vec2f64.create(),O=t.create(),V=u.vec4f64.create(),Q=u.vec4f64.create(),J=u.vec4f64.create(),P=function(){return function(){this.extent=u.vec4f64.create();this.maxLevel=this.minLevel=0;this.callback=null}}();p=function(){function a(a,b){this._memCache=b;this.tileSize=256;this.rctx=null;this.renderDataPool=new h(v.PatchRenderData);this.patchGroups=new g({allocator:function(a){return a||
{root:null,origin:null,patches:new g}},deallocator:function(a){a.root=null;a.origin=null;a.patches.clear();return a}});this.patchGroupsDirty=!0;this.patchGroupsMap=new Map;this.tileIterator=new A.IteratorPreorder;this.highestVisibleLODTile=null;this.visible=!0;this.debugScreenSizePerspective=!1;this.wireframe=G.copyParameters(L);this._opaque=!0;this._skirtScale=1;this.backfaceCullingEnabled=this._renderingDisabled=this._renderPatchBorders=!1;this._renderOrder=y.RenderOrder.FRONT_TO_BACK;this._velvetOvergroundEnabled=
!0;this._slicePlaneEnabled=this.hasOverlays=!1;this.castShadows=!0;this.receiveShadows=!1;this.tileRenderer=this.emptyTex=null;this.tileBackgroundInitialized=!1;this.stencilEnabledLayerExtents=[];this.numOriginsRendered=this.numTilesCulled=this.numTilesRendered=this.numTrianglesRendered=0;this.loaded=this.clippingExtent=null;this.needsHighlight=this.needsRender=this._loaded=!1;this.visibleScaleRangeQueries=new g({initialSize:10});this.visibleScaleRangeQueriesInvPtr=0;this.visibleScaleRangeQueryQueue=
new g({initialSize:30});this.visibleScaleRangeQueryPool=new h(P,!1);this.manifold=a}a.prototype.destroy=function(a){this.uninstall(a);w.clearCaches()};a.prototype.install=function(a){a.addRenderPlugin([4,9],this);this.drapedRenderer=a.renderView.getDrapedRenderer()};a.prototype.uninstall=function(a){a.removeRenderPlugin(this)};Object.defineProperty(a.prototype,"renderingDisabled",{set:function(a){this._renderingDisabled=!!a;this.setNeedsRender()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"opaque",{set:function(a){this._opaque=a;this.setNeedsRender()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"skirtScale",{set:function(a){this._skirtScale=a;this.setNeedsRender()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"renderPatchBorders",{set:function(a){this._renderPatchBorders!==a&&(this._renderPatchBorders=a,this._updatePrograms())},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"cullBackFaces",{set:function(a){this.backfaceCullingEnabled=
a;this._updatePrograms();this.setNeedsRender()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"renderOrder",{get:function(){return this._renderOrder},set:function(a){this._renderOrder=a;this.setNeedsRender()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"velvetOvergroundEnabled",{set:function(a){this._velvetOvergroundEnabled!==a&&(this._velvetOvergroundEnabled=a,this._updatePrograms())},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"intersectionHandlerId",
{get:function(){return D.TERRAIN_ID},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"slicePlaneEnabled",{get:function(){return this._slicePlaneEnabled},set:function(a){this._slicePlaneEnabled!==a&&(this._slicePlaneEnabled=a,this._updatePrograms())},enumerable:!0,configurable:!0});a.prototype.setRootTiles=function(a){this.rootTiles=a;this.setNeedsRender()};a.prototype.setNeedsHighlight=function(a){this.needsHighlight=a;this.setNeedsRender()};a.prototype.setStencilEnabledLayerExtents=
function(a){this.stencilEnabledLayerExtents=a;this.setNeedsRender()};a.prototype.setTileSize=function(a){this.tileSize=a;this.tileRenderer&&(this.tileRenderer.tileSize=a);this.setNeedsRender()};a.prototype.loadCachedElevationData=function(a){T(null===a.renderData);var b=A.tile2str(a);if(b=this._memCache.pop(b)){a.renderData=b.renderData;a.renderData.tile=a;a.renderData.localOrigin=this._getLocalOriginOfTile(a);for(var c in b.upsampleLIJs){var d=A.findParentByLIJ(a,b.upsampleLIJs[c]);a.layerInfo[y.LayerClass.ELEVATION][c].setUpsampleInfo(a,
d)}}return null!=b};a.prototype.loadTile=function(a){a.renderData||(a.renderData=this.renderDataPool.acquire(),a.renderData.init(a),a.renderData.localOrigin=this._getLocalOriginOfTile(a),this.updateTileGeometry(a));this.updateTileTexture(a)};a.prototype.queryVisibleLevelRange=function(a,b,c,d){var e=this.visibleScaleRangeQueryPool.acquire();q.vec4.copy(e.extent,a);e.minLevel=b?b:-Number.MAX_VALUE;e.maxLevel=null!=c?c:Number.MAX_VALUE;e.callback=d;this.visibleScaleRangeQueryQueue.push(e);this.setNeedsRender()};
a.prototype.updateTileTexture=function(a){this.tileRenderer&&this.tileBackgroundInitialized&&this.tileRenderer.updateTileTexture(a)};a.prototype.updateTileGeometry=function(a){for(var b=0,c=a.layerInfo[y.LayerClass.ELEVATION];b<c.length;b++)c[b].pendingUpdates&=~y.TileUpdate.GEOMETRY;a.renderData.updateGeometry(this.rctx,"debug"===this.wireframe.mode)&&this.setNeedsRender()};a.prototype.unloadTile=function(a,b){if(a.renderData){a.renderData.releaseTexture();if(b){b={renderData:a.renderData,upsampleLIJs:[]};
for(var c=0,d=a.layerInfo[y.LayerClass.ELEVATION];c<d.length;c++){var e=d[c].upsampleFromTile.tile.lij;b.upsampleLIJs.push([e[0],e[1],e[2]])}this._memCache.put(A.tile2str(a),b,a.renderData.estimatedGeometryMemoryUsage)}else this.releaseTileGeometry(a.renderData);a.renderData=null;a.updateMemoryUsed()}};a.prototype._getLocalOriginOfTile=function(a){var b=Math.max(0,7*Math.floor((a.lij[0]-3)/7));if("spherical"===this.manifold&&0===b)return m.vec3f64.ZEROS;for(;a.parent&&a.lij[0]>b;)a=a.parent;return a.centerAtSeaLevel};
a.prototype.setVisibility=function(a){this.visible=a;this.setNeedsRender()};a.prototype.getStats=function(){return{numTilesRendered:this.numTilesRendered,numTilesCulled:this.numTilesCulled,numTrianglesRendered:this.numTrianglesRendered,numOriginsRendered:this.numOriginsRendered}};a.prototype.getWireframeEnabled=function(){return"shader"===this.wireframe.mode};a.prototype.setDebugScreenSizePerspective=function(a){a!==this.debugScreenSizePerspective&&(this.debugScreenSizePerspective=a,this._updatePrograms())};
a.prototype.setWireframe=function(a){var b=this;if(!1===a||!0===a)a={mode:a?"shader":"none"};var c=this.wireframe;if(void 0!==a.mode&&c.mode!==a.mode){var d="debug"===c.mode,e="debug"===a.mode;c.mode=a.mode;this._updatePrograms();d!==e&&this.rootTiles&&(A.traverseTilesPreorder(this.rootTiles,function(a){a.renderData&&a.renderData.updateGeometry(b.rctx,e)}),this.setNeedsRender())}for(var f in a)c.hasOwnProperty(f)&&(c[f]=a[f]),this.setNeedsRender();c.resolution&&(c.resolution=Math.min(c.resolution,
this.tileSize),c.resolution=1<<Math.round(Math.log(c.resolution)/Math.LN2))};a.prototype.setNeedsRender=function(){this.patchGroupsDirty=this.needsRender=!0};a.prototype.isOpaqueExcludingSlice=function(){var a=this.wireframe,a="shader"===a.mode&&(1>a.wireOpacity||1>a.surfaceOpacity);return this._opaque&&!a};a.prototype.isOpaque=function(){return this.isOpaqueExcludingSlice()&&!this._slicePlaneEnabled};a.prototype.setTileBackground=function(a){this.tileBackground=a;this._updateTileBackground()};a.prototype.initializeRenderContext=
function(a){var b=this,c=this.rctx=a.rctx;a=this.programRep=a.programRep;this._updatePrograms();this.tileRenderer=new z(c,this.tileSize,a,function(){return b.setNeedsRender()});this.tileBackground&&this._updateTileBackground();this.emptyTex=B.createEmptyTexture(c)};a.prototype.uninitializeRenderContext=function(a){null!=this.emptyTex&&(this.emptyTex.dispose(),this.emptyTex=null);this.tileRenderer&&(this.tileRenderer.dispose(),this.tileRenderer=null)};a.prototype.intersect=function(a,b,c,f,g){if(this.rootTiles&&
(!a.enable.selectOpaqueTerrainOnly||!a.enable.selectionMode||this.isOpaqueExcludingSlice())){var h=Z,k=da;e.vec3.subtract(h,f,c);e.vec3.set(k,1/h[0],1/h[1],1/h[2]);var m=a.results.min,l=a.results.max,n=a.results.terrain,q=null,r=this.clippingExtent,p=this.tileIterator;p.reset(this.rootTiles);g=function(){var g=p.next();if(null===g.renderData)return"continue";if(a.enable.invisibleTerrain){if(!g.visible&&r&&!g.intersectsExtent(r))return"continue"}else if(!g.visible)return"continue";var v=g.renderData.geometryInfo,
y=-u._skirtScale*v.skirtLength;if(0!==y){var z=g.up;t.offset(v.boundingBox,y*z[0],y*z[1],y*z[2],O);t.expandWithBuffer(O,v.boundingBox,0,2)}var z=0===y?v.boundingBox:O,B=g.renderData.localOrigin;e.vec3.subtract(ja,c,B);if(!G.intersectAabbInvDir(z,ja,k,a.tolerance))return"continue";var C=function(a,b,c,d){a.set(void 0,A.tile2str(b),c,d,N,void 0);a.intersector=ha;a.target=W},z=function(k,r,p){0<=k&&(a.enable.backfacesTerrain||0>e.vec3.dot(r,h))&&(a.enable.invisibleTerrain||!a.enable.selectionMode||null==
b||b(c,f,k))&&((null==n.dist||k<n.dist)&&C(n,g,k,r),a.enable.storeTerrainResults&&(a.enable.storeAll&&(d.isNone(q)?(q=new D.IntersectorResult(a.ray),C(q,g,k,r),a.results.all.push(q)):k<q.dist&&C(q,g,k,r)),(null==m.dist||k<m.dist)&&C(m,g,k,r),(null==l.dist||k>l.dist)&&C(l,g,k,r)))},L=ba;e.vec3.subtract(L,f,B);var B=v.indices,F=v.vertexAttributes,E={data:F.getField("position",x.BufferViewVec3f).typedBuffer,size:3,offsetIdx:0,strideIdx:F.stride/4},v=v.numWithoutSkirtIndices/3;G.intersectTriangles(ja,
L,0,v,B,E,null,z);0!==y&&w.intersectSkirts(ja,L,v,B.length/3,B,F,"spherical"===u.manifold?function(a){return e.vec3.scale(a,a,y/e.vec3.length(a))}:function(a){return e.vec3.set(a,0,0,y)},z)};for(var u=this;!p.done;)g()}};a.prototype.render=function(a){var b=a.rctx;if(this._renderingDisabled||!this.visible||!this.rootTiles||!this.tileBackgroundInitialized)return!1;var c=this.isOpaque()?4:9;if(a.slot!==c)return!1;E.trace("# BEGIN RENDER TERRAIN");var c=a.pass,d=1===a.lightingData.helper.globalFactor;
F.overlayEnabled=!1;F.used=!0;switch(c){case 0:F.overlayEnabled=!0;F.used=!1;b=a.shadowMap&&a.shadowMap.enabled;this.receiveShadows!==b&&(this.receiveShadows=b,this._updatePrograms());b=!this.drapedRenderer.isEmpty();b!==this.hasOverlays&&(this.hasOverlays=b,this._updatePrograms());this._renderMaterialPass(a,this.programs.color,this._updatePatchGroupsData(),F);break;case 3:this.castShadows&&d&&this._renderAuxiliaryPass(a,this.programs.depthShadowMap,this._updatePatchGroupsData(),F);break;case 1:this._renderAuxiliaryPass(a,
this.programs.depth,this._updatePatchGroupsData(),F);break;case 2:this._renderAuxiliaryPass(a,this.programs.normal,this._updatePatchGroupsData(),F);break;case 4:this.needsHighlight&&(F.overlayEnabled=!0,this._renderAuxiliaryPass(a,this.programs.highlight,this._updatePatchGroupsData(),F),b.clearSafe(256))}E.trace("# END RENDER TERRAIN");this.needsRender=0!==this.visibleScaleRangeQueryQueue.length;return!0};a.prototype._renderMaterialPass=function(a,b,c,d){var f=this,g=a.camera;a.rctx.bindProgram(b);
var h=this.wireframe;if("shader"===h.mode||this._renderPatchBorders)b.setUniform1f("wireframe.width",this.wireframe.width),b.setUniform1f("wireframe.falloff",Math.min(h.width,h.falloff)),b.setUniform1f("wireframe.wireOpacity",h.wireOpacity),b.setUniform1f("wireframe.surfaceOpacity",h.surfaceOpacity),b.setUniform4fv("wireframe.color",h.color);a.shadowMap&&a.shadowMap.bind(b);a.ssaoHelper&&a.ssaoHelper.setUniforms(b);b.setUniform1i("tex",0);this._bindOverlayUniforms(b);b.setUniformMatrix4fv("viewNormal",
g.viewInverseTransposeMatrix);b.setUniformMatrix4fv("proj",g.projectionMatrix);h=a.lightingData;e.vec3.set(X,h.diffuse[0],h.diffuse[1],h.diffuse[2]);b.setUniform3fv("lightIntensity",X);a.lightingData.helper.setUniforms(b,!0);g=g.viewMatrix;e.vec3.set(R,g[12],g[13],g[14]);e.vec3.normalize(R,R);b.setUniform3fv("viewDirection",R);this.numOriginsRendered=this.numTrianglesRendered=this.numTilesCulled=this.numTilesRendered=0;this._prepareScaleRangeQueries();this.isOpaque()?this._renderPatchGroups(a,b,c,
d):a.offscreenRenderingHelper.renderToTargets(function(){return f._renderPatchGroups(a,b,c,d)},a.offscreenRenderingHelper.tmpColor,a.offscreenRenderingHelper.mainDepth,[0,0,0,0]);this._processScaleRangeQueries();0<this.numTilesRendered&&!this._loaded&&(this._loaded=!0,this.loaded&&this.loaded())};a.prototype._renderAuxiliaryPass=function(a,b,c,d){a.rctx.bindProgram(b);if(4===a.pass){var e=a.offscreenRenderingHelper;a.rctx.bindTexture(e.depthTexture,5);b.setUniform1i("depthTex",5);b.setUniform4f("highlightViewportPixelSz",
0,0,1/e.width,1/e.height)}else if(b.setUniformMatrix4fv("viewNormal",a.camera.viewInverseTransposeMatrix),1===a.pass||3===a.pass)S[0]=a.camera.near,S[1]=a.camera.far,b.setUniform2fv("nearFar",S);this._renderPatchGroupsAuxiliary(a,b,c,d)};a.prototype._updateTileBackground=function(){var a=this;if(this.tileRenderer){var b=function(){a.tileBackgroundInitialized=!0;a.rootTiles&&A.traverseTilesPreorder(a.rootTiles,function(b){return a.tileRenderer.updateTileTexture(b)})};if("string"===typeof this.tileBackground){var c=
this.tileBackground;r.requestImage(c).then(function(d){c===a.tileBackground&&a.tileRenderer&&(a.tileRenderer.setBackground(d),b())})}else{var d=this.tileBackground?k.toUnitRGBA(this.tileBackground):[0,0,0,0];this.tileRenderer.setBackground(d);b()}}};a.prototype._updatePatchGroupsData=function(){var a=this,b=this.patchGroups;if(!this.patchGroupsDirty)return b;this.highestVisibleLODTile=null;b.clear();this._renderCollectOrigins(b);if(this.renderOrder!==y.RenderOrder.NONE){for(var c=0;c<b.length;c++)A.sortTiles(this.renderOrder,
b.data[c].patches);b.sort(function(b,c){var d=a.renderOrder;b=0===b.patches.length?-d:0===c.patches.length?d:A.compareTiles(b.patches.data[0],c.patches.data[0],d);return b})}this.patchGroupsDirty=!1;return b};a.prototype._renderCollectOrigins=function(a){var b=this.rootTiles,c="spherical"===this.manifold;a.clear();for(var d=0;d<b.length;d++){var e=b[d],f=a.pushNew();f.root=e;f.origin=c?m.vec3f64.ZEROS:e.centerAtSeaLevel;f.patches.clear();this._renderCollectOriginsForRoot(a,f)}};a.prototype._renderCollectOriginsForRoot=
function(a,b){var c=this.tileIterator;c.resetOne(b.root);var d=this.patchGroupsMap;d.clear();for(d.set(b.origin,b);!c.done;){b=c.next();var e=b.renderData;if(e&&!b.visible)this.numTilesCulled++,c.skipSubtree();else{if(0===b.lij[0]%7){var f=a.pushNew();f.root=b;f.origin=b.centerAtSeaLevel;d.set(b.centerAtSeaLevel,f);f.patches.clear()}if(e){(f=d.get(b.renderData.localOrigin))&&f.patches.push(b);if(!this.highestVisibleLODTile||b.vlevel>this.highestVisibleLODTile.vlevel)this.highestVisibleLODTile=b;c.skipSubtree()}}}};
a.prototype._scaleQueriesForTile=function(a){var b=a.extent;a=a.lij[0];for(var c=0;c<this.visibleScaleRangeQueriesInvPtr;){var d=this.visibleScaleRangeQueries.data[c],e=d.extent;a>=d.minLevel&&a<=d.maxLevel&&e[0]<=b[2]&&e[2]>=b[0]&&e[1]<=b[3]&&e[3]>=b[1]?(this.visibleScaleRangeQueries.swapElements(c,this.visibleScaleRangeQueriesInvPtr-1),this.visibleScaleRangeQueriesInvPtr--):c++}};a.prototype._tileIntersectsStencilEnabledLayer=function(a){for(var b=this.stencilEnabledLayerExtents,c=0;c<b.length;c++)if(a.intersectsExtent(b[c]))return!0;
return!1};a.prototype._renderPatchGroupsAuxiliary=function(a,b,c,d){a.rctx.setPipelineState(this.defaultPipelineState);var e=0<this.stencilEnabledLayerExtents.length;b.setUniformMatrix4fv("proj",a.camera.projectionMatrix);b.setUniform1f("skirtScale",this._skirtScale);d.overlayEnabled&&this._bindOverlayUniforms(b);for(var f=0;f<c.length;f++){var g=c.data[f];this._bindViewForPatchGroup(b,g,a.camera.eye,a.camera.viewMatrix);for(var h=0;h<g.patches.length;h++)this._renderPatch(a.rctx,b,g.patches.data[h],
4,e,d)}a.rctx.bindVAO(null)};a.prototype._renderPatchGroups=function(a,b,c,d){var e=a.rctx,f=a.camera,g=f.viewMatrix;e.setPipelineState(this.defaultPipelineState);if(this.debugScreenSizePerspective&&this.pointsOfInterest){var h=C.getSettings("spherical"===this.manifold?"global":"local");h.update({distance:this.pointsOfInterest.centerOnSurfaceFrequent.distance,fovY:f.fovY});G.bindScreenSizePerspective(h,b,"screenSizePerspective")}h=0<this.stencilEnabledLayerExtents.length;b.setUniform1f("skirtScale",
this._skirtScale);var k=this.highestVisibleLODTile,m;k?(k=k.vlevel,m=this.tileSize/this.wireframe.resolution):(k=16,m=this.tileSize/64);for(var l="debug"===this.wireframe.mode?1:4,n=0;n<c.length;n++){var r=c.data[n],p=r.patches;if(0!==p.length){this._bindViewForPatchGroup(b,r,f.eye,g);var t=a.sliceHelper&&a.sliceHelper.plane;t&&G.bindSlicePlane(r.origin,t,b);a.shadowMap&&a.shadowMap.bindView(b,r.origin);this.numOriginsRendered++;for(r=0;r<p.length;r++){t=p.data[r];E.trace("# RENDER TILE "+A.tile2str(t)+
", screenDepth:"+t.screenDepth);var u=t.renderData.geometryInfo.uvOffsetAndScale,v=t.renderData.texOffsetAndScale;q.vec4.set(J,u[0]*v[2]+v[0],u[1]*v[3]+v[1],u[2]*v[2],u[3]*v[3]);b.setUniform4fv("texOffsetAndScale",J);e.bindTexture(t.renderData.textureReference,0);b.setUniform1f("opacity",t.renderData.opacity);("shader"===this.wireframe.mode||this._renderPatchBorders)&&b.setUniform1f("wireframe.subdivision",m*(1<<k-t.vlevel));u=this._renderPatch(e,b,t,l,h,d);t.renderOrder=this.numTilesRendered;this.numTilesRendered++;
this.numTrianglesRendered+=u/3;this._scaleQueriesForTile(t)}}}e.bindVAO(null)};a.prototype._renderPatch=function(a,b,c,d,e,f){f.overlayEnabled&&(this._bindOverlayTextures(b,c.renderData.overlays,f.used),b.setUniform1f("overlayOpacity",c.renderData.overlayOpacity));e&&a.setPipelineState(this._tileIntersectsStencilEnabledLayer(c)?this.stencilPipelineState:this.defaultPipelineState);e=0===this._skirtScale?c.renderData.geometryInfo.numWithoutSkirtIndices:c.renderData.vao.indexBuffer.size;a.bindVAO(c.renderData.vao);
M.assertCompatibleVertexAttributeLocations(c.renderData.vao,b);a.drawElements(d,e,c.renderData.vao.indexBuffer.indexType,0);return e};a.prototype._bindViewForPatchGroup=function(a,b,c,d){a.setUniform3fv("origin",b.origin);f.mat4.translate(Y,d,b.origin);a.setUniformMatrix4fv("view",Y);a.setUniform3f("camPos",c[0]-b.origin[0],c[1]-b.origin[1],c[2]-b.origin[2])};a.prototype._bindOverlayUniforms=function(a){a.setUniform1i("ovInnerColorTex",1);a.setUniform1i("ovOuterColorTex",2);a.setUniform1i("ovInnerWaterTex",
3);a.setUniform1i("ovOuterWaterTex",4)};a.prototype._bindOverlayTextures=function(a,b,c){for(var d=0;2>d;d++){var e=2*d,f=b[d],g=c?f.highlightRenderTargetId:f.renderTargetId;g?(V[e]=f.texOffset[0],V[e+1]=f.texOffset[1],Q[e]=f.texScale[0],Q[e+1]=f.texScale[1],e=this.drapedRenderer.getRenderTargetTexture(g),this.rctx.bindTexture(e,1+d),(f=f.waterMaskRenderTargetId)?(f=this.drapedRenderer.getRenderTargetTexture(f),this.rctx.bindTexture(f,3+d)):this.rctx.bindTexture(this.emptyTex,3+d)):(V[e]=0,V[e+1]=
0,Q[e]=0,Q[e+1]=0,this.rctx.bindTexture(this.emptyTex,1+d),this.rctx.bindTexture(this.emptyTex,3+d))}a.setUniform4fv("overlayTexOffset",V);a.setUniform4fv("overlayTexScale",Q)};a.prototype._updatePrograms=function(){var a="shader"===this.wireframe.mode,b=this.programRep;this.programs={color:b.getProgram(I.colorPass,{mode:a||this._renderPatchBorders?"wireframe":"normal",overlay:this.hasOverlays,atmosphere:"spherical"===this.manifold&&this._velvetOvergroundEnabled,wireframeTexture:a,tileBorders:this._renderPatchBorders,
receiveShadows:this.receiveShadows,screenSizePerspective:this.debugScreenSizePerspective,slice:this._slicePlaneEnabled}),normal:b.getProgram(I.normalPass,{alphaZero:!0}),depth:b.getProgram(I.depthPass,{shadowMap:!1}),depthShadowMap:b.getProgram(I.depthPass,{shadowMap:!0}),highlight:b.getProgram(I.highlightPass,{})};this.defaultPipelineState=K.makePipelineState({culling:this.backfaceCullingEnabled&&K.backFaceCullingParams,depthTest:{func:513},depthWrite:K.defaultDepthWriteParams,colorWrite:K.defaultColorWriteParams});
this.stencilPipelineState=K.makePipelineState(l({},this.defaultPipelineState,{stencilTest:{function:{func:517,ref:1,mask:255},operation:{fail:7680,zFail:7680,zPass:7680}}}));this.setNeedsRender()};a.prototype.releaseTileGeometry=function(a){a.releaseGeometry()&&this.setNeedsRender();this.renderDataPool.release(a)};a.prototype._prepareScaleRangeQueries=function(){for(var a=this.visibleScaleRangeQueries,b=this.visibleScaleRangeQueryQueue;a.length<a.data.length&&0<b.length;){var c=b.pop();a.push(c)}this.visibleScaleRangeQueriesInvPtr=
a.length};a.prototype._processScaleRangeQueries=function(){for(var a=this.visibleScaleRangeQueries,b=this.visibleScaleRangeQueryPool,c=0;c<a.length;c++){var d=a.data[c];b.release(d);d.callback(c>=this.visibleScaleRangeQueriesInvPtr);d.callback=null}a.clear()};Object.defineProperty(a.prototype,"test",{get:function(){return{tileRenderer:this.tileRenderer}},enumerable:!0,configurable:!0});return a}();var L={mode:"none",width:1.5,falloff:1.5,wireOpacity:1,surfaceOpacity:0,color:[1,1,1,0],resolution:64},
F={overlayEnabled:!1,used:!0},Y=b.mat4f64.create(),X=m.vec3f64.create(),R=m.vec3f64.create(),Z=m.vec3f64.create(),da=m.vec3f64.create(),ja=m.vec3f64.create(),ba=m.vec3f64.create(),ha="TerrainRenderer",W={type:"external"};return p})},"esri/views/3d/terrain/PatchRenderData":function(){define("require exports ../../../core/arrayUtils ../../../core/mathUtils ../../../core/libs/gl-matrix-2/vec2 ../../../core/libs/gl-matrix-2/vec2f64 ../../../core/libs/gl-matrix-2/vec4 ../../../core/libs/gl-matrix-2/vec4f64 ../../../geometry/support/aaBoundingBox ../support/buffer/glUtil ./PatchGeometryFactory ./TerrainConst ./tileUtils ../webgl-engine/lib/DefaultVertexAttributeLocations ../../webgl/BufferObject ../../webgl/VertexArrayObject".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t){Object.defineProperty(c,"__esModule",{value:!0});p=function(){function c(){this.overlayTexOffset=d.vec2f64.create();this.texOffsetAndScale=g.vec4f64.create();this.geometryInfo={indices:null,vertexAttributes:null,boundingBox:f.empty(),numSurfaceIndices:0,numSkirtIndices:0,numWithoutSkirtIndices:0,numVertsPerRow:0,skirtLength:0,uvOffsetAndScale:g.vec4f64.create()}}c.prototype.init=function(a){this.tile=a;a=this.geometryInfo;a.indices=null;a.vertexAttributes=
null;f.empty(a.boundingBox);a.numSurfaceIndices=0;a.numSkirtIndices=0;a.numWithoutSkirtIndices=0;a.numVertsPerRow=0;this.geometryState={numVertsPerRow:0,samplerData:null,clippingArea:null,wireframe:!1};this.textureReference=this._texture=this._vao=null;h.vec4.set(this.texOffsetAndScale,0,0,1,1);this.opacity=1;if(this.overlays){a=0;for(var b=this.overlays;a<b.length;a++){var c=b[a];c.renderTargetId=null;c.highlightRenderTargetId=null;c.waterMaskRenderTargetId=null;k.vec2.set(c.texScale,1,1);k.vec2.set(c.texOffset,
0,0)}}else for(this.overlays=[null,null],a=0;2>a;a++)this.overlays[a]={renderTargetId:null,highlightRenderTargetId:null,waterMaskRenderTargetId:null,texScale:[1,1],texOffset:[0,0]};this.overlayOpacity=1;this.localOrigin=null};c.prototype.updateGeometry=function(a,b){if(!this._updateGeometryState(b))return!1;this._releaseGeometry();this._createGeometry(a,b);return!0};c.prototype.releaseGeometry=function(){return this._releaseGeometry()?(this.geometryState={numVertsPerRow:0,samplerData:null,clippingArea:null,
wireframe:!1},!0):!1};c.prototype.ensureTexture=function(a,b){this._texture&&this._texture.descriptor.width!==b&&this.releaseTexture();this._texture||(this._texture=a(b),this.tile.updateMemoryUsed());return this._texture};c.prototype.releaseTexture=function(){this._texture&&(this._texture.dispose(),this._texture=null);this.textureReference=null};c.prototype._updateGeometryState=function(a){var b=this._getElevationInfo(),c=this.tile.lij[0],d=8>c?this.tile.numSubdivisionsAtLevel[c]+1:2;b.samplerData&&
(d=this.tile.maxTesselation,d=l.clamp((d>>Math.max(c-b.maxTileLevel,e.ELEVATION_DESIRED_RESOLUTION_LEVEL-(this.tile.vlevel-c)))+1,2,d+1));c=this.tile.clippingArea;if(!this.tile.intersectsClippingArea||this.tile.isWithinClippingArea)c=null;var f=this.geometryState,g=!1;f.numVertsPerRow!==d&&(f.numVertsPerRow=d,g=!0);b.changed&&(f.samplerData=b.samplerData,g=!0);n.equals(f.clippingArea,c)||(f.clippingArea=c,g=!0);f.wireframe!==a&&(f.wireframe=a,g=!0);return g};c.prototype._createGeometry=function(a,
c){this.tile.createGeometry(this.geometryState,this.localOrigin,c);c=this.geometryInfo.vertexAttributes;var d=this.geometryInfo.indices,e=a.gl;this._vao=new t(a,q.Default3D,{geometry:b.glLayout(c.layout)},{geometry:u.createVertex(a,e.STATIC_DRAW,c.buffer)},u.createIndex(a,e.STATIC_DRAW,d))};c.prototype._releaseGeometry=function(){if(!this._vao)return!1;this._vao.dispose();this._vao=null;a.releaseGeometry(this.geometryInfo);return!0};Object.defineProperty(c.prototype,"vao",{get:function(){return this._vao},
enumerable:!0,configurable:!0});c.prototype._getElevationInfo=function(){for(var a=this.geometryState.samplerData,b=this.tile.layerInfo[e.LayerClass.ELEVATION],c=b.length,d=Array(c),f=0,g=0,h=!1,k=0;k<c;k++){var l=b[k];if(l.upsampleFromTile){var l=l.upsampleFromTile.tile,n=l.layerInfo[e.LayerClass.ELEVATION][k].data,n=n.samplerData;a&&a[f]===n||(h=!0);d[f++]=n;g=Math.max(g,l.lij[0])}else l.data&&(n=this.tile.surface.layerViewByIndex(k,e.LayerClass.ELEVATION),m.fallsWithinLayer(this.tile,n.layer,!1)&&
(n=l.data,a&&a[f]===n.samplerData||(h=!0),d[f++]=n.samplerData,g=this.tile.lij[0]))}a&&a.length!==f&&(h=!0);0<f?d.length=f:d=null;return{changed:h,samplerData:d,maxTileLevel:g}};Object.defineProperty(c.prototype,"estimatedGeometryMemoryUsage",{get:function(){return this.geometryInfo.indices.byteLength+this.geometryInfo.vertexAttributes.byteLength},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"textureDescriptor",{get:function(){return this._texture?this._texture.descriptor:null},
enumerable:!0,configurable:!0});return c}();c.PatchRenderData=p})},"esri/views/3d/terrain/TileRenderer":function(){define("require exports ../../../core/mathUtils ../../../core/libs/gl-matrix-2/vec2 ../../../core/libs/gl-matrix-2/vec2f64 ../../../core/libs/gl-matrix-2/vec4 ../../2d/engine/vectorTiles/tileRendererHelper3D ../../2d/engine/vectorTiles/VectorTileDisplayObject3D ./TerrainConst ./terrainUtils ../webgl-engine/lib/DefaultVertexAttributeLocations ../webgl-engine/lib/DefaultVertexBufferLayouts ../webgl-engine/lib/glUtil3D ../webgl-engine/shaders/MiscPrograms ../../webgl/BufferObject ../../webgl/FramebufferObject ../../webgl/renderState ../../webgl/Texture ../../webgl/Util ../../webgl/VertexArrayObject".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v){var y=Array(20),z={tile:null,sourceLayerInfo:null,sourceLod:null,offset:[0,0],scale:1,layerIdx:0};return function(){function c(b,c,d,f){this._blackTex=this._backgroundTex=null;this.tileSize=256;this._context=b;this.tileSize=c;this._setNeedsRender=f;b.capabilities.textureFilterAnisotropic&&(this._maxAnisotropy=Math.min(8,b.parameters.maxMaxAnisotropy));c=new Float32Array(20);c[0]=-1;c[1]=-1;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=-1;c[7]=0;c[8]=1;c[9]=0;c[10]=
-1;c[11]=1;c[12]=0;c[13]=0;c[14]=1;c[15]=1;c[16]=1;c[17]=0;c[18]=1;c[19]=1;this._vaoQuad=new v(b,a.Default3D,{geometry:e.Pos3Tex},{geometry:u.createVertex(b,35044,c)});this._blendLayersProgram=d.getProgram(q.blendLayers);this._blendLayersPipelineState=r.makePipelineState({blending:r.simpleBlendingParams(1,771),colorWrite:r.defaultColorWriteParams});this._applyOpacityPipelineState=r.makePipelineState({blending:r.simpleBlendingParams(0,770),colorWrite:r.defaultColorWriteParams});this._blackTex=m.createColorTexture(this._context,
[0,0,0,1])}c.prototype.dispose=function(){this._fbo&&(this._fbo.dispose(),this._fbo=null);this._vtFBO&&(this._vtFBO.dispose(),this._vtFBO=null);this._vaoQuad&&(this._vaoQuad.dispose(),this._vaoQuad=null);this._backgroundTex&&(this._backgroundTex.dispose(),this._backgroundTex=null);this._blackTex&&(this._blackTex.dispose(),this._blackTex=null);this._blendLayersProgram&&(this._blendLayersProgram.dispose(),this._blendLayersProgram=null);this._context=null};c.prototype.updateTileTexture=function(a){for(var c=
a.layerInfo[f.LayerClass.MAP],e=0;e<c.length;e++)c[e].pendingUpdates&=~f.TileUpdate.TEXTURE;if(a.renderData){var e=a.renderData,g=a.surface,h=g.baseOpacity,k=0,m=this.tileSize,l=!1,q,r=c.length;for(q=0;q<c.length&&!l;q++){var p=g.layerViewByIndex(q,f.LayerClass.MAP),t=p.fullOpacity;y[q]=t;this._isBaseLayer(p.layer)&&r>=c.length&&(r=q);if(0!==t){var u=this._getTileRenderInfo(a,q,z);u&&(b.isVectorTileLayerView(p)&&(m=Math.max(m,this.tileSize*p.view.pixelRatio)),k++,p.isOpaque&&1===h&&1===t&&(l=!0))}}g=
m;m=n.nextHighestPowerOfTwo(g);c=m*m;u=g*g;c===u?m=g:(g=m/2,m=c-u<u-g*g?m:g);c=m/this.tileSize;--q;0===k&&this._backgroundTex?(e.opacity=h,e.textureReference=this._backgroundTex,d.vec4.set(e.texOffsetAndScale,0,0,1,1)):1===k&&l?(e.opacity=h,u=this._getTileRenderInfo(a,q,z),this._dataToTexture(this._context,u,m,c)&&(e.textureReference=u.sourceLayerInfo.data,d.vec4.set(e.texOffsetAndScale,u.offset[0],u.offset[1],u.scale,u.scale))):(this._composeMapLayers(a,q,r,l,y,m,c),d.vec4.set(e.texOffsetAndScale,
0,0,1,1));this._setNeedsRender()}};c.prototype.setBackground=function(a){this._backgroundTex=a instanceof HTMLImageElement?this._buildTexture(a):m.createColorTexture(this._context,a)};c.prototype._buildTexture=function(a){var b={target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9987,maxAnisotropy:this._maxAnisotropy,flipped:!0,hasMipmap:!0},c=this._context,d;if("number"===typeof a)b.width=b.height=a,d=new x(c,b);else try{d=new x(c,b,a)}catch(H){d=m.createEmptyTexture(c),console.warn("TileRenderer: failed to execute 'texImage2D', cross-origin image may not be loaded.")}c.bindTexture(d);
d.generateMipmap();return d};c.prototype._bindFBO=function(a,b,c,d){a&&a.width===b&&a.height===c||(a&&a.dispose(),a=t.create(this._context,{colorTarget:0,depthStencilTarget:d?1:0,width:b,height:c}));this._context.bindFramebuffer(a);return a};c.prototype._drawRasterData=function(a,b,c,d){void 0===d&&(d=1);var e=this._context,f=this._blendLayersProgram,g=this._vaoQuad;e.bindProgram(f);e.bindVAO(g);w.assertCompatibleVertexAttributeLocations(g,f);e.bindTexture(a,0);f.setUniform1i("tex",0);f.setUniform1f("scale",
b);f.setUniform2f("offset",c[0],c[1]);f.setUniform1f("opacity",d);e.drawArrays(5,0,w.vertexCount(g,"geometry"))};c.prototype._composeMapLayers=function(a,b,c,d,e,f,g){var h=this,m=a.renderData.ensureTexture(function(a){return h._buildTexture(a)},f),l=this._context;this._fbo=this._bindFBO(this._fbo,m.descriptor.width,m.descriptor.height,!1);l.setViewport(0,0,f,f);l.setClearColor(0,0,0,0);l.setClearDepth(1);l.clearSafe(16384);!d&&this._backgroundTex&&(l.setPipelineState(this._blendLayersPipelineState),
this._drawRasterData(this._backgroundTex,1,k.vec2f64.ZEROS));d=a.surface.baseOpacity;for(var n=!1;0<=b;b--){var q=this._getTileRenderInfo(a,b,z);q&&(b<c&&1>d&&!n&&(l.setPipelineState(this._applyOpacityPipelineState),this._drawRasterData(this._blackTex,1,k.vec2f64.ZEROS,d),n=!0),0!==e[b]&&this._dataToTexture(l,q,f,g)&&(l.setPipelineState(this._blendLayersPipelineState),this._drawRasterData(q.sourceLayerInfo.data,q.scale,q.offset,e[b])))}l.bindTexture(m);l.gl.copyTexImage2D(l.gl.TEXTURE_2D,0,m.descriptor.pixelFormat,
0,0,m.descriptor.width,m.descriptor.height,0);m.generateMipmap();l.bindFramebuffer(null);a.renderData.opacity=n?1:d;a.renderData.textureReference=m};c.prototype._dataToTexture=function(a,b,c,d){b&&b.sourceLayerInfo&&b.sourceLayerInfo.data instanceof g&&(this._vectorDataToTexture(a,b,c,d),b.tile.updateMemoryUsed());a=b&&b.sourceLayerInfo&&b.sourceLayerInfo.data;if(a instanceof HTMLImageElement||a instanceof HTMLCanvasElement)this._rasterDataToTexture(b),b.tile.updateMemoryUsed();return b&&b.sourceLayerInfo&&
b.sourceLayerInfo.data instanceof x};c.prototype._rasterDataToTexture=function(a){a=a.sourceLayerInfo;a.data=this._buildTexture(a.data)};c.prototype._vectorDataToTexture=function(a,b,c,d){var e=b.tile.surface.layerViewByIndex(b.layerIdx,f.LayerClass.MAP);this._vtFBO=this._bindFBO(this._vtFBO,c,c,!0);a.setClearColor(1,1,1,0);a.clearSafe(16640);var g=b.sourceLayerInfo,k=g.data;h.renderVectorTile(this._context,b.sourceLod,k,e.renderer,e.schemaHelper,this.tileSize,this.tileSize,d);k.dispose();g.data=
this._buildTexture(c);a.bindTexture(g.data);a.gl.copyTexImage2D(a.gl.TEXTURE_2D,0,g.data.descriptor.pixelFormat,0,0,c,c,0);g.data.generateMipmap();a.bindFramebuffer(this._fbo)};c.prototype._getTileRenderInfo=function(a,b,c){var d=a.layerInfo[f.LayerClass.MAP][b];c.layerIdx=b;if(d.data)return l.vec2.set(c.offset,0,0),c.tile=a,c.scale=1,c.sourceLod=a.lij,c.sourceLayerInfo=d,c;if(!d.upsampleFromTile)return null;a=d.upsampleFromTile;b=a.tile.layerInfo[f.LayerClass.MAP][b];c.tile=a.tile;l.vec2.copy(c.offset,
a.offset);c.scale=a.scale;c.sourceLod=a.tile.lij;c.sourceLayerInfo=b;return c};c.prototype._isBaseLayer=function(a){return a.parent&&"esri.Basemap"===a.parent.declaredClass&&-1<a.parent.baseLayers.indexOf(a)};Object.defineProperty(c.prototype,"test",{get:function(){return{fbo:this._fbo}},enumerable:!0,configurable:!0});return c}()})},"esri/views/2d/engine/vectorTiles/tileRendererHelper3D":function(){define("require exports ../../../../geometry ../../../../Viewpoint ../../../../core/libs/gl-matrix-2/mat4 ../../ViewState ../../../webgl/renderState".split(" "),
function(p,c,n,l,k,d,h){Object.defineProperty(c,"__esModule",{value:!0});c.renderVectorTile=function(a,c,d,h,l,n,r,p){if(n!==r)throw Error("It is expected that tiles are square!");var e=l.adjustLevel(c[0]);p={context:a,drawPhase:0,state:g,stationary:!0,pixelRatio:p,displayLevel:e,requiredLevel:e,drawphase:0,renderer:h,layerOpacity:1,globalOpacity:1};h.initializeProgramCache(a);e=l.getScale(c[0]);l=l.getShift(c,e);var m=l[1];d.tileTransform.displayCoord[0]=-1-l[0];d.tileTransform.displayCoord[1]=1+
m;l=d.tileTransform.transform;k.mat4.identity(l);e=.25*e/n;l[0]=e;l[5]=-e;p.state.size=[n,r];h.setStateParams(p.state,p.pixelRatio,c[0]);d.attachWithContext(a);a.setPipelineState(f);d.render(p);a.setPipelineState(b);p.drawphase=1;d.render(p);p.drawphase=2;d.render(p)};var g=new d({viewpoint:new l({targetGeometry:new n.Point(0,0),scale:1,rotation:0}),size:[256,256]}),f=h.makePipelineState({depthTest:{func:515},depthWrite:h.defaultDepthWriteParams,colorWrite:h.defaultColorWriteParams}),b=h.makePipelineState({blending:h.simpleBlendingParams(1,
771),depthTest:{func:515},colorWrite:h.defaultColorWriteParams})})},"esri/views/2d/ViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/libs/gl-matrix-2/common ../../core/libs/gl-matrix-2/mat2d ../../core/libs/gl-matrix-2/mat2df32 ../../core/libs/gl-matrix-2/mat2df64 ../../core/libs/gl-matrix-2/mat3 ../../core/libs/gl-matrix-2/mat3f32 ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f32 ../../core/libs/gl-matrix-2/vec2f64 ../../core/libs/gl-matrix-2/types/vec2 ./viewpointUtils".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w){var v=[0,0];return function(c){function h(){for(var b=[],d=0;d<arguments.length;d++)b[d]=arguments[d];b=c.apply(this,b)||this;b._viewpoint2D={center:r.vec2f64.create(),rotation:0,scale:0,spatialReference:null};b.center=[0,0];b.extent=new k.Extent;b.id=0;b.inverseTransform=e.mat2df64.create();b.resolution=0;b.rotation=0;b.scale=0;b.transform=e.mat2df64.create();b.transformNoRotation=e.mat2df64.create();b.displayMat3=q.mat3f32.create();b.displayViewMat3=
q.mat3f32.create();b.viewMat3=q.mat3f32.create();b.viewMat2d=a.mat2df32.create();b.worldScreenWidth=0;b.size=[0,0];return b}n(h,c);p=h;Object.defineProperty(h.prototype,"pixelRatio",{set:function(a){this._set("pixelRatio",a);this._update()},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"size",{set:function(a){this._set("size",a);this._update()},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"viewpoint",{set:function(a){if(a){var b=this._viewpoint2D,c=a.targetGeometry;
b.center[0]=c.x;b.center[1]=c.y;b.rotation=a.rotation;b.scale=a.scale;b.spatialReference=c.spatialReference}this._update()},enumerable:!0,configurable:!0});h.prototype.copy=function(a){var b=this.size,c=this.viewpoint;c&&b?(this.viewpoint=w.copy(c,a.viewpoint),this._set("size",u.vec2.copy(b,a.size))):(this.viewpoint=a.viewpoint.clone(),this._set("size",[a.size[0],a.size[1]]));this._set("pixelRatio",a.pixelRatio);return this};h.prototype.clone=function(){return new p({size:this.size,viewpoint:this.viewpoint.clone(),
pixelRatio:this.pixelRatio})};h.prototype.toMap=function(a,b,c){if(x.isVec2(b))return u.vec2.transformMat2d(a,b,this.inverseTransform);v[0]=b;v[1]=c;return u.vec2.transformMat2d(a,v,this.inverseTransform)};h.prototype.toScreen=function(a,b,c){if(x.isVec2(b))return u.vec2.transformMat2d(a,b,this.transform);v[0]=b;v[1]=c;return u.vec2.transformMat2d(a,v,this.transform)};h.prototype.toScreenNoRotation=function(a,b,c){if(x.isVec2(b))return u.vec2.transformMat2d(a,b,this.transformNoRotation);v[0]=b;v[1]=
c;return u.vec2.transformMat2d(a,v,this.transformNoRotation)};h.prototype.pixelSizeAt=function(a){return w.pixelSizeAt(a,this.viewpoint,this.size)};h.prototype.getScreenTransform=function(a,b){var c=this._viewpoint2D.center,d=this._get("pixelRatio")||1,e=this._get("size");w.getMatrix(a,c,e,b,0,d);return a};h.prototype._update=function(){var a=this._viewpoint2D,c=a.center,e=a.spatialReference,g=a.scale,h=a.rotation,a=this._get("pixelRatio")||1,l=this._get("size");this._set("id",this.id+1);var n=new d({targetGeometry:new k.Point(c[0],
c[1],e),scale:g,rotation:h});this._set("viewpoint",n);if(l&&e&&g)return this.resolution=w.getResolution(n),this.rotation=h,this.scale=g,this.spatialReference=e,u.vec2.copy(this.center,c),m.mat3.set(this.displayMat3,0!==l[0]?2/l[0]:0,0,0,0,0!==l[1]?-2/l[1]:0,0,-1,1,1),g=m.mat3.identity(this.viewMat3),c=t.vec2f32.fromValues(l[0]/2,l[1]/2),e=t.vec2f32.fromValues(-l[0]/2,-l[1]/2),h=f.common.toRadian(h),m.mat3.translate(g,g,c),m.mat3.rotate(g,g,h),m.mat3.translate(g,g,e),m.mat3.multiply(this.displayViewMat3,
this.displayMat3,g),g=b.mat2d.identity(this.viewMat2d),b.mat2d.translate(g,g,c),b.mat2d.rotate(g,g,h),b.mat2d.translate(g,g,e),w.getExtent(this.extent,n,l),w.getTransform(this.transform,n,l,a),b.mat2d.invert(this.inverseTransform,this.transform),w.getTransformNoRotation(this.transformNoRotation,n,l,a),this.worldScreenWidth=w.getWorldScreenWidth(this.spatialReference,this.resolution),this};var p;l([g.property({readOnly:!0})],h.prototype,"id",void 0);l([g.property({value:1,json:{write:!0}})],h.prototype,
"pixelRatio",null);l([g.property({json:{write:!0}})],h.prototype,"size",null);l([g.property({type:d,json:{write:!0}})],h.prototype,"viewpoint",null);return h=p=l([g.subclass("esri.views.2d.ViewState")],h)}(g.declared(h))})},"esri/core/libs/gl-matrix-2/common":function(){define(["require","exports","./math/common"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.common=n})},"esri/core/libs/gl-matrix-2/mat2d":function(){define(["require","exports","./math/mat2d"],function(p,c,n){Object.defineProperty(c,
"__esModule",{value:!0});c.mat2d=n})},"esri/core/libs/gl-matrix-2/math/mat2d":function(){define(["require","exports","./common"],function(p,c,n){function l(c,h,g){var d=h[0],b=h[1],a=h[2],e=h[3],k=h[4];h=h[5];var l=g[0],n=g[1],p=g[2],r=g[3],x=g[4];g=g[5];c[0]=d*l+a*n;c[1]=b*l+e*n;c[2]=d*p+a*r;c[3]=b*p+e*r;c[4]=d*x+a*g+k;c[5]=b*x+e*g+h;return c}function k(c,h,g){c[0]=h[0]-g[0];c[1]=h[1]-g[1];c[2]=h[2]-g[2];c[3]=h[3]-g[3];c[4]=h[4]-g[4];c[5]=h[5]-g[5];return c}Object.defineProperty(c,"__esModule",{value:!0});
c.copy=function(c,h){c[0]=h[0];c[1]=h[1];c[2]=h[2];c[3]=h[3];c[4]=h[4];c[5]=h[5];return c};c.identity=function(c){c[0]=1;c[1]=0;c[2]=0;c[3]=1;c[4]=0;c[5]=0;return c};c.set=function(c,h,g,f,b,a,e){c[0]=h;c[1]=g;c[2]=f;c[3]=b;c[4]=a;c[5]=e;return c};c.invert=function(c,h){var d=h[0],f=h[1],b=h[2],a=h[3],e=h[4];h=h[5];var k=d*a-f*b;if(!k)return null;k=1/k;c[0]=a*k;c[1]=-f*k;c[2]=-b*k;c[3]=d*k;c[4]=(b*h-a*e)*k;c[5]=(f*e-d*h)*k;return c};c.determinant=function(c){return c[0]*c[3]-c[1]*c[2]};c.multiply=
l;c.rotate=function(c,h,g){var d=h[0],b=h[1],a=h[2],e=h[3],k=h[4];h=h[5];var l=Math.sin(g);g=Math.cos(g);c[0]=d*g+a*l;c[1]=b*g+e*l;c[2]=d*-l+a*g;c[3]=b*-l+e*g;c[4]=k;c[5]=h;return c};c.scale=function(c,h,g){var d=h[1],b=h[2],a=h[3],e=h[4],k=h[5],l=g[0];g=g[1];c[0]=h[0]*l;c[1]=d*l;c[2]=b*g;c[3]=a*g;c[4]=e;c[5]=k;return c};c.translate=function(c,h,g){var d=h[0],b=h[1],a=h[2],e=h[3],k=h[4];h=h[5];var l=g[0];g=g[1];c[0]=d;c[1]=b;c[2]=a;c[3]=e;c[4]=d*l+a*g+k;c[5]=b*l+e*g+h;return c};c.fromRotation=function(c,
h){var d=Math.sin(h);h=Math.cos(h);c[0]=h;c[1]=d;c[2]=-d;c[3]=h;c[4]=0;c[5]=0;return c};c.fromScaling=function(c,h){c[0]=h[0];c[1]=0;c[2]=0;c[3]=h[1];c[4]=0;c[5]=0;return c};c.fromTranslation=function(c,h){c[0]=1;c[1]=0;c[2]=0;c[3]=1;c[4]=h[0];c[5]=h[1];return c};c.str=function(c){return"mat2d("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+")"};c.frob=function(c){return Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)+Math.pow(c[2],2)+Math.pow(c[3],2)+Math.pow(c[4],2)+Math.pow(c[5],2)+1)};c.add=
function(c,h,g){c[0]=h[0]+g[0];c[1]=h[1]+g[1];c[2]=h[2]+g[2];c[3]=h[3]+g[3];c[4]=h[4]+g[4];c[5]=h[5]+g[5];return c};c.subtract=k;c.multiplyScalar=function(c,h,g){c[0]=h[0]*g;c[1]=h[1]*g;c[2]=h[2]*g;c[3]=h[3]*g;c[4]=h[4]*g;c[5]=h[5]*g;return c};c.multiplyScalarAndAdd=function(c,h,g,f){c[0]=h[0]+g[0]*f;c[1]=h[1]+g[1]*f;c[2]=h[2]+g[2]*f;c[3]=h[3]+g[3]*f;c[4]=h[4]+g[4]*f;c[5]=h[5]+g[5]*f;return c};c.exactEquals=function(c,h){return c[0]===h[0]&&c[1]===h[1]&&c[2]===h[2]&&c[3]===h[3]&&c[4]===h[4]&&c[5]===
h[5]};c.equals=function(c,h){var d=c[0],f=c[1],b=c[2],a=c[3],e=c[4];c=c[5];var k=h[0],l=h[1],p=h[2],t=h[3],r=h[4];h=h[5];return Math.abs(d-k)<=n.EPSILON*Math.max(1,Math.abs(d),Math.abs(k))&&Math.abs(f-l)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(l))&&Math.abs(b-p)<=n.EPSILON*Math.max(1,Math.abs(b),Math.abs(p))&&Math.abs(a-t)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(t))&&Math.abs(e-r)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(c-h)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(h))};c.mul=
l;c.sub=k})},"esri/core/libs/gl-matrix-2/mat2df32":function(){define(["require","exports","./factories/mat2df32"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.mat2df32=n})},"esri/core/libs/gl-matrix-2/factories/mat2df32":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,"__esModule",{value:!0});c.create=function(){var c=new Float32Array(6);c[0]=1;c[3]=1;return c};c.clone=function(c){var l=new Float32Array(6);l[0]=c[0];l[1]=c[1];l[2]=c[2];l[3]=c[3];
l[4]=c[4];l[5]=c[5];return l};c.fromValues=function(c,l,k,d,h,g){var f=new Float32Array(6);f[0]=c;f[1]=l;f[2]=k;f[3]=d;f[4]=h;f[5]=g;return f};c.createView=function(c,l){return new Float32Array(c,l,6)}})},"esri/core/libs/gl-matrix-2/mat2df64":function(){define(["require","exports","./factories/mat2df64"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.mat2df64=n})},"esri/core/libs/gl-matrix-2/factories/mat2df64":function(){define(["require","exports"],function(p,c){Object.defineProperty(c,
"__esModule",{value:!0});c.create=function(){return[1,0,0,1,0,0]};c.clone=function(c){return[c[0],c[1],c[2],c[3],c[4],c[5]]};c.fromValues=function(c,l,k,d,h,g){return[c,l,k,d,h,g]};c.createView=function(c,l){return new Float64Array(c,l,6)}})},"esri/core/libs/gl-matrix-2/mat3f32":function(){define(["require","exports","./factories/mat3f32"],function(p,c,n){Object.defineProperty(c,"__esModule",{value:!0});c.mat3f32=n})},"esri/core/libs/gl-matrix-2/factories/mat3f32":function(){define(["require","exports"],
function(p,c){Object.defineProperty(c,"__esModule",{value:!0});c.create=function(){var c=new Float32Array(9);c[0]=1;c[4]=1;c[8]=1;return c};c.clone=function(c){var l=new Float32Array(9);l[0]=c[0];l[1]=c[1];l[2]=c[2];l[3]=c[3];l[4]=c[4];l[5]=c[5];l[6]=c[6];l[7]=c[7];l[8]=c[8];return l};c.fromValues=function(c,l,k,d,h,g,f,b,a){var e=new Float32Array(9);e[0]=c;e[1]=l;e[2]=k;e[3]=d;e[4]=h;e[5]=g;e[6]=f;e[7]=b;e[8]=a;return e};c.createView=function(c,l){return new Float32Array(c,l,9)}})},"esri/core/libs/gl-matrix-2/types/vec2":function(){define(["require",
"exports"],function(p,c){function n(c){return c instanceof Float32Array&&2<=c.length}function l(c){return Array.isArray(c)&&2<=c.length}Object.defineProperty(c,"__esModule",{value:!0});c.isVec2f32=n;c.isVec2f64=l;c.isVec2=function(c){return n(c)||l(c)}})},"esri/views/2d/viewpointUtils":function(){define("require exports ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../Viewpoint ../../core/asyncUtils ../../core/Collection ../../core/maybe ../../core/promiseUtils ../../core/unitUtils ../../core/wgs84Constants ../../core/libs/gl-matrix-2/common ../../core/libs/gl-matrix-2/mat2d ../../core/libs/gl-matrix-2/mat2df64 ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f64 ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ../../geometry/support/webMercatorUtils".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z,A){function B(a,b,c,d){return d&&c&&!d.equals(c)&&z.canProject(d,c)&&d.isWebMercator?(d.isWebMercator?(c=b[1],89.99999<c?c=89.99999:-89.99999>c&&(c=-89.99999),c=Math.sin(e.common.toRadian(c)),a=u.vec2.set(a,e.common.toRadian(b[0])*J,.5*J*Math.log((1+c)/(1-c)))):(c=e.common.toDegree(b[0]/J),a=u.vec2.set(a,c-360*Math.floor((c+180)/360),e.common.toDegree(.5*Math.PI-2*Math.atan(Math.exp(-1*b[1]/J))))),a):u.vec2.copy(a,b)}function D(a){return a.wkid?
a:a.spatialReference||v.WGS84}function C(a,b){return b.type?u.vec2.set(a,b.x,b.y):u.vec2.copy(a,b)}function E(a,b){return Math.max(a.width/b[0],a.height/b[1])*V(a.spatialReference)}function H(a,b,c,d){return l(this,void 0,void 0,function(){var e,k,m,l,q,p,t,u,v,y,A,B,C,D,F,L,E,G,I,J,K,M,O,N,P,Y,S,X;return n(this,function(n){switch(n.label){case 0:if(!a||Array.isArray(a)&&!a.length)return[2,null];h.isCollection(a)&&(a=a.toArray());if(!Array.isArray(a)||!a.length||"object"!==typeof a[0])return[3,7];
k=a.every(function(a){return"attributes"in a});m=a.some(function(a){return!a.geometry});l=a;if(!(k&&m&&b&&b.allLayerViews))return[3,2];q=new Map;p=0;for(t=a;p<t.length;p++)u=t[p],v=u.layer,y=q.get(v)||[],A=u.attributes[v.objectIdField],null!=A&&y.push(A),q.set(v,y);B=[];q.forEach(function(a,c){var d=b.allLayerViews.find(function(a){return a.layer.id===c.id});if("queryFeatures"in d){var e=c.createQuery();e.objectIds=a;e.returnGeometry=!0;B.push(d.queryFeatures(e))}});return[4,f.all(B)];case 1:C=n.sent();
D=[];F=0;for(L=C;F<L.length;F++)if((E=L[F])&&E.features&&E.features.length)for(G=0,I=E.features;G<I.length;G++)u=I[G],g.isSome(u.geometry)&&D.push(u.geometry);l=D;n.label=2;case 2:J=0,K=l,n.label=3;case 3:if(!(J<K.length))return[3,6];M=K[J];return[4,H(M,b,c,d)];case 4:d=n.sent(),n.label=5;case 5:return J++,[3,3];case 6:return[2,d];case 7:if(!Array.isArray(a)||2!==a.length||"number"!==typeof a[0]||"number"!==typeof a[1])return[3,8];e=new w(a);return[3,12];case 8:if(!(a instanceof x))return[3,9];e=
a;return[3,12];case 9:if(!("geometry"in a))return[3,12];if(!a.geometry)return[3,10];e=a.geometry;return[3,12];case 10:if(!a.layer)return[3,12];O=a.layer;N=b.allLayerViews.find(function(a){return a.layer.id===O.id});if(!("queryFeatures"in N))return[3,12];P=O.createQuery();P.objectIds=[a.attributes[O.objectIdField]];P.returnGeometry=!0;return[4,N.queryFeatures(P)];case 11:Y=n.sent(),e=g.get(Y,"features",0,"geometry"),n.label=12;case 12:if(g.isNone(e))return[2,null];S="point"===e.type?new r({xmin:e.x,
ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference}):e.extent;if(!S)return[2,null];X=z.canProject(S,c);if(!S.spatialReference.equals(c)&&X)S=z.project(S,c);else if(!X)return[2,null];d=d?d.union(S):S.clone();return[2,d]}})})}function G(a){if(a&&(!Array.isArray(a)||"number"!==typeof a[0])&&("object"===typeof a||Array.isArray(a)&&"object"===typeof a[0])){if("layer"in a&&a.layer&&a.layer.minScale&&a.layer.maxScale){var b=a.layer;return{min:b.minScale,max:b.maxScale}}if(Array.isArray(a)&&a.length&&
a.every(function(a){return"layer"in a})){for(var c=0,d=0,e=0;e<a.length;e++)(b=a[e].layer)&&b.minScale&&b.maxScale&&(c=b.minScale<c?b.minScale:c,d=b.maxScale>d?b.maxScale:d);return c&&d?{min:c,max:d}:null}}}function I(a,b){return l(this,void 0,void 0,function(){var c,d,e,f,g,h,m,l,q,p,u,v,x,y,F,L;return n(this,function(n){switch(n.label){case 0:if(!a)return[2,new k({targetGeometry:new w,scale:0,rotation:0})];c=b.spatialReference;d=b.size;e=b.viewpoint;f=b.constraints;g=null;"esri.Viewpoint"===a.declaredClass?
g=a:a.viewpoint?g=a.viewpoint:a.target&&"esri.Viewpoint"===a.target.declaredClass&&(g=a.target);h=null;if(!g||!g.targetGeometry)return[3,1];h=g.targetGeometry;return[3,10];case 1:if(!(a instanceof r))return[3,2];h=a;return[3,10];case 2:return a||a&&(a.hasOwnProperty("center")||a.hasOwnProperty("extent")||a.hasOwnProperty("target"))?[4,H(a.center,b,c)]:[3,10];case 3:return(q=n.sent())?[3,5]:[4,H(a.extent,b,c)];case 4:q=n.sent(),n.label=5;case 5:return(l=q)?[3,7]:[4,H(a.target,b,c)];case 6:l=n.sent(),
n.label=7;case 7:return(m=l)?[3,9]:[4,H(a,b,c)];case 8:m=n.sent(),n.label=9;case 9:h=m,n.label=10;case 10:!h&&e&&e.targetGeometry?h=e.targetGeometry:!h&&b.extent&&(h=b.extent);p=D(h);c||(c=D(b.spatialReference||b.extent||h));if(!A.canProject(h,c)&&p&&!p.equals(c))return[2,null];u=C(t.vec2f64.create(),h.center?h.center:h);v=new w(B(u,u,p,c),c);x=null;x=g&&g.targetGeometry&&"point"===g.targetGeometry.type?g.scale:a.hasOwnProperty("scale")&&a.scale?a.scale:a.hasOwnProperty("zoom")&&-1!==a.zoom&&f&&f.effectiveLODs?
f.zoomToScale(a.zoom):Array.isArray(h)||"point"===h.type||"extent"===h.type&&0===h.width&&0===h.height?b.extent&&z.canProject(b.extent,c)?E(z.project(b.extent,c),d):b.extent?E(b.extent,d):e.scale:z.canProject(h.extent,c)?E(z.project(h.extent,c),d):E(h.extent,d);if(y=G(a))y.min&&y.min>x?x=y.min:y.max&&y.max<x&&(x=y.max);F=0;g?F=g.rotation:a.hasOwnProperty("rotation")?F=a.rotation:e&&(F=e.rotation);L=new k({targetGeometry:v,scale:x,rotation:F});f&&(L=f.fit(L),f.rotationEnabled||(L.rotation=F));return[2,
L]}})})}function K(a,b){var c=a.targetGeometry,d=b.targetGeometry;c.x=d.x;c.y=d.y;c.spatialReference=d.spatialReference;a.scale=b.scale;a.rotation=b.rotation;return a}function M(a,b,c){return c?u.vec2.set(a,.5*(b[0]-c.right+c.left),.5*(b[1]-c.bottom+c.top)):u.vec2.scale(a,b,.5)}function T(a,b,d,e){c.getTransform(a,b,d,e);return m.mat2d.invert(a,a)}function N(a,b,c){var d=O(b);b=Math.abs(Math.cos(d));d=Math.abs(Math.sin(d));return u.vec2.set(a,Math.round(c[1]*d+c[0]*b),Math.round(c[1]*b+c[0]*d))}function S(a){var c=
a.scale;a=a.targetGeometry.spatialReference;a=y.isValid(a)?1/(39.37*b.getMetersPerUnitForSR(a)*96):1;return c*a}function O(a){return e.common.toRadian(a.rotation)||0}function V(a){return y.isValid(a)?39.37*b.getMetersPerUnitForSR(a)*96:1}function Q(a){return a.isWrappable?(a=y.getInfo(a),a.valid[1]-a.valid[0]):0}Object.defineProperty(c,"__esModule",{value:!0});var J=a.wgs84Radius,P=180/Math.PI;c.extentToScale=E;c.create=I;c.copy=K;c.getAnchor=M;c.getExtent=function(){var a=t.vec2f64.create();return function(b,
c,d){var e=c.targetGeometry;C(a,e);c=.5*S(c);b.xmin=a[0]-c*d[0];b.ymin=a[1]-c*d[1];b.xmax=a[0]+c*d[0];b.ymax=a[1]+c*d[1];b.spatialReference=e.spatialReference;return b}}();c.setExtent=function(a,b,d,e,f){c.centerAt(a,b,d.center);a.scale=E(d,e);f&&f.constraints&&f.constraints.constrain(a);return a};c.getOuterExtent=function(){var a=t.vec2f64.create(),b=t.vec2f64.create();return function(c,d,e){C(a,d.targetGeometry);N(b,d,e);e=.5*S(d);c.set({xmin:a[0]-e*b[0],ymin:a[1]-e*b[1],xmax:a[0]+e*b[0],ymax:a[1]+
e*b[1],spatialReference:d.targetGeometry.spatialReference});return c}}();c.getOuterSize=N;c.getPaddingScreenTranslation=function(){var a=t.vec2f64.create();return function(b,c,d){return u.vec2.sub(b,u.vec2.scale(b,c,.5),M(a,c,d))}}();c.getPaddingMapTranslation=function(){var a=q.mat2df64.create(),b=t.vec2f64.create();return function(d,e,f,g){var h=S(e);e=O(e);u.vec2.set(b,h,h);m.mat2d.fromScaling(a,b);m.mat2d.rotate(a,a,e);m.mat2d.translate(a,a,c.getPaddingScreenTranslation(b,f,g));m.mat2d.translate(a,
a,[0,g.top-g.bottom]);return u.vec2.set(d,a[4],a[5])}}();c.getResolution=S;c.getResolutionToScaleFactor=V;c.getMatrix=function(){var a=t.vec2f64.create(),b=t.vec2f64.create(),c=t.vec2f64.create();return function(d,e,f,g,h,k){u.vec2.negate(a,e);u.vec2.scale(b,f,.5*k);u.vec2.set(c,1/g*k,-1/g*k);m.mat2d.identity(d);m.mat2d.translate(d,d,b);h&&m.mat2d.rotate(d,d,h);m.mat2d.scale(d,d,c);m.mat2d.translate(d,d,a);return d}}();c.getTransform=function(){var a=t.vec2f64.create();return function(b,d,e,f){var g=
S(d),h=O(d);C(a,d.targetGeometry);return c.getMatrix(b,a,e,g,h,f)}}();c.getTransformNoRotation=function(){var a=t.vec2f64.create();return function(b,d,e,f){var g=S(d);C(a,d.targetGeometry);return c.getMatrix(b,a,e,g,0,f)}}();c.getWorldWidth=Q;c.getWorldScreenWidth=function(a,b){return Math.round(Q(a)/b)};c.createAsync=function(a,b){return d.safeCast(I(a,b))};c.angleBetween=function(){var a=t.vec2f64.create(),b=t.vec2f64.create(),c=[0,0,0];return function(d,e,f){u.vec2.subtract(a,d,e);u.vec2.normalize(a,
a);u.vec2.subtract(b,d,f);u.vec2.normalize(b,b);u.vec2.cross(c,a,b);d=Math.acos(u.vec2.dot(a,b)/(u.vec2.length(a)*u.vec2.length(b)))*P;0>c[2]&&(d=-d);isNaN(d)&&(d=0);return d}}();c.addPadding=function(){var a=t.vec2f64.create();return function(b,d,e,f){var g=b.targetGeometry;K(b,d);c.getPaddingMapTranslation(a,d,e,f);g.x+=a[0];g.y+=a[1];return b}}();c.removePadding=function(){var a=t.vec2f64.create();return function(b,d,e,f){var g=b.targetGeometry;K(b,d);c.getPaddingMapTranslation(a,d,e,f);g.x-=a[0];
g.y-=a[1];return b}}();c.centerAt=function(){var a=t.vec2f64.create();return function(b,c,d){K(b,c);c=b.targetGeometry;var e=D(d),f=D(c);C(a,d);B(a,a,e,f);c.x=a[0];c.y=a[1];return b}}();c.pixelSizeAt=function(a,b,c){return S(b)};c.resize=function(){var a=t.vec2f64.create();return function(b,d,e,f,g){g||(g="center");u.vec2.sub(a,e,f);u.vec2.scale(a,a,.5);e=a[0];f=a[1];switch(g){case "center":u.vec2.set(a,0,0);break;case "left":u.vec2.set(a,-e,0);break;case "top":u.vec2.set(a,0,f);break;case "right":u.vec2.set(a,
e,0);break;case "bottom":u.vec2.set(a,0,-f);break;case "top-left":u.vec2.set(a,-e,f);break;case "bottom-left":u.vec2.set(a,-e,-f);break;case "top-right":u.vec2.set(a,e,f);break;case "bottom-right":u.vec2.set(a,e,-f)}c.translateBy(b,d,a);return b}}();c.rotateBy=function(a,b,c){K(a,b);a.rotation+=c;return a};c.rotateTo=function(a,b,c){K(a,b);a.rotation=c;return a};c.scaleBy=function(){var a=t.vec2f64.create();return function(b,d,e,f,g){K(b,d);isNaN(e)||0===e||(c.toMap(a,f,d,g),b.scale=d.scale*e,c.toScreen(a,
a,b,g),c.translateBy(b,b,u.vec2.set(a,a[0]-f[0],f[1]-a[1])));return b}}();c.scaleTo=function(a,b,c){K(a,b);a.scale=c;return a};c.scaleAndRotateBy=function(){var a=t.vec2f64.create();return function(b,d,e,f,g,h){K(b,d);isNaN(e)||0===e||(c.toMap(a,g,d,h),b.scale=d.scale*e,b.rotation+=f,c.toScreen(a,a,b,h),c.translateBy(b,b,u.vec2.set(a,a[0]-g[0],g[1]-a[1])));return b}}();c.padAndScaleAndRotateBy=function(){var a=t.vec2f64.create(),b=t.vec2f64.create();return function(d,e,f,g,h,k,m){c.getPaddingScreenTranslation(b,
k,m);u.vec2.add(a,h,b);return g?c.scaleAndRotateBy(d,e,f,g,a,k):c.scaleBy(d,e,f,a,k)}}();c.toMap=function(){var a=q.mat2df64.create();return function(b,c,d,e){return u.vec2.transformMat2d(b,c,T(a,d,e,1))}}();c.toScreen=function(){var a=q.mat2df64.create();return function(b,d,e,f){return u.vec2.transformMat2d(b,d,c.getTransform(a,e,f,1))}}();c.translateBy=function(){var a=t.vec2f64.create(),b=q.mat2df64.create();return function(c,d,e){K(c,d);var f=S(d),g=c.targetGeometry;m.mat2d.fromRotation(b,O(d));
m.mat2d.scale(b,b,t.vec2f64.fromValues(f,f));u.vec2.transformMat2d(a,e,b);g.x+=a[0];g.y+=a[1];return c}}()})},"esri/views/3d/webgl-engine/shaders/TerrainRendererPrograms":function(){define(["require","exports","../lib/DefaultVertexAttributeLocations","./sources/resolver","../../../webgl/programUtils"],function(p,c,n,l,k){Object.defineProperty(c,"__esModule",{value:!0});var d=function(c){return k.glslifyDefineMap({OVERLAY:c.overlay,ATMOSPHERE:c.atmosphere,WIREFRAME_TEXTURE:c.wireframeTexture,TILE_BORDERS:c.tileBorders,
RECEIVE_SHADOWS:c.receiveShadows,SCREEN_SIZE_PERSPECTIVE:c.screenSizePerspective,ALPHA_ZERO:c.alphaZero,BIAS_SHADOWMAP:c.shadowMap,SLICE:c.slice})};c.colorPass={name:"terrain-color",shaders:function(c){return{vertexShader:d(c)+l.resolveIncludes("terrainRenderer/colorPass.vert"),fragmentShader:d(c)+l.resolveIncludes("terrainRenderer/colorPass.frag")}},attributes:n.Default3D};c.normalPass={name:"terrain-normal",shaders:function(c){return{vertexShader:d(c)+l.resolveIncludes("terrainRenderer/normalPass.vert"),
fragmentShader:d(c)+l.resolveIncludes("terrainRenderer/normalPass.frag")}},attributes:n.Default3D};c.depthPass={name:"terrain-depth",shaders:function(c){return{vertexShader:d(c)+l.resolveIncludes("terrainRenderer/depthPass.vert"),fragmentShader:d(c)+l.resolveIncludes("terrainRenderer/depthPass.frag")}},attributes:n.Default3D};c.highlightPass={name:"terrain-highlight",shaders:function(c){return{vertexShader:d(c)+l.resolveIncludes("terrainRenderer/highlightPass.vert"),fragmentShader:d(c)+l.resolveIncludes("terrainRenderer/highlightPass.frag")}},
attributes:n.Default3D}})},"esri/views/3d/terrain/TilemapOnlyTile":function(){define(["require","exports","./TerrainConst","./TilePerLayerInfo"],function(p,c,n,l){return function(){function c(c,h){this.lij=c;this._pool=h;this.layerInfo=Array(n.LayerClass.COUNT);this.parent=null}c.prototype.hasDataAvailable=function(c,h,g){return(h=this.layerInfo[g][h].tilemap)?"unavailable"!==h.getAvailability(c.lij[1],c.lij[2]):!0};c.prototype.modifyLayers=function(c,h,g){c=this.layerInfo[g];for(var d=h.length,b=
Array(d),a=0;a<d;a++){var e=h[a];b[a]=-1<e?c[e]:l.TilePerLayerInfo.makeEmptyLayerInfo(g,this._pool)}this.layerInfo[g]=b};return c}()})},"esri/views/3d/terrain/UpsampleInfo":function(){define(["require","exports","../../../core/libs/gl-matrix-2/vec2f64"],function(p,c,n){return function(){function c(){this.offset=n.vec2f64.create();this.scale=0;this.tile=null}c.prototype.init=function(c,d,h,g){this.tile=c;this.offset[0]=d;this.offset[1]=h;this.scale=g};c.prototype.dispose=function(){this.tile=null;
this.offset[0]=0;this.scale=this.offset[1]=0};return c}()})},"esri/views/support/WebGLRequirements":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../core/Error","../../core/has"],function(p,c,n,l,k){Object.defineProperty(c,"__esModule",{value:!0});var d={supportsMajorWebPerformanceCaveat:!1};c.check=function(c){c=n({},d,c);return k("esri-webgl")?!c.supportsMajorWebPerformanceCaveat&&k("esri-webgl-major-performance-caveat")?new l("webgl:major-performance-caveat-detected",
"Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is blacklisted."):k("esri-webgl-high-precision-fragment")?k("esri-webgl-vertex-shader-samplers")?k("esri-webgl-element-index-uint")?k("esri-webgl-standard-derivatives")?k("esri-webgl-instanced-arrays")?null:new l("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported."):new l("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported."):
new l("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported."):new l("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new l("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new l("webgl:required","WebGL is required but not supported.")}})},"esri/views/ui/3d/DefaultUI3D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../DefaultUI".split(" "),
function(p,c,n,l,k,d){return function(c){function d(d){d=c.call(this)||this;d.components=["attribution","zoom","navigation-toggle","compass"];return d}n(d,c);l([k.property()],d.prototype,"components",void 0);return d=l([k.subclass("esri.views.ui.3d.DefaultUI3D")],d)}(k.declared(d))})},"esri/views/ui/DefaultUI":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/watchUtils ../../core/accessorSupport/decorators ./Component ./UI ../../widgets/Attribution ../../widgets/Compass ../../widgets/NavigationToggle ../../widgets/Zoom".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e){return function(c){function g(a){a=c.call(this)||this;a._defaultPositionLookup={attribution:"manual",compass:"top-leading","navigation-toggle":"top-leading",zoom:"top-leading"};a.components=[];return a}n(g,c);g.prototype.initialize=function(){this._handles.add([k.init(this,"components",this._componentsWatcher.bind(this)),k.init(this,"view",this._updateViewAwareWidgets.bind(this))])};g.prototype._removeComponents=function(a){var b=this;a.forEach(function(a){if(a=b.find(a))b.remove(a),
a.destroy()})};g.prototype._updateViewAwareWidgets=function(a){var b=this;this.components.forEach(function(c){(c=(c=b.find(c))&&c.widget)&&void 0!==c.view&&c.set("view",a)})};g.prototype._componentsWatcher=function(a,b){this._removeComponents(b);this._addComponents(a);this._adjustPadding(a)};g.prototype._adjustPadding=function(a){-1!==a.indexOf("attribution")||this._isOverridden("padding")||(this.padding=this.padding.top)};g.prototype._addComponents=function(a){var b=this;this.initialized&&a.forEach(function(a){return b.add(b._createComponent(a),
b._defaultPositionLookup[a])})};g.prototype._createComponent=function(a){var b=this._createWidget(a);if(b)return new h({id:a,node:b})};g.prototype._createWidget=function(a){if("attribution"===a)return this._createAttribution();if("compass"===a)return this._createCompass();if("navigation-toggle"===a)return this._createNavigationToggle();if("zoom"===a)return this._createZoom()};g.prototype._createAttribution=function(){return new f({view:this.view})};g.prototype._createCompass=function(){return new b({view:this.view})};
g.prototype._createNavigationToggle=function(){return new a({view:this.view})};g.prototype._createZoom=function(){return new e({view:this.view})};l([d.property()],g.prototype,"components",void 0);return g=l([d.subclass("esri.views.ui.DefaultUI")],g)}(d.declared(g))})},"esri/views/ui/Component":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/domUtils ../../core/accessorSupport/decorators".split(" "),function(p,
c,n,l,k,d,h){return function(c){function f(){var b=null!==c&&c.apply(this,arguments)||this;b.widget=null;return b}n(f,c);f.prototype.destroy=function(){this.widget&&this.widget.destroy();this.node=null};Object.defineProperty(f.prototype,"id",{get:function(){return this._get("id")||this.get("node.id")},set:function(b){this._set("id",b)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"node",{set:function(b){var a=this._get("node");b!==a&&(b&&b.classList.add("esri-component"),a&&a.classList.remove("esri-component"),
this._set("node",b))},enumerable:!0,configurable:!0});f.prototype.castNode=function(b){if(!b)return this._set("widget",null),null;if("string"===typeof b||b&&"nodeType"in b)return this._set("widget",null),d.byId(b);b&&"function"===typeof b.render&&!b.domNode&&(b.domNode=document.createElement("div"));this._set("widget",b);return b.domNode};l([h.property()],f.prototype,"id",null);l([h.property()],f.prototype,"node",null);l([h.cast("node")],f.prototype,"castNode",null);l([h.property({readOnly:!0})],
f.prototype,"widget",void 0);return f=l([h.subclass("esri.views.ui.Component")],f)}(h.declared(k))})},"esri/views/ui/UI":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/domUtils ../../core/Evented ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ./Component ../../widgets/support/widgetUtils".split(" "),function(p,c,n,l,k,d,h,g,f,b,a,e,m){function q(a){return"object"!==
typeof a||a&&a.isInstanceOf&&a.isInstanceOf(e)||!("component"in a||"index"in a||"position"in a)?null:a}function u(a,b){var c=b.bottom,d=b.left,e=b.right;a.style.top=b.top;a.style.bottom=c;a.style.left=d;a.style.right=e}var t={left:0,top:0,bottom:0,right:0},r={bottom:30,top:15,right:15,left:15};return function(c){function d(a){a=c.call(this)||this;a._cornerNameToContainerLookup={};a._positionNameToContainerLookup={};a._components=[];a._handles=new f;a._componentToKey=new Map;a.view=null;a._initContainers();
return a}l(d,c);d.prototype.initialize=function(){this._handles.add([b.init(this,"view.padding, container",this._applyViewPadding.bind(this)),b.init(this,"padding",this._applyUIPadding.bind(this))])};d.prototype.destroy=function(){this.container=null;this._components.forEach(function(a){a.destroy()});this._components.length=0;this._handles.destroy();this._componentToKey.clear();this._componentToKey=null};Object.defineProperty(d.prototype,"container",{set:function(a){var b=this._get("container");a!==
b&&(a&&(a.classList.add("esri-ui"),this._attachContainers(a)),b&&(b.classList.remove("esri-ui"),u(b,{top:"",bottom:"",left:"",right:""}),h.empty(b)),this._set("container",a))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"height",{get:function(){var a=this.get("view.height")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.top+b.bottom),0)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"padding",{get:function(){return this._get("padding")},
set:function(a){a?this._override("padding",a):this._clearOverride("padding")},enumerable:!0,configurable:!0});d.prototype.castPadding=function(a){return"number"===typeof a?{bottom:a,top:a,right:a,left:a}:n({},r,a)};Object.defineProperty(d.prototype,"width",{get:function(){var a=this.get("view.width")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.left+b.right),0)},enumerable:!0,configurable:!0});d.prototype.add=function(a,b){var c=this,d,f;if(Array.isArray(a))a.forEach(function(a){return c.add(a,
b)});else{var g=q(a);g&&(d=g.index,b=g.position,a=g.component,f=g.key);b&&"object"===typeof b&&(d=b.index,f=b.key,b=b.position);!a||b&&!this._isValidPosition(b)||(a&&a.isInstanceOf&&a.isInstanceOf(e)||(a=new e({node:a})),this._place({component:a,position:b,index:d}),this._components.push(a),f&&this._componentToKey.set(a,f))}};d.prototype.remove=function(a,b){var c=this;if(a){if(Array.isArray(a))return a.map(function(a){return c.remove(a,b)});var d=this.find(a);if(d){var e=this._componentToKey;if(!e.has(a)||
e.get(a)===b)return e=this._components.indexOf(d),d.node.parentNode&&d.node.parentNode.removeChild(d.node),this._componentToKey.delete(a),this._components.splice(e,1)[0]}}};d.prototype.empty=function(a){var b=this;if(Array.isArray(a))return a.map(function(a){return b.empty(a)}).reduce(function(a,b){return a.concat(b)});a=a||"manual";if("manual"===a)return Array.prototype.slice.call(this._manualContainer.children).filter(function(a){return!a.classList.contains("esri-ui-corner")}).map(function(a){return b.remove(a)});
if(this._isValidPosition(a))return Array.prototype.slice.call(this._cornerNameToContainerLookup[a].children).map(this.remove,this)};d.prototype.move=function(a,b){var c=this;Array.isArray(a)&&a.forEach(function(a){return c.move(a,b)});if(a){var d,e=q(a)||q(b);e&&(d=e.index,b=e.position,a=e.component||a);(!b||this._isValidPosition(b))&&(a=this.remove(a))&&this.add(a,{position:b,index:d})}};d.prototype.find=function(a){return a?a&&a.isInstanceOf&&a.isInstanceOf(e)?this._findByComponent(a):"string"===
typeof a?this._findById(a):this._findByNode(a.domNode||a):null};d.prototype._getViewPadding=function(){return this.get("view.padding")||t};d.prototype._attachContainers=function(a){a.appendChild(this._innerContainer);a.appendChild(this._manualContainer)};d.prototype._initContainers=function(){var a=document.createElement("div");a.classList.add("esri-ui-inner-container");a.classList.add("esri-ui-corner-container");var b=document.createElement("div");b.classList.add("esri-ui-inner-container");b.classList.add("esri-ui-manual-container");
var c=document.createElement("div");c.classList.add("esri-ui-top-left");c.classList.add("esri-ui-corner");a.appendChild(c);var d=document.createElement("div");d.classList.add("esri-ui-top-right");d.classList.add("esri-ui-corner");a.appendChild(d);var e=document.createElement("div");e.classList.add("esri-ui-bottom-left");e.classList.add("esri-ui-corner");a.appendChild(e);var f=document.createElement("div");f.classList.add("esri-ui-bottom-right");f.classList.add("esri-ui-corner");a.appendChild(f);this._innerContainer=
a;this._manualContainer=b;a=m.isRTL();this._cornerNameToContainerLookup={"top-left":c,"top-right":d,"bottom-left":e,"bottom-right":f,"top-leading":a?d:c,"top-trailing":a?c:d,"bottom-leading":a?f:e,"bottom-trailing":a?e:f};this._positionNameToContainerLookup=n({manual:b},this._cornerNameToContainerLookup)};d.prototype._isValidPosition=function(a){return!!this._positionNameToContainerLookup[a]};d.prototype._place=function(a){var b=a.component,c=a.index;a=this._positionNameToContainerLookup[a.position||
"manual"];var d=-1<c,e=b.widget;e&&!e._started&&"function"===typeof e.postMixInProperties&&"function"===typeof e.buildRendering&&"function"===typeof e.postCreate&&"function"===typeof e.startup&&b.widget.startup();d?(d=Array.prototype.slice.call(a.children),0===c?a.firstChild?h.insertBefore(b.node,a.firstChild):a.appendChild(b.node):c>=d.length?a.appendChild(b.node):h.insertBefore(b.node,d[c])):a.appendChild(b.node)};d.prototype._applyViewPadding=function(){var a=this.container;a&&u(a,this._toPxPosition(this._getViewPadding()))};
d.prototype._applyUIPadding=function(){var a=this._innerContainer;a&&u(a,this._toPxPosition(this.padding))};d.prototype._toPxPosition=function(a){return{top:this._toPxUnit(a.top),left:this._toPxUnit(a.left),right:this._toPxUnit(a.right),bottom:this._toPxUnit(a.bottom)}};d.prototype._toPxUnit=function(a){return 0===a?"0":a+"px"};d.prototype._findByComponent=function(a){var b=null,c;this._components.some(function(d){(c=d===a)&&(b=d);return c});return b};d.prototype._findById=function(a){var b=null,
c;this._components.some(function(d){(c=d.id===a)&&(b=d);return c});return b};d.prototype._findByNode=function(a){var b=null,c;this._components.some(function(d){(c=d.node===a)&&(b=d);return c});return b};k([a.property()],d.prototype,"container",null);k([a.property({dependsOn:["view.height"]})],d.prototype,"height",null);k([a.property({value:r})],d.prototype,"padding",null);k([a.cast("padding")],d.prototype,"castPadding",null);k([a.property()],d.prototype,"view",void 0);k([a.property({dependsOn:["view.width"]})],
d.prototype,"width",null);return d=k([a.subclass("esri.views.ui.UI")],d)}(a.declared(d,g))})},"esri/widgets/Attribution":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Attribution/nls/Attribution ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./Attribution/AttributionViewModel ./support/widget".split(" "),function(p,c,n,l,k,d,h,g,f,b){return function(a){function c(b){b=a.call(this)||this;b._isOpen=!1;b._attributionTextOverflowed=
!1;b._prevSourceNodeHeight=0;b.iconClass="esri-icon-description";b.itemDelimiter=" | ";b.label=k.widgetLabel;b.view=null;b.viewModel=new f;return b}n(c,a);c.prototype.postInitialize=function(){var a=this;this.own(d.on(this,"viewModel.items","change",function(){return a.scheduleRender()}))};Object.defineProperty(c.prototype,"attributionText",{get:function(){return this.viewModel.items.reduce(function(a,b){-1===a.indexOf(b.text)&&a.push(b.text);return a},[]).join(this.itemDelimiter)},enumerable:!0,
configurable:!0});c.prototype.render=function(){var a,c=(a={},a["esri-attribution--open"]=this._isOpen,a);return b.tsx("div",{bind:this,class:this.classes("esri-attribution esri-widget",c),onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),b.tsx("div",{class:"esri-attribution__powered-by"},"Powered by"," ",b.tsx("a",{target:"_blank",href:"http://www.esri.com/",class:this.classes("esri-attribution__link","esri-widget__anchor")},"Esri")))};c.prototype._renderSourcesNode=
function(){var a,c=this._isOpen,d=this._isInteractive(),e=d?0:-1,f=this.attributionText,g=d?"button":void 0,c=(a={},a["esri-attribution__sources--open"]=c,a["esri-interactive"]=d,a);return b.tsx("div",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:this.classes("esri-attribution__sources",c),innerHTML:f,role:g,tabIndex:e})};c.prototype._afterSourcesNodeCreate=function(a){this._prevSourceNodeHeight=a.clientWidth};c.prototype._afterSourcesNodeUpdate=
function(a){var b=!1,c=a.clientHeight;a=a.scrollWidth>=a.clientWidth;var d=this._attributionTextOverflowed!==a;this._attributionTextOverflowed=a;d&&(b=!0);this._isOpen&&(a=c<this._prevSourceNodeHeight,this._prevSourceNodeHeight=c,a&&(this._isOpen=!1,b=!0));b&&this.scheduleRender()};c.prototype._toggleState=function(){this._isInteractive()&&(this._isOpen=!this._isOpen)};c.prototype._isInteractive=function(){return this._isOpen||this._attributionTextOverflowed};l([h.property({dependsOn:["viewModel.items.length",
"itemDelimiter"],readOnly:!0}),b.renderable()],c.prototype,"attributionText",null);l([h.property()],c.prototype,"iconClass",void 0);l([h.property(),b.renderable()],c.prototype,"itemDelimiter",void 0);l([h.property()],c.prototype,"label",void 0);l([h.aliasOf("viewModel.view")],c.prototype,"view",void 0);l([h.property({type:f}),b.renderable(["state","view.size"])],c.prototype,"viewModel",void 0);l([b.accessibleHandler()],c.prototype,"_toggleState",null);return c=l([h.subclass("esri.widgets.Attribution")],
c)}(h.declared(g))})},"esri/widgets/Attribution/AttributionViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/awaiterHelper ../../core/tsSupport/generatorHelper ../../geometry ../../core/arrayUtils ../../core/Collection ../../core/HandleOwner ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/support/contains ../../geometry/support/webMercatorUtils".split(" "),function(p,c,n,l,k,d,
h,g,f,b,a,e,m,q){function u(a,b){return a.length!==b.length||a.some(function(a,c){return a.text!==b[c].text})}function t(a,b,c){c&&b&&(g.find(a,function(a){return a.layerView===b&&a.text===c})||a.push({text:c,layerView:b}))}var r=[];return function(b){function c(c){var d=b.call(this,c)||this;d.clear=function(){d._fetchedAttributionData.clear();d._pendingAttributions.clear();d.handles.remove("suspension")};d._pendingAttributions=new Set;d._fetchedAttributionData=new Map;d.items=new f;d.view=null;d._allLayerViewsChange=
function(a){d.handles.remove("suspension");var b=d.get("view.allLayerViews");b&&d.handles.add(b.map(function(a){return a.watch(["suspended","attributionVisible"],d._updateAttributionItems)}),"suspension");a&&a.removed&&a.removed.forEach(function(a){d._pendingAttributions.delete(a);d._fetchedAttributionData.delete(a)});d._updateAttributionItems()};d._updateAttributionItems=function(){var a=d.get("view.allLayerViews");r.length=0;a?(a.forEach(function(a){if(!a.suspended&&a.get("layer.attributionVisible")){var b=
a.layer;if(b&&"function"===typeof b.originOf&&"user"===b.originOf("copyright"))t(r,a,b.copyright);else if(b.hasAttributionData)if(d._fetchedAttributionData.has(a)){var c=d._fetchedAttributionData.get(a);c&&t(r,a,d._getDynamicAttribution(c,d.view,b))}else d._fetchAttributionData(a);else(c=b.get("portalItem.accessInformation"))?t(r,a,c):t(r,a,b.copyright)}}),u(d.items,r)&&(d.items.removeAll(),d.items.addMany(r))):d.clear()};d.handles.add([a.on(d,"view.allLayerViews","change",d._allLayerViewsChange,
d._allLayerViewsChange,d.clear),a.whenTrue(d,"view.stationary",function(){return d._updateAttributionItems()})]);return d}n(c,b);c.prototype.destroy=function(){this.view=null;this._fetchedAttributionData.clear();this._pendingAttributions.clear()};Object.defineProperty(c.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0});c.prototype._fetchAttributionData=function(a){return k(this,void 0,void 0,function(){var b,c;return d(this,function(d){switch(d.label){case 0:if(this._pendingAttributions.has(a))return[2];
this._pendingAttributions.add(a);b=null;d.label=1;case 1:return d.trys.push([1,3,,4]),[4,a.layer.fetchAttributionData()];case 2:return c=d.sent(),b=this._createContributionIndex(c,"bing-maps"===a.layer.type),[3,4];case 3:return d.sent(),[3,4];case 4:return this._pendingAttributions.has(a)&&(this._pendingAttributions.delete(a),this._fetchedAttributionData.set(a,b)),this._updateAttributionItems(),[2]}})})};c.prototype._createContributionIndex=function(a,b){a=a.contributors;var c={};if(!a)return c;for(var d=
0;d<a.length;d++){var e=a[d],f=e.coverageAreas;if(!f)return;for(var g=0;g<f.length;g++)for(var k=f[g],m=k.bbox,l=k.zoomMin-(b&&k.zoomMin?1:0),n=k.zoomMax-(b&&k.zoomMax?1:0),k={extent:q.geographicToWebMercator({xmin:m[1],ymin:m[0],xmax:m[3],ymax:m[2],spatialReference:h.SpatialReference.WGS84}),attribution:e.attribution||"",score:null!=k.score?k.score:100,id:d};l<=n;l++)c[l]=c[l]||[],c[l].push(k)}c.maxKey=Math.max.apply(null,Object.keys(c));return c};c.prototype._getDynamicAttribution=function(a,b,
c){var d=b.extent;c=c.tileInfo.scaleToZoom(b.scale);c=Math.min(a.maxKey,Math.round(c));if(!d||null==c||-1>=c)return"";a=a[c];var e=q.project(d.center.clone().normalize(),b.spatialReference),f={};return a?a.filter(function(a){var b=!f[a.id]&&e&&m.extentContainsPoint(a.extent,e);b&&(f[a.id]=!0);return b}).sort(function(a,b){return b.score-a.score||a.objectId-b.objectId}).map(function(a){return a.attribution}).join(", "):""};l([e.property({readOnly:!0,type:f})],c.prototype,"items",void 0);l([e.property({dependsOn:["view.ready"],
readOnly:!0})],c.prototype,"state",null);l([e.property()],c.prototype,"view",void 0);return c=l([e.subclass("esri.widgets.Attribution.AttributionViewModel")],c)}(e.declared(b))})},"esri/widgets/Compass":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Compass/nls/Compass ../core/accessorSupport/decorators ./Widget ./Compass/CompassViewModel ./support/widget".split(" "),function(p,c,n,l,k,d,h,g,f){return function(b){function a(a){a=
b.call(this)||this;a.goToOverride=null;a.iconClass="esri-icon-locate-circled";a.label=k.widgetLabel;a.view=null;a.viewModel=new g;return a}n(a,b);a.prototype.reset=function(){};a.prototype.render=function(){var a,b,c=this.viewModel,d=c.orientation,c=c.state,g="disabled"===c,h="compass"===("rotation"===c?"rotation":"compass"),c=g?-1:0,g=(a={},a["esri-disabled"]=g,a["esri-interactive"]=!g,a);a=(b={},b["esri-icon-compass"]=h,b["esri-icon-dial"]=!h,b);return f.tsx("div",{bind:this,class:this.classes("esri-compass esri-widget--button esri-widget",
g),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:c,"aria-label":k.reset,title:k.reset},f.tsx("span",{"aria-hidden":"true",class:this.classes("esri-compass__icon",a),styles:this._toRotationTransform(d)}),f.tsx("span",{class:"esri-icon-font-fallback-text"},k.reset))};a.prototype._reset=function(){this.viewModel.reset()};a.prototype._toRotationTransform=function(a){return{transform:"rotateZ("+a.z+"deg)"}};l([d.aliasOf("viewModel.goToOverride")],a.prototype,"goToOverride",void 0);l([d.property()],
a.prototype,"iconClass",void 0);l([d.property()],a.prototype,"label",void 0);l([d.aliasOf("viewModel.view")],a.prototype,"view",void 0);l([d.property({type:g}),f.renderable(["viewModel.orientation","viewModel.state"])],a.prototype,"viewModel",void 0);l([d.aliasOf("viewModel.reset")],a.prototype,"reset",null);l([f.accessibleHandler()],a.prototype,"_reset",null);return a=l([d.subclass("esri.widgets.Compass")],a)}(d.declared(h))})},"esri/widgets/Compass/CompassViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ../support/GoTo".split(" "),
function(p,c,n,l,k,d,h,g,f){return function(b){function a(a){a=b.call(this,a)||this;a._handles=new d;a.orientation={x:0,y:0,z:0};a.view=null;a._updateForCamera=a._updateForCamera.bind(a);a._updateForRotation=a._updateForRotation.bind(a);a._updateRotationWatcher=a._updateRotationWatcher.bind(a);return a}n(a,b);a.prototype.initialize=function(){this._handles.add(h.init(this,"view",this._updateRotationWatcher))};a.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(a.prototype,
"canShowNorth",{get:function(){var a=this.get("view.spatialReference");return!(!a||!a.isWebMercator&&!a.isGeographic)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"state",{get:function(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"},enumerable:!0,configurable:!0});a.prototype.reset=function(){if(this.get("view.ready")){var a={};"2d"===this.view.type?a.rotation=0:a.heading=0;this.callGoTo({target:a})}};a.prototype._updateForRotation=function(a){void 0!==
a&&null!==a&&(this.orientation={z:a})};a.prototype._updateForCamera=function(a){a&&(this.orientation={x:0,y:0,z:-a.heading})};a.prototype._updateRotationWatcher=function(a){this._handles.removeAll();a&&("2d"===a.type?this._handles.add(h.init(this,"view.rotation",this._updateForRotation)):this._handles.add(h.init(this,"view.camera",this._updateForCamera)))};l([g.property({dependsOn:["view.spatialReference.isWebMercator","view.spatialReference.wkid"],readOnly:!0})],a.prototype,"canShowNorth",null);
l([g.property()],a.prototype,"orientation",void 0);l([g.property({dependsOn:["view.ready","canShowNorth"],readOnly:!0})],a.prototype,"state",null);l([g.property()],a.prototype,"view",void 0);l([g.property()],a.prototype,"reset",null);return a=l([g.subclass("esri.widgets.CompassViewModel")],a)}(g.declared(k,f))})},"esri/widgets/NavigationToggle":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./NavigationToggle/nls/NavigationToggle ../core/accessorSupport/decorators ./Widget ./NavigationToggle/NavigationToggleViewModel ./support/widget".split(" "),
function(p,c,n,l,k,d,h,g,f){return function(b){function a(a){a=b.call(this)||this;a.iconClass="esri-icon-pan2";a.label=k.widgetLabel;a.view=null;a.viewModel=new g;return a}n(a,b);Object.defineProperty(a.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!0,configurable:!0});a.prototype.toggle=function(){};a.prototype.render=function(){var a,b,c,d="disabled"===this.get("viewModel.state"),g="pan"===this.get("viewModel.navigationMode"),h=(a={},a["esri-disabled"]=
d,a["esri-navigation-toggle--horizontal"]="horizontal"===this.layout,a);a=(b={},b["esri-navigation-toggle__button--active"]=g,b);b=(c={},c["esri-navigation-toggle__button--active"]=!g,c);c=d?-1:0;return f.tsx("div",{bind:this,class:this.classes("esri-navigation-toggle esri-widget",h),onclick:this._toggle,onkeydown:this._toggle,tabIndex:c,"aria-label":k.toggle,title:k.toggle},f.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button","esri-navigation-toggle__button--pan",
a)},f.tsx("span",{class:"esri-icon-pan"})),f.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button","esri-navigation-toggle__button--rotate",b)},f.tsx("span",{class:"esri-icon-rotate"})))};a.prototype._toggle=function(){this.toggle()};l([d.property()],a.prototype,"iconClass",void 0);l([d.property()],a.prototype,"label",void 0);l([d.property({value:"vertical"}),f.renderable()],a.prototype,"layout",null);l([d.aliasOf("viewModel.view"),f.renderable()],a.prototype,"view",void 0);
l([d.property({type:g}),f.renderable(["viewModel.state","viewModel.navigationMode"])],a.prototype,"viewModel",void 0);l([d.aliasOf("viewModel.toggle")],a.prototype,"toggle",null);l([f.accessibleHandler()],a.prototype,"_toggle",null);return a=l([d.subclass("esri.widgets.NavigationToggle")],a)}(d.declared(h))})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators".split(" "),
function(p,c,n,l,k,d,h,g){return function(c){function b(a){a=c.call(this,a)||this;a._handles=new d;a.navigationMode="pan";a.view=null;a.toggle=a.toggle.bind(a);return a}n(b,c);b.prototype.initialize=function(){this._handles.add(h.when(this,"view.inputManager",this._setNavigationMode.bind(this)))};b.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(b.prototype,"state",{get:function(){return this.get("view.ready")&&"3d"===this.view.type?"ready":
"disabled"},enumerable:!0,configurable:!0});b.prototype.toggle=function(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())};b.prototype._setNavigationMode=function(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"};l([g.property({dependsOn:["view.ready"],readOnly:!0})],b.prototype,"state",null);l([g.property()],b.prototype,"navigationMode",void 0);l([g.property()],b.prototype,"view",void 0);
l([g.property()],b.prototype,"toggle",null);return b=l([g.subclass("esri.widgets.NavigationToggleViewModel")],b)}(g.declared(k))})},"esri/widgets/Zoom":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Zoom/nls/Zoom ../core/accessorSupport/decorators ./Widget ./Zoom/IconButton ./Zoom/ZoomViewModel ./support/widget".split(" "),function(p,c,n,l,k,d,h,g,f,b){return function(a){function c(b){b=a.call(this)||this;b.iconClass="esri-icon-zoom-in-magnifying-glass";
b.label=k.widgetLabel;b.view=null;b.viewModel=new f;return b}n(c,a);c.prototype.postInitialize=function(){this._zoomInButton=new g({action:this.zoomIn,iconClass:"esri-icon-plus",title:k.zoomIn});this._zoomOutButton=new g({action:this.zoomOut,iconClass:"esri-icon-minus",title:k.zoomOut})};Object.defineProperty(c.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!0,configurable:!0});c.prototype.render=function(){var a,c=this.viewModel,d=(a={},a["esri-zoom--horizontal"]=
"horizontal"===this.layout,a);this._zoomInButton.enabled="ready"===c.state&&c.canZoomIn;this._zoomOutButton.enabled="ready"===c.state&&c.canZoomOut;return b.tsx("div",{class:this.classes("esri-zoom esri-widget",d)},this._zoomInButton.render(),this._zoomOutButton.render())};c.prototype.zoomIn=function(){};c.prototype.zoomOut=function(){};l([d.property()],c.prototype,"iconClass",void 0);l([d.property()],c.prototype,"label",void 0);l([d.property({value:"vertical"}),b.renderable()],c.prototype,"layout",
null);l([d.aliasOf("viewModel.view"),b.renderable()],c.prototype,"view",void 0);l([d.property({type:f}),b.renderable(["viewModel.canZoomIn","viewModel.canZoomOut","viewModel.state"])],c.prototype,"viewModel",void 0);l([d.aliasOf("viewModel.zoomIn")],c.prototype,"zoomIn",null);l([d.aliasOf("viewModel.zoomOut")],c.prototype,"zoomOut",null);return c=l([d.subclass("esri.widgets.Zoom")],c)}(d.declared(h))})},"esri/widgets/Zoom/IconButton":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../Widget ../support/widget".split(" "),
function(p,c,n,l,k,d,h){return function(c){function d(){var b=null!==c&&c.apply(this,arguments)||this;b.enabled=!0;b.iconClass="";b.title="";return b}n(d,c);d.prototype.render=function(){var b,a,c=this.enabled?0:-1,d=(b={},b["esri-disabled"]=!this.enabled,b["esri-interactive"]=this.enabled,b);b=(a={},a[this.iconClass]=!!this.iconClass,a);return h.tsx("div",{bind:this,class:this.classes("esri-widget--button esri-widget",d),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:c,
title:this.title},h.tsx("span",{"aria-hidden":"true",role:"presentation",class:this.classes("esri-icon",b)}),h.tsx("span",{class:"esri-icon-font-fallback-text"},this.title))};d.prototype._triggerAction=function(){this.action.call(this)};l([k.property()],d.prototype,"action",void 0);l([k.property(),h.renderable()],d.prototype,"enabled",void 0);l([k.property(),h.renderable()],d.prototype,"iconClass",void 0);l([k.property(),h.renderable()],d.prototype,"title",void 0);l([h.accessibleHandler()],d.prototype,
"_triggerAction",null);return d=l([k.subclass("esri.widgets.IconButton")],d)}(k.declared(d))})},"esri/widgets/Zoom/ZoomViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ./ZoomConditions2D ./ZoomConditions3D".split(" "),function(p,c,n,l,k,d,h,g){return function(c){function b(a){a=c.call(this,a)||this;a.canZoomIn=!1;a.canZoomOut=!1;a.zoomIn=a.zoomIn.bind(a);a.zoomOut=a.zoomOut.bind(a);
return a}n(b,c);b.prototype.destroy=function(){this.view=null};Object.defineProperty(b.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"view",{set:function(a){a?"2d"===a.type?this._zoomConditions=new h({view:a}):"3d"===a.type&&(this._zoomConditions=new g({view:a})):this._zoomConditions=null;this._set("view",a)},enumerable:!0,configurable:!0});b.prototype.zoomIn=function(){if(this.canZoomIn){var a=
this.view;"2d"===a.type?a.mapViewNavigation.zoomIn():a.goTo({zoomFactor:2})}};b.prototype.zoomOut=function(){if(this.canZoomOut){var a=this.view;"2d"===a.type?a.mapViewNavigation.zoomOut():a.goTo({zoomFactor:.5})}};l([d.property()],b.prototype,"_zoomConditions",void 0);l([d.property({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],b.prototype,"canZoomIn",void 0);l([d.property({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],b.prototype,"canZoomOut",void 0);l([d.property({dependsOn:["view.ready"],
readOnly:!0})],b.prototype,"state",null);l([d.property()],b.prototype,"view",null);l([d.property()],b.prototype,"zoomIn",null);l([d.property()],b.prototype,"zoomOut",null);return b=l([d.subclass("esri.widgets.Zoom.ZoomViewModel")],b)}(d.declared(k))})},"esri/widgets/Zoom/ZoomConditions2D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(p,c,n,l,k,d){return function(c){function g(){return null!==
c&&c.apply(this,arguments)||this}n(g,c);Object.defineProperty(g.prototype,"canZoomIn",{get:function(){if(!this.get("view.ready"))return!1;var c=this.get("view.animation.target.scale")||this.get("view.scale"),b=this.get("view.constraints.effectiveMaxScale");return 0===b||c>b},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"canZoomOut",{get:function(){if(!this.get("view.ready"))return!1;var c=this.get("view.animation.target.scale")||this.get("view.scale"),b=this.get("view.constraints.effectiveMinScale");
return 0===b||c<b},enumerable:!0,configurable:!0});l([d.property({dependsOn:["view.ready","view.scale","view.animation.target.scale","view.constraints.effectiveMaxScale"],readOnly:!0})],g.prototype,"canZoomIn",null);l([d.property({dependsOn:["view.ready","view.scale","view.animation.target.scale","view.constraints.effectiveMinScale"],readOnly:!0})],g.prototype,"canZoomOut",null);l([d.property()],g.prototype,"view",void 0);return g=l([d.subclass("esri.widgets.Zoom.ZoomConditions2D")],g)}(d.declared(k))})},
"esri/widgets/Zoom/ZoomConditions3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(p,c,n,l,k,d){return function(c){function g(){return null!==c&&c.apply(this,arguments)||this}n(g,c);Object.defineProperty(g.prototype,"canZoomIn",{get:function(){return!!this.get("view.ready")},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"canZoomOut",
{get:function(){return!!this.get("view.ready")},enumerable:!0,configurable:!0});l([d.property({dependsOn:["view.ready"],readOnly:!0})],g.prototype,"canZoomIn",null);l([d.property({dependsOn:["view.ready"],readOnly:!0})],g.prototype,"canZoomOut",null);l([d.property()],g.prototype,"view",void 0);return g=l([d.subclass("esri.widgets.Zoom.ZoomConditions3D")],g)}(d.declared(k))})},"jimu/DataManager":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","./WidgetManager"],function(p,c,
n,l){var k=null,d;d=p(null,{constructor:function(){n.subscribe("publishData",c.hitch(this,this.onDataPublished));n.subscribe("fetchData",c.hitch(this,this.onFetchData));n.subscribe("clearAllData",c.hitch(this,this.onClearAllData));n.subscribe("removeData",c.hitch(this,this.onRemoveData));n.subscribe("clearDataHistory",c.hitch(this,this.onClearDataHistory));this.widgetManager=l.getInstance()},_dataStore:{},onDataPublished:function(c,d,f,b){"undefined"===typeof b&&(b=!1);this._dataStore[d]?(this._dataStore[d].current=
f,b&&(this._dataStore[d].history?this._dataStore[d].history.push(f):this._dataStore[d].history=[f])):(this._dataStore[d]={current:f},b&&(this._dataStore[d].history=[f]))},onFetchData:function(c){var d;if(c)"framework"===c?this._dataStore[c]?n.publish("dataFetched","framework","framework",this._dataStore[c].current,this._dataStore[c].history):n.publish("noData","framework","framework"):(d=this.widgetManager.getWidgetById(c))?this._dataStore[c]?n.publish("dataFetched",d.name,c,this._dataStore[c].current,
this._dataStore[c].history):n.publish("noData",d.name,c):n.publish("noData",void 0,c);else for(var f in this._dataStore)(d=this.widgetManager.getWidgetById(f))&&n.publish("dataFetched",d.name,f,this._dataStore[f].current,this._dataStore[f].history)},onClearAllData:function(){this._dataStore={};n.publish("allDataCleared")},onRemoveData:function(c){delete this._dataStore[c];n.publish("dataRemoved",c)},onClearDataHistory:function(c){this._dataStore[c]&&(this._dataStore[c].history=[]);n.publish("dataHistoryCleared",
c)}});d.getInstance=function(){null===k&&(k=new d);return k};return d})},"jimu/BaseWidget":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/topic dijit/_WidgetBase dijit/_TemplatedMixin jimu/utils ./PanelManager".split(" "),function(p,c,n,l,k,d,h,g,f){return p([d,h],{type:"widget",id:void 0,label:void 0,icon:void 0,uri:void 0,position:{},config:void 0,openAtStart:!1,sceneView:null,appConfig:null,folderUrl:null,state:"closed",windowState:"normal",started:!1,
name:"",baseClass:null,templateString:"\x3cdiv\x3e\x3c/div\x3e",moveTopOnActive:!0,constructor:function(){this.listenWidgetNames=[];this.listenWidgetIds=[];this.own(k.subscribe("publishData",c.hitch(this,this._onReceiveData)));this.own(k.subscribe("dataFetched",c.hitch(this,this._onReceiveData)));this.own(k.subscribe("noData",c.hitch(this,this._onNoData)))},startup:function(){this.inherited(arguments);this.started=!0},onOpen:function(){},onClose:function(){},onNormalize:function(){},onMinimize:function(){},
onMaximize:function(){},onActive:function(){},onDeActive:function(){},onSignIn:function(b){},onSignOut:function(){},onPositionChange:function(b){this.setPosition(b)},setPosition:function(b,a){this.position=b;var c=g.getPositionStyle(this.position);c.position="absolute";a||(a="map"===b.relativeTo?this.sceneView.map.id:window.jimuConfig.layoutId);l.place(this.domNode,a);l.setStyle(this.domNode,c);this.started&&this.resize()},getPosition:function(){return this.position},getMarginBox:function(){return l.getMarginBox(this.domNode)},
setState:function(b){this.state=b},setWindowState:function(b){this.windowState=b},resize:function(){},onConfigChanged:function(b){},onAppConfigChanged:function(b,a,c){},onAction:function(b,a){},getPanel:function(){if(!1===this.inPanel)return null;if("widgetOnScreen"===this.gid||"widgetPool"===this.gid)return f.getInstance().getPanelById(this.id+"_panel");var b=f.getInstance().getPanelById(this.gid+"_panel");return b?b:f.getInstance().getPanelById(this.id+"_panel")},publishData:function(b,a){"undefined"===
typeof a&&(a=!1);k.publish("publishData",this.name,this.id,b,a)},fetchData:function(b){b?k.publish("fetchData",b):0!==this.listenWidgetIds.length?n.forEach(this.listenWidgetIds,function(a){k.publish("fetchData",a)},this):k.publish("fetchData")},fetchDataByName:function(b){b=this.widgetManager.getWidgetsByName(b);n.forEach(b,function(a){this.fetchData(a.id)},this)},openWidgetById:function(b){return this.widgetManager.triggerWidgetOpen(b)},_onReceiveData:function(b,a,c,d){if(a!==this.id&&!(0!==this.listenWidgetIds.length&&
0>this.listenWidgetIds.indexOf(a)))this.onReceiveData(b,a,c,d)},onReceiveData:function(b,a,c,d){},_onNoData:function(b,a){if(!(0!==this.listenWidgetIds.length&&0>this.listenWidgetIds.indexOf(a)))this.onNoData(b,a)},onNoData:function(b,a){}})})},"jimu/PanelManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/fx dojo/Deferred dojo/promise/all dojo/on dojo/topic dojo/when require ./utils ./WidgetManager".split(" "),function(p,c,n,l,k,d,h,g,f,b,a,
e,m){var q,u=null;q=p(null,{constructor:function(){this.panels=[];this.widgetManager=m.getInstance();g(window,"resize",c.hitch(this,this.onWindowResize));this.activePanel=null;f.subscribe("/dnd/move/start",c.hitch(this,this._onMoveStart));f.subscribe("widgetActived",c.hitch(this,this._onWidgetActived))},showPanel:function(a){var b=new d,f=this.getPanelById(a.id+"_panel");f?("closed"===f.state&&this.openPanel(f),b.resolve(f)):h({Panel:this._loadPanelClass(a.panel.uri),nls:this._loadThemeI18N(a.panel.uri)}).then(c.hitch(this,
function(d){var f=a.id+"_panel",h=this.getPanelById(f),k={label:a.label,config:a,uri:a.panel.uri,position:a.panel.position,sceneView:this.sceneView,widgetManager:this.widgetManager,panelManager:this,id:f,gid:a.gid,nls:d.nls};c.mixin(k,a.panel.options);try{h=new d.Panel(k),console.log("panel ["+f+"] created.")}catch(A){console.log("create panel error: "+A+", panelId: "+f);b.reject(A);return}h.setPosition(a.panel.position);e.setVerticalCenter(h.domNode);this.openPanel(h);this.panels.push(h);g(h.domNode,
"click",c.hitch(this,this._onPanelClick,h));b.resolve(h)}));return b},setSceneView:function(a){this.sceneView=a;g(this.sceneView,"resize",c.hitch(this,this.onMapResize))},closeOtherPanelsInTheSameGroup:function(a){if("string"===typeof a&&(a=this.getPanelById(a),!a))return;for(var b=0;b<this.panels.length;b++)this.panels[b].gid===a.gid&&this.panels[b].id!==a.id&&this.closePanel(this.panels[b])},closeAllPanelsInGroup:function(a){for(var b=0;b<this.panels.length;b++)this.panels[b].gid===a&&this.closePanel(this.panels[b])},
openPanel:function(a){var b=new d;if("string"===typeof a&&(a=this.getPanelById(a),!a))return b.reject(),b;if(!a.started)try{a.started=!0,a.startup()}catch(x){console.error("fail to startup panel "+a.id+". "+x.stack)}if("opened"===a.state)return b.resolve(a),b;a.setState("opened");return this.playOpenPanelAnimation(a).then(c.hitch(this,function(){l.setStyle(a.domNode,"display","");a.onOpen();this._activePanel(a);return a}))},closePanel:function(a){var b=new d;return"string"===typeof a&&(a=this.getPanelById(a),
!a)||"closed"===a.state?(b.resolve(),b):this.playClosePanelAnimation(a).then(function(){this.activePanel&&this.activePanel.id===a.id&&(this.activePanel.onDeActive(),this.activePanel=null);a.setState("closed");a.onClose();a.domNode&&l.setStyle(a.domNode,"display","none")})},minimizePanel:function(a){if("string"===typeof a&&(a=this.getPanelById(a),!a))return;"closed"===a.state&&this.openPanel(a);a.setWindowState("minimized");try{a.onMinimize()}catch(r){console.log(console.error("fail to minimize panel "+
a.id+". "+r.stack))}},maximizePanel:function(a){if("string"===typeof a&&(a=this.getPanelById(a),!a))return;"closed"===a.state&&this.openPanel(a);a.setWindowState("maximized");try{a.onMaximize()}catch(r){console.log(console.error("fail to maximize panel "+a.id+". "+r.stack))}},normalizePanel:function(a){if("string"===typeof a&&(a=this.getPanelById(a),!a))return;"closed"===a.state&&this.openPanel(a);a.setWindowState("normal");try{a.onNormalize()}catch(r){console.log(console.error("fail to noralize panel "+
a.id+". "+r.stack))}},changeWindowStateTo:function(a,b){if("string"===typeof a&&(a=this.getPanelById(a),!a))return;"normal"===b?this.normalizePanel(a):"minimized"===b?this.minimizePanel(a):"maximized"===b?this.maximizePanel(a):console.log("error state: "+b)},getPanelById:function(a){for(var b=0;b<this.panels.length;b++)if(this.panels[b].id===a)return this.panels[b]},onWindowResize:function(){for(var a=0;a<this.panels.length;a++)"closed"!==this.panels[a].state&&"map"!==this.panels[a].position.relativeTo&&
this.panels[a].resize()},onMapResize:function(){for(var a=0;a<this.panels.length;a++)"closed"!==this.panels[a].state&&"map"===this.panels[a].position.relativeTo&&this.panels[a].resize()},destroyPanel:function(a){if("string"===typeof a&&(a=this.getPanelById(a),!a))return;if(a.domNode){"closed"!==a.state&&this.closePanel(a);this._removePanel(a);try{a.destroy()}catch(r){console.log(console.error("fail to destroy panel "+a.id+". "+r.stack))}}},destroyAllPanels:function(){var a=n.map(this.panels,function(a){return a.id});
n.forEach(a,function(a){this.destroyPanel(a)},this);this.panels=[]},playOpenPanelAnimation:function(a){if("string"===typeof a&&(a=this.getPanelById(a),!a)||!a.openAnimation||0===a.animationDuration)return b();var c=new d;"string"===typeof a.openAnimation?"fadeIn"===a.openAnimation?(l.setStyle(a.domNode,{opacity:0,display:""}),k.fadeIn({node:a.domNode,duration:a.animationDuration,onEnd:function(){c.resolve()}}).play()):c.resolve():c.resolve();return c},playClosePanelAnimation:function(a){if("string"===
typeof a&&(a=this.getPanelById(a),!a)||!a.closeAnimation||0===a.animationDuration)return b();var c=new d;"string"===typeof a.closeAnimation&&("fadeOut"===a.closeAnimation?k.fadeOut({node:a.domNode,duration:a.animationDuration,onEnd:function(){c.resolve()}}).play():c.resolve());return c},getPositionOnMobile:function(a){if("string"===typeof a&&(a=this.getPanelById(a),!a))return{};var b=l.getMarginBox(window.jimuConfig.layoutId),c=b.h/2;a.titleHeight||(a.titleHeight=35);return"maximized"===a.windowState?
{left:0,right:0,top:0,bottom:0,width:"auto",height:"auto",contentHeight:b.h-a.titleHeight,borderRadiusStyle:{borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomLeftRadius:0,borderBottomRightRadius:0}}:"minimized"===a.windowState?b.h>b.w?{left:0,right:0,top:"auto",bottom:0,width:"auto",height:a.titleHeight,contentHeight:0,borderRadiusStyle:{borderTopLeftRadius:"4px",borderTopRightRadius:"4px",borderBottomLeftRadius:0,borderBottomRightRadius:0}}:{left:b.w-b.w/2,right:0,top:"auto",bottom:0,width:b.w/
2,height:a.titleHeight,contentHeight:b.h,borderRadiusStyle:window.isRTL?{borderTopLeftRadius:0,borderTopRightRadius:"4px",borderBottomLeftRadius:0,borderBottomRightRadius:"4px"}:{borderTopLeftRadius:"4px",borderTopRightRadius:0,borderBottomLeftRadius:"4px",borderBottomRightRadius:0}}:b.h>b.w?{left:0,right:0,top:c,bottom:0,width:"auto",height:"auto",contentHeight:b.h-c-a.titleHeight,borderRadiusStyle:{borderTopLeftRadius:"4px",borderTopRightRadius:"4px",borderBottomLeftRadius:0,borderBottomRightRadius:0}}:
{left:b.w-b.w/2,right:0,top:0,bottom:0,width:b.w/2,height:"auto",contentHeight:b.h-c-a.titleHeight,borderRadiusStyle:window.isRTL?{borderTopLeftRadius:0,borderTopRightRadius:"4px",borderBottomLeftRadius:0,borderBottomRightRadius:"4px"}:{borderTopLeftRadius:"4px",borderTopRightRadius:0,borderBottomLeftRadius:"4px",borderBottomRightRadius:0}}},_onPanelClick:function(a){this._activePanel(a)},_activePanel:function(a){if(this.activePanel){if(this.activePanel.id===a.id){this.activePanel.moveTopOnActive&&
l.setStyle(this.activePanel.domNode,"zIndex",101);return}"active"===this.activePanel.state&&(this.activePanel.setState("opened"),l.setStyle(this.activePanel.domNode,"zIndex","undefined"!==typeof this.activePanel.position.zIndex?this.activePanel.position.zIndex:"auto"),this.activePanel.onDeActive())}var b=this.widgetManager.activeWidget;b&&"active"===b.state&&b.getPanel()!==a&&(b.setState("opened"),!1===b.inPanel&&l.setStyle(b.domNode,"zIndex","undefined"!==typeof b.position.zIndex?b.position.zIndex:
"auto"),b.onDeActive(),this.widgetManager.activeWidget=null);this.activePanel=a;"active"!==this.activePanel.state&&(this.activePanel.setState("active"),this.activePanel.moveTopOnActive&&l.setStyle(this.activePanel.domNode,"zIndex",101),this.activePanel.onActive())},_removePanel:function(a){var b=this.panels.indexOf(a);-1<b&&this.panels.splice(b,1);this.activePanel&&this.activePanel.id===a.id&&(this.activePanel=null)},_onMoveStart:function(a){n.forEach(this.panels,function(b){b.domNode===a.node&&this._activePanel(b)},
this)},_onWidgetActived:function(a){this.activePanel&&"active"===this.activePanel.state&&a.getPanel()!==this.activePanel&&(this.activePanel.setState("opened"),l.setStyle(this.activePanel.domNode,"zIndex","undefined"!==typeof this.activePanel.position.zIndex?this.activePanel.position.zIndex:"auto"),this.activePanel.onDeActive(),this.activePanel=null)},_loadPanelClass:function(b){var c=new d;a([b],function(a){c.resolve(a)});return c},_loadThemeI18N:function(b){var c=new d;b.startWith("themes")?(b=b.split("/"),
a(["dojo/i18n!"+(b[0]+"/"+b[1]+"/nls/strings")],function(a){c.resolve(a)})):c.resolve({});return c}});q.getInstance=function(){null===u&&(u=new q,window._panelManager=u);return u};return q})},"jimu/BaseWidgetFrame":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/html","dijit/_WidgetBase"],function(p,c,n,l){return p([l],{widget:null,baseClass:"jimu-widget-frame jimu-container",postCreate:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);
this.widget&&this.setWidget(this.widget)},startup:function(){this.inherited(arguments);this.widget&&this.widget.startup()},resize:function(){this.widget&&"closed"!==this.widget.state&&c.isFunction(this.widget.resize)&&this.widget.resize()},setLoading:function(c){this.loading=c;this.loading.placeAt(this.containerNode)},getWidget:function(){return this.widget},setWidget:function(c){this.widget=c;this.loading&&this.loading.destroy();n.place(c.domNode,this.containerNode);this.resize()},destroy:function(){if(this.widget&&
this.widget.domNode)try{this.widget.destroy()}catch(k){console.error("destroy widget error. widget: ["+this.widget.uri+"], "+k.stack)}this.loading&&this.loading.domNode&&this.loading.destroy()}})})},"jimu/BaseWidgetPanel":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dijit/_WidgetBase dijit/_Container ./dijit/LoadingIndicator ./BaseWidgetFrame ./utils".split(" "),function(p,c,n,l,k,d,h,g,f){return p([k,d],{baseClass:"jimu-panel jimu-container",started:!1,state:"closed",
windowState:"normal",moveTopOnActive:!0,openAnimation:null,closeAnimation:null,animationDuration:0,startup:function(){this.inherited(arguments);this.loadAllWidgetsInOrder();this.started=!0},loadAllWidgetsInOrder:function(){var b=this.getAllWidgetConfigs(),b=Array.isArray(this.config.widgets)?this.config.widgets:[this.config];n.forEach(b,function(a){var b,d;!1!==a.visible&&(d=new h,b=this.createFrame(a),this.addChild(b),b.setLoading(d),this.widgetManager.loadWidget(a).then(c.hitch(this,function(a){b.setWidget(a);
a.startup()})))},this)},getAllWidgetConfigs:function(){var b=[];return b=Array.isArray(this.config.widgets)?this.config.widgets:[this.config]},getWidgetById:function(b){for(var a=this.getChildren(),c=0;c<a.length;c++)if(a[c].getWidget()&&a[c].getWidget().id===b)return a[c].getWidget()},createFrame:function(b){return new g},setPosition:function(b,a){this.position=b;var c=f.getPositionStyle(this.position);c.position="absolute";a||(a="map"===b.relativeTo?this.sceneView.map.id:window.jimuConfig.layoutId);
this.started?this.resize():this.openAnimation&&(c.display="none");l.place(this.domNode,a);l.setStyle(this.domNode,c)},getPosition:function(){return this.position},setState:function(b){this.state=b},setWindowState:function(b){this.windowState=b},resize:function(){this.getChildren().forEach(function(b){b.resize()})},onPositionChange:function(b){this.setPosition(b)},onOpen:function(){n.forEach(this.getChildren(),function(b){b.getWidget()&&this.widgetManager.openWidget(b.getWidget())},this)},onClose:function(){n.forEach(this.getChildren(),
function(b){b.getWidget()&&this.widgetManager.closeWidget(b.getWidget())},this)},onMaximize:function(){n.forEach(this.getChildren(),function(b){b.getWidget()&&this.widgetManager.maximizeWidget(b.getWidget())},this)},onMinimize:function(){n.forEach(this.getChildren(),function(b){b.getWidget()&&this.widgetManager.minimizeWidget(b.getWidget())},this)},onNormalize:function(){n.forEach(this.getChildren(),function(b){b.getWidget()&&this.widgetManager.normalizeWidget(b.getWidget())},this)},onActive:function(){},
onDeActive:function(){},updateConfig:function(b){this._updateConfig(b)},reloadWidget:function(b){this.isWidgetInPanel(b)&&(this._updateConfig(b),this.getChildren().forEach(function(a){a.getWidget()&&a.getWidget().id===b.id&&(a.getWidget().destroy(),a.setLoading(new h),this.widgetManager.loadWidget(b).then(c.hitch(this,function(b){a.setWidget(b);b.startup();"closed"===this.state&&this.widgetManager.closeWidget(b)})))},this))},isWidgetInPanel:function(b){return n.some(this.getAllWidgetConfigs(),function(a){if(b.id===
a.id)return!0})?!0:!1},_updateConfig:function(b){if(Array.isArray(this.config.widgets)){for(var a=-1,c=0;c<this.config.widgets.length;c++)this.config.widgets[c].id===b.id&&(a=c);0<a&&(this.config.widgets[a]=b)}else this.config=b},destroy:function(){this.getChildren().forEach(function(b){try{b.domNode&&b.destroy()}catch(a){console.error("destroy widget frame error."+a.stack)}});this.inherited(arguments)}})})},"jimu/dijit/LoadingIndicator":function(){define(["dojo/_base/declare","dijit/_WidgetBase",
"dojo/dom-style","dojo/dom-construct"],function(p,c,n,l){return p(c,{baseClass:"jimu-loading-indicator",declaredClass:"jimu.dijit.LoadingIndicator",hidden:!1,postCreate:function(){this.inherited(arguments);(this.hidden=!0===this.hidden)&&n.set(this.domNode,{display:"none"});n.set(this.domNode,{width:"100%",height:"100%"});l.place(' \x3cdiv class\x3d"loading-container"\x3e\x3cdiv data-dojo-attach-point\x3d"loadingNode" class\x3d"img-div"\x3e\x3c/div\x3e\x3c/div\x3e',this.domNode)},show:function(){this.domNode&&
n.set(this.domNode,"display","block")},hide:function(){this.domNode&&n.set(this.domNode,"display","none")}})})},"jimu/BaseWidgetSetting":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/on","dijit/_WidgetBase","dijit/_TemplatedMixin"],function(p,c,n,l,k){return p([l,k],{templateString:"\x3cdiv\x3e\x3c/div\x3e",postCreate:function(){this.own(n(window,"resize",c.hitch(this,this._onWindowResize)))},getConfig:function(){},resize:function(){},_onWindowResize:function(){this.resize()}})})},
"jimu/PoolControllerMixin":function(){define(["dojo/_base/declare","dojo/_base/array","jimu/PanelManager"],function(p,c,n){return p(null,{constructor:function(){this.panelManager=n.getInstance()},postCreate:function(){this.controlledWidgets||(this.controlledWidgets="all");this.controlledGroups||(this.controlledGroups="all")},getOpenedIds:function(){},setOpenedIds:function(c){},getConfigById:function(c){for(var k=this.getAllConfigs(),d=0;d<k.length;d++)if(k[d].id===c)return k[d]},getAllConfigs:function(){var l=
[],l=l.concat(this.getWidgetConfigs(),this.getGroupConfigs()),l=c.filter(l,function(c){return c.visible});return l.sort(function(c,d){return c.index-d.index})},getAllConfigsIncludeInvisible:function(){var c=[],c=c.concat(this.getWidgetConfigs(),this.getGroupConfigs());return c.sort(function(c,d){return c.index-d.index})},isControlled:function(l){return c.some(this.getAllConfigsIncludeInvisible(),function(c){return c.id===l})},widgetIsControlled:function(l){return c.some(this.getAllConfigsIncludeInvisible(),
function(k){return k.id===l?!0:c.some(k.widgets,function(c){return c.id===l})})},getGroupConfigs:function(){var l=[];if(!this.appConfig.widgetPool)return l;this.appConfig.widgetPool.groups&&c.forEach(this.appConfig.widgetPool.groups,function(c){this.controlledGroups&&(Array.isArray(this.controlledGroups)?-1<this.controlledGroups.indexOf(c.id)&&l.push(c):"all"===this.controlledGroups&&l.push(c))},this);return l},getWidgetConfigs:function(){var l=[];if(!this.appConfig.widgetPool)return l;this.appConfig.widgetPool.widgets&&
c.forEach(this.appConfig.widgetPool.widgets,function(c){this.controlledWidgets&&(Array.isArray(this.controlledWidgets)?-1<this.controlledWidgets.indexOf(c.id)&&l.push(c):"all"===this.controlledWidgets&&l.push(c))},this);return l}})})},"jimu/SpatialReference/utils":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred dojo/promise/all dojo/request esri/geometry/SpatialReference ./unitUtils".split(" "),function(p,c,n,l,k,d,h,g){var f=null,b=null,a=!1;p=p(null,function(){});
var e=require.toUrl("jimu"),m=d(e+"/SpatialReference/wkidDetails.json",{handleAs:"json"}),q=d(e+"/SpatialReference/transform.json",{handleAs:"json"});p.loadResource=function(){var c=new l;if(f&&b)return c.resolve(),c;k([m,q]).then(function(d){f=d[0];b=d[1];a=!0;c.resolve()},function(b){console.error(b);a=!1;c.reject(b)});return c};p.getAllCSUnits=function(){if(a){var b=[];n.forEach(f.wkids,c.hitch(this,function(a){a=this.getCSUnit(a);-1===n.indexOf(b,a)&&b.push(a)}));return b}};p.convertUnit=function(b,
c,d){if(a)return g.convertUnit(b,c,d)};p.getUnitRate=function(b,c){if(a)return g.getUnitRate(b,c)};p.isProjectUnit=function(b){if(a)return g.isProjectUnit(b)};p.isGeographicUnit=function(b){if(a)return g.isGeographicUnit(b)};p.getGeographicUnits=function(){if(a)return g.getGeographicUnits()};p.getProjectUnits=function(){if(a)return g.getProjectUnits()};p.getCSUnit=function(b){if(a){b=this.getCSStr(b);var c=0,d=0,c=b.lastIndexOf("UNIT"),d=b.indexOf(",",c);return b.slice(c+6,d-1)}};p.isSameSR=function(b,
c){if(a)return b=this.indexOfWkid(b),c=this.indexOfWkid(c),f.labels[b]===f.labels[c]};p.isValidWkid=function(b){if(a)return-1<this.indexOfWkid(b)};p.getSRLabel=function(b){if(a&&this.isValidWkid(b))return b=this.indexOfWkid(b),f.labels[b]};p.indexOfWkid=function(b){if(a)return n.indexOf(f.wkids,b)};p.isWebMercator=function(a){return h.prototype._isWebMercator?h.prototype._isWebMercator.apply({wkid:parseInt(a,10)},[]):(new h(parseInt(a,10))).isWebMercator};p.standardizeWkid=function(a){return this.isWebMercator(a)?
3857:parseInt(a,10)};p.isValidTfWkid=function(b){if(a)return-1<this.indexOfTfWkid(b)};p.getTransformationLabel=function(c){if(a)return this.isValidTfWkid(c)?(c=this.indexOfTfWkid(c),b.labels[c]):""};p.indexOfTfWkid=function(c){if(a)return n.indexOf(b.tfWkids,c)};p.isGeographicCS=function(b){if(a)return this.isValidWkid(b)?f.details[this.indexOfWkid(b)].startWith("GEOGCS"):!1};p.isProjectedCS=function(b){if(a)return this.isValidWkid(b)?f.details[this.indexOfWkid(b)].startWith("PROJCS"):!1};p.getGeoCSByProj=
function(b){if(a&&this.isProjectedCS(b))return b=this.getSpheroidStr(b),b=n.indexOf(f.details,b),f.wkids[b]};p.getSpheroidStr=function(b){if(a){if(this.isGeographicCS(b))return f.details[this.indexOfWkid(b)];if(this.isProjectedCS(b)){b=f.details[this.indexOfWkid(b)];var c=b.indexOf("GEOGCS"),d=b.indexOf("PROJECTION")-1;return b.slice(c,d)}return null}};p.getCSStr=function(b){if(a)return f.details[this.indexOfWkid(b)]};p.isSameSpheroid=function(b,c){if(a)return b=this.getSpheroidStr(b),c=this.getSpheroidStr(c),
b&&c&&b===c?!0:!1};return p})},"dojo/request":function(){define(["./request/default!"],function(p){return p})},"dojo/request/default":function(){define(["exports","require","../has"],function(p,c,n){var l=n("config-requestProvider"),k;if(n("host-browser")||n("host-webworker"))k="./xhr";l||(l=k);p.getPlatformDefaultId=function(){return k};p.load=function(d,h,g,f){c(["platform"==d?k:l],function(b){g(b)})}})},"jimu/SpatialReference/unitUtils":function(){define(["dojo/_base/declare","dojo/_base/array"],
function(p,c){var n="INCHES FOOT FOOT_US YARDS MILES NAUTICAL_MILES MILLIMETERS CENTIMETERS METER KILOMETERS DECIMETERS LINK_CLARKE FOOT_GOLD_COAST FOOT_CLARKE CHAIN_SEARS_1992_TRUNCATED YARD_INDIAN CHAIN_BENOIT_1895_B YARD_SEARS CHAIN_SEARS FOOT_SEARS YARD_INDIAN_1937 50_KILOMETERS 150_KILOMETERS".split(" "),l="DECIMAL_DEGREES DEGREE_MINUTE_SECONDS DEGREE GRAD MGRS USNG".split(" "),k={INCHES:.0254,FOOT:.3048,FOOT_US:.3048006096012192,YARDS:.9144,MILES:1609.344,NAUTICAL_MILES:1852,MILLIMETERS:.001,
CENTIMETERS:.01,METER:1,KILOMETERS:1E3,DECIMETERS:.1,LINK_CLARKE:.2011661949,FOOT_GOLD_COAST:.3047997101815088,FOOT_CLARKE:.304797265,CHAIN_SEARS_1922_TRUNCATED:20.116756,YARD_INDIAN:.9143985307444408,CHAIN_BENOIT_1895_B:20.11678249437587,YARD_SEARS:.9143984146160287,CHAIN_SEARS:20.11676512155263,FOOT_SEARS:.3047994715386762,YARD_INDIAN_1937:.91439523,"50_KILOMETERS":5E4,"150_KILOMETERS":15E4,DEGREE:.0174532925199433,DECIMAL_DEGREES:.0174532925199433,MGRS:.0174532925199433,USNG:.0174532925199433,
DEGREE_MINUTE_SECONDS:.0174532925199433,GRAD:.01570796326794897};p=p(null,function(){});p.convertUnit=function(c,h,g){return k[c.toUpperCase()]/k[h.toUpperCase()]*g};p.getUnitRate=function(c,h){return k[c.toUpperCase()]/k[h.toUpperCase()]};p.isProjectUnit=function(d){return-1<c.indexOf(n,d.toUpperCase())};p.isGeographicUnit=function(d){return-1<c.indexOf(l,d.toUpperCase())};p.getGeographicUnits=function(){return l};p.getProjectUnits=function(){return n};return p})},"jimu/OnScreenWidgetPanel":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/on dojo/dnd/move dijit/_TemplatedMixin jimu/BaseWidgetPanel jimu/utils dojox/layout/ResizeHandle dojo/touch".split(" "),
function(p,c,n,l,k,d,h,g,f){return p([h,d],{baseClass:"jimu-panel jimu-on-screen-widget-panel",_positionInfoBox:null,_originalBox:null,widgetIcon:null,_resizeOnOpen:!0,templateString:'\x3cdiv data-dojo-attach-point\x3d"boxNode"\x3e\x3cdiv class\x3d"jimu-panel-title jimu-main-background" data-dojo-attach-point\x3d"titleNode"\x3e\x3cdiv class\x3d"title-label jimu-vcenter-text jimu-float-leading jimu-leading-padding1"data-dojo-attach-point\x3d"titleLabelNode"\x3e${label}\x3c/div\x3e\x3cdiv class\x3d"close-btn jimu-vcenter jimu-float-trailing" data-dojo-attach-point\x3d"closeNode"data-dojo-attach-event\x3d"onclick:_onCloseBtnClicked,press:_onCloseBtnClicked"\x3e\x3c/div\x3e\x3cdiv class\x3d"max-btn jimu-vcenter jimu-float-trailing" data-dojo-attach-point\x3d"maxNode"data-dojo-attach-event\x3d"onclick:_onMaxBtnClicked"\x3e\x3c/div\x3e\x3cdiv class\x3d"foldable-btn jimu-vcenter jimu-float-trailing" data-dojo-attach-point\x3d"foldableNode"data-dojo-attach-event\x3d"onclick:_onFoldableBtnClicked"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"jimu-panel-content" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\x3c/div\x3e',
postCreate:function(){this._originalBox={w:400,h:410}},startup:function(){this.inherited(arguments);this._normalizePositionObj(this.position);this._makeOriginalBox();this.makePositionInfoBox();this.makeMoveable(this._positionInfoBox.w,.25*this._positionInfoBox.w)},_onMaxBtnClicked:function(b){b.stopPropagation();this._getPositionInfo().isRunInMobile&&("maximized"===this.windowState?this.panelManager.normalizePanel(this):this.panelManager.maximizePanel(this),this._setMobilePosition())},_onFoldableBtnClicked:function(b){b.stopPropagation();
this._getPositionInfo().isRunInMobile&&("minimized"===this.windowState?(n.removeClass(this.foldableNode,"fold-up"),n.addClass(this.foldableNode,"fold-down"),this.panelManager.normalizePanel(this)):(n.removeClass(this.foldableNode,"fold-down"),n.addClass(this.foldableNode,"fold-up"),this.panelManager.minimizePanel(this)),this._setMobilePosition())},_onCloseBtnClicked:function(b){this.panelManager.closePanel(this);b.stopPropagation()},_normalizePositionObj:function(b){var a=this._getLayoutBox();b.left=
isFinite(b.left)?b.left:a.w-b.right;b.top=isFinite(b.top)?b.top:a.h-b.bottom;delete b.right;delete b.bottom;this.position=c.mixin(c.clone(this.position),b)},makePositionInfoBox:function(){this._positionInfoBox={w:this.position.width||400,h:this.position.height||410,l:this.position.left||0,t:this.position.top||0}},_makeOriginalBox:function(){this._originalBox={w:this.position.width||400,h:this.position.height||410,l:this.position.left||0,t:this.position.top||0}},makeResizable:function(){this.disableResizable();
this.resizeHandle=(new f({targetId:this,minWidth:this._originalBox.w,minHeight:this._originalBox.h,activeResize:!1})).placeAt(this.domNode);this.resizeHandle.startup()},disableResizable:function(){this.resizeHandle&&(this.resizeHandle.destroy(),this.resizeHandle=null)},makeMoveable:function(b,a){this.disableMoveable();var d=n.getMarginBox(jimuConfig.layoutId);d.l=d.l-b+a;d.w+=2*(b-a);this.moveable=new k.boxConstrainedMoveable(this.domNode,{box:d,handle:this.titleNode,within:!0});this.own(l(this.moveable,
"Moving",c.hitch(this,this.onMoving)));this.own(l(this.moveable,"MoveStop",c.hitch(this,this.onMoveStop)))},disableMoveable:function(){this.moveable&&(this.moveable.destroy(),this.moveable=null)},createHandleNode:function(){return this.titleNode},onOpen:function(){this._resizeOnOpen&&(this.resize(),this._resizeOnOpen=!1);this.inherited(arguments)},_switchToMobileUI:function(){n.removeClass(this.titleNode,"title-normal");n.addClass(this.titleNode,"title-full");n.setStyle(this.foldableNode,"display",
"block");n.setStyle(this.maxNode,"display","block");"normal"===this.windowState?(n.removeClass(this.foldableNode,"fold-up"),n.addClass(this.foldableNode,"fold-down")):(n.removeClass(this.foldableNode,"fold-down"),n.addClass(this.foldableNode,"fold-up"))},_switchToDesktopUI:function(){n.removeClass(this.titleNode,"title-full");n.addClass(this.titleNode,"title-normal");n.setStyle(this.foldableNode,"display","none");n.setStyle(this.maxNode,"display","none")},resize:function(b){var a=this._getPositionInfo(),
d={left:a.position.left,top:a.position.top,width:this._positionInfoBox.w,height:this._positionInfoBox.h};b&&(b.t=this.domNode.offsetTop,d.left=isFinite(b.l)?b.l:d.left,d.top=isFinite(b.t)?b.t:d.top,d.width=isFinite(b.w)?b.w:d.width,d.height=isFinite(b.h)?b.h:d.height,this._normalizePositionObj(c.clone(d)),this.makePositionInfoBox(),d.width=this._positionInfoBox.w,d.height=this._positionInfoBox.h);a.position=d;this._onResponsible(a);this.inherited(arguments)},_onResponsible:function(b){b.isRunInMobile?
(this._setMobilePosition(),this.disableMoveable(),this.disableResizable(),this._switchToMobileUI()):(this._setDesktopPosition(b.position),this.makeResizable(),this.makeMoveable(this._positionInfoBox.w,.25*this._positionInfoBox.w),this._switchToDesktopUI())},setPosition:function(b){this._normalizePositionObj(b);this.makePositionInfoBox();b=this._getPositionInfo();this._onResponsible(b)},destroy:function(){this.widgetIcon=null;this.inherited(arguments)},_getLayoutBox:function(){var b=jimuConfig.layoutId,
b="map"===this.position.relativeTo?jimuConfig.mapId:jimuConfig.layoutId;return n.getMarginBox(b)},_getPositionInfo:function(){var b={isRunInMobile:!1,position:{left:0,top:5}},a=this._getLayoutBox(),c=this._positionInfoBox.l;if(window.appInfo.isRunInMobile)return b.isRunInMobile=!0,b;b.position.left=window.isRTL?a.w-c:c;var c=this._positionInfoBox.t,d=a.h-c;c>=d?c>=this._positionInfoBox.h&&(b.position.top=this._positionInfoBox.t-this._positionInfoBox.h-40-3):d>=this._positionInfoBox.h&&(b.position.top=
this._positionInfoBox.t+40+3);!b.isRunInMobile&&b.position.left+this._positionInfoBox.w>a.w&&(b.position.left-=this._positionInfoBox.w);return b},_setMobilePosition:function(){n.place(this.domNode,jimuConfig.layoutId);var b=this.panelManager.getPositionOnMobile(this);this.position.zIndex&&(b.zIndex=this.position.zIndex);var a=g.getPositionStyle(b);c.mixin(a,b.borderRadiusStyle);n.setStyle(this.domNode,a)},_setDesktopPosition:function(b){n.place(this.domNode,jimuConfig.mapId);n.setStyle(this.domNode,
{left:b.left+"px",right:"auto",top:b.top+"px",width:(b.width||this.position.width||this._originalBox.w)+"px",height:(b.height||this.position.height||this._originalBox.h)+"px"})},onMoving:function(b){n.setStyle(b.node,"opacity",.9)},onMoveStop:function(b){n.setStyle(b.node,"opacity",1);b=n.getMarginBox(b.node);this._normalizePositionObj(c.clone({left:b.l,top:b.t,width:b.w,height:b.h}));this.makePositionInfoBox()}})})},"dojox/layout/ResizeHandle":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/connect dojo/_base/array dojo/_base/event dojo/_base/fx dojo/_base/window dojo/fx dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/declare dojo/touch dijit/_base/manager dijit/_Widget dijit/_TemplatedMixin".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r){p.experimental("dojox.layout.ResizeHandle");var x=m("dojox.layout._ResizeHelper",t,{show:function(){e.set(this.domNode,"display","")},hide:function(){e.set(this.domNode,"display","none")},resize:function(b){a.setMarginBox(this.domNode,b)}});return m("dojox.layout.ResizeHandle",[t,r],{targetId:"",targetContainer:null,resizeAxis:"xy",activeResize:!1,activeResizeClass:"dojoxResizeHandleClone",animateSizing:!0,animateMethod:"chain",animateDuration:225,minHeight:100,
minWidth:100,constrainMax:!1,maxHeight:0,maxWidth:0,fixedAspect:!1,intermediateChanges:!1,startTopic:"/dojo/resize/start",endTopic:"/dojo/resize/stop",templateString:'\x3cdiv dojoAttachPoint\x3d"resizeHandle" class\x3d"dojoxResizeHandle"\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/div\x3e',postCreate:function(){this.connect(this.resizeHandle,q.press,"_beginSizing");this.activeResize?this.animateSizing=!1:(this._resizeHelper=u.byId("dojoxGlobalResizeHelper"),this._resizeHelper||(this._resizeHelper=(new x({id:"dojoxGlobalResizeHelper"})).placeAt(h.body()),
b.add(this._resizeHelper.domNode,this.activeResizeClass)));this.minSize||(this.minSize={w:this.minWidth,h:this.minHeight});this.constrainMax&&(this.maxSize={w:this.maxWidth,h:this.maxHeight});this._resizeX=this._resizeY=!1;var a=c.partial(b.add,this.resizeHandle);switch(this.resizeAxis.toLowerCase()){case "xy":this._resizeX=this._resizeY=!0;a("dojoxResizeNW");break;case "x":this._resizeX=!0;a("dojoxResizeW");break;case "y":this._resizeY=!0,a("dojoxResizeN")}},_beginSizing:function(b){if(!this._isSizing&&
(n.publish(this.startTopic,[this]),this.targetDomNode=(this.targetWidget=u.byId(this.targetId))?this.targetWidget.domNode:f.byId(this.targetId),this.targetContainer&&(this.targetDomNode=this.targetContainer),this.targetDomNode)){if(!this.activeResize){var c=a.position(this.targetDomNode,!0);this._resizeHelper.resize({l:c.x,t:c.y,w:c.w,h:c.h});this._resizeHelper.show();this.isLeftToRight()||(this._resizeHelper.startPosition={l:c.x,t:c.y})}this._isSizing=!0;this.startPoint={x:b.clientX,y:b.clientY};
var c=e.getComputedStyle(this.targetDomNode),d="border-model"===a.boxModel?{w:0,h:0}:a.getPadBorderExtents(this.targetDomNode,c),g=a.getMarginExtents(this.targetDomNode,c);this.startSize={w:e.get(this.targetDomNode,"width",c),h:e.get(this.targetDomNode,"height",c),pbw:d.w,pbh:d.h,mw:g.w,mh:g.h};this.isLeftToRight()||"absolute"!=e.get(this.targetDomNode,"position")||(c=a.position(this.targetDomNode,!0),this.startPosition={l:c.x,t:c.y});this._pconnects=[n.connect(h.doc,q.move,this,"_updateSizing"),
n.connect(h.doc,q.release,this,"_endSizing")];k.stop(b)}},_updateSizing:function(a){if(this.activeResize)this._changeSizing(a);else{var b=this._getNewCoords(a,"border",this._resizeHelper.startPosition);if(!1===b)return;this._resizeHelper.resize(b)}a.preventDefault()},_getNewCoords:function(a,b,c){try{if(!a.clientX||!a.clientY)return!1}catch(B){return!1}this._activeResizeLastEvent=a;var d=(this.isLeftToRight()?1:-1)*(this.startPoint.x-a.clientX),e=this.startPoint.y-a.clientY;a=this.startSize.w-(this._resizeX?
d:0);e=this._checkConstraints(a,this.startSize.h-(this._resizeY?e:0));(c=c||this.startPosition)&&this._resizeX&&(e.l=c.l+d,e.w!=a&&(e.l+=a-e.w),e.t=c.t);switch(b){case "margin":e.w+=this.startSize.mw,e.h+=this.startSize.mh;case "border":e.w+=this.startSize.pbw,e.h+=this.startSize.pbh}return e},_checkConstraints:function(a,b){if(this.minSize){var c=this.minSize;a<c.w&&(a=c.w);b<c.h&&(b=c.h)}this.constrainMax&&this.maxSize&&(c=this.maxSize,a>c.w&&(a=c.w),b>c.h&&(b=c.h));if(this.fixedAspect){var c=this.startSize.w,
d=this.startSize.h,e=c*b-d*a;0>e?a=b*c/d:0<e&&(b=a*d/c)}return{w:a,h:b}},_changeSizing:function(a){var b=this.targetWidget&&c.isFunction(this.targetWidget.resize),f=this._getNewCoords(a,b&&"margin");if(!1!==f&&(b?this.targetWidget.resize(f):this.animateSizing?g[this.animateMethod]([d.animateProperty({node:this.targetDomNode,properties:{width:{start:this.startSize.w,end:f.w}},duration:this.animateDuration}),d.animateProperty({node:this.targetDomNode,properties:{height:{start:this.startSize.h,end:f.h}},
duration:this.animateDuration})]).play():e.set(this.targetDomNode,{width:f.w+"px",height:f.h+"px"}),this.intermediateChanges))this.onResize(a)},_endSizing:function(a){l.forEach(this._pconnects,n.disconnect);var b=c.partial(n.publish,this.endTopic,[this]);this.activeResize?b():(this._resizeHelper.hide(),this._changeSizing(a),setTimeout(b,this.animateDuration+15));this._isSizing=!1;this.onResize(a)},onResize:function(a){}})})},"dojo/fx":function(){define("./_base/lang ./Evented ./_base/kernel ./_base/array ./aspect ./_base/fx ./dom ./dom-style ./dom-geometry ./ready require".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a){n.isAsync||b(0,function(){a(["./fx/Toggler"])});n=n.fx={};b={_fire:function(a,b){this[a]&&this[a].apply(this,b||[]);return this}};var e=function(a){this._index=-1;this._animations=a||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;l.forEach(this._animations,function(a){a&&("undefined"!=typeof a.duration&&(this.duration+=a.duration),a.delay&&(this.duration+=a.delay))},this)};e.prototype=new c;p.extend(e,{_onAnimate:function(){this._fire("onAnimate",
arguments)},_onEnd:function(){this._onAnimateCtx.remove();this._onEndCtx.remove();this._onAnimateCtx=this._onEndCtx=null;this._index+1==this._animations.length?this._fire("onEnd"):(this._current=this._animations[++this._index],this._onAnimateCtx=k.after(this._current,"onAnimate",p.hitch(this,"_onAnimate"),!0),this._onEndCtx=k.after(this._current,"onEnd",p.hitch(this,"_onEnd"),!0),this._current.play(0,!0))},play:function(a,b){this._current||(this._current=this._animations[this._index=0]);if(!b&&"playing"==
this._current.status())return this;var c=k.after(this._current,"beforeBegin",p.hitch(this,function(){this._fire("beforeBegin")}),!0),d=k.after(this._current,"onBegin",p.hitch(this,function(a){this._fire("onBegin",arguments)}),!0),e=k.after(this._current,"onPlay",p.hitch(this,function(a){this._fire("onPlay",arguments);c.remove();d.remove();e.remove()}));this._onAnimateCtx&&this._onAnimateCtx.remove();this._onAnimateCtx=k.after(this._current,"onAnimate",p.hitch(this,"_onAnimate"),!0);this._onEndCtx&&
this._onEndCtx.remove();this._onEndCtx=k.after(this._current,"onEnd",p.hitch(this,"_onEnd"),!0);this._current.play.apply(this._current,arguments);return this},pause:function(){if(this._current){var a=k.after(this._current,"onPause",p.hitch(this,function(b){this._fire("onPause",arguments);a.remove()}),!0);this._current.pause()}return this},gotoPercent:function(a,b){this.pause();var c=this.duration*a;this._current=null;l.some(this._animations,function(a,b){if(c<=a.duration)return this._current=a,this._index=
b,!0;c-=a.duration;return!1},this);this._current&&this._current.gotoPercent(c/this._current.duration);b&&this.play();return this},stop:function(a){if(this._current){if(a){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(!0);this._current=this._animations[this._index]}var b=k.after(this._current,"onStop",p.hitch(this,function(a){this._fire("onStop",arguments);b.remove()}),!0);this._current.stop()}return this},status:function(){return this._current?this._current.status():
"stopped"},destroy:function(){this.stop();this._onAnimateCtx&&this._onAnimateCtx.remove();this._onEndCtx&&this._onEndCtx.remove()}});p.extend(e,b);n.chain=function(a){return new e(p.isArray(a)?a:Array.prototype.slice.call(a,0))};var m=function(a){this._animations=a||[];this._connects=[];this.duration=this._finished=0;l.forEach(a,function(a){var b=a.duration;a.delay&&(b+=a.delay);this.duration<b&&(this.duration=b);this._connects.push(k.after(a,"onEnd",p.hitch(this,"_onEnd"),!0))},this);this._pseudoAnimation=
new d.Animation({curve:[0,1],duration:this.duration});var b=this;l.forEach("beforeBegin onBegin onPlay onAnimate onPause onStop onEnd".split(" "),function(a){b._connects.push(k.after(b._pseudoAnimation,a,function(){b._fire(a,arguments)},!0))})};p.extend(m,{_doAction:function(a,b){l.forEach(this._animations,function(c){c[a].apply(c,b)});return this},_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(a,b){var c=this._pseudoAnimation;c[a].apply(c,b)},play:function(a,
b){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this},gotoPercent:function(a,b){var c=this.duration*a;l.forEach(this._animations,function(a){a.gotoPercent(a.duration<c?1:c/a.duration,b)});this._call("gotoPercent",arguments);return this},stop:function(a){this._doAction("stop",arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},
destroy:function(){this.stop();l.forEach(this._connects,function(a){a.remove()})}});p.extend(m,b);n.combine=function(a){return new m(p.isArray(a)?a:Array.prototype.slice.call(a,0))};n.wipeIn=function(a){var b=a.node=h.byId(a.node),c=b.style,e;a=d.animateProperty(p.mixin({properties:{height:{start:function(){e=c.overflow;c.overflow="hidden";if("hidden"==c.visibility||"none"==c.display)return c.height="1px",c.display="",c.visibility="",1;var a=g.get(b,"height");return Math.max(a,1)},end:function(){return b.scrollHeight}}}},
a));var f=function(){c.height="auto";c.overflow=e};k.after(a,"onStop",f,!0);k.after(a,"onEnd",f,!0);return a};n.wipeOut=function(a){var b=(a.node=h.byId(a.node)).style,c;a=d.animateProperty(p.mixin({properties:{height:{end:1}}},a));k.after(a,"beforeBegin",function(){c=b.overflow;b.overflow="hidden";b.display=""},!0);var e=function(){b.overflow=c;b.height="auto";b.display="none"};k.after(a,"onStop",e,!0);k.after(a,"onEnd",e,!0);return a};n.slideTo=function(a){var b=null,c=null,e=function(a){return function(){var d=
g.getComputedStyle(a),e=d.position;b="absolute"==e?a.offsetTop:parseInt(d.top)||0;c="absolute"==e?a.offsetLeft:parseInt(d.left)||0;"absolute"!=e&&"relative"!=e&&(d=f.position(a,!0),b=d.y,c=d.x,a.style.position="absolute",a.style.top=b+"px",a.style.left=c+"px")}}(a.node=h.byId(a.node));e();a=d.animateProperty(p.mixin({properties:{top:a.top||0,left:a.left||0}},a));k.after(a,"beforeBegin",e,!0);return a};return n})},"dijit/layout/_LayoutWidget":function(){define("dojo/_base/lang ../_Widget ../_Container ../_Contained ../Viewport dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style".split(" "),
function(p,c,n,l,k,d,h,g,f){return d("dijit.layout._LayoutWidget",[c,n,l],{baseClass:"dijitLayoutContainer",isLayoutContainer:!0,_setTitleAttr:null,buildRendering:function(){this.inherited(arguments);h.add(this.domNode,"dijitContainer")},startup:function(){if(!this._started){this.inherited(arguments);var b=this.getParent&&this.getParent();b&&b.isLayoutContainer||(this.resize(),this.own(k.on("resize",p.hitch(this,"resize"))))}},resize:function(b,a){var c=this.domNode;b&&g.setMarginBox(c,b);a=a||{};
p.mixin(a,b||{});"h"in a&&"w"in a||(a=p.mixin(g.getMarginBox(c),a));b=f.getComputedStyle(c);var d=g.getMarginExtents(c,b),h=g.getBorderExtents(c,b);a=this._borderBox={w:a.w-(d.w+h.w),h:a.h-(d.h+h.h)};d=g.getPadExtents(c,b);this._contentBox={l:f.toPixelValue(c,b.paddingLeft),t:f.toPixelValue(c,b.paddingTop),w:a.w-d.w,h:a.h-d.h};this.layout()},layout:function(){},_setupChild:function(b){h.add(b.domNode,this.baseClass+"-child "+(b.baseClass?this.baseClass+"-"+b.baseClass:""))},addChild:function(b,a){this.inherited(arguments);
this._started&&this._setupChild(b)},removeChild:function(b){h.remove(b.domNode,this.baseClass+"-child"+(b.baseClass?" "+this.baseClass+"-"+b.baseClass:""));this.inherited(arguments)}})})},"dijit/_Contained":function(){define(["dojo/_base/declare","./registry"],function(p,c){return p("dijit._Contained",null,{_getSibling:function(c){var l=this.getParent();return l&&l._getSiblingOfChild&&l._getSiblingOfChild(this,"previous"==c?-1:1)||null},getPreviousSibling:function(){return this._getSibling("previous")},
getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var c=this.getParent();return c&&c.getIndexOfChild?c.getIndexOfChild(this):-1}})})},"dijit/Menu":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/_base/window dojo/window ./popup ./DropDownMenu dojo/ready".split(" "),function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t){a("dijit-legacy-requires")&&t(0,function(){p(["dijit/MenuItem",
"dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"])});return n("dijit.Menu",u,{constructor:function(){this._bindings=[]},targetNodeIds:[],selector:"",contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(this.ownerDocumentBody):c.forEach(this.targetNodeIds,this.bindDomNode,this);this.inherited(arguments)},_iframeContentWindow:function(a){return m.get(this._iframeContentDocument(a))||this._iframeContentDocument(a).__parent__||
a.name&&document.frames[a.name]||null},_iframeContentDocument:function(a){return a.contentDocument||a.contentWindow&&a.contentWindow.document||a.name&&document.frames[a.name]&&document.frames[a.name].document||null},bindDomNode:function(a){a=l.byId(a,this.ownerDocument);var c;if("iframe"==a.tagName.toLowerCase()){var d=a;c=this._iframeContentWindow(d);c=e.body(c.document)}else c=a==e.body(this.ownerDocument)?this.ownerDocument.documentElement:a;var h={node:a,iframe:d};k.set(a,"_dijitMenu"+this.id,
this._bindings.push(h));var m=f.hitch(this,function(a){var c=this.selector,e=c?function(a){return b.selector(c,a)}:function(a){return a},f=this;return[b(a,e(this.leftClickToOpen?"click":"contextmenu"),function(a){a.stopPropagation();a.preventDefault();(new Date).getTime()<f._lastKeyDown+500||f._scheduleOpen(this,d,{x:a.pageX,y:a.pageY},a.target)}),b(a,e("keydown"),function(a){if(93==a.keyCode||a.shiftKey&&a.keyCode==g.F10||f.leftClickToOpen&&a.keyCode==g.SPACE)a.stopPropagation(),a.preventDefault(),
f._scheduleOpen(this,d,null,a.target),f._lastKeyDown=(new Date).getTime()})]});h.connects=c?m(c):[];d&&(h.onloadHandler=f.hitch(this,function(){var a=this._iframeContentWindow(d),a=e.body(a.document);h.connects=m(a)}),d.addEventListener?d.addEventListener("load",h.onloadHandler,!1):d.attachEvent("onload",h.onloadHandler))},unBindDomNode:function(a){var b;try{b=l.byId(a,this.ownerDocument)}catch(z){return}a="_dijitMenu"+this.id;if(b&&k.has(b,a)){for(var c=k.get(b,a)-1,d=this._bindings[c],e;e=d.connects.pop();)e.remove();
(e=d.iframe)&&(e.removeEventListener?e.removeEventListener("load",d.onloadHandler,!1):e.detachEvent("onload",d.onloadHandler));k.remove(b,a);delete this._bindings[c]}},_scheduleOpen:function(a,b,c,d){this._openTimer||(this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:d,delegatedTarget:a,iframe:b,coords:c})},1))},_openMyself:function(b){function c(){r.refocus&&t&&t.focus();q.close(r)}var e=b.target,f=b.iframe,g=b.coords,k=!g;this.currentTarget=b.delegatedTarget;
if(g){if(f){b=d.position(f,!0);var e=this._iframeContentWindow(f),e=d.docScroll(e.document),m=h.getComputedStyle(f),n=h.toPixelValue,p=(a("ie"),n(f,m.paddingLeft))+(a("ie"),0),f=(a("ie"),n(f,m.paddingTop))+(a("ie"),0);g.x+=b.x+p-e.x;g.y+=b.y+f-e.y}}else g=d.position(e,!0),g.x+=10,g.y+=10;var r=this,f=this._focusManager.get("prevNode");b=this._focusManager.get("curNode");var t=!b||l.isDescendant(b,this.domNode)?f:b;q.open({popup:this,x:g.x,y:g.y,onExecute:c,onCancel:c,orient:this.isLeftToRight()?"L":
"R"});this.focus();k||this.defer(function(){this._cleanUp(!0)});this._onBlur=function(){this.inherited("_onBlur",arguments);q.close(this)}},destroy:function(){c.forEach(this._bindings,function(a){a&&this.unBindDomNode(a.node)},this);this.inherited(arguments)}})})},"dijit/popup":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on ./place ./BackgroundIframe ./Viewport ./main dojo/touch".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t){function r(){this._popupWrapper&&(d.destroy(this._popupWrapper),delete this._popupWrapper)}n=n(null,{_stack:[],_beginZIndex:1E3,_idGen:1,_repositionAll:function(){if(this._firstAroundNode){var b=this._firstAroundPosition,c=h.position(this._firstAroundNode,!0),d=c.x-b.x,b=c.y-b.y;if(d||b)for(this._firstAroundPosition=c,c=0;c<this._stack.length;c++){var e=this._stack[c].wrapper.style;e.top=parseFloat(e.top)+b+"px";"auto"==e.right?e.left=parseFloat(e.left)+d+
"px":e.right=parseFloat(e.right)-d+"px"}this._aroundMoveListener=setTimeout(a.hitch(this,"_repositionAll"),d||b?10:50)}},_createWrapper:function(a){var b=a._popupWrapper,f=a.domNode;b||(b=d.create("div",{"class":"dijitPopup",style:{display:"none"},role:"region","aria-label":a["aria-label"]||a.label||a.name||a.id},a.ownerDocumentBody),b.appendChild(f),f=f.style,f.display="",f.visibility="",f.position="",f.top="0px",a._popupWrapper=b,c.after(a,"destroy",r,!0),"ontouchend"in document&&e(b,"touchend",
function(a){/^(input|button|textarea)$/i.test(a.target.tagName)||a.preventDefault()}),b.dojoClick=!0);return b},moveOffScreen:function(a){var b=this._createWrapper(a);a=h.isBodyLtr(a.ownerDocument);var c={visibility:"hidden",top:"-9999px",display:""};c[a?"left":"right"]="-9999px";c[a?"right":"left"]="auto";g.set(b,c);return b},hide:function(a){var b=this._createWrapper(a);g.set(b,{display:"none",height:"auto",overflowY:"visible",border:""});a=a.domNode;"_originalStyle"in a&&(a.style.cssText=a._originalStyle)},
getTopPopup:function(){for(var a=this._stack,b=a.length-1;0<b&&a[b].parent===a[b-1].widget;b--);return a[b]},open:function(c){for(var d=this._stack,n=c.popup,p=n.domNode,r=c.orient||["below","below-alt","above","above-alt"],t=c.parent?c.parent.isLeftToRight():h.isBodyLtr(n.ownerDocument),x=c.around,D=c.around&&c.around.id?c.around.id+"_dropdown":"popup_"+this._idGen++;d.length&&(!c.parent||!l.isDescendant(c.parent.domNode,d[d.length-1].widget.domNode));)this.close(d[d.length-1].widget);var C=this.moveOffScreen(n);
n.startup&&!n._started&&n.startup();var E,H=h.position(p);if("maxHeight"in c&&-1!=c.maxHeight)E=c.maxHeight||Infinity;else{E=u.getEffectiveBox(this.ownerDocument);var G=x?h.position(x,!1):{y:c.y-(c.padding||0),h:2*(c.padding||0)};E=Math.floor(Math.max(G.y,E.h-(G.y+G.h)))}H.h>E&&(H=g.getComputedStyle(p),g.set(C,{overflowY:"scroll",height:E+"px",border:H.borderLeftWidth+" "+H.borderLeftStyle+" "+H.borderLeftColor}),p._originalStyle=p.style.cssText,p.style.border="none");k.set(C,{id:D,style:{zIndex:this._beginZIndex+
d.length},"class":"dijitPopup "+(n.baseClass||n["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:c.parent?c.parent.id:""});0==d.length&&x&&(this._firstAroundNode=x,this._firstAroundPosition=h.position(x,!0),this._aroundMoveListener=setTimeout(a.hitch(this,"_repositionAll"),50));f("config-bgIframe")&&!n.bgIframe&&(n.bgIframe=new q(C));D=n.orient?a.hitch(n,"orient"):null;r=x?m.around(C,x,r,t,D):m.at(C,c,"R"==r?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],c.padding,D);C.style.visibility="visible";
p.style.visibility="visible";p=[];p.push(e(C,"keydown",a.hitch(this,function(a){if(a.keyCode==b.ESCAPE&&c.onCancel)a.stopPropagation(),a.preventDefault(),c.onCancel();else if(a.keyCode==b.TAB&&(a.stopPropagation(),a.preventDefault(),(a=this.getTopPopup())&&a.onCancel))a.onCancel()})));n.onCancel&&c.onCancel&&p.push(n.on("cancel",c.onCancel));p.push(n.on(n.onExecute?"execute":"change",a.hitch(this,function(){var a=this.getTopPopup();if(a&&a.onExecute)a.onExecute()})));d.push({widget:n,wrapper:C,parent:c.parent,
onExecute:c.onExecute,onCancel:c.onCancel,onClose:c.onClose,handlers:p});if(n.onOpen)n.onOpen(r);return r},close:function(a){for(var b=this._stack;a&&p.some(b,function(b){return b.widget==a})||!a&&b.length;){var c=b.pop(),d=c.widget,e=c.onClose;d.bgIframe&&(d.bgIframe.destroy(),delete d.bgIframe);if(d.onClose)d.onClose();for(var f;f=c.handlers.pop();)f.remove();d&&d.domNode&&this.hide(d);e&&e()}0==b.length&&this._aroundMoveListener&&(clearTimeout(this._aroundMoveListener),this._firstAroundNode=this._firstAroundPosition=
this._aroundMoveListener=null)}});return t.popup=new n})},"dijit/DropDownMenu":function(){define(["dojo/_base/declare","dojo/keys","dojo/text!./templates/Menu.html","./_MenuBase"],function(p,c,n,l){return p("dijit.DropDownMenu",l,{templateString:n,baseClass:"dijitMenu",_onUpArrow:function(){this.focusPrev()},_onDownArrow:function(){this.focusNext()},_onRightArrow:function(c){this._moveToPopup(c);c.stopPropagation();c.preventDefault()},_onLeftArrow:function(c){if(this.parentMenu)if(this.parentMenu._isMenuBar)this.parentMenu.focusPrev();
else this.onCancel(!1);else c.stopPropagation(),c.preventDefault()}})})},"dijit/_MenuBase":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/lang dojo/mouse dojo/on dojo/window ./a11yclick ./registry ./_Widget ./_CssStateMixin ./_KeyNavContainer ./_TemplatedMixin".split(" "),function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u){return c("dijit._MenuBase",[e,u,q,m],{selected:null,_setSelectedAttr:function(a){this.selected!=a&&(this.selected&&(this.selected._setSelected(!1),
this._onChildDeselect(this.selected)),a&&a._setSelected(!0),this._set("selected",a))},activated:!1,_setActivatedAttr:function(a){k.toggle(this.domNode,"dijitMenuActive",a);k.toggle(this.domNode,"dijitMenuPassive",!a);this._set("activated",a)},parentMenu:null,popupDelay:500,passivePopupDelay:Infinity,autoFocus:!1,childSelector:function(b){var c=a.byNode(b);return b.parentNode==this.containerNode&&c&&c.focus},postCreate:function(){var c=this,e="string"==typeof this.childSelector?this.childSelector:
d.hitch(this,"childSelector");this.own(g(this.containerNode,g.selector(e,h.enter),function(){c.onItemHover(a.byNode(this))}),g(this.containerNode,g.selector(e,h.leave),function(){c.onItemUnhover(a.byNode(this))}),g(this.containerNode,g.selector(e,b),function(b){c.onItemClick(a.byNode(this),b);b.stopPropagation()}),g(this.containerNode,g.selector(e,"focusin"),function(){c._onItemFocus(a.byNode(this))}));this.inherited(arguments)},onKeyboardSearch:function(a,b,c,d){this.inherited(arguments);if(a&&(-1==
d||a.popup&&1==d))this.onItemClick(a,b)},_keyboardSearchCompare:function(a,b){return a.shortcutKey?b==a.shortcutKey.toLowerCase()?-1:0:this.inherited(arguments)?1:0},onExecute:function(){},onCancel:function(){},_moveToPopup:function(a){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.onItemClick(this.focusedChild,a);else(a=this._getTopMenu())&&a._isMenuBar&&a.focusNext()},_onPopupHover:function(){this.set("selected",this.currentPopupItem);this._stopPendingCloseTimer()},
onItemHover:function(a){this.activated?(this.set("selected",a),!a.popup||a.disabled||this.hover_timer||(this.hover_timer=this.defer(function(){this._openItemPopup(a)},this.popupDelay))):Infinity>this.passivePopupDelay&&(this.passive_hover_timer&&this.passive_hover_timer.remove(),this.passive_hover_timer=this.defer(function(){this.onItemClick(a,{type:"click"})},this.passivePopupDelay));this._hoveredChild=a;a._set("hovering",!0)},_onChildDeselect:function(a){this._stopPopupTimer();this.currentPopupItem==
a&&(this._stopPendingCloseTimer(),this._pendingClose_timer=this.defer(function(){this.currentPopupItem=this._pendingClose_timer=null;a._closePopup()},this.popupDelay))},onItemUnhover:function(a){this._hoveredChild==a&&(this._hoveredChild=null);this.passive_hover_timer&&(this.passive_hover_timer.remove(),this.passive_hover_timer=null);a._set("hovering",!1)},_stopPopupTimer:function(){this.hover_timer&&(this.hover_timer=this.hover_timer.remove())},_stopPendingCloseTimer:function(){this._pendingClose_timer&&
(this._pendingClose_timer=this._pendingClose_timer.remove())},_getTopMenu:function(){for(var a=this;a.parentMenu;a=a.parentMenu);return a},onItemClick:function(a,b){this.passive_hover_timer&&this.passive_hover_timer.remove();this.focusChild(a);if(a.disabled)return!1;a.popup?(this.set("selected",a),this.set("activated",!0),b=/^key/.test(b._origType||b.type)||0==b.clientX&&0==b.clientY,this._openItemPopup(a,b)):(this.onExecute(),a._onClick?a._onClick(b):a.onClick(b))},_openItemPopup:function(a,b){if(a!=
this.currentPopupItem){this.currentPopupItem&&(this._stopPendingCloseTimer(),this.currentPopupItem._closePopup());this._stopPopupTimer();var c=a.popup;c.parentMenu=this;this.own(this._mouseoverHandle=g.once(c.domNode,"mouseover",d.hitch(this,"_onPopupHover")));var e=this;a._openPopup({parent:this,orient:this._orient||["after","before"],onCancel:function(){b&&e.focusChild(a);e._cleanUp()},onExecute:d.hitch(this,"_cleanUp",!0),onClose:function(){e._mouseoverHandle&&(e._mouseoverHandle.remove(),delete e._mouseoverHandle)}},
b);this.currentPopupItem=a}},onOpen:function(){this.isShowingNow=!0;this.set("activated",!0)},onClose:function(){this.set("activated",!1);this.set("selected",null);this.isShowingNow=!1;this.parentMenu=null},_closeChild:function(){this._stopPopupTimer();this.currentPopupItem&&(this.focused&&(l.set(this.selected.focusNode,"tabIndex",this.tabIndex),this.selected.focusNode.focus()),this.currentPopupItem._closePopup(),this.currentPopupItem=null)},_onItemFocus:function(a){if(this._hoveredChild&&this._hoveredChild!=
a)this.onItemUnhover(this._hoveredChild);this.set("selected",a)},_onBlur:function(){this._cleanUp(!0);this.inherited(arguments)},_cleanUp:function(a){this._closeChild();"undefined"==typeof this.isShowingNow&&this.set("activated",!1);a&&this.set("selected",null)}})})},"dijit/_KeyNavContainer":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/keys dojo/_base/lang ./registry ./_Container ./_FocusMixin ./_KeyNavMixin".split(" "),function(p,c,n,l,k,d,h,g,f,b){return c("dijit._KeyNavContainer",
[f,b,g],{connectKeyNavHandlers:function(a,b){var c=this._keyNavCodes={},e=d.hitch(this,"focusPrev"),f=d.hitch(this,"focusNext");p.forEach(a,function(a){c[a]=e});p.forEach(b,function(a){c[a]=f});c[k.HOME]=d.hitch(this,"focusFirstChild");c[k.END]=d.hitch(this,"focusLastChild")},startupKeyNavChildren:function(){l.deprecated("startupKeyNavChildren() call no longer needed","","2.0")},startup:function(){this.inherited(arguments);p.forEach(this.getChildren(),d.hitch(this,"_startupChild"))},addChild:function(a,
b){this.inherited(arguments);this._startupChild(a)},_startupChild:function(a){a.set("tabIndex","-1")},_getFirst:function(){var a=this.getChildren();return a.length?a[0]:null},_getLast:function(){var a=this.getChildren();return a.length?a[a.length-1]:null},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1))},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),!0)},childSelector:function(a){return(a=h.byNode(a))&&a.getParent()==this}})})},
"dijit/_KeyNavMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dijit/registry dijit/_FocusMixin".split(" "),function(p,c,n,l,k,d,h,g){return c("dijit._KeyNavMixin",g,{tabIndex:"0",childSelector:null,postCreate:function(){this.inherited(arguments);n.set(this.domNode,"tabIndex",this.tabIndex);if(!this._keyNavCodes){var c=this._keyNavCodes={};c[l.HOME]=k.hitch(this,"focusFirstChild");c[l.END]=k.hitch(this,"focusLastChild");c[this.isLeftToRight()?
l.LEFT_ARROW:l.RIGHT_ARROW]=k.hitch(this,"_onLeftArrow");c[this.isLeftToRight()?l.RIGHT_ARROW:l.LEFT_ARROW]=k.hitch(this,"_onRightArrow");c[l.UP_ARROW]=k.hitch(this,"_onUpArrow");c[l.DOWN_ARROW]=k.hitch(this,"_onDownArrow")}var b=this,c="string"==typeof this.childSelector?this.childSelector:k.hitch(this,"childSelector");this.own(d(this.domNode,"keypress",k.hitch(this,"_onContainerKeypress")),d(this.domNode,"keydown",k.hitch(this,"_onContainerKeydown")),d(this.domNode,"focus",k.hitch(this,"_onContainerFocus")),
d(this.containerNode,d.selector(c,"focusin"),function(a){b._onChildFocus(h.getEnclosingWidget(this),a)}))},_onLeftArrow:function(){},_onRightArrow:function(){},_onUpArrow:function(){},_onDownArrow:function(){},focus:function(){this.focusFirstChild()},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},focusLastChild:function(){this.focusChild(this._getLastFocusableChild())},
focusChild:function(c,b){c&&(this.focusedChild&&c!==this.focusedChild&&this._onChildBlur(this.focusedChild),c.set("tabIndex",this.tabIndex),c.focus(b?"end":"start"))},_onContainerFocus:function(c){c.target!==this.domNode||this.focusedChild||this.focus()},_onFocus:function(){n.set(this.domNode,"tabIndex","-1");this.inherited(arguments)},_onBlur:function(c){n.set(this.domNode,"tabIndex",this.tabIndex);this.focusedChild&&(this.focusedChild.set("tabIndex","-1"),this.lastFocusedChild=this.focusedChild,
this._set("focusedChild",null));this.inherited(arguments)},_onChildFocus:function(c){c&&c!=this.focusedChild&&(this.focusedChild&&!this.focusedChild._destroyed&&this.focusedChild.set("tabIndex","-1"),c.set("tabIndex",this.tabIndex),this.lastFocused=c,this._set("focusedChild",c))},_searchString:"",multiCharSearchDuration:1E3,onKeyboardSearch:function(c,b,a,d){c&&this.focusChild(c)},_keyboardSearchCompare:function(c,b){var a=c.domNode;c=(c.label||(a.focusNode?a.focusNode.label:"")||a.innerText||a.textContent||
"").replace(/^\s+/,"").substr(0,b.length).toLowerCase();return b.length&&c==b?-1:0},_isFormElement:function(c){return"INPUT"===c.tagName||"TEXTAREA"===c.tagName||"SELECT"===c.tagName||"BUTTON"===c.tagName},_onContainerKeydown:function(c){if(!this._isFormElement(document.activeElement)){var b=this._keyNavCodes[c.keyCode];b?(b(c,this.focusedChild),c.stopPropagation(),c.preventDefault(),this._searchString=""):c.keyCode!=l.SPACE||!this._searchTimer||c.ctrlKey||c.altKey||c.metaKey||(c.stopImmediatePropagation(),
c.preventDefault(),this._keyboardSearch(c," "))}},_onContainerKeypress:function(c){this._isFormElement(document.activeElement)||c.charCode<=l.SPACE||c.ctrlKey||c.altKey||c.metaKey||(c.preventDefault(),c.stopPropagation(),this._keyboardSearch(c,String.fromCharCode(c.charCode).toLowerCase()))},_keyboardSearch:function(c,b){var a=null,d,f=0;k.hitch(this,function(){this._searchTimer&&this._searchTimer.remove();this._searchString+=b;var c=/^(.)\1*$/.test(this._searchString)?1:this._searchString.length;
d=this._searchString.substr(0,c);this._searchTimer=this.defer(function(){this._searchTimer=null;this._searchString=""},this.multiCharSearchDuration);var e=this.focusedChild||null;if(1==c||!e)if(e=this._getNextFocusableChild(e,1),!e)return;c=e;do{var g=this._keyboardSearchCompare(e,d);g&&0==f++&&(a=e);if(-1==g){f=-1;break}e=this._getNextFocusableChild(e,1)}while(e&&e!=c)})();this.onKeyboardSearch(a,c,d,f)},_onChildBlur:function(){},_getNextFocusableChild:function(c,b){var a=c;do{if(c)c=this._getNext(c,
b);else if(c=this[0<b?"_getFirst":"_getLast"](),!c)break;if(null!=c&&c!=a&&c.isFocusable())return c}while(c!=a);return null},_getFirst:function(){return null},_getLast:function(){return null},_getNext:function(c,b){if(c)for(c=c.domNode;c;)if((c=c[0>b?"previousSibling":"nextSibling"])&&"getAttribute"in c){var a=h.byNode(c);if(a)return a}return null}})})},"dgrid/main":function(){define([],1)},"dgrid/OnDemandGrid":function(){define(["dojo/_base/declare","./Grid","./OnDemandList"],function(p,c,n){return p([c,
n],{})})},"dgrid/Grid":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-class dojo/on dojo/has ./List ./util/misc dojo/_base/sniff".split(" "),function(p,c,n,l,k,d,h,g){function f(b,a){a&&a.nodeType&&b.appendChild(a)}p=p(h,{columns:null,hasNeutralSort:!1,cellNavigation:!0,tabableHeader:!0,showHeader:!0,column:function(b){return"object"!==typeof b?this.columns[b]:this.cell(b).column},listType:"grid",cell:function(b,a){if(b.column&&b.element)return b;b.target&&b.target.nodeType&&
(b=b.target);var c;if(b.nodeType){do{if(this._rowIdToObject[b.id])break;var d=b.columnId;if(d){a=d;c=b;break}b=b.parentNode}while(b&&b!==this.domNode)}if(!c&&"undefined"!==typeof a){var f=this.row(b);if(d=f&&f.element)for(var d=d.getElementsByTagName("td"),g=0;g<d.length;g++)if(d[g].columnId===a){c=d[g];break}}if(null!=b)return{row:f||this.row(b),column:a&&this.column(a),element:c}},createRowCells:function(b,a,c,f,h){var e=n.create("table",{className:"dgrid-row-table",role:"presentation"}),k=9>d("ie")?
n.create("tbody",null,e):e,m,l,q,p,y,z,A,B,D,C;c=c||this.subRows;l=0;for(q=c.length;l<q;l++)for(z=c[l],m=n.create("tr",null,k),z.className&&(m.className=z.className),p=0,y=z.length;p<y;p++){A=z[p];B=A.id;D=A.field?" field-"+g.escapeCssIdentifier(A.field,"-"):"";(C="function"===typeof A.className?A.className(f):A.className)&&(D+=" "+C);D=n.create(b,{className:"dgrid-cell"+(B?" dgrid-column-"+g.escapeCssIdentifier(B,"-"):"")+D,role:"th"===b?"columnheader":"gridcell"});D.columnId=B;if(B=A.colSpan)D.colSpan=
B;if(B=A.rowSpan)D.rowSpan=B;a(D,A,f,h);m.appendChild(D)}return e},_createBodyRowCell:function(b,a,c,d){var e=c;a.get?e=a.get(c):"field"in a&&"_item"!==a.field&&(e=c[a.field]);a.renderCell?f(b,a.renderCell(c,e,b,d)):this._defaultRenderCell.call(a,c,e,b,d)},_createHeaderRowCell:function(b,a){var c=a.headerNode=b,d=a.field;d&&(b.field=d);a.renderHeaderCell?f(c,a.renderHeaderCell(c)):("label"in a||a.field)&&c.appendChild(document.createTextNode("label"in a?a.label:a.field));!1!==a.sortable&&d&&"_item"!==
d&&(b.sortable=!0,b.className+=" dgrid-sortable")},left:function(b,a){b.element||(b=this.cell(b));return this.cell(this._move(b,-(a||1),"dgrid-cell"))},right:function(b,a){b.element||(b=this.cell(b));return this.cell(this._move(b,a||1,"dgrid-cell"))},_defaultRenderCell:function(b,a,c){if(this.formatter){var d=this.formatter,e=this.grid.formatterScope;c.innerHTML="string"===typeof d&&e?e[d](a,b):this.formatter(a,b)}else null!=a&&c.appendChild(document.createTextNode(a))},renderRow:function(b,a){b=
this.createRowCells("td",c.hitch(this,"_createBodyRowCell"),a&&a.subRows,b,a);a=n.create("div",{role:"row"});a.appendChild(b);return a},renderHeader:function(){var b=this,a=this.headerNode;a.setAttribute("role","row");n.empty(a);var e=this.createRowCells("th",c.hitch(this,"_createHeaderRowCell"),this.subRows&&this.subRows.headerRows);this._rowIdToObject[e.id=this.id+"-header"]=this.columns;a.appendChild(e);this._sortListener&&this._sortListener.remove();this._sortListener=k(e,"click,keydown",function(c){if("click"===
c.type||32===c.keyCode||!d("opera")&&13===c.keyCode){var e=c.target,f,g;do if(e.sortable){f=e.field||e.columnId;g=b.sort[0];f=b.hasNeutralSort&&g&&g.property===f&&g.descending?[]:[{property:f,descending:g&&g.property===f&&!g.descending}];g={bubbles:!0,cancelable:!0,grid:b,parentType:c.type,sort:f};k.emit(c.target,"dgrid-sort",g)&&(b._sortNode=e,b.set("sort",f));break}while((e=e.parentNode)&&e!==a)}})},resize:function(){var b=this.headerNode.firstChild,a=this.contentNode,c;this.inherited(arguments);
a.style.width="";a&&b&&(c=b.offsetWidth)>a.offsetWidth&&(a.style.width=c+"px")},destroy:function(){this._destroyColumns();this._sortListener&&this._sortListener.remove();this.inherited(arguments)},_setSort:function(){this.inherited(arguments);this.updateSortArrow(this.sort)},_findSortArrowParent:function(b){var a=this.columns,c;for(c in a){var d=a[c];if(d.field===b)return d.headerNode}},updateSortArrow:function(b,a){this._lastSortedArrow&&(l.remove(this._lastSortedArrow.parentNode,"dgrid-sort-up dgrid-sort-down"),
n.destroy(this._lastSortedArrow),delete this._lastSortedArrow);a&&(this.sort=b);b[0]&&(a=b[0].property,b=b[0].descending,a=this._sortNode||this._findSortArrowParent(a),delete this._sortNode,a&&(a=a.contents||a,this._lastSortedArrow=n.create("div",{className:"dgrid-sort-arrow ui-icon",innerHTML:"\x26nbsp;",role:"presentation"},a,"first"),l.add(a,"dgrid-sort-"+(b?"down":"up")),this.resize()))},styleColumn:function(b,a){return this.addCssRule("#"+g.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-"+
g.escapeCssIdentifier(b,"-"),a)},_configColumns:function(b,a){var c=[],d=a instanceof Array;g.each(a,function(e,f){"string"===typeof e&&(a[f]=e={label:e});d||e.field||(e.field=f);f=e.id=e.id||(isNaN(f)?f:b+f);this._configColumn&&(this._configColumn(e,a,b),f=e.id);d&&(this.columns[f]=e);e.grid=this;c.push(e)},this);return d?a:c},_destroyColumns:function(){this.cleanup()},configStructure:function(){var b=this.subRows,a=this._columns=this.columns;this.columns=!a||a instanceof Array?{}:a;if(b)for(a=0;a<
b.length;a++)b[a]=this._configColumns(a+"-",b[a]);else this.subRows=[this._configColumns("",a)]},_getColumns:function(){return this._columns||this.columns},_setColumns:function(b){this._destroyColumns();this.subRows=null;this.columns=b;this._updateColumns()},_setSubRows:function(b){this._destroyColumns();this.subRows=b;this._updateColumns()},_updateColumns:function(){this.configStructure();this.renderHeader();this.refresh();this._lastCollection&&this.renderArray(this._lastCollection);this._started&&
(this.sort.length?(this._lastSortedArrow=null,this.updateSortArrow(this.sort)):this.resize())}});p.appendIfNode=f;return p})},"dgrid/List":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-class dojo/on dojo/has ./util/misc dojo/_base/sniff".split(" "),function(p,c,n,l,k,d,h){function g(a,b){a.className="dgrid-scrollbar-measure";document.body.appendChild(a);b=a["offset"+b]-a["client"+b];a.className="";a.parentNode&&document.body.removeChild(a);return b}function f(a){l.replace(this.domNode,
a,this._class||"");this._class=a}function b(){return this._class}var a=[];a.push("has-mozilla");d("touch")&&a.push("has-touch");l.add(document.documentElement,a);d.add("pointer",function(a){return"PointerEvent"in a?"pointer":"MSPointerEvent"in a?"MSPointer":!1});var e,m;d.add("dom-scrollbar-width",function(a,b,c){return g(c,"Width")});d.add("dom-scrollbar-height",function(a,b,c){return g(c,"Height")});d.add("dom-rtl-scrollbar-left",function(a,b,c){a=document.createElement("div");c.className="dgrid-scrollbar-measure";
c.setAttribute("dir","rtl");c.appendChild(a);document.body.appendChild(c);b=!!d("ie")||!1||/\bEdge\//.test(navigator.userAgent)||a.offsetLeft>=d("dom-scrollbar-width");c.className="";c.parentNode&&document.body.removeChild(c);n.destroy(a);c.removeAttribute("dir");return b});var q=0,u=function(){this._started&&this.resize()},t=p(null,{tabableHeader:!1,showHeader:!1,showFooter:!1,maintainOddEven:!0,cleanAddedRules:!0,addUiClasses:!0,highlightDuration:250,resizeThrottleDelay:h.defaultDelay,resizeThrottleMethod:"throttleDelayed",
postscript:function(a,b){var c=this;(this._Row=function(a,b,c){this.id=a;this.data=b;this.element=c}).prototype.remove=function(){c.removeRow(this.element)};b&&(this.srcNodeRef=b=b.nodeType?b:document.getElementById(b));this.create(a,b)},listType:"list",create:function(a,b){b=this.domNode=b||document.createElement("div");var c;a&&(this.params=a,p.safeMixin(this,a),c=a["class"]||a.className||b.className);this.sort=this.sort||[];this._listeners=[];this._rowIdToObject={};this.postMixInProperties&&this.postMixInProperties();
this.id=b.id=b.id||this.id||t.autoIdPrefix+q++;this.buildRendering();c&&f.call(this,c);this.postCreate();delete this.srcNodeRef;this.domNode.offsetHeight&&this.startup()},buildRendering:function(){var a=this.domNode,b=this.addUiClasses,e=this,f,g,m;m=this.isRTL="rtl"===(document.body.dir||document.documentElement.dir||document.body.style.direction).toLowerCase();a.className="";a.setAttribute("role","grid");l.add(a,"dgrid dgrid-"+this.listType+(b?" ui-widget":""));f=this.headerNode=n.create("div",
{className:"dgrid-header dgrid-header-row"+(b?" ui-widget-header":"")+(this.showHeader?"":" dgrid-header-hidden")},a);g=this.bodyNode=n.create("div",{className:"dgrid-scroller"},a);g.tabIndex=-1;this.headerScrollNode=n.create("div",{className:"dgrid-header dgrid-header-scroll dgrid-scrollbar-width"+(b?" ui-widget-header":"")},a);this.footerNode=n.create("div",{className:"dgrid-footer"+(this.showFooter?"":" dgrid-footer-hidden")},a);m&&(a.className+=" dgrid-rtl"+(d("dom-rtl-scrollbar-left")?" dgrid-rtl-swap":
""));k(g,"scroll",function(b){e.showHeader&&(f.scrollLeft=b.scrollLeft||g.scrollLeft);b.stopPropagation();k.emit(a,"scroll",{scrollTarget:g})});this.configStructure();this.renderHeader();this.contentNode=this.touchNode=n.create("div",{className:"dgrid-content"+(b?" ui-widget-content":"")},this.bodyNode);"string"===typeof this.resizeThrottleMethod&&h[this.resizeThrottleMethod]?b=h[this.resizeThrottleMethod](u,this,this.resizeThrottleDelay):"function"===typeof this.resizeThrottleMethod?b=this.resizeThrottleMethod(c.hitch(this,
u),this.resizeThrottleDelay):(console.warn("Invalid value specified for resizeThrottleMethod:  "+this.resizeThrottleMethod),b=h.throttleDelayed(u,this,this.resizeThrottleDelay));this._resizeHandle=k(window,"resize",b);this._listeners.push(this._resizeHandle)},postCreate:function(){},startup:function(){this._started||(this.inherited(arguments),this._started=!0,this.resize(),this.set("sort",this.sort))},configStructure:function(){},resize:function(){var a=this.bodyNode,b=this.footerNode,b=this.showFooter?
b.offsetHeight:0;this.headerScrollNode.style.height=a.style.marginTop=this.headerNode.offsetHeight+"px";a.style.marginBottom=b+"px";e||(e=d("dom-scrollbar-width"),m=d("dom-scrollbar-height"),d("ie")&&(e++,m++),h.addCssRule(".dgrid-scrollbar-width","width: "+e+"px"),h.addCssRule(".dgrid-scrollbar-height","height: "+m+"px"),17!==e&&(h.addCssRule(".dgrid-header-row","right: "+e+"px"),h.addCssRule(".dgrid-rtl-swap .dgrid-header-row","left: "+e+"px")))},addCssRule:function(a,b){a=h.addCssRule(a,b);this.cleanAddedRules&&
this._listeners.push(a);return a},on:function(a,b){return k(this.domNode,a,b)},cleanup:function(){for(var a in this._rowIdToObject)if(this._rowIdToObject[a]!==this.columns){var b=document.getElementById(a);b&&this.removeRow(b,!0)}},destroy:function(){if(this._listeners){for(var a=this._listeners.length;a--;)this._listeners[a].remove();this._listeners=null}this._started=!1;this.cleanup();n.destroy(this.domNode)},refresh:function(){this.cleanup();this._rowIdToObject={};this._autoRowId=0;this.contentNode.innerHTML=
"";this.scrollTo({x:0,y:0})},highlightRow:function(a,b){var c="dgrid-highlight"+(this.addUiClasses?" ui-state-highlight":"");a=a.element||a;l.add(a,c);setTimeout(function(){l.remove(a,c)},b||this.highlightDuration)},adjustRowIndices:function(a){var b=a.rowIndex;if(-1<b){do-1<a.rowIndex&&(this.maintainOddEven&&l.contains(a,"dgrid-row")&&l.replace(a,1===b%2?"dgrid-row-odd":"dgrid-row-even",0===b%2?"dgrid-row-odd":"dgrid-row-even"),a.rowIndex=b++);while((a=a.nextSibling)&&a.rowIndex!==b)}},renderArray:function(a,
b,c){c=c||{};var d=c.start||0,e=document.createDocumentFragment(),f=[],g=0,h=a.length;b||(this._lastCollection=a);for(;g<h;)f[g]=this.insertRow(a[g],e,null,d++,c),g++;(a=b?b.parentNode:this.contentNode)&&a.parentNode&&(a!==this.contentNode||h)&&(a.insertBefore(e,b||null),h&&this.adjustRowIndices(f[h-1]));return f},renderHeader:function(){},_autoRowId:0,insertRow:function(a,b,c,d,e){var f=this.id+"-row-"+(this.collection&&this.collection.getIdentity?this.collection.getIdentity(a):this._autoRowId++),
g=document.getElementById(f),h=g&&g.previousSibling;g&&(g===c&&(c=(c.connected||c).nextSibling),this.removeRow(g,!1,e));g=this.renderRow(a,e);g.className=(g.className||"")+" dgrid-row "+(1===d%2?"dgrid-row-odd":"dgrid-row-even")+(this.addUiClasses?" ui-state-default":"");this._rowIdToObject[g.id=f]=a;b.insertBefore(g,c||null);g.rowIndex=d;h&&h.rowIndex!==g.rowIndex-1&&this.adjustRowIndices(h);return g},renderRow:function(a){var b=document.createElement("div");b.appendChild(document.createTextNode(a));
return b},removeRow:function(a,b){a=a.element||a;delete this._rowIdToObject[a.id];b||n.destroy(a)},row:function(a){var b;if(a instanceof this._Row)return a;a.target&&a.target.nodeType&&(a=a.target);if(a.nodeType){do{var c=a.id;if(b=this._rowIdToObject[c])return new this._Row(c.substring(this.id.length+5),b,a);a=a.parentNode}while(a&&a!==this.domNode)}else return"object"===typeof a?b=this.collection.getIdentity(a):(b=a,a=this._rowIdToObject[this.id+"-row-"+b]),new this._Row(b,a,document.getElementById(this.id+
"-row-"+b))},cell:function(a){return{row:this.row(a)}},_move:function(a,b,c,d){var e,f;f=e=a.element;b=b||1;do if(a=e[0>b?"previousSibling":"nextSibling"]){do if((e=a)&&-1<(e.className+" ").indexOf(c+" ")){f=e;b+=0>b?1:-1;break}while(a=(!d||!e.hidden)&&e[0>b?"lastChild":"firstChild"])}else if(e=e.parentNode,!e||e===this.bodyNode||e===this.headerNode)break;while(b);return f},up:function(a,b,c){a.element||(a=this.row(a));return this.row(this._move(a,-(b||1),"dgrid-row",c))},down:function(a,b,c){a.element||
(a=this.row(a));return this.row(this._move(a,b||1,"dgrid-row",c))},scrollTo:function(a){"undefined"!==typeof a.x&&(this.bodyNode.scrollLeft=a.x);"undefined"!==typeof a.y&&(this.bodyNode.scrollTop=a.y)},getScrollPosition:function(){return{x:this.bodyNode.scrollLeft,y:this.bodyNode.scrollTop}},get:function(a){var b="_get"+a.charAt(0).toUpperCase()+a.slice(1);return"function"===typeof this[b]?this[b].apply(this,[].slice.call(arguments,1)):this[a]},set:function(a,b){if("object"===typeof a)for(var c in a)this.set(c,
a[c]);else c="_set"+a.charAt(0).toUpperCase()+a.slice(1),"function"===typeof this[c]?this[c].apply(this,[].slice.call(arguments,1)):this[a]=b;return this},_getClass:b,_setClass:f,_getClassName:b,_setClassName:f,_setSort:function(a,b){this.sort="string"!==typeof a?a:[{property:a,descending:b}];this._applySort()},_applySort:function(){this.refresh();if(this._lastCollection){var a=this.sort;if(a&&0<a.length){var b=a[0].property,c=!!a[0].descending;this._lastCollection.sort(function(a,d){a=a[b];d=d[b];
void 0===a&&(a="");void 0===d&&(d="");return a===d?0:a>d!==c?1:-1})}this.renderArray(this._lastCollection)}},_setShowHeader:function(a){var b=this.headerNode;this.showHeader=a;l.toggle(b,"dgrid-header-hidden",!a);this.renderHeader();this.resize();a&&(b.scrollLeft=this.getScrollPosition().x)},_setShowFooter:function(a){this.showFooter=a;l.toggle(this.footerNode,"dgrid-footer-hidden",!a);this.resize()}});t.autoIdPrefix="dgrid_";return t})},"dgrid/util/misc":function(){define(["dojo/has"],function(p){var c=
[],n,l,k,d=/([^A-Za-z0-9_\u00A0-\uFFFF-])/g,h=setTimeout,g=clearTimeout;p.add("requestidlecallback",function(b){return"function"===typeof b.requestIdleCallback});var f={defaultDelay:15,throttle:function(b,a,c){var d=!1;c=c||f.defaultDelay;return function(){d||(d=!0,b.apply(a,arguments),h(function(){d=!1},c))}},throttleDelayed:function(b,a,c){var d=!1;c=c||f.defaultDelay;return function(){if(!d){d=!0;var e=arguments;h(function(){d=!1;b.apply(a,e)},c)}}},debounce:function(b,a,c){var d;c=c||f.defaultDelay;
return function(){d&&(g(d),d=null);var e=arguments;d=h(function(){d=null;b.apply(a,e)},c)}},each:function(b,a,c){var d,e;if(b)if("number"===typeof b.length)for(d=0,e=b.length;d<e;d++)a.call(c,b[d],d,b);else for(d in b)a.call(c,b[d],d,b)},addCssRule:function(b,a){n||(n=document.createElement("style"),document.getElementsByTagName("head")[0].appendChild(n),n=n.sheet||n.styleSheet,l=n.deleteRule?"deleteRule":"removeRule",k=n.cssRules?"cssRules":"rules");var d=c.length;c[d]=(n.cssRules||n.rules).length;
n.addRule?n.addRule(b,a):n.insertRule(b+"{"+a+"}",c[d]);return{get:function(a){return n[k][c[d]].style[a]},set:function(a,b){"undefined"!==typeof c[d]&&(n[k][c[d]].style[a]=b)},remove:function(){var a=c[d],b,e;if(void 0!==a)for(n[l](a),c[d]=void 0,b=d+1,e=c.length;b<e;b++)c[b]>a&&c[b]--}}},escapeCssIdentifier:function(b,a){return"string"===typeof b?b.replace(d,a||"\\$1"):b}};return f})},"dgrid/OnDemandList":function(){define("./List ./_StoreMixin dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/on dojo/when dojo/query ./util/misc".split(" "),
function(p,c,n,l,k,d,h,g,f){function b(a){return a&&(0<=a.className.indexOf("dgrid-row")||0<=a.className.indexOf("dgrid-loading"))}function a(a){return a&&0<=a.className.indexOf("dgrid-preload")}var e=0;return n([p,c],{minRowsPerPage:25,maxRowsPerPage:250,maxEmptySpace:Infinity,bufferRows:10,farOffRemoval:2E3,queryRowsOverlap:0,pagingMethod:"debounce",pagingDelay:f.defaultDelay,keepScrollPosition:!1,rowHeight:0,_deleteQueue:[],postCreate:function(){this.inherited(arguments);var a=this;d(this.bodyNode,
"scroll",f[this.pagingMethod](function(b){a._processScroll(b)},null,this.pagingDelay))},renderQuery:function(a,b){var c=this,d=b&&b.container||this.contentNode,f,g,m,n,q=0,p=b&&b.start||0;"level"in a&&(q=n=a.level);f={query:a,count:0,level:q,top:!1};var A={node:k.create("div",{className:"dgrid-preload",style:{height:"0"}},d),count:0,query:a,next:f,level:q,top:!0};g=A.node;g.rowIndex=0;f.previous=A;m=f.node=k.create("div",{className:"dgrid-preload",style:{height:"0"}},d);A.id=e++;g.setAttribute("data-preloadid",
A.id);f.id=e++;m.setAttribute("data-preloadid",f.id);m.rowIndex=this.minRowsPerPage;c._insertPreload(A);var B=k.create("div",{className:"dgrid-loading"},m,"before");k.create("div",{className:"dgrid-below"},B).innerHTML=this.loadingMessage;b=l.mixin({start:0,count:this.minRowsPerPage},b);null!=n&&(b.queryLevel=n);return this._trackError(function(){var d=a(b);return c.renderQueryResults(d,m,b).then(function(a){return d.totalLength.then(function(d){var e=a.length,l=m.parentNode;!c._rows||"queryLevel"in
b||(c._rows.min=0,c._rows.max=e===d?Infinity:e-1);k.destroy(B);"queryLevel"in b||(c._total=d);0===d&&l&&(c.noDataNode&&k.destroy(c.noDataNode),c._insertNoDataNode(l));A.count=p;f.count=d-e-p;m.rowIndex=p+e;d?c._updatePreloadRowHeights(A):(m.style.display="none",g.style.display="none");c._previousScrollPosition&&l.offsetHeight&&(c.scrollTo(c._previousScrollPosition),delete c._previousScrollPosition);return h(c._processScroll()).then(function(){return a})})}).otherwise(function(a){k.destroy(B);throw a;
})})},_insertPreload:function(a){var b=this.preload;if(b){for(;b.node.compareDocumentPosition(a.node)&Node.DOCUMENT_POSITION_PRECEDING;)if(b=b.previous,null==b)return;for(;b.node.compareDocumentPosition(a.node)&Node.DOCUMENT_POSITION_FOLLOWING&&b.next;)b=b.next;b.previous.next=a;a.previous=b.previous;a=a.next;a.next=b;b.previous=a}else this.preload=a},refresh:function(a){var b=this,c=a&&a.keepScrollPosition;"undefined"===typeof c&&(c=this.keepScrollPosition);c&&(this._previousScrollPosition=this.getScrollPosition());
this.inherited(arguments);if(this._renderedCollection)return this.renderQuery(function(a){return b._renderedCollection.fetchRange({start:a.start,end:a.start+a.count})}).then(function(){b._emitRefreshComplete()})},resize:function(){this.inherited(arguments);this._processScroll()},cleanup:function(){this.inherited(arguments);this.preload=null},renderQueryResults:function(a){var b=this.inherited(arguments),c=this._getRenderedCollection(this.preload);c&&c.releaseRange&&b.then(function(b){b[0]&&!b[0].parentNode.tagName&&
a.totalLength.then(function(){c.releaseRange(b[0].rowIndex,b[b.length-1].rowIndex+1)})});return b},_getFirstRowSibling:function(a){return a.lastChild},_calcRowHeight:function(a){var b=a.nextSibling;return b&&!/\bdgrid-preload\b/.test(b.className)?b.offsetTop-a.offsetTop:a.offsetHeight},_calcAverageRowHeight:function(a){for(var b=a.length,c=0,d=0;d<b;d++)c+=this._calcRowHeight(a[d]);return b&&c?c/b:0},_updatePreloadRowHeights:function(){var a=this.preload;if(a){for(;a.previous;)a=a.previous;for(;a;)a.rowHeight||
(a.rowHeight=this.rowHeight||this._calcAverageRowHeight(a.node.parentNode.querySelectorAll(".dgrid-row")),this._adjustPreloadHeight(a)),a=a.next}},lastScrollTop:0,_processScroll:function(c){function d(a,b){b=b?"next":"previous";for(var c;c=a[b];)a=c;return a}function e(c,e){function f(){var b;a:{b=!e;for(var d=c;d=d[e?"previous":"next"];)if(b===d.top){b=d;break a}b=void 0}if(b&&k!==b&&!a(b.top?b.node.nextSibling:b.node.previousSibling))return h(),c=b,r=c.node,m=e?c.node.offsetTop-p:n-(c.node.offsetTop+
c.node.offsetHeight),w=(b=g(r))&&b.rowIndex,x=void 0,b}function g(c){var d=a(c);(c=c[u])&&!b(c)&&(c=d&&a(c)?null:(d=f())?d:g(c));return c}function h(){c.count+=t;e&&(r.rowIndex-=t);l._adjustPreloadHeight(c);t=0;l._releaseRange(c,e,w,x)}var k=c;c=d(c,e);var m=e?c.node.offsetTop-p:n-(c.node.offsetTop+c.node.offsetHeight),q=l.farOffRemoval,r=c.node,u=e?"previousSibling":"nextSibling",t=0,v=0,w,x;if(m>2*q){var z;w=(z=g(r))&&z.rowIndex;for(x=void 0;z&&k!==c;){var y=l._calcRowHeight(z);v+y+q>m||!b(z)?z=
f():(v+=y,t+=z.count||1,l._pruneRow(z,e),"rowIndex"in z&&(x=z.rowIndex),z=g(z))}h();l._deleteNodeQueue()}}function f(a,b){do a=b?a.next:a.previous;while(a&&!a.node.offsetWidth);return a}var g=this.preload,h;this._updatePreloadRowHeights();if(h=g&&g.rowHeight){var l=this,m=l.bodyNode,n=c&&c.scrollTop||this.getScrollPosition().y,p=m.offsetHeight+n,A;c=l.lastScrollTop;var m=l.bufferRows*h,B=m-h,D,C=!0;for(l.lastScrollTop=n;g&&!g.node.offsetWidth;)g=g.previous;for(;g&&g!==A;){A=l.preload;l.preload=g;
h=g.node;var E=h.offsetTop;if(p+1+B<E)g=f(g,C=!1);else if(n-1-B>E+h.offsetHeight)g=f(g,C=!0);else{var E=((h.top?n-m:p)-E)/g.rowHeight,H=(p-n+2*m)/g.rowHeight,H=H+Math.min(Math.abs(Math.max(Math.min((n-c)*g.rowHeight,l.maxRowsPerPage/2),l.maxRowsPerPage/-2)),10);h.top&&(E-=H);E=Math.max(E,0);10>E&&0<E&&H+E<l.maxRowsPerPage&&(H+=Math.max(0,E),E=0);H=Math.min(Math.max(H,l.minRowsPerPage),l.maxRowsPerPage,g.count);if(0===H)g=f(g,C);else{var H=Math.ceil(H),E=Math.min(Math.floor(E),g.count-H),G={};g.count-=
H;var I=h,K,M=l.queryRowsOverlap,T=!g.top&&g;T?(g.previous&&(e(g),0<E&&a(h.previousSibling)?(E=Math.min(g.count,E),g.previous.count+=E,l._adjustPreloadHeight(g.previous,!0),h.rowIndex+=E,M=0):H+=E,g.count-=E),G.start=h.rowIndex-M,G.count=Math.min(H+M,l.maxRowsPerPage),h.rowIndex=G.start+G.count):(g.next&&(I=h.nextSibling,e(g,!0),a(h.nextSibling)?(g.next.count+=g.count-E,g.next.node.rowIndex=E+H,l._adjustPreloadHeight(g.next),g.count=E,M=0,I=g.next.node):K=!0),G.start=g.count,G.count=Math.min(H+M,
l.maxRowsPerPage),G.scrollingUp=!0);K&&I&&I.offsetWidth&&(K=I.offsetTop);l._adjustPreloadHeight(g);"level"in g.query&&(G.queryLevel=g.query.level);if("queryLevel"in G||!(G.start>l._total||0>G.count)){var N=k.create("div",{className:"dgrid-loading",style:{height:H*g.rowHeight+"px"}},I,"before");k.create("div",{className:"dgrid-"+(T?"below":"above"),innerHTML:l.loadingMessage},N);N.count=H;l._trackError(function(){(function(a,b,c){var d=g.query(G);D=l.renderQueryResults(d,a,G).then(function(e){var f=
l._rows;!f||"queryLevel"in G||!e.length||(b?(f.max<=f.min&&(f.min=e[0].rowIndex),f.max=e[e.length-1].rowIndex):(f.max<=f.min&&(f.max=e[e.length-1].rowIndex),f.min=e[0].rowIndex));I=a.nextSibling;k.destroy(a);c&&I&&I.offsetWidth&&l.scrollTo({y:l.bodyNode.scrollTop+I.offsetTop-c});d.totalLength.then(function(a){"queryLevel"in G||(l._total=a,l._rows&&l._rows.max>=l._total-1&&(l._rows.max=Infinity));b&&(b.count=a-b.node.rowIndex,l._adjustPreloadHeight(b))});l._processScroll();return e},function(b){k.destroy(a);
throw b;})})(N,T,K)});g=g.previous}}}}return D}},_adjustPreloadHeight:function(a,b){a.node.style.height=this._calculatePreloadHeight(a,b)+"px"},_calculatePreloadHeight:function(a,b){return Math.min(a.count*a.rowHeight,b?Infinity:this.maxEmptySpace)},_pruneRow:function(a,b,c){this.removeRow(a,!0,c);this._queueNodeForDeletion(a)},_queueNodeForDeletion:function(a){this._deleteQueue.push(a)},_deleteNodeQueue:function(){for(var a=document.createElement("div"),b=this._deleteQueue,c=b.length;c--;)a.appendChild(b[c]);
this._deleteQueue=[];setTimeout(function(){k.destroy(a)},1)},_removePreloads:function(a){if(a&&a.length){var b=this,c=this._getHeadPreload();a.forEach(function(a){if(a=b._findPreload(a,c))a.previous&&(a.previous.next=a.next),a.next&&(a.next.previous=a.previous)})}},_getHeadPreload:function(){var a=this.preload;if(a)for(;a.previous;)a=a.previous;return a},_findPreload:function(a,b){for(b||(b=this._getHeadPreload());b;){if(b.node===a)return b;b=b.next}},_getRenderedCollection:function(){return this._renderedCollection},
_releaseRange:function(a,b,c,d){if(a){var e=a.level;a=this._getRenderedCollection(a);null!=d&&a.releaseRange&&"number"===typeof c&&"number"===typeof d&&(b?a.releaseRange(d,c+1):a.releaseRange(c,d+1),this._rows&&!e&&(this._rows[b?"max":"min"]=d,this._rows.max>=this._total-1&&(this._rows.max=Infinity)))}}})})},"dgrid/_StoreMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/aspect dojo/dom-construct dojo/has dojo/on dojo/when".split(" "),function(p,c,n,l,k,d,h,g){function f(b){if("object"!==
typeof b)b=Error(b);else if("cancel"===b.dojoType)return;h.emit(this.domNode,"dgrid-error",{grid:this,error:b,cancelable:!0,bubbles:!0})&&console.error(b)}return p(null,{collection:null,_renderedCollection:null,_rows:null,_observerHandle:null,shouldTrackCollection:!0,getBeforePut:!0,noDataMessage:"",loadingMessage:"",_total:0,constructor:function(){this.dirty={};this._updating={};this._columnsWithSet={};l.before(this,"configStructure",c.hitch(this,function(){this._columnsWithSet={}}))},destroy:function(){this.inherited(arguments);
this._renderedCollection&&this._cleanupCollection();this._refreshTimeout&&clearTimeout(this._refreshTimeout)},_configColumn:function(b){b.set&&(this._columnsWithSet[b.field]=b);this.inherited(arguments)},_setCollection:function(b){this._renderedCollection&&(this.cleanup(),this._cleanupCollection({shouldRevert:!b||b.storage!==this._renderedCollection.storage}));this.collection=b;if(this._started){if(b){var a=b;this.sort&&0<this.sort.length&&(a=b.sort(this.sort));a.track&&this.shouldTrackCollection&&
(a=a.track(),this._rows=[],this._observerHandle=this._observeCollection(a,this.contentNode,{rows:this._rows}));this._renderedCollection=a}this.refresh()}},_setStore:function(){this.collection||console.debug("set('store') call detected, but you probably meant set('collection')")},_getTotal:function(){return this._total},_cleanupCollection:function(b){b=b||{};this._renderedCollection.tracking&&this._renderedCollection.tracking.remove();this._observerHandle&&(this._observerHandle.remove(),this._observerHandle=
this._rows=null);!1!==b.shouldRevert&&(this.dirty={});this._renderedCollection=this.collection=null},_applySort:function(){this.collection?this.set("collection",this.collection):this.store&&console.debug("_StoreMixin found store property but not collection; this is often the sign of a mistake during migration from 0.3 to 0.4")},_emitRefreshComplete:function(){var b=this;this._refreshTimeout=setTimeout(function(){h.emit(b.domNode,"dgrid-refresh-complete",{bubbles:!0,cancelable:!1,grid:b});b._refreshTimeout=
null},0)},_insertNoDataNode:function(b){this._removeNoDataNode();b=b||this.contentNode;var a=this.noDataNode=k.create("div",{className:"dgrid-no-data",innerHTML:this.noDataMessage});b.insertBefore(a,this._getFirstRowSibling?this._getFirstRowSibling(b):null);return a},_removeNoDataNode:function(){return this.noDataNode?(k.destroy(this.noDataNode),delete this.noDataNode,!0):!1},row:function(){var b=this.inherited(arguments);b&&b.data&&"undefined"!==typeof b.id&&(b.id=this.collection.getIdentity(b.data));
return b},refresh:function(){var b=this.inherited(arguments);this.collection||this._insertNoDataNode();return b},refreshCell:function(b){if(!this.collection||!this._createBodyRowCell)throw Error("refreshCell requires a Grid with a collection.");this.inherited(arguments);return this.collection.get(b.row.id).then(c.hitch(this,"_refreshCellFromItem",b))},_refreshCellFromItem:function(b,a,d){var e=b.element;k.empty(e);var f=this.dirty&&this.dirty[b.row.id];f&&(a=c.delegate(a,f));this._createBodyRowCell(e,
b.column,a,d)},renderArray:function(){var b=this.inherited(arguments);this.collection||b.length&&this.noDataNode&&k.destroy(this.noDataNode);return b},insertRow:function(b,a,d,f,g){var e=this.collection,h=this.dirty,e=e&&e.getIdentity(b),l;e in h&&!(e in this._updating)&&(l=h[e]);l&&(b=c.delegate(b,l));h=this.inherited(arguments);g&&g.rows&&(g.rows[f]=h);this.noDataNode&&(k.destroy(this.noDataNode),this.noDataNode=null);return h},updateDirty:function(b,a,c){var d=this.dirty,e=d[b];e||(e=d[b]={});
e[a]=c},save:function(){function b(b,e){return function(f){var h=a._columnsWithSet,k=a._updating,l,m;if("function"===typeof f.set)f.set(e);else for(l in e)f[l]=e[l];for(l in h)m=h[l].set(f),void 0!==m&&(f[l]=m);k[b]=!0;return c.put(f).then(function(a){delete d[b];delete k[b];g[b]=a;return g})}}var a=this,c=this.collection,d=this.dirty,f=new n,g={},h=function(b){var d;return a.getBeforePut||!(d=a.row(b).data)?function(){return c.get(b)}:function(){return d}},k=f.then(function(){return g}),l;for(l in d)var p=
b(l,d[l]),k=k.then(h(l)).then(p);f.resolve();return k},revert:function(){this.dirty={};this.refresh()},_trackError:function(b){"string"===typeof b&&(b=c.hitch(this,b));var a=this,d;try{d=g(b())}catch(m){b=new n,b.reject(m),d=b.promise}d.otherwise(function(b){f.call(a,b)});return d},removeRow:function(b,a,c){var d={element:b};a||this.up(d).element!==b||this.down(d).element!==b||this._insertNoDataNode();(d=c&&c.rows||this._rows)&&delete d[b.rowIndex];return this.inherited(arguments)},renderQueryResults:function(b,
a,d){d=c.mixin({rows:this._rows},d);var e=this;return b.then(function(b){b=e.renderArray(b,a,d);delete e._lastCollection;return b})},_observeCollection:function(b,a,c){var d=this,e=c.rows,f,g=[b.on("delete, update",function(b){var g=b.previousIndex,h=b.index;void 0!==g&&e[g]&&("max"in e&&(void 0===h||h<e.min||h>e.max)&&e.max--,f=e[g],f.parentNode===a&&d.removeRow(f,!1,c),e.splice(g,1),("delete"===b.type||"update"===b.type&&(g<h||void 0===h))&&e[g]&&e[g].rowIndex--);"delete"===b.type&&(f=null)}),b.on("add, update",
function(b){var g=b.previousIndex,h=b.index;if(void 0!==h&&(!("max"in e)||h>=e.min&&h<=e.max)){"max"in e&&(void 0===g||g<e.min||g>e.max)&&e.max++;if(e.length){if(g=e[h],!g&&(g=e[h-1]))g=(g.connected||g).nextSibling}else g=d._getFirstRowSibling&&d._getFirstRowSibling(a);f&&g&&f.id===g.id&&(g=(g.connected||g).nextSibling);g&&!g.parentNode&&(g=document.getElementById(g.id));e.splice(h,0,void 0);f=d.insertRow(b.target,a,g,h,c);d.highlightRow(f)}f=null}),b.on("add, delete, update",function(a){var c="undefined"!==
typeof a.previousIndex?a.previousIndex:Infinity,f="undefined"!==typeof a.index?a.index:Infinity,g=Math.min(c,f);c!==f&&e[g]&&d.adjustRowIndices(e[g]);Infinity!==c&&d._processScroll&&(e[c]||e[c-1])&&d._processScroll();d._onNotification(e,a,b);b===d._renderedCollection&&"totalLength"in a&&(d._total=a.totalLength)})];return{remove:function(){for(;0<g.length;)g.pop().remove()}}},_onNotification:function(){}})})},"dgrid/Selection":function(){define("dojo/_base/declare dojo/dom-class dojo/on dojo/has dojo/aspect ./List dojo/has!touch?./util/touch dojo/query dojo/_base/sniff dojo/dom".split(" "),
function(p,c,n,l,k,d,h){function g(a,b){b=a.unselectable=b?"on":"";a=a.getElementsByTagName("*");for(var c=a.length;--c;)"INPUT"!==a[c].tagName&&"TEXTAREA"!==a[c].tagName&&(a[c].unselectable=b)}function f(a,c){var d=a.bodyNode,e=c?"text":"-moz-none";b&&"msUserSelect"!==b?d.style[b]=e:l("dom-selectstart")?c||a._selectstartHandle?c&&a._selectstartHandle&&(a._selectstartHandle.remove(),delete a._selectstartHandle):a._selectstartHandle=n(d,"selectstart",function(a){var b=a.target&&a.target.tagName;"INPUT"!==
b&&"TEXTAREA"!==b&&a.preventDefault()}):(g(d,!c),c||a._unselectableHandle)?c&&a._unselectableHandle&&(a._unselectableHandle.remove(),delete a._unselectableHandle):a._unselectableHandle=k.after(a,"renderRow",function(a){g(a,!0);return a})}l.add("dom-comparedocumentposition",function(a,b,c){return!!c.compareDocumentPosition});l.add("dom-selectstart","undefined"!==typeof document.onselectstart);var b=l("css-user-select"),a=(d=l("pointer"))&&"MS"===d.slice(0,2),e=d?d+(a?"Down":"down"):"mousedown",m=d?
d+(a?"Up":"up"):"mouseup";"WebkitUserSelect"===b&&"undefined"!==typeof document.documentElement.style.msUserSelect&&(b=!1);return p(null,{selectionDelegate:".dgrid-row",selectionEvents:e+","+m+",dgrid-cellfocusin",selectionTouchEvents:l("touch")?h.tap:null,deselectOnRefresh:!0,allowSelectAll:!1,selection:{},selectionMode:"extended",allowTextSelection:void 0,_selectionTargetType:"rows",create:function(){this.selection={};return this.inherited(arguments)},postCreate:function(){this.inherited(arguments);
this._initSelectionEvents();var a=this.selectionMode;this.selectionMode="";this._setSelectionMode(a)},destroy:function(){this.inherited(arguments);this._selectstartHandle&&this._selectstartHandle.remove();this._unselectableHandle&&this._unselectableHandle.remove();this._removeDeselectSignals&&this._removeDeselectSignals()},_setSelectionMode:function(a){a!==this.selectionMode&&(this.clearSelection(),this.selectionMode=a,this._selectionHandlerName="_"+a+"SelectionHandler",this._setAllowTextSelection(this.allowTextSelection))},
_setAllowTextSelection:function(a){"undefined"!==typeof a?f(this,a):f(this,"none"===this.selectionMode);this.allowTextSelection=a},_handleSelect:function(a,b){if(this[this._selectionHandlerName]&&this.allowSelect(this.row(b))&&("dgrid-cellfocusin"!==a.type||"mousedown"!==a.parentType)&&(a.type!==m||b===this._waitForMouseUp)){this._waitForMouseUp=null;this._selectionTriggerEvent=a;if(!a.keyCode||!a.ctrlKey||32===a.keyCode)if(!a.shiftKey&&a.type===e&&this.isSelected(b))this._waitForMouseUp=b;else this[this._selectionHandlerName](a,
b);this._selectionTriggerEvent=null}},_singleSelectionHandler:function(a,b){a=a.keyCode?a.ctrlKey:a.metaKey;this._lastSelected===b?this.select(b,null,!a||!this.isSelected(b)):(this.clearSelection(),this.select(b),this._lastSelected=b)},_multipleSelectionHandler:function(a,b){var c=this._lastSelected,d=a.keyCode?a.ctrlKey:a.metaKey,e;a.shiftKey||(e=d?null:!0,c=null);this.select(b,c,e);c||(this._lastSelected=b)},_extendedSelectionHandler:function(a,b){(2===a.button?this.isSelected(b):a.keyCode?a.ctrlKey:
a.metaKey)||this.clearSelection(null,!0);this._multipleSelectionHandler(a,b)},_toggleSelectionHandler:function(a,b){this.select(b,null,null)},_initSelectionEvents:function(){var a=this,b=this.contentNode,c=this.selectionDelegate;this._selectionEventQueues={deselect:[],select:[]};l("touch")&&!l("pointer")&&this.selectionTouchEvents?(n(b,h.selector(c,this.selectionTouchEvents),function(b){a._handleSelect(b,this);a._ignoreMouseSelect=this}),n(b,n.selector(c,this.selectionEvents),function(b){a._ignoreMouseSelect!==
this?a._handleSelect(b,this):b.type===m&&(a._ignoreMouseSelect=null)})):n(b,n.selector(c,this.selectionEvents),function(b){a._handleSelect(b,this)});this.addKeyHandler&&this.addKeyHandler(32,function(b){a._handleSelect(b,b.target)});if(this.allowSelectAll)this.on("keydown",function(b){b.metaKey&&65===b.keyCode&&!/\bdgrid-input\b/.test(b.target.className)&&(b.preventDefault(),a[a.allSelected?"clearSelection":"selectAll"]())});this._setCollection&&k.before(this,"_setCollection",function(b){a._updateDeselectionAspect(b)});
this._updateDeselectionAspect()},_updateDeselectionAspect:function(a){function b(a,b){if((a=c.row(a))&&c.selection[a.id])c[b](a)}var c=this,d;this._removeDeselectSignals&&this._removeDeselectSignals();d=a&&a.track&&this._observeCollection?[k.before(this,"_observeCollection",function(a){d.push(a.on("delete",function(a){"undefined"===typeof a.index&&b(a.id,"deselect")}))}),k.after(this,"_observeCollection",function(a){d.push(a.on("update",function(c){"undefined"!==typeof c.index&&b(a.getIdentity(c.target),
"select")}))},!0)]:[k.before(this,"removeRow",function(a,b){b||(a=this.row(a))&&a.id in this.selection&&this.deselect(a)})];this._removeDeselectSignals=function(){for(var a=d.length;a--;)d[a].remove();d=[]}},allowSelect:function(){return!0},_fireSelectionEvent:function(a){var b=this._selectionEventQueues[a],c=this._selectionTriggerEvent,d;d={bubbles:!0,grid:this};c&&(d.parentType=c.type);d[this._selectionTargetType]=b;this._selectionEventQueues[a]=[];n.emit(this.contentNode,"dgrid-"+a,d)},_fireSelectionEvents:function(){var a=
this._selectionEventQueues,b;for(b in a)a[b].length&&this._fireSelectionEvent(b)},_select:function(a,b,d){var e,f,g;"undefined"===typeof d&&(d=!0);a.element||(a=this.row(a));if(!1===d||this.allowSelect(a))if(e=this.selection,f=!!e[a.id],null===d&&(d=!f),g=a.element,d||this.allSelected?e[a.id]=d:delete this.selection[a.id],g&&(d?c.add(g,"dgrid-selected"+(this.addUiClasses?" ui-state-active":"")):c.remove(g,"dgrid-selected ui-state-active")),d!==f&&g&&this._selectionEventQueues[(d?"":"de")+"select"].push(a),
b)if(b.element||(b=this.row(b)),b){if(b=b.element)for(e=this._determineSelectionDirection(g,b),e||(b=document.getElementById(b.id),e=this._determineSelectionDirection(g,b));a.element!==b&&(a=this[e](a));)this._select(a,null,d)}else this._lastSelected=g,console.warn("The selection range has been reset because the beginning of the selection is no longer in the DOM. If you are using OnDemandList, you may wish to increase farOffRemoval to avoid this, but note that keeping more nodes in the DOM may impact performance.")},
_determineSelectionDirection:l("dom-comparedocumentposition")?function(a,b){a=b.compareDocumentPosition(a);return a&1?!1:2===a?"down":"up"}:function(a,b){return 1>b.sourceIndex?!1:b.sourceIndex>a.sourceIndex?"down":"up"},select:function(a,b,c){this._select(a,b,c);this._fireSelectionEvents()},deselect:function(a,b){this.select(a,b,!1)},clearSelection:function(a,b){this.allSelected=!1;for(var c in this.selection)a!==c&&this._select(c,null,!1);b||(this._lastSelected=null);this._fireSelectionEvents()},
selectAll:function(){this.allSelected=!0;this.selection={};for(var a in this._rowIdToObject){var b=this.row(this._rowIdToObject[a]);this._select(b.id,null,!0)}this._fireSelectionEvents()},isSelected:function(a){if("undefined"===typeof a||null===a)return!1;a.element||(a=this.row(a));return a.id in this.selection?!!this.selection[a.id]:this.allSelected&&(!a.data||this.allowSelect(a))},refresh:function(){this.deselectOnRefresh&&this.clearSelection();this._lastSelected=null;return this.inherited(arguments)},
renderArray:function(){var a=this.inherited(arguments),b=this.selection,c,d,e;for(c=0;c<a.length;c++)d=this.row(a[c]),(e=d.id in b?b[d.id]:this.allSelected)&&this.select(d,null,e);this._fireSelectionEvents();return a}})})},"dojo/store/Memory":function(){define(["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(p,c,n){return p("dojo.store.Memory",null,{constructor:function(c){for(var k in c)this[k]=c[k];this.setData(this.data||[])},data:null,idProperty:"id",index:null,queryEngine:n,
get:function(c){return this.data[this.index[c]]},getIdentity:function(c){return c[this.idProperty]},put:function(c,k){var d=this.data,h=this.index,g=this.idProperty,g=c[g]=k&&"id"in k?k.id:g in c?c[g]:Math.random();if(g in h){if(k&&!1===k.overwrite)throw Error("Object already exists");d[h[g]]=c}else h[g]=d.push(c)-1;return g},add:function(c,k){(k=k||{}).overwrite=!1;return this.put(c,k)},remove:function(c){var k=this.index,d=this.data;if(c in k)return d.splice(k[c],1),this.setData(d),!0},query:function(l,
k){return c(this.queryEngine(l,k)(this.data))},setData:function(c){c.items?(this.idProperty=c.identifier||this.idProperty,c=this.data=c.items):this.data=c;this.index={};for(var k=0,d=c.length;k<d;k++)this.index[c[k][this.idProperty]]=k}})})},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../when"],function(p,c,n){var l=function(k){function d(c){k[c]=function(){var d=arguments,b=n(k,function(a){Array.prototype.unshift.call(d,a);return l(p[c].apply(p,d))});
if("forEach"!==c||h)return b}}if(!k)return k;var h=!!k.then;h&&(k=c.delegate(k));d("forEach");d("filter");d("map");null==k.total&&(k.total=n(k,function(c){return c.length}));return k};c.setObject("dojo.store.util.QueryResults",l);return l})},"dojo/store/util/SimpleQueryEngine":function(){define(["../../_base/array"],function(p){return function(c,n){function l(d){d=p.filter(d,c);var h=n&&n.sort;h&&d.sort("function"==typeof h?h:function(c,b){for(var a,d=0;a=h[d];d++){var f=c[a.attribute],g=b[a.attribute],
f=null!=f?f.valueOf():f,g=null!=g?g.valueOf():g;if(f!=g)return!!a.descending==(null==f||f>g)?-1:1}return 0});if(n&&(n.start||n.count)){var g=d.length;d=d.slice(n.start||0,(n.start||0)+(n.count||Infinity));d.total=g}return d}switch(typeof c){default:throw Error("Can not query with a "+typeof c);case "object":case "undefined":var k=c;c=function(c){for(var d in k){var g=k[d];if(g&&g.test){if(!g.test(c[d],c))return!1}else if(g!=c[d])return!1}return!0};break;case "string":if(!this[c])throw Error("No filter function "+
c+" was found in store");c=this[c];case "function":}l.matches=c;return l}})},"dojo/dnd/Source":function(){define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../dom-class ../dom-geometry ../mouse ../ready ../topic ./common ./Selector ./Manager".split(" "),function(p,c,n,l,k,d,h,g,f,b,a,e){n.isAsync||g(0,function(){require(["dojo/dnd/AutoSource","dojo/dnd/Target"])});var m=c("dojo.dnd.Source",a,{isSource:!0,horizontal:!1,copyOnly:!1,selfCopy:!1,selfAccept:!0,skipForm:!1,withHandles:!1,
autoSync:!1,delay:0,accept:["text"],generateText:!0,constructor:function(a,b){l.mixin(this,l.mixin({},b));a=this.accept;if(a.length)for(this.accept={},b=0;b<a.length;++b)this.accept[a[b]]=1;this.mouseDown=this.isDragging=!1;this.targetBox=this.targetAnchor=null;this.before=!0;this._lastY=this._lastX=0;this.sourceState="";this.isSource&&k.add(this.node,"dojoDndSource");this.targetState="";this.accept&&k.add(this.node,"dojoDndTarget");this.horizontal&&k.add(this.node,"dojoDndHorizontal");this.topics=
[f.subscribe("/dnd/source/over",l.hitch(this,"onDndSourceOver")),f.subscribe("/dnd/start",l.hitch(this,"onDndStart")),f.subscribe("/dnd/drop",l.hitch(this,"onDndDrop")),f.subscribe("/dnd/cancel",l.hitch(this,"onDndCancel"))]},checkAcceptance:function(a,b){if(this==a)return!this.copyOnly||this.selfAccept;for(var c=0;c<b.length;++c){for(var d=a.getItem(b[c].id).type,e=!1,f=0;f<d.length;++f)if(d[f]in this.accept){e=!0;break}if(!e)return!1}return!0},copyState:function(a,b){if(a)return!0;2>arguments.length&&
(b=this==e.manager().target);if(b){if(this.copyOnly)return this.selfCopy}else return this.copyOnly;return!1},destroy:function(){m.superclass.destroy.call(this);p.forEach(this.topics,function(a){a.remove()});this.targetAnchor=null},onMouseMove:function(a){if(!this.isDragging||"Disabled"!=this.targetState){m.superclass.onMouseMove.call(this,a);var c=e.manager();if(!this.isDragging&&this.mouseDown&&this.isSource&&(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)){var f=
this.getSelectedNodes();f.length&&c.startDrag(this,f,this.copyState(b.getCopyKeyState(a),!0))}this.isDragging&&(f=!1,this.current&&(this.targetBox&&this.targetAnchor==this.current||(this.targetBox=d.position(this.current,!0)),f=this.horizontal?a.pageX-this.targetBox.x<this.targetBox.w/2==d.isBodyLtr(this.current.ownerDocument):a.pageY-this.targetBox.y<this.targetBox.h/2),this.current!=this.targetAnchor||f!=this.before)&&(this._markTargetAnchor(f),c.canDrop(!this.current||c.source!=this||!(this.current.id in
this.selection)))}},onMouseDown:function(a){this.mouseDown||!this._legalMouseDown(a)||this.skipForm&&b.isFormElement(a)||(this.mouseDown=!0,this._lastX=a.pageX,this._lastY=a.pageY,m.superclass.onMouseDown.call(this,a))},onMouseUp:function(a){this.mouseDown&&(this.mouseDown=!1,m.superclass.onMouseUp.call(this,a))},onDndSourceOver:function(a){this!==a?(this.mouseDown=!1,this.targetAnchor&&this._unmarkTargetAnchor()):this.isDragging&&(a=e.manager(),a.canDrop("Disabled"!=this.targetState&&(!this.current||
a.source!=this||!(this.current.id in this.selection))))},onDndStart:function(a,b,c){this.autoSync&&this.sync();this.isSource&&this._changeState("Source",this==a?c?"Copied":"Moved":"");b=this.accept&&this.checkAcceptance(a,b);this._changeState("Target",b?"":"Disabled");this==a&&e.manager().overSource(this);this.isDragging=!0},onDndDrop:function(a,b,c,d){if(this==d)this.onDrop(a,b,c);this.onDndCancel()},onDndCancel:function(){this.targetAnchor&&(this._unmarkTargetAnchor(),this.targetAnchor=null);this.before=
!0;this.mouseDown=this.isDragging=!1;this._changeState("Source","");this._changeState("Target","")},onDrop:function(a,b,c){if(this!=a)this.onDropExternal(a,b,c);else this.onDropInternal(b,c)},onDropExternal:function(a,c,d){var e=this._normalizedCreator;this._normalizedCreator=this.creator?function(b,c){return e.call(this,a.getItem(b.id).data,c)}:d?function(c){var d=a.getItem(c.id);c=c.cloneNode(!0);c.id=b.getUniqueId();return{node:c,data:d.data,type:d.type}}:function(b){var c=a.getItem(b.id);a.delItem(b.id);
return{node:b,data:c.data,type:c.type}};this.selectNone();d||this.creator||a.selectNone();this.insertNodes(!0,c,this.before,this.current);!d&&this.creator&&a.deleteSelectedNodes();this._normalizedCreator=e},onDropInternal:function(a,c){var d=this._normalizedCreator;if(!(this.current&&this.current.id in this.selection)){if(c)this._normalizedCreator=this.creator?function(a,b){return d.call(this,this.getItem(a.id).data,b)}:function(a){var c=this.getItem(a.id);a=a.cloneNode(!0);a.id=b.getUniqueId();return{node:a,
data:c.data,type:c.type}};else{if(!this.current)return;this._normalizedCreator=function(a){var b=this.getItem(a.id);return{node:a,data:b.data,type:b.type}}}this._removeSelection();this.insertNodes(!0,a,this.before,this.current);this._normalizedCreator=d}},onDraggingOver:function(){},onDraggingOut:function(){},onOverEvent:function(){m.superclass.onOverEvent.call(this);e.manager().overSource(this);if(this.isDragging&&"Disabled"!=this.targetState)this.onDraggingOver()},onOutEvent:function(){m.superclass.onOutEvent.call(this);
e.manager().outSource(this);if(this.isDragging&&"Disabled"!=this.targetState)this.onDraggingOut()},_markTargetAnchor:function(a){if(this.current!=this.targetAnchor||this.before!=a)this.targetAnchor&&this._removeItemClass(this.targetAnchor,this.before?"Before":"After"),this.targetAnchor=this.current,this.targetBox=null,this.before=a,this.targetAnchor&&this._addItemClass(this.targetAnchor,this.before?"Before":"After")},_unmarkTargetAnchor:function(){this.targetAnchor&&(this._removeItemClass(this.targetAnchor,
this.before?"Before":"After"),this.targetBox=this.targetAnchor=null,this.before=!0)},_markDndStatus:function(a){this._changeState("Source",a?"Copied":"Moved")},_legalMouseDown:function(a){if("touchstart"!=a.type&&!h.isLeft(a))return!1;if(!this.withHandles)return!0;for(a=a.target;a&&a!==this.node;a=a.parentNode){if(k.contains(a,"dojoDndHandle"))return!0;if(k.contains(a,"dojoDndItem")||k.contains(a,"dojoDndIgnore"))break}return!1}});return m})},"dojo/dnd/Selector":function(){define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../dom ../dom-construct ../mouse ../_base/NodeList ../on ../touch ./common ./Container".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e){var m=c("dojo.dnd.Selector",e,{constructor:function(a,c){c||(c={});this.singular=c.singular;this.autoSync=c.autoSync;this.selection={};this.anchor=null;this.simpleSelection=!1;this.events.push(f(this.node,b.press,l.hitch(this,"onMouseDown")),f(this.node,b.release,l.hitch(this,"onMouseUp")))},singular:!1,getSelectedNodes:function(){var b=new g,c=a._empty,d;for(d in this.selection)d in c||b.push(k.byId(d));return b},selectNone:function(){return this._removeSelection()._removeAnchor()},
selectAll:function(){this.forInItems(function(a,b){this._addItemClass(k.byId(b),"Selected");this.selection[b]=1},this);return this._removeAnchor()},deleteSelectedNodes:function(){var b=a._empty,c;for(c in this.selection)if(!(c in b)){var e=k.byId(c);this.delItem(c);d.destroy(e)}this.anchor=null;this.selection={};return this},forInSelectedItems:function(b,c){c=c||n.global;var d=this.selection,e=a._empty,f;for(f in d)f in e||b.call(c,this.getItem(f),f,this)},sync:function(){m.superclass.sync.call(this);
this.anchor&&!this.getItem(this.anchor.id)&&(this.anchor=null);var b=[],c=a._empty,d;for(d in this.selection)d in c||this.getItem(d)||b.push(d);p.forEach(b,function(a){delete this.selection[a]},this);return this},insertNodes:function(a,b,c,d){var e=this._normalizedCreator;this._normalizedCreator=function(b,c){b=e.call(this,b,c);a?(this.anchor?this.anchor!=b.node&&(this._removeItemClass(b.node,"Anchor"),this._addItemClass(b.node,"Selected")):(this.anchor=b.node,this._removeItemClass(b.node,"Selected"),
this._addItemClass(this.anchor,"Anchor")),this.selection[b.node.id]=1):(this._removeItemClass(b.node,"Selected"),this._removeItemClass(b.node,"Anchor"));return b};m.superclass.insertNodes.call(this,b,c,d);this._normalizedCreator=e;return this},destroy:function(){m.superclass.destroy.call(this);this.selection=this.anchor=null},onMouseDown:function(b){this.autoSync&&this.sync();if(this.current)if(!this.singular&&!a.getCopyKeyState(b)&&!b.shiftKey&&this.current.id in this.selection)this.simpleSelection=
!0,h.isLeft(b)&&(b.stopPropagation(),b.preventDefault());else{if(!this.singular&&b.shiftKey){a.getCopyKeyState(b)||this._removeSelection();var c=this.getAllNodes();if(c.length&&(this.anchor||(this.anchor=c[0],this._addItemClass(this.anchor,"Anchor")),this.selection[this.anchor.id]=1,this.anchor!=this.current)){for(var d=0,e;d<c.length&&(e=c[d],e!=this.anchor&&e!=this.current);++d);for(++d;d<c.length;++d){e=c[d];if(e==this.anchor||e==this.current)break;this._addItemClass(e,"Selected");this.selection[e.id]=
1}this._addItemClass(this.current,"Selected");this.selection[this.current.id]=1}}else this.singular?this.anchor==this.current?a.getCopyKeyState(b)&&this.selectNone():(this.selectNone(),this.anchor=this.current,this._addItemClass(this.anchor,"Anchor"),this.selection[this.current.id]=1):a.getCopyKeyState(b)?this.anchor==this.current?(delete this.selection[this.anchor.id],this._removeAnchor()):this.current.id in this.selection?(this._removeItemClass(this.current,"Selected"),delete this.selection[this.current.id]):
(this.anchor&&(this._removeItemClass(this.anchor,"Anchor"),this._addItemClass(this.anchor,"Selected")),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1):this.current.id in this.selection||(this.selectNone(),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1);b.stopPropagation();b.preventDefault()}},onMouseUp:function(){this.simpleSelection&&(this.simpleSelection=!1,this.selectNone(),this.current&&
(this.anchor=this.current,this._addItemClass(this.anchor,"Anchor"),this.selection[this.current.id]=1))},onMouseMove:function(){this.simpleSelection=!1},onOverEvent:function(){this.onmousemoveEvent=f(this.node,b.move,l.hitch(this,"onMouseMove"))},onOutEvent:function(){this.onmousemoveEvent&&(this.onmousemoveEvent.remove(),delete this.onmousemoveEvent)},_removeSelection:function(){var b=a._empty,c;for(c in this.selection)if(!(c in b)){var d=k.byId(c);d&&this._removeItemClass(d,"Selected")}this.selection=
{};return this},_removeAnchor:function(){this.anchor&&(this._removeItemClass(this.anchor,"Anchor"),this.anchor=null);return this}});return m})},"dojo/_base/NodeList":function(){define(["./kernel","../query","./array","./html","../NodeList-dom"],function(p,c,n){c=c.NodeList;var l=c.prototype;l.connect=c._adaptAsForEach(function(){return p.connect.apply(this,arguments)});l.coords=c._adaptAsMap(p.coords);c.events="blur focus change click error keydown keypress keyup load mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup submit".split(" ");
n.forEach(c.events,function(c){var d="on"+c;l[d]=function(c,g){return this.connect(d,c,g)}});return p.NodeList=c})},"dojo/dnd/Container":function(){define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../_base/window ../dom ../dom-class ../dom-construct ../Evented ../has ../on ../query ../touch ./common".split(" "),function(p,c,n,l,k,d,h,g,f,b,a,e,m,q){c=c("dojo.dnd.Container",f,{skipForm:!1,allowNested:!1,constructor:function(b,c){this.node=d.byId(b);c||(c={});this.creator=c.creator||
null;this.skipForm=c.skipForm;this.parent=c.dropParent&&d.byId(c.dropParent);this.map={};this.current=null;this.containerState="";h.add(this.node,"dojoDndContainer");c&&c._skipStartup||this.startup();this.events=[a(this.node,m.over,l.hitch(this,"onMouseOver")),a(this.node,m.out,l.hitch(this,"onMouseOut")),a(this.node,"dragstart",l.hitch(this,"onSelectStart")),a(this.node,"selectstart",l.hitch(this,"onSelectStart"))]},creator:function(){},getItem:function(a){return this.map[a]},setItem:function(a,
b){this.map[a]=b},delItem:function(a){delete this.map[a]},forInItems:function(a,b){b=b||n.global;var c=this.map,d=q._empty,e;for(e in c)e in d||a.call(b,c[e],e,this);return b},clearItems:function(){this.map={}},getAllNodes:function(){return e((this.allowNested?"":"\x3e ")+".dojoDndItem",this.parent)},sync:function(){var a={};this.getAllNodes().forEach(function(b){if(b.id){var c=this.getItem(b.id);if(c){a[b.id]=c;return}}else b.id=q.getUniqueId();var c=b.getAttribute("dndType"),d=b.getAttribute("dndData");
a[b.id]={data:d||b.innerHTML,type:c?c.split(/\s*,\s*/):["text"]}},this);this.map=a;return this},insertNodes:function(a,b,c){this.parent.firstChild?b?c||(c=this.parent.firstChild):c&&(c=c.nextSibling):c=null;var d;if(c)for(b=0;b<a.length;++b)d=this._normalizedCreator(a[b]),this.setItem(d.node.id,{data:d.data,type:d.type}),c.parentNode.insertBefore(d.node,c);else for(b=0;b<a.length;++b)d=this._normalizedCreator(a[b]),this.setItem(d.node.id,{data:d.data,type:d.type}),this.parent.appendChild(d.node);
return this},destroy:function(){p.forEach(this.events,function(a){a.remove()});this.clearItems();this.node=this.parent=this.current=null},markupFactory:function(a,b,c){a._skipStartup=!0;return new c(b,a)},startup:function(){if(!this.parent&&(this.parent=this.node,"table"==this.parent.tagName.toLowerCase())){var a=this.parent.getElementsByTagName("tbody");a&&a.length&&(this.parent=a[0])}this.defaultCreator=q._defaultCreator(this.parent);this.sync()},onMouseOver:function(a){for(var b=a.relatedTarget;b&&
b!=this.node;)try{b=b.parentNode}catch(r){b=null}b||(this._changeState("Container","Over"),this.onOverEvent());b=this._getChildByEvent(a);this.current!=b&&(this.current&&this._removeItemClass(this.current,"Over"),b&&this._addItemClass(b,"Over"),this.current=b)},onMouseOut:function(a){for(a=a.relatedTarget;a;){if(a==this.node)return;try{a=a.parentNode}catch(t){a=null}}this.current&&(this._removeItemClass(this.current,"Over"),this.current=null);this._changeState("Container","");this.onOutEvent()},onSelectStart:function(a){this.withHandles||
this.skipForm&&q.isFormElement(a)||(a.stopPropagation(),a.preventDefault())},onOverEvent:function(){},onOutEvent:function(){},_changeState:function(a,b){var c="dojoDnd"+a;a=a.toLowerCase()+"State";h.replace(this.node,c+b,c+this[a]);this[a]=b},_addItemClass:function(a,b){h.add(a,"dojoDndItem"+b)},_removeItemClass:function(a,b){h.remove(a,"dojoDndItem"+b)},_getChildByEvent:function(a){if(a=a.target)for(var b=a.parentNode;b;a=b,b=a.parentNode)if((b==this.parent||this.allowNested)&&h.contains(a,"dojoDndItem"))return a;
return null},_normalizedCreator:function(a,b){a=(this.creator||this.defaultCreator).call(this,a,b);l.isArray(a.type)||(a.type=["text"]);a.node.id||(a.node.id=q.getUniqueId());h.add(a.node,"dojoDndItem");return a}});q._createNode=function(a){return a?function(b){return g.create(a,{innerHTML:b})}:q._createSpan};q._createTrTd=function(a){var b=g.create("tr");g.create("td",{innerHTML:a},b);return b};q._createSpan=function(a){return g.create("span",{innerHTML:a})};q._defaultCreatorNodes={ul:"li",ol:"li",
div:"div",p:"div"};q._defaultCreator=function(a){a=a.tagName.toLowerCase();var b="tbody"==a||"thead"==a?q._createTrTd:q._createNode(q._defaultCreatorNodes[a]);return function(a,c){var d=a&&l.isObject(a),e;d&&a.tagName&&a.nodeType&&a.getAttribute?(e=a.getAttribute("dndData")||a.innerHTML,d=(d=a.getAttribute("dndType"))?d.split(/\s*,\s*/):["text"]):(e=d&&a.data?a.data:a,d=d&&a.type?a.type:["text"],a=("avatar"==c?q._createSpan:b)(String(e)));a.id||(a.id=q.getUniqueId());return{node:a,data:e,type:d}}};
return c})},"dojo/dnd/Manager":function(){define("../_base/array ../_base/declare ../_base/lang ../_base/window ../dom-class ../Evented ../has ../keys ../on ../topic ../touch ./common ./autoscroll ./Avatar".split(" "),function(p,c,n,l,k,d,h,g,f,b,a,e,m,q){var u=c("dojo.dnd.Manager",[d],{constructor:function(){this.source=this.avatar=null;this.nodes=[];this.copy=!0;this.target=null;this.canDropFlag=!1;this.events=[]},OFFSET_X:h("touch")?4:16,OFFSET_Y:h("touch")?4:16,overSource:function(a){this.avatar&&
(this.target=a&&"Disabled"!=a.targetState?a:null,this.canDropFlag=!!this.target,this.avatar.update());b.publish("/dnd/source/over",a)},outSource:function(a){this.avatar?this.target==a&&(this.target=null,this.canDropFlag=!1,this.avatar.update(),b.publish("/dnd/source/over",null)):b.publish("/dnd/source/over",null)},startDrag:function(c,d,e){function g(a){a.preventDefault();a.stopPropagation()}m.autoScrollStart(l.doc);this.source=c;this.nodes=d;this.copy=!!e;this.avatar=this.makeAvatar();l.body().appendChild(this.avatar.node);
b.publish("/dnd/start",c,d,this.copy);this.events=[f(l.doc,a.move,n.hitch(this,"onMouseMove")),f(l.doc,a.release,n.hitch(this,"onMouseUp")),f(l.doc,"keydown",n.hitch(this,"onKeyDown")),f(l.doc,"keyup",n.hitch(this,"onKeyUp")),f(l.doc,"dragstart",g),f(l.body(),"selectstart",g)];c="dojoDnd"+(e?"Copy":"Move");k.add(l.body(),c)},canDrop:function(a){a=!(!this.target||!a);this.canDropFlag!=a&&(this.canDropFlag=a,this.avatar.update())},stopDrag:function(){k.remove(l.body(),["dojoDndCopy","dojoDndMove"]);
p.forEach(this.events,function(a){a.remove()});this.events=[];this.avatar.destroy();this.source=this.target=this.avatar=null;this.nodes=[]},makeAvatar:function(){return new q(this)},updateAvatar:function(){this.avatar.update()},onMouseMove:function(a){var b=this.avatar;b&&(m.autoScrollNodes(a),b=b.node.style,b.left=a.pageX+this.OFFSET_X+"px",b.top=a.pageY+this.OFFSET_Y+"px",b=!!this.source.copyState(e.getCopyKeyState(a)),this.copy!=b&&this._setCopyStatus(b));h("touch")&&a.preventDefault()},onMouseUp:function(a){if(this.avatar){if(this.target&&
this.canDropFlag){var c=!!this.source.copyState(e.getCopyKeyState(a));b.publish("/dnd/drop/before",this.source,this.nodes,c,this.target,a);b.publish("/dnd/drop",this.source,this.nodes,c,this.target,a)}else b.publish("/dnd/cancel");this.stopDrag()}},onKeyDown:function(a){if(this.avatar)switch(a.keyCode){case g.CTRL:a=!!this.source.copyState(!0);this.copy!=a&&this._setCopyStatus(a);break;case g.ESCAPE:b.publish("/dnd/cancel"),this.stopDrag()}},onKeyUp:function(a){this.avatar&&a.keyCode==g.CTRL&&(a=
!!this.source.copyState(!1),this.copy!=a&&this._setCopyStatus(a))},_setCopyStatus:function(a){this.copy=a;this.source._markDndStatus(this.copy);this.updateAvatar();k.replace(l.body(),"dojoDnd"+(this.copy?"Copy":"Move"),"dojoDnd"+(this.copy?"Move":"Copy"))}});e._manager=null;u.manager=e.manager=function(){e._manager||(e._manager=new u);return e._manager};return u})},"dojo/dnd/Avatar":function(){define("../_base/declare ../_base/window ../dom ../dom-attr ../dom-class ../dom-construct ../hccss ../query".split(" "),
function(p,c,n,l,k,d,h,g){return p("dojo.dnd.Avatar",null,{constructor:function(c){this.manager=c;this.construct()},construct:function(){var c=d.create("table",{"class":"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),b=this.manager.source,a,e=d.create("tbody",null,c),g=d.create("tr",null,e),k=d.create("td",null,g),n=Math.min(5,this.manager.nodes.length),p=0;h("highcontrast")&&d.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"\x3c"},k);d.create("span",{innerHTML:b.generateText?
this._generateText():""},k);for(l.set(g,{"class":"dojoDndAvatarHeader",style:{opacity:.9}});p<n;++p)b.creator?a=b._normalizedCreator(b.getItem(this.manager.nodes[p].id).data,"avatar").node:(a=this.manager.nodes[p].cloneNode(!0),"tr"==a.tagName.toLowerCase()&&(g=d.create("table"),d.create("tbody",null,g).appendChild(a),a=g)),a.id="",g=d.create("tr",null,e),k=d.create("td",null,g),k.appendChild(a),l.set(g,{"class":"dojoDndAvatarItem",style:{opacity:(9-p)/10}});this.node=c},destroy:function(){d.destroy(this.node);
this.node=!1},update:function(){k.toggle(this.node,"dojoDndAvatarCanDrop",this.manager.canDropFlag);if(h("highcontrast")){var c=n.byId("a11yIcon"),b="+";this.manager.canDropFlag&&!this.manager.copy?b="\x3c ":this.manager.canDropFlag||this.manager.copy?this.manager.canDropFlag||(b="x"):b="o";c.innerHTML=b}g("tr.dojoDndAvatarHeader td span"+(h("highcontrast")?" span":""),this.node).forEach(function(a){a.innerHTML=this.manager.source.generateText?this._generateText():""},this)},_generateText:function(){return this.manager.nodes.length.toString()}})})},
"dijit/CheckedMenuItem":function(){define(["dojo/_base/declare","dojo/dom-class","./MenuItem","dojo/text!./templates/CheckedMenuItem.html","./hccss"],function(p,c,n,l){return p("dijit.CheckedMenuItem",n,{baseClass:"dijitMenuItem dijitCheckedMenuItem",templateString:l,checked:!1,_setCheckedAttr:function(c){this.domNode.setAttribute("aria-checked",c?"true":"false");this._set("checked",c)},iconClass:"",role:"menuitemcheckbox",checkedChar:"\x26#10003;",onChange:function(){},_onClick:function(c){this.disabled||
(this.set("checked",!this.checked),this.onChange(this.checked));this.onClick(c)}})})},"dijit/MenuItem":function(){define("dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/kernel dojo/sniff dojo/_base/lang ./_Widget ./_TemplatedMixin ./_Contained ./_CssStateMixin dojo/text!./templates/MenuItem.html".split(" "),function(p,c,n,l,k,d,h,g,f,b,a,e){h=p("dijit.MenuItem"+(d("dojo-bidi")?"_NoBidi":""),[g,f,b,a],{templateString:e,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(a){this._set("label",
a);var b="",c;c=a.search(/{\S}/);if(0<=c){var b=a.charAt(c+1),d=a.substr(0,c);a=a.substr(c+3);c=d+b+a;a=d+'\x3cspan class\x3d"dijitMenuItemShortcutKey"\x3e'+b+"\x3c/span\x3e"+a}else c=a;this.domNode.setAttribute("aria-label",c+" "+this.accelKey);this.containerNode.innerHTML=a;this._set("shortcutKey",b)},iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:!1,_fillContent:function(a){!a||"label"in this.params||this._set("label",a.innerHTML)},buildRendering:function(){this.inherited(arguments);
n.set(this.containerNode,"id",this.id+"_text");this.accelKeyNode&&n.set(this.accelKeyNode,"id",this.id+"_accel");c.setSelectable(this.domNode,!1)},onClick:function(){},focus:function(){try{8==d("ie")&&this.containerNode.focus(),this.focusNode.focus()}catch(m){}},_setSelected:function(a){l.toggle(this.domNode,"dijitMenuItemSelected",a)},setLabel:function(a){k.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",a)},setDisabled:function(a){k.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.",
"","2.0");this.set("disabled",a)},_setDisabledAttr:function(a){this.focusNode.setAttribute("aria-disabled",a?"true":"false");this._set("disabled",a)},_setAccelKeyAttr:function(a){this.accelKeyNode&&(this.accelKeyNode.style.display=a?"":"none",this.accelKeyNode.innerHTML=a,n.set(this.containerNode,"colSpan",a?"1":"2"));this._set("accelKey",a)}});d("dojo-bidi")&&(h=p("dijit.MenuItem",h,{_setLabelAttr:function(a){this.inherited(arguments);"auto"===this.textDir&&this.applyTextDir(this.textDirNode)}}));
return h})},"dijit/form/Select":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/sniff ./_FormSelectWidget ../_HasDropDown ../DropDownMenu ../MenuItem ../MenuSeparator ../Tooltip ../_KeyNavMixin ../registry dojo/text!./templates/Select.html dojo/i18n!./nls/validate".split(" "),function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w){function v(a){return function(b){this._isLoaded?this.inherited(a,arguments):
this.loadDropDown(g.hitch(this,a,b))}}var y=c("dijit.form._SelectMenu",m,{autoFocus:!0,buildRendering:function(){this.inherited(arguments);this.domNode.setAttribute("role","listbox")},postCreate:function(){this.inherited(arguments);this.own(f(this.domNode,"selectstart",function(a){a.preventDefault();a.stopPropagation()}))},focus:function(){var a=!1,b=this.parentWidget.value;g.isArray(b)&&(b=b[b.length-1]);b&&p.forEach(this.parentWidget._getChildren(),function(c){c.option&&b===c.option.value&&(a=!0,
this.focusChild(c,!1))},this);a||this.inherited(arguments)}});k=c("dijit.form.Select"+(b("dojo-bidi")?"_NoBidi":""),[a,e,r],{baseClass:"dijitSelect dijitValidationTextBox",templateString:w,_buttonInputDisabled:b("ie")?"disabled":"",required:!1,state:"",message:"",tooltipPosition:[],emptyLabel:"\x26#160;",_isLoaded:!1,_childrenLoaded:!1,labelType:"html",_fillContent:function(){this.inherited(arguments);if(this.options.length&&!this.value&&this.srcNodeRef){var a=this.srcNodeRef.selectedIndex||0;this._set("value",
this.options[0<=a?a:0].value)}this.dropDown=new y({id:this.id+"_menu",parentWidget:this});l.add(this.dropDown.domNode,this.baseClass.replace(/\s+|$/g,"Menu "))},_getMenuItemForOption:function(a){if(a.value||a.label){var b=g.hitch(this,"_setValueAttr",a);a=new q({option:a,label:("text"===this.labelType?(a.label||"").toString().replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;"):a.label)||this.emptyLabel,onClick:b,ownerDocument:this.ownerDocument,dir:this.dir,textDir:this.textDir,disabled:a.disabled||
!1});a.focusNode.setAttribute("role","option");return a}return new u({ownerDocument:this.ownerDocument})},_addOptionItem:function(a){this.dropDown&&this.dropDown.addChild(this._getMenuItemForOption(a))},_getChildren:function(){return this.dropDown?this.dropDown.getChildren():[]},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(z){}},focusChild:function(a){a&&this.set("value",a.option)},_getFirst:function(){var a=this._getChildren();return a.length?a[0]:null},
_getLast:function(){var a=this._getChildren();return a.length?a[a.length-1]:null},childSelector:function(a){return(a=x.byNode(a))&&a.getParent()==this.dropDown},onKeyboardSearch:function(a,b,c,d){a&&this.focusChild(a)},_loadChildren:function(a){if(!0===a)if(this.dropDown&&(delete this.dropDown.focusedChild,this.focusedChild=null),this.options.length)this.inherited(arguments);else{p.forEach(this._getChildren(),function(a){a.destroyRecursive()});var b=new q({ownerDocument:this.ownerDocument,label:this.emptyLabel});
this.dropDown.addChild(b)}else this._updateSelection();this._isLoaded=!1;this._childrenLoaded=!0;this._loadingStore||this._setValueAttr(this.value,!1)},_refreshState:function(){this._started&&this.validate(this.focused)},startup:function(){this.inherited(arguments);this._refreshState()},_setValueAttr:function(a){this.inherited(arguments);n.set(this.valueNode,"value",this.get("value"));this._refreshState()},_setNameAttr:"valueNode",_setDisabledAttr:function(a){this.inherited(arguments);this._refreshState()},
_setRequiredAttr:function(a){this._set("required",a);this.focusNode.setAttribute("aria-required",a);this._refreshState()},_setOptionsAttr:function(a){this._isLoaded=!1;this._set("options",a)},_setDisplay:function(a){a=("text"===this.labelType?(a||"").replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;"):a)||this.emptyLabel;this.containerNode.innerHTML='\x3cspan role\x3d"option" aria-selected\x3d"true" class\x3d"dijitReset dijitInline '+this.baseClass.replace(/\s+|$/g,"Label ")+'"\x3e'+a+"\x3c/span\x3e"},
validate:function(a){a=this.disabled||this.isValid(a);this._set("state",a?"":this._hasBeenBlurred?"Error":"Incomplete");this.focusNode.setAttribute("aria-invalid",a?"false":"true");var b=a?"":this._missingMsg;b&&this.focused&&this._hasBeenBlurred?t.show(b,this.domNode,this.tooltipPosition,!this.isLeftToRight()):t.hide(this.domNode);this._set("message",b);return a},isValid:function(){return!this.required||0===this.value||!/^\s*$/.test(this.value||"")},reset:function(){this.inherited(arguments);t.hide(this.domNode);
this._refreshState()},postMixInProperties:function(){this.inherited(arguments);this._missingMsg=d.getLocalization("dijit.form","validate",this.lang).missingMessage},postCreate:function(){this.inherited(arguments);this.own(f(this.domNode,"selectstart",function(a){a.preventDefault();a.stopPropagation()}));this.domNode.setAttribute("aria-expanded","false");var a=this._keyNavCodes;delete a[h.LEFT_ARROW];delete a[h.RIGHT_ARROW]},_setStyleAttr:function(a){this.inherited(arguments);l.toggle(this.domNode,
this.baseClass.replace(/\s+|$/g,"FixedWidth "),!!this.domNode.style.width)},isLoaded:function(){return this._isLoaded},loadDropDown:function(a){this._loadChildren(!0);this._isLoaded=!0;a()},destroy:function(a){this.dropDown&&!this.dropDown._destroyed&&(this.dropDown.destroyRecursive(a),delete this.dropDown);t.hide(this.domNode);this.inherited(arguments)},_onFocus:function(){this.validate(!0)},_onBlur:function(){t.hide(this.domNode);this.inherited(arguments);this.validate(!1)}});b("dojo-bidi")&&(k=
c("dijit.form.Select",k,{_setDisplay:function(a){this.inherited(arguments);this.applyTextDir(this.containerNode)}}));k._Menu=y;k.prototype._onContainerKeydown=v("_onContainerKeydown");k.prototype._onContainerKeypress=v("_onContainerKeypress");return k})},"dijit/form/_FormSelectWidget":function(){define("dojo/_base/array dojo/_base/Deferred dojo/aspect dojo/data/util/sorter dojo/_base/declare dojo/dom dojo/dom-class dojo/_base/kernel dojo/_base/lang dojo/query dojo/when dojo/store/util/QueryResults ./_FormValueWidget".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m){return k("dijit.form._FormSelectWidget",m,{multiple:!1,options:null,store:null,_setStoreAttr:function(a){this._created&&this._deprecatedSetStore(a)},query:null,_setQueryAttr:function(a){this._created&&this._deprecatedSetStore(this.store,this.selectedValue,{query:a})},queryOptions:null,_setQueryOptionsAttr:function(a){this._created&&this._deprecatedSetStore(this.store,this.selectedValue,{queryOptions:a})},labelAttr:"",onFetch:null,sortByLabel:!0,loadChildrenOnOpen:!1,
onLoadDeferred:null,getOptions:function(a){var b=this.options||[];if(null==a)return b;if(f.isArrayLike(a))return p.map(a,"return this.getOptions(item);",this);f.isString(a)&&(a={value:a});f.isObject(a)&&(p.some(b,function(b,c){for(var d in a)if(!(d in b)||b[d]!=a[d])return!1;a=c;return!0})||(a=-1));return 0<=a&&a<b.length?b[a]:null},addOption:function(a){p.forEach(f.isArrayLike(a)?a:[a],function(a){a&&f.isObject(a)&&this.options.push(a)},this);this._loadChildren()},removeOption:function(a){a=this.getOptions(f.isArrayLike(a)?
a:[a]);p.forEach(a,function(a){a&&(this.options=p.filter(this.options,function(b){return b.value!==a.value||b.label!==a.label}),this._removeOptionItem(a))},this);this._loadChildren()},updateOption:function(a){p.forEach(f.isArrayLike(a)?a:[a],function(a){var b=this.getOptions({value:a.value}),c;if(b)for(c in a)b[c]=a[c]},this);this._loadChildren()},setStore:function(a,b,c){g.deprecated(this.declaredClass+"::setStore(store, selectedValue, fetchArgs) is deprecated. Use set('query', fetchArgs.query), set('queryOptions', fetchArgs.queryOptions), set('store', store), or set('value', selectedValue) instead.",
"","2.0");this._deprecatedSetStore(a,b,c)},_deprecatedSetStore:function(b,d,g){var h=this.store;g=g||{};if(h!==b){for(var k;k=this._notifyConnections.pop();)k.remove();b.get||(f.mixin(b,{_oldAPI:!0,get:function(a){var b=new c;this.fetchItemByIdentity({identity:a,onItem:function(a){b.resolve(a)},onError:function(a){b.reject(a)}});return b.promise},query:function(a,b){var d=new c(function(){g.abort&&g.abort()});d.total=new c;var g=this.fetch(f.mixin({query:a,onBegin:function(a){d.total.resolve(a)},
onComplete:function(a){d.resolve(a)},onError:function(a){d.reject(a)}},b));return new e(d)}}),b.getFeatures()["dojo.data.api.Notification"]&&(this._notifyConnections=[n.after(b,"onNew",f.hitch(this,"_onNewItem"),!0),n.after(b,"onDelete",f.hitch(this,"_onDeleteItem"),!0),n.after(b,"onSet",f.hitch(this,"_onSetItem"),!0)]));this._set("store",b)}this.options&&this.options.length&&this.removeOption(this.options);this._queryRes&&this._queryRes.close&&this._queryRes.close();this._observeHandle&&this._observeHandle.remove&&
(this._observeHandle.remove(),this._observeHandle=null);g.query&&this._set("query",g.query);g.queryOptions&&this._set("queryOptions",g.queryOptions);b&&b.query&&(this._loadingStore=!0,this.onLoadDeferred=new c,this._queryRes=b.query(this.query,this.queryOptions),a(this._queryRes,f.hitch(this,function(a){if(this.sortByLabel&&!g.sort&&a.length)if(b.getValue)a.sort(l.createSortFunction([{attribute:b.getLabelAttributes(a[0])[0]}],b));else{var c=this.labelAttr;a.sort(function(a,b){return a[c]>b[c]?1:b[c]>
a[c]?-1:0})}g.onFetch&&(a=g.onFetch.call(this,a,g));p.forEach(a,function(a){this._addOptionForItem(a)},this);this._queryRes.observe&&(this._observeHandle=this._queryRes.observe(f.hitch(this,function(a,b,c){b==c?this._onSetItem(a):(-1!=b&&this._onDeleteItem(a),-1!=c&&this._onNewItem(a))}),!0));this._loadingStore=!1;this.set("value","_pendingValue"in this?this._pendingValue:d);delete this._pendingValue;this.loadChildrenOnOpen?this._pseudoLoadChildren(a):this._loadChildren();this.onLoadDeferred.resolve(!0);
this.onSetStore()}),f.hitch(this,function(a){console.error("dijit.form.Select: "+a.toString());this.onLoadDeferred.reject(a)})));return h},_setValueAttr:function(a,b){this._onChangeActive||(b=null);if(this._loadingStore)this._pendingValue=a;else if(null!=a){a=f.isArrayLike(a)?p.map(a,function(a){return f.isObject(a)?a:{value:a}}):f.isObject(a)?[a]:[{value:a}];a=p.filter(this.getOptions(a),function(a){return a&&a.value});var c=this.getOptions()||[];this.multiple||a[0]&&a[0].value||!c.length||(a[0]=
c[0]);p.forEach(c,function(b){b.selected=p.some(a,function(a){return a.value===b.value})});c=p.map(a,function(a){return a.value});if("undefined"!=typeof c&&"undefined"!=typeof c[0]){var d=p.map(a,function(a){return a.label});this._setDisplay(this.multiple?d:d[0]);this.inherited(arguments,[this.multiple?c:c[0],b]);this._updateSelection()}}},_getDisplayedValueAttr:function(){var a=p.map([].concat(this.get("selectedOptions")),function(a){return a&&"label"in a?a.label:a?a.value:null},this);return this.multiple?
a:a[0]},_setDisplayedValueAttr:function(a){this.set("value",this.getOptions("string"==typeof a?{label:a}:a))},_loadChildren:function(){this._loadingStore||(p.forEach(this._getChildren(),function(a){a.destroyRecursive()}),p.forEach(this.options,this._addOptionItem,this),this._updateSelection())},_updateSelection:function(){this.focusedChild=null;this._set("value",this._getValueFromOpts());var a=[].concat(this.value);if(a&&a[0]){var b=this;p.forEach(this._getChildren(),function(c){var d=p.some(a,function(a){return c.option&&
a===c.option.value});d&&!b.multiple&&(b.focusedChild=c);h.toggle(c.domNode,this.baseClass.replace(/\s+|$/g,"SelectedOption "),d);c.domNode.setAttribute("aria-selected",d?"true":"false")},this)}},_getValueFromOpts:function(){var a=this.getOptions()||[];if(!this.multiple&&a.length){var b=p.filter(a,function(a){return a.selected})[0];if(b&&b.value)return b.value;a[0].selected=!0;return a[0].value}return this.multiple?p.map(p.filter(a,function(a){return a.selected}),function(a){return a.value})||[]:""},
_onNewItem:function(a,b){b&&b.parent||this._addOptionForItem(a)},_onDeleteItem:function(a){this.removeOption({value:this.store.getIdentity(a)})},_onSetItem:function(a){this.updateOption(this._getOptionObjForItem(a))},_getOptionObjForItem:function(a){var b=this.store,c=this.labelAttr&&this.labelAttr in a?a[this.labelAttr]:b.getLabel(a);return{value:c?b.getIdentity(a):null,label:c,item:a}},_addOptionForItem:function(a){var b=this.store;b.isItemLoaded&&!b.isItemLoaded(a)?b.loadItem({item:a,onItem:function(a){this._addOptionForItem(a)},
scope:this}):(a=this._getOptionObjForItem(a),this.addOption(a))},constructor:function(a){this._oValue=(a||{}).value||null;this._notifyConnections=[]},buildRendering:function(){this.inherited(arguments);d.setSelectable(this.focusNode,!1)},_fillContent:function(){this.options||(this.options=this.srcNodeRef?b("\x3e *",this.srcNodeRef).map(function(a){return"separator"===a.getAttribute("type")?{value:"",label:"",selected:!1,disabled:!1}:{value:a.getAttribute("data-"+g._scopeName+"-value")||a.getAttribute("value"),
label:String(a.innerHTML),selected:a.getAttribute("selected")||!1,disabled:a.getAttribute("disabled")||!1}},this):[]);this.value?this.multiple&&"string"==typeof this.value&&this._set("value",this.value.split(",")):this._set("value",this._getValueFromOpts())},postCreate:function(){this.inherited(arguments);n.after(this,"onChange",f.hitch(this,"_updateSelection"));var a=this.store;a&&(a.getIdentity||a.getFeatures()["dojo.data.api.Identity"])&&(this.store=null,this._deprecatedSetStore(a,this._oValue,
{query:this.query,queryOptions:this.queryOptions}));this._storeInitialized=!0},startup:function(){this._loadChildren();this.inherited(arguments)},destroy:function(){for(var a;a=this._notifyConnections.pop();)a.remove();this._queryRes&&this._queryRes.close&&this._queryRes.close();this._observeHandle&&this._observeHandle.remove&&(this._observeHandle.remove(),this._observeHandle=null);this.inherited(arguments)},_addOptionItem:function(){},_removeOptionItem:function(){},_setDisplay:function(){},_getChildren:function(){return[]},
_getSelectedOptionsAttr:function(){return this.getOptions({selected:!0})},_pseudoLoadChildren:function(){},onSetStore:function(){}})})},"dojo/data/util/sorter":function(){define(["../../_base/lang"],function(p){var c={};p.setObject("dojo.data.util.sorter",c);c.basicComparator=function(c,l){var k=-1;null===c&&(c=void 0);null===l&&(l=void 0);if(c==l)k=0;else if(c>l||null==c)k=1;return k};c.createSortFunction=function(n,l){function k(a,b,c,d){return function(e,f){e=d.getValue(e,a);f=d.getValue(f,a);
return b*c(e,f)}}for(var d=[],h,g=l.comparatorMap,f=c.basicComparator,b=0;b<n.length;b++){h=n[b];var a=h.attribute;if(a){h=h.descending?-1:1;var e=f;g&&("string"!==typeof a&&"toString"in a&&(a=a.toString()),e=g[a]||f);d.push(k(a,h,e,l))}}return function(a,b){for(var c=0;c<d.length;){var e=d[c++](a,b);if(0!==e)return e}return 0}};return c})},"dijit/_HasDropDown":function(){define("dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on dojo/touch ./registry ./focus ./popup ./_FocusMixin".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t){return p("dijit._HasDropDown",t,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:!0,forceWidth:!1,maxHeight:-1,dropDownPosition:["below","above"],_stopClickEvents:!0,_onDropDownMouseDown:function(c){this.disabled||this.readOnly||("MSPointerDown"!=c.type&&c.preventDefault(),this.own(a.once(this.ownerDocument,e.release,b.hitch(this,"_onDropDownMouseUp"))),this.toggleDropDown())},_onDropDownMouseUp:function(a){var b=
this.dropDown,c=!1;if(a&&this._opened){var e=d.position(this._buttonNode,!0);if(!(a.pageX>=e.x&&a.pageX<=e.x+e.w&&a.pageY>=e.y&&a.pageY<=e.y+e.h)){for(e=a.target;e&&!c;)k.contains(e,"dijitPopup")?c=!0:e=e.parentNode;if(c){e=a.target;if(b.onItemClick){for(var f;e&&!(f=m.byNode(e));)e=e.parentNode;if(f&&f.onClick&&f.getParent)f.getParent().onItemClick(f,a)}return}}}this._opened?b.focus&&(!1!==b.autoFocus||"mouseup"==a.type&&!this.hovering)&&(this._focusDropDownTimer=this.defer(function(){b.focus();
delete this._focusDropDownTimer})):this.focus&&this.defer("focus")},_onDropDownClick:function(a){this._stopClickEvents&&(a.stopPropagation(),a.preventDefault())},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var a={after:this.isLeftToRight()?"Right":"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",below:"Down",left:"Left",right:"Right"}[this.dropDownPosition[0]]||
this.dropDownPosition[0]||"Down";k.add(this._arrowWrapperNode||this._buttonNode,"dijit"+a+"ArrowButton")},postCreate:function(){this.inherited(arguments);var c=this.focusNode||this.domNode;this.own(a(this._buttonNode,e.press,b.hitch(this,"_onDropDownMouseDown")),a(this._buttonNode,"click",b.hitch(this,"_onDropDownClick")),a(c,"keydown",b.hitch(this,"_onKey")),a(c,"keyup",b.hitch(this,"_onKeyUp")))},destroy:function(){this._opened&&this.closeDropDown(!0);this.dropDown&&(this.dropDown._destroyed||this.dropDown.destroyRecursive(),
delete this.dropDown);this.inherited(arguments)},_onKey:function(a){if(!this.disabled&&!this.readOnly){var b=this.dropDown,c=a.target;b&&this._opened&&b.handleKey&&!1===b.handleKey(a)?(a.stopPropagation(),a.preventDefault()):b&&this._opened&&a.keyCode==f.ESCAPE?(this.closeDropDown(),a.stopPropagation(),a.preventDefault()):!this._opened&&(a.keyCode==f.DOWN_ARROW||(a.keyCode==f.ENTER||a.keyCode==f.SPACE&&(!this._searchTimer||a.ctrlKey||a.altKey||a.metaKey))&&("input"!==(c.tagName||"").toLowerCase()||
c.type&&"text"!==c.type.toLowerCase()))&&(this._toggleOnKeyUp=!0,a.stopPropagation(),a.preventDefault())}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();var a=this.dropDown;a&&a.focus&&this.defer(b.hitch(a,"focus"),1)}},_onBlur:function(){this.closeDropDown(!1);this.inherited(arguments)},isLoaded:function(){return!0},loadDropDown:function(a){a()},loadAndOpenDropDown:function(){var a=new c,d=b.hitch(this,function(){this.openDropDown();a.resolve(this.dropDown)});
this.isLoaded()?d():this.loadDropDown(d);return a},toggleDropDown:function(){this.disabled||this.readOnly||(this._opened?this.closeDropDown(!0):this.loadAndOpenDropDown())},openDropDown:function(){var a=this.dropDown,c=a.domNode,e=this._aroundNode||this.domNode,f=this,g=u.open({parent:this,popup:a,around:e,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){f.closeDropDown(!0)},onCancel:function(){f.closeDropDown(!0)},onClose:function(){l.set(f._popupStateNode,"popupActive",
!1);k.remove(f._popupStateNode,"dijitHasDropDownOpen");f._set("_opened",!1)}});if(this.forceWidth||this.autoWidth&&e.offsetWidth>a._popupWrapper.offsetWidth){var e=e.offsetWidth-a._popupWrapper.offsetWidth,h={w:a.domNode.offsetWidth+e};this._origStyle=c.style.cssText;b.isFunction(a.resize)?a.resize(h):d.setMarginBox(c,h);"R"==g.corner[1]&&(a._popupWrapper.style.left=a._popupWrapper.style.left.replace("px","")-e+"px")}l.set(this._popupStateNode,"popupActive","true");k.add(this._popupStateNode,"dijitHasDropDownOpen");
this._set("_opened",!0);this._popupStateNode.setAttribute("aria-expanded","true");this._popupStateNode.setAttribute("aria-owns",a.id);"presentation"===c.getAttribute("role")||c.getAttribute("aria-labelledby")||c.setAttribute("aria-labelledby",this.id);return g},closeDropDown:function(a){this._focusDropDownTimer&&(this._focusDropDownTimer.remove(),delete this._focusDropDownTimer);this._opened&&(this._popupStateNode.setAttribute("aria-expanded","false"),a&&this.focus&&this.focus(),u.close(this.dropDown),
this._opened=!1);this._origStyle&&(this.dropDown.domNode.style.cssText=this._origStyle,delete this._origStyle)}})})},"dijit/MenuSeparator":function(){define("dojo/_base/declare dojo/dom ./_WidgetBase ./_TemplatedMixin ./_Contained dojo/text!./templates/MenuSeparator.html".split(" "),function(p,c,n,l,k,d){return p("dijit.MenuSeparator",[n,l,k],{templateString:d,buildRendering:function(){this.inherited(arguments);c.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"dijit/form/NumberSpinner":function(){define(["dojo/_base/declare",
"dojo/keys","./_Spinner","./NumberTextBox"],function(p,c,n,l){return p("dijit.form.NumberSpinner",[n,l.Mixin],{baseClass:"dijitTextBox dijitSpinner dijitNumberTextBox",adjust:function(c,d){var h=this.constraints,g=isNaN(c),f=!isNaN(h.max),b=!isNaN(h.min);g&&0!=d&&(c=0<d?b?h.min:f?h.max:0:f?this.constraints.max:b?h.min:0);d=c+d;if(g||isNaN(d))return c;f&&d>h.max&&(d=h.max);b&&d<h.min&&(d=h.min);return d},_onKeyDown:function(k){if(!(this.disabled||this.readOnly||k.keyCode!=c.HOME&&k.keyCode!=c.END||
k.ctrlKey||k.altKey||k.metaKey||"undefined"==typeof this.get("value"))){var d=this.constraints[k.keyCode==c.HOME?"min":"max"];"number"==typeof d&&this._setValueAttr(d,!1);k.stopPropagation();k.preventDefault()}}})})},"dijit/form/_Spinner":function(){define("dojo/_base/declare dojo/keys dojo/_base/lang dojo/sniff dojo/mouse dojo/on ../typematic ./RangeBoundTextBox dojo/text!./templates/Spinner.html ./_TextBoxMixin".split(" "),function(p,c,n,l,k,d,h,g,f,b){return p("dijit.form._Spinner",g,{defaultTimeout:500,
minimumTimeout:10,timeoutChangeRate:.9,smallDelta:1,largeDelta:10,templateString:f,baseClass:"dijitTextBox dijitSpinner",cssStateNodes:{upArrowNode:"dijitUpArrowButton",downArrowNode:"dijitDownArrowButton"},adjust:function(a){return a},_arrowPressed:function(a,c,d){this.disabled||this.readOnly||(this._setValueAttr(this.adjust(this.get("value"),c*d),!1),b.selectInputText(this.textbox,this.textbox.value.length))},_arrowReleased:function(){this._wheelTimer=null},_typematicCallback:function(a,b,d){var e=
this.smallDelta;b==this.textbox&&(b=d.keyCode,e=b==c.PAGE_UP||b==c.PAGE_DOWN?this.largeDelta:this.smallDelta,b=b==c.UP_ARROW||b==c.PAGE_UP?this.upArrowNode:this.downArrowNode);-1==a?this._arrowReleased(b):this._arrowPressed(b,b==this.upArrowNode?1:-1,e)},_wheelTimer:null,_mouseWheeled:function(a){if(this.focused){a.stopPropagation();a.preventDefault();var b=a.wheelDelta/120;Math.floor(b)!=b&&(b=0<a.wheelDelta?1:-1);a=a.detail?-1*a.detail:b;if(0!==a){var c=this[0<a?"upArrowNode":"downArrowNode"];this._arrowPressed(c,
a,this.smallDelta);this._wheelTimer&&this._wheelTimer.remove();this._wheelTimer=this.defer(function(){this._arrowReleased(c)},50)}}},_setConstraintsAttr:function(a){this.inherited(arguments);this.focusNode&&(void 0!==this.constraints.min?this.focusNode.setAttribute("aria-valuemin",this.constraints.min):this.focusNode.removeAttribute("aria-valuemin"),void 0!==this.constraints.max?this.focusNode.setAttribute("aria-valuemax",this.constraints.max):this.focusNode.removeAttribute("aria-valuemax"))},_setValueAttr:function(a,
b){this.focusNode.setAttribute("aria-valuenow",a);this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.own(d(this.domNode,k.wheel,n.hitch(this,"_mouseWheeled")),h.addListener(this.upArrowNode,this.textbox,{keyCode:c.UP_ARROW,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),h.addListener(this.downArrowNode,this.textbox,{keyCode:c.DOWN_ARROW,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,
"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),h.addListener(this.upArrowNode,this.textbox,{keyCode:c.PAGE_UP,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),h.addListener(this.downArrowNode,this.textbox,{keyCode:c.PAGE_DOWN,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout))}})})},"dijit/typematic":function(){define("dojo/_base/array dojo/_base/connect dojo/_base/lang dojo/on dojo/sniff ./main".split(" "),
function(p,c,n,l,k,d){var h=d.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(0>this._currentTimeout?this._initialDelay:1<this._subsequentDelay?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay),this._minDelay);this._timer=setTimeout(n.hitch(this,"_fireEventAndReload"),this._currentTimeout)},trigger:function(c,d,b,a,e,h,k,l){if(e!=this._obj){this.stop();this._initialDelay=k||500;this._subsequentDelay=
h||.9;this._minDelay=l||10;this._obj=e;this._node=b;this._count=this._currentTimeout=-1;this._callback=n.hitch(d,a);this._evt={faux:!0};for(var f in c)"layerX"!=f&&"layerY"!=f&&(d=c[f],"function"!=typeof d&&"undefined"!=typeof d&&(this._evt[f]=d));this._fireEventAndReload()}},stop:function(){this._timer&&(clearTimeout(this._timer),this._timer=null);this._obj&&(this._callback(-1,this._node,this._evt),this._obj=null)},addKeyListener:function(d,f,b,a,e,k,q){var g="keyCode"in f?"keyCode":"charCode"in
f?"charCode":"charOrCode",m=[l(d,"keyCode"in f?"keydown":"charCode"in f?"keypress":c._keypress,n.hitch(this,function(c){c[g]!=f[g]||void 0!==f.ctrlKey&&f.ctrlKey!=c.ctrlKey||void 0!==f.altKey&&f.altKey!=c.altKey||void 0!==f.metaKey&&f.metaKey!=(c.metaKey||!1)||void 0!==f.shiftKey&&f.shiftKey!=c.shiftKey?h._obj==f&&h.stop():(c.stopPropagation(),c.preventDefault(),h.trigger(c,b,d,a,f,e,k,q))})),l(d,"keyup",n.hitch(this,function(){h._obj==f&&h.stop()}))];return{remove:function(){p.forEach(m,function(a){a.remove()})}}},
addMouseListener:function(c,d,b,a,e,m){var f=[l(c,"mousedown",n.hitch(this,function(f){f.preventDefault();h.trigger(f,d,c,b,c,a,e,m)})),l(c,"mouseup",n.hitch(this,function(a){this._obj&&a.preventDefault();h.stop()})),l(c,"mouseout",n.hitch(this,function(a){this._obj&&a.preventDefault();h.stop()})),l(c,"dblclick",n.hitch(this,function(f){f.preventDefault();9>k("ie")&&(h.trigger(f,d,c,b,c,a,e,m),setTimeout(n.hitch(this,h.stop),50))}))];return{remove:function(){p.forEach(f,function(a){a.remove()})}}},
addListener:function(c,d,b,a,e,h,k,l){var f=[this.addKeyListener(d,b,a,e,h,k,l),this.addMouseListener(c,a,e,h,k,l)];return{remove:function(){p.forEach(f,function(a){a.remove()})}}}};return h})},"dijit/form/RangeBoundTextBox":function(){define(["dojo/_base/declare","dojo/i18n","./MappedTextBox","dojo/i18n!./nls/validate"],function(p,c,n){return p("dijit.form.RangeBoundTextBox",n,{rangeMessage:"",rangeCheck:function(c,k){return("min"in k?0<=this.compare(c,k.min):!0)&&("max"in k?0>=this.compare(c,k.max):
!0)},isInRange:function(){return this.rangeCheck(this.get("value"),this.constraints)},_isDefinitelyOutOfRange:function(){var c=this.get("value");if(null==c)return!1;var k=!1;"min"in this.constraints&&(k=this.constraints.min,k=0>this.compare(c,"number"==typeof k&&0<=k&&0!=c?0:k));!k&&"max"in this.constraints&&(k=this.constraints.max,k=0<this.compare(c,"number"!=typeof k||0<k?k:0));return k},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange()},isValid:function(c){return this.inherited(arguments)&&
(this._isEmpty(this.textbox.value)&&!this.required||this.isInRange(c))},getErrorMessage:function(c){var k=this.get("value");return null==k||""===k||"number"==typeof k&&isNaN(k)||this.isInRange(c)?this.inherited(arguments):this.rangeMessage},postMixInProperties:function(){this.inherited(arguments);this.rangeMessage||(this.messages=c.getLocalization("dijit.form","validate",this.lang),this.rangeMessage=this.messages.rangeMessage)}})})},"dijit/form/MappedTextBox":function(){define(["dojo/_base/declare",
"dojo/sniff","dojo/dom-construct","./ValidationTextBox"],function(p,c,n,l){return p("dijit.form.MappedTextBox",l,{postMixInProperties:function(){this.inherited(arguments);this.nameAttrSetting=""},_setNameAttr:"valueNode",serialize:function(c){return c.toString?c.toString():""},toString:function(){var c=this.filter(this.get("value"));return null!=c?"string"==typeof c?c:this.serialize(c,this.constraints):""},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments)},
buildRendering:function(){this.inherited(arguments);this.valueNode=n.place("\x3cinput type\x3d'hidden'"+(this.name?' name\x3d"'+this.name.replace(/"/g,"\x26quot;")+'"':"")+"/\x3e",this.textbox,"after")},reset:function(){this.valueNode.value="";this.inherited(arguments)}})})},"dijit/form/NumberTextBox":function(){define("dojo/_base/declare dojo/_base/lang dojo/i18n dojo/string dojo/number ./RangeBoundTextBox".split(" "),function(p,c,n,l,k,d){var h=function(c){c=c||{};var b=n.getLocalization("dojo.cldr",
"number",n.normalizeLocale(c.locale)),a=c.pattern?c.pattern:b[(c.type||"decimal")+"Format"];c="number"==typeof c.places?c.places:"string"===typeof c.places&&0<c.places.length?c.places.replace(/.*,/,""):-1!=a.indexOf(".")?a.split(".")[1].replace(/[^#0]/g,"").length:0;return{sep:b.decimal,places:c}},g=p("dijit.form.NumberTextBoxMixin",null,{pattern:function(d){return"("+(this.focused&&this.editOptions?this._regExpGenerator(c.delegate(d,this.editOptions))+"|":"")+this._regExpGenerator(d)+")"},value:NaN,
editOptions:{pattern:"#.######"},_formatter:k.format,_regExpGenerator:k.regexp,_decimalInfo:h(),postMixInProperties:function(){this.inherited(arguments);this._set("type","text")},_setConstraintsAttr:function(c){var b="number"==typeof c.places?c.places:0;b&&b++;"number"!=typeof c.max&&(c.max=9*Math.pow(10,15-b));"number"!=typeof c.min&&(c.min=-9*Math.pow(10,15-b));this.inherited(arguments,[c]);this.focusNode&&this.focusNode.value&&!isNaN(this.value)&&this.set("value",this.value);this._decimalInfo=
h(c)},_onFocus:function(c){if(!this.disabled&&!this.readOnly){var b=this.get("value");"number"!=typeof b||isNaN(b)||(b=this.format(b,this.constraints),void 0!==b&&(this.textbox.value=b,"mouse"!==c&&this.textbox.select()));this.inherited(arguments)}},format:function(d,b){var a=String(d);if("number"!=typeof d)return a;if(isNaN(d))return"";if(!("rangeCheck"in this&&this.rangeCheck(d,b))&&!1!==b.exponent&&/\de[-+]?\d/i.test(a))return a;this.editOptions&&this.focused&&(b=c.mixin({},b,this.editOptions));
return this._formatter(d,b)},_parser:k.parse,parse:function(d,b){var a=c.mixin({},b,this.editOptions&&this.focused?this.editOptions:{});if(this.focused&&null!=a.places){var e=a.places,e="number"===typeof e?e:Number(e.split(",").pop());a.places="0,"+e}a=this._parser(d,a);this.editOptions&&this.focused&&isNaN(a)&&(a=this._parser(d,b));return a},_getDisplayedValueAttr:function(){var c=this.inherited(arguments);return isNaN(c)?this.textbox.value:c},filter:function(c){if(null==c||"string"==typeof c&&""==
c)return NaN;"number"!=typeof c||isNaN(c)||0==c||(c=k.round(c,this._decimalInfo.places));return this.inherited(arguments,[c])},serialize:function(c,b){return"number"!=typeof c||isNaN(c)?"":this.inherited(arguments)},_setBlurValue:function(){var d=c.hitch(c.delegate(this,{focused:!0}),"get")("value");this._setValueAttr(d,!0)},_setValueAttr:function(c,b,a){if(void 0!==c&&void 0===a)if(a=String(c),"number"==typeof c)if(isNaN(c))a="";else{if("rangeCheck"in this&&this.rangeCheck(c,this.constraints)||!1===
this.constraints.exponent||!/\de[-+]?\d/i.test(a))a=void 0}else c?c=void 0:(a="",c=NaN);this.inherited(arguments,[c,b,a])},_getValueAttr:function(){var d=this.inherited(arguments);if(isNaN(d)&&""!==this.textbox.value){if(!1!==this.constraints.exponent&&/\de[-+]?\d/i.test(this.textbox.value)&&(new RegExp("^"+k._realNumberRegexp(c.delegate(this.constraints))+"$")).test(this.textbox.value))return d=Number(this.textbox.value),isNaN(d)?void 0:d}else return d},isValid:function(c){if(!this.focused||this._isEmpty(this.textbox.value))return this.inherited(arguments);
var b=this.get("value");return!isNaN(b)&&this.rangeCheck(b,this.constraints)?!1!==this.constraints.exponent&&/\de[-+]?\d/i.test(this.textbox.value)?!0:this.inherited(arguments):!1},_isValidSubset:function(){var c="number"==typeof this.constraints.min,b="number"==typeof this.constraints.max,a=this.get("value");if(isNaN(a)||!c&&!b)return this.inherited(arguments);var d=a|0,g=0>a,h=-1!=this.textbox.value.indexOf(this._decimalInfo.sep),k=(this.maxLength||20)-this.textbox.value.length,n=h?this.textbox.value.split(this._decimalInfo.sep)[1].replace(/[^0-9]/g,
""):"",d=h?d+"."+n:d+"",k=l.rep("9",k),h=a;g?h=Number(d+k):a=Number(d+k);return!(c&&a<this.constraints.min||b&&h>this.constraints.max)}});p=p("dijit.form.NumberTextBox",[d,g],{baseClass:"dijitTextBox dijitNumberTextBox"});p.Mixin=g;return p})},"dijit/ColorPalette":function(){define("require dojo/text!./templates/ColorPalette.html ./_Widget ./_TemplatedMixin ./_PaletteMixin ./hccss dojo/i18n dojo/_base/Color dojo/_base/declare dojo/dom-construct dojo/string dojo/i18n!dojo/nls/colors dojo/colors".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a){var e=f("dijit.ColorPalette",[n,l,k],{palette:"7x10",_palettes:{"7x10":["white seashell cornsilk lemonchiffon lightyellow palegreen paleturquoise lightcyan lavender plum".split(" "),"lightgray pink bisque moccasin khaki lightgreen lightseagreen lightskyblue cornflowerblue violet".split(" "),"silver lightcoral sandybrown orange palegoldenrod chartreuse mediumturquoise skyblue mediumslateblue orchid".split(" "),"gray red orangered darkorange yellow limegreen darkseagreen royalblue slateblue mediumorchid".split(" "),
"dimgray crimson chocolate coral gold forestgreen seagreen blue blueviolet darkorchid".split(" "),"darkslategray firebrick saddlebrown sienna olive green darkcyan mediumblue darkslateblue darkmagenta".split(" "),"black darkred maroon brown darkolivegreen darkgreen midnightblue navy indigo purple".split(" ")],"3x4":[["white","lime","green","blue"],["silver","yellow","fuchsia","navy"],["gray","red","purple","black"]]},templateString:c,baseClass:"dijitColorPalette",_dyeFactory:function(a,b,c,d){return new this._dyeClass(a,
b,c,d)},buildRendering:function(){this.inherited(arguments);this._dyeClass=f(e._Color,{palette:this.palette});this._preparePalette(this._palettes[this.palette],h.getLocalization("dojo","colors",this.lang))}});e._Color=f("dijit._Color",g,{template:"\x3cspan class\x3d'dijitInline dijitPaletteImg'\x3e\x3cimg src\x3d'${blankGif}' alt\x3d'${alt}' title\x3d'${title}' class\x3d'dijitColorPaletteSwatch' style\x3d'background-color: ${color}'/\x3e\x3c/span\x3e",hcTemplate:"\x3cspan class\x3d'dijitInline dijitPaletteImg' style\x3d'position: relative; overflow: hidden; height: 12px; width: 14px;'\x3e\x3cimg src\x3d'${image}' alt\x3d'${alt}' title\x3d'${title}' style\x3d'position: absolute; left: ${left}px; top: ${top}px; ${size}'/\x3e\x3c/span\x3e",
_imagePaths:{"7x10":p.toUrl("./themes/a11y/colors7x10.png"),"3x4":p.toUrl("./themes/a11y/colors3x4.png")},constructor:function(a,b,c,d){this._title=d;this._row=b;this._col=c;this.setColor(g.named[a])},getValue:function(){return this.toHex()},fillCell:function(c,e){e=a.substitute(d("highcontrast")?this.hcTemplate:this.template,{color:this.toHex(),blankGif:e,alt:this._title,title:this._title,image:this._imagePaths[this.palette].toString(),left:-20*this._col-5,top:-20*this._row-5,size:"7x10"==this.palette?
"height: 145px; width: 206px":"height: 64px; width: 86px"});b.place(e,c)}});return e})},"dijit/_PaletteMixin":function(){define("dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/keys dojo/_base/lang dojo/on ./_CssStateMixin ./a11yclick ./focus ./typematic".split(" "),function(p,c,n,l,k,d,h,g,f,b,a){return p("dijit._PaletteMixin",g,{defaultTimeout:500,timeoutChangeRate:.9,value:"",_selectedCell:-1,tabIndex:"0",cellClass:"dijitPaletteCell",dyeClass:null,_dyeFactory:function(a){return new ("string"==
typeof this.dyeClass?d.getObject(this.dyeClass):this.dyeClass)(a)},_preparePalette:function(b,c){this._cells=[];var e=this._blankGif;this.own(h(this.gridNode,f,d.hitch(this,"_onCellClick")));for(var g=0;g<b.length;g++)for(var m=l.create("tr",{tabIndex:"-1",role:"row"},this.gridNode),n=0;n<b[g].length;n++){var p=b[g][n];if(p){var w=this._dyeFactory(p,g,n,c[p]),p=l.create("td",{"class":this.cellClass,tabIndex:"-1",title:c[p],role:"gridcell"},m);w.fillCell(p,e);p.idx=this._cells.length;this._cells.push({node:p,
dye:w})}}this._xDim=b[0].length;this._yDim=b.length;var v={UP_ARROW:-this._xDim,DOWN_ARROW:this._xDim,RIGHT_ARROW:this.isLeftToRight()?1:-1,LEFT_ARROW:this.isLeftToRight()?-1:1},y;for(y in v)this.own(a.addKeyListener(this.domNode,{keyCode:k[y],ctrlKey:!1,altKey:!1,shiftKey:!1},this,function(){var a=v[y];return function(b){this._navigateByKey(a,b)}}(),this.timeoutChangeRate,this.defaultTimeout))},postCreate:function(){this.inherited(arguments);this._setCurrent(this._cells[0].node)},focus:function(){b.focus(this._currentFocus)},
_onCellClick:function(a){for(var c=a.target;"TD"!=c.tagName;){if(!c.parentNode||c==this.gridNode)return;c=c.parentNode}var d=this._getDye(c).getValue();this._setCurrent(c);b.focus(c);this._setValueAttr(d,!0);a.stopPropagation();a.preventDefault()},_setCurrent:function(a){"_currentFocus"in this&&c.set(this._currentFocus,"tabIndex","-1");(this._currentFocus=a)&&c.set(a,"tabIndex",this.tabIndex)},_setValueAttr:function(a,b){0<=this._selectedCell&&n.remove(this._cells[this._selectedCell].node,this.cellClass+
"Selected");this._selectedCell=-1;if(a)for(var c=0;c<this._cells.length;c++)if(a==this._cells[c].dye.getValue()){this._selectedCell=c;n.add(this._cells[c].node,this.cellClass+"Selected");break}this._set("value",0<=this._selectedCell?a:null);if(b||void 0===b)this.onChange(a)},onChange:function(){},_navigateByKey:function(a,c){-1!=c&&(a=this._currentFocus.idx+a,a<this._cells.length&&-1<a&&(a=this._cells[a].node,this._setCurrent(a),this.defer(d.hitch(b,"focus",a))))},_getDye:function(a){return this._cells[a.idx].dye}})})},
"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(p,c,n,l){var k={};c.setObject("dojo.colors",k);var d=function(c,d,b){0>b&&++b;1<b&&--b;var a=6*b;return 1>a?c+(d-c)*a:1>2*b?d:2>3*b?c+(d-c)*(2/3-b)*6:c};p.colorFromRgb=n.fromRgb=function(c,f){var b=c.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(b){c=b[2].split(/\s*,\s*/);var a=c.length,b=b[1];if("rgb"==b&&3==a||"rgba"==b&&4==a)return b=c[0],"%"==b.charAt(b.length-1)?(b=l.map(c,
function(a){return 2.56*parseFloat(a)}),4==a&&(b[3]=c[3]),n.fromArray(b,f)):n.fromArray(c,f);if("hsl"==b&&3==a||"hsla"==b&&4==a){var b=(parseFloat(c[0])%360+360)%360/360,e=parseFloat(c[1])/100,g=parseFloat(c[2])/100,e=.5>=g?g*(e+1):g+e-g*e,g=2*g-e,b=[256*d(g,e,b+1/3),256*d(g,e,b),256*d(g,e,b-1/3),1];4==a&&(b[3]=c[3]);return n.fromArray(b,f)}}return null};var h=function(c,d,b){c=Number(c);return isNaN(c)?b:c<d?d:c>b?b:c};n.prototype.sanitize=function(){this.r=Math.round(h(this.r,0,255));this.g=Math.round(h(this.g,
0,255));this.b=Math.round(h(this.b,0,255));this.a=h(this.a,0,1);return this};k.makeGrey=n.makeGrey=function(c,d){return n.fromArray([c,c,c,d])};c.mixin(n.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,
149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,
0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],
lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,
0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,
232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,
250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return n})},"dijit/form/HorizontalSlider":function(){define("dojo/_base/array dojo/_base/declare dojo/dnd/move dojo/_base/fx dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/sniff dojo/dnd/Moveable dojo/dnd/Mover dojo/query dojo/mouse dojo/on ../_base/manager ../focus ../typematic ./Button ./_FormValueWidget ../_Container dojo/text!./templates/HorizontalSlider.html".split(" "),
function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y){var z=c("dijit.form._SliderMover",a,{onMouseMove:function(a){var b=this.widget,c=b._abspos;c||(c=b._abspos=k.position(b.sliderBarContainer,!0),b._setPixelValue_=g.hitch(b,"_setPixelValue"),b._isReversed_=b._isReversed());a=a[b._mousePixelCoord]-c[b._startingPixelCoord];b._setPixelValue_(b._isReversed_?c[b._pixelCount]-a:a,c[b._pixelCount],!1)},destroy:function(b){a.prototype.destroy.apply(this,arguments);var c=this.widget;c._abspos=null;c._setValueAttr(c.value,
!0)}});n=c("dijit.form.HorizontalSlider",[w,v],{templateString:y,value:0,showButtons:!0,minimum:0,maximum:100,discreteValues:Infinity,pageIncrement:2,clickSelect:!0,slideDuration:u.defaultDuration,_setIdAttr:"",_setNameAttr:"valueNode",baseClass:"dijitSlider",cssStateNodes:{incrementButton:"dijitSliderIncrementButton",decrementButton:"dijitSliderDecrementButton",focusNode:"dijitSliderThumb"},_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_handleOffsetCoord:"left",_progressPixelSize:"width",
_onKeyUp:function(a){this.disabled||this.readOnly||a.altKey||a.ctrlKey||a.metaKey||this._setValueAttr(this.value,!0)},_onKeyDown:function(a){if(!(this.disabled||this.readOnly||a.altKey||a.ctrlKey||a.metaKey)){switch(a.keyCode){case h.HOME:this._setValueAttr(this.minimum,!1);break;case h.END:this._setValueAttr(this.maximum,!1);break;case this._descending||this.isLeftToRight()?h.RIGHT_ARROW:h.LEFT_ARROW:case !1===this._descending?h.DOWN_ARROW:h.UP_ARROW:case !1===this._descending?h.PAGE_DOWN:h.PAGE_UP:this.increment(a);
break;case this._descending||this.isLeftToRight()?h.LEFT_ARROW:h.RIGHT_ARROW:case !1===this._descending?h.UP_ARROW:h.DOWN_ARROW:case !1===this._descending?h.PAGE_UP:h.PAGE_DOWN:this.decrement(a);break;default:return}a.stopPropagation();a.preventDefault()}},_onHandleClick:function(a){this.disabled||this.readOnly||(f("ie")||t.focus(this.sliderHandle),a.stopPropagation(),a.preventDefault())},_isReversed:function(){return!this.isLeftToRight()},_onBarClick:function(a){if(!this.disabled&&!this.readOnly&&
this.clickSelect){t.focus(this.sliderHandle);a.stopPropagation();a.preventDefault();var b=k.position(this.sliderBarContainer,!0),c=a[this._mousePixelCoord]-b[this._startingPixelCoord];this._setPixelValue(this._isReversed()?b[this._pixelCount]-c:c,b[this._pixelCount],!0);this._movable.onMouseDown(a)}},_setPixelValue:function(a,b,c){if(!this.disabled&&!this.readOnly){var d=this.discreteValues;if(1>=d||Infinity==d)d=b;d--;this._setValueAttr(Math.max(Math.min((this.maximum-this.minimum)*Math.round(a/
(b/d))/d+this.minimum,this.maximum),this.minimum),c)}},_setValueAttr:function(a,b){this._set("value",a);this.valueNode.value=a;this.focusNode.setAttribute("aria-valuenow",a);this.inherited(arguments);var c=this.maximum>this.minimum?(a-this.minimum)/(this.maximum-this.minimum):0,d=!1===this._descending?this.remainingBar:this.progressBar,e=!1===this._descending?this.progressBar:this.remainingBar;this._inProgressAnim&&"stopped"!=this._inProgressAnim.status&&this._inProgressAnim.stop(!0);if(b&&0<this.slideDuration&&
d.style[this._progressPixelSize]){var f=this,g={},h=parseFloat(d.style[this._progressPixelSize]),k=this.slideDuration*(c-h/100);0!=k&&(0>k&&(k=0-k),g[this._progressPixelSize]={start:h,end:100*c,units:"%"},this._inProgressAnim=l.animateProperty({node:d,duration:k,onAnimate:function(a){e.style[f._progressPixelSize]=100-parseFloat(a[f._progressPixelSize])+"%"},onEnd:function(){delete f._inProgressAnim},properties:g}),this._inProgressAnim.play())}else d.style[this._progressPixelSize]=100*c+"%",e.style[this._progressPixelSize]=
100*(1-c)+"%"},_bumpValue:function(a,b){if(!(this.disabled||this.readOnly||this.maximum<=this.minimum)){var c=d.getComputedStyle(this.sliderBarContainer),e=k.getContentBox(this.sliderBarContainer,c),c=this.discreteValues;if(1>=c||Infinity==c)c=e[this._pixelCount];c--;a=Math.round((this.value-this.minimum)*c/(this.maximum-this.minimum))+a;0>a&&(a=0);a>c&&(a=c);a=a*(this.maximum-this.minimum)/c+this.minimum;this._setValueAttr(a,b)}},_onClkBumper:function(a){this.disabled||this.readOnly||!this.clickSelect||
this._setValueAttr(a,!0)},_onClkIncBumper:function(){this._onClkBumper(!1===this._descending?this.minimum:this.maximum)},_onClkDecBumper:function(){this._onClkBumper(!1===this._descending?this.maximum:this.minimum)},decrement:function(a){this._bumpValue(a.keyCode==h.PAGE_DOWN?-this.pageIncrement:-1)},increment:function(a){this._bumpValue(a.keyCode==h.PAGE_UP?this.pageIncrement:1)},_mouseWheeled:function(a){this.focused&&(a.stopPropagation(),a.preventDefault(),this._bumpValue(0>a.wheelDelta?-1:1,!0))},
startup:function(){this._started||(p.forEach(this.getChildren(),function(a){this[a.container]!=this.containerNode&&this[a.container].appendChild(a.domNode)},this),this.inherited(arguments))},_typematicCallback:function(a,b,c){if(-1==a)this._setValueAttr(this.value,!0);else this[b==(this._descending?this.incrementButton:this.decrementButton)?"decrement":"increment"](c)},buildRendering:function(){this.inherited(arguments);this.showButtons&&(this.incrementButton.style.display="",this.decrementButton.style.display=
"");var a=e('label[for\x3d"'+this.id+'"]');a.length&&(a[0].id||(a[0].id=this.id+"_label"),this.focusNode.setAttribute("aria-labelledby",a[0].id));this.focusNode.setAttribute("aria-valuemin",this.minimum);this.focusNode.setAttribute("aria-valuemax",this.maximum)},postCreate:function(){this.inherited(arguments);this.showButtons&&this.own(r.addMouseListener(this.decrementButton,this,"_typematicCallback",25,500),r.addMouseListener(this.incrementButton,this,"_typematicCallback",25,500));this.own(q(this.domNode,
m.wheel,g.hitch(this,"_mouseWheeled")));var a=c(z,{widget:this});this._movable=new b(this.sliderHandle,{mover:a});this._layoutHackIE7()},destroy:function(){this._movable.destroy();this._inProgressAnim&&"stopped"!=this._inProgressAnim.status&&this._inProgressAnim.stop(!0);this.inherited(arguments)}});n._Mover=z;return n})},"dijit/form/HorizontalRule":function(){define(["dojo/_base/declare","../_Widget","../_TemplatedMixin"],function(p,c,n){return p("dijit.form.HorizontalRule",[c,n],{templateString:'\x3cdiv class\x3d"dijitRuleContainer dijitRuleContainerH"\x3e\x3c/div\x3e',
count:3,container:"containerNode",ruleStyle:"",_positionPrefix:'\x3cdiv class\x3d"dijitRuleMark dijitRuleMarkH" style\x3d"left:',_positionSuffix:"%;",_suffix:'"\x3e\x3c/div\x3e',_genHTML:function(c){return this._positionPrefix+c+this._positionSuffix+this.ruleStyle+this._suffix},_isHorizontal:!0,buildRendering:function(){this.inherited(arguments);var c;if(1==this.count)c=this._genHTML(50,0);else{var k,d=100/(this.count-1);if(!this._isHorizontal||this.isLeftToRight()){c=this._genHTML(0,0);for(k=1;k<
this.count-1;k++)c+=this._genHTML(d*k,k);c+=this._genHTML(100,this.count-1)}else{c=this._genHTML(100,0);for(k=1;k<this.count-1;k++)c+=this._genHTML(100-d*k,k);c+=this._genHTML(0,this.count-1)}}this.domNode.innerHTML=c}})})},"dojo/_base/query":function(){define(["../query","./NodeList"],function(p){return p})},"dijit/form/CheckBox":function(){define("require dojo/_base/declare dojo/dom-attr dojo/has dojo/query dojo/ready ./ToggleButton ./_CheckBoxMixin dojo/text!./templates/CheckBox.html dojo/NodeList-dom ../a11yclick".split(" "),
function(p,c,n,l,k,d,h,g,f){l("dijit-legacy-requires")&&d(0,function(){p(["dijit/form/RadioButton"])});return c("dijit.form.CheckBox",[h,g],{templateString:f,baseClass:"dijitCheckBox",_setValueAttr:function(b,a){"string"==typeof b&&(this.inherited(arguments),b=!0);this._created&&this.set("checked",b,a)},_getValueAttr:function(){return this.checked&&this._get("value")},_setIconClassAttr:null,_setNameAttr:"focusNode",postMixInProperties:function(){this.inherited(arguments);this.checkedAttrSetting=""},
_fillContent:function(){},_onFocus:function(){this.id&&k("label[for\x3d'"+this.id+"']").addClass("dijitFocusedLabel");this.inherited(arguments)},_onBlur:function(){this.id&&k("label[for\x3d'"+this.id+"']").removeClass("dijitFocusedLabel");this.inherited(arguments)}})})},"dijit/form/ToggleButton":function(){define(["dojo/_base/declare","dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(p,c,n,l){return p("dijit.form.ToggleButton",[n,l],{baseClass:"dijitToggleButton",setChecked:function(k){c.deprecated("setChecked("+
k+") is deprecated. Use set('checked',"+k+") instead.","","2.0");this.set("checked",k)}})})},"dijit/form/_ToggleButtonMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(p,c){return p("dijit.form._ToggleButtonMixin",null,{checked:!1,_aria_attr:"aria-pressed",_onClick:function(c){var l=this.checked;this._set("checked",!l);var k=this.inherited(arguments);this.set("checked",k?this.checked:l);return k},_setCheckedAttr:function(n,l){this._set("checked",n);var k=this.focusNode||this.domNode;
this._created&&c.get(k,"checked")!=!!n&&c.set(k,"checked",!!n);k.setAttribute(this._aria_attr,String(n));this._handleOnChange(n,l)},postCreate:function(){this.inherited(arguments);var c=this.focusNode||this.domNode;this.checked&&c.setAttribute("checked","checked");void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.checked)},reset:function(){this._hasBeenBlurred=!1;this.set("checked",this.params.checked||!1)}})})},"dijit/form/_CheckBoxMixin":function(){define(["dojo/_base/declare",
"dojo/dom-attr"],function(p,c){return p("dijit.form._CheckBoxMixin",null,{type:"checkbox",value:"on",readOnly:!1,_aria_attr:"aria-checked",_setReadOnlyAttr:function(n){this._set("readOnly",n);c.set(this.focusNode,"readOnly",n)},_setLabelAttr:void 0,_getSubmitValue:function(c){return null==c||""===c?"on":c},_setValueAttr:function(n){n=this._getSubmitValue(n);this._set("value",n);c.set(this.focusNode,"value",n)},reset:function(){this.inherited(arguments);this._set("value",this._getSubmitValue(this.params.value));
c.set(this.focusNode,"value",this.value)},_onClick:function(c){return this.readOnly?(c.stopPropagation(),c.preventDefault(),!1):this.inherited(arguments)}})})},"dijit/form/ComboBox":function(){define(["dojo/_base/declare","./ValidationTextBox","./ComboBoxMixin"],function(p,c,n){return p("dijit.form.ComboBox",[c,n],{})})},"dijit/form/ComboBoxMixin":function(){define("dojo/_base/declare dojo/Deferred dojo/_base/kernel dojo/_base/lang dojo/store/util/QueryResults ./_AutoCompleterMixin ./_ComboBoxMenu ../_HasDropDown dojo/text!./templates/DropDownBox.html".split(" "),
function(p,c,n,l,k,d,h,g,f){return p("dijit.form.ComboBoxMixin",[g,d],{dropDownClass:h,hasDownArrow:!0,templateString:f,baseClass:"dijitTextBox dijitComboBox",cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_setHasDownArrowAttr:function(b){this._set("hasDownArrow",b);this._buttonNode.style.display=b?"":"none"},_showResultList:function(){this.displayMessage("");this.inherited(arguments)},_setStoreAttr:function(b){b.get||l.mixin(b,{_oldAPI:!0,get:function(a){var b=new c;this.fetchItemByIdentity({identity:a,
onItem:function(a){b.resolve(a)},onError:function(a){b.reject(a)}});return b.promise},query:function(a,b){var d=new c(function(){e.abort&&e.abort()});d.total=new c;var e=this.fetch(l.mixin({query:a,onBegin:function(a){d.total.resolve(a)},onComplete:function(a){d.resolve(a)},onError:function(a){d.reject(a)}},b));return k(d)}});this._set("store",b)},postMixInProperties:function(){var b=this.params.store||this.store;b&&this._setStoreAttr(b);this.inherited(arguments);if(!this.params.store&&this.store&&
!this.store._oldAPI){var a=this.declaredClass;l.mixin(this.store,{getValue:function(b,c){n.deprecated(a+".store.getValue(item, attr) is deprecated for builtin store.  Use item.attr directly","","2.0");return b[c]},getLabel:function(b){n.deprecated(a+".store.getLabel(item) is deprecated for builtin store.  Use item.label directly","","2.0");return b.name},fetch:function(b){n.deprecated(a+".store.fetch() is deprecated for builtin store.","Use store.query()","2.0");require(["dojo/data/ObjectStore"],
l.hitch(this,function(a){(new a({objectStore:this})).fetch(b)}))}})}},buildRendering:function(){this.inherited(arguments);this.focusNode.setAttribute("aria-autocomplete",this.autoComplete?"both":"list")}})})},"dijit/form/_AutoCompleterMixin":function(){define("dojo/aspect dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/query dojo/regexp dojo/sniff ./DataList ./_TextBoxMixin ./_SearchMixin".split(" "),function(p,c,n,l,k,d,h,g,f,b,a){c=c("dijit.form._AutoCompleterMixin",a,{item:null,
autoComplete:!0,highlightMatch:"first",labelAttr:"",labelType:"text",maxHeight:-1,_stopClickEvents:!1,_getCaretPos:function(a){var b=0;if("number"==typeof a.selectionStart)b=a.selectionStart;else if(g("ie")){var c=a.ownerDocument.selection.createRange().duplicate();a=a.createTextRange();c.move("character",0);a.move("character",0);try{a.setEndPoint("EndToEnd",c),b=String(a.text).replace(/\r/g,"").length}catch(u){}}return b},_setCaretPos:function(a,c){c=parseInt(c);b.selectInputText(a,c,c)},_setDisabledAttr:function(a){this.inherited(arguments);
this.domNode.setAttribute("aria-disabled",a?"true":"false")},_onKey:function(a){if(!(32<=a.charCode)){var b=a.charCode||a.keyCode;if(b!=l.ALT&&b!=l.CTRL&&b!=l.META&&b!=l.SHIFT){var c=this.dropDown,d=null;this._abortQuery();this.inherited(arguments);if(!(a.altKey||a.ctrlKey||a.metaKey))switch(this._opened&&(d=c.getHighlightedOption()),b){case l.PAGE_DOWN:case l.DOWN_ARROW:case l.PAGE_UP:case l.UP_ARROW:this._opened&&this._announceOption(d);a.stopPropagation();a.preventDefault();break;case l.ENTER:if(d){if(d==
c.nextButton){this._nextSearch(1);a.stopPropagation();a.preventDefault();break}else if(d==c.previousButton){this._nextSearch(-1);a.stopPropagation();a.preventDefault();break}a.stopPropagation();a.preventDefault()}else this._setBlurValue(),this._setCaretPos(this.focusNode,this.focusNode.value.length);case l.TAB:b=this.get("displayedValue");if(c&&(b==c._messages.previousMessage||b==c._messages.nextMessage))break;d&&this._selectOption(d);case l.ESCAPE:this._opened&&(this._lastQuery=null,this.closeDropDown())}}}},
_autoCompleteText:function(a){var c=this.focusNode;b.selectInputText(c,c.value.length);var d=this.ignoreCase?"toLowerCase":"substr";0==a[d](0).indexOf(this.focusNode.value[d](0))?(d=this.autoComplete?this._getCaretPos(c):c.value.length,d+1>c.value.length&&(c.value=a,b.selectInputText(c,d))):(c.value=a,b.selectInputText(c))},_openResultList:function(a,b,c){var d=this.dropDown.getHighlightedOption();this.dropDown.clearResultList();a.length||0!=c.start?(this._nextSearch=this.dropDown.onPage=k.hitch(this,
function(b){a.nextPage(-1!==b);this.focus()}),this.dropDown.createOptions(a,c,k.hitch(this,"_getMenuLabelFromItem")),this._showResultList(),"direction"in c?(c.direction?this.dropDown.highlightFirstOption():c.direction||this.dropDown.highlightLastOption(),d&&this._announceOption(this.dropDown.getHighlightedOption())):!this.autoComplete||this._prev_key_backspace||/^[*]+$/.test(b[this.searchAttr].toString())||this._announceOption(this.dropDown.containerNode.firstChild.nextSibling)):this.closeDropDown()},
_showResultList:function(){this.closeDropDown(!0);this.openDropDown();this.domNode.setAttribute("aria-expanded","true")},loadDropDown:function(){this._startSearchAll()},isLoaded:function(){return!1},closeDropDown:function(){this._abortQuery();this._opened&&(this.inherited(arguments),this.domNode.setAttribute("aria-expanded","false"))},_setBlurValue:function(){var a=this.get("displayedValue"),b=this.dropDown;!b||a!=b._messages.previousMessage&&a!=b._messages.nextMessage?"undefined"==typeof this.item?
(this.item=null,this.set("displayedValue",a)):(this.value!=this._lastValueReported&&this._handleOnChange(this.value,!0),this._refreshState()):this._setValueAttr(this._lastValueReported,!0);this.focusNode.removeAttribute("aria-activedescendant")},_setItemAttr:function(a,b,c){var d="";a&&(c||(c=this.store._oldAPI?this.store.getValue(a,this.searchAttr):a[this.searchAttr]),d=this._getValueField()!=this.searchAttr?this.store.getIdentity(a):c);this.set("value",d,b,c,a)},_announceOption:function(a){if(a){var b;
if(a==this.dropDown.nextButton||a==this.dropDown.previousButton)b=a.innerHTML,this.item=void 0,this.value="";else{var c=this.dropDown.items[a.getAttribute("item")];b=(this.store._oldAPI?this.store.getValue(c,this.searchAttr):c[this.searchAttr]).toString();this.set("item",c,!1,b)}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);this.focusNode.setAttribute("aria-activedescendant",n.get(a,"id"));this._autoCompleteText(b)}},_selectOption:function(a){this.closeDropDown();a&&
this._announceOption(a);this._setCaretPos(this.focusNode,this.focusNode.value.length);this._handleOnChange(this.value,!0);this.focusNode.removeAttribute("aria-activedescendant")},_startSearchAll:function(){this._startSearch("")},_startSearchFromInput:function(){this.item=void 0;this.inherited(arguments)},_startSearch:function(a){if(!this.dropDown){var b=this.id+"_popup";this.dropDown=new (k.isString(this.dropDownClass)?k.getObject(this.dropDownClass,!1):this.dropDownClass)({onChange:k.hitch(this,
this._selectOption),id:b,dir:this.dir,textDir:this.textDir})}this._lastInput=a;this.inherited(arguments)},_getValueField:function(){return this.searchAttr},postMixInProperties:function(){this.inherited(arguments);if(!this.store&&this.srcNodeRef&&(this.store=new f({},this.srcNodeRef),!("value"in this.params))){var a=this.item=this.store.fetchSelectedItem();if(a){var b=this._getValueField();this.value=this.store._oldAPI?this.store.getValue(a,b):a[b]}}},postCreate:function(){var a=d('label[for\x3d"'+
this.id+'"]');a.length&&(a[0].id||(a[0].id=this.id+"_label"),this.domNode.setAttribute("aria-labelledby",a[0].id));this.inherited(arguments);p.after(this,"onSearch",k.hitch(this,"_openResultList"),!0)},_getMenuLabelFromItem:function(a){a=this.labelFunc(a,this.store);var b=this.labelType;"none"!=this.highlightMatch&&"text"==this.labelType&&this._lastInput&&(a=this.doHighlight(a,this._lastInput),b="html");return{html:"html"==b,label:a}},doHighlight:function(a,b){var c=(this.ignoreCase?"i":"")+("all"==
this.highlightMatch?"g":""),d=this.queryExpr.indexOf("${0}");b=h.escapeString(b);return this._escapeHtml(a.replace(new RegExp((0==d?"^":"")+"("+b+")"+(d==this.queryExpr.length-4?"$":""),c),"\uffff$1\uffff")).replace(/\uFFFF([^\uFFFF]+)\uFFFF/g,'\x3cspan class\x3d"dijitComboBoxHighlightMatch"\x3e$1\x3c/span\x3e')},_escapeHtml:function(a){return a=String(a).replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;")},reset:function(){this.item=null;this.inherited(arguments)},
labelFunc:function(a,b){return(b._oldAPI?b.getValue(a,this.labelAttr||this.searchAttr):a[this.labelAttr||this.searchAttr]).toString()},_setValueAttr:function(a,b,c,d){this._set("item",d||null);null==a&&(a="");this.inherited(arguments)}});g("dojo-bidi")&&c.extend({_setTextDirAttr:function(a){this.inherited(arguments);this.dropDown&&this.dropDown._set("textDir",a)}});return c})},"dijit/form/DataList":function(){define("dojo/_base/declare dojo/dom dojo/_base/lang dojo/query dojo/store/Memory ../registry".split(" "),
function(p,c,n,l,k,d){function h(c){return{id:c.value,value:c.value,name:n.trim(c.innerText||c.textContent||"")}}return p("dijit.form.DataList",k,{constructor:function(g,f){this.domNode=c.byId(f);n.mixin(this,g);this.id&&d.add(this);this.domNode.style.display="none";this.inherited(arguments,[{data:l("option",this.domNode).map(h)}])},destroy:function(){d.remove(this.id)},fetchSelectedItem:function(){var c=l("\x3e option[selected]",this.domNode)[0]||l("\x3e option",this.domNode)[0];return c&&h(c)}})})},
"dijit/form/_SearchMixin":function(){define("dojo/_base/declare dojo/keys dojo/_base/lang dojo/query dojo/string dojo/when ../registry".split(" "),function(p,c,n,l,k,d,h){return p("dijit.form._SearchMixin",null,{pageSize:Infinity,store:null,fetchProperties:{},query:{},list:"",_setListAttr:function(c){this._set("list",c)},searchDelay:200,searchAttr:"name",queryExpr:"${0}*",ignoreCase:!0,_patternToRegExp:function(c){return new RegExp("^"+c.replace(/(\\.)|(\*)|(\?)|\W/g,function(c,b,a,d){return a?".*":
d?".":b?b:"\\"+c})+"$",this.ignoreCase?"mi":"m")},_abortQuery:function(){this.searchTimer&&(this.searchTimer=this.searchTimer.remove());this._queryDeferHandle&&(this._queryDeferHandle=this._queryDeferHandle.remove());this._fetchHandle&&(this._fetchHandle.abort&&(this._cancelingQuery=!0,this._fetchHandle.abort(),this._cancelingQuery=!1),this._fetchHandle.cancel&&(this._cancelingQuery=!0,this._fetchHandle.cancel(),this._cancelingQuery=!1),this._fetchHandle=null)},_processInput:function(d){if(!this.disabled&&
!this.readOnly){d=d.charOrCode;this._prev_key_backspace=!1;if(d==c.DELETE||d==c.BACKSPACE)this._maskValidSubsetError=this._prev_key_backspace=!0;if(this.store)this.searchTimer=this.defer("_startSearchFromInput",1);else this.onSearch()}},onSearch:function(){},_startSearchFromInput:function(){this._startSearch(this.focusNode.value)},_startSearch:function(c){this._abortQuery();var f=this,b=n.clone(this.query),a={start:0,count:this.pageSize,queryOptions:{ignoreCase:this.ignoreCase,deep:!0}},e=k.substitute(this.queryExpr,
[c.replace(/([\\\*\?])/g,"\\$1")]),g,h=function(){var c=f._fetchHandle=f.store.query(b,a);f.disabled||f.readOnly||g!==f._lastQuery||d(c,function(e){f._fetchHandle=null;f.disabled||f.readOnly||g!==f._lastQuery||d(c.total,function(c){e.total=c;var d=f.pageSize;if(isNaN(d)||d>e.total)d=e.total;e.nextPage=function(c){a.direction=c=!1!==c;a.count=d;c?(a.start+=e.length,a.start>=e.total&&(a.count=0)):(a.start-=d,0>a.start&&(a.count=Math.max(d+a.start,0),a.start=0));0>=a.count?(e.length=0,f.onSearch(e,b,
a)):h()};f.onSearch(e,b,a)})},function(a){f._fetchHandle=null;f._cancelingQuery||console.error(f.declaredClass+" "+a.toString())})};n.mixin(a,this.fetchProperties);this.store._oldAPI?g=e:(g=this._patternToRegExp(e),g.toString=function(){return e});this._lastQuery=b[this.searchAttr]=g;this._queryDeferHandle=this.defer(h,this.searchDelay)},constructor:function(){this.query={};this.fetchProperties={}},postMixInProperties:function(){if(!this.store){var c=this.list;c&&(this.store=h.byId(c))}this.inherited(arguments)}})})},
"dijit/form/_ComboBoxMenu":function(){define("dojo/_base/declare dojo/dom-class dojo/dom-style dojo/keys ../_WidgetBase ../_TemplatedMixin ./_ComboBoxMenuMixin ./_ListMouseMixin".split(" "),function(p,c,n,l,k,d,h,g){return p("dijit.form._ComboBoxMenu",[k,d,g,h],{templateString:"\x3cdiv class\x3d'dijitReset dijitMenu' data-dojo-attach-point\x3d'containerNode' style\x3d'overflow: auto; overflow-x: hidden;' role\x3d'listbox'\x3e\x3cdiv class\x3d'dijitMenuItem dijitMenuPreviousButton' data-dojo-attach-point\x3d'previousButton' role\x3d'option'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitMenuItem dijitMenuNextButton' data-dojo-attach-point\x3d'nextButton' role\x3d'option'\x3e\x3c/div\x3e\x3c/div\x3e",
baseClass:"dijitComboBoxMenu",postCreate:function(){this.inherited(arguments);this.isLeftToRight()||(c.add(this.previousButton,"dijitMenuItemRtl"),c.add(this.nextButton,"dijitMenuItemRtl"));this.containerNode.setAttribute("role","listbox")},_createMenuItem:function(){var c=this.ownerDocument.createElement("div");c.className="dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl");c.setAttribute("role","option");return c},onHover:function(d){c.add(d,"dijitMenuItemHover")},onUnhover:function(d){c.remove(d,
"dijitMenuItemHover")},onSelect:function(d){c.add(d,"dijitMenuItemSelected")},onDeselect:function(d){c.remove(d,"dijitMenuItemSelected")},_page:function(c){var b=0,a=this.domNode.scrollTop,d=n.get(this.domNode,"height");for(this.getHighlightedOption()||this.selectNextNode();b<d;){var f=this.getHighlightedOption();if(c){if(!f.previousSibling||"none"==f.previousSibling.style.display)break;this.selectPreviousNode()}else{if(!f.nextSibling||"none"==f.nextSibling.style.display)break;this.selectNextNode()}f=
this.domNode.scrollTop;b+=(f-a)*(c?-1:1);a=f}},handleKey:function(c){switch(c.keyCode){case l.DOWN_ARROW:return this.selectNextNode(),!1;case l.PAGE_DOWN:return this._page(!1),!1;case l.UP_ARROW:return this.selectPreviousNode(),!1;case l.PAGE_UP:return this._page(!0),!1;default:return!0}}})})},"dijit/form/_ComboBoxMenuMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/has dojo/i18n dojo/i18n!./nls/ComboBox".split(" "),function(p,c,n,l,k){var d=c("dijit.form._ComboBoxMenuMixin"+
(l("dojo-bidi")?"_NoBidi":""),null,{_messages:null,postMixInProperties:function(){this.inherited(arguments);this._messages=k.getLocalization("dijit.form","ComboBox",this.lang)},buildRendering:function(){this.inherited(arguments);this.previousButton.innerHTML=this._messages.previousMessage;this.nextButton.innerHTML=this._messages.nextMessage},_setValueAttr:function(c){this._set("value",c);this.onChange(c)},onClick:function(c){if(c==this.previousButton)this._setSelectedAttr(null),this.onPage(-1);else if(c==
this.nextButton)this._setSelectedAttr(null),this.onPage(1);else this.onChange(c)},onChange:function(){},onPage:function(){},onClose:function(){this._setSelectedAttr(null)},_createOption:function(c,d){var f=this._createMenuItem();c=d(c);c.html?f.innerHTML=c.label:f.appendChild(f.ownerDocument.createTextNode(c.label));""==f.innerHTML&&(f.innerHTML="\x26#160;");return f},createOptions:function(c,d,f){this.items=c;this.previousButton.style.display=0==d.start?"none":"";n.set(this.previousButton,"id",this.id+
"_prev");p.forEach(c,function(a,b){a=this._createOption(a,f);a.setAttribute("item",b);n.set(a,"id",this.id+b);this.nextButton.parentNode.insertBefore(a,this.nextButton)},this);var b=!1;c.total&&!c.total.then&&-1!=c.total?d.start+d.count<c.total?b=!0:d.start+d.count>c.total&&d.count==c.length&&(b=!0):d.count==c.length&&(b=!0);this.nextButton.style.display=b?"":"none";n.set(this.nextButton,"id",this.id+"_next")},clearResultList:function(){for(var c=this.containerNode;2<c.childNodes.length;)c.removeChild(c.childNodes[c.childNodes.length-
2]);this._setSelectedAttr(null)},highlightFirstOption:function(){this.selectFirstNode()},highlightLastOption:function(){this.selectLastNode()},selectFirstNode:function(){this.inherited(arguments);this.getHighlightedOption()==this.previousButton&&this.selectNextNode()},selectLastNode:function(){this.inherited(arguments);this.getHighlightedOption()==this.nextButton&&this.selectPreviousNode()},getHighlightedOption:function(){return this.selected}});l("dojo-bidi")&&(d=c("dijit.form._ComboBoxMenuMixin",
d,{_createOption:function(){var c=this.inherited(arguments);this.applyTextDir(c);return c}}));return d})},"dijit/form/_ListMouseMixin":function(){define(["dojo/_base/declare","dojo/on","dojo/touch","./_ListBase"],function(p,c,n,l){return p("dijit.form._ListMouseMixin",l,{postCreate:function(){this.inherited(arguments);this.domNode.dojoClick=!0;this._listConnect("click","_onClick");this._listConnect("mousedown","_onMouseDown");this._listConnect("mouseup","_onMouseUp");this._listConnect("mouseover",
"_onMouseOver");this._listConnect("mouseout","_onMouseOut")},_onClick:function(c,d){this._setSelectedAttr(d,!1);this._deferredClick&&this._deferredClick.remove();this._deferredClick=this.defer(function(){this._deferredClick=null;this.onClick(d)})},_onMouseDown:function(c,d){this._hoveredNode&&(this.onUnhover(this._hoveredNode),this._hoveredNode=null);this._isDragging=!0;this._setSelectedAttr(d,!1)},_onMouseUp:function(c,d){this._isDragging=!1;var h=this.selected,g=this._hoveredNode;h&&d==h?this.defer(function(){this._onClick(c,
h)}):g&&this.defer(function(){this._onClick(c,g)})},_onMouseOut:function(c,d){this._hoveredNode&&(this.onUnhover(this._hoveredNode),this._hoveredNode=null);this._isDragging&&(this._cancelDrag=(new Date).getTime()+1E3)},_onMouseOver:function(c,d){this._cancelDrag&&((new Date).getTime()>this._cancelDrag&&(this._isDragging=!1),this._cancelDrag=null);this._hoveredNode=d;this.onHover(d);this._isDragging&&this._setSelectedAttr(d,!1)}})})},"dijit/form/_ListBase":function(){define(["dojo/_base/declare","dojo/on",
"dojo/window"],function(p,c,n){return p("dijit.form._ListBase",null,{selected:null,_listConnect:function(l,k){var d=this;return d.own(c(d.containerNode,c.selector(function(c,d,f){return c.parentNode==f},l),function(c){d[k](c,this)}))},selectFirstNode:function(){for(var c=this.containerNode.firstChild;c&&"none"==c.style.display;)c=c.nextSibling;this._setSelectedAttr(c,!0)},selectLastNode:function(){for(var c=this.containerNode.lastChild;c&&"none"==c.style.display;)c=c.previousSibling;this._setSelectedAttr(c,
!0)},selectNextNode:function(){var c=this.selected;if(c){for(c=c.nextSibling;c&&"none"==c.style.display;)c=c.nextSibling;c?this._setSelectedAttr(c,!0):this.selectFirstNode()}else this.selectFirstNode()},selectPreviousNode:function(){var c=this.selected;if(c){for(c=c.previousSibling;c&&"none"==c.style.display;)c=c.previousSibling;c?this._setSelectedAttr(c,!0):this.selectLastNode()}else this.selectLastNode()},_setSelectedAttr:function(c,k){if(this.selected!=c){var d=this.selected;if(d)this.onDeselect(d);
c&&(k&&n.scrollIntoView(c),this.onSelect(c));this._set("selected",c)}else if(c)this.onSelect(c)}})})},"url:jimu/dijit/templates/LoadingShelter.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"loading-container"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"imgDiv" class\x3d"img-div"\x3e\r\n      \x3c/div\x3e\r\n      \x3cp data-dojo-attach-point\x3d"textNode"\x3e\x3c/p\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',"url:dijit/templates/Menu.html":'\x3ctable class\x3d"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role\x3d"menu" tabIndex\x3d"${tabIndex}"\r\n\t   cellspacing\x3d"0"\x3e\r\n\t\x3ctbody class\x3d"dijitReset" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/tbody\x3e\r\n\x3c/table\x3e\r\n',
"url:dijit/templates/MenuItem.html":'\x3ctr class\x3d"dijitReset" data-dojo-attach-point\x3d"focusNode" role\x3d"menuitem" tabIndex\x3d"-1"\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemIconCell" role\x3d"presentation"\x3e\r\n\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitMenuItemIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemLabel" colspan\x3d"2" data-dojo-attach-point\x3d"containerNode,textDirNode"\r\n\t\trole\x3d"presentation"\x3e\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemAccelKey" style\x3d"display: none" data-dojo-attach-point\x3d"accelKeyNode"\x3e\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuArrowCell" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"arrowWrapper" style\x3d"visibility: hidden"\x3e\r\n\t\t\t\x3cspan class\x3d"dijitInline dijitIcon dijitMenuExpand"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan class\x3d"dijitMenuExpandA11y"\x3e+\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/td\x3e\r\n\x3c/tr\x3e\r\n',
"url:dijit/templates/CheckedMenuItem.html":'\x3ctr class\x3d"dijitReset" data-dojo-attach-point\x3d"focusNode" role\x3d"${role}" tabIndex\x3d"-1" aria-checked\x3d"${checked}"\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemIconCell" role\x3d"presentation"\x3e\r\n\t\t\x3cspan class\x3d"dijitInline dijitIcon dijitMenuItemIcon dijitCheckedMenuItemIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\t\x3cspan class\x3d"dijitMenuItemIconChar dijitCheckedMenuItemIconChar"\x3e${!checkedChar}\x3c/span\x3e\r\n\t\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemLabel" colspan\x3d"2" data-dojo-attach-point\x3d"containerNode,labelNode,textDirNode"\x3e\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemAccelKey" style\x3d"display: none" data-dojo-attach-point\x3d"accelKeyNode"\x3e\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuArrowCell" role\x3d"presentation"\x3e\x26#160;\x3c/td\x3e\r\n\x3c/tr\x3e\r\n',
"url:dijit/templates/MenuSeparator.html":'\x3ctr class\x3d"dijitMenuSeparator" role\x3d"separator"\x3e\r\n\t\x3ctd class\x3d"dijitMenuSeparatorIconCell"\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\r\n\t\x3c/td\x3e\r\n\t\x3ctd colspan\x3d"3" class\x3d"dijitMenuSeparatorLabelCell"\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop dijitMenuSeparatorLabel"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\r\n\t\x3c/td\x3e\r\n\x3c/tr\x3e\r\n',
"url:dijit/form/templates/Select.html":'\x3ctable class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tdata-dojo-attach-point\x3d"_buttonNode,tableNode,focusNode,_popupStateNode" cellspacing\x3d\'0\' cellpadding\x3d\'0\'\r\n\trole\x3d"listbox" aria-haspopup\x3d"true"\r\n\t\x3e\x3ctbody role\x3d"presentation"\x3e\x3ctr role\x3d"presentation"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitStretch dijitButtonContents" role\x3d"presentation"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitButtonText"  data-dojo-attach-point\x3d"containerNode,textDirNode" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitValidationContainer"\r\n\t\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t\t\t/\x3e\x3c/div\r\n\t\t\t\x3e\x3cinput type\x3d"hidden" ${!nameAttrSetting} data-dojo-attach-point\x3d"valueNode" value\x3d"${value}" aria-hidden\x3d"true"\r\n\t\t/\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode" role\x3d"presentation"\r\n\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitArrowButtonInner" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t\t\t\t${_buttonInputDisabled}\r\n\t\t/\x3e\x3c/td\r\n\t\x3e\x3c/tr\x3e\x3c/tbody\r\n\x3e\x3c/table\x3e\r\n',
"url:dijit/form/templates/Spinner.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tid\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitButtonNode dijitSpinnerButtonContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitSpinnerButtonInner" type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t\t/\x3e\x3cdiv class\x3d"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton"\r\n\t\t\tdata-dojo-attach-point\x3d"upArrowNode"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitArrowButtonInner"\r\n\t\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField" value\x3d"\x26#9650; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t\t\t\t\t${_buttonInputDisabled}\r\n\t\t\t/\x3e\x3c/div\r\n\t\t\x3e\x3c/div\r\n\t\t\x3e\x3cdiv class\x3d"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton"\r\n\t\t\tdata-dojo-attach-point\x3d"downArrowNode"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitArrowButtonInner"\r\n\t\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t\t\t\t\t${_buttonInputDisabled}\r\n\t\t\t/\x3e\x3c/div\r\n\t\t\x3e\x3c/div\r\n\t\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t/\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d\'dijitReset dijitInputInner\' data-dojo-attach-point\x3d"textbox,focusNode" type\x3d"${type}" data-dojo-attach-event\x3d"onkeydown:_onKeyDown"\r\n\t\t\trole\x3d"spinbutton" autocomplete\x3d"off" ${!nameAttrSetting}\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"url:dijit/templates/ColorPalette.html":'\x3cdiv class\x3d"dijitInline dijitColorPalette" role\x3d"grid"\x3e\r\n\t\x3ctable data-dojo-attach-point\x3d"paletteTableNode" class\x3d"dijitPaletteTable" cellSpacing\x3d"0" cellPadding\x3d"0" role\x3d"presentation"\x3e\r\n\t\t\x3ctbody data-dojo-attach-point\x3d"gridNode"\x3e\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\x3c/div\x3e\r\n',"url:dijit/form/templates/HorizontalSlider.html":'\x3ctable class\x3d"dijit dijitReset dijitSlider dijitSliderH" cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0" rules\x3d"none" data-dojo-attach-event\x3d"onkeydown:_onKeyDown, onkeyup:_onKeyUp"\r\n\trole\x3d"presentation"\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\t\x3e\x3ctd data-dojo-attach-point\x3d"topDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderDecrementIconH" style\x3d"display:none" data-dojo-attach-point\x3d"decrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e-\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper" data-dojo-attach-event\x3d"press:_onClkDecBumper"\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cinput data-dojo-attach-point\x3d"valueNode" type\x3d"hidden" ${!nameAttrSetting}\r\n\t\t\t/\x3e\x3cdiv class\x3d"dijitReset dijitSliderBarContainerH" role\x3d"presentation" data-dojo-attach-point\x3d"sliderBarContainer"\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"progressBar" class\x3d"dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH" data-dojo-attach-event\x3d"press:_onBarClick"\r\n\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderMoveable dijitSliderMoveableH"\r\n\t\t\t\t\t\t\x3e\x3cdiv data-dojo-attach-point\x3d"sliderHandle,focusNode" class\x3d"dijitSliderImageHandle dijitSliderImageHandleH" data-dojo-attach-event\x3d"press:_onHandleClick" role\x3d"slider"\x3e\x3c/div\r\n\t\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"remainingBar" class\x3d"dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH" data-dojo-attach-event\x3d"press:_onBarClick"\x3e\x3c/div\r\n\t\t\t\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper" data-dojo-attach-event\x3d"press:_onClkIncBumper"\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderIncrementIconH" style\x3d"display:none" data-dojo-attach-point\x3d"incrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e+\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\t\x3e\x3ctd data-dojo-attach-point\x3d"containerNode,bottomDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\x3e\x3c/table\x3e\r\n',
"url:dijit/form/templates/CheckBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\r\n\t\x3e\x3cinput\r\n\t \t${!nameAttrSetting} type\x3d"${type}" role\x3d"${type}" aria-checked\x3d"false" ${checkedAttrSetting}\r\n\t\tclass\x3d"dijitReset dijitCheckBoxInput"\r\n\t\tdata-dojo-attach-point\x3d"focusNode"\r\n\t \tdata-dojo-attach-event\x3d"ondijitclick:_onClick"\r\n/\x3e\x3c/div\x3e\r\n',"url:dijit/form/templates/DropDownBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tid\x3d"widget_${id}"\r\n\trole\x3d"combobox"\r\n\taria-haspopup\x3d"true"\r\n\tdata-dojo-attach-point\x3d"_popupStateNode"\r\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\'\r\n\t\tdata-dojo-attach-point\x3d"_buttonNode" role\x3d"presentation"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitArrowButtonInner" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"button presentation" aria-hidden\x3d"true"\r\n\t\t\t${_buttonInputDisabled}\r\n\t/\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t/\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d\'dijitReset dijitInputInner\' ${!nameAttrSetting} type\x3d"${type}" autocomplete\x3d"off"\r\n\t\t\tdata-dojo-attach-point\x3d"textbox,focusNode" role\x3d"textbox"\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"*now":function(p){p(['dojo/i18n!*preload*jimu/nls/main*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","vi","uk","zh-hk","zh-tw","ROOT"]'])}}});
define("./ConfigManager ./LayoutManager ./DataManager dojo/_base/html dojo/_base/lang dojo/_base/array dojo/on dojo/mouse dojo/topic dojo/cookie dojo/Deferred dojo/promise/all dojo/io-query dojo/domReady! esri/config esri/request esri/core/urlUtils esri/identity/IdentityManager jimu/portalUrlUtils ./utils require dojo/i18n dojo/i18n!./nls/main dojo/ready".split(" "),function(p,c,n,l,k,d,h,g,f,b,a,e,m,q,u,t,r,x,w,v,y,z,A,B){function D(){var a=window.location.search;if(""===a)return{};var a=m.queryToObject(a.substr(1)),
b;for(b in a)a[b]=v.sanitizeHTML(a[b]);return a}d={};f=v.getEsriConfigRequestObject();f.timeout=18E4;"function"!==typeof b.getAll&&(b.getAll=function(a){var c=[];(a=b(a))&&c.push(a);return c});window.jimuNls=A;x.setProtocolErrorHandler(function(){return!0});x=v.getAncestorWindow();var C=!1;try{C=0===x.location.href.indexOf("https://")}catch(H){}var E=/\/SceneServer\/layers\/\d+\/?$/;f.interceptors=[{before:function(a){a&&"object"===typeof a.requestOptions&&!a.requestOptions.content&&E.test(a.url)&&
(a.content={f:"json"});a.requestOptions.query&&a.requestOptions.query.printFlag&&(a.timeout=3E5);C&&(a.url=a.url.replace(/^http(s?):\/\//gi,"https://"));-1===a.url.indexOf("/queryRelatedRecords?")||v.isHostedService(a.url)||(a.url=a.url.replace("FeatureServer","MapServer"))}}];h(window,"mousedown",function(a){if(g.isMiddle(a))return a.preventDefault(),a.stopPropagation(),a.returnValue=!1});String.prototype.startWith=function(a){return this.substr(0,a.length)===a?!0:!1};String.prototype.endWith=function(a){return this.substr(this.length-
a.length,a.length)===a?!0:!1};"undefined"===typeof jimuConfig&&(jimuConfig={});jimuConfig=k.mixin({loadingId:"main-loading",loadingImageId:"app-loading",loadingGifId:"loading-gif",layoutId:"jimu-layout-manager",mapId:"map",mainPageId:"main-page",timeout:5E3,breakPoints:[600,1280]},jimuConfig);window.wabVersion="2.13";window.productVersion="Online 7.2";d.initApp=function(){var a,b;console.log("jimu.js init...");a=D();n.getInstance();l.setStyle(jimuConfig.loadingId,"display","none");l.setStyle(jimuConfig.mainPageId,
"display","block");b=c.getInstance({mapId:jimuConfig.mapId,urlParams:a},jimuConfig.layoutId);a=p.getInstance(a);b.startup();a.loadConfig();B(function(){setTimeout(function(){l.removeClass(document.body,"dj_a11y")},50)})};return d});